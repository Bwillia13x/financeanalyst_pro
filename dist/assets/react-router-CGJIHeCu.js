import{r as e}from"./react-DbKEDq5F.js";import{p as t,A as n,c as a,b as r}from"./vendor-DYwn_Zoo.js";function l(e,t){throw new Error(t)}const i=e.createContext(null),s=e.createContext(null),o=e.createContext({outlet:null,matches:[]});function c(t){return e.useContext(o).outlet}function u(e){l()}function h(a){let{basename:r="/",children:o=null,location:c,navigationType:u=n.Pop,navigator:h,static:p=!1}=a;f()&&l();let m=M(r),d=e.useMemo(()=>({basename:m,navigator:h,static:p}),[m,h,p]);"string"==typeof c&&(c=t(c));let{pathname:g="/",search:v="",hash:y="",state:x=null,key:C="default"}=c,b=e.useMemo(()=>{let e=j(g,m);return null==e?null:{pathname:e,search:v,hash:y,state:x,key:C}},[m,g,v,y,x,C]);return null==b?null:e.createElement(i.Provider,{value:d},e.createElement(s.Provider,{children:o,value:{location:b,navigationType:u}}))}function p(n){let{children:a,location:r}=n;return function(n,a){f()||l();let r,{matches:i}=e.useContext(o),s=i[i.length-1],u=s?s.params:{},h=s?s.pathnameBase:"/",p=m();if(a){var d;let e="string"==typeof a?t(a):a;"/"===h||(null==(d=e.pathname)?void 0:d.startsWith(h))||l(),r=e}else r=p;let g=r.pathname||"/",v=function(e,t,n){void 0===n&&(n="/");let a=j(t.pathname||"/",n);if(null==a)return null;let r=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let l=null;for(let i=0;null==l&&i<r.length;++i)l=B(r[i],e,a);return l}(n,{pathname:"/"===h?g:g.slice(h.length)||"/"});return function(t,n){return void 0===n&&(n=[]),null==t?null:t.reduceRight((a,r,l)=>e.createElement(o.Provider,{children:void 0!==r.route.element?r.route.element:e.createElement(c,null),value:{outlet:a,matches:n.concat(t.slice(0,l+1))}}),null)}(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:k([h,e.pathname]),pathnameBase:"/"===e.pathnameBase?h:k([h,e.pathnameBase])})),i)}(v(a),r)}function f(){return null!=e.useContext(s)}function m(){return f()||l(),e.useContext(s).location}function d(){f()||l();let{basename:t,navigator:n}=e.useContext(i),{matches:a}=e.useContext(o),{pathname:r}=m(),s=JSON.stringify(a.map(e=>e.pathnameBase)),c=e.useRef(!1);return e.useEffect(()=>{c.current=!0}),e.useCallback(function(e,a){if(void 0===a&&(a={}),!c.current)return;if("number"==typeof e)return void n.go(e);let l=W(e,JSON.parse(s),r);"/"!==t&&(l.pathname=k([t,l.pathname])),(a.replace?n.replace:n.push)(l,a.state)},[t,n,s,r])}function g(t){let{matches:n}=e.useContext(o),{pathname:a}=m(),r=JSON.stringify(n.map(e=>e.pathnameBase));return e.useMemo(()=>W(t,JSON.parse(r),a),[t,r,a])}function v(t){let n=[];return e.Children.forEach(t,t=>{if(!e.isValidElement(t))return;if(t.type===e.Fragment)return void n.push.apply(n,v(t.props.children));t.type!==u&&l();let a={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(a.children=v(t.props.children)),n.push(a)}),n}function y(e,t,n,a){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a=""),e.forEach((e,r)=>{let i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:r};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(a)||l(),i.relativePath=i.relativePath.slice(a.length));let s=k([a,i.relativePath]),o=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&l(),y(e.children,t,o,s)),(null!=e.path||e.index)&&t.push({path:s,score:S(s,e.index),routesMeta:o})}),t}const x=/^:\w+$/,C=3,b=2,E=1,$=10,w=-2,P=e=>"*"===e;function S(e,t){let n=e.split("/"),a=n.length;return n.some(P)&&(a+=w),t&&(a+=b),n.filter(e=>!P(e)).reduce((e,t)=>e+(x.test(t)?C:""===t?E:$),a)}function B(e,t,n){let a=t,{routesMeta:r}=e,l={},i="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],t=o===r.length-1,c="/"===i?n:n.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:t},c);if(!u)return null;Object.assign(l,u.params);let h=a[e.childrenIndex];s.push({params:l,pathname:k([i,u.pathname]),pathnameBase:k([i,u.pathnameBase]),route:h}),"/"!==u.pathnameBase&&(i=k([i,u.pathnameBase])),a=h.children}return s}function O(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0);let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(a.push(t),"([^\\/]+)"));return e.endsWith("*")?(a.push("*"),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r+=n?"\\/*$":"(?:\\b|$)",[new RegExp(r,t?void 0:"i"),a]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let l=r[0],i=l.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:a.reduce((e,t,n)=>{if("*"===t){let e=s[n]||"";i=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e){try{return decodeURIComponent(e)}catch(t){return e}}(s[n]||""),e},{}),pathname:l,pathnameBase:i,pattern:e}}function W(e,n,a){let r,l="string"==typeof e?t(e):e,i=""===e||""===l.pathname?"/":l.pathname;if(null==i)r=a;else{let e=n.length-1;if(i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;l.pathname=t.join("/")}r=e>=0?n[e]:"/"}let s=function(e,n){void 0===n&&(n="/");let{pathname:a,search:r="",hash:l=""}="string"==typeof e?t(e):e,i=a?a.startsWith("/")?a:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(a,n):n;return{pathname:i,search:R(r),hash:I(l)}}(l,r);return i&&"/"!==i&&i.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function j(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}const k=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",I=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(){return J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J.apply(this,arguments)}const K=["onClick","reloadDocument","replace","state","target","to"];function L(t){let{basename:n,children:r,window:l}=t,i=e.useRef();null==i.current&&(i.current=a({window:l}));let s=i.current,[o,c]=e.useState({action:s.action,location:s.location});return e.useLayoutEffect(()=>s.listen(c),[s]),e.createElement(h,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:s})}const N=e.forwardRef(function(n,a){let{onClick:s,reloadDocument:o,replace:c=!1,state:u,target:h,to:p}=n,v=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(n,K),y=function(n){f()||l();let{basename:a,navigator:r}=e.useContext(i),{hash:s,pathname:o,search:c}=g(n),u=o;if("/"!==a){let e=function(e){return""===e||""===e.pathname?"/":"string"==typeof e?t(e).pathname:e.pathname}(n),r=null!=e&&e.endsWith("/");u="/"===o?a+(r?"/":""):k([a,o])}return r.createHref({pathname:u,search:c,hash:s})}(p),x=function(t,n){let{target:a,replace:l,state:i}=void 0===n?{}:n,s=d(),o=m(),c=g(t);return e.useCallback(e=>{if(!(0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))){e.preventDefault();let n=!!l||r(o)===r(c);s(t,{replace:n,state:i})}},[o,s,c,l,i,a,t])}(p,{replace:c,state:u,target:h});return e.createElement("a",J({},v,{href:y,onClick:function(e){s&&s(e),e.defaultPrevented||o||x(e)},ref:a,target:h}))});export{L as B,N as L,p as R,u as a,d as b,m as u};
//# sourceMappingURL=react-router-CGJIHeCu.js.map
