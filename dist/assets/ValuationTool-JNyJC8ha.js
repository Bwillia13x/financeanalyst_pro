import{r as e,l as s,m as a,k as t,j as r,M as l,X as n,z as i,T as c,E as d,F as o,G as x,I as m,J as h,e as u,N as g,O as p,Q as b,V as y,D as j,Y as f,y as v}from"./react-vendor-CaXMqa0k.js";import{m as N,A as w}from"./ui-vendor-DOXsx3JB.js";import{ResponsiveContainer as C,LineChart as k,Line as R,XAxis as F,YAxis as P,Tooltip as D,CartesianGrid as S,Legend as T}from"./charts-vendor-DVkUTdXq.js";import{I as $}from"./index-DPdPN0n0.js";import{S as M}from"./SEOHead-DhiHNgzz.js";import{B as A}from"./Button-DP1W3JTY.js";import{C as G}from"./Card-CWZtCt1D.js";import{I as Y}from"./Input-Cd7DyeLJ.js";import"./Select-vzzrcgG8.js";import"./vendor-zO7HU-o7.js";import"./utils-vendor-Cj_bvvWu.js";import"./data-vendor-DpIj8wd6.js";import"./state-vendor-DL0PFC30.js";const E=({moduleId:x,companyData:m,inputs:h,results:u,onInputChange:g,onFocus:p,onRemove:b,isCompact:y=!1,isFullscreen:j=!1})=>{const[f,v]=e.useState("assumptions"),w=e.useMemo(()=>u?.freeCashFlows?u.years.map((e,s)=>({year:`Y${e}`,fcf:u.freeCashFlows[s]/1e6,pv:u.presentValues[s]/1e6})):[],[u]),T={dcf:{name:"DCF Analysis",icon:t,color:"blue",description:"Discounted cash flow valuation model"},comparables:{name:"Comparable Analysis",icon:a,color:"green",description:"Peer group valuation analysis"},lbo:{name:"LBO Analysis",icon:s,color:"purple",description:"Leveraged buyout return analysis"}}[x],$=T.icon,M=({label:e,value:s,min:a,max:t,step:l,suffix:n="",onChange:i})=>r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),r.jsxs("span",{className:"text-sm font-mono text-gray-900 bg-gray-100 px-2 py-1 rounded",children:[s.toFixed(l<1?1:0),n]})]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"range",min:a,max:t,step:l,value:s,onChange:e=>i(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, rgb(59 130 246) 0%, rgb(59 130 246) ${(s-a)/(t-a)*100}%, rgb(229 231 235) ${(s-a)/(t-a)*100}%, rgb(229 231 235) 100%)`}})})]});return r.jsx(N.div,{layout:!0,className:""+(j?"":"bg-white border border-gray-100 rounded-2xl overflow-hidden"),children:(()=>{switch(x){case"dcf":return(()=>{if(!h)return null;const e=(e,s)=>{g({[e]:s})},s=(e,s,a)=>{const t={...h.yearlyData,[e]:{...h.yearlyData?.[e],[s]:a}};g({yearlyData:t})};return y?r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-10 h-10 bg-${T.color}-100 rounded-lg flex items-center justify-center`,children:r.jsx($,{className:`w-5 h-5 text-${T.color}-600`})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:T.name}),r.jsx("p",{className:"text-sm text-gray-500",children:T.description})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:r.jsx(l,{className:"w-4 h-4"})}),r.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:r.jsx(n,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(M,{label:"Terminal Growth Rate",value:100*(h.terminalGrowthRate||.025),min:0,max:5,step:.1,suffix:"%",onChange:s=>e("terminalGrowthRate",s/100)}),r.jsx(M,{label:"Discount Rate (WACC)",value:100*(h.discountRate||.12),min:5,max:20,step:.1,suffix:"%",onChange:s=>e("discountRate",s/100)})]}),u&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Enterprise Value"}),r.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",(u.enterpriseValue/1e9).toFixed(1),"B"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Implied Price"}),r.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",u.impliedSharePrice?.toFixed(2)||"0.00"]})]})]}),w.length>0&&r.jsx("div",{className:"h-32",children:r.jsx(C,{width:"100%",height:"100%",children:r.jsxs(k,{data:w,children:[r.jsx(R,{type:"monotone",dataKey:"fcf",stroke:"#3B82F6",strokeWidth:2,dot:!1}),r.jsx(F,{dataKey:"year",tick:{fontSize:10}}),r.jsx(P,{tick:{fontSize:10}}),r.jsx(D,{formatter:e=>[`$${e.toFixed(0)}M`,"FCF"],labelStyle:{color:"#374151"}})]})})})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Model Assumptions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(M,{label:"Current Revenue",value:h.currentRevenue||0,min:1e6,max:1e12,step:1e6,suffix:"",onChange:s=>e("currentRevenue",s)}),r.jsx(M,{label:"Terminal Growth Rate",value:100*(h.terminalGrowthRate||.025),min:0,max:5,step:.1,suffix:"%",onChange:s=>e("terminalGrowthRate",s/100)}),r.jsx(M,{label:"Discount Rate (WACC)",value:100*(h.discountRate||.12),min:5,max:20,step:.1,suffix:"%",onChange:s=>e("discountRate",s/100)})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(M,{label:"Projection Years",value:h.projectionYears||5,min:3,max:10,step:1,suffix:" years",onChange:s=>e("projectionYears",s)}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Year 1 Assumptions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(M,{label:"Revenue Growth",value:h.yearlyData?.[1]?.revenueGrowth||10,min:-10,max:50,step:.5,suffix:"%",onChange:e=>s(1,"revenueGrowth",e)}),r.jsx(M,{label:"EBITDA Margin",value:h.yearlyData?.[1]?.ebitdaMargin||20,min:0,max:50,step:.5,suffix:"%",onChange:e=>s(1,"ebitdaMargin",e)})]})]})]})]})]}),u&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1 space-y-4",children:r.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valuation Results"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(i,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Enterprise Value"})]}),r.jsxs("span",{className:"text-lg font-bold text-blue-900",children:["$",(u.enterpriseValue/1e9).toFixed(1),"B"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(c,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-sm font-medium text-green-900",children:"Equity Value"})]}),r.jsxs("span",{className:"text-lg font-bold text-green-900",children:["$",(u.equityValue/1e9).toFixed(1),"B"]})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(d,{className:"w-4 h-4 text-purple-600"}),r.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Implied Price"})]}),r.jsxs("span",{className:"text-lg font-bold text-purple-900",children:["$",u.impliedSharePrice?.toFixed(2)||"0.00"]})]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Free Cash Flow Projection"}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[r.jsx(o,{className:"w-4 h-4"}),r.jsxs("span",{children:[h.projectionYears||5," Year Model"]})]})]}),r.jsx("div",{className:"h-64",children:r.jsx(C,{width:"100%",height:"100%",children:r.jsxs(k,{data:w,children:[r.jsx(S,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),r.jsx(F,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#64748b"}}),r.jsx(P,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#64748b"},tickFormatter:e=>`$${e}M`}),r.jsx(D,{formatter:(e,s)=>[`$${e.toFixed(0)}M`,"fcf"===s?"Free Cash Flow":"Present Value"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),r.jsx(R,{type:"monotone",dataKey:"fcf",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:0,r:4},name:"fcf"}),r.jsx(R,{type:"monotone",dataKey:"pv",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:0,r:4},name:"pv"})]})})})]})})]})]})})();case"comparables":return r.jsxs("div",{className:"p-6 text-center text-gray-500",children:[r.jsx(a,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Comparable analysis module coming soon"})]});case"lbo":return r.jsxs("div",{className:"p-6 text-center text-gray-500",children:[r.jsx(s,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"LBO analysis module coming soon"})]});default:return null}})()})},B=({company:e,compact:s=!1})=>{if(!e)return null;const a=e=>e>=1e12?`$${(e/1e12).toFixed(1)}T`:e>=1e9?`$${(e/1e9).toFixed(1)}B`:e>=1e6?`$${(e/1e6).toFixed(1)}M`:`$${e.toFixed(2)}`,t=e.financials?.revenue?.map((s,a)=>({year:e.financials.years[a],revenue:s/1e9}))||[],l=(e=>{if(!e||e.length<2)return 0;const s=e[e.length-1],a=e[e.length-2];return(s-a)/a*100})(e.financials?.revenue);return s?r.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 border border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:r.jsx(x,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),r.jsx("p",{className:"text-sm text-gray-500",children:e.sector})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",e.price]}),r.jsxs("div",{className:"text-sm flex items-center justify-end "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[r.jsx(c,{className:"w-4 h-4 mr-1 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]})}):r.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:r.jsx(x,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-1",children:e.name}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:e.ticker}),r.jsx("span",{children:e.sector}),r.jsxs("span",{children:["Market Cap: ",a(e.marketCap)]})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-4xl font-light text-gray-900 mb-1",children:["$",e.price]}),r.jsxs("div",{className:"text-lg flex items-center justify-end "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[r.jsx(c,{className:"w-5 h-5 mr-2 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.change.toFixed(2)," (",e.changePercent.toFixed(2),"%)"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Revenue Trend"}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[r.jsx(o,{className:"w-4 h-4"}),r.jsxs("span",{children:[e.financials?.years?.[0]," - ",e.financials?.years?.slice(-1)]})]})]}),r.jsx("div",{className:"h-48",children:r.jsx(C,{width:"100%",height:"100%",children:r.jsxs(k,{data:t,children:[r.jsx(F,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"}}),r.jsx(P,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>`$${e}B`}),r.jsx(R,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:0,r:4},activeDot:{r:6,stroke:"#3B82F6",strokeWidth:2,fill:"#fff"}})]})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Latest Revenue"}),r.jsx(i,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:a(e.financials?.revenue?.slice(-1)[0]||0)}),r.jsxs("div",{className:"text-sm mt-1 "+(l>=0?"text-green-600":"text-red-600"),children:[l>=0?"+":"",l.toFixed(1),"% YoY"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Market Cap"}),r.jsx(c,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:a(e.marketCap)}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Public Market"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Sector"}),r.jsx(x,{className:"w-4 h-4 text-gray-400"})]}),r.jsx("div",{className:"text-lg font-medium text-gray-900",children:e.sector}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Industry Classification"})]})]})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Financial data loaded • Ready for analysis"})]})})]})},L=({onCompanySelect:s})=>{const[a,t]=e.useState(""),[l,n]=e.useState([]),[i,d]=e.useState(!1),o=[{id:"AAPL",name:"Apple Inc.",ticker:"AAPL",sector:"Technology",marketCap:3e12,price:175.84,change:2.34,changePercent:1.35,financials:{revenue:[274515e6,294135e6,365817e6,383285e6,394328e6],years:[2019,2020,2021,2022,2023]}},{id:"MSFT",name:"Microsoft Corporation",ticker:"MSFT",sector:"Technology",marketCap:28e11,price:378.85,change:-1.23,changePercent:-.32,financials:{revenue:[125843e6,143015e6,168088e6,19827e7,211915e6],years:[2019,2020,2021,2022,2023]}},{id:"GOOGL",name:"Alphabet Inc.",ticker:"GOOGL",sector:"Technology",marketCap:21e11,price:142.56,change:3.21,changePercent:2.3,financials:{revenue:[161857e6,182527e6,257637e6,282836e6,307394e6],years:[2019,2020,2021,2022,2023]}},{id:"JNJ",name:"Johnson & Johnson",ticker:"JNJ",sector:"Healthcare",marketCap:45e10,price:156.78,change:.89,changePercent:.57,financials:{revenue:[82059e6,82584e6,93775e6,94943e6,85159e6],years:[2019,2020,2021,2022,2023]}},{id:"PFE",name:"Pfizer Inc.",ticker:"PFE",sector:"Healthcare",marketCap:32e10,price:28.95,change:-.45,changePercent:-1.53,financials:{revenue:[5175e7,41908e6,81288e6,10033e7,58496e6],years:[2019,2020,2021,2022,2023]}}];e.useEffect(()=>{if(a.length>0){d(!0);const e=setTimeout(()=>{const e=o.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())||e.ticker.toLowerCase().includes(a.toLowerCase()));n(e),d(!1)},300);return()=>clearTimeout(e)}n([]),d(!1)},[a]);const h=e=>{s(e),t(""),n([])};return r.jsxs("div",{className:"relative max-w-lg mx-auto",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(m,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:a,onChange:e=>t(e.target.value),className:"block w-full pl-10 pr-3 py-4 border border-gray-200 rounded-2xl leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",placeholder:"Search companies (e.g., Apple, AAPL)"})]}),r.jsx(w,{children:(l.length>0||i)&&r.jsx(N.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-10 mt-2 w-full bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:i?r.jsxs("div",{className:"p-4 text-center text-gray-500",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-sm",children:"Searching..."})]}):r.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.map(e=>{return r.jsx(N.button,{onClick:()=>h(e),whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)"},className:"w-full p-4 text-left border-b border-gray-50 last:border-b-0 focus:outline-none focus:bg-blue-50 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(x,{className:"w-5 h-5 text-white"})})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:e.ticker})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.sector," • Market Cap: ",(s=e.marketCap,s>=1e12?`$${(s/1e12).toFixed(1)}T`:s>=1e9?`$${(s/1e9).toFixed(1)}B`:s>=1e6?`$${(s/1e6).toFixed(1)}M`:`$${s.toFixed(2)}`)]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",e.price]}),r.jsxs("div",{className:"text-xs flex items-center "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[r.jsx(c,{className:"w-3 h-3 mr-1 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]})},e.id);var s})})})}),!a&&r.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Popular Companies"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.slice(0,4).map(e=>r.jsx(N.button,{onClick:()=>h(e),whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-3 bg-white border border-gray-200 rounded-xl hover:border-blue-300 transition-all text-left",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:r.jsx(x,{className:"w-4 h-4 text-white"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.ticker}),r.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.name})]})]})},e.id))})]})]})},I={type:"spring",stiffness:400,damping:25},V=()=>{const[l,n]=e.useState(null),[i,c]=e.useState([]),[d,o]=e.useState("overview"),[x,p]=e.useState(null),[b,y]=e.useState({profile:null,financials:null,marketData:null,consensus:null}),[j,f]=e.useState({dcf:{currentRevenue:0,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,yearlyData:{},balanceSheet:{}}}),[v,C]=e.useState({}),k=[{id:"dcf",name:"DCF Analysis",icon:t,description:"Discounted Cash Flow valuation",color:"blue",isPrimary:!0},{id:"comparables",name:"Comparable Analysis",icon:a,description:"Peer comparison analysis",color:"green",isPrimary:!0},{id:"lbo",name:"LBO Analysis",icon:s,description:"Leveraged buyout modeling",color:"purple",isPrimary:!1}],R=e.useCallback(async e=>{if(n(e),o("analysis"),e.financials?.revenue){const s=e.financials.revenue[e.financials.revenue.length-1],a=F(e.financials.revenue);f(t=>({...t,dcf:{...t.dcf,currentRevenue:s,yearlyData:P(a,e.sector)}}))}c(["dcf"])},[]),F=e=>{if(!e||e.length<2)return[];const s=[];for(let a=1;a<e.length;a++){const t=(e[a]-e[a-1])/e[a-1]*100;s.push(t)}return s},P=(e,s)=>{const a=e.length>0?e.reduce((e,s)=>e+s,0)/e.length:10,t=D(s),r={};for(let l=1;l<=5;l++){const e=Math.max(a*(1-.1*(l-1)),t.terminalGrowth);r[l]={revenueGrowth:e,ebitdaMargin:t.ebitdaMargin,taxRate:t.taxRate,capexPercent:t.capexPercent,daPercent:t.daPercent,workingCapitalChange:t.workingCapitalChange}}return r},D=e=>{const s={Technology:{ebitdaMargin:25,taxRate:21,capexPercent:3,daPercent:5,workingCapitalChange:1,terminalGrowth:3},Healthcare:{ebitdaMargin:20,taxRate:25,capexPercent:4,daPercent:4,workingCapitalChange:2,terminalGrowth:2.5},default:{ebitdaMargin:18,taxRate:25,capexPercent:5,daPercent:4,workingCapitalChange:2,terminalGrowth:2.5}};return s[e]||s.default},S=e=>{c(s=>s.filter(s=>s!==e)),x===e&&(p(null),o("analysis"))},T=e.useCallback((e,s)=>{if(f(a=>({...a,[e]:{...a[e],...s}})),"dcf"===e){const e=h({...j.dcf,...s});C(s=>({...s,dcf:e}))}},[j]),$={overview:{scale:1,y:0,transition:I},analysis:{scale:1,y:0,transition:I},focused:{scale:1.02,y:-20,transition:I}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[r.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[l?r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>{n(null),o("overview"),c([])},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(u,{size:20})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-light text-gray-900",children:l.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[l.sector," • ",l.ticker]})]})]}):r.jsx("h1",{className:"text-2xl font-light text-gray-900",children:"Analysis Canvas"}),l&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>o("analysis"),className:"px-3 py-1.5 text-sm rounded-full transition-all "+("analysis"===d?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Analysis"}),x&&r.jsx("button",{onClick:()=>o("focused"),className:"px-3 py-1.5 text-sm rounded-full transition-all "+("focused"===d?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Focus"})]})]})})}),r.jsx(N.div,{variants:$,animate:d,className:"max-w-7xl mx-auto px-6 py-8",children:r.jsx(w,{mode:"wait",children:l?"focused"===d&&x?r.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:I,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>o("analysis"),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(g,{className:"w-5 h-5 rotate-180"})}),r.jsx("h2",{className:"text-2xl font-light text-gray-900",children:k.find(e=>e.id===x)?.name})]}),r.jsx("button",{onClick:()=>S(x),className:"text-gray-400 hover:text-red-500 transition-colors",children:"Remove"})]}),r.jsx(E,{moduleId:x,companyData:l,inputs:j[x],results:v[x],onInputChange:e=>T(x,e),isFullscreen:!0})]},"focused-module"):r.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:I,className:"space-y-8",children:[r.jsx(B,{company:l,compact:i.length>0}),i.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(e=>r.jsx(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:I,className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow duration-300",children:r.jsx(E,{moduleId:e,companyData:l,inputs:j[e],results:v[e],onInputChange:s=>T(e,s),onFocus:()=>(e=>{p(e),o("focused")})(e),onRemove:()=>S(e),isCompact:!0})},e))}),r.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Analysis Tools"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:k.filter(e=>!i.includes(e.id)).map(e=>{const s=e.icon;return r.jsxs(N.button,{onClick:()=>{return s=e.id,void(i.includes(s)||c(e=>[...e,s]));var s},whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-6 bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all duration-200 text-left group",children:[r.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 bg-${e.color}-50 rounded-lg mb-3 group-hover:bg-${e.color}-100 transition-colors`,children:r.jsx(s,{className:`w-6 h-6 text-${e.color}-600`})}),r.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600",children:e.description})]},e.id)})})]})]},"analysis-canvas"):r.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:I,className:"text-center py-12",children:r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-50 rounded-full mb-4",children:r.jsx(m,{className:"w-8 h-8 text-blue-600"})}),r.jsx("h2",{className:"text-3xl font-light text-gray-900 mb-3",children:"Begin Your Analysis"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Select a company to start building your financial model"})]}),r.jsx(L,{onCompanySelect:R})]})},"company-selection")})})]})},O=({inputs:s,setInputs:a})=>{const[t,l]=e.useState("simple"),n=(e,s)=>{a(a=>({...a,[e]:parseFloat(s)||0}))},i=(e,t,r)=>{const l=s.yearlyData||{},n={...l,[e]:{...l[e],[t]:parseFloat(r)||0}};a(e=>({...e,yearlyData:n}))},c=(e,t)=>{const r=s.balanceSheet||{};a(s=>({...s,balanceSheet:{...r,[e]:parseFloat(t)||0}}))};e.useEffect(()=>{if(s.projectionYears&&!s.yearlyData){const e={};for(let a=1;a<=s.projectionYears;a++)e[a]={revenueGrowth:100*s.revenueGrowthRate||10,ebitdaMargin:100*s.ebitdaMargin||20,taxRate:100*s.taxRate||25,capexPercent:100*s.capexPercent||3,workingCapitalChange:100*s.workingCapitalPercent||2,daPercent:3};a(s=>({...s,yearlyData:e}))}},[s.projectionYears,s.yearlyData,a]),e.useEffect(()=>{s.balanceSheet||a(e=>({...e,balanceSheet:{cash:1e7,totalDebt:5e6,sharesOutstanding:1e6}}))},[s.balanceSheet,a]);return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"DCF Model Assumptions"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>l("simple"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("simple"===t?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Simple"}),r.jsx("button",{onClick:()=>l("detailed"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("detailed"===t?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Detailed"})]})]}),"simple"===t?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"currentRevenue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Revenue ($)"}),r.jsx("input",{id:"currentRevenue",type:"number",value:s.currentRevenue||0,onChange:e=>n("currentRevenue",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"revenueGrowthRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Revenue Growth Rate (%)"}),r.jsx("input",{id:"revenueGrowthRate",type:"number",step:"0.01",value:100*(s.revenueGrowthRate||0),onChange:e=>n("revenueGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"ebitdaMargin",className:"block text-sm font-medium text-gray-700 mb-1",children:"EBITDA Margin (%)"}),r.jsx("input",{id:"ebitdaMargin",type:"number",step:"0.01",value:100*(s.ebitdaMargin||0),onChange:e=>n("ebitdaMargin",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),r.jsx("input",{id:"taxRate",type:"number",step:"0.01",value:100*(s.taxRate||0),onChange:e=>n("taxRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"terminalGrowthRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Terminal Growth Rate (%)"}),r.jsx("input",{id:"terminalGrowthRate",type:"number",step:"0.01",value:100*(s.terminalGrowthRate||0),onChange:e=>n("terminalGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"discountRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Rate (WACC) (%)"}),r.jsx("input",{id:"discountRate",type:"number",step:"0.01",value:100*(s.discountRate||0),onChange:e=>n("discountRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"projectionYears",className:"block text-sm font-medium text-gray-700 mb-1",children:"Projection Years"}),r.jsx("input",{id:"projectionYears",type:"number",min:"3",max:"10",value:s.projectionYears||5,onChange:e=>n("projectionYears",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):(()=>{const e=Array.from({length:s.projectionYears||5},(e,s)=>s+1),a=s.yearlyData||{},t=s.balanceSheet||{};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Base Year (Current)"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Revenue ($)"}),r.jsx("input",{type:"number",value:s.currentRevenue||0,onChange:e=>n("currentRevenue",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terminal Growth Rate (%)"}),r.jsx("input",{type:"number",step:"0.01",value:100*(s.terminalGrowthRate||0),onChange:e=>n("terminalGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Rate (WACC) (%)"}),r.jsx("input",{type:"number",step:"0.01",value:100*(s.discountRate||0),onChange:e=>n("discountRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:r.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Annual Projections"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),e.map(e=>r.jsxs("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Year ",e]},e))]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Revenue Growth (%)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.revenueGrowth||0,onChange:s=>i(e,"revenueGrowth",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"EBITDA Margin (%)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.ebitdaMargin||0,onChange:s=>i(e,"ebitdaMargin",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Tax Rate (%)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.taxRate||0,onChange:s=>i(e,"taxRate",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"CapEx (% of Revenue)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.capexPercent||0,onChange:s=>i(e,"capexPercent",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"D&A (% of Revenue)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.daPercent||0,onChange:s=>i(e,"daPercent",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Δ Working Capital (% of Rev)"}),e.map(e=>r.jsx("td",{className:"px-4 py-3",children:r.jsx("input",{type:"number",step:"0.1",value:a[e]?.workingCapitalChange||0,onChange:s=>i(e,"workingCapitalChange",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]})]})]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Balance Sheet Items"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cash ($)"}),r.jsx("input",{type:"number",value:t.cash||0,onChange:e=>c("cash",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Debt ($)"}),r.jsx("input",{type:"number",value:t.totalDebt||0,onChange:e=>c("totalDebt",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shares Outstanding"}),r.jsx("input",{type:"number",value:t.sharesOutstanding||0,onChange:e=>c("sharesOutstanding",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})})()]})},_=({onBack:s})=>{const[l,n]=e.useState({currentRevenue:1e8,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,yearlyData:{},balanceSheet:{}}),[i,d]=e.useState(null),[o,x]=e.useState(null),[m,u]=e.useState("inputs"),[g,f]=e.useState(!1);e.useEffect(()=>{const e=setTimeout(()=>{v()},500);return()=>clearTimeout(e)},[l]);const v=async()=>{if(!l.currentRevenue||l.currentRevenue<=0)return d(null),void x(null);f(!0);try{const e=h(l);d(e);const s=p(l);x(s)}catch(e){d(null),x(null)}f(!1)},w=e=>e||0===e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):"$0",$=e=>e||0===e?`${e.toFixed(1)}%`:"0%",M=[{id:"inputs",name:"Model Inputs",icon:t},{id:"results",name:"Results",icon:c},{id:"charts",name:"Charts",icon:a},{id:"sensitivity",name:"Sensitivity",icon:y}];return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center mb-4",children:s&&r.jsxs("button",{onClick:s,className:"flex items-center text-gray-600 hover:text-gray-900 mr-4",children:[r.jsx(b,{className:"w-5 h-5 mr-1"}),"Back to Overview"]})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Enhanced DCF Analysis Tool"}),r.jsx("p",{className:"text-gray-600",children:"Professional discounted cash flow modeling with year-by-year projections and sensitivity analysis"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-8",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:M.map(e=>{const s=e.icon;return r.jsxs("button",{onClick:()=>u(e.id),className:"flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(m===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[r.jsx(s,{className:"w-4 h-4 mr-2"}),e.name]},e.id)})})}),r.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:["inputs"===m&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsx(O,{inputs:l,setInputs:n})}),"results"===m&&r.jsxs("div",{className:"space-y-6",children:[g&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Calculating..."})]}),i&&!g&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Enterprise Value"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(i.enterpriseValue)})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Equity Value"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(i.equityValue)})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Share Price"}),r.jsxs("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",i.impliedSharePrice.toFixed(2)]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Terminal Value"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:w(i.presentValueTerminal)})]})]}),i?.projectionTable?r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Projections"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),i.projectionTable.map((e,s)=>r.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Year ",e.year]},s))]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Revenue"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.revenue)},s))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Revenue Growth %"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:$(e.revenueGrowth)},s))]}),r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"EBITDA"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.ebitda)},s))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"EBIT"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.ebit)},s))]}),r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"NOPAT"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.nopat)},s))]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"CapEx"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.capex)},s))]}),r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Δ Working Capital"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.deltaWorkingCapital)},s))]}),r.jsxs("tr",{className:"bg-blue-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-900",children:"Free Cash Flow"}),i.projectionTable.map((e,s)=>r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-900 text-right",children:w(e.freeCashFlow)},s))]})]})]})})]}):null,r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valuation Bridge"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"PV of Projection Period FCFs"}),r.jsx("span",{className:"font-semibold",children:w(i.cumulativePV)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"PV of Terminal Value"}),r.jsx("span",{className:"font-semibold",children:w(i.presentValueTerminal)})]}),r.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Enterprise Value"}),r.jsx("span",{className:"font-bold text-lg",children:w(i.enterpriseValue)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Less: Net Debt"}),r.jsx("span",{className:"font-semibold",children:w(i.netDebt)})]}),r.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Equity Value"}),r.jsx("span",{className:"font-bold text-lg text-blue-600",children:w(i.equityValue)})]})]})]})]})]}),"charts"===m&&r.jsx("div",{className:"space-y-6",children:i&&r.jsx(r.Fragment,{children:r.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cash Flow Projections"}),r.jsx("div",{className:"h-96",children:r.jsx(C,{width:"100%",height:"100%",children:r.jsxs(k,{data:i?i.years.map((e,s)=>({year:`Year ${e}`,freeCashFlow:i.freeCashFlows[s],presentValue:i.presentValues[s]})):[],children:[r.jsx(S,{strokeDasharray:"3 3"}),r.jsx(F,{dataKey:"year"}),r.jsx(P,{tickFormatter:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact"}).format(e)}),r.jsx(D,{formatter:e=>[new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)]}),r.jsx(T,{}),r.jsx(R,{type:"monotone",dataKey:"freeCashFlow",stroke:"#3b82f6",strokeWidth:2,name:"Free Cash Flow"}),r.jsx(R,{type:"monotone",dataKey:"presentValue",stroke:"#10b981",strokeWidth:2,name:"Present Value"})]})})})]})})}),"sensitivity"===m&&r.jsx("div",{className:"space-y-6",children:o&&(()=>{if(!o)return null;const{matrix:e,waccRange:s,terminalGrowthRange:a}=o;return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sensitivity Analysis - Implied Share Price"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Impact of WACC and Terminal Growth Rate changes on valuation"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50",children:"WACC \\ Terminal Growth"}),a.map(e=>r.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 bg-gray-50",children:$(e)},e))]})}),r.jsx("tbody",{children:e.map((a,t)=>r.jsxs("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:$(s[t])}),a.map((s,l)=>{const n=t===Math.floor(e.length/2)&&l===Math.floor(a.length/2);return r.jsxs("td",{className:"px-4 py-3 text-sm text-center "+(n?"bg-blue-100 font-bold text-blue-900":"text-gray-900"),children:["$",s.sharePrice.toFixed(2)]},l)})]},t))})]})})]})})()})]},m),i&&r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("button",{className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",onClick:()=>{},children:[r.jsx(j,{className:"w-5 h-5 mr-2"}),"Export Results"]})})]})})},W=({initialYears:s=5,minYears:a=1,maxYears:t=15,onYearsChange:l,className:n=""})=>{const[i,c]=e.useState(s),[d,o]=e.useState(!1),[x,m]=e.useState(0),[h,u]=e.useState(0),g=e.useCallback(e=>{const s=Math.max(a,Math.min(t,Math.round(e)));s!==i&&(c(s),l?.(s))},[i,a,t,l]),p=e.useCallback(e=>{e.preventDefault(),o(!0),m(e.clientX),u(i),document.body.style.cursor="ew-resize"},[i]),b=e.useCallback(e=>{if(!d)return;const s=e.clientX-x;g(h+.02*s)},[d,x,h,g]),y=e.useCallback(()=>{o(!1),document.body.style.cursor="default"},[]);e.useEffect(()=>{if(d)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y)}},[d,b,y]);return r.jsxs(G,{className:`bg-gray-800 border-gray-700 p-6 ${n}`,children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx($,{name:"Clock",className:"w-5 h-5 text-blue-400"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Projection Period"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-400",children:"Years:"}),r.jsx("span",{className:"text-xl font-bold text-blue-400",children:i})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative h-12",children:[r.jsx("div",{className:"absolute top-4 left-0 right-0 h-2 bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full transition-all duration-200",style:{width:i/t*100+"%"}})}),r.jsx("div",{className:"absolute top-2 w-6 h-6 bg-blue-500 rounded-full border-2 border-white shadow-lg cursor-ew-resize transform -translate-x-1/2 hover:bg-blue-400 transition-colors duration-200",style:{left:i/t*100+"%"},onMouseDown:p,children:r.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-blue-400 opacity-30"})}),(()=>{const e=[],s=i<=5?1:i<=10?2:3;for(let a=1;a<=i;a+=s){const s=a/i*100;e.push(r.jsxs("div",{className:"absolute flex flex-col items-center transform -translate-x-1/2",style:{left:`${s}%`},children:[r.jsx("div",{className:"w-px h-3 bg-blue-400"}),r.jsxs("span",{className:"text-xs text-gray-400 mt-1",children:["Y",a]})]},a))}return e})()]}),r.jsx("div",{className:"px-2",children:r.jsx("input",{type:"range",min:a,max:t,value:i,onChange:e=>{const s=parseInt(e.target.value);g(s)},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${i/t*100}%, #374151 ${i/t*100}%, #374151 100%)`}})})]}),r.jsx("div",{className:"flex justify-center space-x-2",children:[3,5,7,10,12,15].filter(e=>e>=a&&e<=t).map(e=>r.jsxs("button",{onClick:()=>{g(e)},className:"px-3 py-1 rounded-full text-sm font-medium transition-all duration-200 "+(i===e?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"),children:[e,"Y"]},e))}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-400",children:[i<=3&&"Short-term focus with higher accuracy",i>3&&i<=7&&"Balanced projection period for most analyses",i>7&&i<=10&&"Extended projection for growth companies",i>10&&"Long-term strategic planning horizon"]})}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("span",{children:"Model updates automatically"})]})]}),r.jsx("style",{jsx:!0,children:"\n        .slider::-webkit-slider-thumb {\n          appearance: none;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          border: 2px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n          transition: all 0.2s ease;\n        }\n        \n        .slider::-webkit-slider-thumb:hover {\n          background: #2563eb;\n          transform: scale(1.1);\n        }\n        \n        .slider::-webkit-slider-track {\n          height: 8px;\n          border-radius: 4px;\n          background: transparent;\n        }\n        \n        .slider::-moz-range-thumb {\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          border: 2px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        }\n        \n        .slider::-moz-range-track {\n          height: 8px;\n          border-radius: 4px;\n        }\n      "})]})},U=({symbol:s,onBack:a})=>{const[t]=e.useState(`dcf_${Date.now()}`),[l,n]=e.useState(null),[i,c]=e.useState(!1),[d,o]=e.useState(null),[x,m]=e.useState({}),[h,u]=e.useState(null),g=e.useRef(null),[p,b]=e.useState({currentRevenue:1e10,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,symbol:s||"AAPL",trackRealTime:!0,yearlyData:{1:{revenueGrowth:15,ebitdaMargin:25,taxRate:25,capexPercent:4,daPercent:3,workingCapitalChange:2},2:{revenueGrowth:12,ebitdaMargin:24,taxRate:25,capexPercent:4,daPercent:3,workingCapitalChange:2},3:{revenueGrowth:10,ebitdaMargin:23,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1},4:{revenueGrowth:8,ebitdaMargin:22,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1},5:{revenueGrowth:6,ebitdaMargin:21,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1}},balanceSheet:{cash:1e8,totalDebt:5e7,sharesOutstanding:1e9}});e.useEffect(()=>{const e=f.createReactiveModel(t,"dcf",p,(e,s,a)=>{n(e),o(a),u(new Date),c(!1)});return g.current=e,p.trackRealTime&&p.symbol&&(e.addDependency("stock_price",p.symbol),e.addDependency("interest_rates","USD_10Y"),e.addDependency("bond_yields","US10Y")),()=>{g.current&&g.current.destroy()}},[t]),e.useEffect(()=>{if(!p.trackRealTime||!p.symbol)return;const e=[{dataType:"stock_price",symbol:p.symbol},{dataType:"interest_rates",symbol:"USD_10Y"},{dataType:"bond_yields",symbol:"US10Y"},{dataType:"volatility_index",symbol:"VIX"}];return v.subscribeMultiple(e.map(({dataType:e,symbol:s})=>({dataType:e,symbol:s,callback:a=>{m(t=>({...t,[`${e}_${s}`]:a}))}})))},[p.trackRealTime,p.symbol]);const y=e.useCallback((e,s)=>{c(!0),g.current&&g.current.updateInput(e,s),b(a=>{const t={...a},r=e.split(".");let l=t;for(let e=0;e<r.length-1;e++)r[e]in l||(l[r[e]]={}),l=l[r[e]];return l[r[r.length-1]]=s,t})},[]),j=e.useCallback((e,s,a)=>{y(`yearlyData.${e}.${s}`,parseFloat(a)||0)},[y]),N=e.useCallback(e=>{y("projectionYears",e),b(s=>{const a={...s};a.projectionYears=e;for(let t=Object.keys(s.yearlyData).length+1;t<=e;t++)if(!a.yearlyData[t]){const e=a.yearlyData[t-1]||a.yearlyData[Object.keys(a.yearlyData).pop()];a.yearlyData[t]={revenueGrowth:Math.max(2,(e?.revenueGrowth||10)-2),ebitdaMargin:e?.ebitdaMargin||20,taxRate:e?.taxRate||25,capexPercent:e?.capexPercent||3,daPercent:e?.daPercent||3,workingCapitalChange:e?.workingCapitalChange||1}}return Object.keys(a.yearlyData).forEach(s=>{parseInt(s)>e&&delete a.yearlyData[s]}),a})},[y]),w=e.useCallback(()=>{const e=!p.trackRealTime;y("trackRealTime",e),e&&p.symbol&&g.current&&(g.current.addDependency("stock_price",p.symbol),g.current.addDependency("interest_rates","USD_10Y"))},[p.trackRealTime,p.symbol,y]),C=(e,s=0)=>{if(!e)return"$0";const a=Math.abs(e);return a>=1e12?`$${(e/1e12).toFixed(s)}T`:a>=1e9?`$${(e/1e9).toFixed(s)}B`:a>=1e6?`$${(e/1e6).toFixed(s)}M`:a>=1e3?`$${(e/1e3).toFixed(s)}K`:`$${e.toFixed(s)}`},k=(e,s)=>{const a=x[`${e}_${s}`];return a?r.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsxs("span",{className:"text-gray-300",children:["stock_price"===e&&`$${a.price?.toFixed(2)}`,"interest_rates"===e&&`${a.rate?.toFixed(2)}%`,"bond_yields"===e&&`${a.yield?.toFixed(2)}%`,"volatility_index"===e&&`${a.volatility?.toFixed(1)}`]})]}):null};return r.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(A,{onClick:a,className:"bg-gray-700 hover:bg-gray-600",size:"sm",children:[r.jsx($,{name:"ArrowLeft",className:"w-4 h-4 mr-2"}),"Back"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Living Model DCF"}),r.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[r.jsx("p",{className:"text-gray-400",children:"Real-time, reactive financial modeling"}),h&&r.jsxs("span",{className:"text-xs text-green-400",children:["Updated: ",h.toLocaleTimeString()]})]})]})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(p.trackRealTime?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:[r.jsx($,{name:p.trackRealTime?"Zap":"ZapOff",className:"w-4 h-4"}),r.jsxs("span",{children:["Real-time: ",p.trackRealTime?"ON":"OFF"]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs(G,{className:"bg-gray-800 border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx($,{name:"Building",className:"w-5 h-5 mr-2 text-blue-400"}),"Company Basics"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbol"}),r.jsx(Y,{value:p.symbol,onChange:e=>y("symbol",e.target.value.toUpperCase()),className:"bg-gray-700 border-gray-600",placeholder:"AAPL"}),p.trackRealTime&&k("stock_price",p.symbol)]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Revenue"}),r.jsx(Y,{type:"number",value:p.currentRevenue,onChange:e=>y("currentRevenue",parseFloat(e.target.value)||0),className:"bg-gray-700 border-gray-600",step:"1000000"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Discount Rate (WACC)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Y,{type:"number",value:(100*p.discountRate).toFixed(1),onChange:e=>y("discountRate",parseFloat(e.target.value)/100||0),className:"bg-gray-700 border-gray-600",step:"0.1",min:"0",max:"50"}),r.jsx("span",{className:"text-gray-400",children:"%"})]}),p.trackRealTime&&k("interest_rates","USD_10Y")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Terminal Growth Rate"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Y,{type:"number",value:(100*p.terminalGrowthRate).toFixed(1),onChange:e=>y("terminalGrowthRate",parseFloat(e.target.value)/100||0),className:"bg-gray-700 border-gray-600",step:"0.1",min:"0",max:"10"}),r.jsx("span",{className:"text-gray-400",children:"%"})]})]})]})]}),r.jsx(W,{initialYears:p.projectionYears,onYearsChange:N}),p.trackRealTime&&r.jsxs(G,{className:"bg-gray-800 border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx($,{name:"Activity",className:"w-5 h-5 mr-2 text-green-400"}),"Live Market Data"]}),r.jsxs("div",{className:"space-y-3",children:[k("stock_price",p.symbol)&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Stock Price:"}),k("stock_price",p.symbol)]}),k("bond_yields","US10Y")&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"10Y Treasury:"}),k("bond_yields","US10Y")]}),k("volatility_index","VIX")&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"VIX:"}),k("volatility_index","VIX")]})]})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(G,{className:"bg-gray-800 border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx($,{name:"Calendar",className:"w-5 h-5 mr-2 text-blue-400"}),"Year-by-Year Projections"]}),r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Array.from({length:p.projectionYears},(e,s)=>s+1).map(e=>r.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-semibold text-blue-400 mb-3",children:["Year ",e]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Rev Growth %"}),r.jsx(Y,{type:"number",value:p.yearlyData[e]?.revenueGrowth||0,onChange:s=>j(e,"revenueGrowth",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"EBITDA Margin %"}),r.jsx(Y,{type:"number",value:p.yearlyData[e]?.ebitdaMargin||0,onChange:s=>j(e,"ebitdaMargin",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Tax Rate %"}),r.jsx(Y,{type:"number",value:p.yearlyData[e]?.taxRate||0,onChange:s=>j(e,"taxRate",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"CapEx % Rev"}),r.jsx(Y,{type:"number",value:p.yearlyData[e]?.capexPercent||0,onChange:s=>j(e,"capexPercent",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]})]})]},e))})]})}),r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i&&r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-2 text-gray-400",children:"Calculating..."})]}),d&&r.jsxs(G,{className:"bg-red-900/20 border-red-700 p-6",children:[r.jsxs("div",{className:"flex items-center text-red-400",children:[r.jsx($,{name:"AlertCircle",className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"Calculation Error"})]}),r.jsx("p",{className:"text-red-300 mt-2 text-sm",children:d.message})]}),l&&r.jsxs(r.Fragment,{children:[r.jsxs(G,{className:"bg-gray-800 border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx($,{name:"TrendingUp",className:"w-5 h-5 mr-2 text-green-400"}),"Key Results"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Enterprise Value:"}),r.jsx("span",{className:"font-semibold text-lg text-blue-400",children:C(l.enterpriseValue,1)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Equity Value:"}),r.jsx("span",{className:"font-semibold text-lg text-green-400",children:C(l.equityValue,1)})]}),r.jsxs("div",{className:"flex justify-between items-center border-t border-gray-700 pt-4",children:[r.jsx("span",{className:"text-gray-400",children:"Share Price:"}),r.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:["$",l.impliedSharePrice?.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:"Terminal Value:"}),r.jsx("span",{className:"font-semibold",children:C(l.terminalValue,1)})]})]})]}),r.jsxs(G,{className:"bg-gray-800 border-gray-700 p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx($,{name:"DollarSign",className:"w-5 h-5 mr-2 text-blue-400"}),"Cash Flow Summary"]}),r.jsxs("div",{className:"space-y-2",children:[l.years?.map((e,s)=>r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"text-gray-400",children:["Year ",e," FCF:"]}),r.jsx("span",{className:"font-mono",children:C(l.freeCashFlows[s],1)})]},e)),r.jsx("div",{className:"border-t border-gray-700 pt-2 mt-3",children:r.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold",children:[r.jsx("span",{className:"text-gray-300",children:"PV of FCFs:"}),r.jsx("span",{children:C(l.cumulativePV,1)})]})})]})]})]})]})]})]})})},z=()=>{const[s,a]=e.useState("overview");return"dcf"===s?r.jsx(_,{onBack:()=>a("overview")}):"living-dcf"===s?r.jsx(U,{onBack:()=>a("overview")}):"canvas"===s?r.jsx(V,{}):r.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[r.jsx(M,{title:"Valuation Tool | FinanceAnalyst Pro",description:"Professional DCF analysis, LBO modeling, and comparative valuation tools for investment professionals and analysts.",canonical:"/valuation-tool",keywords:"valuation tool, DCF analysis, LBO model, comparable company analysis, investment valuation, financial analysis"}),r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Valuation Tool"}),r.jsx("p",{className:"text-gray-400",children:"Professional valuation models and analysis tools"})]}),r.jsx("div",{className:"mb-8",children:r.jsx(G,{className:"bg-gradient-to-r from-emerald-900 to-teal-900 border-emerald-700",children:r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"Zap",className:"w-10 h-10 text-emerald-300 mr-4"}),r.jsx("h2",{className:"text-2xl font-bold text-white",children:"The Living Model"}),r.jsx("div",{className:"ml-3 px-2 py-1 bg-emerald-600 text-emerald-100 text-xs font-semibold rounded-full",children:"NEW"})]}),r.jsx("p",{className:"text-emerald-100 mb-6 text-lg leading-relaxed",children:"Experience financial modeling transformed. Real-time data integration, instantaneous calculations, and fluid time period adjustments create a living, breathing analysis that evolves with every input change."}),r.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[r.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Real-Time Data Feeds"}),r.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Instantaneous Calculations"}),r.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Dynamic Time Periods"}),r.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:'No "Run" Button'})]}),r.jsx(A,{className:"bg-white text-emerald-900 hover:bg-emerald-50 font-semibold px-8 py-3",onClick:()=>a("living-dcf"),children:"Experience The Living Model"})]}),r.jsx("div",{className:"hidden lg:block",children:r.jsxs("div",{className:"w-32 h-32 bg-emerald-800/30 rounded-2xl flex items-center justify-center relative",children:[r.jsx($,{name:"Activity",className:"w-16 h-16 text-emerald-300"}),r.jsx("div",{className:"absolute inset-0 rounded-2xl bg-emerald-400/20 animate-pulse"})]})})]})})})}),r.jsx("div",{className:"mb-8",children:r.jsx(G,{className:"bg-gradient-to-r from-blue-900 to-indigo-900 border-blue-700",children:r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"Sparkles",className:"w-10 h-10 text-blue-300 mr-4"}),r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analysis Canvas"})]}),r.jsx("p",{className:"text-blue-100 mb-6 text-lg leading-relaxed",children:"A unified workspace that reimagines financial analysis. Start with any company and seamlessly flow between DCF modeling, comparable analysis, and scenario planning—all in one integrated environment."}),r.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[r.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Company-Centric Workflow"}),r.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Intelligent Defaults"}),r.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Interactive Analysis"}),r.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Minimal Design"})]}),r.jsx(A,{className:"bg-white text-blue-900 hover:bg-blue-50 font-semibold px-8 py-3",onClick:()=>a("canvas"),children:"Enter Analysis Canvas"})]}),r.jsx("div",{className:"hidden lg:block",children:r.jsx("div",{className:"w-32 h-32 bg-blue-800/30 rounded-2xl flex items-center justify-center",children:r.jsx($,{name:"BarChart3",className:"w-16 h-16 text-blue-300"})})})]})})})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs(G,{className:"bg-gray-800 border-gray-700 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),r.jsxs("div",{className:"p-6 relative",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"Zap",className:"w-8 h-8 text-emerald-400 mr-3"}),r.jsx("h3",{className:"text-xl font-semibold",children:"Living Model DCF"}),r.jsx("div",{className:"ml-2 px-2 py-1 bg-emerald-600 text-emerald-100 text-xs font-semibold rounded-full",children:"NEW"})]}),r.jsx("p",{className:"text-gray-400 mb-4",children:'Real-time, reactive DCF modeling with live data feeds and instantaneous calculations. No more "run" buttons—watch your model come alive.'}),r.jsx(A,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>a("living-dcf"),children:"Experience The Living Model"})]})]}),r.jsx(G,{className:"bg-gray-800 border-gray-700",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"TrendingUp",className:"w-8 h-8 text-blue-400 mr-3"}),r.jsx("h3",{className:"text-xl font-semibold",children:"Enhanced DCF Analysis"})]}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Professional DCF modeling with year-by-year projections, sensitivity analysis, and detailed financial statements"}),r.jsx(A,{className:"w-full",onClick:()=>a("dcf"),children:"Launch Enhanced DCF Tool"})]})}),r.jsx(G,{className:"bg-gray-800 border-gray-700",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"BarChart3",className:"w-8 h-8 text-green-400 mr-3"}),r.jsx("h3",{className:"text-xl font-semibold",children:"Comparable Analysis"})]}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Peer comparison and relative valuation metrics"}),r.jsx(A,{className:"w-full",disabled:!0,children:"Coming Soon"})]})}),r.jsx(G,{className:"bg-gray-800 border-gray-700",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx($,{name:"Calculator",className:"w-8 h-8 text-purple-400 mr-3"}),r.jsx("h3",{className:"text-xl font-semibold",children:"LBO Analysis"})]}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Leveraged buyout modeling and returns analysis"}),r.jsx(A,{className:"w-full",disabled:!0,children:"Coming Soon"})]})})]}),r.jsx("div",{className:"mt-8",children:r.jsx(G,{className:"bg-gray-800 border-gray-700",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Enhanced DCF Features"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Year-by-Year Modeling"}),r.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[r.jsx("li",{children:"• Individual assumptions for each projection year"}),r.jsx("li",{children:"• Revenue growth, margins, tax rates, and capex"}),r.jsx("li",{children:"• Working capital and D&A projections"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Professional Calculations"}),r.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[r.jsx("li",{children:"• Proper Unlevered Free Cash Flow calculation"}),r.jsx("li",{children:"• Enterprise to Equity value bridge"}),r.jsx("li",{children:"• Balance sheet integration"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-purple-400 mb-2",children:"Advanced Analytics"}),r.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[r.jsx("li",{children:"• WACC and terminal growth sensitivity analysis"}),r.jsx("li",{children:"• Interactive projection tables"}),r.jsx("li",{children:"• Cash flow visualization charts"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-orange-400 mb-2",children:"User Experience"}),r.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[r.jsx("li",{children:"• Simple and detailed input modes"}),r.jsx("li",{children:"• Real-time calculation updates"}),r.jsx("li",{children:"• Export capabilities"})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(A,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>a("dcf"),children:"Try Enhanced DCF Tool"})})]})})}),r.jsx("div",{className:"mt-8",children:r.jsx(G,{className:"bg-gray-800 border-gray-700",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quick Access Terminal"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Use the enhanced terminal interface for advanced valuation commands:"}),r.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm",children:[r.jsx("div",{className:"text-green-400",children:"$ DCF(AAPL)"}),r.jsx("div",{className:"text-green-400",children:"$ LBO(TSLA)"}),r.jsx("div",{className:"text-green-400",children:"$ COMP(MSFT)"}),r.jsx("div",{className:"text-green-400",children:'$ HELP("VALUATION")'})]}),r.jsx("div",{className:"mt-4",children:r.jsx(A,{disabled:!0,children:"Terminal Interface - Coming Soon"})})]})})})]})]})};export{z as default};
//# sourceMappingURL=ValuationTool-JNyJC8ha.js.map
