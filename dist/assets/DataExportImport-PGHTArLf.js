import{r as e,R as t,j as s,av as a,aM as r,J as l,D as o,x as i,ac as n,a6 as c,aN as d,Y as m,a4 as h,F as g}from"./react-core-CeHLCIBw.js";import{a as u}from"./apiLogger-D987Un6Q.js";import"./vendor-D2fsnhsW.js";import"./ai-vendor-CuiosWbE.js";import"./ui-vendor-B5RWaOCb.js";import"./advanced-analytics-y00dU25g.js";import"./utils-vendor-DUg4_aAP.js";import"./recharts-vendor-DQPXk1vH.js";import"./d3-vendor-DOBQrAlH.js";import"./react-dom-B6lyId6m.js";const p="1.0.0",x="financeanalyst_",y=1024,f=.8,b={dcfModel:{version:"1.0",required:["symbol","assumptions","projections","valuation"],structure:{symbol:"string",assumptions:"object",projections:"object",valuation:"object",metadata:"object"}},lboModel:{version:"1.0",required:["symbol","transaction","financing","returns"],structure:{symbol:"string",transaction:"object",financing:"object",returns:"object",metadata:"object"}},monteCarloResults:{version:"1.0",required:["modelType","iterations","results","statistics"],structure:{modelType:"string",iterations:"number",results:"array",statistics:"object",metadata:"object"}},userPreferences:{version:"1.0",required:["theme","layout"],structure:{theme:"string",layout:"object",notifications:"object",privacy:"object"}},marketData:{version:"1.0",required:["symbol","data","timestamp"],structure:{symbol:"string",data:"object",timestamp:"number",source:"string"}}},j=new class{constructor(){this.isAvailable=this.checkStorageAvailability(),this.compressionWorker=null,this.initializeCompression(),this.setupQuotaMonitoring()}checkStorageAvailability(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return u.log("ERROR","localStorage not available",{error:e.message}),!1}}initializeCompression(){"CompressionStream"in window?this.compressionAvailable=!0:this.compressionAvailable=!1}setupQuotaMonitoring(){"storage"in navigator&&"estimate"in navigator.storage&&this.monitorQuota()}async monitorQuota(){try{const e=await navigator.storage.estimate(),t=e.usage/e.quota;t>f&&(u.log("WARN","Storage quota threshold exceeded",{usage:e.usage,quota:e.quota,ratio:t}),await this.performCleanup())}catch(e){u.log("ERROR","Failed to monitor storage quota",{error:e.message})}}generateKey(e,t){return`${x}${e}_${t}`}validateData(e,t){const s=b[t];if(!s)throw new Error(`Unknown schema type: ${t}`);for(const a of s.required)if(!(a in e))throw new Error(`Missing required field: ${a}`);for(const[a,r]of Object.entries(s.structure))if(a in e){const t=Array.isArray(e[a])?"array":typeof e[a];if(t!==r)throw new Error(`Invalid type for ${a}: expected ${r}, got ${t}`)}return!0}async compressData(e){const t=JSON.stringify(e);if(t.length<y||!this.compressionAvailable)return{data:t,compressed:!1};try{return{data:await this.simpleCompress(t),compressed:!0}}catch(s){return u.log("WARN","Compression failed, storing uncompressed",{error:s.message}),{data:t,compressed:!1}}}async simpleCompress(e){return btoa(encodeURIComponent(e))}async decompressData(e,t){if(!t)return e;try{return decodeURIComponent(atob(e))}catch(s){throw u.log("ERROR","Decompression failed",{error:s.message}),new Error("Failed to decompress data")}}async setItem(e,t,s,a={}){if(!this.isAvailable)throw new Error("Storage not available");try{b[e]&&this.validateData(s,e);const r={version:p,schemaVersion:b[e]?.version||"1.0",timestamp:Date.now(),data:s,metadata:{type:e,identifier:t,size:JSON.stringify(s).length,...a.metadata}},{data:l,compressed:o}=await this.compressData(r),i={compressed:o,data:l},n=this.generateKey(e,t);return localStorage.setItem(n,JSON.stringify(i)),u.log("DEBUG","Data stored successfully",{key:n,type:e,identifier:t,compressed:o,size:l.length}),!0}catch(r){throw u.log("ERROR","Failed to store data",{type:e,identifier:t,error:r.message}),r}}async getItem(e,t){if(!this.isAvailable)return null;try{const s=this.generateKey(e,t),a=localStorage.getItem(s);if(!a)return null;const r=JSON.parse(a),l=await this.decompressData(r.data,r.compressed),o=JSON.parse(l);return o.version!==p&&u.log("WARN","Version mismatch detected",{stored:o.version,current:p}),u.log("DEBUG","Data retrieved successfully",{key:s,type:e,identifier:t,age:Date.now()-o.timestamp}),o.data}catch(s){return u.log("ERROR","Failed to retrieve data",{type:e,identifier:t,error:s.message}),null}}removeItem(e,t){if(!this.isAvailable)return!1;try{const s=this.generateKey(e,t);return localStorage.removeItem(s),u.log("DEBUG","Data removed successfully",{key:s,type:e,identifier:t}),!0}catch(s){return u.log("ERROR","Failed to remove data",{type:e,identifier:t,error:s.message}),!1}}listItems(e){if(!this.isAvailable)return[];const t=this.generateKey(e,""),s=[];for(let a=0;a<localStorage.length;a++){const e=localStorage.key(a);if(e&&e.startsWith(t)){const a=e.replace(t,"");s.push(a)}}return s}async performCleanup(){const e=Date.now()-2592e6;let t=0;for(let s=localStorage.length-1;s>=0;s--){const a=localStorage.key(s);if(a&&a.startsWith(x))try{const s=localStorage.getItem(a),r=JSON.parse(s),l=await this.decompressData(r.data,r.compressed);JSON.parse(l).timestamp<e&&(localStorage.removeItem(a),t++)}catch{localStorage.removeItem(a),t++}}return u.log("INFO","Storage cleanup completed",{cleanedCount:t}),t}async getStorageStats(){let e=0,t=0;const s={};for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(x)){e+=localStorage.getItem(a).length,t++;const r=a.split("_")[1];r&&(s[r]=(s[r]||0)+1)}}const a=await this.getQuotaInfo();return{totalSize:e,itemCount:t,typeStats:s,quota:a,usageRatio:a?e/a.quota:0}}async getQuotaInfo(){if("storage"in navigator&&"estimate"in navigator.storage)try{return await navigator.storage.estimate()}catch(e){u.log("ERROR","Failed to get quota info",{error:e.message})}return null}clearAll(){if(!this.isAvailable)return!1;const e=[];for(let t=0;t<localStorage.length;t++){const s=localStorage.key(t);s&&s.startsWith(x)&&e.push(s)}return e.forEach(e=>localStorage.removeItem(e)),u.log("INFO","All application data cleared",{clearedCount:e.length}),!0}},v=new class{constructor(){this.storage=j}async saveDCFModel(e,t){try{const s={symbol:e.toUpperCase(),assumptions:t.assumptions||{},projections:t.projections||{},valuation:t.valuation||{},metadata:{createdAt:Date.now(),lastModified:Date.now(),version:"1.0",modelType:"DCF",...t.metadata}};return await this.storage.setItem("dcfModel",e.toUpperCase(),s),u.log("INFO","DCF model saved",{symbol:e,valuation:s.valuation.intrinsicValue}),!0}catch(s){throw u.log("ERROR","Failed to save DCF model",{symbol:e,error:s.message}),s}}async getDCFModel(e){try{const t=await this.storage.getItem("dcfModel",e.toUpperCase());return t&&u.log("DEBUG","DCF model retrieved",{symbol:e}),t}catch(t){return u.log("ERROR","Failed to retrieve DCF model",{symbol:e,error:t.message}),null}}async listDCFModels(){return this.storage.listItems("dcfModel")}async deleteDCFModel(e){return this.storage.removeItem("dcfModel",e.toUpperCase())}async saveLBOModel(e,t){try{const s={symbol:e.toUpperCase(),transaction:t.transaction||{},financing:t.financing||{},returns:t.returns||{},metadata:{createdAt:Date.now(),lastModified:Date.now(),version:"1.0",modelType:"LBO",...t.metadata}};return await this.storage.setItem("lboModel",e.toUpperCase(),s),u.log("INFO","LBO model saved",{symbol:e,irr:s.returns.irr,moic:s.returns.moic}),!0}catch(s){throw u.log("ERROR","Failed to save LBO model",{symbol:e,error:s.message}),s}}async getLBOModel(e){try{const t=await this.storage.getItem("lboModel",e.toUpperCase());return t&&u.log("DEBUG","LBO model retrieved",{symbol:e}),t}catch(t){return u.log("ERROR","Failed to retrieve LBO model",{symbol:e,error:t.message}),null}}async listLBOModels(){return this.storage.listItems("lboModel")}async deleteLBOModel(e){return this.storage.removeItem("lboModel",e.toUpperCase())}async saveMonteCarloResults(e,t){try{const s={modelType:t.modelType||"DCF",iterations:t.iterations||1e4,results:t.results||[],statistics:t.statistics||{},metadata:{createdAt:Date.now(),modelId:e,symbol:t.symbol,version:"1.0",...t.metadata}};return await this.storage.setItem("monteCarloResults",e,s),u.log("INFO","Monte Carlo results saved",{modelId:e,iterations:s.iterations,mean:s.statistics.mean}),!0}catch(s){throw u.log("ERROR","Failed to save Monte Carlo results",{modelId:e,error:s.message}),s}}async getMonteCarloResults(e){try{const t=await this.storage.getItem("monteCarloResults",e);return t&&u.log("DEBUG","Monte Carlo results retrieved",{modelId:e}),t}catch(t){return u.log("ERROR","Failed to retrieve Monte Carlo results",{modelId:e,error:t.message}),null}}async listMonteCarloResults(){return this.storage.listItems("monteCarloResults")}async deleteMonteCarloResults(e){return this.storage.removeItem("monteCarloResults",e)}async saveMarketData(e,t,s=15){try{const a={symbol:e.toUpperCase(),data:t,timestamp:Date.now(),source:t.source||"unknown",expiresAt:Date.now()+60*s*1e3};return await this.storage.setItem("marketData",e.toUpperCase(),a),u.log("DEBUG","Market data cached",{symbol:e,source:a.source,ttlMinutes:s}),!0}catch(a){throw u.log("ERROR","Failed to cache market data",{symbol:e,error:a.message}),a}}async getMarketData(e){try{const t=await this.storage.getItem("marketData",e.toUpperCase());return t&&t.expiresAt>Date.now()?(u.log("DEBUG","Market data cache hit",{symbol:e}),t.data):(t&&(await this.deleteMarketData(e),u.log("DEBUG","Market data cache expired",{symbol:e})),null)}catch(t){return u.log("ERROR","Failed to retrieve market data",{symbol:e,error:t.message}),null}}async deleteMarketData(e){return this.storage.removeItem("marketData",e.toUpperCase())}async saveUserPreferences(e){try{const t={theme:e.theme||"light",layout:e.layout||{},notifications:e.notifications||{},privacy:e.privacy||{},metadata:{lastUpdated:Date.now(),version:"1.0"}};return await this.storage.setItem("userPreferences","default",t),u.log("INFO","User preferences saved",{theme:t.theme}),!0}catch(t){throw u.log("ERROR","Failed to save user preferences",{error:t.message}),t}}async getUserPreferences(){try{const e=await this.storage.getItem("userPreferences","default");return e&&u.log("DEBUG","User preferences retrieved"),e}catch(e){return u.log("ERROR","Failed to retrieve user preferences",{error:e.message}),null}}async saveWatchlist(e,t){try{const s={name:e,symbols:t.map(e=>e.toUpperCase()),metadata:{createdAt:Date.now(),lastModified:Date.now(),symbolCount:t.length}};return await this.storage.setItem("watchlist",e,s),u.log("INFO","Watchlist saved",{name:e,symbolCount:t.length}),!0}catch(s){throw u.log("ERROR","Failed to save watchlist",{name:e,error:s.message}),s}}async getWatchlist(e){try{const t=await this.storage.getItem("watchlist",e);return t&&u.log("DEBUG","Watchlist retrieved",{name:e}),t}catch(t){return u.log("ERROR","Failed to retrieve watchlist",{name:e,error:t.message}),null}}async listWatchlists(){return this.storage.listItems("watchlist")}async deleteWatchlist(e){return this.storage.removeItem("watchlist",e)}async exportAllData(){try{const e={timestamp:Date.now(),version:"1.0",data:{dcfModels:{},lboModels:{},monteCarloResults:{},watchlists:{},userPreferences:null}},t=await this.listDCFModels();for(const l of t)e.data.dcfModels[l]=await this.getDCFModel(l);const s=await this.listLBOModels();for(const l of s)e.data.lboModels[l]=await this.getLBOModel(l);const a=await this.listMonteCarloResults();for(const l of a)e.data.monteCarloResults[l]=await this.getMonteCarloResults(l);const r=await this.listWatchlists();for(const l of r)e.data.watchlists[l]=await this.getWatchlist(l);return e.data.userPreferences=await this.getUserPreferences(),u.log("INFO","Data export completed",{dcfCount:t.length,lboCount:s.length,mcCount:a.length,watchlistCount:r.length}),e}catch(e){throw u.log("ERROR","Failed to export data",{error:e.message}),e}}async importData(e){try{let t=0;if(e.data.dcfModels)for(const[s,a]of Object.entries(e.data.dcfModels))await this.saveDCFModel(s,a),t++;if(e.data.lboModels)for(const[s,a]of Object.entries(e.data.lboModels))await this.saveLBOModel(s,a),t++;if(e.data.monteCarloResults)for(const[s,a]of Object.entries(e.data.monteCarloResults))await this.saveMonteCarloResults(s,a),t++;if(e.data.watchlists)for(const[s,a]of Object.entries(e.data.watchlists))await this.saveWatchlist(s,a.symbols),t++;return e.data.userPreferences&&(await this.saveUserPreferences(e.data.userPreferences),t++),u.log("INFO","Data import completed",{importCount:t}),t}catch(t){throw u.log("ERROR","Failed to import data",{error:t.message}),t}}async getFinancialDataStats(){return{...await this.storage.getStorageStats(),financialData:{dcfModels:(await this.listDCFModels()).length,lboModels:(await this.listLBOModels()).length,monteCarloResults:(await this.listMonteCarloResults()).length,watchlists:(await this.listWatchlists()).length}}}async cleanupExpiredMarketData(){const e=this.storage.listItems("marketData");let t=0;for(const s of e){const e=await this.storage.getItem("marketData",s);e&&e.expiresAt<=Date.now()&&(await this.deleteMarketData(s),t++)}return u.log("INFO","Expired market data cleaned",{cleanedCount:t}),t}},w=[{id:1,name:"Standard 3-Statement Model",category:"General",lastUsed:"2024-01-15",uses:42},{id:2,name:"SaaS DCF Template",category:"Technology",lastUsed:"2024-01-10",uses:28},{id:3,name:"LBO Analysis Template",category:"Private Equity",lastUsed:"2024-01-05",uses:35}],N=({data:p,onDataChange:x,savedAnalyses:y,onAnalysesChange:f,onClose:b,className:j})=>{const[N,R]=e.useState("excel"),[C,D]=e.useState(!1),[M,O]=e.useState(!1),[I,S]=e.useState(null),[F,E]=e.useState(null),[k,U]=e.useState(null),[A,B]=e.useState(w),[L,W]=e.useState([{id:1,name:"John Smith",email:"john@company.com",role:"Analyst",lastActive:"2 min ago",avatar:"JS"},{id:2,name:"Sarah Johnson",email:"sarah@company.com",role:"VP",lastActive:"1 hour ago",avatar:"SJ"}]);t.useEffect(()=>{q()},[]);const q=async()=>{try{const e=await v.getFinancialDataStats();U(e)}catch(e){u.log("ERROR","Failed to load storage stats",{error:e.message})}},J=async()=>{D(!0),S(null);try{const e=await v.exportAllData(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`financeanalyst_backup_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),S({type:"success",message:"Data exported successfully",details:{dcfModels:Object.keys(e.data.dcfModels).length,lboModels:Object.keys(e.data.lboModels).length,monteCarloResults:Object.keys(e.data.monteCarloResults).length,watchlists:Object.keys(e.data.watchlists).length}}),u.log("INFO","Data export completed",{totalItems:Object.keys(e.data.dcfModels).length+Object.keys(e.data.lboModels).length+Object.keys(e.data.monteCarloResults).length+Object.keys(e.data.watchlists).length})}catch(e){S({type:"error",message:"Export failed",details:e.message}),u.log("ERROR","Data export failed",{error:e.message})}finally{D(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Data Management"}),s.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"excel",label:"Excel Integration",icon:a},{id:"templates",label:"Templates",icon:r},{id:"collaboration",label:"Collaboration",icon:l},{id:"export",label:"Export",icon:o},{id:"import",label:"Import",icon:i},{id:"stats",label:"Statistics",icon:n}].map(e=>{const t=e.icon;return s.jsxs("button",{onClick:()=>R(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 "+(N===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{children:e.label})]},e.id)})})}),s.jsxs("div",{className:"p-6",children:["excel"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(c,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-900",children:"Excel Integration"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Connect your Excel spreadsheets to FinanceAnalyst for seamless data synchronization."})]})]})}),s.jsx("button",{onClick:J,disabled:C,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:C?s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"Export All Data"]})}),I&&s.jsx("div",{className:"border rounded-lg p-4 "+("success"===I.type?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:s.jsxs("div",{className:"flex items-start",children:["success"===I.type?s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3"}):s.jsx(h,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium "+("success"===I.type?"text-green-900":"text-red-900"),children:I.message}),"success"===I.type&&I.details&&s.jsxs("div",{className:"text-sm text-green-700 mt-2",children:[s.jsx("p",{children:"Exported items:"}),s.jsxs("ul",{className:"list-disc list-inside ml-4",children:[s.jsxs("li",{children:[I.details.dcfModels," DCF Models"]}),s.jsxs("li",{children:[I.details.lboModels," LBO Models"]}),s.jsxs("li",{children:[I.details.monteCarloResults," Monte Carlo Results"]}),s.jsxs("li",{children:[I.details.watchlists," Watchlists"]})]})]}),"error"===I.type&&s.jsx("p",{className:"text-sm text-red-700 mt-1",children:I.details})]})]})})]}),"templates"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Templates"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(e=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.category}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Last used: ",e.lastUsed]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Uses: ",e.uses]})]},e.id))})]}),"collaboration"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Collaboration"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:L.map(e=>s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.email}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Role: ",e.role]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Last active: ",e.lastActive]})]},e.id))})]}),"export"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(c,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-900",children:"Export Your Data"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Download all your financial models, analysis results, and preferences as a backup file."})]})]})}),s.jsx("button",{onClick:J,disabled:C,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:C?s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2 animate-spin"}),"Exporting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"Export All Data"]})}),I&&s.jsx("div",{className:"border rounded-lg p-4 "+("success"===I.type?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:s.jsxs("div",{className:"flex items-start",children:["success"===I.type?s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3"}):s.jsx(h,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium "+("success"===I.type?"text-green-900":"text-red-900"),children:I.message}),"success"===I.type&&I.details&&s.jsxs("div",{className:"text-sm text-green-700 mt-2",children:[s.jsx("p",{children:"Exported items:"}),s.jsxs("ul",{className:"list-disc list-inside ml-4",children:[s.jsxs("li",{children:[I.details.dcfModels," DCF Models"]}),s.jsxs("li",{children:[I.details.lboModels," LBO Models"]}),s.jsxs("li",{children:[I.details.monteCarloResults," Monte Carlo Results"]}),s.jsxs("li",{children:[I.details.watchlists," Watchlists"]})]})]}),"error"===I.type&&s.jsx("p",{className:"text-sm text-red-700 mt-1",children:I.details})]})]})})]}),"import"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(h,{className:"w-5 h-5 text-amber-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-amber-900",children:"Import Data"}),s.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Import data from a backup file. This will add to your existing data."})]})]})}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[s.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsxs("label",{className:"cursor-pointer",children:[s.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Choose backup file"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select a JSON backup file to import"}),s.jsx("input",{type:"file",accept:".json",onChange:async e=>{const t=e.target.files[0];if(t){O(!0),E(null);try{const e=await t.text(),s=JSON.parse(e);if(!s.data||!s.version)throw new Error("Invalid backup file format");const a=await v.importData(s);E({type:"success",message:"Data imported successfully",details:{importCount:a,timestamp:new Date(s.timestamp).toLocaleString()}}),await q(),u.log("INFO","Data import completed",{importCount:a})}catch(s){E({type:"error",message:"Import failed",details:s.message}),u.log("ERROR","Data import failed",{error:s.message})}finally{O(!1),e.target.value=""}}},disabled:M,className:"hidden"})]})]}),M&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(d,{className:"w-6 h-6 animate-spin text-blue-600 mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Importing data..."})]}),F&&s.jsx("div",{className:"border rounded-lg p-4 "+("success"===F.type?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:s.jsxs("div",{className:"flex items-start",children:["success"===F.type?s.jsx(m,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3"}):s.jsx(h,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium "+("success"===F.type?"text-green-900":"text-red-900"),children:F.message}),"success"===F.type&&F.details&&s.jsxs("div",{className:"text-sm text-green-700 mt-2",children:[s.jsxs("p",{children:["Imported ",F.details.importCount," items"]}),s.jsxs("p",{children:["Backup created: ",F.details.timestamp]})]}),"error"===F.type&&s.jsx("p",{className:"text-sm text-red-700 mt-1",children:F.details})]})]})})]}),"stats"===N&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Storage Statistics"}),k?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Storage Usage"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Size:"}),s.jsx("span",{className:"font-medium",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(k.totalSize)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Items:"}),s.jsx("span",{className:"font-medium",children:k.itemCount})]}),k.quota&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Usage:"}),s.jsxs("span",{className:"font-medium",children:[(100*k.usageRatio).toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Financial Data"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"DCF Models:"}),s.jsx("span",{className:"font-medium",children:k.financialData.dcfModels})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"LBO Models:"}),s.jsx("span",{className:"font-medium",children:k.financialData.lboModels})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Monte Carlo Results:"}),s.jsx("span",{className:"font-medium",children:k.financialData.monteCarloResults})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Watchlists:"}),s.jsx("span",{className:"font-medium",children:k.financialData.watchlists})]})]})]})]}):s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(d,{className:"w-6 h-6 animate-spin text-blue-600 mr-2"}),s.jsx("span",{className:"text-gray-600",children:"Loading statistics..."})]})]})]})]})})};export{N as default};
//# sourceMappingURL=DataExportImport-PGHTArLf.js.map
