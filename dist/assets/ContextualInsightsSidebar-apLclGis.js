import{r as e,j as s,o as t,X as a,n as i,b as n,a2 as l,J as r,as as c,l as m,T as d,a6 as o}from"./react-core-CeHLCIBw.js";import{b as x,A as h}from"./ui-vendor-B5RWaOCb.js";import"./vendor-D2fsnhsW.js";import"./ai-vendor-CuiosWbE.js";import"./advanced-analytics-y00dU25g.js";import"./utils-vendor-DUg4_aAP.js";import"./recharts-vendor-DQPXk1vH.js";import"./d3-vendor-DOBQrAlH.js";import"./react-dom-B6lyId6m.js";const u=({financialData:u,currentMetric:p,analysisContext:j="general",onInsightClick:b,isVisible:g=!0,onToggle:f})=>{const[v,N]=e.useState({assumptions:!0,benchmarks:!0,insights:!0,suggestions:!1});e.useMemo(()=>({healthcare:{revenueGrowth:{min:8,median:15,max:25,unit:"%"},ebitdaMargin:{min:18,median:28,max:40,unit:"%"},grossMargin:{min:65,median:75,max:85,unit:"%"},roe:{min:12,median:18,max:25,unit:"%"}},technology:{revenueGrowth:{min:15,median:25,max:50,unit:"%"},ebitdaMargin:{min:20,median:35,max:50,unit:"%"},grossMargin:{min:70,median:80,max:90,unit:"%"},roe:{min:15,median:22,max:35,unit:"%"}},manufacturing:{revenueGrowth:{min:3,median:8,max:15,unit:"%"},ebitdaMargin:{min:10,median:18,max:25,unit:"%"},grossMargin:{min:25,median:35,max:45,unit:"%"},roe:{min:8,median:15,max:22,unit:"%"}}}),[]);const y=(()=>{const e=[];if(!u?.statements?.incomeStatement)return[{type:"info",title:"Getting Started",content:"Import financial data to see contextual insights and benchmarks.",action:"Import Data"}];const s=u.statements.incomeStatement,t=s.totalRevenue?.[2]||0,a=s.operatingIncome?.[2]||0;if(t>0){const s=a/t*100;e.push({type:"benchmark",title:"Operating Margin Analysis",content:`Current operating margin of ${s.toFixed(1)}% compares to healthcare industry median of 28%.`,metric:s,benchmark:28,status:s>=28?"above":s>=20?"within":"below"})}return"dcf"===j&&e.push({type:"assumption",title:"DCF Model Assumptions",content:"Consider industry-specific discount rates and terminal growth assumptions.",suggestions:["Healthcare companies typically use 8-12% WACC","Terminal growth rates should reflect long-term GDP growth (2-3%)","Consider regulatory risks in discount rate adjustments"]}),p?.includes("revenue")&&e.push({type:"insight",title:"Revenue Growth Drivers",content:"Analyze revenue composition and growth sustainability.",suggestions:["Break down revenue by service line","Assess recurring vs. one-time revenue","Evaluate market expansion opportunities"]}),e})(),w=e=>{N(s=>({...s,[e]:!s[e]}))},k=(e,t,a,i)=>{const n=i-a,l=Math.max(0,Math.min(100,(e-a)/n*100)),r=Math.max(0,Math.min(100,(t-a)/n*100));return s.jsxs("div",{className:"relative h-2 bg-slate-200 rounded-full overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 h-full bg-blue-200 rounded-full",style:{width:`${r}%`}}),s.jsx("div",{className:"absolute top-0 h-full w-1 bg-blue-600 rounded-full",style:{left:`${r}%`}}),s.jsx("div",{className:"absolute top-0 h-full w-1 bg-amber-500 rounded-full",style:{left:`${l}%`}})]})};return g?s.jsxs(x.div,{initial:{x:320,opacity:0},animate:{x:0,opacity:1},exit:{x:320,opacity:0},className:"fixed right-0 top-16 bottom-0 w-80 bg-slate-50 border-l border-slate-200 shadow-xl z-40 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:s.jsx(t,{size:16,className:"text-blue-600"})}),s.jsx("h3",{className:"font-semibold text-slate-900",children:"Contextual Insights"})]}),f&&s.jsx("button",{onClick:f,className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(a,{size:16,className:"text-slate-500"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("button",{onClick:()=>w("assumptions"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{size:16,className:"text-amber-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Key Assumptions"})]}),v.assumptions?s.jsx(n,{size:16,className:"text-slate-400"}):s.jsx(l,{size:16,className:"text-slate-400"})]}),s.jsx(h,{children:v.assumptions&&s.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-100",children:s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Discount Rate"}),s.jsx("span",{className:"font-mono text-slate-900",children:"10.0%"})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Terminal Growth"}),s.jsx("span",{className:"font-mono text-slate-900",children:"2.5%"})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Tax Rate"}),s.jsx("span",{className:"font-mono text-slate-900",children:"25.0%"})]})]})})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("button",{onClick:()=>w("benchmarks"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r,{size:16,className:"text-emerald-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Industry Benchmarks"})]}),v.benchmarks?s.jsx(n,{size:16,className:"text-slate-400"}):s.jsx(l,{size:16,className:"text-slate-400"})]}),s.jsx(h,{children:v.benchmarks&&s.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-100",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"Revenue Growth"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Healthcare Industry"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[s.jsx("span",{children:"8%"}),s.jsx("span",{className:"font-medium",children:"15% (median)"}),s.jsx("span",{children:"25%"})]}),k(12,15,8,25)]}),s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-slate-600",children:"EBITDA Margin"}),s.jsx("span",{className:"text-xs text-slate-500",children:"Healthcare Industry"})]}),s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[s.jsx("span",{children:"18%"}),s.jsx("span",{className:"font-medium",children:"28% (median)"}),s.jsx("span",{children:"40%"})]}),k(24,28,18,40)]})]})})})]}),s.jsx("div",{className:"space-y-3",children:y.map((e,t)=>((e,t)=>{const a={info:"text-blue-500 bg-blue-50",benchmark:"text-emerald-500 bg-emerald-50",assumption:"text-amber-500 bg-amber-50",insight:"text-purple-500 bg-purple-50"},n={info:o,benchmark:i,assumption:d,insight:c}[e.type]||o,r=a[e.type]||a.info;return s.jsx(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"p-4 bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${r}`,children:s.jsx(n,{size:16})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-slate-900 text-sm mb-2",children:e.title}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:e.content}),void 0!==e.metric&&void 0!==e.benchmark&&s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[s.jsxs("span",{children:["Current: ",e.metric.toFixed(1),"%"]}),s.jsxs("span",{children:["Benchmark: ",e.benchmark,"%"]})]}),k(e.metric,e.benchmark,0,Math.max(1.5*e.benchmark,1.2*e.metric))]}),e.suggestions&&s.jsx("div",{className:"mt-3",children:s.jsx("div",{className:"space-y-1",children:e.suggestions.map((e,t)=>s.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[s.jsx(l,{size:12,className:"text-slate-400 mt-0.5 flex-shrink-0"}),s.jsx("span",{children:e})]},t))})}),e.action&&s.jsx("button",{onClick:()=>b?.(e),className:"mt-3 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-medium rounded-md transition-colors",children:e.action})]})]})},t)})(e,t))}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsxs("button",{onClick:()=>w("suggestions"),className:"w-full flex items-center justify-between p-4 text-left hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(c,{size:16,className:"text-purple-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:"Smart Suggestions"})]}),v.suggestions?s.jsx(n,{size:16,className:"text-slate-400"}):s.jsx(l,{size:16,className:"text-slate-400"})]}),s.jsx(h,{children:v.suggestions&&s.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-t border-slate-100",children:s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[s.jsx(t,{size:14,className:"text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-blue-900 mb-1",children:"Create Revenue vs CapEx Chart"}),s.jsx("div",{className:"text-xs text-blue-700",children:"Visualize the relationship between revenue growth and capital expenditure"})]})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-emerald-50 rounded-lg",children:[s.jsx(m,{size:14,className:"text-emerald-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-emerald-900 mb-1",children:"Add Sensitivity Analysis"}),s.jsx("div",{className:"text-xs text-emerald-700",children:"Test how valuation changes with different assumptions"})]})]})]})})})]})]})})]}):null};export{u as default};
//# sourceMappingURL=ContextualInsightsSidebar-apLclGis.js.map
