{"version":3,"mappings":";24CA6VA,MAAAA,GAAe,IAtVf,MACE,WAAAC,GACEC,KAAKC,QAAU,iCACfD,KAAKE,OAASC,EAAMC,OAAO,CACzBH,QAASD,KAAKC,QACdI,QAAS,KACTC,QAAS,CACP,eAAgB,sBAKpBN,KAAKE,OAAOK,aAAaC,SAASC,IAC/BD,GAAaA,EACbE,GAEQC,QAAQC,OAAOF,GAG5B,CAWA,cAAMG,CAASC,GAEb,aADuBd,KAAKE,OAAOa,IAAI,sBAAsBD,EAAOE,kBACpDC,IAClB,CASA,uBAAMC,CAAkBJ,EAAQK,EAAQ,MAAOC,EAAW,MAIxD,aAHuBpB,KAAKE,OAAOa,IAAI,2BAA2BD,EAAOE,gBAAiB,CACxFK,OAAQ,CAAEF,QAAOC,eAEHH,IAClB,CAQA,qBAAMK,CAAgBR,EAAQM,EAAW,QAIvC,aAHuBpB,KAAKE,OAAOa,IAAI,yBAAyBD,EAAOE,gBAAiB,CACtFK,OAAQ,CAAED,eAEIH,IAClB,CAOA,oBAAMM,CAAeC,GAInB,aAHuBxB,KAAKE,OAAOuB,KAAK,qBAAsB,CAC5DD,QAASA,EAAQE,IAAIC,GAAKA,EAAEX,kBAEdC,IAClB,CAaA,wBAAMW,CAAmBd,EAAQe,EAAS,SAAUC,EAAQ,GAI1D,aAHuB9B,KAAKE,OAAOa,IAAI,gCAAgCD,EAAOE,gBAAiB,CAC7FK,OAAQ,CAAEQ,SAAQC,YAEJb,IAClB,CASA,qBAAMc,CAAgBjB,EAAQe,EAAS,SAAUC,EAAQ,GAIvD,aAHuB9B,KAAKE,OAAOa,IAAI,iCAAiCD,EAAOE,gBAAiB,CAC9FK,OAAQ,CAAEQ,SAAQC,YAEJb,IAClB,CASA,0BAAMe,CAAqBlB,EAAQe,EAAS,SAAUC,EAAQ,GAI5D,aAHuB9B,KAAKE,OAAOa,IAAI,mCAAmCD,EAAOE,gBAAiB,CAChGK,OAAQ,CAAEQ,SAAQC,YAEJb,IAClB,CASA,wBAAMgB,CAAmBnB,EAAQe,EAAS,SAAUC,EAAQ,GAI1D,aAHuB9B,KAAKE,OAAOa,IAAI,gCAAgCD,EAAOE,gBAAiB,CAC7FK,OAAQ,CAAEQ,SAAQC,YAEJb,IAClB,CAWA,uBAAMiB,CAAkBpB,GAEtB,aADuBd,KAAKE,OAAOa,IAAI,yBAAyBD,EAAOE,kBACvDC,IAClB,CAQA,sBAAMkB,CAAiBrB,EAAQgB,EAAQ,IAIrC,aAHuB9B,KAAKE,OAAOa,IAAI,uBAAuBD,EAAOE,gBAAiB,CACpFK,OAAQ,CAAES,YAEIb,IAClB,CAOA,qBAAMmB,CAAgBtB,GAEpB,aADuBd,KAAKE,OAAOa,IAAI,qBAAqBD,EAAOE,kBACnDC,IAClB,CAQA,iBAAMoB,CAAYvB,EAAQgB,EAAQ,GAIhC,aAHuB9B,KAAKE,OAAOa,IAAI,0BAA0BD,EAAOE,gBAAiB,CACvFK,OAAQ,CAAES,YAEIb,IAClB,CAcA,iBAAMqB,CAAYC,EAAUT,EAAQ,IAAKU,EAAY,KAAMC,EAAU,MACnE,MAAMpB,EAAS,CAAES,SACbU,MAAkBE,WAAaF,GAC/BC,MAAgBE,SAAWF,GAK/B,aAHuBzC,KAAKE,OAAOa,IAAI,uBAAuBwB,EAASvB,gBAAiB,CACtFK,YAEcJ,IAClB,CAMA,2BAAM2B,GAEJ,aADuB5C,KAAKE,OAAOa,IAAI,8BACvBE,IAClB,CAMA,sBAAM4B,GAEJ,aADuB7C,KAAKE,OAAOa,IAAI,kCACvBE,IAClB,CAUA,qBAAM6B,GAEJ,aADuB9C,KAAKE,OAAOa,IAAI,YACvBE,IAClB,CAMA,sBAAM8B,GAEJ,aADuB/C,KAAKE,OAAOa,IAAI,qBACvBE,IAClB,CAMA,mBAAM+B,GAEJ,aADuBhD,KAAKE,OAAOa,IAAI,kBACvBE,IAClB,CAYA,qBAAMgC,CAAgBC,EAAQ/B,EAAQ,MACpC,IACE,MAAMF,QAAajB,KAAKkB,kBAAkBgC,EAAQ/B,GAGlD,MAAO,CACLL,OAAQG,EAAKH,OACbK,MAAOF,EAAKE,MACZF,KAAMA,EAAKA,KACXkC,KAAMlC,EAAKkC,KACXC,WAAYnC,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEC,WACjCC,OAAQ,CACNC,MAAOvC,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEG,OAC5BC,KAAMxC,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEI,MAC3BC,IAAKzC,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEK,KAC1BC,KAAM1C,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEM,OAE7BC,OAAQ3C,EAAKA,KAAKS,IAAI2B,GAAKA,EAAEO,QAC7BC,OAAQ5C,EAAK4C,OAEjB,OAASnD,GAEP,MAAMA,CACR,CACF,CAUA,8BAAMoD,CAAyBZ,EAAQa,EAAY,mBAAoBlC,EAAS,SAAUC,EAAQ,GAChG,IACE,IAAIb,EAEJ,OAAQ8C,GACN,IAAK,mBACH9C,QAAajB,KAAK4B,mBAAmBsB,EAAQrB,EAAQC,GACrD,MACF,IAAK,0BACHb,QAAajB,KAAK+B,gBAAgBmB,EAAQrB,EAAQC,GAClD,MACF,IAAK,sBACHb,QAAajB,KAAKgC,qBAAqBkB,EAAQrB,EAAQC,GACvD,MACF,QACE,MAAM,IAAIkC,MAAM,+BAA+BD,KAGnD,OAAO9C,EAAKA,IACd,OAASP,GAEP,MAAMA,CACR,CACF,CAOA,0BAAMuD,CAAqBf,GACzB,IAEE,aADmBlD,KAAKmC,iBAAiBe,IAC7BgB,KACd,OAASxD,GAEP,MAAMA,CACR,CACF,GChUIyD,GAAuB,EAC3BC,UAAS,EACTC,WACAC,iBAAiB,GACjBC,gBAAgB,KAChBC,aAAa,SAEb,MAAOC,EAAUC,GAAeC,WAAS,CACvC,CACEC,GAAI,IACJC,KAAM,YACNC,QAAS,+KACTxB,cAAeyB,KACfC,YAAa,CACX,mCACA,sCACA,mCACA,qCAICC,EAAYC,GAAiBP,WAAS,KACtCQ,EAAWC,GAAgBT,YAAS,IACpCU,EAAaC,GAAkBX,YAAS,GACzCY,EAAiBC,SAAO,MACxBC,EAAWD,SAAO,MAMxBE,YAAU,KAHRH,EAAeI,SAASC,eAAe,CAAEC,SAAU,YAKlD,CAACpB,IAEJ,MAAMqB,EAAoBC,MAAMC,EAAUf,KACxC,IAAKe,EAAQC,OAAQ,OAErB,MAAMC,EAAc,CAClBtB,GAAIG,KAAKoB,MAAMC,WACfvB,KAAM,OACNC,QAASkB,EACT1C,cAAeyB,MAGjBL,EAAY2B,GAAQ,IAAIA,EAAMH,IAC9BhB,EAAc,IACdE,GAAa,GAEb,IAEE,MAAM5E,QAAiBV,GAAgB2B,KAAK,qBAAsB,CAChEuE,UACAM,QAAS,IACJhC,EACHC,gBACAC,aACA+B,iBAAkB9B,EAAS+B,OAAM,MAI/BC,EAAmB,CACvB7B,IAAKG,KAAKoB,MAAQ,GAAGC,WACrBvB,KAAM,YACNC,QAAStE,EAASS,KAAKT,SACvB8C,cAAeyB,KACfC,YAAaxE,EAASS,KAAK+D,aAAe,GAC1C0B,OAAQlG,EAASS,KAAKyF,QAAU,GAChCC,QAASnG,EAASS,KAAK0F,SAAW,IAGpCjC,EAAY2B,GAAQ,IAAIA,EAAMI,GAChC,OAAS/F,GAIP,MAAMkG,EAAkB,CACtBhC,IAAKG,KAAKoB,MAAQ,GAAGC,WACrBvB,KAAM,YACNC,QAAS,gOACTxB,cAAeyB,KACfC,YAAa,CACX,0BACA,0BACA,mBACA,uBAIJN,EAAY2B,GAAQ,IAAIA,EAAMO,GAChC,SACExB,GAAa,EACf,GAcIyB,EAAe,CACnB,CAAEC,KAAMC,EAAUC,MAAO,qBAAsBC,OAAQ,2DACvD,CAAEH,KAAMI,EAAYF,MAAO,kBAAmBC,OAAQ,yDACtD,CAAEH,KAAMK,EAAeH,MAAO,kBAAmBC,OAAQ,2CACzD,CAAEH,KAAMM,EAAYJ,MAAO,qBAAsBC,OAAQ,mDACzD,CAAEH,KAAMO,EAAQL,MAAO,gBAAiBC,OAAQ,yCAChD,CAAEH,KAAMQ,EAAWN,MAAO,qBAAsBC,OAAQ,8CAG1D,OAAK7C,EAGHmD,MAAC,OAAIC,UAAU,iFACbC,SAAAC,OAACC,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGC,MAAO,GAAKC,EAAG,IACtCC,QAAS,CACPH,QAAS,EACTC,MAAO,EACPC,EAAG,EACHE,OAAQ7C,EAAc,OAAS,QAEjC8C,KAAM,CAAEL,QAAS,EAAGC,MAAO,GAAKC,EAAG,IACnCR,UAAU,iEAGVC,SAAA,CAAAC,OAAC,OAAIF,UAAU,8GACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wCACbC,eAACW,EAAA,CAAMZ,UAAU,qBAElB,OACCC,SAAA,CAAAF,MAAC,MAAGC,UAAU,oBAAoBC,SAAA,2BAClCF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,2CAGzCC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,UACCc,QAAS,IAAM/C,GAAgBD,GAC/BmC,UAAU,sEAETC,SAAApC,QAAeiD,EAAA,CAAUd,UAAU,YAAeD,MAACgB,EAAA,CAAUf,UAAU,cAE1ED,MAAC,UACCc,QAAShE,EACTmD,UAAU,sEAEVC,SAAAF,MAACiB,EAAA,CAAEhB,UAAU,qBAKjBnC,GACAqC,OAAAe,WAAA,CAEEhB,SAAA,CAAAC,OAAC,OAAIF,UAAU,uCACbC,SAAA,CAAAF,MAACmB,EAAA,CACEjB,SAAAhD,EAAS/C,IAAKsE,GACbuB,MAACI,EAAOC,IAAP,CAECC,QAAS,CAAEC,QAAS,EAAGE,EAAG,IAC1BC,QAAS,CAAEH,QAAS,EAAGE,EAAG,GAC1BG,KAAM,CAAEL,QAAS,EAAGE,GAAG,IACvBR,UAAW,SAAyB,SAAjBxB,EAAQnB,KAAkB,cAAgB,iBAE7D4C,SAAAC,OAAC,OAAIF,UAAW,kBAAmC,SAAjBxB,EAAQnB,KAAkB,mBAAqB,mCAC/E4C,SAAA,CAAAF,MAAC,OACCC,UAAW,mBACQ,SAAjBxB,EAAQnB,KACJ,4BACA,iCAGL4C,SAAiB,SAAjBzB,EAAQnB,KAAkB0C,MAACoB,EAAA,CAAKnB,UAAU,YAAeD,MAACqB,EAAA,CAAIpB,UAAU,cAE3EE,OAAC,OACCF,UAAW,0BACQ,SAAjBxB,EAAQnB,KACJ,8BACA,kCAGN4C,SAAA,CAAAF,MAAC,KAAEC,UAAU,sBAAuBC,SAAAzB,EAAQlB,UAG3CkB,EAAQhB,aAAegB,EAAQhB,YAAY6D,OAAS,GACnDnB,OAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAF,MAAC,KAAEC,UAAU,iCAAiCC,SAAA,iBAC9CF,MAAC,OAAIC,UAAU,uBACZC,WAAQzC,YAAYtD,IAAI,CAACoH,EAAYC,IACpCxB,MAAC,UAECc,QAAS,IAtGX,CAACS,IAC7BhD,EAAkBgD,IAqG2BE,CAAsBF,GACrCtB,UAAU,2FAETC,SAAAqB,GAJIC,SAYd/C,EAAQU,QAAUV,EAAQU,OAAOmC,OAAS,GACzCnB,OAAC,OAAIF,UAAU,6CACbC,SAAA,CAAAF,MAAC,KAAEC,UAAU,2BAA2BC,SAAA,yBACxCF,MAAC,OAAIC,UAAU,qBAAqBC,SAAA,6EAMvC,OAAID,UAAU,0BACZC,SAAAzB,EAAQ1C,UAAU2F,8BAtDpBjD,EAAQpB,OA8DlBO,GACCoC,MAACI,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBG,QAAS,CAAEH,QAAS,GACpBN,UAAU,qBAEVC,SAAAC,OAAC,OAAIF,UAAU,6BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,+CACbC,eAACmB,EAAA,CAAIpB,UAAU,oBAEhB,OAAIA,UAAU,oCACbC,SAAAC,OAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,oDACfD,MAAC,OAAIC,UAAU,kDAAkD0B,MAAO,CAAEC,eAAgB,UAC1F5B,MAAC,OAAIC,UAAU,kDAAkD0B,MAAO,CAAEC,eAAgB,oBAMpG5B,MAAC,OAAI6B,IAAK7D,OAIS,IAApBd,EAASoE,QACRnB,OAAC,OAAIF,UAAU,qCACbC,SAAA,CAAAF,MAAC,KAAEC,UAAU,yCAAyCC,SAAA,mBACtDF,MAAC,OAAIC,UAAU,wCACZC,WAAa/F,IAAI,CAACuF,EAAQ8B,IACzBrB,OAAC,UAECW,QAAS,IAAMvC,EAAkBmB,EAAOA,QACxCO,UAAU,iHAEVC,SAAA,CAAAF,MAACN,EAAOH,KAAP,CAAYU,UAAU,0BACvBD,MAAC,QAAKC,UAAU,oCAAqCC,WAAOT,UALvD+B,eAad,OAAIvB,UAAU,+BACbC,SAAAC,OAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,kBACbC,SAAAF,MAAC,YACC6B,IAAK3D,EACL4D,MAAOpE,EACPqE,SAAWC,GAAMrE,EAAcqE,EAAEC,OAAOH,OACxCI,WAjLMF,IACR,UAAVA,EAAEG,KAAoBH,EAAEI,WAC1BJ,EAAEK,iBACF9D,MA+Kc+D,YAAY,kFACZrC,UAAU,2HACVsC,KAAM,EACNZ,MAAO,CAAEa,UAAW,OAAQC,UAAW,aAG3CtC,OAAC,UACCW,QAAS,IAAMvC,IACfmE,UAAWhF,EAAWgB,QAAUd,EAChCqC,UAAU,8JAEVC,SAAA,CAAAF,MAAC2C,EAAA,CAAK1C,UAAU,YAChBD,MAAC,QAAKE,SAAA,oBAOfpC,SACE,OAAImC,UAAU,+BACbC,SAAAC,OAAC,OAAIF,UAAU,oCACbC,SAAA,CAAAF,MAAC,KAAEC,UAAU,wBAAwBC,SAAA,8BACrCC,OAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,oDACfD,MAAC,QAAKC,UAAU,wBAAwBC,SAAA,wBA3LlC,MCrIf,MAAM0C,GACX,WAAApK,GACEC,KAAKsG,QAAU,GACftG,KAAKoK,eAAiB,GACtBpK,KAAKqK,QAAU,CACbC,EAAK,YACLC,GAAM,cACNC,KAAQ,YACRC,IAAO,WACPC,KAAQ,OACRC,MAAS,QACTC,GAAM,OACNC,GAAM,kBACNC,GAAM,YAGR9K,KAAK+K,SAAW/K,KAAKgL,oBACvB,CAEA,aAAAC,CAAcC,GACZlL,KAAKsG,QAAU,IAAKtG,KAAKsG,WAAY4E,EACvC,CAEA,kBAAAF,GACE,MAAO,CAELN,KAAM,CACJS,YAAa,oCACbC,MAAO,iBACPC,SAAU,SACVC,QAAStL,KAAKuL,WAAWC,KAAKxL,OAIhCyL,UAAW,CACTN,YAAa,kCACbC,MAAO,mDACPC,SAAU,YACVC,QAAStL,KAAK0L,gBAAgBF,KAAKxL,OAIrC,cAAe,CACbmL,YAAa,+BACbC,MAAO,iDACPC,SAAU,SACVC,QAAStL,KAAK2L,iBAAiBH,KAAKxL,OAGtC4L,MAAO,CACLT,YAAa,kBACbC,MAAO,iBACPC,SAAU,SACVC,QAAStL,KAAK6L,YAAYL,KAAKxL,OAIjC8L,UAAW,CACTX,YAAa,yBACbC,MAAO,gDACPC,SAAU,eACVC,QAAStL,KAAK+L,gBAAgBP,KAAKxL,OAGrCgM,IAAK,CACHb,YAAa,4BACbC,MAAO,2DACPC,SAAU,eACVC,QAAStL,KAAKiM,UAAUT,KAAKxL,OAI/BkM,SAAU,CACRf,YAAa,uCACbC,MAAO,8EACPC,SAAU,aACVC,QAAStL,KAAKmM,eAAeX,KAAKxL,OAIpCoM,KAAM,CACJjB,YAAa,oDACbC,MAAO,oDACPC,SAAU,OACVC,QAAStL,KAAKqM,WAAWb,KAAKxL,OAGhCsM,OAAQ,CACNnB,YAAa,iDACbC,MAAO,kDACPC,SAAU,OACVC,QAAStL,KAAKuM,aAAaf,KAAKxL,OAIlCwM,QAAS,CACPrB,YAAa,6BACbC,MAAO,iEACPC,SAAU,WACVC,QAAStL,KAAKyM,cAAcjB,KAAKxL,OAGnC0M,KAAM,CACJvB,YAAa,4BACbC,MAAO,iEACPC,SAAU,WACVC,QAAStL,KAAK2M,WAAWnB,KAAKxL,OAIhC4M,OAAQ,CACNzB,YAAa,iCACbC,MAAO,kEACPC,SAAU,UACVC,QAAStL,KAAK6M,aAAarB,KAAKxL,OAGlC8M,OAAQ,CACN3B,YAAa,uCACbC,MAAO,qDACPC,SAAU,UACVC,QAAStL,KAAK+M,aAAavB,KAAKxL,OAIlCgN,OAAQ,CACN7B,YAAa,yCACbC,MAAO,sBACPC,SAAU,SACVC,QAAStL,KAAKiN,aAAazB,KAAKxL,OAGlC2K,MAAO,CACLQ,YAAa,4BACbC,MAAO,QACPC,SAAU,SACVC,QAAStL,KAAKkN,YAAY1B,KAAKxL,OAGjCmN,QAAS,CACPhC,YAAa,0CACbC,MAAO,UACPC,SAAU,SACVC,QAAStL,KAAKoN,cAAc5B,KAAKxL,OAGvC,CAEA,oBAAMqN,CAAeC,GACnB,MAAMC,EAAQvN,KAAKwN,aAAaF,GAC1BG,EAAczN,KAAK0N,aAAaH,EAAMI,SACtCA,EAAU3N,KAAK+K,SAAS0C,GAE9B,IAAKE,EACH,MAAO,CACLC,SAAS,EACTlN,MAAO,YAAY+M,qDAIvB,IACE,MAAMI,QAAeF,EAAQrC,QAAQiC,EAAMO,KAAMP,EAAMQ,OAEvD,OADA/N,KAAKoK,eAAe4D,KAAK,CAAEL,QAASL,EAAOhK,UAAW,IAAIyB,KAAQ8I,WAC3DA,CACT,CAAE,MAAOnN,GACP,MAAO,CACLkN,SAAS,EACTlN,MAAO,oBAAoB+M,OAAiB/M,EAAMsF,UAEtD,CACF,CAEA,YAAAwH,CAAaF,GACX,MAAMC,EAAQD,EAAMrH,OAAOgI,MAAM,OAC3BN,EAAUJ,EAAM,GAChBW,EAAYX,EAAM/G,MAAM,GAExBsH,EAAO,GACPC,EAAQ,GAEd,IAAK,IAAII,EAAI,EAAGA,EAAID,EAAUrF,OAAQsF,IAAK,CACzC,MAAMC,EAAOF,EAAUC,GACvB,GAAIC,EAAKC,WAAW,MAAO,CACzB,MAAO3E,EAAKL,GAAS+E,EAAKE,UAAU,GAAGL,MAAM,KAC7CF,EAAMrE,GAAOL,IAAS,CACxB,MAAW+E,EAAKC,WAAW,KACzBN,EAAMK,EAAKE,UAAU,KAAM,EAE3BR,EAAKE,KAAKI,EAEd,CAEA,MAAO,CAAET,UAASG,OAAMC,QAC1B,CAEA,YAAAL,CAAaC,GACX,OAAO3N,KAAKqK,QAAQsD,IAAYA,CAClC,CAEA,cAAAY,CAAejB,GACb,MAAMC,EAAQD,EAAMrH,OAAOgI,MAAM,OAC3BO,EAAUjB,EAAM,GAAGkB,cAEzB,GAAqB,IAAjBlB,EAAM1E,OAER,OAAO6F,OAAOC,KAAK3O,KAAK+K,UACrB6D,OAAOC,GAAOA,EAAIR,WAAWG,IAC7BM,OAAOJ,OAAOC,KAAK3O,KAAKqK,SAASuE,OAAOG,GAASA,EAAMV,WAAWG,KAClEQ,OAIL,MAAMrB,EAAU3N,KAAK0N,aAAaH,EAAM,IACxC,OAAOvN,KAAKiP,8BAA8BtB,EAASJ,EAAM/G,MAAM,GACjE,CAEA,6BAAAyI,CAA8BtB,EAASuB,GACrC,MAAMlK,EAAc,GAEpB,OAAQ2I,GACN,IAAK,WACH3I,EAAYgJ,KAAK,YAAa,cAAe,YAAa,WAAY,mBAAoB,sBAAuB,aACjH,MACF,IAAK,YACHhJ,EAAYgJ,KAAK,OAAQ,UAAW,YAAa,OAAQ,WAAY,eACrE,MACF,IAAK,YACHhJ,EAAYgJ,KAAK,MAAO,OAAQ,OAAQ,SAAU,UAAW,OAC7D,MACF,IAAK,OACHhJ,EAAYgJ,KAAK,WAAY,YAAa,aAAc,gBACxD,MACF,IAAK,UACHhJ,EAAYgJ,KAAK,qBAAsB,mBAAoB,eAC3D,MACF,IAAK,SACHhJ,EAAYgJ,KAAK,eAAgB,gBAAiB,iBAItD,OAAOhJ,CACT,CAGA,gBAAMuG,CAAWuC,EAAMqB,GACrB,GAAIrB,EAAKjF,OAAS,EAAG,CACnB,MAAM4E,EAAczN,KAAK0N,aAAaI,EAAK,IACrCH,EAAU3N,KAAK+K,SAAS0C,GAC9B,OAAIE,EACK,CACLC,SAAS,EACTwB,OAAQ,GAAG3B,MAAgBE,EAAQxC,uBAAuBwC,EAAQvC,oBAAoBuC,EAAQtC,WAC9FxG,KAAM,QAGD,CACL+I,SAAS,EACTwB,OAAQ,YAAY3B,gBACpB5I,KAAM,QAGZ,CAEA,IAAIuK,EAAS,0BACbA,GAAU,8CAEV,MAAMC,EAAa,GAcnB,OAbAX,OAAOY,QAAQtP,KAAK+K,UAAUwE,QAAQ,EAAEC,EAAMX,MACvCQ,EAAWR,EAAIxD,YAAWgE,EAAWR,EAAIxD,UAAY,IAC1DgE,EAAWR,EAAIxD,UAAU2C,KAAK,CAAEwB,UAASX,MAG3CH,OAAOY,QAAQD,GAAYE,QAAQ,EAAElE,EAAUN,MAC7CqE,GAAU,GAAG/D,EAASrK,kBACtB+J,EAASwE,QAAQV,IACfO,GAAU,KAAKP,EAAIW,KAAKC,OAAO,OAAOZ,EAAI1D,kBAE5CiE,GAAU,OAGL,CAAExB,SAAS,EAAMwB,SAAQvK,KAAM,OACxC,CAEA,qBAAM6G,CAAgBoC,EAAMqB,GAE1B,MAAO,CACLvB,SAAS,EACTwB,OAAQ,aAHKtB,EAAK,IAAM,yCAIxBjJ,KAAM,OAEV,CAEA,sBAAM8G,CAAiBmC,EAAMqB,GAE3B,MAAO,CACLvB,SAAS,EACTwB,OAAQ,mBAHKtB,EAAK,IAAM,wCAIxBjJ,KAAM,OAEV,CAEA,iBAAMgH,CAAYiC,EAAMqB,GACtB,MAAMrO,EAASgN,EAAK,GACpB,OAAKhN,EAOE,CACL8M,SAAS,EACTwB,OAAQ,aAAatO,oCACrB+D,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,wBACRvK,KAAM,QAQZ,CAEA,qBAAMkH,CAAgB+B,EAAMqB,GAE1B,MAAO,CACLvB,SAAS,EACTwB,OAAQ,aAHOtB,EAAK,IAAM,wCAI1BjJ,KAAM,OAEV,CAEA,eAAMoH,CAAUiD,EAAOC,GACrB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,kDACRvK,KAAM,OAEV,CAEA,oBAAMsH,CAAe2B,EAAMqB,GACzB,MAAMO,EAAO5B,EAAK,GAClB,OAAK4B,EAOE,CACL9B,SAAS,EACTwB,OAAQ,eAAeM,oCACvB7K,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,yBACRvK,KAAM,QAQZ,CAEA,gBAAMwH,CAAWyB,EAAMqB,GAErB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,QAHOtB,EAAK,IAAM,6CAI1BjJ,KAAM,OAEV,CAEA,kBAAM0H,CAAauB,EAAMqB,GACvB,MAAMQ,EAAQ7B,EAAK8B,KAAK,KACxB,OAAKD,EAOE,CACL/B,SAAS,EACTwB,OAAQ,eAAeO,qCACvB9K,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,wBACRvK,KAAM,QAQZ,CAEA,mBAAM4H,CAAcqB,EAAMqB,GACxB,MAAM3F,EAASsE,EAAK,GACpB,OAAKtE,EAOE,CACLoE,SAAS,EACTwB,OAAQ,WAAW5F,oCACnB3E,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,oCACRvK,KAAM,QAQZ,CAEA,gBAAM8H,CAAWmB,EAAMqB,GAErB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,qBAHKtB,EAAK,IAAM,8CAIxBjJ,KAAM,OAEV,CAEA,kBAAMgI,CAAaiB,EAAMqB,GACvB,MAAMU,EAAW/B,EAAK,GACtB,OAAK+B,EAOE,CACLjC,SAAS,EACTwB,OAAQ,UAAUS,oCAClBhL,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,4BACRvK,KAAM,QAQZ,CAEA,kBAAMkI,CAAae,EAAMqB,GACvB,MAAMW,EAAWhC,EAAK,GACtB,OAAKgC,EAOE,CACLlC,SAAS,EACTwB,OAAQ,eAAeU,oCACvBjL,KAAM,QATC,CACL+I,SAAS,EACTwB,OAAQ,4BACRvK,KAAM,QAQZ,CAEA,kBAAMoI,CAAaiC,EAAOnB,GACxB,MAAMgC,EAAWhC,GAAOgC,UAAYhC,GAAO1K,EAE3C,IAAI+L,EAAS,qBAeb,OAdAA,GAAU,4CACVA,GAAU,kCACVA,GAAU,kCACVA,GAAU,uBAAyBpP,KAAKsG,QAAQ0J,WAAa,eAAiB,oBAAsB,KACpGZ,GAAU,uBAAyBpP,KAAKsG,QAAQ/B,cAAgB,YAAc,iBAAmB,KACjG6K,GAAU,iCAENW,IACFX,GAAU,uBACVA,GAAU,wBAAwBpP,KAAKoK,eAAevB,WACtDuG,GAAU,iBAAiBpP,KAAKsG,QAAQhC,gBAAgB2L,MAAQ,cAChEb,GAAU,mBAAkB,IAAIrK,MAAOmL,sBAGlC,CACLtC,SAAS,EACTwB,SACAvK,KAAM,OAEV,CAEA,eAAMsL,CAAUjB,EAAOC,GACrB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,+CACRvK,KAAM,OAEV,CAEA,iBAAMuL,CAAYlB,EAAOC,GACvB,MAAMkB,EAAYlB,GAAQY,UAAYZ,GAAQ9L,EAE9C,IAAI+L,EAAS,qBAeb,OAdAA,GAAU,4CACVA,GAAU,kCACVA,GAAU,kCACVA,GAAU,uBAAyBpP,KAAKsG,QAAQ0J,WAAa,eAAiB,oBAAsB,KACpGZ,GAAU,uBAAyBpP,KAAKsG,QAAQ/B,cAAgB,YAAc,iBAAmB,KACjG6K,GAAU,iCAENiB,IACFjB,GAAU,uBACVA,GAAU,wBAAwBpP,KAAKoK,eAAevB,WACtDuG,GAAU,iBAAiBpP,KAAKsG,QAAQhC,gBAAgB2L,MAAQ,cAChEb,GAAU,mBAAkB,IAAIrK,MAAOmL,sBAGlC,CACLtC,SAAS,EACTwB,SACAvK,KAAM,OAEV,CAEA,iBAAMqI,CAAYgC,EAAOC,GACvB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,GACRvK,KAAM,QAEV,CAEA,mBAAMuI,CAAc8B,EAAOC,GACzB,MAAO,CACLvB,SAAS,EACTwB,OAAQ,sGACRvK,KAAM,OAEV,EC7fU,MAACyL,GAAiB,CAACjH,EAAOkH,EAAW,MAAOC,GAAU,KAChE,GAAInH,SAAyCoH,MAAMpH,GAAQ,MAAO,MAUlE,OARkB,IAAIqH,KAAKC,aAAa,QAAS,CAC/CzH,MAAO,WACPqH,WACAK,SAAUJ,EAAU,UAAY,WAChCK,sBAAuB,EACvBC,sBAAuB,IAGRC,OAAO1H,IAGb2H,GAAmB,CAAC3H,EAAO4H,EAAW,IAC7C5H,SAAyCoH,MAAMpH,GAAe,MAC3D,IAAY,IAARA,GAAa6H,QAAQD,MAGrBE,GAAe,CAAC9H,EAAO4H,EAAW,EAAGT,GAAU,KAC1D,GAAInH,SAAyCoH,MAAMpH,GAAQ,MAAO,MAQlE,OANkB,IAAIqH,KAAKC,aAAa,QAAS,CAC/CC,SAAUJ,EAAU,UAAY,WAChCK,sBAAuB,EACvBC,sBAAuBG,IAGRF,OAAO1H,IAyEb+H,GAAwBC,IACnC,MAAMC,eACJA,EAAcC,kBACdA,EAAiBC,UACjBA,EAASC,KACTA,EAAIC,mBACJA,EAAkBC,kBAClBA,EAAiBC,UACjBA,EAASC,KACTA,EAAIC,gBACJA,EAAkB,GAChBT,EAGEU,EA7BwB,EAACC,EAAcC,EAAaC,EAAQ,KAClE,MAAMC,EAAY,GAClB,IAAIC,EAAkBJ,EAEtB,IAAK,IAAI7D,EAAI,EAAGA,EAAI+D,EAAO/D,IAIzBiE,GAAmB,GAHAC,MAAMC,QAAQL,GAC7BA,EAAY9D,IAAM8D,EAAYA,EAAYpJ,OAAS,GACnDoJ,GAEJE,EAAUnE,KAAKoE,GAGjB,OAAOD,GAiBmBI,CAAiBjB,EAAgBC,EAAmBO,GAGxEU,EAAgBT,EAAkBrQ,IAAI+Q,GAAWA,EAAUjB,GAG3DkB,EAvC8B,EAACC,EAAejB,EAAoBkB,IAChED,GAAiB,EAAIjB,IAAwBkB,EAAelB,GAsC9CmB,CACpBL,EAAcA,EAAc3J,OAAS,GACrC6I,EACAD,GAIIqB,GA5FgCF,EA4FYnB,EAAfe,EA3FlBO,OAAO,CAACC,EAAKC,EAAUlK,IAC/BiK,EAAMC,EAAWC,KAAKC,IAAI,EAAIP,EAAc7J,EAAQ,GAC1D,IAHuB,IAAY6J,EA6FtC,MAAMQ,EAAoBV,EAAgBQ,KAAKC,IAAI,EAAI1B,EAAMK,GAGvDuB,EAAkBP,EAAgBM,EAClCE,EAAcD,EAAkBzB,EAAYC,EAGlD,MAAO,CACLwB,kBACAC,cACAC,cALoBD,EAAc3B,EAMlCmB,gBACAM,oBACAV,gBACAX,oBACAS,gBACAf,OACAC,uBAIS8B,GAAsBnC,IACjC,MAAMoC,cACJA,EAAaC,OACbA,EAAMC,aACNA,EAAe,EAACC,aAChBA,EAAYC,SACZA,EAAW,EAACC,kBACZA,EAAoB,IAAIC,oBACxBA,EAAsB,IACpB1C,EAGEO,EAAY8B,EAASC,EACrBK,EAAmBP,EAAgB7B,EAInCqC,EAAaP,EAASR,KAAKC,IAAI,KAAsBU,GAGrDK,EAAsBD,EAAaL,EAEnCO,EAAkBD,EADU,GAAZtC,EAIhBwC,EAAcD,EAAkBH,EAChCK,EAAMnB,KAAKC,IAAIiB,EAAa,EAAIP,GAAY,EAC5CS,EAAOF,EAGPG,EAAsBP,EAAmBF,EAAoBD,EAC7DW,EAAkBtB,KAAKuB,IAAI,GAAIN,EAAkBH,GAAoBD,GAE3E,MAAO,CACLC,mBACApC,YACAuC,kBACAC,cACAC,MACAC,OACAL,aACAC,sBACAQ,eAAgBH,EAChBC,kBACAG,UAAWR,EAAkBI,EAAsBC,IAI1CI,GAA6B,CAACC,EAAaC,KACtD,MAsBMC,EAAY,GAOlB,MARgB,CAAC,YAAa,UAAW,aAAc,cAAe,gBAG9DxF,QAAQyF,IACd,MAAMC,EAAaH,EAASpT,IAAIwT,GAAQA,EAAKF,IAC7CD,EAAUC,GA1BgBG,KAC1B,MAAMC,EAAcD,EAAOvG,OAAOyG,GAAKA,UAAkC5E,MAAM4E,IAC/E,OAA2B,IAAvBD,EAAYvM,OAAqB,CAAEyM,OAAQ,KAAMC,KAAM,KAAMC,IAAK,KAAMf,IAAK,OAEjFW,EAAYpG,KAAK,CAACyG,EAAGC,IAAMD,EAAIC,GAQxB,CACLJ,OAPAF,EAAYvM,OAAS,GAAM,GACtBuM,EAAYA,EAAYvM,OAAS,EAAI,GAAKuM,EAAYA,EAAYvM,OAAS,IAAM,EAClFuM,EAAYlC,KAAKyC,MAAMP,EAAYvM,OAAS,IAMhD0M,KAJWH,EAAYrC,OAAO,CAAC6C,EAAKP,IAAMO,EAAMP,EAAG,GAAKD,EAAYvM,OAKpE2M,IAAKtC,KAAKsC,OAAOJ,GACjBX,IAAKvB,KAAKuB,OAAOW,GACjBS,MAAOT,EAAYvM,UASDiN,CAAoBb,KAGnC,CACLc,QAASlB,EACTmB,eAAgBjB,EAChBkB,kBAAmB,CACjBC,oBAAqBC,GACnBtB,EAAYuB,UACZtB,EAASpT,IAAI4I,GAAKA,EAAE8L,YAEtBC,gBAAiBxB,EAAYyB,QAAUvB,EAAUuB,QAAQhB,OACzDiB,iBAAkB1B,EAAY2B,WAAazB,EAAUyB,WAAWlB,OAChEmB,oBAAqB5B,EAAY6B,YAAc3B,EAAU2B,YAAYpB,UAK9Da,GAAsB,CAAC9M,EAAOsN,KACzC,MAAMC,EAAeD,EAAQ/H,OAAOyG,GAAKA,UAAkC5E,MAAM4E,IACjF,GAA4B,IAAxBuB,EAAa/N,QAAb+N,MAA6BvN,GAAyCoH,MAAMpH,GAC9E,OAAO,KAETuN,EAAa5H,KAAK,CAACyG,EAAGC,IAAMD,EAAIC,GAEhC,OADmBkB,EAAahI,OAAOyG,GAAKA,EAAIhM,GAAOR,OACnC+N,EAAa/N,QCvO7BgO,GAAgB,EACpBvS,iBAAiB,GACjBC,gBAAgB,KAChBC,aAAa,KACbsS,iBAEA,MAAOC,EAAYC,GAAiBrS,YAAS,IACtCU,EAAaC,GAAkBX,YAAS,IACxC2I,EAAO2J,GAAYtS,WAAS,KAC5ByK,EAAQ8H,GAAavS,WAAS,CACnC,CACEC,GAAI,EACJC,KAAM,SACNC,QAAS,0EACTxB,cAAeyB,MAEjB,CACEH,GAAI,EACJC,KAAM,OACNC,QAAS,0EACTxB,cAAeyB,SAGZqF,EAAgB+M,GAAqBxS,WAAS,KAC9CyS,EAAcC,GAAmB1S,YAAS,IAC1CK,EAAasS,GAAkB3S,WAAS,KACxC4S,EAAiBC,GAAsB7S,YAAS,IAChD8S,EAAcC,GAAmB/S,YAAS,GAE3Cc,EAAWD,SAAO,MAClBmS,EAAYnS,SAAO,MACnBoS,EAAepS,SAAO,IAAI2E,IAGhCzE,YAAU,KACJiS,EAAUhS,UACZgS,EAAUhS,QAAQkS,UAAYF,EAAUhS,QAAQmS,eAEjD,CAAC1I,IAGJ1J,YAAU,KACJqR,IAAe1R,GAAeI,EAASE,SACzCF,EAASE,QAAQoS,SAElB,CAAChB,EAAY1R,IAGhBK,YAAU,KACRkS,EAAajS,QAAQsF,cAAc,CACjC3G,iBACAC,gBACAC,aACAsS,gBAED,CAACxS,EAAgBC,EAAeC,EAAYsS,IAE/C,MAAMkB,EAAYC,cAAY,CAACnT,EAASD,EAAO,YAC7C,MAAMqT,EAAY,CAChBtT,GAAIG,KAAKoB,MACTtB,OACAC,UACAxB,cAAeyB,MAEjBmS,EAAU7Q,GAAQ,IAAIA,EAAM6R,KAC3B,IAqCGC,EAAsB,CAAClX,EAAM8P,KACjC,OAAQA,GACN,IAAK,QACH,OAAOqH,EAAYnX,GACrB,IAAK,OACH,OAAOoX,KAAKC,UAAUrX,EAAM,KAAM,GACpC,IAAK,YACH,OAAOsX,EAAoBtX,GAC7B,IAAK,SACH,OAAOuX,EAAiBvX,GAC1B,QACE,OAAOA,IAIPmX,EAAenX,IACnB,IAAKoR,MAAMC,QAAQrR,IAAyB,IAAhBA,EAAK4H,OAAc,MAAO,UAEtD,MAAMvI,EAAUoO,OAAOC,KAAK1N,EAAK,IAC3BwX,EAAYnY,EAAQoB,OACxBwR,KAAKuB,IAAIiE,EAAO7P,UAAW5H,EAAKS,IAAIiX,GAAOC,OAAOD,EAAID,IAAW,IAAI7P,UASvE,MAAO,CANWvI,EAAQoB,IAAI,CAACgX,EAAQvK,IAAMuK,EAAOjJ,OAAOgJ,EAAUtK,KAAKyB,KAAK,OAC7D6I,EAAU/W,IAAImX,GAAS,IAAIC,OAAOD,IAAQjJ,KAAK,UAChD3O,EAAKS,OACpBpB,EAAQoB,IAAI,CAACgX,EAAQvK,IAAMyK,OAAOD,EAAID,IAAW,IAAIjJ,OAAOgJ,EAAUtK,KAAKyB,KAAK,SAGvCA,KAAK,OAG5C2I,EAAuBtX,IAC3B,IAAKA,EAAM,MAAO,8BAElB,IAAImO,EAAS,0BAab,OAZAA,GAAU,4CACVA,GAAU,gBAAgBkB,GAAerP,EAAK8X,YAAc,OAC5D3J,GAAU,iBAAiB4B,GAAiB/P,EAAKmT,aAAe,OAChEhF,GAAU,aAAanO,EAAK+X,UAAUnQ,QAAU,QAE5C5H,EAAK+X,UAAY/X,EAAK+X,SAASnQ,OAAS,IAC1CuG,GAAU,cACVnO,EAAK+X,SAASzJ,QAAQ0J,IACpB7J,GAAU,GAAG6J,EAAQnY,OAAO2O,OAAO,MAAMa,GAAe2I,EAAQ5P,OAAS,GAAG6P,SAAS,OAAOlI,GAAiBiI,EAAQE,QAAU,GAAGD,SAAS,UAIxI9J,GAGHoJ,EAAoBvX,IACxB,IAAKA,EAAM,MAAO,2BAElB,IAAImO,EAAS,mBAOb,OANAA,GAAU,4CAEVV,OAAOY,QAAQrO,GAAMsO,QAAQ,EAAE7F,EAAKL,MAClC+F,GAAU,GAAG1F,EAAI1I,cAAcyO,OAAO,OAAOmJ,OAAOvP,GAAO6P,SAAS,UAG/D9J,GAuEHgK,EAAsBvU,IAC1B,OAAQA,GACN,IAAK,UAAW,MAAO,gBACvB,IAAK,QAAS,MAAO,eACrB,IAAK,UAAW,MAAO,iBACvB,IAAK,UAAW,MAAO,kBACvB,IAAK,OAAQ,MAAO,gBACpB,IAAK,SAAU,MAAO,gBACtB,IAAK,YAAa,MAAO,kBACzB,QAAS,MAAO,kBAIpB,OACE6C,OAAC,OAAIF,UAAU,qCAEbC,SAAA,CAAAC,OAAC,OACCF,UAAU,8GACVa,QAAS,IAAM2O,GAAeD,GAC9BsC,KAAK,SACLC,SAAU,EACV,cAAevC,EAAa,WAAa,UAA7B,YACZwC,UAAYhQ,IACI,UAAVA,EAAEG,KAA6B,MAAVH,EAAEG,MACzBH,EAAEK,iBACFoN,GAAeD,KAInBtP,SAAA,CAAAC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAACiS,EAAA,CAAShS,UAAU,2BACpBD,MAAC,QAAKC,UAAU,kCAAkCC,SAAA,gCAGlDC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,oDACfD,MAAC,QAAKC,UAAU,wBAAwBC,SAAA,eAI5CC,OAAC,OAAIF,UAAU,8BACZC,SAAA,EAACpC,GACAqC,OAAAe,WAAA,CACEhB,SAAA,CAAAF,MAAC,UACCc,QAAUkB,IACRA,EAAEkQ,kBAhEhBvC,EAAU,KAmEE1P,UAAU,kEACVkS,MAAM,eAENjS,SAAAF,MAACiB,EAAA,CAAEhB,UAAU,cAEfD,MAAC,UACCc,QAAUkB,IACRA,EAAEkQ,kBAvEG,MACnB,MAAME,EAAavK,EAAO1N,IAAIkY,GAC5B,IAAIA,EAAKtW,UAAU2F,yBAAyB2Q,EAAK9U,WACjD8K,KAAK,MAEDiK,EAAO,IAAIC,KAAK,CAACH,GAAa,CAAE9U,KAAM,eACtCkV,EAAMC,IAAIC,gBAAgBJ,GAC1BpE,EAAIyE,SAASC,cAAc,KACjC1E,EAAE2E,KAAOL,EACTtE,EAAE4E,SAAW,2BAA0BtV,MAAOuV,cAAcrM,MAAM,KAAK,SACvEiM,SAASK,KAAKC,YAAY/E,GAC1BA,EAAEgF,QACFP,SAASK,KAAKG,YAAYjF,GAC1BuE,IAAIW,gBAAgBZ,IA2DNa,IAEFpT,UAAU,kEACVkS,MAAM,gBAENjS,SAAAF,MAACsT,EAAA,CAASrT,UAAU,iBAI1BD,MAAC,UACCc,QAAUkB,IACRA,EAAEkQ,kBACFnU,GAAgBD,IAElBmC,UAAU,kEAETC,SAAApC,QAAeiD,EAAA,CAAUd,UAAU,YAAeD,MAACgB,EAAA,CAAUf,UAAU,cAE1ED,MAAC,UACCC,UAAU,kEACVkS,MAAO3C,EAAa,WAAa,SAEhCtP,SAAAsP,QAAc+D,EAAA,CAAYtT,UAAU,YAAeD,MAACwT,EAAA,CAAUvT,UAAU,oBAM/ED,MAACmB,EAAA,CACEjB,SAAAsP,IAAe1R,GACdkC,MAACI,EAAOC,IAAP,CACCC,QAAS,CAAEK,OAAQ,EAAGJ,QAAS,GAC/BG,QAAS,CAAEC,OAAQ,IAAKJ,QAAS,GACjCK,KAAM,CAAED,OAAQ,EAAGJ,QAAS,GAC5BkT,WAAY,CAAEC,SAAU,GAAKC,KAAM,aACnC1T,UAAU,uDAEVC,SAAAC,OAAC,OAAIF,UAAU,uBAEbC,SAAA,CAAAC,OAAC,OACC0B,IAAKuO,EACLnQ,UAAU,yDACV0B,MAAO,CAAEc,UAAW,SAEnBvC,SAAA,CAAA2H,EAAO1N,IAAKkY,GACXrS,MAAC,OAAkBC,UAAW,GAAG4R,EAAmBQ,EAAK/U,4BACtD4C,SAAc,gBAAT5C,KACJ0C,MAAC,OAAIC,UAAU,iEACbC,SAAAF,MAAC,OAAIC,UAAU,wBAAyBC,SAAAmS,EAAK9U,YAG/C8U,EAAK9U,SANC8U,EAAKhV,KAWhB6S,GACC/P,OAAC,OAAIF,UAAU,8CACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,oFACfD,MAAC,QAAKE,SAAA,wBAMX8P,GAAmBvS,EAAY6D,OAAS,GACvCnB,OAAC,OAAIF,UAAU,2CACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,6BAA6BC,SAAA,mCAC5CF,MAAC,OAAIC,UAAU,uBACZC,SAAAzC,EAAYwB,MAAM,EAAG,GAAG9E,IAAI,CAACoH,EAAYC,IACxCxB,MAAC,UAECc,QAAS,KACP4O,EAASnO,GACT0O,GAAmB,GACnB/R,EAASE,SAASoS,SAEpBvQ,UAAU,0FAETC,SAAAqB,GARIC,SAgBfrB,OAAC,OAAIF,UAAU,+BACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,QAAKC,UAAU,2BAA2BC,SAAA,MAC3CF,MAAC,SACC6B,IAAK3D,EACLZ,KAAK,OACLwE,MAAOiE,EACPhE,SAxLSC,IACzB,MAAMF,EAAQE,EAAEC,OAAOH,MAIvB,GAHA4N,EAAS5N,GAGLA,EAAMpD,OAAQ,CAChB,MAAMkV,EAAiBvD,EAAajS,QAAQ4I,eAAelF,GAC3DiO,EAAe6D,GACf3D,EAAmB2D,EAAetS,OAAS,EAC7C,MACE2O,GAAmB,IA+KL+B,UA3NKhQ,IACrB,GAAc,UAAVA,EAAEG,IACJH,EAAEK,iBArGgB7D,OAAM4H,IAC1B,GAAKA,EAAQ1H,OAAb,CAGAkR,EAAkB9Q,GAAQ,IAAIA,EAAMsH,IACpC0J,GAAgB,GAGhBW,EAAU,KAAKrK,IAAW,WAC1B+J,GAAgB,GAEhB,IACE,MAAM7J,QAAe+J,EAAajS,QAAQ0H,eAAeM,GAErDE,EAAOD,SACLC,EAAOuB,QACT4I,EAAUnK,EAAOuB,OAAQvB,EAAOhJ,MAAQ,UAEtCgJ,EAAO5M,MAAQ4M,EAAOkD,QAExBiH,EAAUG,EAAoBtK,EAAO5M,KAAM4M,EAAOkD,QAAS,aAEzDlD,EAAOuN,YACTtE,IAAajJ,EAAOuN,aAGtBpD,EAAUnK,EAAOnN,OAAS,iBAAkB,QAEhD,OAASA,GACPsX,EAAU,UAAUtX,EAAMsF,UAAW,QACvC,SACE0R,GAAgB,EAClB,CA/BqB,GAqGnB2D,CAAc/N,GACd2J,EAAS,IACTO,GAAmB,QACrB,GAAqB,YAAVjO,EAAEG,KAEX,GADAH,EAAEK,iBACEwN,EAAehN,EAAevB,OAAS,EAAG,CAC5C,MAAMyS,EAAWlE,EAAe,EAChCC,EAAgBiE,GAChBrE,EAAS7M,EAAeA,EAAevB,OAAS,EAAIyS,GACtD,OACF,GAAqB,cAAV/R,EAAEG,IAEX,GADAH,EAAEK,iBACEwN,EAAe,EAAG,CACpB,MAAMkE,EAAWlE,EAAe,EAChCC,EAAgBiE,GAChBrE,EAAS7M,EAAeA,EAAevB,OAAS,EAAIyS,GACtD,MAA4B,IAAjBlE,IACTC,GAAgB,GAChBJ,EAAS,SAEQ,QAAV1N,EAAEG,KACXH,EAAEK,iBACE5E,EAAY6D,OAAS,IACvBoO,EAASjS,EAAY,IACrBwS,GAAmB,KAEF,WAAVjO,EAAEG,KACX8N,GAAmB,IA8LL3N,YAAY,wDACZrC,UAAU,kFACVyC,SAAUwN,IAEXA,SACE,OAAIjQ,UAAU,kBACbC,SAAAF,MAACgU,EAAA,CAAI/T,UAAU,+BAKrBE,OAAC,OAAIF,UAAU,+DACbC,SAAA,CAAAF,MAAC,QAAKE,SAAA,gFAGL,QACEA,SAAA,CAAA2C,EAAevB,OAAO,0mCCJ3C,MAAM2S,GAAa,IA9ZnB,MACE,WAAAzb,GACEC,KAAKyb,cAAe,EACpBzb,KAAK0b,iBAAkB,EACvB1b,KAAK2b,sBAAuB,EAC5B3b,KAAK4b,6BAA8B,EACnC5b,KAAK6b,aAAe,KACpB7b,KAAK8b,cAAe,EAEpB9b,KAAK+b,sBACP,CAKA,oBAAAA,GACM/b,KAAK2b,sBACP3b,KAAKgc,mBAGHhc,KAAK0b,kBACP1b,KAAKic,4BACLjc,KAAKkc,oBAGHlc,KAAK4b,6BACP5b,KAAKmc,kCAGPnc,KAAKoc,0BACP,CAKA,gBAAAJ,GAKEK,GAAA,IAAAvP,OAAO,uCACJwP,KAAKvW,MAAMwW,IAGVA,EAAOC,KAAK,CACVC,IATY,uBAUZC,YAAa,aACbC,QAAS,QACTC,aANmB,GAOnBC,iBAAkB7c,KAAKyb,aAAe,GAAM,EAC5CqB,WAAYC,GAEN/c,KAAKyb,cAAgC,YAAhBsB,EAAMC,MACtB,KAEFD,IAIXR,EAAOU,eAAeC,IACpBA,EAAMC,OAAO,YAAa,sBAC1BD,EAAME,WAAW,MAAO,CACtBjQ,QAAS,QACTuP,YAAa,iBAKjBW,OAAOd,OAASA,IAEjBe,MAAMC,QAAQC,KACnB,CAKA,yBAAAvB,GACE,MAAMJ,EAAe,gCAIf4B,EAASvD,SAASC,cAAc,UAOtC,SAASuD,IACPL,OAAOM,UAAU3P,KAAK4P,UACxB,CARAH,EAAO1X,OAAQ,EACf0X,EAAOI,IAAM,+CAA+ChC,IAC5D3B,SAAS4D,KAAKtD,YAAYiD,GAG1BJ,OAAOM,UAAYN,OAAOM,WAAa,GAIvCN,OAAOK,KAAOA,EAEdA,EAAK,KAAM,IAAI3Y,MACf2Y,EAAK,SAAU7B,EAAc,CAC3BkC,WAAY7D,SAASR,MACrBsE,cAAeX,OAAOY,SAAS7D,OAIjCpa,KAAK6b,aAAeA,CACtB,CAKA,gBAAAK,GAIE,IAAUgC,EAAGC,EAAS1I,EAAG2I,EAAfF,EAYPb,OAZUc,EAYFjE,SAXTgE,EAAEG,GACAH,EAAEG,IACF,YACGH,EAAEG,GAAGC,EAAIJ,EAAEG,GAAGC,GAAK,IAAItQ,KAAK4P,UAC/B,EACFM,EAAEK,YAAc,CAAEC,KATH,sBASmBC,KAAM,GACxChJ,EAAI0I,EAAEO,qBAAqB,QAAQ,IACnCN,EAAID,EAAEhE,cAAc,WAClBpU,MAAQ,EACVqY,EAAEP,IAEiB,sCAFPK,EAAEK,YAAYC,KAEgC,UAFrBN,EAAEK,YAAYE,KACnDhJ,EAAE+E,YAAY4D,GAGhBpe,KAAK8b,cAAe,CACtB,CAKA,+BAAAK,GAEEnc,KAAK2e,uBAGL3e,KAAK4e,uBAGL5e,KAAK6e,wBACP,CAKA,oBAAAF,GAEEtC,GAAAtW,UAAA,MAAA+Y,SAAAC,SAAAC,SAAAC,SAAAC,iBAAApS,OAAO,wBAAYwP,KAAA6C,KAAAC,+FAChB9C,KAAK,EAAGwC,SAAQC,SAAQC,SAAQC,SAAQC,cACvCJ,EAAO9e,KAAKqf,gBAAgB7T,KAAKxL,OACjC+e,EAAO/e,KAAKqf,gBAAgB7T,KAAKxL,OACjCgf,EAAOhf,KAAKqf,gBAAgB7T,KAAKxL,OACjCif,EAAOjf,KAAKqf,gBAAgB7T,KAAKxL,OACjCkf,EAAQlf,KAAKqf,gBAAgB7T,KAAKxL,SAEnCsd,MAAMC,QAAQC,KACnB,CAKA,oBAAAoB,GAEE5e,KAAKsf,wBAGLtf,KAAKuf,8BAGLvf,KAAKwf,oBACP,CAKA,qBAAAF,GACE,MAAMG,EAAgBpC,OAAOqC,MAC7BrC,OAAOqC,MAAQ3Z,SAAS+H,KACtB,MAAM6R,EAAYC,YAAYzZ,MAC9B,IACE,MAAM3F,QAAiBif,KAAiB3R,GAClC+R,EAAUD,YAAYzZ,MAS5B,OAPAnG,KAAK8f,WAAW,kBAAmB,CACjC/F,IAAKjM,EAAK,GACVmN,SAAU4E,EAAUF,EACpB3S,OAAQxM,EAASwM,OACjBY,QAASpN,EAASuf,KAGbvf,CACT,OAASE,GACP,MAAMmf,EAAUD,YAAYzZ,MAQ5B,MANAnG,KAAK8f,WAAW,YAAa,CAC3B/F,IAAKjM,EAAK,GACVmN,SAAU4E,EAAUF,EACpBjf,MAAOA,EAAMsF,UAGTtF,CACR,EAEJ,CAKA,2BAAA6e,GAEE,GAAI,wBAAyBlC,OAAQ,CAClB,IAAI2C,oBAAoB5T,IACvC,UAAW6T,KAAS7T,EAAK8T,aACnBD,EAAMhF,SAAW,IAEnBjb,KAAK8f,WAAW,YAAa,CAC3B7E,SAAUgF,EAAMhF,SAChB0E,UAAWM,EAAMN,cAMhBQ,QAAQ,CAAEC,WAAY,CAAC,aAClC,CACF,CAKA,kBAAAZ,GACM,WAAYI,aACdS,YAAY,KACV,MAAMC,EAASV,YAAYU,OAC3BtgB,KAAK8f,WAAW,eAAgB,CAC9BS,eAAgBD,EAAOC,eACvBC,gBAAiBF,EAAOE,gBACxBC,gBAAiBH,EAAOG,mBAEzB,IAEP,CAKA,sBAAA5B,GACE,GAAI,wBAAyBxB,OAAQ,CAClB,IAAI2C,oBAAoB5T,IACvC,UAAW6T,KAAS7T,EAAK8T,aACnBD,EAAMS,aAAe,KAEvB1gB,KAAK8f,WAAW,iBAAkB,CAChCtQ,KAAMyQ,EAAMzQ,KACZmR,KAAMV,EAAMS,aACZzF,SAAUgF,EAAMhF,aAMfkF,QAAQ,CAAEC,WAAY,CAAC,aAClC,CACF,CAKA,wBAAAhE,GAEEiB,OAAOuD,iBAAiB,qBAAsB7D,IAC5C/c,KAAK6gB,WAAW9D,EAAM+D,OAAQ,iCAIhCzD,OAAOuD,iBAAiB,QAAS7D,IAC/B/c,KAAK6gB,WAAW9D,EAAMrc,MAAO,mBAAoB,CAC/CqgB,SAAUhE,EAAMgE,SAChBC,OAAQjE,EAAMiE,OACdC,MAAOlE,EAAMkE,UAKjB5D,OAAOuD,iBACL,QACA7D,IACMA,EAAMvT,SAAW6T,QACnBrd,KAAK6gB,WACH,IAAI7c,MAAM,4BAA4B+Y,EAAMvT,OAAOqU,KAAOd,EAAMvT,OAAO4Q,QACvE,oBAIN,EAEJ,CAKA,UAAA0F,CAAWoB,EAAWC,EAAa,IAC5BnhB,KAAK0b,kBAGN2B,OAAOK,MACTL,OAAOK,KAAK,QAASwD,EAAWC,GAIlCnhB,KAAKohB,sBAAsBF,EAAWC,GACxC,CAKA,UAAAN,CAAWngB,EAAO2K,EAAW,QAASgW,EAAiB,IAChDrhB,KAAK2b,uBAKN0B,OAAOd,QACTc,OAAOd,OAAO+E,iBAAiB5gB,EAAO,CACpC6gB,KAAM,CAAElW,YACRmW,MAAOH,IAKXrhB,KAAK8f,WAAW,iBAAkB,CAChCzU,WACArF,QAAStF,EAAMsF,QACfyb,MAAO/gB,EAAM+gB,SACVJ,IAEP,CAKA,eAAAhC,CAAgBrK,GACdhV,KAAK8f,WAAW,YAAa,CAC3BtQ,KAAMwF,EAAOxF,KACbnG,MAAO2L,EAAO3L,MACdqY,OAAQ1M,EAAO0M,QAEnB,CAKA,qBAAAN,CAAsBF,EAAWC,GAC1BnhB,KAAKyb,cAGViE,MAAM,iBAAkB,CACtBiC,OAAQ,OACRrhB,QAAS,CACP,eAAgB,oBAElBia,KAAMlC,KAAKC,UAAU,CACnByE,MAAOmE,EACPC,WAAY,IACPA,EACH7d,WAAA,IAAeyB,MAAOuV,cACtBsH,UAAWC,UAAUD,UACrB7H,IAAKsD,OAAOY,SAAS7D,UAGxBkD,MAAM,OAGX,CAKA,aAAAwE,CAAcC,EAAUV,EAAiB,IAEnChE,OAAOK,MAAQ1d,KAAK6b,cACtBwB,OAAOK,KAAK,SAAU1d,KAAK6b,aAAc,CACvCkC,WAAY7D,SAASR,MACrBsI,UAAWD,EACX/D,cAAeX,OAAOY,SAAS7D,OAKV,mBAAdiD,OAAOgB,IAChBhB,OAAOgB,GAAG,cAAe0D,GAI3B/hB,KAAK8f,WAAW,YAAa,CAC3BpQ,KAAMqS,EACNrI,MAAOQ,SAASR,MAChBK,IAAKsD,OAAOY,SAAS7D,QAClBiH,GAEP,CAKA,oBAAAY,CAAqBhb,EAAQib,EAASb,EAAiB,IACrDrhB,KAAK8f,WAAW,mBAAoB,CAClC7Y,SACAib,aACGb,GAEP,GC1ZF,MAAMc,WAAsBC,EAAMC,UAChC,WAAAtiB,CAAYuiB,GACVC,MAAMD,GACNtiB,KAAKwiB,MAAQ,CAAEC,UAAU,EAC3B,CAEA,+BAAOC,CAAyBC,GAC9B,MAAO,CAAEF,UAAU,EACrB,CAEA,iBAAAG,CAAkBliB,EAAOmiB,GACvBniB,EAAMoiB,iBAAkB,EACxBzF,OAAO0F,sBAAsBriB,EAAOmiB,GAEpC,IACErH,GAAWqF,WAAWngB,EAAO,cAAe,CAC1CsiB,eAAgBH,GAAWG,gBAE/B,OAASC,GAET,CAEF,CAEA,MAAAC,GACE,OAAIljB,KAAKwiB,MAAMC,eAEV,OAAIjb,UAAU,8DACbC,SAAAC,OAAC,OAAIF,UAAU,2BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wCACbC,SAAAC,OAAC,OACCyb,MAAM,6BACNtK,MAAM,OACN3Q,OAAO,OACPkb,QAAQ,YACRC,KAAK,OAEL5b,SAAA,CAAAF,MAAC,QACClE,EAAE,sIACFigB,OAAO,UACPC,YAAY,IACZC,iBAAiB,OAEnBjc,MAAC,QACClE,EAAE,8IACFggB,KAAK,YAEP9b,MAAC,QACClE,EAAE,8IACFggB,KAAK,YAEP9b,MAAC,QACClE,EAAE,qFACFigB,OAAO,UACPC,YAAY,IACZE,cAAc,QACdC,eAAe,eAIrBhc,OAAC,OAAIF,UAAU,kCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,wCAAwCC,SAAA,yBACtDF,MAAC,KAAEC,UAAU,8CAA8CC,SAAA,yEAI7DF,MAAC,OAAIC,UAAU,wCACbC,SAAAC,OAAC,UACCW,QAAS,KACPgV,OAAOY,SAAS7D,KAAO,KAEzB5S,UAAU,0IAEVC,SAAA,CAAAF,MAACoc,GAAKnU,KAAK,YAAYmR,KAAM,GAAIiD,MAAM,SAAS,iBASrD5jB,KAAKsiB,MAAM7a,QACpB,ECwdK,MAAMoc,GAAsB,IA7iBnC,MACE,WAAA9jB,CAAY+jB,EAAU,IACpB9jB,KAAK8jB,QAAU,CAEbC,MAAO,CAEL,iBAAkB,CAAEC,SAAS,GAC7B,sBAAuB,CAAEA,SAAS,GAClC,mBAAoB,CAAEA,SAAS,GAC/B,cAAe,CAAEA,SAAS,GAC1B,gBAAiB,CAAEA,SAAS,GAC5B,oBAAqB,CAAEA,SAAS,GAChC,YAAa,CAAEA,SAAS,GAGxB,qBAAsB,CAAEA,SAAS,MAE9BF,EAAQC,OAEbxC,KAAM,CAAC,SAAU,UAAW,WAAY,iBACxC0C,QAASH,EAAQG,SAAW,KAC5BC,SAAUJ,EAAQI,UAAY,QAC3BJ,GAGL9jB,KAAKmkB,WAAa,GAClBnkB,KAAKokB,gBAAkB,IACzB,CAGA,cAAMC,CAASnC,EAAUhI,SAAU4J,EAAU,IAC3C,MAAMQ,EAAc,IACftkB,KAAK8jB,WACLA,GAGL,IAEE,MAAMS,QAAgBC,EAAQC,IAAIvC,EAASoC,GAgB3C,OAdAtkB,KAAKokB,gBAAkBG,EACvBvkB,KAAKmkB,WAAaI,EAAQJ,WAG1BnkB,KAAK0kB,WAAWH,GAQhBvkB,KAAK2kB,aAAaJ,GAEXA,CACT,OAAS7jB,GAEP,MAAMA,CACR,CACF,CAGA,4BAAMkkB,CAAuBC,EAAUC,EAAgB,WACrD,MAAM5C,EAAUhI,SAAS6K,cAAcF,GACvC,IAAK3C,EACH,MAAM,IAAIle,MAAM,sBAAsB6gB,KAIxC,MAuCMG,EAvCmB,CACvBC,YAAe,CACblB,MAAO,CACL,eAAgB,CAAEC,SAAS,GAC3B,oBAAqB,CAAEA,SAAS,GAChC,uBAAwB,CAAEA,SAAS,GACnC,mBAAoB,CAAEA,SAAS,IAEjCzC,KAAM,CAAC,UAAW,eAGpB2D,MAAS,CACPnB,MAAO,CACL,YAAa,CAAEC,SAAS,GACxB,cAAe,CAAEA,SAAS,GAC1B,oBAAqB,CAAEA,SAAS,IAElCzC,KAAM,CAAC,YAGT4D,WAAc,CACZpB,MAAO,CACL/c,MAAS,CAAEgd,SAAS,GACpB,6BAA8B,CAAEA,SAAS,GACzC,eAAgB,CAAEA,SAAS,IAE7BzC,KAAM,CAAC,UAAW,eAGpB6D,MAAS,CACPrB,MAAO,CACL,aAAc,CAAEC,SAAS,GACzB,mBAAoB,CAAEA,SAAS,GAC/B,sBAAuB,CAAEA,SAAS,IAEpCzC,KAAM,CAAC,UAAW,mBAIUuD,IAAkB,GAClD,aAAa9kB,KAAKqkB,SAASnC,EAAS8C,EACtC,CAGA,4BAAMK,GAGJ,MAAMC,EAAoBtlB,KAAKulB,uBACzBC,EAAiB,GAGvB,IAAIC,GAAmB,EACvBH,EAAkB/V,QAAQ,CAAC2S,EAASnZ,KAClC,MAAMuQ,EAAW4I,EAAQ5I,UAAY,EAEjCA,EAAW,GAAKA,GAAYmM,GAC9BD,EAAexX,KAAK,CAClBkU,QAASA,EAAQwD,QACjB9gB,GAAIsd,EAAQtd,GACZ0U,WACAqM,SAAU5c,EACV6c,MAAO,6BAIXH,EAAmBnM,IAIrB,MAAMuM,EAAwB,GAiB9B,OAhBAP,EAAkB/V,QAAQ2S,IACxB,MAAM4D,EAASzI,OAAO0I,iBAAiB7D,EAAS,UAC1C8D,EAAgC,SAAnBF,EAAOG,SAAyC,QAAnBH,EAAOG,QACjDC,EAAoC,SAArBJ,EAAOK,UACtBC,EAA2C,gBAA3BN,EAAOO,gBAExBL,GAAeE,GAAiBE,GACnCP,EAAsB7X,KAAK,CACzBkU,QAASA,EAAQwD,QACjB9gB,GAAIsd,EAAQtd,GACZ4C,UAAW0a,EAAQ1a,UACnBoe,MAAO,iCAKN,CACLU,uBAAwBhB,EAAkBzc,OAC1C2c,iBACAK,wBACAU,OAAkC,IAA1Bf,EAAe3c,QAAiD,IAAjCgd,EAAsBhd,OAEjE,CAGA,uBAAM2d,GAGJ,MAAMC,EAAevM,SAASwM,iBAAiB,kEACzCC,EAAiB,GAoCvB,OAlCAF,EAAalX,QAAQ2S,IACnB,MAAM4D,EAASzI,OAAO0I,iBAAiB7D,GACjC0E,EAAYd,EAAOlC,MACnByC,EAAkBP,EAAOO,gBAG/B,GAAwB,gBAApBA,GAAyD,qBAApBA,EACvC,OAGF,MAAMQ,EAAW7mB,KAAK8mB,uBAAuBF,EAAWP,GAClDU,EAAWC,SAASlB,EAAOiB,UAC3BE,EAAanB,EAAOmB,WAIpBC,EADcH,GAAY,IAAOA,GAAY,KAAsB,SAAfE,GAAyBA,GAAc,KAC7D,EAAM,IAEtCJ,EAAWK,GACbP,EAAe3Y,KAAK,CAClBkU,QAASA,EAAQwD,QACjB9gB,GAAIsd,EAAQtd,GACZ4C,UAAW0a,EAAQ1a,UACnBof,YACAP,kBACAQ,SAAUA,EAAS3V,QAAQ,GAC3BiW,SAAUD,EACVH,WACAE,aACAG,KAAMlF,EAAQmF,aAAa/Y,UAAU,EAAG,IAAM,UAK7C,CACLgZ,cAAeb,EAAa5d,OAC5B8d,iBACAJ,OAAkC,IAA1BI,EAAe9d,OAE3B,CAGA,2BAAM0e,GAGJ,MAAMC,EAAQtN,SAASwM,iBAAiB,QAClCe,EAAa,GAyCnB,OAvCAD,EAAMjY,QAAQ,CAACmY,EAAMC,KACJD,EAAKhB,iBAAiB,2BAE9BnX,QAAQjC,IACb,MAAMsa,EAAS,GAGE5nB,KAAK6nB,mBAAmBva,IAEvCsa,EAAO5Z,KAAK,iBAIVV,EAAM6Z,WAAannB,KAAK8nB,sBAAsBxa,IAChDsa,EAAO5Z,KAAK,wCAI6B,SAAvCV,EAAMya,aAAa,iBAA+B/nB,KAAKgoB,gBAAgB1a,IACzEsa,EAAO5Z,KAAK,qCAIVhO,KAAKioB,iBAAiB3a,KAAWA,EAAM4a,cACzCN,EAAO5Z,KAAK,kDAGV4Z,EAAO/e,OAAS,GAClB4e,EAAWzZ,KAAK,CACd2Z,YACAQ,UAAW7a,EAAMzI,KACjBujB,QAAS9a,EAAM1I,GACfyjB,UAAW/a,EAAMkC,KACjBoY,eAMD,CACLU,WAAYd,EAAM3e,OAClB4e,aACAlB,OAA8B,IAAtBkB,EAAW5e,OAEvB,CAGA,cAAA0f,GACE,IAAKvoB,KAAKokB,gBACR,MAAM,IAAIpgB,MAAM,+CAGlB,MAAMmgB,WAAEA,EAAAqE,OAAYA,EAAAC,WAAQA,EAAAC,aAAYA,GAAiB1oB,KAAKokB,gBAE9D,MAAO,CACLuE,QAAS,CACPrlB,WAAA,IAAeyB,MAAOuV,cACtBsO,YAAazE,EAAWtb,OAAS2f,EAAO3f,OAAS4f,EAAW5f,OAAS6f,EAAa7f,OAClFsb,WAAYA,EAAWtb,OACvB2f,OAAQA,EAAO3f,OACf4f,WAAYA,EAAW5f,OACvB6f,aAAcA,EAAa7f,OAC3BggB,MAAO7oB,KAAK8oB,+BAEd3E,WAAYA,EAAWziB,IAAIqnB,IAAA,CACzBnkB,GAAImkB,EAAUnkB,GACdokB,OAAQD,EAAUC,OAClB7d,YAAa4d,EAAU5d,YACvBT,KAAMqe,EAAUre,KAChBue,QAASF,EAAUE,QACnBC,MAAOH,EAAUG,MAAMrgB,OACvB0Y,KAAMwH,EAAUxH,QAElB4H,gBAAiBnpB,KAAKopB,wBAAwBjF,GAC9CkF,kBAAmBrpB,KAAKspB,oCAE5B,CAGA,2BAAAR,GACE,IAAK9oB,KAAKokB,gBAAiB,OAAO,EAElC,MAAMD,WAAEA,EAAAqE,OAAYA,GAAWxoB,KAAKokB,gBAC9BmF,EAAapF,EAAWtb,OAAS2f,EAAO3f,OAE9C,GAAmB,IAAf0gB,EAAkB,OAAO,IAG7B,MAAMC,EAAgB,CAAEC,SAAU,EAAGC,QAAS,EAAGC,SAAU,EAAGC,MAAO,GAC/DC,EAAiB1F,EAAWpR,OAAO,CAAC8V,EAAOE,IACxCF,GAASW,EAAcT,EAAUC,SAAW,GAClD,GAEGc,EAAgC,EAAbP,EACzB,OAAOrW,KAAKuB,IAAI,EAAG,IAAOoV,EAAiBC,EAAoB,IACjE,CAGA,uBAAAV,CAAwBjF,GACtB,MAAMgF,EAAkB,GA8CxB,OA5CAhF,EAAW5U,QAAQwZ,IACjB,OAAQA,EAAUnkB,IAChB,IAAK,iBACHukB,EAAgBnb,KAAK,CACnB3C,SAAU,gBACV0e,SAAU,OACVnE,MAAO,8BACPoE,SAAU,wFACVC,iBAAkB,kFAEpB,MAEF,IAAK,sBACHd,EAAgBnb,KAAK,CACnB3C,SAAU,kBACV0e,SAAU,OACVnE,MAAO,6BACPoE,SAAU,wFACVC,iBAAkB,kFAEpB,MAEF,IAAK,QACHd,EAAgBnb,KAAK,CACnB3C,SAAU,gBACV0e,SAAU,OACVnE,MAAO,sBACPoE,SAAU,4EACVC,iBAAkB,2EAEpB,MAEF,IAAK,oBACHd,EAAgBnb,KAAK,CACnB3C,SAAU,aACV0e,SAAU,SACVnE,MAAO,gDACPoE,SAAU,mDACVC,iBAAkB,6EAMnBd,CACT,CAGA,iCAAAG,GACE,MAAMY,EAAW,GAGFhQ,SAASwM,iBAAiB,SAC9B7d,OAAS,GAClBqhB,EAASlc,KAAK,CACZmc,UAAW,cACXC,eAAgB,uGAKLlQ,SAASwM,iBAAiB,2CAC9B7d,OAAS,GAClBqhB,EAASlc,KAAK,CACZmc,UAAW,oBACXC,eAAgB,+EAapB,OARoBlQ,SAASwM,iBAAiB,kCAC9B7d,OAAS,GACvBqhB,EAASlc,KAAK,CACZmc,UAAW,wBACXC,eAAgB,2FAIbF,CACT,CAGA,oBAAA3E,GAUE,OAAOlT,MAAMgY,KAAKnQ,SAASwM,iBATA,CACzB,UACA,yBACA,wBACA,yBACA,2BACA,mCAG6D9W,KAAK,MACtE,CAEA,kBAAAiY,CAAmBva,GACjB,MAAM1I,EAAK0I,EAAM1I,GACX0lB,EAAYhd,EAAMya,aAAa,cAC/BwC,EAAiBjd,EAAMya,aAAa,mBAE1C,GAAIuC,GAAaC,EAAgB,OAAO,EACxC,GAAI3lB,GAAMsV,SAAS6K,cAAc,cAAcngB,OAAS,OAAO,EAI/D,QADoB0I,EAAMkd,QAAQ,QAEpC,CAEA,qBAAA1C,CAAsBxa,GACpB,MAAMmd,EAAend,EAAMya,aAAa,iBAClC2C,EAAepd,EAAMqd,aAAa,YAClCC,EAAkB5qB,KAAK6qB,yBAAyBvd,GAEtD,MAAwB,SAAjBmd,GAA2BC,GAAgBE,CACpD,CAEA,wBAAAC,CAAyBvd,GACvB,MAAMtG,EAAQhH,KAAK8qB,mBAAmBxd,GACtC,IAAKtG,EAAO,OAAO,EAEnB,MAAMogB,EAAOpgB,EAAMqgB,aAAe,GAClC,OAAOD,EAAK2D,SAAS,MAAQ3D,EAAK3Y,cAAcsc,SAAS,WAC3D,CAEA,eAAA/C,CAAgB1a,GACd,MAAM0d,EAAkB1d,EAAMya,aAAa,oBAC3C,GAAIiD,EAAiB,CACnB,MAAMC,EAAe/Q,SAASgR,eAAeF,GAC7C,OAAOC,GAAgBA,EAAa5D,WACtC,CACA,OAAO,CACT,CAEA,gBAAAY,CAAiB3a,GAIf,MAHuB,CAAC,SAAU,QAAS,OAGrByd,SAASzd,EAAMzI,OAFd,CAAC,SAAU,QAAS,OAAQ,UAAW,WAAY,SAGpDsmB,KAAK3b,GAAQlC,EAAMkC,MAAMf,cAAcsc,SAASvb,GACxE,CAEA,kBAAAsb,CAAmBxd,GACjB,MAAM1I,EAAK0I,EAAM1I,GACjB,GAAIA,EAAI,CACN,MAAMoC,EAAQkT,SAAS6K,cAAc,cAAcngB,OACnD,GAAIoC,EAAO,OAAOA,CACpB,CAEA,OAAOsG,EAAMkd,QAAQ,QACvB,CAGA,sBAAA1D,CAAuBsE,EAAQC,GAE7B,MAAMC,EAAOtrB,KAAKurB,WAAWH,GACvBI,EAAOxrB,KAAKurB,WAAWF,GAEvBI,EAAKzrB,KAAK0rB,aAAaJ,GACvBK,EAAK3rB,KAAK0rB,aAAaF,GAK7B,OAHgBtY,KAAKuB,IAAIgX,EAAIE,GAGX,MAFHzY,KAAKsC,IAAIiW,EAAIE,GAEQ,IACtC,CAEA,UAAAJ,CAAW3H,GAET,MAAMgI,EAAQhI,EAAMgI,MAAM,kCAC1B,OAAIA,EACK,CAAC5E,SAAS4E,EAAM,IAAK5E,SAAS4E,EAAM,IAAK5E,SAAS4E,EAAM,KAE1D,CAAC,EAAG,EAAG,EAChB,CAEA,YAAAF,EAActN,EAAGyN,EAAGnW,IAClB,MAAOoW,EAAIC,EAAIC,GAAM,CAAC5N,EAAGyN,EAAGnW,GAAGhU,IAAIuqB,IACjCA,GAAQ,MACI,OAAUA,EAAI,MAAQ/Y,KAAKC,KAAK8Y,EAAI,MAAS,MAAO,MAElE,MAAO,MAASH,EAAK,MAASC,EAAK,MAASC,CAC9C,CAEA,UAAAtH,CAAWH,GAOLA,EAAQJ,WAAWtb,OAAS,GAE9B0b,EAAQJ,WAAW5U,QAAQwZ,MAK/B,CAEA,gBAAAmD,CAAiB/H,GACfA,EAAW5U,QAAQwZ,IACjBA,EAAUG,MAAM3Z,QAAQ4c,QAS5B,CAEA,YAAAxH,CAAaJ,GACX,IACE,MAAM6H,EAAa,CACjB9oB,UAAWyB,KAAKoB,MAChB4T,IAAKsD,OAAOY,SAAS7D,KACrB+J,WAAYI,EAAQJ,WAAWtb,OAC/B2f,OAAQjE,EAAQiE,OAAO3f,OACvBggB,MAAO7oB,KAAK8oB,+BAGRuD,EAAkBhU,KAAKiU,MAAMC,aAAaC,QAAQ,0BAA4B,MACpFH,EAAgBre,KAAKoe,GAGjBC,EAAgBxjB,OAAS,IAC3BwjB,EAAgBI,OAAO,EAAGJ,EAAgBxjB,OAAS,IAGrD0jB,aAAaG,QAAQ,wBAAyBrU,KAAKC,UAAU+T,GAC/D,OAAS3rB,GAET,CACF,GCziBIisB,GAAgB,CACpBC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,KAAM,KACNC,IAAK,MAQA,SAAS9Q,MAoBhB,WAEE,IAAI+Q,EAAW,EACf,MAAMC,EAAa,GAEnB,IAAInN,oBAAqBoN,IACvB,IAAK,MAAMnN,KAASmN,EAAUlN,aACvBD,EAAMoN,iBACTH,GAAYjN,EAAM5W,MAClB8jB,EAAWnf,KAAKiS,IAGpB0M,GAAcC,IAAMM,EACpBI,GAAe,MAAOJ,EAAUC,KAC/BhN,QAAQ,CAAEtb,KAAM,eAAgB0oB,UAAU,IAG7C,IAAIvN,oBAAqBoN,IACvB,IAAK,MAAMnN,KAASmN,EAAUlN,aAO5B,GANmB,sBAAfD,EAAMzQ,OACRmd,GAAcE,IAAM5M,EAAMuN,gBAAkBvN,EAAMN,UAClD2N,GAAe,MAAOX,GAAcE,IAAK,CAAC5M,KAIxCA,EAAMwN,cAAe,CACvB,MAAMxS,EAAWgF,EAAMyN,cAAgBzN,EAAMN,YACxCgN,GAAcM,KAAOhS,EAAW0R,GAAcM,OACjDN,GAAcM,IAAMhS,EACpBqS,GAAe,MAAOrS,EAAU,CAACgF,IAErC,IAEDE,QAAQ,CAAEtb,KAAM,QAAS0oB,UAAU,IAGtC,IAAIvN,oBAAqBoN,IACvB,IAAK,MAAMnN,KAASmN,EAAUlN,aACT,2BAAfD,EAAMzQ,OACRmd,GAAcG,IAAM7M,EAAMN,UAC1B2N,GAAe,MAAOrN,EAAMN,UAAW,CAACM,OAG3CE,QAAQ,CAAEtb,KAAM,QAAS0oB,UAAU,IAGtC,IAAIvN,oBAAqBoN,IACvB,MAAM9d,EAAU8d,EAAUlN,aACpByN,EAAYre,EAAQA,EAAQzG,OAAS,GAC3C8jB,GAAcI,IAAMY,EAAUhO,UAC9B2N,GAAe,MAAOK,EAAUhO,UAAW,CAACgO,MAC3CxN,QAAQ,CAAEtb,KAAM,2BAA4B0oB,UAAU,IAGzD,MAAMK,EAAkBhO,YAAYiO,iBAAiB,cAAc,GAC/DD,IACFjB,GAAcK,KAAOY,EAAgBE,cAAgBF,EAAgBG,aACrET,GAAe,OAAQX,GAAcK,KAAM,CAACY,IAEhD,CA7EEI,GAkF2B,CACzB,wBACA,iBACA,kBACA,qBAGiBze,QAAQ4a,IACzBvK,YAAYqO,KAAK,GAAG9D,aAItB9M,OAAO6Q,qBAAuB,CAACC,EAAeC,KAC5CxO,YAAYqO,KAAK,GAAGE,SACpBvO,YAAYyO,QACV,GAAGF,WACH,GAAGA,UACH,GAAGA,SAGLG,GAAmB,mBAAoB,CACrCnE,UAAWgE,EACXC,aACA9qB,UAAWyB,KAAKoB,SAKpBkX,OAAOkR,4BAA8B,CAACC,EAAiBvT,EAAUwT,KAC/DH,GAAmB,wBAAyB,CAC1CzpB,KAAM2pB,EACNvT,WACAwT,aACAnrB,UAAWyB,KAAKoB,SAOpBkX,OAAOuD,iBAAiB,OAAQ,KAC9B8N,WAAW,KACT,MAAMtT,EAAawE,YAAYiO,iBAAiB,cAAc,GAC1DzS,GA4HV,SAAgCuT,GAC9B,MAAM1tB,EAAO,IACR0tB,EACH5U,IAAKsD,OAAOY,SAAS7D,KACrB9W,UAAWyB,KAAKoB,MAChByb,UAAWC,UAAUD,UACrBgN,WAAYC,MAIdxP,GAAgB,oBAAqBpe,EACvC,CA5HQ6tB,CAVgB,CACdC,IAAK3T,EAAW4T,gBAAkB5T,EAAW6T,kBAC7CC,IAAK9T,EAAW+T,WAAa/T,EAAWgU,aACxCC,IAAKjU,EAAWkU,sBAAwB,EAAIlU,EAAW+T,WAAa/T,EAAWkU,sBAAwB,EACvGC,KAAMnU,EAAW0S,cAAgB1S,EAAW2S,aAC5C1T,SAAUe,EAAWoU,YAAcpU,EAAW0S,cAC9C2B,cAAerU,EAAWsU,YAActU,EAAWuU,WACnDC,cAAexU,EAAWyU,aAAezU,EAAW0U,cAKvD,KAML,IAAI9P,oBAAqB5T,IACvB,IAAK,MAAM6T,KAAS7T,EAAK8T,aAEvB,GAA4B,WAAxBD,EAAM8P,eACkB,QAAxB9P,EAAM8P,eACkB,QAAxB9P,EAAM8P,eACkB,UAAxB9P,EAAM8P,cAA2B,CAEnC,MAAMC,EAAe,CACnBxgB,KAAMyQ,EAAMzQ,KACZ3K,KAAMob,EAAM8P,cACZpP,KAAMV,EAAMS,cAAgBT,EAAMgQ,gBAClChV,SAAUgF,EAAMhF,SAChBiV,OAA+B,IAAvBjQ,EAAMS,cAAsBT,EAAMgQ,gBAAkB,EAC5D3sB,UAAWyB,KAAKoB,QAId6pB,EAAarP,KAAO,KAASqP,EAAa/U,SAAW,MACvDkV,GAAqBH,EAEzB,IAED7P,QAAQ,CAAEC,WAAY,CAAC,cAI5B,WACE,IAAIgQ,EAAmB,EACnBC,EAAuB,EAED,CAAC,QAAS,UAAW,cAE7B9gB,QAAQ+gB,IACxBpW,SAAS0G,iBAAiB0P,EAAYvT,IACpC,MAAM4C,EAAYC,YAAYzZ,MAG9BoqB,sBAAsB,KACpB,MACMC,EADU5Q,YAAYzZ,MACMwZ,EAElCyQ,IACAC,GAAwBG,EAGpBA,EAAkB,KA+E5BnR,GAAgB,mBA9Ec,CACpBxa,KAAMyrB,EACN9mB,OAAQuT,EAAMvT,OAAOkc,QACrBzK,SAAUuV,EACVltB,UAAWyB,KAAKoB,WAIrB,CAAEsqB,SAAS,MAIhBpQ,YAAY,KACN+P,EAAmB,IAsEzB/Q,GAAgB,sBArEa,CACvBxJ,MAAOua,EACPM,YAAaL,EAAuBD,EACpC9sB,UAAWyB,KAAKoB,QAIlBiqB,EAAmB,EACnBC,EAAuB,IAExB,IACL,CA5MEM,EAGF,CA4MA,SAASrD,GAAe9d,EAAMnG,EAAOiG,GAenC+P,GAAgB,YAdH,CACXrK,OAAQxF,EACRnG,MAAO6J,KAAK0d,MAAMvnB,GAClBiG,QAASA,EAAQ5N,IAAIue,IAAK,CACxBN,UAAWM,EAAMN,UACjB1E,SAAUgF,EAAMhF,UAAY,KAE9BlB,IAAKsD,OAAOY,SAAS7D,KACrB9W,UAAWyB,KAAKoB,MAChByb,UAAWC,UAAUD,UACrBgN,WAAYC,MAKhB,CAEA,SAASP,GAAmBzpB,EAAM5D,GAShCoe,GAAgB,gBARG,CACjBxa,UACG5D,EACH8Y,IAAKsD,OAAOY,SAAS7D,KACrBwH,UAAWC,UAAUD,WAKzB,CAeA,SAASuO,GAAqBH,GAE5B3Q,GAAgB,kBAAmB2Q,EACrC,CA6BO,SAASa,KACd,MAQM1M,EAAa,GAuBnB,OArBAzV,OAAOY,QAVS,CACdyd,IAAK,KACLF,IAAK,IACLD,IAAK,GACLE,IAAK,KACLE,KAAM,MAKgBzd,QAAQ,EAAEyF,EAAQ8b,MACxC,MAAMznB,EAAQsjB,GAAc3X,GACd,OAAV3L,GAAkBA,EAAQynB,GAC5B3M,EAAWnW,KAAK,CACdgH,SACA3L,QACAynB,SACAC,OAAQ1nB,EAAQynB,MAKlB3M,EAAWtb,OAAS,GAEtBwW,GAAgB,oBAAqB,CACnC8E,aACA7gB,UAAWyB,KAAKoB,MAChB4T,IAAKsD,OAAOY,SAAS7D,OAIlB+J,CACT,CAGA,SAAS0K,KACP,MAAI,eAAgBhN,UACX,CACLmP,cAAenP,UAAU+M,WAAWoC,cACpCC,SAAUpP,UAAU+M,WAAWqC,SAC/BC,IAAKrP,UAAU+M,WAAWsC,KAGvB,IACT,CAEA,SAAS7R,GAAgBxa,EAAM5D,GAI7B,IACE,MAAMkwB,EAAgB,CACpBtsB,OACA5D,OACAmwB,UAAWC,KACXC,OAAQC,MAIJC,EAAenZ,KAAKiU,MAAMC,aAAaC,QAAQ,oBAAsB,MAC3EgF,EAAaxjB,KAAKmjB,GAGdK,EAAa3oB,OAAS,KACxB2oB,EAAa/E,OAAO,EAAG+E,EAAa3oB,OAAS,KAG/C0jB,aAAaG,QAAQ,kBAAmBrU,KAAKC,UAAUkZ,IAGnDA,EAAa3oB,QAAU,IACzB4oB,IAGJ,CAAE,MAAO/wB,GAET,CACF,CAEA,SAAS+wB,KACP,IACE,MAAMC,EAAarZ,KAAKiU,MAAMC,aAAaC,QAAQ,oBAAsB,MACzE,GAA0B,IAAtBkF,EAAW7oB,OAAc,OAMzBwU,OAAOK,MACTgU,EAAWniB,QAAQqK,IACjByD,OAAOK,KAAK,QAAS9D,EAAK/U,KAAM,CAC9B8sB,iBAAkBtZ,KAAKC,UAAUsB,EAAK3Y,UAM5CsrB,aAAaqF,WAAW,kBAE1B,CAAE,MAAOlxB,GAET,CACF,CAGA,SAAS2wB,KACP,IAAID,EAAYS,eAAerF,QAAQ,cAKvC,OAJK4E,IACHA,EAAYrsB,KAAKoB,MAAQ,IAAM+M,KAAK4e,SAAS1rB,SAAS,IAAI2rB,OAAO,EAAG,GACpEF,eAAenF,QAAQ,aAAc0E,IAEhCA,CACT,CAEA,SAASG,KACP,IAAID,EAAS/E,aAAaC,QAAQ,WAKlC,OAJK8E,IACHA,EAAS,aAAevsB,KAAKoB,MAAQ,IAAM+M,KAAK4e,SAAS1rB,SAAS,IAAI2rB,OAAO,EAAG,GAChFxF,aAAaG,QAAQ,UAAW4E,IAE3BA,CACT,CAWO,SAASU,GAAwBntB,EAAM5D,GAU5Coe,GAAgB,qBATG,CACjBxa,UACG5D,EACH8Y,IAAKsD,OAAOY,SAAS7D,KACrBwH,UAAWC,UAAUD,UACrBte,UAAWyB,KAAKoB,OAKpB,CAkCO,SAAS8rB,GAAmC9D,EAAe+D,GAUhE7S,GAAgB,kCATQ,CACtB8K,UAAWgE,KACR+D,EACHnY,IAAKsD,OAAOY,SAAS7D,KACrB9W,UAAWyB,KAAKoB,MAChByb,UAAWC,UAAUD,WAKzB,CCzMO,SAASuQ,GAA0BrN,GACxC,MAAMsN,EAxSD,SAA0BtO,EAAU,IACzC,MAAME,QACJA,GAAU,EAAAqO,SACVA,GAAW,EAAAC,aACXA,EAAe,KAAAxN,cACfA,EAAgB,UAAAyN,aAChBA,EAAe,KAAAC,UACfA,EAAY,MACV1O,GAEGS,EAASkO,GAAc9tB,WAAS,OAChCQ,EAAWC,GAAgBT,YAAS,IACpCwf,EAAYuO,GAAiB/tB,WAAS,KACtCkkB,EAAO8J,GAAYhuB,WAAS,OAC5BiuB,EAAcC,GAAmBluB,WAAS,MAE3CmuB,EAAattB,SAAO,MACpButB,EAAcvtB,SAAO,MAGrB6e,EAAWpM,cAAYlS,MAAMmc,EAAU,KAAMoC,EAAc,MAC/D,IAAKN,EAAS,OAAO,KAErB,MAAMgP,EAAgB9Q,GAAW4Q,EAAWntB,SAAWuU,SACvD9U,GAAa,GAEb,IACE,MAAM6tB,QAAoBpP,GAAoBQ,SAAS2O,EAAe1O,GAsBtE,OApBAmO,EAAWQ,GACXP,EAAcO,EAAY9O,YAAc,IACxCwO,EAAS9O,GAAoBiF,+BAC7B+J,EAAgB9tB,KAAKoB,OAGrB6rB,GAAwB,qBAAsB,CAC5C7N,WAAY8O,EAAY9O,YAAYtb,QAAU,EAC9CggB,MAAOhF,GAAoBiF,8BAC3BhE,gBACAxhB,UAAWyB,KAAKoB,QAId8sB,EAAY9O,YAAYtb,OAAS,EACnC0pB,IAAeU,EAAY9O,YAE3BqO,IAAYS,GAGPA,CACT,OAASvyB,GAEP,OAAO,IACT,SACE0E,GAAa,EACf,GACC,CAAC4e,EAASc,EAAeyN,EAAcC,IAGpC5N,EAAyB3M,cAAYlS,MAAM8e,EAAUhgB,EAAOigB,KAChE,IAAKd,EAAS,OAAO,KAErB5e,GAAa,GACb,IACE,MAAM6tB,QAAoBpP,GAAoBe,uBAAuBC,EAAUhgB,GAe/E,OAbA4tB,EAAWQ,GACXP,EAAcO,EAAY9O,YAAc,IACxCwO,EAAS9O,GAAoBiF,+BAC7B+J,EAAgB9tB,KAAKoB,OAGrB6rB,GAAwB,oCAAqC,CAC3DlN,cAAejgB,EACfsf,WAAY8O,EAAY9O,YAAYtb,QAAU,EAC9CggB,MAAOhF,GAAoBiF,8BAC3BxlB,UAAWyB,KAAKoB,QAGX8sB,CACT,OAASvyB,GAEP,OAAO,IACT,SACE0E,GAAa,EACf,GACC,CAAC4e,EAASc,IAGPO,EAAyBpN,cAAYlS,UACzC,IAAKie,EAAS,OAAO,KAErB,IACE,MAAMkP,QAAmBrP,GAAoBwB,yBAU7C,OARA2M,GAAwB,2BAA4B,CAClD1M,kBAAmB4N,EAAW5M,uBAC9Bd,eAAgB0N,EAAW1N,gBAAgB3c,QAAU,EACrDgd,sBAAuBqN,EAAWrN,uBAAuBhd,QAAU,EACnE0d,OAAQ2M,EAAW3M,OACnBjjB,UAAWyB,KAAKoB,QAGX+sB,CACT,OAASxyB,GAEP,OAAO,IACT,GACC,CAACsjB,IAGEwC,EAAoBvO,cAAYlS,UACpC,IAAKie,EAAS,OAAO,KAErB,IACE,MAAMmP,QAAwBtP,GAAoB2C,oBASlD,OAPAwL,GAAwB,sBAAuB,CAC7C1K,cAAe6L,EAAgB7L,cAC/BX,eAAgBwM,EAAgBxM,gBAAgB9d,QAAU,EAC1D0d,OAAQ4M,EAAgB5M,OACxBjjB,UAAWyB,KAAKoB,QAGXgtB,CACT,OAASzyB,GAEP,OAAO,IACT,GACC,CAACsjB,IAGEuD,EAAwBtP,cAAYlS,UACxC,IAAKie,EAAS,OAAO,KAErB,IACE,MAAMoP,QAAoBvP,GAAoB0D,wBAS9C,OAPAyK,GAAwB,0BAA2B,CACjD1J,WAAY8K,EAAY9K,WACxBb,WAAY2L,EAAY3L,YAAY5e,QAAU,EAC9C0d,OAAQ6M,EAAY7M,OACpBjjB,UAAWyB,KAAKoB,QAGXitB,CACT,OAAS1yB,GAEP,OAAO,IACT,GACC,CAACsjB,IAGEuE,EAAiBtQ,cAAY,KACjC,IAAKsM,EAAS,OAAO,KAErB,IACE,MAAM8O,EAASxP,GAAoB0E,iBAUnC,OAPAyJ,GAAwB,iCAAkC,CACxDnJ,MAAOwK,EAAO1K,QAAQE,MACtB1E,WAAYkP,EAAO1K,QAAQxE,WAC3ByE,YAAayK,EAAO1K,QAAQC,YAC5BtlB,UAAWyB,KAAKoB,QAGXktB,CACT,OAAS3yB,GAEP,OAAO,IACT,GACC,CAAC6jB,IAkCJ,OA/BA7e,YAAU,KACR,IAAKse,IAAYqO,EAAU,OAE3B,MAAMiB,EAAc,KAClBjP,KAWF,OAPAiP,IAGIhB,IACFS,EAAYptB,QAAU0a,YAAYiT,EAAahB,IAG1C,KACDS,EAAYptB,SACd4tB,cAAcR,EAAYptB,WAG7B,CAACqe,EAASqO,EAAUC,EAAcjO,IAGrC3e,YAAU,IACD,KACDqtB,EAAYptB,SACd4tB,cAAcR,EAAYptB,UAG7B,IAEI,CAEL4e,UACAJ,aACA0E,QACA1jB,YACAytB,eAGAvO,WACAO,yBACAS,yBACAmB,oBACAe,wBACAgB,iBAGAuK,aAEJ,CAuEwBU,CAAiB,CACrC1O,gBACAuN,UAAU,EACVC,aAAc,IACdC,aAAepO,QAOXsP,EAAwBxb,cAAYlS,UACxC,MAAMwe,EAAU,GAEhB,IAaE,OAXAA,EAAQmP,kBAAoBtB,EAAc/M,yBAG1Cd,EAAQoP,oBAAsBvB,EAAc5L,oBAG5CjC,EAAQqP,wBAA0BxB,EAAc7K,wBAGhDhD,EAAQ8O,OAASjB,EAAc7J,iBAExBhE,CACT,OAAS7jB,GAEP,OAAO,IACT,GACC,CAAC0xB,EAAetN,IAEnB,MAAO,IACFsN,EACHqB,wBAEJ,CDkGApT,YAAYoR,GAAoB,KAGhCpU,OAAOuD,iBAAiB,eAAgB,KACtC6Q,OErbF,MAAMoC,GAAuB,EAAGC,aAAY,EAAOC,cACjD,MAAOC,EAAeC,GAAoBtvB,WAAS,OAC5CuvB,EAAiBC,GAAsBxvB,WAAS,MAChDyvB,EAAcC,GAAmB1vB,YAAS,IAC1C2vB,EAAgBC,GAAqB5vB,WAAS,KAE/C6vB,OACJA,EACAC,gBAAiBC,EACjBC,eAAgBC,EAAAC,YAChBA,GDwUG,SAAiC/Q,EAAU,IAChD,MAAMgR,UACJA,EAAY,GAAAC,kBACZA,GAAoB,EAAAC,gBACpBA,EAAkB,KAChBlR,GAEGsQ,EAAcC,GAAmB1vB,YAAS,IAC1C6vB,EAAQS,GAAatwB,WAAS,IAC/BouB,EAAcvtB,SAAO,MAErBivB,EAAkBxc,cAAY,KAClC,GAAImc,EAAc,OAElBC,GAAgB,GAEhB,MAAMa,EAAUnvB,UACd,IACE,MAAMwe,QAAgBV,GAAoBQ,SAASnK,UAC7C2O,EAAQhF,GAAoBiF,8BAGlC,GAAID,EAAQiM,EAAW,CACrB,MAAMK,EAAQ,CACZvwB,GAAIG,KAAKoB,MACTtB,KAAM,YACNmB,QAAS,wBAAwB6iB,0BAA8BiM,KAC/DjM,QACA1E,WAAYI,EAAQJ,YAAYtb,QAAU,EAC1CvF,UAAWyB,KAAKoB,OAGlB8uB,EAAU5uB,GAAQ,IAAIA,EAAM8uB,GAK9B,CAGA,MAAMC,EAAqB7Q,EAAQJ,YAAYvV,UAAyB,aAAbyG,EAAE2T,SAA0B,GACvF,GAAIoM,EAAmBvsB,OAAS,GAAKksB,EAAmB,CACtD,MAAMI,EAAQ,CACZvwB,GAAIG,KAAKoB,MACTtB,KAAM,sBACNmB,QAAS,GAAGovB,EAAmBvsB,iDAC/Bsb,WAAYiR,EACZ9xB,UAAWyB,KAAKoB,OAGlB8uB,EAAU5uB,GAAQ,IAAIA,EAAM8uB,GAE9B,CAGAnD,GAAwB,2BAA4B,CAClDnJ,QACA1E,WAAYI,EAAQJ,YAAYtb,QAAU,EAC1CusB,mBAAoBA,EAAmBvsB,OACvCvF,UAAWyB,KAAKoB,OAGpB,OAASzF,GAET,GAIFw0B,IAGAnC,EAAYptB,QAAU0a,YAAY6U,EAASF,IAC1C,CAACZ,EAAcU,EAAWC,EAAmBC,IAE1CL,EAAiB1c,cAAY,KACjCoc,GAAgB,GACZtB,EAAYptB,UACd4tB,cAAcR,EAAYptB,SAC1BotB,EAAYptB,QAAU,OAEvB,IAEGkvB,EAAc5c,cAAY,KAC9Bgd,EAAU,KACT,IAWH,OARAvvB,YAAU,IACD,KACDqtB,EAAYptB,SACd4tB,cAAcR,EAAYptB,UAG7B,IAEI,CACLyuB,eACAI,SACAC,kBACAE,iBACAE,cAEJ,CC7aMQ,CAAwB,CAC1BP,UAAWR,EACXU,gBAAiBd,IAIboB,EAAcrd,cAAY,KAC9B,IACE,MAAMhX,EFieL,WACL,MAAMs0B,EAAuBld,KAAKiU,MAAMC,aAAaC,QAAQ,0BAA4B,MACnFgJ,EAAiBnd,KAAKiU,MAAMC,aAAaC,QAAQ,oBAAsB,MAGvEiJ,EAAsBF,EAAqB/uB,WAC3CkvB,EAAWD,EAAoB1iB,OAAO,CAAC6C,EAAKqK,IAAUrK,EAAMqK,EAAM4I,MAAO,GAAK4M,EAAoB5sB,QAAU,EAC5G8sB,EAAgBF,EAAoB1iB,OAAO,CAAC6C,EAAKqK,IAAUrK,EAAMqK,EAAMkE,WAAY,GAAKsR,EAAoB5sB,QAAU,EAGtH+sB,EAAqBJ,EACxB5mB,OAAOgL,GAAsB,uBAAdA,EAAK/U,MACpB2B,OAAM,IACN9E,IAAIkY,GAAQA,EAAK3Y,MAEd40B,EAAkBL,EACrB5mB,OAAOgL,GAAsB,cAAdA,EAAK/U,MACpB2B,OAAM,IACN9E,IAAIkY,GAAQA,EAAK3Y,MAEpB,MAAO,CACL60B,UAAWnJ,GACXoJ,iBAAkBlF,KAClBuB,cAAe,CACb4D,aAAcP,EAAoBA,EAAoB5sB,OAAS,IAAIggB,OAAS,EAC5EoN,aAAc/iB,KAAK0d,MAAM8E,GACzBQ,kBAAmBhjB,KAAK0d,MAAM+E,GAC9BQ,QAASV,EACTW,OAAQ,CACNC,eAAgBZ,EAAoB5sB,QAAU,GAC5C4sB,EAAoBA,EAAoB5sB,OAAS,GAAGggB,MACpD4M,EAAoBA,EAAoB5sB,OAAS,GAAGggB,QAG1DjJ,YAAa,CACX0W,cAAeV,EACfW,gBAAiBV,GAEnBvyB,UAAWyB,KAAKoB,MAEpB,CEzgBmBqwB,GACbvC,EAAiBhzB,EACnB,OAASP,GAET,GACC,IAGG+1B,EAAmBxe,cAAY,KAC/Bmc,GACFQ,IACAP,GAAgB,KAEhBK,IACAL,GAAgB,KAEjB,CAACD,EAAcM,EAA8BE,IAGhDlvB,YAAU,KACR,IAAKouB,EAAW,OAGhB3X,KAGAmZ,IAGA,MAAMl0B,EAAWif,YAAYiV,EAAapB,GAE1C,MAAO,KACLX,cAAcnyB,KAEf,CAAC0yB,EAAWwB,EAAapB,IAG5B,MAAMwC,EAAe,CAACrtB,EAAOstB,EAAO,OAC9BttB,QAA8C,MAC7B,iBAAVA,EACF,GAAG6J,KAAK0d,MAAMvnB,KAASstB,IAEzBttB,EA+BT,IAAKyqB,IAAcE,EACjB,OAAO,KAGT,MAAM8B,UAAEA,EAAAC,iBAAWA,EAAA3D,cAAkBA,EAAAxS,YAAeA,GAAgBoU,EAEpE,aACG,OAAIxsB,UAAU,iFACbC,SAAAC,OAAC,OAAIF,UAAU,8EAEbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,iEACbC,SAAA,CAAAC,OAAC,OACCD,SAAA,CAAAF,MAAC,MAAGC,UAAU,mCAAmCC,SAAA,0BACjDF,MAAC,KAAEC,UAAU,6BAA6BC,SAAA,mDAI5CC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC,UACCc,QAASouB,EACTjvB,UAAW,6CACT4sB,EACI,2CACA,kDAGL3sB,WAAe,kBAAoB,qBAEtCF,MAAC,UACCc,QAASitB,EACT9tB,UAAU,uFACXC,SAAA,YAGDC,OAAC,UACCW,QAAS0rB,EACTvsB,UAAU,oCAEVC,SAAA,CAAAF,MAAC,QAAKC,UAAU,UAAUC,SAAA,UAC1BF,MAAC,OACCC,UAAU,UAAU6b,KAAK,OAAOD,QAAQ,YACxCE,OAAO,eAEP7b,SAAAF,MAAC,QACCkc,cAAc,QAAQC,eAAe,QAAQH,YAAa,EAC1DlgB,EAAE,oCAOZqE,OAAC,OAAIF,UAAU,gBAEbC,SAAA,CAAAC,OAAC,WACCD,SAAA,CAAAF,MAAC,MAAGC,UAAU,2CAA2CC,SAAA,oBACzDF,MAAC,OAAIC,UAAU,uDACZC,SAAAiH,OAAOY,QAAQwmB,GAAWp0B,IAAI,EAAEsT,EAAQ3L,MACvC,MAAM2D,EArFI,EAACgI,EAAQ3L,KAC/B,MAQMyrB,EARa,CACjB/H,IAAK,CAAE6J,KAAM,KAAMC,KAAM,KACzBhK,IAAK,CAAE+J,KAAM,IAAKC,KAAM,KACxBjK,IAAK,CAAEgK,KAAM,GAAKC,KAAM,KACxB/J,IAAK,CAAE8J,KAAM,KAAMC,KAAM,KACzB7J,KAAM,CAAE4J,KAAM,IAAKC,KAAM,OAGE7hB,GAC7B,OAAK8f,GAAuB,OAAVzrB,EAEdA,GAASyrB,EAAU8B,KAAa,OAChCvtB,GAASyrB,EAAU+B,KAAa,oBAC7B,OAJkC,WA2EdC,CAAgB9hB,EAAQ3L,GACjC0tB,EApEG,CAAC/pB,IACtB,OAAQA,GACN,IAAK,OAAQ,MAAO,8BACpB,IAAK,oBAAqB,MAAO,gCACjC,IAAK,OAAQ,MAAO,0BACpB,QAAS,MAAO,8BA+DcgqB,CAAehqB,GAEnC,OACEtF,OAAC,OAAiBF,UAAU,iDAC1BC,SAAA,CAAAC,OAAC,OAAIF,UAAU,oCACbC,SAAA,CAAAF,MAAC,QAAKC,UAAU,oCAAqCC,SAAAuN,UACpD,QAAKxN,UAAW,8CAA8CuvB,IAC5DtvB,SAAAuF,OAGLzF,MAAC,OAAIC,UAAU,OACbC,eAAC,QAAKD,UAAU,mCACbC,SAAAivB,EAAartB,EAAkB,QAAX2L,EAAmB,GAAK,YATzCA,UAmBjB+gB,EAAiBltB,OAAS,GACzBnB,OAAC,WACCD,SAAA,CAAAF,MAAC,MAAGC,UAAU,2CAA2CC,SAAA,wCACxD,OAAID,UAAU,iDACbC,SAAAF,MAAC,OAAIC,UAAU,YACZC,SAAAsuB,EAAiBr0B,IAAI,CAACqnB,EAAWhgB,IAChCrB,OAAC,OAAgBF,UAAU,oCACzBC,SAAA,CAAAC,OAAC,QAAKF,UAAU,mCACbC,SAAA,CAAAshB,EAAU/T,OAAO,KAAG0hB,EAAa3N,EAAU1f,UAE9C3B,OAAC,QAAKF,UAAU,uBAAuBC,SAAA,mBACrBivB,EAAa3N,EAAUgI,aALjChoB,kBAenB,WACCtB,SAAA,CAAAF,MAAC,MAAGC,UAAU,2CAA2CC,SAAA,kBACzDC,OAAC,OAAIF,UAAU,wCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,yCAAyCC,SAAA,kBACvDC,OAAC,OAAIF,UAAU,oBACbC,SAAA,CAAAF,MAAC,QAAKC,UAAU,mCACbC,SAAA2qB,EAAc4D,eAEjBzuB,MAAC,QAAKC,UAAU,6BAA6BC,SAAA,SAC5C2qB,EAAcgE,OAAOC,gBACpB9uB,MAAC,QAAKC,UAAU,sBACdC,SAAAF,MAAC,OAAIC,UAAU,UAAU6b,KAAK,eAAeD,QAAQ,YACnD3b,SAAAF,MAAC,QAAK0vB,SAAS,UAAU5zB,EAAE,yIAAyI6zB,SAAS,sBAOvLxvB,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,yCAAyCC,SAAA,uBACvDF,MAAC,QAAKC,UAAU,mCACbC,WAAcyuB,uBAInBxuB,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,yCAAyCC,SAAA,kBACvDF,MAAC,QAAKC,UAAU,mCACbC,WAAcwuB,qBAMpBzB,EAAO3rB,OAAS,GACfnB,OAAC,OAAIF,UAAU,4DACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,sCAAsCC,SAAA,kBACpDF,MAAC,UACCc,QAASwsB,EACTrtB,UAAU,gDACXC,SAAA,iBAIHC,OAAC,OAAIF,UAAU,YACZC,SAAA,CAAA+sB,EAAOhuB,MAAM,EAAG,GAAG9E,IAAKyzB,GACvBztB,OAAC,OAAmBF,UAAU,0BAC5BC,SAAA,CAAAC,OAAC,QAAKF,UAAU,cAAeC,SAAA,CAAA0tB,EAAMtwB,KAAK,OAAQ,IAAEswB,EAAMnvB,UADlDmvB,EAAMvwB,KAIjB4vB,EAAO3rB,OAAS,GACfnB,OAAC,OAAIF,UAAU,0BAA0BC,SAAA,QAClC+sB,EAAO3rB,OAAS,EAAE,8BASlC+W,EAAY0W,cAAcztB,OAAS,UACjC,WACCpB,SAAA,CAAAF,MAAC,MAAGC,UAAU,2CAA2CC,SAAA,8BACzDF,MAAC,OAAIC,UAAU,6DACbC,SAAAF,MAAC,OAAIC,UAAU,2BACbC,SAAAC,OAAC,SAAMF,UAAU,sCACfC,SAAA,CAAAF,MAAC,SAAMC,UAAU,aACfC,SAAAC,OAAC,MACCD,SAAA,CAAAF,MAAC,MAAGC,UAAU,iFAAiFC,SAAA,SAG/FF,MAAC,MAAGC,UAAU,iFAAiFC,SAAA,cAG/FF,MAAC,MAAGC,UAAU,iFAAiFC,SAAA,UAG/FF,MAAC,MAAGC,UAAU,iFAAiFC,SAAA,cAKnGF,MAAC,SAAMC,UAAU,oCACdC,WAAY6uB,cAAc9vB,MAAM,EAAG,IAAI9E,IAAI,CAACsT,EAAQjM,WAClD,MACCtB,SAAA,CAAAF,MAAC,MAAGC,UAAU,gEACXC,SAAAuN,EAAOnQ,OAEV0C,MAAC,MAAGC,UAAU,oDACXC,WAAO0iB,WAAanV,EAAO8P,eAAiB,QAE/Cvd,MAAC,MAAGC,UAAU,oDACXC,cAAsB,IAAtBuN,EAAOmP,WAA2B,GAAGnP,EAAOmP,6BAC1B,IAAjBnP,EAAO6T,MAAsB,UAAU7T,EAAO6T,aACxB,IAApB7T,EAAOiG,SAAyB,GAAG/H,KAAK0d,MAAM5b,EAAOiG,cAAgB,QAE3E1T,MAAC,MAAGC,UAAU,oDACXC,SAAA,IAAI1C,KAAKiQ,EAAO1R,WAAW2F,yBAbvBF,uBAyBtB,WACCtB,SAAA,CAAAF,MAAC,MAAGC,UAAU,2CAA2CC,SAAA,wBACzDC,OAAC,OAAIF,UAAU,wCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,SAAM4vB,QAAQ,mBAAmB3vB,UAAU,+CAA+CC,SAAA,+BAG3FC,OAAC,UACC9C,GAAG,mBACHyE,MAAO6qB,EAAkB,IACzB5qB,SAAWC,GAAM4qB,EAA8C,IAA3BnN,SAASzd,EAAEC,OAAOH,QACtD7B,UAAU,6DAEVC,SAAA,CAAAF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,eACnBF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,eACnBF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,aACnBF,MAAC,UAAO8B,MAAO,IAAK5B,SAAA,oBAIxBC,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,SAAM4vB,QAAQ,kBAAkB3vB,UAAU,+CAA+CC,SAAA,kCAG1FC,OAAC,UACC9C,GAAG,kBACHyE,MAAOirB,EACPhrB,SAAWC,GAAMgrB,EAAkBvN,SAASzd,EAAEC,OAAOH,QACrD7B,UAAU,6DAEVC,SAAA,CAAAF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,gBACnBF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,kBACnBF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,iBACnBF,MAAC,UAAO8B,MAAO,GAAI5B,SAAA,2CCvV/B2vB,GAAc,EAAG3vB,cACdF,MAAC8vB,GAAgB5vB,aCA1B,MAAM6vB,GAAkB,CAEtB,QAAS,CAAErwB,OAAQ,uBAAwBkE,YAAa,wBACxD,SAAU,CAAElE,OAAQ,uBAAwBkE,YAAa,wBAGzD,SAAU,CAAElE,OAAQ,WAAYuC,OAAQ,OAAQ2B,YAAa,oBAC7D,SAAU,CAAElE,OAAQ,WAAYuC,OAAQ,WAAY2B,YAAa,kBACjE,SAAU,CAAElE,OAAQ,WAAYuC,OAAQ,WAAY2B,YAAa,kBAGjE,SAAU,CAAElE,OAAQ,aAAckE,YAAa,wBAC/C,SAAU,CAAElE,OAAQ,OAAQkE,YAAa,yBACzC,SAAU,CAAElE,OAAQ,cAAekE,YAAa,eAChD,SAAU,CAAElE,OAAQ,cAAekE,YAAa,mBAChD,SAAU,CAAElE,OAAQ,cAAekE,YAAa,eAGhD,eAAgB,CAAElE,OAAQ,uBAAwBkE,YAAa,4BAC/D,eAAgB,CAAElE,OAAQ,cAAekE,YAAa,8BAGtD,eAAgB,CAAElE,OAAQ,kBAAmBkE,YAAa,2BAC1DosB,GAAM,CAAEtwB,OAAQ,OAAQkE,YAAa,aAGrC,QAAS,CAAElE,OAAQ,gBAAiB8O,QAAS,OAAQ5K,YAAa,wBAClE,QAAS,CAAElE,OAAQ,gBAAiB8O,QAAS,OAAQ5K,YAAa,4BAClE,QAAS,CAAElE,OAAQ,gBAAiB8O,QAAS,QAAS5K,YAAa,yBACnE,QAAS,CAAElE,OAAQ,gBAAiB8O,QAAS,OAAQ5K,YAAa,0BAGvDqsB,GAAuB,CAACC,EAAW,MAE9C,MAAMC,EAAezf,cAAa8E,IAChC,MAAMxP,EAAQ,IAEVwP,EAAM4a,SAAW5a,EAAM6a,UACzBrqB,EAAMS,KAAK+O,EAAM4a,QAAU,MAAQ,QAEjC5a,EAAM8a,QAAQtqB,EAAMS,KAAK,OACzB+O,EAAMpT,UAAU4D,EAAMS,KAAK,SAG/B,IAAItE,EAAMqT,EAAMrT,IAAI+E,cAUpB,MATY,MAAR/E,IAAaA,EAAM,SACX,WAARA,IAAkBA,EAAM,OAChB,YAARA,IAAmBA,EAAM,MACjB,cAARA,IAAqBA,EAAM,QACnB,cAARA,IAAqBA,EAAM,QACnB,eAARA,IAAsBA,EAAM,SAEhC6D,EAAMS,KAAKtE,GAEJ6D,EAAMqC,KAAK,MACjB,IAGGkoB,EAAuB7f,cAAazO,IAExC,MAAMkc,EAAUlc,EAAOkc,QAAQjX,cACzBspB,EAAwC,SAA3BvuB,EAAOwuB,gBAG1B,OAFgB,CAAC,QAAS,WAAY,UAAUjN,SAASrF,KAErCqS,GACnB,IAGGE,EAAgBhgB,cAAa8E,IAEjC,IAAK+a,EAAqB/a,EAAMvT,QAC9B,OAGF,MAAM0uB,EAAWR,EAAa3a,GACxBob,EAAWb,GAAgBY,GAEjC,GAAIC,EAAU,CACZpb,EAAMnT,iBACNmT,EAAMtD,kBAGN,MAAMnO,EAAUmsB,EAASU,EAASlxB,QAC9BqE,GACFA,EAAQ6sB,EAIZ,GACC,CAACT,EAAcI,EAAsBL,IAGxC/xB,YAAU,KACRwU,SAAS0G,iBAAiB,UAAWqX,GAAe,GAE7C,KACL/d,SAASke,oBAAoB,UAAWH,GAAe,KAExD,CAACA,IAiFJ,MAAO,CACLI,gBA/EsBpgB,cAAY,IAC3BvJ,OAAOY,QAAQgoB,IAAiB51B,IAAI,EAAEgI,EAAKsb,MAAO,CACvDtb,SACGsb,KAEJ,IA2EDsT,uBAxE6BrgB,cAAY,KACzC,MAAM5I,EAAa,CACjBkpB,QAAS,GACTnd,WAAY,GACZod,SAAU,GACVv3B,KAAM,GACNw3B,KAAM,GACNC,MAAO,IAqBT,OAlBAhqB,OAAOY,QAAQgoB,IAAiB/nB,QAAQ,EAAE7F,EAAKsb,MAC7C,MAAMmT,EAAW,CAAEzuB,SAAQsb,GAEL,aAAlBA,EAAO/d,OACToI,EAAW+L,WAAWpN,KAAKmqB,GAClBnT,EAAO/d,OAAO8jB,SAAS,aAAiC,eAAlB/F,EAAO/d,QAA6C,gBAAlB+d,EAAO/d,OACxFoI,EAAWmpB,SAASxqB,KAAKmqB,GAChBnT,EAAO/d,OAAO8jB,SAAS,SAA6B,gBAAlB/F,EAAO/d,QAA8C,gBAAlB+d,EAAO/d,OACrFoI,EAAWpO,KAAK+M,KAAKmqB,GACZnT,EAAO/d,OAAO8jB,SAAS,WAA+B,SAAlB/F,EAAO/d,OACpDoI,EAAWopB,KAAKzqB,KAAKmqB,GACM,kBAAlBnT,EAAO/d,OAChBoI,EAAWqpB,MAAM1qB,KAAKmqB,GAEtB9oB,EAAWkpB,QAAQvqB,KAAKmqB,KAIrB9oB,GACN,IA4CDspB,eAzCqB1gB,cAAaigB,GAC3BA,EACJjqB,MAAM,KACNvM,IAAIgI,IACH,OAAQA,GACN,IAAK,MAAO,MAAO,IACnB,IAAK,OAAQ,MAAO,OACpB,IAAK,MAAO,MAAO,MACnB,IAAK,QAAS,MAAO,QACrB,IAAK,QAAS,MAAO,QACrB,IAAK,MAAO,MAAO,MACnB,IAAK,KAAM,MAAO,IAClB,IAAK,OAAQ,MAAO,IACpB,IAAK,OAAQ,MAAO,IACpB,IAAK,QAAS,MAAO,IACrB,QAAS,OAAOA,EAAI1I,iBAGvB4O,KAAK,OACP,IAuBDgpB,oBApB0B3gB,cAAaigB,IAC/BZ,GAAgBY,EAASzpB,eAChC,IAmBDoqB,iBAhBuB5gB,cAAY,CAACigB,EAAUlT,KAC9C,MAAM8T,EAAgBZ,EAASzpB,cAC/B,OAAI6oB,GAAgBwB,KAKpBxB,GAAgBwB,GAAiB9T,GAC1B,IACN,MCtJC+T,GAA4B,CAEhC3d,WAAY,CACV,CAAE4d,QAAS,kDAAmD3tB,SAAU,cACxE,CAAE2tB,QAAS,wBAAyB3tB,SAAU,eAIhDmtB,SAAU,CACR,CAAEQ,QAAS,kFAAmF3tB,SAAU,WAAYsC,QAAS,cAC7H,CAAEqrB,QAAS,8EAA+E3tB,SAAU,WAAYsC,QAAS,wBACzH,CAAEqrB,QAAS,gCAAiC3tB,SAAU,YACtD,CAAE2tB,QAAS,8BAA+B3tB,SAAU,aAItDpK,KAAM,CACJ,CAAE+3B,QAAS,mCAAoC3tB,SAAU,OAAQsC,QAAS,eAC1E,CAAEqrB,QAAS,0BAA2B3tB,SAAU,OAAQsC,QAAS,eACjE,CAAEqrB,QAAS,mCAAoC3tB,SAAU,SAAUsC,QAAS,gBAI9EjH,OAAQ,CACN,CAAEsyB,QAAS,gFAAiF3tB,SAAU,SAAUsC,QAAS,gBACzH,CAAEqrB,QAAS,6BAA8B3tB,SAAU,SAAUsC,QAAS,kBAKpEsrB,GAAmB,CAEvB,aAAc,CACZr0B,GAAI,aACJ8U,MAAO,mBACPvO,YAAa,yCACbE,SAAU,aACVvE,KAAMoyB,EACNf,SAAU,SACVgB,SAAU,CAAC,OAAQ,cAAe,YAAa,QAAS,SACxDC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,WAAYuC,OAAQ,UAGjE,iBAAkB,CAChB5E,GAAI,iBACJ8U,MAAO,uBACPvO,YAAa,2CACbE,SAAU,aACVvE,KAAMM,EACN+wB,SAAU,SACVgB,SAAU,CAAC,WAAY,QAAS,MAAO,UACvCC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,WAAYuC,OAAQ,cAGjE,iBAAkB,CAChB5E,GAAI,iBACJ8U,MAAO,yBACPvO,YAAa,oCACbE,SAAU,aACVvE,KAAMI,EACNixB,SAAU,SACVgB,SAAU,CAAC,WAAY,UAAW,UAAW,aAC7CC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,WAAYuC,OAAQ,cAIjE,aAAc,CACZ5E,GAAI,aACJ8U,MAAO,uBACPvO,YAAa,mDACbE,SAAU,WACVvE,KAAMM,EACN+wB,SAAU,SACVgB,SAAU,CAAC,MAAO,YAAa,QAAS,aAAc,OAAQ,OAAQ,MAAO,UAC7EI,WAAY,CACV,CAAE/pB,KAAM,UAAW3K,KAAM,SAAUsG,YAAa,yBAA0BquB,UAAU,IAEtFJ,QAAS,CAAC/3B,EAAQi4B,KAAQ,CACxBryB,OAAQ,eACRpC,KAAM,MACNkR,QAAS1U,GAAQ0U,SAAW,eAIhC,uBAAwB,CACtBnR,GAAI,uBACJ8U,MAAO,2BACPvO,YAAa,kDACbE,SAAU,WACVvE,KAAMO,EACN8wB,SAAU,eACVgB,SAAU,CAAC,cAAe,WAAY,cAAe,OAAQ,SAAU,QACvEI,WAAY,CACV,CAAE/pB,KAAM,WAAY3K,KAAM,SAAUsG,YAAa,gDAAiDquB,UAAU,IAE9GJ,QAAS,CAAC/3B,EAAQi4B,KAAQ,CACxBryB,OAAQ,kBACRwyB,SAAUp4B,GAAQo4B,UAAY,UAIlC,cAAe,CACb70B,GAAI,cACJ8U,MAAO,6BACPvO,YAAa,0CACbE,SAAU,WACVvE,KAAM4yB,EACNP,SAAU,CAAC,QAAS,QAAS,aAAc,cAAe,QAC1DC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,qBAI7C,cAAe,CACbrC,GAAI,cACJ8U,MAAO,wBACPvO,YAAa,iDACbE,SAAU,OACVvE,KAAM6yB,EACNxB,SAAU,SACVgB,SAAU,CAAC,SAAU,OAAQ,OAAQ,UAAW,UAAW,YAC3DI,WAAY,CACV,CAAE/pB,KAAM,QAAS3K,KAAM,SAAUsG,YAAa,qBAAsBgc,UAAU,IAEhFiS,QAAS,CAAC/3B,EAAQi4B,KAAQ,CACxBryB,OAAQ,SACR0I,MAAOtO,GAAQsO,SAInB,cAAe,CACb/K,GAAI,cACJ8U,MAAO,wBACPvO,YAAa,gDACbE,SAAU,OACVvE,KAAM8yB,EACNzB,SAAU,SACVgB,SAAU,CAAC,SAAU,SAAU,QAAS,MAAO,OAAQ,QACvDC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,iBAG7C,cAAe,CACbrC,GAAI,cACJ8U,MAAO,kBACPvO,YAAa,uDACbE,SAAU,SACVvE,KAAM+T,EACNsd,SAAU,SACVgB,SAAU,CAAC,SAAU,WAAY,MAAO,QAAS,aAAc,QAC/DI,WAAY,CACV,CAAE/pB,KAAM,SAAU3K,KAAM,SAAUsG,YAAa,yCAA0CquB,UAAU,IAErGJ,QAAS,CAAC/3B,EAAQi4B,KAAQ,CACxBryB,OAAQ,SACR8J,OAAQ1P,GAAQ0P,QAAU,SAK9B,eAAgB,CACdnM,GAAI,eACJ8U,MAAO,eACPvO,YAAa,wCACbE,SAAU,SACVvE,KAAMQ,EACN6xB,SAAU,CAAC,QAAS,QAAS,gBAAiB,OAAQ,aACtDI,WAAY,CACV,CAAE/pB,KAAM,OAAQ3K,KAAM,SAAUsG,YAAa,oCAAqCquB,UAAU,GAC5F,CAAEhqB,KAAM,OAAQ3K,KAAM,SAAUsG,YAAa,oBAAqBquB,UAAU,IAE9EJ,QAAS,CAAC/3B,EAAQi4B,KAAQ,CACxBryB,OAAQ,eACRpC,KAAMxD,GAAQwD,MAAQ,OACtB5D,KAAMI,GAAQJ,QAIlB,gBAAiB,CACf2D,GAAI,gBACJ8U,MAAO,uBACPvO,YAAa,qCACbE,SAAU,SACVvE,KAAM+yB,EACNV,SAAU,CAAC,UAAW,QAAS,SAAU,QAAS,UAClDC,QAAS,CAACC,EAASC,KAAQ,CACzBryB,OAAQ,eACRpC,KAAM,OACN5D,KAAM,aAIV,kBAAmB,CACjB2D,GAAI,kBACJ8U,MAAO,kBACPvO,YAAa,uCACbE,SAAU,SACVvE,KAAMC,EACNoyB,SAAU,CAAC,SAAU,gBAAiB,SAAU,YAAa,SAC7DC,QAAS,CAACC,EAASC,KAAQ,CACzBryB,OAAQ,eACRpC,KAAM,MACN5D,KAAM,aAKV,gBAAiB,CACf2D,GAAI,gBACJ8U,MAAO,uBACPvO,YAAa,iCACbE,SAAU,WACVvE,KAAMM,EACN+xB,SAAU,CAAC,QAAS,OAAQ,UAAW,SACvCC,QAAS,CAACC,EAASC,KAAQ,CACzBryB,OAAQ,eACR8O,QAAS,UAIb,oBAAqB,CACnBnR,GAAI,oBACJ8U,MAAO,2BACPvO,YAAa,4CACbE,SAAU,WACVvE,KAAMM,EACN+xB,SAAU,CAAC,YAAa,OAAQ,UAAW,SAC3CC,QAAS,CAACC,EAASC,KAAQ,CACzBryB,OAAQ,eACR8O,QAAS,UAKb,gBAAiB,CACfnR,GAAI,gBACJ8U,MAAO,wBACPvO,YAAa,yBACbE,SAAU,OACVvE,KAAMgzB,EACN3B,SAAU,SACVgB,SAAU,CAAC,OAAQ,QAAS,UAC5BC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,UAG7C,kBAAmB,CACjBrC,GAAI,kBACJ8U,MAAO,0BACPvO,YAAa,mCACbE,SAAU,aACVvE,KAAMizB,EACNZ,SAAU,CAAC,WAAY,UAAW,SAAU,OAAQ,QACpDC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,qBAG7C+yB,SAAY,CACVp1B,GAAI,WACJ8U,MAAO,gBACPvO,YAAa,oCACbE,SAAU,WACVvE,KAAMmzB,EACNd,SAAU,CAAC,WAAY,cAAe,SAAU,WAChDC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,mBAG7CyD,KAAQ,CACN9F,GAAI,OACJ8U,MAAO,WACPvO,YAAa,0CACbE,SAAU,OACVvE,KAAMozB,EACN/B,SAAU,KACVgB,SAAU,CAAC,OAAQ,gBAAiB,WAAY,WAChDC,QAAS,CAACC,EAASC,KAAQ,CAAQryB,OAAQ,gBCrRzCkzB,GAAiB,EACrB/1B,SACA2vB,UACAqG,mBACA91B,iBAAiB,GACjB+1B,iBAAiB,GACjBC,gBAAiBC,EAAmB,GACpC/yB,UAAWgzB,MAEX,MAAO7qB,EAAO8qB,GAAY91B,WAAS,KAC5B+1B,EAAeC,GAAoBh2B,WAAS,IAC5Ci2B,EAAiBzjB,GAAqBxS,WAAS,IAChDc,EAAWD,SAAO,MAClBq1B,EAAUr1B,SAAO,MACjBs1B,EAAYt1B,SAAO,OAGnBu1B,eACJA,EAAAC,eACAA,EAAAC,sBACAA,EAAAC,eAEAA,GDmQ8B,EAAC52B,EAAiB,MAClD,MAAO62B,EAAcC,GAAmBz2B,WAAS,KAC/C,MAAM02B,EAAQ9O,aAAaC,QAAQ,gBACnC,OAAO6O,EAAQhjB,KAAKiU,MAAM+O,GAAS,MAG9BC,EAAcC,GAAmB52B,WAAS,KAC/C,MAAM02B,EAAQ9O,aAAaC,QAAQ,mBACnC,OAAO6O,EAAQhjB,KAAKiU,MAAM+O,GAAS,KAI/BG,EAAuBvjB,cAAatI,IACxC,MAAM4U,EAAU,GAEhB,IAAK,MAAOkX,EAAWC,KAAahtB,OAAOY,QAAQypB,IACjD,IAAK,MAAMC,KAAW0C,EAAU,CAC9B,MAAM9P,EAAQjc,EAAMic,MAAMoN,EAAQA,SAC9BpN,GACFrH,EAAQvW,KAAK,CACX3C,SAAU2tB,EAAQ3tB,SAClBsC,QAASqrB,EAAQrrB,QACjB4rB,WAAY3N,EAAMplB,MAAM,GAAGoI,OAAO+sB,SAClCC,WAAYhQ,EAAM,GAAG/iB,OAAS8G,EAAM9G,QAG1C,CAGF,OAAO0b,EAAQvV,KAAK,CAACyG,EAAGC,IAAMA,EAAEkmB,WAAanmB,EAAEmmB,aAC9C,IAGGb,EAAiB9iB,cAAatI,IAClC,IAAKA,EAAM1J,OAAQ,MAAO,GAE1B,MAAM41B,EAAkBlsB,EAAMlB,cAAcxI,OACtCse,EAAU,GAGVuX,EAAYN,EAAqB7rB,GA0DvC,OAvDAjB,OAAOyG,OAAO8jB,IAAkB1pB,QAAQ5B,IACtC,IAAIkb,EAAQ,EAGRlb,EAAQ+L,MAAMjL,gBAAkBotB,IAClChT,GAAS,KAIPlb,EAAQ+L,MAAMjL,cAAcsc,SAAS8Q,KACvChT,GAAS,IAIPlb,EAAQxC,YAAYsD,cAAcsc,SAAS8Q,KAC7ChT,GAAS,IAQXA,GAAiC,GAJVlb,EAAQwrB,SAASvqB,OAAOmtB,GAC7CA,EAAQttB,cAAcsc,SAAS8Q,IAC/BA,EAAgB9Q,SAASgR,EAAQttB,gBAEX5F,OAGxB,MAAMmzB,EAAab,EAAaxtB,EAAQ/I,KAAO,EAC/CikB,GAAS3V,KAAKsC,IAAiB,EAAbwmB,EAAgB,IAG9B13B,EAAe23B,YACQ,eAArBtuB,EAAQtC,UAA6BsC,EAAQ/I,GAAGmmB,SAASzmB,EAAe23B,aAC1EpT,GAAS,IAEPlb,EAAQtC,WAAa/G,EAAe23B,YACtCpT,GAAS,KAKb,MAAMqT,EAAUJ,EAAUK,KAAKC,GAAMA,EAAGzuB,UAAYA,EAAQ/I,IACxDs3B,IACFrT,GAA8B,GAArBqT,EAAQN,YAGf/S,EAAQ,GACVtE,EAAQvW,KAAK,IACRL,EACHkb,QACAmT,aACAK,cAAexT,EAAQ,OAKtBtE,EACJvV,KAAK,CAACyG,EAAGC,IAAMA,EAAEmT,MAAQpT,EAAEoT,OAC3BriB,MAAM,EAAG,IACX,CAACg1B,EAAsBL,EAAc72B,IAGlC22B,EAAwBhjB,cAAY,KACxC,MAAMqkB,EAAa,GAGnB,OAAQh4B,EAAe23B,WACrB,IAAK,OACL,IAAK,cACHK,EAAWtuB,KACTirB,GAAiB,eACjBA,GAAiB,eACjBA,GAAiB,mBAEnB,MACF,IAAK,WACHqD,EAAWtuB,KACTirB,GAAiB,cACjBA,GAAiB,wBACjBA,GAAiB,mBAEnB,MACF,IAAK,WACHqD,EAAWtuB,KACTirB,GAAiB,gBACjBA,GAAiB,eACjBA,GAAiB,yBAEnB,MACF,QACEqD,EAAWtuB,KACTirB,GAAiB,cACjBA,GAAiB,eACjBA,GAAuB,MAK7B,MAAMsD,EAAmB7tB,OAAOY,QAAQ6rB,GACrCnsB,KAAK,EAAC,CAAGyG,IAAI,CAAGC,KAAOA,EAAID,GAC3BjP,MAAM,EAAG,GACT9E,IAAI,EAAEkD,KAAQq0B,GAAiBr0B,IAC/BgK,OAAO+sB,SAEV,MAAO,IAAIW,KAAeC,GAAkB/1B,MAAM,EAAG,IACpD,CAAClC,EAAgB62B,IAGdH,EAAiB/iB,cAAYlS,MAAM0H,EAAa4rB,KACpD,MAAM1rB,EAAUsrB,GAAiBxrB,GACjC,IAAKE,EACH,MAAM,IAAI3J,MAAM,sBAAsByJ,KAGxC,IACE,MAAMI,QAAeF,EAAQyrB,QAAQC,EAAS/0B,GAQ9C,OALA82B,EAAgB/0B,IAAI,IACfA,EACHoH,CAACA,IAAepH,EAAKoH,IAAgB,GAAK,KAGrCI,CACT,CAAE,MAAOnN,GAEP,MAAMA,CACR,GACC,CAAC4D,IAGE42B,EAAiBjjB,cAAY,CAACukB,EAAW7sB,KACxCA,EAAM1J,QAEXs1B,EAAgBl1B,IAAI,IACfA,EACHm2B,CAACA,GAAY,IACRn2B,EAAKm2B,GACRC,QAAS,IAAKp2B,EAAKm2B,IAAYC,SAAW,GAAK9sB,GAAOnJ,UACtDk2B,SAAU33B,KAAKoB,WAGlB,IAGGw2B,EAAuB1kB,cAAY,KACvC,MAAM5I,EAAa,GAOnB,OANAX,OAAOyG,OAAO8jB,IAAkB1pB,QAAQ5B,IACjC0B,EAAW1B,EAAQtC,YACtBgE,EAAW1B,EAAQtC,UAAY,IAEjCgE,EAAW1B,EAAQtC,UAAU2C,KAAKL,KAE7B0B,GACN,IAWH,OARA3J,YAAU,KACR6mB,aAAaG,QAAQ,eAAgBrU,KAAKC,UAAU6iB,KACnD,CAACA,IAEJz1B,YAAU,KACR6mB,aAAaG,QAAQ,kBAAmBrU,KAAKC,UAAUgjB,KACtD,CAACA,IAEG,CACLP,iBACAC,iBACAC,wBACA0B,uBACAzB,iBACAM,uBACAoB,gBAAiB3D,GACjBkC,eACAG,iBC1dEuB,CAAmBv4B,GAGjBw4B,EAAgBC,UAAQ,KAC5B,IAAKptB,EAAM1J,OAAQ,CAuBjB,MAAO,IArBQo0B,EAAe7zB,MAAM,EAAG,GAAG9E,IAAImN,IAAA,IAAaA,EAAKxD,SAAU,eACvD4vB,IAAwBz0B,MAAM,EAAG,GAAG9E,IAAImN,IAAA,IAAaA,EAAKxD,SAAU,kBACvE,CACd,CACEzG,GAAI,UACJ8U,MAAO,uBACPvO,YAAa,6CACbrE,KAAMM,EACNiE,SAAU,UACV8tB,SAAU,CAAC,MAAO,YAAa,QAAS,QAE1C,CACEv0B,GAAI,uBACJ8U,MAAO,2BACPvO,YAAa,6CACbrE,KAAMI,EACNmE,SAAU,UACV8tB,SAAU,CAAC,cAAe,WAAY,OAAQ,iBAKpD,CAEA,OAAO4B,EAAeprB,IACrB,CAACA,EAAO0qB,EAAgBU,EAAgBE,IAG3Cv1B,YAAU,KACRi1B,EAAiB,IAChB,CAACmC,IAGJp3B,YAAU,KACJtB,GAAUqB,EAASE,UACrBF,EAASE,QAAQoS,QACjB0iB,EAAS,IACTE,EAAiB,KAElB,CAACv2B,IAGJsB,YAAU,KACR,IAAKtB,EAAQ,OAEb,MAAM6zB,EAAiB1uB,IAErB,GAAI,CAAC,YAAa,UAAW,QAAS,UAAUwhB,SAASxhB,EAAEG,KACzD,OAAQH,EAAEG,KACR,IAAK,YACHH,EAAEK,iBACF+wB,EAAiBt0B,GAAQ6M,KAAKsC,IAAInP,EAAO,EAAGy2B,EAAcj0B,OAAS,IACnE,MACF,IAAK,UACHU,EAAEK,iBACF+wB,KAAyBznB,KAAKuB,IAAIpO,EAAO,EAAG,IAC5C,MACF,IAAK,QACHkD,EAAEK,iBACEkzB,EAAcpC,IAChBsC,EAAqBF,EAAcpC,IAErC,MACF,IAAK,SACHnxB,EAAEK,iBACFmqB,SASN,GAAc,QAAVxqB,EAAEG,KAAiBoxB,EAAUn1B,QAAS,CACxC,MAAMs3B,EAAqB,CACzB,UACA,yBACA,2BACA,wBACA,yBACA,mCACArtB,KAAK,KACDstB,EAAa7qB,MAAMgY,KAAKyQ,EAAUn1B,QAAQ+gB,iBAAiBuW,IAC9DruB,WAAcuuB,EAAGxS,aAAa,cAAgBwS,EAAGpV,aAAa,gBACjE,GAA0B,IAAtBmV,EAAWr0B,OAAc,OAE7B,MAAMu0B,EAAQF,EAAW,GACnBG,EAAOH,EAAWA,EAAWr0B,OAAS,GACtCy0B,EAASpjB,SAASqjB,cAEnBh0B,EAAEI,UAAY2zB,IAAWD,EAGnB9zB,EAAEI,UAAY2zB,IAAWF,IAClC7zB,EAAEK,iBACFyzB,EAAKtlB,UAJLxO,EAAEK,iBACFwzB,EAAMrlB,QAKV,GAIF,OADAmC,SAAS0G,iBAAiB,UAAWqX,GAC9B,IAAM/d,SAASke,oBAAoB,UAAWH,IACpD,CAAC7zB,EAAQs2B,EAAeoC,EAAe/I,IAG1C,MAAMiJ,EAAuBj3B,MAAM4H,IACjC,IAEEwJ,EAAkB9Q,GAAQ,CAACsH,KAAYtH,EAAKG,MAAM,EAAG,KAGrD00B,EAAevtB,EAAQ/I,GAAI+K,GAG3B,MAAM9B,QAAemtB,EAAertB,EAAQ/I,GAAI+I,EAAQtM,QAGpD+4B,GACFA,EAAiBzsB,EAASE,GAI5BkmB,GACF,OAASrzB,GAGT,GAyBI88B,EAAoBnyB,IACxB,OAAQA,GACN,IAAK,SAAU,MAAO,gBACtB,IAAK,YAAa,MAAO,iBACzB,IAAK,UAAW,MAAO,mBACvB,IAAK,aAWL,QAAS,MAAO,iBAVhB,IAAK,WAAY,MAAO,kBACxB,IAAK,OAAQ,MAAO,kBACpB,IAAK,SAAU,MAAO,iBACtB,IAAK,SAAU,MAAO,kBACtB,IAAK,SAAU,MAAO,gBACtB,IAAK,gBAAiB,MAAO,gBAC7B,IAAK,aAAc,MAAO,eAC1B,IAAK,WAAY,MAAO,gBACxB,IAAK,WAAY,MAAO,iBACxB,IAAK,OAAQ,MAAO,kBAMlBoyB,EAAiB,CAACrW,EAAMzX,KAC5B,IAAKA,EAAM1J,OAAQ,OAAOmhB,EAE1B,MAAMsW,EAAQ,IAAIC,OAAO,IAAIhuB,EAAMiuB,QAAQ,sBAAuB,WAAY,MAG9E,OAFcxW,EAAKnZ,MAAMyvB,GAEZh8B,IAAI,CAAC0M,EAAMrF,IACtB20B,EAAMG,KAAKzvB,GACT7G,MAAC,QAAiBC,UAAU,+CACzBC,SAAA2G,GADQrF,GAGTqF,IAIR,OAAKhK,EAEE05B,qBACJp1B,EAAA,CACCjB,SAAAF,MAACI,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBG,QAAS,CAAEH,QAAS,GACpBK,KAAM,CAAEL,QAAS,GACjBN,UAAU,4FACVa,QAAS0rB,EAETtsB,SAAAC,OAACC,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGC,MAAO,IAAMC,OACpCC,QAAS,CAAEH,QAAS,EAAGC,MAAO,EAAGC,EAAG,GACpCG,KAAM,CAAEL,QAAS,EAAGC,MAAO,IAAMC,OACjCgT,WAAY,CAAEnW,KAAM,SAAUoW,SAAU,IACxCzT,UAAU,+FACV6R,KAAK,SACL,aAAW,OACX,kBAAgB,wBAChBjQ,IAAK0xB,EACLzyB,QAAUkB,GAAMA,EAAEkQ,kBAGlBhS,SAAA,CAAAC,OAAC,OAAIF,UAAU,oEACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,6BACbC,SAAAF,MAACw2B,GAAQpd,KAAM,GAAInZ,UAAU,iBAE/BE,OAAC,OAAIF,UAAU,SACbC,SAAA,CAAAF,MAAC,MAAG3C,GAAG,wBAAwB4C,UAAU,+BAA+BC,SAAA,oBACxEF,MAAC,KAAEC,UAAU,yBAAyBC,SAAA,wDAExCC,OAAC,OAAIF,UAAU,iDACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,yDAAyDC,SAAA,QACxEF,MAAC,QAAKE,SAAA,mBAKVC,OAAC,OAAIF,UAAU,yCACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,WACbC,SAAA,CAAAF,MAACoyB,EAAA,CAAOhZ,KAAM,GAAInZ,UAAU,sEAC5BD,MAAC,SACC6B,IAAK3D,EACLZ,KAAK,OACLwE,MAAOsG,EACPrG,SAAWC,GAAMkxB,EAASlxB,EAAEC,OAAOH,OACnCQ,YAAY,2DACZrC,UAAU,gMAKZmI,GACAjI,OAAC,OAAIF,UAAU,4BACbC,SAAA,CAAAF,MAAC,QAAKC,UAAU,yBAAyBC,SAAA,SACxC,CAAC,mBAAoB,0BAA2B,gBAAiB,qBAAqB/F,IAAKs8B,GAC1Ft2B,OAAC,UAECW,QAAS,IAAMoyB,EAASuD,GACxBx2B,UAAU,4FACXC,SAAA,KACQu2B,EAAI,MAJNA,UAYfz2B,MAAC,OAAIC,UAAU,2BAA2B4B,IAAKyxB,EAC5CpzB,SAAyB,IAAzBq1B,EAAcj0B,OACbnB,OAAC,OAAIF,UAAU,kBACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,wFACbC,SAAAF,MAACoyB,GAAOhZ,KAAM,GAAInZ,UAAU,qBAE9BD,MAAC,MAAGC,UAAU,kCAAkCC,SAAA,sBAChDF,MAAC,KAAEC,UAAU,yBAAyBC,SAAA,kGAKvC,OAAID,UAAU,OACZC,SAAAq1B,EAAcp7B,IAAI,CAACiM,EAAS5E,KAC3B,MAAMk1B,EA7IE,CAAC5yB,IACvB,OAAQA,GACN,IAAK,SAAU,OAAO6yB,EACtB,IAAK,YAAa,OAAOC,EACzB,IAAK,UAAW,OAAOj3B,EACvB,IAAK,aAAc,OAAOk3B,EAC1B,IAAK,WAAY,OAAOh3B,EACxB,IAAK,OAAQ,OAAO8xB,EACpB,IAAK,SAAU,OAAOre,EACtB,IAAK,SAAU,OAAO+e,EACtB,IAAK,SAAU,OAAOtyB,EACtB,IAAK,gBAAiB,OAAO+2B,EAC7B,IAAK,aAAc,OAAO9iB,EAC1B,IAAK,WAAY,OAAO+iB,EACxB,IAAK,WAAY,OAAOrE,EACxB,IAAK,OAAQ,OAAOC,EACpB,QAAS,OAAO6D,IA6HiBQ,CAAgB5wB,EAAQtC,UACvCmzB,EAAc7wB,EAAQ7G,KACtB23B,EAAa11B,IAAU2xB,EAE7B,OACEhzB,OAACC,EAAOC,IAAP,CAECC,QAAS,CAAEC,QAAS,EAAGE,EAAG,IAC1BC,QAAS,CAAEH,QAAS,EAAGE,EAAG,GAC1BgT,WAAY,CAAE0jB,MAAe,IAAR31B,GACrBvB,UAAW,iFACTi3B,EACI,wCACA,qBAENplB,KAAK,SACLC,SAAU,EACV,gBAAemlB,EACfp2B,QAAS,IAAM20B,EAAqBrvB,GACpCgxB,QAAS,IAAMhE,EAAiB5xB,GAChCwQ,UAAYhQ,IACI,UAAVA,EAAEG,MACJH,EAAEK,iBACFozB,EAAqBrvB,KAKzBlG,SAAA,CAAAF,MAAC,OACCC,UAAW,qBACTi3B,EAAa,cAAgB,gBAG/Bh3B,SAAAF,MAAC02B,GAAatd,KAAM,GAAInZ,UAAWg2B,EAAiB7vB,EAAQtC,cAI7DmzB,GACCj3B,MAAC,OACCC,UAAW,mBACTi3B,EAAa,cAAgB,gBAG/Bh3B,SAAAF,MAACi3B,EAAA,CACC7d,KAAM,GAAInZ,UACRi3B,EAAa,gBAAkB,qBAOvC/2B,OAAC,OAAIF,UAAU,iBACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,+BACbC,SAAA,CAAAF,MAAC,MACCC,UAAW,yBACTi3B,EAAa,gBAAkB,kBAGhCh3B,SAAAg2B,EAAe9vB,EAAQ+L,MAAO/J,KAEhChC,EAAQwqB,UACP5wB,MAAC,OAAIC,UAAU,0BACZC,SAAAkG,EAAQwqB,SAASlqB,MAAM,KAAKvM,IAAI,CAACgI,EAAKk1B,IACrCr3B,MAAC,OAAcC,UAAU,4DACtBC,SAAAiC,GADOk1B,SAOlBr3B,MAAC,KACCC,UAAW,qBACTi3B,EAAa,gBAAkB,kBAGhCh3B,SAAAg2B,EAAe9vB,EAAQxC,YAAawE,KAIvCjI,OAAC,OAAIF,UAAU,+BACbC,SAAA,CAAAF,MAAC,QACCC,UAAW,qCACTi3B,EAAa,4BAA8B,+BAG5Ch3B,SAAAkG,EAAQtC,WAEVsC,EAAQquB,YACPt0B,OAAC,QAAKF,UAAU,yBAAyBC,SAAA,SACjCkG,EAAQquB,WAAW,YAG5BruB,EAAQkxB,OACPt3B,MAAC,QAAKC,UAAU,+DAA+DC,SAAA,cAQpFg3B,GACCl3B,MAACI,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGg3B,GAAG,IAC1B72B,QAAS,CAAEH,QAAS,EAAGg3B,EAAG,GAC1Bt3B,UAAU,gBAEVC,SAAAF,MAAC62B,EAAA,CAAWzd,KAAM,SAtGjB,GAAGhT,EAAQ/I,MAAMmE,WAiHlCrB,OAAC,OAAIF,UAAU,2GACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,yDAAyDC,SAAA,OACxEF,MAAC,QAAKE,SAAA,gBAERC,OAAC,OAAIF,UAAU,0BACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,yDAAyDC,SAAA,UACxEF,MAAC,QAAKE,SAAA,kBAGVC,OAAC,OAAIF,UAAU,iBACZC,SAAA,CAAAq1B,EAAcj0B,OAAO,WAAkC,IAAzBi0B,EAAcj0B,OAAe,IAAM,GAAG,0BAM/EqR,SAASK,MA7NS,MCtOTwkB,GAAwB,EAAG36B,SAAQ2vB,cAC9C,MAAOiL,EAAgBC,GAAqBt6B,WAAS,YAC/C2zB,uBAAEA,EAAAK,eAAwBA,GAAmBnB,KAEnD,IAAKpzB,EAAQ,OAAO,KAEpB,MAAM86B,EAAY5G,IAEZjpB,EAAa,CACjB,CAAEzK,GAAI,UAAWoC,MAAO,UAAWF,KAAMi3B,GACzC,CAAEn5B,GAAI,aAAcoC,MAAO,aAAcF,KAAM6yB,GAC/C,CAAE/0B,GAAI,WAAYoC,MAAO,WAAYF,KAAMyU,GAC3C,CAAE3W,GAAI,OAAQoC,MAAO,OAAQF,KAAMq4B,GACnC,CAAEv6B,GAAI,OAAQoC,MAAO,OAAQF,KAAMi3B,GACnC,CAAEn5B,GAAI,QAASoC,MAAO,eAAgBF,KAAMyU,IAG9C,OAAOuiB,qBACJ,OAAIt2B,UAAU,6EACbC,SAAAC,OAAC,OAAIF,UAAU,mFAEbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,kEACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAAC43B,EAAA,CAAa33B,UAAU,0BACxBD,MAAC,MAAGC,UAAU,uCAAuCC,SAAA,0BAEvDF,MAAC,UACCc,QAAS0rB,EACTvsB,UAAU,wEAEVC,SAAAF,MAACiB,EAAA,CAAEhB,UAAU,iBAIjBE,OAAC,OAAIF,UAAU,2BAEbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,6DACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,MACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,0CAA0CC,SAAA,qBACvD,OAAID,UAAU,YACZC,SAAA4H,EAAW3N,IAAI2J,IACd,MAAMsY,EAAOtY,EAASvE,KAChBs4B,EAAgBF,EAAU7zB,EAASzG,KAAKiE,QAAU,EAExD,OACEnB,OAAC,UAECW,QAAS,IAAM42B,EAAkB5zB,EAASzG,IAC1C4C,UAAW63B,EACT,0FACAL,IAAmB3zB,EAASzG,GACxB,4BACA,qCAGN6C,SAAA,CAAAC,OAAC,OAAIF,UAAU,8BACbC,SAAA,CAAAF,MAACoc,EAAA,CAAKnc,UAAU,YAChBD,MAAC,QAAME,SAAA4D,EAASrE,WAElBO,MAAC,QAAKC,UAAU,yBAA0BC,SAAA23B,MAbrC/zB,EAASzG,WAqBxB8C,OAAC,OAAIF,UAAU,gCACbC,SAAA,CAAAF,MAAC,MAAGC,UAAU,0CAA0CC,SAAA,aACxDC,OAAC,MAAGF,UAAU,mCACZC,SAAA,CAAAF,MAAC,MAAGE,SAAA,6CACJF,MAAC,MAAGE,SAAA,0CACJF,MAAC,MAAGE,SAAA,oDACJF,MAAC,MAAGE,SAAA,qDAMT,OAAID,UAAU,yBACbC,SAAAC,OAAC,OAAIF,UAAU,MACbC,SAAA,CAAAC,OAAC,OAAIF,UAAU,OACbC,SAAA,CAAAC,OAAC,MAAGF,UAAU,4CACXC,SAAA,CAAA4H,EAAW8sB,KAAKlQ,GAAKA,EAAErnB,KAAOo6B,IAAiBh4B,MAAM,gBAExDU,OAAC,KAAEF,UAAU,yBACVC,SAAA,CAAAy3B,EAAUF,IAAiBn2B,QAAU,EAAE,8CAI3Cq2B,EAAUF,IAAiBn2B,OAAS,EACnCtB,MAAC,OAAIC,UAAU,YACZC,WAAUu3B,GAAgBt9B,IAAI,CAACy2B,EAAUpvB,IACxCrB,OAAC,OAECF,UAAU,oGAEVC,SAAA,CAAAC,OAAC,OAAIF,UAAU,SACbC,SAAA,CAAAF,MAAC,OAAIC,UAAU,kCACZC,SAAA0wB,EAAShtB,cAEXgtB,EAAS3uB,QACR9B,OAAC,OAAIF,UAAU,yBAAyBC,SAAA,YAC7B0wB,EAAS3uB,UAGrB2uB,EAASpiB,SACRrO,OAAC,OAAIF,UAAU,yBAAyBC,SAAA,aAC5B0wB,EAASpiB,cAIzBxO,MAAC,OAAIC,UAAU,OACbC,SAAAF,MAAC,OAAIC,UAAU,8HACZC,SAAAkxB,EAAeR,EAASzuB,WApBxB,GAAGyuB,EAASzuB,OAAOX,QA2B9BrB,OAAC,OAAIF,UAAU,oBACbC,SAAA,CAAAF,MAAC43B,EAAA,CAAa33B,UAAU,0CACxBD,MAAC,KAAEC,UAAU,iBAAiBC,SAAA,6DAQvC,OAAID,UAAU,kDACbC,SAAAC,OAAC,OAAIF,UAAU,2DACbC,SAAA,CAAAC,OAAC,OAAID,SAAA,UACGF,MAAC,OAAIC,UAAU,qDAAqDC,SAAA,QAAS,sBAEpF,OAAIA,SAAA,WACKiH,OAAOyG,OAAO+pB,GAAWI,OAAOz2B,OAAO,0BAMzDqR,SAASK,OC/IPglB,GAA2BC,kBAEpBC,GAA8B,KACzC,MAAMn5B,EAAUo5B,aAAWH,IAC3B,IAAKj5B,EACH,MAAM,IAAItC,MAAM,6EAElB,OAAOsC,GAGIq5B,GAA4B,EAAGl4B,eAC1C,MAAMyE,EAAW0zB,KACVC,EAAoBC,GAAyBn7B,YAAS,IACtDo7B,EAAmBC,GAAwBr7B,YAAS,IACpD01B,EAAgB4F,GAAqBt7B,WAAS,KAC9CL,EAAgB47B,GAAqBv7B,WAAS,IA6ErD6yB,GA1EwB,CACtB,uBAAwB,IAAMsI,GAAsB,GACpD5zB,SAAaisB,GAAajsB,EAASisB,EAAS3uB,QAC5C,aAAc,KACZ0C,EAAS,qBAETwiB,WAAW,KACT,MAAM3R,EAAQ,IAAIojB,YAAY,oBAC9B9iB,OAAO+iB,cAAcrjB,IACpB,MAEL,aAAc,KACZ7Q,EAAS,qBACTwiB,WAAW,KACT,MAAM3R,EAAQ,IAAIojB,YAAY,oBAC9B9iB,OAAO+iB,cAAcrjB,IACpB,MAELsjB,KAAQ,KACN,MAAMtjB,EAAQ,IAAIojB,YAAY,iBAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,cAAe,KACb,MAAMA,EAAQ,IAAIojB,YAAY,eAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,cAAe,KACb,MAAMA,EAAQ,IAAIojB,YAAY,eAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,cAAe,KACb,MAAMA,EAAQ,IAAIojB,YAAY,eAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,uBAAwB,KACtB,MAAMA,EAAQ,IAAIojB,YAAY,4BAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,cAAe,KACb,MAAMA,EAAQ,IAAIojB,YAAY,mBAC9B9iB,OAAO+iB,cAAcrjB,IAEvB,kBAAmB,KACjB,MAAMA,EAAQ,IAAIojB,YAAY,2BAC9B9iB,OAAO+iB,cAAcrjB,IAEvBrS,KAAQ,IAAMs1B,GAAqB,GACnC,gBAAkB7H,IAChBjsB,EAAS,2BAA2BisB,EAASpiB,YAE/C,sBAAuB,KACrB7J,EAAS,uBACTwiB,WAAW,KACT,MAAM3R,EAAQ,IAAIojB,YAAY,aAAc,CAAEG,OAAQ,CAAEC,IAAK,aAC7DljB,OAAO+iB,cAAcrjB,IACpB,MAEL,sBAAuB,KACrB7Q,EAAS,uBACTwiB,WAAW,KACT,MAAM3R,EAAQ,IAAIojB,YAAY,aAAc,CAAEG,OAAQ,CAAEC,IAAK,kBAC7DljB,OAAO+iB,cAAcrjB,IACpB,MAEL,uBAAwB,KACtB7Q,EAAS,uBACTwiB,WAAW,KACT,MAAM3R,EAAQ,IAAIojB,YAAY,aAAc,CAAEG,OAAQ,CAAEC,IAAK,YAC7DljB,OAAO+iB,cAAcrjB,IACpB,QASP,MAAMyjB,EAAoBvoB,cAAatK,IACrCsyB,EAAkB55B,IAChB,MAAMo6B,EAAWp6B,EAAKuI,UAAcC,EAAIjK,KAAO+I,EAAQ/I,IACvD,MAAO,CAAC+I,KAAY8yB,GAAUj6B,MAAM,EAAG,MAExC,IAEGk6B,EAAe,CACnBb,mBAAoB,IAAMC,GAAsB,GAChDC,kBAAmB,IAAMC,GAAqB,GAE9ChF,eAAgB,OAChBX,iBACAsG,qBAAuBC,GAAQV,EAAkB75B,IAAA,IAAcA,KAASu6B,MAG1E,OACEl5B,OAAC63B,GAAyBsB,SAAzB,CAAkCx3B,MAAOq3B,EACvCj5B,SAAA,CAAAA,EAGDF,MAAC4yB,GAAA,CACC/1B,OAAQy7B,EACR9L,QAAS,IAAM+L,GAAsB,GACrC1F,iBAAkBoG,EAClBl8B,iBACA+1B,mBAIF9yB,MAACw3B,GAAA,CACC36B,OAAQ27B,EACRhM,QAAS,IAAMiM,GAAqB,SCxItCc,GAAc,KAClB,MAAMC,SAAEA,GAAaC,IAMrB,OAJAt7B,YAAU,KACR2X,OAAO4jB,SAAS,EAAG,IAClB,CAACF,IAEG,MCRHG,GAAiB,EACrBvgB,OAAO,UACPnZ,YAAY,GACZ4f,OAAO,aACP+Z,YAAW,EACXC,UAAU,cAEV,MAOMC,EAAiB,CACrBC,QAAS,eACTC,UAAW,iBACXC,MAAO,wBACPC,MAAO,cAUT,cACG,OAAIj6B,UAAW63B,EAAG,sDAAuD73B,GACxEC,SAAA,CAAAF,MAAC,OACCC,UAAW63B,EACT,yEAzBY,CAClBqC,GAAI,UACJC,QAAS,UACTC,GAAI,YACJC,GAAI,aAsBclhB,GACZ0gB,EAAeD,MAGlBD,GACC55B,MAAC,KAAEC,UAAW63B,EAAG,cAjBC,CACtBqC,GAAI,UACJC,QAAS,UACTC,GAAI,YACJC,GAAI,WAagDlhB,GAAO0gB,EAAeD,IAAY35B,SAAA2f,QC9BpF0a,GAA0BC,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,uBAAmCk1B,oEAC/EC,GAA2BF,OAAK,WAAMj1B,OAAO,yFAC7Co1B,GAAmCH,OACvC,IAAA1lB,GAAA,IAAMvP,OAAO,uBAA6Ck1B,yDAEtDG,GAAgBJ,OAAK,WAAMj1B,OAAO,+BAA0Ck1B,4DAC5EI,GAAoBL,OAAK,WAAMj1B,OAAO,mCAA8Ck1B,wCACpFK,GAAoBN,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,qCAA6Bk1B,wCACnEM,GAAkBP,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,iCAAyBk1B,qEAC7DO,GAAqBR,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,oCAA4Bk1B,yDACnEQ,GAAWT,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,0BAAkBk1B,yDAC/CS,GAAsBV,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,qCAA6Bk1B,4DACrEU,GAAeX,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,8BAAsBk1B,yDACvDW,GAAmBZ,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,kCAA0Bk1B,gDAC/DY,GAAiBb,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,gCAAwBk1B,4DAC3Da,GAAUd,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,yBAAiBk1B,yDAC7C/H,GAAW8H,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,0BAAkBk1B,4DAC/Cc,GAAaf,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,4BAAoBk1B,yDACnDe,GAAYhB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,2BAAmBk1B,yDACjDgB,GAAoBjB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,oCAA2BwP,KAAA6C,KAAA8jB,GAAAjB,qCACjEkB,GAAsBnB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,qCAAkCk1B,uDAC1EmB,GAASpB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,wBAAgBk1B,yDAC3CoB,GAAMrB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,qBAAak1B,yDACrCqB,GAAOtB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,sBAAck1B,yDACvCsB,GAAevB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,8BAAsBk1B,yDACvDuB,GAAWxB,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,0BAAkBk1B,wCACxBD,OAAK,IAAA1lB,GAAA,IAAMvP,OAAO,sCAAmCk1B,8CAGlF,MAAMwB,GAAqB,KACzB,MAAMvlB,EAAW+iB,IAOjB,OALAt7B,YAAU,KACR,MAAMuK,EAAOgO,EAAS8iB,UAAY9iB,EAAS3R,QAAU,IACrDkP,GAAWsG,cAAc7R,IACxB,CAACgO,EAAS8iB,SAAU9iB,EAAS3R,SAEzB,MAGHm3B,GAAS,UAEVC,EAAA,CACCj8B,SAAAC,OAACya,GAAA,CACC1a,SAAA,CAAAF,MAACu5B,GAAA,UACA0C,GAAA,UACA7D,IACCl4B,SAAAF,MAACo8B,WAAA,CAASC,SAAUr8B,MAAC25B,GAAA,IACnBz5B,SAAAC,OAACm8B,EAAA,CAEDp8B,SAAA,CAAAF,MAACu8B,GAAM7zB,KAAK,IAAIiS,QAAS3a,MAACu6B,eACzBgC,EAAA,CAAM7zB,KAAK,6BAA6BiS,QAAS3a,MAACu6B,eAClDgC,EAAA,CAAM7zB,KAAK,gCAAgCiS,QAAS3a,MAAC06B,SACtD16B,MAACu8B,EAAA,CACC7zB,KAAK,uCACLiS,cAAUggB,GAAA,YAEX4B,EAAA,CAAM7zB,KAAK,kBAAkBiS,QAAS3a,MAAC46B,eACvC2B,EAAA,CAAM7zB,KAAK,uBAAuBiS,QAAS3a,MAAC66B,eAC5C0B,EAAA,CAAM7zB,KAAK,uBAAuBiS,QAAS3a,MAAC86B,eAC5CyB,EAAA,CAAM7zB,KAAK,uBAAuBiS,QAAS3a,MAACg7B,eAC5CuB,EAAA,CAAM7zB,KAAK,aAAaiS,QAAS3a,MAACi7B,eAClCsB,EAAA,CAAM7zB,KAAK,mBAAmBiS,QAAS3a,MAACo7B,eACxCmB,EAAA,CAAM7zB,KAAK,mBAAmBiS,QAAS3a,MAACq7B,eACxCkB,EAAA,CAAM7zB,KAAK,WAAWiS,QAAS3a,MAACs7B,eAChCiB,EAAA,CAAM7zB,KAAK,YAAYiS,QAAS3a,MAAC0yB,eACjC6J,EAAA,CAAM7zB,KAAK,eAAeiS,QAAS3a,MAACu7B,eACpCgB,EAAA,CAAM7zB,KAAK,aAAaiS,QAAS3a,MAACw7B,eAClCe,EAAA,CAAM7zB,KAAK,sBAAsBiS,QAAS3a,MAACy7B,eAC3Cc,EAAA,CAAM7zB,KAAK,wBAAwBiS,QAAS3a,MAACk7B,eAC7CqB,EAAA,CAAM7zB,KAAK,aAAaiS,QAAS3a,MAACk7B,eAClCqB,EAAA,CAAM7zB,KAAK,UAAUiS,QAAS3a,MAAC47B,eAC/BW,EAAA,CAAM7zB,KAAK,OAAOiS,QAAS3a,MAAC67B,eAC5BU,EAAA,CAAM7zB,KAAK,QAAQiS,QAAS3a,MAAC87B,eAC7BS,EAAA,CAAM7zB,KAAK,gBAAgBiS,QAAS3a,MAAC+7B,eACrCQ,EAAA,CAAM7zB,KAAK,UAAUiS,QAAS3a,MAACm7B,eAC/BoB,EAAA,CAAM7zB,KAAK,oBAAoBiS,QAAS3a,MAAC+6B,eACzCwB,EAAA,CAAM7zB,KAAK,yBAAyBiS,QAAS3a,MAAC27B,UACQ,QAGtDY,EAAA,CAAM7zB,KAAK,IAAIiS,QAAS3a,MAACg8B,qBChFtC,SAASH,KACP,MAAMtP,UAAEA,EAAAiQ,cAAWA,GCTd,WACL,MAAOjQ,EAAWkQ,GAAgBr/B,YAAS,GAErCs/B,EAAkBhsB,cAAY,KAClC+rB,EAAa39B,IAASA,IACrB,IAEG69B,EAAgBjsB,cAAY,KAChC+rB,GAAa,IACZ,IAEGD,EAAgB9rB,cAAY,KAChC+rB,GAAa,IACZ,IA0CH,OAvCAt+B,YAAU,KACR,MAAMuyB,EAAiBlb,KAChBA,EAAM6a,SAAW7a,EAAM4a,UAAY5a,EAAMpT,UAA0B,MAAdoT,EAAMrT,MAC9DqT,EAAMnT,iBACNq6B,MAMJ,OAFA/pB,SAAS0G,iBAAiB,UAAWqX,GAE9B,KACL/d,SAASke,oBAAoB,UAAWH,KAEzC,CAACgM,IAGJv+B,YAAU,OAqBP,IAEI,CACLouB,YACAmQ,kBACAC,gBACAH,gBAEJ,CDpDuCI,IAC9BC,EAAmBC,GAAwB1/B,YAAS,IACpDL,EAAgB47B,GAAqBv7B,WAAS,CACnDsL,KAAMoN,OAAOY,SAAS8iB,SACtBz9B,WAAA,IAAeyB,MAAOuV,iBAEjB/V,EAAe+/B,GAAqB3/B,WAAS,OAC7CH,EAAY+/B,GAAkB5/B,WAAS,MAG9Ce,YAAU,KACRyW,MACC,IAGHzW,YAAU,KACRw6B,EAAkB,CAChBjwB,KAAMoN,OAAOY,SAAS8iB,SACtBz9B,WAAA,IAAeyB,MAAOuV,iBAEvB,CAAC+C,OAAOY,SAAS8iB,WAQpB,OACEx5B,MAAC4a,GAAA,CACC1a,SAAAC,OAAC0vB,GAAA,CACC3vB,SAAA,CAAAF,MAACk8B,GAAA,IACDl8B,MAACssB,GAAA,CACCC,YACAC,QAASgQ,IAEXx8B,MAACpD,GAAA,CACCC,OAAQggC,EACR//B,SAAU,IAAMggC,EAAqBh+B,IAASA,GAC9C/B,iBACAC,gBACAC,eAGF+C,MAACsP,GAAA,CACCvS,iBACAC,gBACAC,aACAsS,WAxBkB0tB,IACxBnnB,OAAOY,SAAS7D,KAAOoqB,MA0BjBJ,GACA78B,MAAC,UACCc,QAAS,IAAMg8B,GAAqB,GACpC78B,UAAU,0LAEVC,SAAAF,MAAC,OACCC,UAAU,UACV6b,KAAK,OACLC,OAAO,eACPF,QAAQ,YAER3b,SAAAF,MAAC,QACCkc,cAAc,QACdC,eAAe,QACfH,YAAa,EACblgB,EAAE,6NAQlB,CEpFA,MAKaohC,GAAYC,EAAY,CACnCl1B,KAAM,OACNm1B,aAPmB,CACnBn1B,KAAM,QACNo1B,iBAAiB,GAMjBC,SAAU,CACRC,MAAO,CAACtiB,EAAOvb,KACbub,EAAMhT,KAAOvI,EAAO89B,QAAQv1B,KAC5BgT,EAAMoiB,iBAAkB,GAE1BI,OAASxiB,IACPA,EAAMhT,KAAO,QACbgT,EAAMoiB,iBAAkB,OAKjBE,MAAEA,GAAKE,OAAEA,IAAWP,GAAU99B,QClB9Bs+B,GAAQC,GAAe,CAClCC,QAAS,CACPC,KDkBWX,GAAUU,qBEmZzB,MAAME,GAAuB,IAta7B,MACE,WAAAtlC,GACEC,KAAKslC,eAAgB,EACrBtlC,KAAKsxB,OAAS,KACdtxB,KAAKoxB,UAAYpxB,KAAKulC,oBACtBvlC,KAAK2f,UAAY5a,KAAKoB,MACtBnG,KAAKwlC,WAAa,GAClBxlC,KAAKylC,iBAAmB,GACxBzlC,KAAK0lC,kBAAoB,GAGzB1lC,KAAKwc,MACP,CAEA,IAAAA,GACE,IAAIxc,KAAKslC,cAET,IAEEtlC,KAAK2lC,aAGL3lC,KAAK4lC,sBAGL5lC,KAAK6lC,6BAGL7lC,KAAK8lC,4BAGL9lC,KAAK+lC,oBAEL/lC,KAAKslC,eAAgB,CAGvB,OAAS5kC,GAET,CACF,CAEA,UAAAilC,GACwB,oBAAXtoB,QAA0BA,OAAOd,SAC1Cc,OAAOd,OAAOC,KAAK,CACjBC,IAAKupB,GAAYC,gBACjBvpB,YAAaspB,GAAYE,cAAgB,cACzCrpB,iBAAkB,GAClBC,WAAY,CAACC,EAAOopB,IAEI,CACpB,qCACA,uCACA,0BAGgBhb,KAAKib,GACrBrpB,EAAMspB,WAAWlxB,SAAS,IAAI9L,OAAO0hB,SAASqb,IAEvC,KAGFrpB,IAKP/c,KAAKsxB,QACPjU,OAAOd,OAAO+pB,QAAQ,CAAE1hC,GAAI5E,KAAKsxB,SAGvC,CAEA,mBAAAsU,GAEEvoB,OAAOuD,iBAAiB,QAAU7D,IAChC/c,KAAKumC,SAAS,CACZ1hC,KAAM,aACNmB,QAAS+W,EAAM/W,QACf+a,SAAUhE,EAAMgE,SAChBC,OAAQjE,EAAMiE,OACdC,MAAOlE,EAAMkE,MACbQ,MAAO1E,EAAMrc,OAAO+gB,MACpBne,WAAA,IAAeyB,MAAOuV,kBAK1B+C,OAAOuD,iBAAiB,qBAAuB7D,IAC7C/c,KAAKumC,SAAS,CACZ1hC,KAAM,UACNmB,QAAS+W,EAAM+D,QAAQ9a,SAAW,8BAClCyb,MAAO1E,EAAM+D,QAAQW,MACrBne,WAAA,IAAeyB,MAAOuV,kBAK1B+C,OAAOuD,iBAAiB,QAAU7D,IAC5BA,EAAMvT,SAAW6T,QACnBrd,KAAKumC,SAAS,CACZ1hC,KAAM,WACNmB,QAAS,kBAAkB+W,EAAMvT,OAAOkc,YAAY3I,EAAMvT,OAAOqU,KAAOd,EAAMvT,OAAO4Q,OACrF8H,QAASnF,EAAMvT,OAAOkc,QACtB7hB,OAAQkZ,EAAMvT,OAAOqU,KAAOd,EAAMvT,OAAO4Q,KACzC9W,WAAA,IAAeyB,MAAOuV,kBAGzB,EACL,CAEA,0BAAAurB,GAEM,wBAAyBxoB,SAE3B,IAAI2C,oBAAqBoN,IACvB,UAAWnN,KAASmN,EAAUlN,aACvBD,EAAMoN,gBACTrtB,KAAKwmC,eAAe,CAClBxxB,OAAQ,MACR3L,MAAO4W,EAAM5W,MACb/F,WAAA,IAAeyB,MAAOuV,kBAI3B6F,QAAQ,CAAEC,WAAY,CAAC,kBAG1B,IAAIJ,oBAAqBoN,IACvB,MAAM9d,EAAU8d,EAAUlN,aACpByN,EAAYre,EAAQA,EAAQzG,OAAS,GAC3C7I,KAAKwmC,eAAe,CAClBxxB,OAAQ,MACR3L,MAAOskB,EAAUhO,UACjBrc,WAAA,IAAeyB,MAAOuV,kBAEvB6F,QAAQ,CAAEC,WAAY,CAAC,8BAG1B,IAAIJ,oBAAqBoN,IACvB,UAAWnN,KAASmN,EAAUlN,aAC5BlgB,KAAKwmC,eAAe,CAClBxxB,OAAQ,MACR3L,MAAO4W,EAAMuN,gBAAkBvN,EAAMN,UACrCrc,WAAA,IAAeyB,MAAOuV,kBAGzB6F,QAAQ,CAAEC,WAAY,CAAC,kBAI5B/C,OAAOuD,iBAAiB,OAAQ,KAC9B8N,WAAW,KACT,MAAMtT,EAAawE,YAAYiO,iBAAiB,cAAc,GACxD4Y,EAAQ7mB,YAAYiO,iBAAiB,SAE3C7tB,KAAKwmC,eAAe,CAClBxxB,OAAQ,YACR0xB,iBAAkBtrB,EAAWurB,yBAA2BvrB,EAAWwrB,2BACnEC,aAAczrB,EAAWyU,aAAezU,EAAW0rB,eACnDC,WAAYN,EAAMtK,QAAqB,gBAAX7xB,EAAEkF,OAAyBmQ,UACvDqnB,qBAAsBP,EAAMtK,QAAqB,2BAAX7xB,EAAEkF,OAAoCmQ,UAC5Erc,WAAA,IAAeyB,MAAOuV,iBAEvB,IAEP,CAEA,yBAAAwrB,GACE,IAAImB,EAAeliC,KAAKoB,MACpB+gC,GAAW,EAEf,MAAMC,EAAgB,KACpBF,EAAeliC,KAAKoB,MACf+gC,IACHA,GAAW,EACXlnC,KAAKonC,gBAAgB,CACnBviC,KAAM,iBACNvB,WAAA,IAAeyB,MAAOuV,kBAM5B,CAAC,QAAS,SAAU,WAAY,aAAa/K,QAAQwN,IACnD7C,SAAS0G,iBAAiB7D,EAAOoqB,EAAe,CAAE1W,SAAS,MAI7DpQ,YAAY,KACNtb,KAAKoB,MAAQ8gC,EAAe,KAAUC,IACxCA,GAAW,EACXlnC,KAAKonC,gBAAgB,CACnBviC,KAAM,eACNoW,SAAUlW,KAAKoB,MAAQ8gC,EACvB3jC,WAAA,IAAeyB,MAAOuV,kBAGzB,KAGHJ,SAAS0G,iBAAiB,mBAAoB,KAC5C5gB,KAAKonC,gBAAgB,CACnBviC,KAAMqV,SAASmtB,OAAS,cAAgB,eACxC/jC,WAAA,IAAeyB,MAAOuV,kBAK1B+C,OAAOuD,iBAAiB,eAAgB,KACtC5gB,KAAKonC,gBAAgB,CACnBviC,KAAM,cACNyiC,gBAAiBviC,KAAKoB,MAAQnG,KAAK2f,UACnCrc,WAAA,IAAeyB,MAAOuV,gBAExBta,KAAKunC,SAET,CAEA,iBAAAxB,GAEE1lB,YAAY,KACVrgB,KAAKwnC,eAAe,CAClBC,YAAaznC,KAAK0nC,iBAClBC,eAAgB3nC,KAAK4nC,oBACrBtkC,WAAA,IAAeyB,MAAOuV,iBAEvB,IACL,CAGA,QAAAisB,CAASsB,GACP,MAAMC,EAAgB,IACjBD,EACHzW,UAAWpxB,KAAKoxB,UAChBE,OAAQtxB,KAAKsxB,OACbvX,IAAKsD,OAAOY,SAAS7D,KACrBwH,UAAWC,UAAUD,UACrBte,UAAWukC,EAAUvkC,YAAA,IAAiByB,MAAOuV,eAG/Cta,KAAKwlC,WAAWx3B,KAAK85B,GAGjBzqB,OAAOd,QACTc,OAAOd,OAAO+E,iBAAiB,IAAItd,MAAM6jC,EAAU7hC,SAAU,CAC3Dwb,MAAOsmB,IAKP9nC,KAAKwlC,WAAW38B,QAAU,IAC5B7I,KAAK+nC,aAET,CAEA,cAAAvB,CAAewB,GACb,MAAMC,EAAe,IAChBD,EACH5W,UAAWpxB,KAAKoxB,UAChBE,OAAQtxB,KAAKsxB,OACbvX,IAAKsD,OAAOY,SAAS7D,MAGvBpa,KAAKylC,iBAAiBz3B,KAAKi6B,GAGvBjoC,KAAKylC,iBAAiB58B,QAAU,IAClC7I,KAAKkoC,kBAET,CAEA,eAAAd,CAAgBe,GACd,MAAMF,EAAe,IAChBE,EACH/W,UAAWpxB,KAAKoxB,UAChBE,OAAQtxB,KAAKsxB,OACbvX,IAAKsD,OAAOY,SAAS7D,MAGvBpa,KAAK0lC,kBAAkB13B,KAAKi6B,GAGxBjoC,KAAK0lC,kBAAkB78B,QAAU,IACnC7I,KAAKooC,mBAET,CAEA,cAAAZ,CAAea,GACbroC,KAAKsoC,eAAe,cAAe,IAC9BD,EACHjX,UAAWpxB,KAAKoxB,UAChBE,OAAQtxB,KAAKsxB,QAEjB,CAGA,OAAAgV,CAAQhV,EAAQiX,EAAW,IACzBvoC,KAAKsxB,OAASA,EAEVjU,OAAOd,QACTc,OAAOd,OAAO+pB,QAAQ,CAAE1hC,GAAI0sB,KAAWiX,GAE3C,CAGA,WAAAR,GACM/nC,KAAKwlC,WAAW38B,OAAS,IAC3B7I,KAAKsoC,eAAe,cAAetoC,KAAKwlC,YACxCxlC,KAAKwlC,WAAa,GAEtB,CAEA,gBAAA0C,GACMloC,KAAKylC,iBAAiB58B,OAAS,IACjC7I,KAAKsoC,eAAe,mBAAoBtoC,KAAKylC,kBAC7CzlC,KAAKylC,iBAAmB,GAE5B,CAEA,iBAAA2C,GACMpoC,KAAK0lC,kBAAkB78B,OAAS,IAClC7I,KAAKsoC,eAAe,qBAAsBtoC,KAAK0lC,mBAC/C1lC,KAAK0lC,kBAAoB,GAE7B,CAEA,KAAA6B,GACEvnC,KAAK+nC,cACL/nC,KAAKkoC,mBACLloC,KAAKooC,mBACP,CAGA,iBAAA7C,GACE,MAAO,WAAWxgC,KAAKoB,SAAS+M,KAAK4e,SAAS1rB,SAAS,IAAIkI,UAAU,EAAG,IAC1E,CAEA,cAAAo5B,GACE,MAAI,WAAY9nB,YACP,CACLW,eAAgBX,YAAYU,OAAOC,eACnCC,gBAAiBZ,YAAYU,OAAOE,gBACpCC,gBAAiBb,YAAYU,OAAOG,iBAGjC,IACT,CAEA,iBAAAmnB,GACE,MAAI,eAAgB/lB,UACX,CACLmP,cAAenP,UAAU+M,WAAWoC,cACpCC,SAAUpP,UAAU+M,WAAWqC,SAC/BC,IAAKrP,UAAU+M,WAAWsC,KAGvB,IACT,CAEA,oBAAMoX,CAAeE,EAAUvnC,GAC7B,UACQye,MAAM8oB,EAAU,CACpB7mB,OAAQ,OACRrhB,QAAS,CACP,eAAgB,oBAElBia,KAAMlC,KAAKC,UAAUrX,IAEzB,OAASP,GAET,CACF,CAGA,oBAAA+nC,CAAqB/nC,EAAOmiB,EAAW6lB,GACrC1oC,KAAKumC,SAAS,CACZ1hC,KAAM,uBACNmB,QAAStF,EAAMsF,QACfyb,MAAO/gB,EAAM+gB,MACbuB,eAAgBH,EAAUG,eAC1B0lB,UACAplC,WAAA,IAAeyB,MAAOuV,eAE1B,CAGA,iBAAAquB,CAAkBC,EAAatiC,EAAU,IACvCtG,KAAKonC,gBAAgB,CACnBviC,KAAM,gBACNgkC,QAASD,EACTtiC,UACAhD,WAAA,IAAeyB,MAAOuV,eAE1B,CAGA,IAAA2T,CAAKze,GACC,gBAAiB6N,QAAU,SAAUuC,aACvCA,YAAYqO,KAAKze,EAErB,CAEA,OAAA6e,CAAQ7e,EAAMs5B,EAAWC,GACvB,GAAI,gBAAiB1rB,QAAU,YAAauC,YAC1C,IACEA,YAAYyO,QAAQ7e,EAAMs5B,EAAWC,GACrC,MAAM1a,EAAUzO,YAAYopB,iBAAiBx5B,EAAM,WAAW,GAE9DxP,KAAKwmC,eAAe,CAClBxxB,OAAQ,iBACRxF,OACAyL,SAAUoT,EAAQpT,SAClB3X,WAAA,IAAeyB,MAAOuV,eAE1B,OAAS5Z,GAET,CAEJ,GCvZF,IAAIuoC,GAAe,KAEZ,SAASC,KAId,OAHKD,KACHA,GAjBG,WACL,GAAsB,oBAAX5rB,QAA0BA,OAAO8rB,OAAQ,CAClD,MAAMC,EAAQ,IAAIC,WAAW,IAE7B,OADAhsB,OAAO8rB,OAAOG,gBAAgBF,GACvBG,KAAK3wB,OAAO4wB,aAAaC,MAAM,KAAML,GAC9C,CAGA,OAAOl2B,KAAK4e,SAAS1rB,SAAS,IAAIkI,UAAU,EAAG,IACxC4E,KAAK4e,SAAS1rB,SAAS,IAAIkI,UAAU,EAAG,GACjD,CAOmBo7B,IAEVT,EACT,CAuOO,SAASU,KACd,MAAMxlB,EAAa,GAEnB,GAAwB,oBAAbjK,SAA0B,OAAOiK,EAG5C,MAAMylB,EAAgB1vB,SAASwM,iBAAiB,kCAC5CkjB,EAAc/gC,OAAS,GACzBsb,EAAWnW,KAAK,CACdnJ,KAAM,8BACNgR,MAAO+zB,EAAc/gC,OACrBghC,SAAUx3B,MAAMgY,KAAKuf,GAAepjC,MAAM,EAAG,KAKjD,MAAMsjC,EAAe5vB,SAASwM,iBAAiB,sBAC3CojB,EAAajhC,OAAS,GACxBsb,EAAWnW,KAAK,CACdnJ,KAAM,0BACNgR,MAAOi0B,EAAajhC,OACpBuhB,eAAgB,4CAiBpB,OAZwBlQ,SAASwM,iBAAiB,eAClCnX,QAAQkO,IACtB,MAAMI,EAAMJ,EAAOsK,aAAa,QAC5BlK,GAAQA,EAAIxP,WAAW,aAAgBwP,EAAIxP,WAAW,MACxD8V,EAAWnW,KAAK,CACdnJ,KAAM,2BACNgZ,MACAqE,QAASzE,MAKR0G,CACT,CAGO,SAAS4lB,KACU,oBAAb7vB,UAEXA,SAAS0G,iBAAiB,0BAA4B7D,KAoBxD,SAA0BgM,GAExBrJ,MAAM,sBAAuB,CAC3BiC,OAAQ,OACRrhB,QAAS,CACP,eAAgB,oBAElBia,KAAMlC,KAAKC,UAAUyQ,KACpBzL,MAAM5c,MAGX,CAhBMspC,CAdgB,CAChBC,WAAYltB,EAAMktB,WAClBC,kBAAmBntB,EAAMmtB,kBACzBC,eAAgBptB,EAAMotB,eACtBC,YAAartB,EAAMqtB,YACnB9mC,UAAWyB,KAAKoB,MAChByb,UAAWC,UAAUD,UACrB7H,IAAKsD,OAAOY,SAAS7D,QAU3B,CC3TA,MAAMiwB,GAAc1O,QACW,cAA7Bte,OAAOY,SAASqsB,UACa,UAA7BjtB,OAAOY,SAASqsB,UAChBjtB,OAAOY,SAASqsB,SAAS1e,MACvB,2DAIG,SAAS2e,KACd,GAAI,kBAAmB1oB,UAAW,CAEhC,GADkB,IAAI7H,IAAI,IAA0BqD,OAAOY,SAAS7D,MACtDowB,SAAWntB,OAAOY,SAASusB,OACvC,OAGFntB,OAAOuD,iBAAiB,OAAQ,KAC9B,MAAM6pB,EAAQ,SAEVJ,KA2CV,SAAiCI,GAC/B/qB,MAAM+qB,EAAO,CACXnqC,QAAS,CAAE,iBAAkB,YAE5Bgc,KAAM9b,IACL,MAAMkqC,EAAclqC,EAASF,QAAQS,IAAI,gBAEnB,MAApBP,EAASwM,QACO,MAAf09B,QAAuBA,EAAYC,QAAQ,cAE5C9oB,UAAU+oB,cAAcC,MAAMvuB,KAAMwuB,IAClCA,EAAaC,aAAazuB,KAAK,KAC7Be,OAAOY,SAAS+sB,aAIpBC,GAAgBR,KAGnBntB,MAAM,KA8CT4tB,GACE,eACA,0DACA,YA7CJ,CAjEQC,CAAwBV,GACxB5oB,UAAU+oB,cAAcC,MAAMvuB,KAAK,SAInC2uB,GAAgBR,IAGtB,CACF,CAEA,SAASQ,GAAgBR,GACvB5oB,UAAU+oB,cACPQ,SAASX,GACTnuB,KAAMwuB,IAILA,EAAalqB,iBAAiB,cAAe,KAC3C,MAAMyqB,EAAmBP,EAAaQ,WACd,MAApBD,GAIJA,EAAiBzqB,iBAAiB,cAAe,KAChB,cAA3ByqB,EAAiB7oB,QACfX,UAAU+oB,cAAcW,WAsDxC,WACM,iBAAkBluB,QAAsC,YAA5BmuB,aAAaC,YAC3C,IAAID,aAAa,sCAAuC,CACtDjxB,KAAM,iDACNzT,KAAM,6BACN4kC,MAAO,6BACPC,IAAK,eAKTT,GACE,mBACA,mEACA,OAEJ,CApEcU,GAuEZV,GACE,wBACA,iEACA,kBAjEC5tB,MAAO5c,MAGZ,CA0EA,SAASwqC,GAAsBxxB,EAAO1T,EAASnB,EAAO,QAEpD,MAAMgnC,EAAe3xB,SAASC,cAAc,OAC5C0xB,EAAarkC,UAAY,yEAEZ,YAAT3C,EAAqB,qDAAuD,WACnE,YAATA,EAAqB,wDAA0D,WACtE,SAATA,EAAkB,kDAAoD,qEAI1EgnC,EAAaC,UAAY,6GAGepyB,sDACG1T,wLAQ3CkU,SAASK,KAAKC,YAAYqxB,GAG1Btb,sBAAsB,KACpBsb,EAAa3iC,MAAM6iC,UAAY,kBAIjCrd,WAAW,KACLmd,EAAaG,gBACfH,EAAa3iC,MAAM6iC,UAAY,mBAC/Brd,WAAW,IAAMmd,EAAaI,SAAU,OAEzC,IACL,CAYA,IAAIC,GAEJ7uB,OAAOuD,iBAAiB,sBAAwBrX,IAC9CA,EAAEK,iBACFsiC,GAAiB3iC,EAInB,WAEE,MAAM4iC,EAAgBjyB,SAASC,cAAc,OAC7CgyB,EAAc3kC,UAAY,uJAK1B2kC,EAAcL,UAAY,uhBAe1B5xB,SAASK,KAAKC,YAAY2xB,GAG1BA,EAAcpnB,cAAc,gBAAgBnE,iBAAiB,QAAS7a,UACpE,GAAImmC,GAAgB,CAClBA,GAAeE,SACf,MAAMC,QAAEA,SAAkBH,GAAeI,WAEzCJ,GAAiB,IACnB,CACAC,EAAcF,WAIhBE,EAAcpnB,cAAc,gBAAgBnE,iBAAiB,QAAS,KACpEurB,EAAcF,SACdC,GAAiB,MAErB,CA5CEK,KA+CFlvB,OAAOuD,iBAAiB,eAAgB,KAEtCsqB,GACE,gBACA,sDACA,WAEFgB,GAAiB,OCrOnB,MAAMM,GAAYtyB,SAASgR,eAAe,QAC7BuhB,aAAWD,IAEnBtpB,aACFwpB,EAAA,CAAwB1vB,MAAM,MAC7BvV,eAACo5B,GAASoE,SACRx9B,eAAC27B,GAAA,UFyTA,WACL,MAAMuJ,EAAQzD,MAzHT,SAAuByD,GAC5B,GAAwB,oBAAbzyB,SAA0B,OAGfA,SAASwM,iBAAiB,qBAClCnX,QAAQkO,IACpBA,EAAOmvB,aAAa,QAASD,KAIVzyB,SAASwM,iBAAiB,SAClCnX,QAAQrG,IACnBA,EAAM0jC,aAAa,QAASD,IAEhC,CA8GEE,CAAcF,GAGd5C,KAGA,MAAM5lB,EAAawlB,KACfxlB,EAAWtb,OAKfwX,YAAY,KACgBspB,KACJ9gC,OAASsb,EAAWtb,QAIzC,IAIL,CE7UsBikC,ID4PtB,WACE,IACE,MAAMzrC,EAAS,IAAI0rC,gBAAgB1vB,OAAOY,SAAS3R,QACnD,OAC0B,IAAxBuV,UAAUmrB,WACV3rC,EAAO4rC,IAAI,SACX5rC,EAAO4rC,IAAI,OACX5rC,EAAO4rC,IAAI,UACW,MAAtB5rC,EAAON,IAAI,MAEf,OACE,OAA+B,IAAxB8gB,UAAUmrB,SACnB,CACF,EAKME,KAKJ3C,KAtDK,WACL,SAAS4C,IACP,MAAMC,EAAWvrB,UAAUwrB,OAGtBD,EAOHlC,GACE,sBACA,6CACA,WATFA,GACE,kBACA,mDACA,WAWJhxB,SAASK,KAAKqyB,aAAa,sBAAuBQ,EAAW,SAAW,UAC1E,CAEA/vB,OAAOuD,iBAAiB,SAAUusB,GAClC9vB,OAAOuD,iBAAiB,UAAWusB,GAGnCA,GACF,CA2BEG,IC9PFnxB,KAGAkpB,GAAqB7oB","names":["secureApiClient","constructor","this","baseURL","client","axios","create","timeout","headers","interceptors","response","use","error","Promise","reject","getQuote","symbol","get","toUpperCase","data","getHistoricalData","range","interval","params","getIntradayData","getBatchQuotes","symbols","post","map","s","getIncomeStatement","period","limit","getBalanceSheet","getCashFlowStatement","getFinancialRatios","getCompanyProfile","getPeerCompanies","getDCFValuation","getEarnings","getFREDData","seriesId","startDate","endDate","start_date","end_date","getEconomicIndicators","getTreasuryRates","getHealthStatus","getServiceHealth","getCacheStats","fetchMarketData","ticker","meta","timestamps","d","timestamp","prices","close","high","low","open","volume","source","fetchFinancialStatements","statement","Error","fetchPeerComparables","peers","AIFinancialAssistant","isOpen","onToggle","currentContext","portfolioData","marketData","messages","setMessages","useState","id","type","content","Date","suggestions","inputValue","setInputValue","isLoading","setIsLoading","isMinimized","setIsMinimized","messagesEndRef","useRef","inputRef","useEffect","current","scrollIntoView","behavior","handleSendMessage","async","message","trim","userMessage","now","toString","prev","context","previousMessages","slice","assistantMessage","charts","actions","fallbackMessage","quickActions","icon","PieChart","label","action","TrendingUp","AlertTriangle","Calculator","Target","BarChart3","jsx","className","children","jsxs","motion","div","initial","opacity","scale","y","animate","height","exit","Brain","onClick","Maximize2","Minimize2","X","Fragment","AnimatePresence","User","Bot","length","suggestion","index","handleSuggestionClick","toLocaleTimeString","style","animationDelay","ref","value","onChange","e","target","onKeyPress","key","shiftKey","preventDefault","placeholder","rows","minHeight","maxHeight","disabled","Send","CLICommandProcessor","commandHistory","aliases","p","md","calc","nav","help","clear","ls","ll","cd","commands","initializeCommands","updateContext","newContext","description","usage","category","handler","handleHelp","bind","portfolio","handlePortfolio","handleMarketData","quote","handleQuote","calculate","handleCalculate","dcf","handleDcf","navigate","handleNavigate","list","handleList","search","handleSearch","analyze","handleAnalyze","risk","handleRisk","export","handleExport","import","handleImport","status","handleStatus","handleClear","version","handleVersion","processCommand","input","parts","parseCommand","commandName","resolveAlias","command","success","result","args","flags","push","split","remaining","i","part","startsWith","substring","getSuggestions","partial","toLowerCase","Object","keys","filter","cmd","concat","alias","sort","getCommandArgumentSuggestions","_args","_flags","output","categories","entries","forEach","name","padEnd","page","query","join","dataType","filePath","detailed","watchlists","path","toLocaleString","handleLbo","handleWatch","_detailed","formatCurrency","currency","compact","isNaN","Intl","NumberFormat","notation","minimumFractionDigits","maximumFractionDigits","format","formatPercentage","decimals","toFixed","formatNumber","calculateDCFValuation","inputs","currentRevenue","revenueGrowthRate","fcfMargin","wacc","terminalGrowthRate","sharesOutstanding","totalDebt","cash","projectionYears","projectedRevenues","baseCashFlow","growthRates","years","cashFlows","currentCashFlow","Array","isArray","projectCashFlows","projectedFCFs","revenue","terminalValue","finalCashFlow","discountRate","calculateTerminalValue","pvOfCashFlows","reduce","npv","cashFlow","Math","pow","pvOfTerminalValue","enterpriseValue","equityValue","pricePerShare","calculateLBOReturns","purchasePrice","ebitda","debtMultiple","exitMultiple","exitYear","managementFeeRate","carriedInterestRate","equityInvestment","exitEbitda","exitEnterpriseValue","exitEquityValue","totalReturn","irr","moic","totalManagementFees","carriedInterest","max","managementFees","netReturn","calculateComparableMetrics","companyData","peerData","peerStats","metric","peerValues","peer","values","validValues","v","median","mean","min","a","b","floor","sum","count","calculateStatistics","company","peerStatistics","relativeValuation","marketCapPercentile","calculatePercentile","marketCap","peRatioRelative","peRatio","evEbitdaRelative","evToEbitda","priceToBookRelative","priceToBook","dataset","validDataset","PersistentCLI","onNavigate","isExpanded","setIsExpanded","setInput","setOutput","setCommandHistory","historyIndex","setHistoryIndex","setSuggestions","showSuggestions","setShowSuggestions","isProcessing","setIsProcessing","outputRef","cliProcessor","scrollTop","scrollHeight","focus","addOutput","useCallback","newOutput","formatCommandOutput","formatTable","JSON","stringify","formatPortfolioData","formatMarketData","maxWidths","header","row","String","width","repeat","totalValue","holdings","holding","padStart","weight","getOutputTypeColor","role","tabIndex","onKeyDown","Terminal","stopPropagation","title","exportText","item","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","toISOString","body","appendChild","click","removeChild","revokeObjectURL","exportOutput","Download","ChevronDown","ChevronUp","transition","duration","ease","newSuggestions","navigation","handleCommand","newIndex","Zap","monitoring","isProduction","enableAnalytics","enableErrorReporting","enablePerformanceMonitoring","gaTrackingId","hotjarLoaded","initializeMonitoring","initializeSentry","initializeGoogleAnalytics","initializeHotjar","initializePerformanceMonitoring","setupGlobalErrorHandlers","__vitePreload","then","Sentry","init","dsn","environment","release","integrations","tracesSampleRate","beforeSend","event","level","configureScope","scope","setTag","setContext","window","catch","console","warn","script","gtag","dataLayer","arguments","src","head","page_title","page_location","location","h","o","r","hj","q","_hjSettings","hjid","hjsv","getElementsByTagName","monitorCoreWebVitals","monitorCustomMetrics","monitorResourceLoading","getCLS","getFID","getFCP","getLCP","getTTFB","n","a7","sendToAnalytics","monitorApiPerformance","monitorComponentPerformance","monitorMemoryUsage","originalFetch","fetch","startTime","performance","endTime","trackEvent","ok","PerformanceObserver","entry","getEntries","observe","entryTypes","setInterval","memory","usedJSHeapSize","totalJSHeapSize","jsHeapSizeLimit","transferSize","size","addEventListener","trackError","reason","filename","lineno","colno","eventName","properties","sendToCustomAnalytics","additionalData","captureException","tags","extra","stack","rating","method","userAgent","navigator","trackPageView","pageName","page_path","trackUserInteraction","element","ErrorBoundary","React","Component","props","super","state","hasError","getDerivedStateFromError","_error","componentDidCatch","errorInfo","__ErrorBoundary","__COMPONENT_ERROR__","componentStack","_","render","xmlns","viewBox","fill","stroke","strokeWidth","strokeMiterlimit","strokeLinecap","strokeLinejoin","Icon","color","accessibilityTester","options","rules","enabled","runOnly","reporter","violations","lastTestResults","runTests","testOptions","results","axeCore","run","logResults","storeResults","testFinancialComponent","selector","componentType","querySelector","config","spreadsheet","chart","calculator","modal","testKeyboardNavigation","focusableElements","getFocusableElements","tabOrderIssues","previousTabIndex","tagName","position","issue","focusVisibilityIssues","styles","getComputedStyle","hasOutline","outline","hasBoxShadow","boxShadow","hasBackground","backgroundColor","focusableElementsCount","passed","testColorContrast","textElements","querySelectorAll","contrastIssues","textColor","contrast","calculateContrastRatio","fontSize","parseInt","fontWeight","requiredRatio","required","text","textContent","totalElements","testFormAccessibility","forms","formIssues","form","formIndex","issues","hasAssociatedLabel","hasRequiredIndication","getAttribute","hasErrorMessage","isFinancialInput","autocomplete","inputType","inputId","inputName","totalForms","generateReport","passes","incomplete","inapplicable","summary","totalChecks","score","calculateAccessibilityScore","violation","impact","helpUrl","nodes","recommendations","generateRecommendations","financialSpecific","getFinancialAccessibilityInsights","totalTests","impactWeights","critical","serious","moderate","minor","violationScore","maxPossibleScore","priority","solution","financialContext","insights","component","recommendation","from","ariaLabel","ariaLabelledby","closest","ariaRequired","requiredAttr","hasAttribute","hasRequiredText","hasRequiredTextIndicator","getAssociatedLabel","includes","ariaDescribedby","errorElement","getElementById","some","color1","color2","rgb1","parseColor","rgb2","l1","getLuminance","l2","match","g","rs","gs","bs","c","reportViolations","node","reportData","existingReports","parse","localStorage","getItem","splice","setItem","webVitalsData","CLS","FID","FCP","LCP","TTFB","INP","clsValue","clsEntries","entryList","hadRecentInput","reportWebVital","buffered","processingStart","interactionId","processingEnd","lastEntry","navigationEntry","getEntriesByType","responseStart","requestStart","initializeWebVitals","mark","trackComponentRender","componentName","renderTime","measure","reportCustomMetric","trackCalculationPerformance","calculationType","complexity","setTimeout","timings","connection","getConnectionInfo","reportNavigationTiming","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","ssl","secureConnectionStart","ttfb","responseEnd","domProcessing","domComplete","domLoading","totalLoadTime","loadEventEnd","fetchStart","initiatorType","resourceData","encodedBodySize","cached","reportResourceTiming","interactionCount","totalInteractionTime","eventType","requestAnimationFrame","interactionTime","passive","averageTime","trackUserInteractions","round","checkPerformanceBudgets","budget","overBy","effectiveType","downlink","rtt","analyticsData","sessionId","getSessionId","userId","getUserId","existingData","sendAnalyticsBatch","queuedData","custom_parameter","removeItem","sessionStorage","random","substr","reportPerformanceMetric","trackFinancialComponentPerformance","metrics","useFinancialAccessibility","accessibility","autoTest","testInterval","onViolations","onSuccess","setResults","setViolations","setScore","lastTestTime","setLastTestTime","elementRef","intervalRef","targetElement","testResults","navResults","contrastResults","formResults","report","runAutoTest","clearInterval","useAccessibility","testFinancialFeatures","keyboardNav","colorContrast","formAccessibility","PerformanceDashboard","isVisible","onClose","dashboardData","setDashboardData","refreshInterval","setRefreshInterval","isMonitoring","setIsMonitoring","alertThreshold","setAlertThreshold","alerts","startMonitoring","startAccessibilityMonitoring","stopMonitoring","stopAccessibilityMonitoring","clearAlerts","threshold","alertOnViolations","monitorInterval","setAlerts","monitor","alert","criticalViolations","useAccessibilityMonitor","refreshData","accessibilityHistory","analyticsQueue","recentAccessibility","avgScore","avgViolations","performanceMetrics","webVitalMetrics","webVitals","budgetViolations","currentScore","averageScore","averageViolations","history","trends","scoreImproving","recentMetrics","webVitalHistory","getPerformanceDashboardData","toggleMonitoring","formatMetric","unit","good","poor","getMetricStatus","statusColor","getStatusColor","fillRule","clipRule","htmlFor","SEOProvider","HelmetProvider","SHORTCUT_CONFIG","f1","useKeyboardShortcuts","handlers","normalizeKey","metaKey","ctrlKey","altKey","shouldHandleShortcut","isEditable","contentEditable","handleKeyDown","keyCombo","shortcut","removeEventListener","getAllShortcuts","getShortcutsByCategory","general","analysis","view","quick","formatKeyCombo","isShortcutAvailable","registerShortcut","normalizedKey","NATURAL_LANGUAGE_PATTERNS","pattern","COMMAND_REGISTRY","FileText","keywords","execute","_params","_context","parameters","optional","variable","Activity","Search","Upload","LineChart","Save","Eye","settings","Settings","HelpCircle","CommandPalette","onExecuteCommand","recentCommands","userPreferences","_userPreferences","_className","setQuery","selectedIndex","setSelectedIndex","_commandHistory","listRef","dialogRef","searchCommands","executeCommand","getContextualCommands","learnFromUsage","commandUsage","setCommandUsage","saved","userLearning","setUserLearning","parseNaturalLanguage","_category","patterns","Boolean","confidence","normalizedQuery","nlResults","keyword","usageCount","activeTab","nlMatch","find","nl","isRecommended","contextual","frequentCommands","commandId","queries","lastUsed","getCommandCategories","commandRegistry","useCommandRegistry","searchResults","useMemo","handleExecuteCommand","focusableSelectors","focusables","el","first","last","active","activeElement","getCategoryColor","highlightMatch","regex","RegExp","replace","test","createPortal","Command","tip","CategoryIcon","Clock","Star","ArrowRight","Users","Globe","getCategoryIcon","CommandIcon","isSelected","delay","onFocus","idx","isNew","x","KeyboardShortcutsHelp","activeCategory","setActiveCategory","shortcuts","KeyboardIcon","shortcutCount","cn","flat","KeyboardShortcutsContext","createContext","useKeyboardShortcutsContext","useContext","KeyboardShortcutsProvider","useNavigate","showCommandPalette","setShowCommandPalette","showShortcutsHelp","setShowShortcutsHelp","setRecentCommands","setCurrentContext","CustomEvent","dispatchEvent","save","detail","tab","handlePostExecute","filtered","contextValue","updateCommandContext","ctx","Provider","ScrollToTop","pathname","useLocation","scrollTo","LoadingSpinner","showText","variant","variantClasses","primary","secondary","muted","white","sm","default","lg","xl","FinancialModelWorkspace","lazy","__VITE_PRELOAD__","RealTimeMarketDataCenter","ScenarioAnalysisSensitivityTools","ValuationTool","ValuationToolDocs","ValuationToolDemo","PrivateAnalysis","ValuationWorkbench","ModelLab","PortfolioManagement","ThesisCanvas","AdvancedCharting","MarketAnalysis","Reports","AIInsights","Analytics","AdvancedAnalytics","A","FinancialInputsDemo","Models","App","Data","Integrations","NotFound","RouteChangeTracker","Routes","BrowserRouter","Suspense","fallback","RouterRoutes","Route","hideDashboard","setIsVisible","toggleDashboard","showDashboard","usePerformanceDashboard","isAIAssistantOpen","setIsAIAssistantOpen","_setPortfolioData","_setMarketData","route","userSlice","createSlice","initialState","isAuthenticated","reducers","login","payload","logout","store","configureStore","reducer","user","productionMonitoring","isInitialized","generateSessionId","errorQueue","performanceQueue","userActivityQueue","initSentry","setupErrorListeners","setupPerformanceMonitoring","setupUserActivityTracking","setupHealthChecks","define_process_env_default","VITE_SENTRY_DSN","VITE_APP_ENV","hint","ignored","exception","setUser","logError","logPerformance","paint","domContentLoaded","domContentLoadedEventEnd","domContentLoadedEventStart","loadComplete","loadEventStart","firstPaint","firstContentfulPaint","lastActivity","isActive","trackActivity","logUserActivity","hidden","sessionDuration","flush","logHealthCheck","memoryUsage","getMemoryUsage","connectionType","getConnectionType","errorData","enhancedError","flushErrors","performanceData","enhancedData","flushPerformance","activityData","flushUserActivity","healthData","sendToEndpoint","userData","endpoint","captureErrorBoundary","errorId","trackFeatureUsage","featureName","feature","startMark","endMark","getEntriesByName","currentNonce","getCurrentNonce","crypto","array","Uint8Array","getRandomValues","btoa","fromCharCode","apply","generateNonce","validateCSPCompliance","inlineScripts","elements","inlineStyles","setupCSPReporting","sendCSPViolation","blockedURI","violatedDirective","originalPolicy","disposition","isLocalhost","hostname","registerSW","origin","swUrl","contentType","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","showInAppNotification","checkValidServiceWorker","register","installingWorker","installing","controller","Notification","permission","badge","tag","showUpdateAvailableNotification","notification","innerHTML","transform","parentElement","remove","deferredPrompt","installBanner","prompt","outcome","userChoice","showInstallPrompt","container","createRoot","ProductionErrorBoundary","nonce","setAttribute","applyCspNonce","initializeSecurity","URLSearchParams","webdriver","has","isAutomatedEnvironment","updateOnlineStatus","isOnline","onLine","setupNetworkHandling"],"ignoreList":[],"sources":["../../src/services/secureApiClient.js","../../src/components/AIAssistant/AIFinancialAssistant.jsx","../../src/services/cliCommandProcessor.js","../../src/utils/dataTransformation.js","../../src/components/CLI/PersistentCLI.jsx","../../src/utils/monitoring.js","../../src/components/ErrorBoundary.jsx","../../src/utils/accessibilityTesting.js","../../src/utils/performanceMonitoring.js","../../src/hooks/useAccessibility.js","../../src/components/PerformanceDashboard/PerformanceDashboard.jsx","../../src/components/SEO/SEOProvider.jsx","../../src/hooks/useKeyboardShortcuts.js","../../src/hooks/useCommandRegistry.js","../../src/components/CommandPalette/CommandPalette.jsx","../../src/components/ui/KeyboardShortcutsHelp.jsx","../../src/components/ui/KeyboardShortcutsProvider.jsx","../../src/components/ScrollToTop.jsx","../../src/components/ui/LoadingSpinner.jsx","../../src/Routes.jsx","../../src/App.jsx","../../src/hooks/usePerformanceDashboard.js","../../src/store/slices/userSlice.js","../../src/store/store.js","../../src/services/productionMonitoring.js","../../src/utils/securityHeaders.js","../../src/utils/serviceWorker.js","../../src/index.jsx"],"sourcesContent":["import axios from 'axios';\n\n/**\n * Secure API Client for FinanceAnalyst Pro\n * This client communicates with our secure backend instead of making direct API calls\n * All API keys are now handled securely on the server side\n */\nclass SecureApiClient {\n  constructor() {\n    this.baseURL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3001/api';\n    this.client = axios.create({\n      baseURL: this.baseURL,\n      timeout: 15000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Response interceptor for error handling\n    this.client.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        console.error('API Error:', error.response?.data || error.message);\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // =============================================================================\n  // MARKET DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get real-time quote for a symbol\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} Quote data\n   */\n  async getQuote(symbol) {\n    const response = await this.client.get(`/market-data/quote/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get historical price data\n   * @param {string} symbol - Stock symbol\n   * @param {string} range - Time range (1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y)\n   * @param {string} interval - Data interval (1m, 5m, 15m, 30m, 60m, 1d, etc.)\n   * @returns {Promise<Object>} Historical data\n   */\n  async getHistoricalData(symbol, range = '1mo', interval = '1d') {\n    const response = await this.client.get(`/market-data/historical/${symbol.toUpperCase()}`, {\n      params: { range, interval }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get intraday price data\n   * @param {string} symbol - Stock symbol\n   * @param {string} interval - Intraday interval (1min, 5min, 15min, 30min, 60min)\n   * @returns {Promise<Object>} Intraday data\n   */\n  async getIntradayData(symbol, interval = '5min') {\n    const response = await this.client.get(`/market-data/intraday/${symbol.toUpperCase()}`, {\n      params: { interval }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get quotes for multiple symbols\n   * @param {string[]} symbols - Array of stock symbols\n   * @returns {Promise<Object>} Batch quote data\n   */\n  async getBatchQuotes(symbols) {\n    const response = await this.client.post('/market-data/batch', {\n      symbols: symbols.map(s => s.toUpperCase())\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // FINANCIAL STATEMENTS METHODS\n  // =============================================================================\n\n  /**\n   * Get income statement\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Income statement data\n   */\n  async getIncomeStatement(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/income/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get balance sheet\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Balance sheet data\n   */\n  async getBalanceSheet(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/balance/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get cash flow statement\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Cash flow data\n   */\n  async getCashFlowStatement(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/cash-flow/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get financial ratios\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Financial ratios data\n   */\n  async getFinancialRatios(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/ratios/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // COMPANY DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get company profile and overview\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} Company profile data\n   */\n  async getCompanyProfile(symbol) {\n    const response = await this.client.get(`/company-data/profile/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get peer companies\n   * @param {string} symbol - Stock symbol\n   * @param {number} limit - Number of peers to retrieve\n   * @returns {Promise<Object>} Peer companies data\n   */\n  async getPeerCompanies(symbol, limit = 10) {\n    const response = await this.client.get(`/company-data/peers/${symbol.toUpperCase()}`, {\n      params: { limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get DCF valuation\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} DCF valuation data\n   */\n  async getDCFValuation(symbol) {\n    const response = await this.client.get(`/company-data/dcf/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get earnings data\n   * @param {string} symbol - Stock symbol\n   * @param {number} limit - Number of earnings periods to retrieve\n   * @returns {Promise<Object>} Earnings data\n   */\n  async getEarnings(symbol, limit = 8) {\n    const response = await this.client.get(`/company-data/earnings/${symbol.toUpperCase()}`, {\n      params: { limit }\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // ECONOMIC DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get FRED economic data\n   * @param {string} seriesId - FRED series ID\n   * @param {number} limit - Number of observations to retrieve\n   * @param {string} startDate - Start date (ISO format)\n   * @param {string} endDate - End date (ISO format)\n   * @returns {Promise<Object>} Economic data\n   */\n  async getFREDData(seriesId, limit = 100, startDate = null, endDate = null) {\n    const params = { limit };\n    if (startDate) params.start_date = startDate;\n    if (endDate) params.end_date = endDate;\n\n    const response = await this.client.get(`/economic-data/fred/${seriesId.toUpperCase()}`, {\n      params\n    });\n    return response.data;\n  }\n\n  /**\n   * Get popular economic indicators\n   * @returns {Promise<Object>} Economic indicators data\n   */\n  async getEconomicIndicators() {\n    const response = await this.client.get('/economic-data/indicators');\n    return response.data;\n  }\n\n  /**\n   * Get treasury yield curve data\n   * @returns {Promise<Object>} Treasury rates data\n   */\n  async getTreasuryRates() {\n    const response = await this.client.get('/economic-data/treasury-rates');\n    return response.data;\n  }\n\n  // =============================================================================\n  // HEALTH AND STATUS METHODS\n  // =============================================================================\n\n  /**\n   * Check backend health\n   * @returns {Promise<Object>} Health status\n   */\n  async getHealthStatus() {\n    const response = await this.client.get('/health');\n    return response.data;\n  }\n\n  /**\n   * Check service health (API providers)\n   * @returns {Promise<Object>} Service health status\n   */\n  async getServiceHealth() {\n    const response = await this.client.get('/health/services');\n    return response.data;\n  }\n\n  /**\n   * Get cache statistics\n   * @returns {Promise<Object>} Cache statistics\n   */\n  async getCacheStats() {\n    const response = await this.client.get('/health/cache');\n    return response.data;\n  }\n\n  // =============================================================================\n  // COMPATIBILITY METHODS (for existing frontend code)\n  // =============================================================================\n\n  /**\n   * Fetch market data (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @param {string} range - Time range\n   * @returns {Promise<Object>} Market data in expected format\n   */\n  async fetchMarketData(ticker, range = '1y') {\n    try {\n      const data = await this.getHistoricalData(ticker, range);\n\n      // Transform to match expected format from old API service\n      return {\n        symbol: data.symbol,\n        range: data.range,\n        data: data.data,\n        meta: data.meta,\n        timestamps: data.data.map(d => d.timestamp),\n        prices: {\n          close: data.data.map(d => d.close),\n          high: data.data.map(d => d.high),\n          low: data.data.map(d => d.low),\n          open: data.data.map(d => d.open)\n        },\n        volume: data.data.map(d => d.volume),\n        source: data.source\n      };\n    } catch (error) {\n      console.error('Failed to fetch market data:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch financial statements (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @param {string} statement - Statement type\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods\n   * @returns {Promise<Object>} Financial statement data\n   */\n  async fetchFinancialStatements(ticker, statement = 'income-statement', period = 'annual', limit = 5) {\n    try {\n      let data;\n\n      switch (statement) {\n        case 'income-statement':\n          data = await this.getIncomeStatement(ticker, period, limit);\n          break;\n        case 'balance-sheet-statement':\n          data = await this.getBalanceSheet(ticker, period, limit);\n          break;\n        case 'cash-flow-statement':\n          data = await this.getCashFlowStatement(ticker, period, limit);\n          break;\n        default:\n          throw new Error(`Unsupported statement type: ${statement}`);\n      }\n\n      return data.data; // Return just the data array for compatibility\n    } catch (error) {\n      console.error('Failed to fetch financial statements:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch peer comparables (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @returns {Promise<Array>} Peer companies array\n   */\n  async fetchPeerComparables(ticker) {\n    try {\n      const data = await this.getPeerCompanies(ticker);\n      return data.peers;\n    } catch (error) {\n      console.error('Failed to fetch peer comparables:', error);\n      throw error;\n    }\n  }\n}\n\n// Export singleton instance\nexport default new SecureApiClient();\n","/**\n * AI Financial Assistant Component\n * Conversational AI assistant for financial analysis and portfolio management\n */\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Send,\n  Bot,\n  User,\n  TrendingUp,\n  AlertTriangle,\n  PieChart,\n  BarChart3,\n  Calculator,\n  Brain,\n  Target,\n  Minimize2,\n  Maximize2,\n  X\n} from 'lucide-react';\nimport React, { useState, useRef, useEffect } from 'react';\n\nimport secureApiClient from '../../services/secureApiClient';\n\nconst AIFinancialAssistant = ({\n  isOpen = false,\n  onToggle,\n  currentContext = {},\n  portfolioData = null,\n  marketData = null\n}) => {\n  const [messages, setMessages] = useState([\n    {\n      id: '1',\n      type: 'assistant',\n      content: \"Hi! I'm your AI Financial Assistant. I can help you with portfolio analysis, market insights, risk assessment, and financial planning. What would you like to explore today?\",\n      timestamp: new Date(),\n      suggestions: [\n        'Analyze my portfolio performance',\n        'What are the current market trends?',\n        'Calculate portfolio risk metrics',\n        'Suggest portfolio rebalancing'\n      ]\n    }\n  ]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async(message = inputValue) => {\n    if (!message.trim()) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: message,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setIsLoading(true);\n\n    try {\n      // Send message to AI assistant backend\n      const response = await secureApiClient.post('/ai-assistant/chat', {\n        message,\n        context: {\n          ...currentContext,\n          portfolioData,\n          marketData,\n          previousMessages: messages.slice(-5) // Send last 5 messages for context\n        }\n      });\n\n      const assistantMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'assistant',\n        content: response.data.response,\n        timestamp: new Date(),\n        suggestions: response.data.suggestions || [],\n        charts: response.data.charts || [],\n        actions: response.data.actions || []\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n    } catch (error) {\n      console.error('AI Assistant error:', error);\n\n      // Fallback response\n      const fallbackMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'assistant',\n        content: \"I'm having trouble processing your request right now. This could be due to high demand or a temporary service issue. Please try again in a moment, or let me help you with basic portfolio analysis using the available data.\",\n        timestamp: new Date(),\n        suggestions: [\n          'Show portfolio overview',\n          'Calculate basic metrics',\n          'View market data',\n          'Help with analysis'\n        ]\n      };\n\n      setMessages(prev => [...prev, fallbackMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSuggestionClick = (suggestion) => {\n    handleSendMessage(suggestion);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const quickActions = [\n    { icon: PieChart, label: 'Portfolio Analysis', action: 'Analyze my current portfolio allocation and performance' },\n    { icon: TrendingUp, label: 'Market Insights', action: 'What are the current market trends and opportunities?' },\n    { icon: AlertTriangle, label: 'Risk Assessment', action: 'Assess the risk profile of my portfolio' },\n    { icon: Calculator, label: 'Financial Planning', action: 'Help me with financial planning and projections' },\n    { icon: Target, label: 'Goal Planning', action: 'Help me set and track financial goals' },\n    { icon: BarChart3, label: 'Performance Review', action: 'Review my portfolio performance over time' }\n  ];\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9, y: 20 }}\n        animate={{\n          opacity: 1,\n          scale: 1,\n          y: 0,\n          height: isMinimized ? 'auto' : '80vh'\n        }}\n        exit={{ opacity: 0, scale: 0.9, y: 20 }}\n        className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl flex flex-col\"\n      >\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"bg-white bg-opacity-20 p-2 rounded-lg\">\n              <Brain className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">AI Financial Assistant</h2>\n              <p className=\"text-blue-100 text-sm\">Powered by advanced financial AI</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setIsMinimized(!isMinimized)}\n              className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\n            >\n              {isMinimized ? <Maximize2 className=\"w-5 h-5\" /> : <Minimize2 className=\"w-5 h-5\" />}\n            </button>\n            <button\n              onClick={onToggle}\n              className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {!isMinimized && (\n          <>\n            {/* Messages Area */}\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n              <AnimatePresence>\n                {messages.map((message) => (\n                  <motion.div\n                    key={message.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -10 }}\n                    className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                  >\n                    <div className={`max-w-3xl flex ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} items-start space-x-3`}>\n                      <div\n                        className={`p-2 rounded-lg ${\n                          message.type === 'user'\n                            ? 'bg-blue-100 text-blue-600'\n                            : 'bg-purple-100 text-purple-600'\n                        }`}\n                      >\n                        {message.type === 'user' ? <User className=\"w-5 h-5\" /> : <Bot className=\"w-5 h-5\" />}\n                      </div>\n                      <div\n                        className={`px-4 py-3 rounded-2xl ${\n                          message.type === 'user'\n                            ? 'bg-blue-600 text-white ml-3'\n                            : 'bg-gray-100 text-gray-800 mr-3'\n                        }`}\n                      >\n                        <p className=\"whitespace-pre-wrap\">{message.content}</p>\n\n                        {/* Suggestions */}\n                        {message.suggestions && message.suggestions.length > 0 && (\n                          <div className=\"mt-3 space-y-2\">\n                            <p className=\"text-sm font-medium opacity-75\">Suggestions:</p>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {message.suggestions.map((suggestion, index) => (\n                                <button\n                                  key={index}\n                                  onClick={() => handleSuggestionClick(suggestion)}\n                                  className=\"text-xs px-3 py-1 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all\"\n                                >\n                                  {suggestion}\n                                </button>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Charts placeholder */}\n                        {message.charts && message.charts.length > 0 && (\n                          <div className=\"mt-3 p-3 bg-white bg-opacity-10 rounded-lg\">\n                            <p className=\"text-sm font-medium mb-2\"> Charts & Analysis</p>\n                            <div className=\"text-sm opacity-75\">\n                              Interactive charts would be rendered here based on the analysis\n                            </div>\n                          </div>\n                        )}\n\n                        <div className=\"text-xs opacity-50 mt-2\">\n                          {message.timestamp.toLocaleTimeString()}\n                        </div>\n                      </div>\n                    </div>\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n\n              {isLoading && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  className=\"flex justify-start\"\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"p-2 rounded-lg bg-purple-100 text-purple-600\">\n                      <Bot className=\"w-5 h-5\" />\n                    </div>\n                    <div className=\"px-4 py-3 rounded-2xl bg-gray-100\">\n                      <div className=\"flex space-x-1\">\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" />\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }} />\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Quick Actions */}\n            {messages.length === 1 && (\n              <div className=\"px-6 py-4 border-t border-gray-200\">\n                <p className=\"text-sm font-medium text-gray-700 mb-3\">Quick Actions:</p>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                  {quickActions.map((action, index) => (\n                    <button\n                      key={index}\n                      onClick={() => handleSendMessage(action.action)}\n                      className=\"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 text-left\"\n                    >\n                      <action.icon className=\"w-5 h-5 text-gray-600\" />\n                      <span className=\"text-sm font-medium text-gray-700\">{action.label}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Input Area */}\n            <div className=\"p-6 border-t border-gray-200\">\n              <div className=\"flex space-x-3\">\n                <div className=\"flex-1 relative\">\n                  <textarea\n                    ref={inputRef}\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Ask me anything about your portfolio, market analysis, or financial planning...\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                    rows={1}\n                    style={{ minHeight: '48px', maxHeight: '120px' }}\n                  />\n                </div>\n                <button\n                  onClick={() => handleSendMessage()}\n                  disabled={!inputValue.trim() || isLoading}\n                  className=\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                  <span>Send</span>\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n\n        {isMinimized && (\n          <div className=\"p-4 border-t border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-600\">AI Assistant is minimized</p>\n              <div className=\"flex space-x-2\">\n                <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\n                <span className=\"text-xs text-gray-500\">Online</span>\n              </div>\n            </div>\n          </div>\n        )}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default AIFinancialAssistant;\n","/**\n * CLI Command Processor\n * Core service for processing financial commands in the persistent CLI\n */\n\nimport _secureApiClient from './secureApiClient';\n\nexport class CLICommandProcessor {\n  constructor() {\n    this.context = {};\n    this.commandHistory = [];\n    this.aliases = {\n      'p': 'portfolio',\n      'md': 'market-data',\n      'calc': 'calculate',\n      'nav': 'navigate',\n      'help': 'help',\n      'clear': 'clear',\n      'ls': 'list',\n      'll': 'list --detailed',\n      'cd': 'navigate'\n    };\n\n    this.commands = this.initializeCommands();\n  }\n\n  updateContext(newContext) {\n    this.context = { ...this.context, ...newContext };\n  }\n\n  initializeCommands() {\n    return {\n      // Help and Information\n      help: {\n        description: 'Show available commands and usage',\n        usage: 'help [command]',\n        category: 'system',\n        handler: this.handleHelp.bind(this)\n      },\n\n      // Portfolio Management\n      portfolio: {\n        description: 'Portfolio management operations',\n        usage: 'portfolio [show|analyze|rebalance|risk|holdings]',\n        category: 'portfolio',\n        handler: this.handlePortfolio.bind(this)\n      },\n\n      // Market Data\n      'market-data': {\n        description: 'Fetch market data and quotes',\n        usage: 'market-data [symbol] [--type=quote|chart|news]',\n        category: 'market',\n        handler: this.handleMarketData.bind(this)\n      },\n\n      quote: {\n        description: 'Get stock quote',\n        usage: 'quote <symbol>',\n        category: 'market',\n        handler: this.handleQuote.bind(this)\n      },\n\n      // Financial Calculations\n      calculate: {\n        description: 'Financial calculations',\n        usage: 'calculate [dcf|wacc|beta|sharpe] [parameters]',\n        category: 'calculations',\n        handler: this.handleCalculate.bind(this)\n      },\n\n      dcf: {\n        description: 'DCF valuation calculation',\n        usage: 'dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]',\n        category: 'calculations',\n        handler: this.handleDcf.bind(this)\n      },\n\n      // Navigation\n      navigate: {\n        description: 'Navigate to different pages/sections',\n        usage: 'navigate <page> [workspace|market-data|portfolio|analysis|private-analysis]',\n        category: 'navigation',\n        handler: this.handleNavigate.bind(this)\n      },\n\n      // Data Management\n      list: {\n        description: 'List portfolio holdings, watchlist, or other data',\n        usage: 'list [holdings|watchlist|portfolios] [--detailed]',\n        category: 'data',\n        handler: this.handleList.bind(this)\n      },\n\n      search: {\n        description: 'Search stocks, funds, or financial instruments',\n        usage: 'search <query> [--type=stocks|etf|mutual-funds]',\n        category: 'data',\n        handler: this.handleSearch.bind(this)\n      },\n\n      // Analysis Tools\n      analyze: {\n        description: 'Perform financial analysis',\n        usage: 'analyze <symbol|portfolio> [--type=fundamental|technical|risk]',\n        category: 'analysis',\n        handler: this.handleAnalyze.bind(this)\n      },\n\n      risk: {\n        description: 'Risk analysis and metrics',\n        usage: 'risk [portfolio|symbol] [--metric=var|sharpe|beta|correlation]',\n        category: 'analysis',\n        handler: this.handleRisk.bind(this)\n      },\n\n      // Utility Commands\n      export: {\n        description: 'Export data to various formats',\n        usage: 'export <data-type> [--format=csv|json|xlsx] [--output=filename]',\n        category: 'utility',\n        handler: this.handleExport.bind(this)\n      },\n\n      import: {\n        description: 'Import portfolio or transaction data',\n        usage: 'import <file-path> [--type=portfolio|transactions]',\n        category: 'utility',\n        handler: this.handleImport.bind(this)\n      },\n\n      // System Commands\n      status: {\n        description: 'Show system and data connection status',\n        usage: 'status [--detailed]',\n        category: 'system',\n        handler: this.handleStatus.bind(this)\n      },\n\n      clear: {\n        description: 'Clear the terminal output',\n        usage: 'clear',\n        category: 'system',\n        handler: this.handleClear.bind(this)\n      },\n\n      version: {\n        description: 'Show application version and build info',\n        usage: 'version',\n        category: 'system',\n        handler: this.handleVersion.bind(this)\n      }\n    };\n  }\n\n  async processCommand(input) {\n    const parts = this.parseCommand(input);\n    const commandName = this.resolveAlias(parts.command);\n    const command = this.commands[commandName];\n\n    if (!command) {\n      return {\n        success: false,\n        error: `Command '${commandName}' not found. Type 'help' for available commands.`\n      };\n    }\n\n    try {\n      const result = await command.handler(parts.args, parts.flags);\n      this.commandHistory.push({ command: input, timestamp: new Date(), result });\n      return result;\n    } catch (error) {\n      return {\n        success: false,\n        error: `Error executing '${commandName}': ${error.message}`\n      };\n    }\n  }\n\n  parseCommand(input) {\n    const parts = input.trim().split(/\\s+/);\n    const command = parts[0];\n    const remaining = parts.slice(1);\n\n    const args = [];\n    const flags = {};\n\n    for (let i = 0; i < remaining.length; i++) {\n      const part = remaining[i];\n      if (part.startsWith('--')) {\n        const [key, value] = part.substring(2).split('=');\n        flags[key] = value || true;\n      } else if (part.startsWith('-')) {\n        flags[part.substring(1)] = true;\n      } else {\n        args.push(part);\n      }\n    }\n\n    return { command, args, flags };\n  }\n\n  resolveAlias(command) {\n    return this.aliases[command] || command;\n  }\n\n  getSuggestions(input) {\n    const parts = input.trim().split(/\\s+/);\n    const partial = parts[0].toLowerCase();\n\n    if (parts.length === 1) {\n      // Command suggestions\n      return Object.keys(this.commands)\n        .filter(cmd => cmd.startsWith(partial))\n        .concat(Object.keys(this.aliases).filter(alias => alias.startsWith(partial)))\n        .sort();\n    }\n\n    // Argument suggestions based on command\n    const command = this.resolveAlias(parts[0]);\n    return this.getCommandArgumentSuggestions(command, parts.slice(1));\n  }\n\n  getCommandArgumentSuggestions(command, _args) {\n    const suggestions = [];\n\n    switch (command) {\n      case 'navigate':\n        suggestions.push('workspace', 'market-data', 'portfolio', 'analysis', 'private-analysis', 'valuation-workbench', 'model-lab');\n        break;\n      case 'portfolio':\n        suggestions.push('show', 'analyze', 'rebalance', 'risk', 'holdings', 'performance');\n        break;\n      case 'calculate':\n        suggestions.push('dcf', 'wacc', 'beta', 'sharpe', 'sortino', 'var');\n        break;\n      case 'list':\n        suggestions.push('holdings', 'watchlist', 'portfolios', 'transactions');\n        break;\n      case 'analyze':\n        suggestions.push('--type=fundamental', '--type=technical', '--type=risk');\n        break;\n      case 'export':\n        suggestions.push('--format=csv', '--format=json', '--format=xlsx');\n        break;\n    }\n\n    return suggestions;\n  }\n\n  // Command Handlers\n  async handleHelp(args, _flags) {\n    if (args.length > 0) {\n      const commandName = this.resolveAlias(args[0]);\n      const command = this.commands[commandName];\n      if (command) {\n        return {\n          success: true,\n          output: `${commandName}: ${command.description}\\nUsage: ${command.usage}\\nCategory: ${command.category}`,\n          type: 'info'\n        };\n      } else {\n        return {\n          success: false,\n          output: `Command '${commandName}' not found.`,\n          type: 'error'\n        };\n      }\n    }\n\n    let output = ' AVAILABLE COMMANDS\\n';\n    output += '\\n\\n';\n\n    const categories = {};\n    Object.entries(this.commands).forEach(([name, cmd]) => {\n      if (!categories[cmd.category]) categories[cmd.category] = [];\n      categories[cmd.category].push({ name, ...cmd });\n    });\n\n    Object.entries(categories).forEach(([category, commands]) => {\n      output += `${category.toUpperCase()}\\n`;\n      commands.forEach(cmd => {\n        output += `  ${cmd.name.padEnd(15)} ${cmd.description}\\n`;\n      });\n      output += '\\n';\n    });\n\n    return { success: true, output, type: 'info' };\n  }\n\n  async handlePortfolio(args, _flags) {\n    const action = args[0] || 'show';\n    return {\n      success: true,\n      output: `Portfolio ${action} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleMarketData(args, _flags) {\n    const symbol = args[0] || 'SPY';\n    return {\n      success: true,\n      output: `Market data for ${symbol} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleQuote(args, _flags) {\n    const symbol = args[0];\n    if (!symbol) {\n      return {\n        success: false,\n        output: 'Usage: quote <symbol>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Quote for ${symbol} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleCalculate(args, _flags) {\n    const calcType = args[0] || 'dcf';\n    return {\n      success: true,\n      output: `Calculate ${calcType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleDcf(_args, _flags) {\n    return {\n      success: true,\n      output: 'DCF calculation command is not implemented yet.',\n      type: 'info'\n    };\n  }\n\n  async handleNavigate(args, _flags) {\n    const page = args[0];\n    if (!page) {\n      return {\n        success: false,\n        output: 'Usage: navigate <page>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Navigate to ${page} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleList(args, _flags) {\n    const listType = args[0] || 'holdings';\n    return {\n      success: true,\n      output: `List ${listType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleSearch(args, _flags) {\n    const query = args.join(' ');\n    if (!query) {\n      return {\n        success: false,\n        output: 'Usage: search <query>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Search for \"${query}\" command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleAnalyze(args, _flags) {\n    const target = args[0];\n    if (!target) {\n      return {\n        success: false,\n        output: 'Usage: analyze <symbol|portfolio>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Analyze ${target} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleRisk(args, _flags) {\n    const target = args[0] || 'portfolio';\n    return {\n      success: true,\n      output: `Risk analysis for ${target} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleExport(args, _flags) {\n    const dataType = args[0];\n    if (!dataType) {\n      return {\n        success: false,\n        output: 'Usage: export <data-type>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Export ${dataType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleImport(args, _flags) {\n    const filePath = args[0];\n    if (!filePath) {\n      return {\n        success: false,\n        output: 'Usage: import <file-path>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Import from ${filePath} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleStatus(_args, flags) {\n    const detailed = flags?.detailed || flags?.d;\n\n    let output = ' SYSTEM STATUS\\n';\n    output += '\\n';\n    output += 'Backend API:        Unknown\\n';\n    output += 'Cache:              Unknown\\n';\n    output += 'Watchlists:        ' + (this.context.watchlists ? ' Available' : ' Not available') + '\\n';\n    output += 'Portfolio Data:    ' + (this.context.portfolioData ? ' Loaded' : ' Not loaded') + '\\n';\n    output += 'AI Assistant:       Online\\n';\n\n    if (detailed) {\n      output += '\\nDETAILED STATUS:\\n';\n      output += `Commands in history: ${this.commandHistory.length}\\n`;\n      output += `Current page: ${this.context.currentContext?.path || 'Unknown'}\\n`;\n      output += `Session start: ${new Date().toLocaleString()}\\n`;\n    }\n\n    return {\n      success: true,\n      output,\n      type: 'info'\n    };\n  }\n\n  async handleLbo(_args, _flags) {\n    return {\n      success: true,\n      output: 'LBO analysis command is not implemented yet.',\n      type: 'info'\n    };\n  }\n\n  async handleWatch(_args, _flags) {\n    const _detailed = _flags?.detailed || _flags?.d;\n\n    let output = ' SYSTEM STATUS\\n';\n    output += '\\n';\n    output += 'Backend API:        Unknown\\n';\n    output += 'Cache:              Unknown\\n';\n    output += 'Watchlists:        ' + (this.context.watchlists ? ' Available' : ' Not available') + '\\n';\n    output += 'Portfolio Data:    ' + (this.context.portfolioData ? ' Loaded' : ' Not loaded') + '\\n';\n    output += 'AI Assistant:       Online\\n';\n\n    if (_detailed) {\n      output += '\\nDETAILED STATUS:\\n';\n      output += `Commands in history: ${this.commandHistory.length}\\n`;\n      output += `Current page: ${this.context.currentContext?.path || 'Unknown'}\\n`;\n      output += `Session start: ${new Date().toLocaleString()}\\n`;\n    }\n\n    return {\n      success: true,\n      output,\n      type: 'info'\n    };\n  }\n\n  async handleClear(_args, _flags) {\n    return {\n      success: true,\n      output: '',\n      type: 'clear'\n    };\n  }\n\n  async handleVersion(_args, _flags) {\n    return {\n      success: true,\n      output: 'FinanceAnalyst Pro v1.0.0\\nBuild: 2025.08.18\\nNode.js CLI Interface\\nSecure Backend API Integration',\n      type: 'info'\n    };\n  }\n}\n\nexport default CLICommandProcessor;\n","// Data transformation utilities for financial calculations\n\nexport const formatCurrency = (value, currency = 'USD', compact = false) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    notation: compact ? 'compact' : 'standard',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2\n  });\n\n  return formatter.format(value);\n};\n\nexport const formatPercentage = (value, decimals = 1) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n  return `${(value * 100).toFixed(decimals)}%`;\n};\n\nexport const formatNumber = (value, decimals = 2, compact = false) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    notation: compact ? 'compact' : 'standard',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: decimals\n  });\n\n  return formatter.format(value);\n};\n\nexport const calculateCAGR = (beginningValue, endingValue, years) => {\n  if (beginningValue <= 0 || endingValue <= 0 || years <= 0) return 0;\n  return Math.pow(endingValue / beginningValue, 1 / years) - 1;\n};\n\nexport const calculateNPV = (cashFlows, discountRate) => {\n  return cashFlows.reduce((npv, cashFlow, index) => {\n    return npv + cashFlow / Math.pow(1 + discountRate, index + 1);\n  }, 0);\n};\n\nexport const calculateIRR = (cashFlows, guess = 0.1) => {\n  // Handle edge cases\n  if (!cashFlows || cashFlows.length === 0 || cashFlows.length === 1) {\n    return 0;\n  }\n\n  const maxIterations = 100;\n  const tolerance = 1e-6;\n\n  let rate = guess;\n\n  for (let i = 0; i < maxIterations; i++) {\n    let npv = cashFlows[0]; // Initial investment (negative)\n    let derivative = 0;\n\n    for (let j = 1; j < cashFlows.length; j++) {\n      const factor = Math.pow(1 + rate, j);\n      npv += cashFlows[j] / factor;\n      derivative -= (j * cashFlows[j]) / (factor * (1 + rate));\n    }\n\n    if (Math.abs(npv) < tolerance) {\n      return rate;\n    }\n\n    if (Math.abs(derivative) < tolerance) {\n      break; // Avoid division by zero\n    }\n\n    rate = rate - npv / derivative;\n  }\n\n  return rate;\n};\n\nexport const calculateWACC = (costOfEquity, costOfDebt, taxRate, debtRatio) => {\n  const equityWeight = 1 - debtRatio;\n  return costOfEquity * equityWeight + costOfDebt * debtRatio * (1 - taxRate);\n};\n\nexport const calculateTerminalValue = (finalCashFlow, terminalGrowthRate, discountRate) => {\n  return (finalCashFlow * (1 + terminalGrowthRate)) / (discountRate - terminalGrowthRate);\n};\n\nexport const projectCashFlows = (baseCashFlow, growthRates, years = 5) => {\n  const cashFlows = [];\n  let currentCashFlow = baseCashFlow;\n\n  for (let i = 0; i < years; i++) {\n    const growthRate = Array.isArray(growthRates)\n      ? growthRates[i] || growthRates[growthRates.length - 1]\n      : growthRates;\n    currentCashFlow *= 1 + growthRate;\n    cashFlows.push(currentCashFlow);\n  }\n\n  return cashFlows;\n};\n\nexport const calculateDCFValuation = inputs => {\n  const {\n    currentRevenue,\n    revenueGrowthRate,\n    fcfMargin,\n    wacc,\n    terminalGrowthRate,\n    sharesOutstanding,\n    totalDebt,\n    cash,\n    projectionYears = 5\n  } = inputs;\n\n  // Project revenues\n  const projectedRevenues = projectCashFlows(currentRevenue, revenueGrowthRate, projectionYears);\n\n  // Calculate free cash flows\n  const projectedFCFs = projectedRevenues.map(revenue => revenue * fcfMargin);\n\n  // Calculate terminal value\n  const terminalValue = calculateTerminalValue(\n    projectedFCFs[projectedFCFs.length - 1],\n    terminalGrowthRate,\n    wacc\n  );\n\n  // Calculate present values\n  const pvOfCashFlows = calculateNPV(projectedFCFs, wacc);\n  const pvOfTerminalValue = terminalValue / Math.pow(1 + wacc, projectionYears);\n\n  // Calculate enterprise and equity value\n  const enterpriseValue = pvOfCashFlows + pvOfTerminalValue;\n  const equityValue = enterpriseValue - totalDebt + cash;\n  const pricePerShare = equityValue / sharesOutstanding;\n\n  return {\n    enterpriseValue,\n    equityValue,\n    pricePerShare,\n    pvOfCashFlows,\n    pvOfTerminalValue,\n    terminalValue,\n    projectedRevenues,\n    projectedFCFs,\n    wacc,\n    terminalGrowthRate\n  };\n};\n\nexport const calculateLBOReturns = inputs => {\n  const {\n    purchasePrice,\n    ebitda,\n    debtMultiple = 5,\n    exitMultiple,\n    exitYear = 5,\n    managementFeeRate = 0.02,\n    carriedInterestRate = 0.2\n  } = inputs;\n\n  // Calculate purchase structure\n  const totalDebt = ebitda * debtMultiple;\n  const equityInvestment = purchasePrice - totalDebt;\n\n  // Project EBITDA growth (simplified)\n  const ebitdaGrowthRate = 0.05; // 5% annual growth assumption\n  const exitEbitda = ebitda * Math.pow(1 + ebitdaGrowthRate, exitYear);\n\n  // Calculate exit value\n  const exitEnterpriseValue = exitEbitda * exitMultiple;\n  const remainingDebt = totalDebt * 0.5; // Assume 50% debt paydown\n  const exitEquityValue = exitEnterpriseValue - remainingDebt;\n\n  // Calculate returns\n  const totalReturn = exitEquityValue / equityInvestment;\n  const irr = Math.pow(totalReturn, 1 / exitYear) - 1;\n  const moic = totalReturn; // Multiple of Invested Capital\n\n  // Calculate fees (simplified)\n  const totalManagementFees = equityInvestment * managementFeeRate * exitYear;\n  const carriedInterest = Math.max(0, (exitEquityValue - equityInvestment) * carriedInterestRate);\n\n  return {\n    equityInvestment,\n    totalDebt,\n    exitEquityValue,\n    totalReturn,\n    irr,\n    moic,\n    exitEbitda,\n    exitEnterpriseValue,\n    managementFees: totalManagementFees,\n    carriedInterest,\n    netReturn: exitEquityValue - totalManagementFees - carriedInterest\n  };\n};\n\nexport const calculateComparableMetrics = (companyData, peerData) => {\n  const calculateStatistics = values => {\n    const validValues = values.filter(v => v !== null && v !== undefined && !isNaN(v));\n    if (validValues.length === 0) return { median: null, mean: null, min: null, max: null };\n\n    validValues.sort((a, b) => a - b);\n    const median =\n      validValues.length % 2 === 0\n        ? (validValues[validValues.length / 2 - 1] + validValues[validValues.length / 2]) / 2\n        : validValues[Math.floor(validValues.length / 2)];\n\n    const mean = validValues.reduce((sum, v) => sum + v, 0) / validValues.length;\n\n    return {\n      median,\n      mean,\n      min: Math.min(...validValues),\n      max: Math.max(...validValues),\n      count: validValues.length\n    };\n  };\n\n  const metrics = ['marketCap', 'peRatio', 'evToEbitda', 'priceToBook', 'debtToEquity'];\n  const peerStats = {};\n\n  metrics.forEach(metric => {\n    const peerValues = peerData.map(peer => peer[metric]);\n    peerStats[metric] = calculateStatistics(peerValues);\n  });\n\n  return {\n    company: companyData,\n    peerStatistics: peerStats,\n    relativeValuation: {\n      marketCapPercentile: calculatePercentile(\n        companyData.marketCap,\n        peerData.map(p => p.marketCap)\n      ),\n      peRatioRelative: companyData.peRatio / peerStats.peRatio.median,\n      evEbitdaRelative: companyData.evToEbitda / peerStats.evToEbitda.median,\n      priceToBookRelative: companyData.priceToBook / peerStats.priceToBook.median\n    }\n  };\n};\n\nexport const calculatePercentile = (value, dataset) => {\n  const validDataset = dataset.filter(v => v !== null && v !== undefined && !isNaN(v));\n  if (validDataset.length === 0 || value === null || value === undefined || isNaN(value))\n    return null;\n\n  validDataset.sort((a, b) => a - b);\n  const belowCount = validDataset.filter(v => v < value).length;\n  return belowCount / validDataset.length;\n};\n\nexport const generateMonteCarloScenarios = (baseInputs, variableRanges, iterations = 1000) => {\n  const scenarios = [];\n\n  for (let i = 0; i < iterations; i++) {\n    const scenario = { ...baseInputs };\n\n    Object.keys(variableRanges).forEach(variable => {\n      const range = variableRanges[variable];\n      const randomValue = range.min + Math.random() * (range.max - range.min);\n      scenario[variable] = randomValue;\n    });\n\n    scenarios.push(scenario);\n  }\n\n  return scenarios;\n};\n\nexport const calculateSensitivityAnalysis = (\n  baseInputs,\n  sensitivityVariable,\n  range,\n  steps = 10\n) => {\n  const results = [];\n  const stepSize = (range.max - range.min) / (steps - 1);\n\n  for (let i = 0; i < steps; i++) {\n    const variableValue = range.min + stepSize * i;\n    const inputs = { ...baseInputs, [sensitivityVariable]: variableValue };\n\n    results.push({\n      [sensitivityVariable]: variableValue,\n      inputs\n    });\n  }\n\n  return results;\n};\n","/**\n * Persistent CLI Component\n * Professional financial terminal interface that stays visible across all pages\n */\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Terminal,\n  ChevronUp,\n  ChevronDown,\n  Minimize2,\n  Maximize2,\n  X,\n  Download,\n  Zap\n} from 'lucide-react';\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\n\nimport { CLICommandProcessor } from '../../services/cliCommandProcessor';\nimport { formatCurrency, formatPercentage } from '../../utils/formatters';\n\nconst PersistentCLI = ({\n  currentContext = {},\n  portfolioData = null,\n  marketData = null,\n  onNavigate\n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [input, setInput] = useState('');\n  const [output, setOutput] = useState([\n    {\n      id: 1,\n      type: 'system',\n      content: 'FinanceAnalyst Pro Terminal v1.0.0 - Type \"help\" for available commands',\n      timestamp: new Date()\n    },\n    {\n      id: 2,\n      type: 'info',\n      content: 'Connected to secure backend API  Market data live  Ready for commands',\n      timestamp: new Date()\n    }\n  ]);\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [suggestions, setSuggestions] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const inputRef = useRef(null);\n  const outputRef = useRef(null);\n  const cliProcessor = useRef(new CLICommandProcessor());\n\n  // Auto-scroll to bottom when output changes\n  useEffect(() => {\n    if (outputRef.current) {\n      outputRef.current.scrollTop = outputRef.current.scrollHeight;\n    }\n  }, [output]);\n\n  // Focus input when CLI is expanded\n  useEffect(() => {\n    if (isExpanded && !isMinimized && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isExpanded, isMinimized]);\n\n  // Initialize CLI processor with context\n  useEffect(() => {\n    cliProcessor.current.updateContext({\n      currentContext,\n      portfolioData,\n      marketData,\n      onNavigate\n    });\n  }, [currentContext, portfolioData, marketData, onNavigate]);\n\n  const addOutput = useCallback((content, type = 'output') => {\n    const newOutput = {\n      id: Date.now(),\n      type,\n      content,\n      timestamp: new Date()\n    };\n    setOutput(prev => [...prev, newOutput]);\n  }, []);\n\n  const handleCommand = async(command) => {\n    if (!command.trim()) return;\n\n    // Add command to history\n    setCommandHistory(prev => [...prev, command]);\n    setHistoryIndex(-1);\n\n    // Add command to output\n    addOutput(`$ ${command}`, 'command');\n    setIsProcessing(true);\n\n    try {\n      const result = await cliProcessor.current.processCommand(command);\n\n      if (result.success) {\n        if (result.output) {\n          addOutput(result.output, result.type || 'output');\n        }\n        if (result.data && result.format) {\n          // Handle formatted data output (tables, charts, etc.)\n          addOutput(formatCommandOutput(result.data, result.format), 'formatted');\n        }\n        if (result.navigation) {\n          onNavigate?.(result.navigation);\n        }\n      } else {\n        addOutput(result.error || 'Command failed', 'error');\n      }\n    } catch (error) {\n      addOutput(`Error: ${error.message}`, 'error');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const formatCommandOutput = (data, format) => {\n    switch (format) {\n      case 'table':\n        return formatTable(data);\n      case 'json':\n        return JSON.stringify(data, null, 2);\n      case 'portfolio':\n        return formatPortfolioData(data);\n      case 'market':\n        return formatMarketData(data);\n      default:\n        return data;\n    }\n  };\n\n  const formatTable = (data) => {\n    if (!Array.isArray(data) || data.length === 0) return 'No data';\n\n    const headers = Object.keys(data[0]);\n    const maxWidths = headers.map(header =>\n      Math.max(header.length, ...data.map(row => String(row[header] || '').length))\n    );\n\n    const headerRow = headers.map((header, i) => header.padEnd(maxWidths[i])).join(' | ');\n    const separator = maxWidths.map(width => '-'.repeat(width)).join('-|-');\n    const dataRows = data.map(row =>\n      headers.map((header, i) => String(row[header] || '').padEnd(maxWidths[i])).join(' | ')\n    );\n\n    return [headerRow, separator, ...dataRows].join('\\n');\n  };\n\n  const formatPortfolioData = (data) => {\n    if (!data) return 'No portfolio data available';\n\n    let output = ' PORTFOLIO OVERVIEW\\n';\n    output += '\\n';\n    output += `Total Value: ${formatCurrency(data.totalValue || 0)}\\n`;\n    output += `Total Return: ${formatPercentage(data.totalReturn || 0)}\\n`;\n    output += `Holdings: ${data.holdings?.length || 0}\\n\\n`;\n\n    if (data.holdings && data.holdings.length > 0) {\n      output += 'HOLDINGS:\\n';\n      data.holdings.forEach(holding => {\n        output += `${holding.symbol.padEnd(6)} ${formatCurrency(holding.value || 0).padStart(12)} ${formatPercentage(holding.weight || 0).padStart(8)}\\n`;\n      });\n    }\n\n    return output;\n  };\n\n  const formatMarketData = (data) => {\n    if (!data) return 'No market data available';\n\n    let output = ' MARKET DATA\\n';\n    output += '\\n';\n\n    Object.entries(data).forEach(([key, value]) => {\n      output += `${key.toUpperCase().padEnd(15)} ${String(value).padStart(12)}\\n`;\n    });\n\n    return output;\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleCommand(input);\n      setInput('');\n      setShowSuggestions(false);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (historyIndex < commandHistory.length - 1) {\n        const newIndex = historyIndex + 1;\n        setHistoryIndex(newIndex);\n        setInput(commandHistory[commandHistory.length - 1 - newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex > 0) {\n        const newIndex = historyIndex - 1;\n        setHistoryIndex(newIndex);\n        setInput(commandHistory[commandHistory.length - 1 - newIndex]);\n      } else if (historyIndex === 0) {\n        setHistoryIndex(-1);\n        setInput('');\n      }\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      if (suggestions.length > 0) {\n        setInput(suggestions[0]);\n        setShowSuggestions(false);\n      }\n    } else if (e.key === 'Escape') {\n      setShowSuggestions(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setInput(value);\n\n    // Generate suggestions\n    if (value.trim()) {\n      const newSuggestions = cliProcessor.current.getSuggestions(value);\n      setSuggestions(newSuggestions);\n      setShowSuggestions(newSuggestions.length > 0);\n    } else {\n      setShowSuggestions(false);\n    }\n  };\n\n  const clearOutput = () => {\n    setOutput([]);\n  };\n\n  const exportOutput = () => {\n    const exportText = output.map(item =>\n      `[${item.timestamp.toLocaleTimeString()}] ${item.content}`\n    ).join('\\n');\n\n    const blob = new Blob([exportText], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `financeanalyst-cli-${new Date().toISOString().split('T')[0]}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const getOutputTypeColor = (type) => {\n    switch (type) {\n      case 'command': return 'text-blue-400';\n      case 'error': return 'text-red-400';\n      case 'success': return 'text-green-400';\n      case 'warning': return 'text-yellow-400';\n      case 'info': return 'text-cyan-400';\n      case 'system': return 'text-gray-400';\n      case 'formatted': return 'text-purple-400';\n      default: return 'text-gray-300';\n    }\n  };\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 z-30\">\n      {/* CLI Header Bar */}\n      <div\n        className=\"bg-gray-900 border-t border-gray-700 px-4 py-2 flex items-center justify-between cursor-pointer select-none\"\n        onClick={() => setIsExpanded(!isExpanded)}\n        role=\"button\"\n        tabIndex={0}\n        aria-label={`${isExpanded ? 'Collapse' : 'Expand'} terminal`}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            setIsExpanded(!isExpanded);\n          }\n        }}\n      >\n        <div className=\"flex items-center space-x-3\">\n          <Terminal className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-sm font-mono text-gray-300\">\n            FinanceAnalyst Pro Terminal\n          </span>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\n            <span className=\"text-xs text-gray-500\">Live</span>\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          {!isMinimized && (\n            <>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  clearOutput();\n                }}\n                className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n                title=\"Clear output\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  exportOutput();\n                }}\n                className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n                title=\"Export output\"\n              >\n                <Download className=\"w-4 h-4\" />\n              </button>\n            </>\n          )}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsMinimized(!isMinimized);\n            }}\n            className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n          >\n            {isMinimized ? <Maximize2 className=\"w-4 h-4\" /> : <Minimize2 className=\"w-4 h-4\" />}\n          </button>\n          <button\n            className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n            title={isExpanded ? 'Collapse' : 'Expand'}\n          >\n            {isExpanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronUp className=\"w-4 h-4\" />}\n          </button>\n        </div>\n      </div>\n\n      {/* CLI Interface */}\n      <AnimatePresence>\n        {isExpanded && !isMinimized && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 400, opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3, ease: 'easeInOut' }}\n            className=\"bg-gray-900 border-t border-gray-700 overflow-hidden\"\n          >\n            <div className=\"h-full flex flex-col\">\n              {/* Output Area */}\n              <div\n                ref={outputRef}\n                className=\"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1\"\n                style={{ maxHeight: '320px' }}\n              >\n                {output.map((item) => (\n                  <div key={item.id} className={`${getOutputTypeColor(item.type)} whitespace-pre-wrap`}>\n                    {item.type === 'formatted' ? (\n                      <div className=\"bg-gray-800 p-3 rounded border border-gray-700 overflow-x-auto\">\n                        <pre className=\"text-xs text-gray-300\">{item.content}</pre>\n                      </div>\n                    ) : (\n                      item.content\n                    )}\n                  </div>\n                ))}\n\n                {isProcessing && (\n                  <div className=\"text-yellow-400 flex items-center space-x-2\">\n                    <div className=\"animate-spin w-3 h-3 border border-yellow-400 border-t-transparent rounded-full\" />\n                    <span>Processing...</span>\n                  </div>\n                )}\n              </div>\n\n              {/* Suggestions */}\n              {showSuggestions && suggestions.length > 0 && (\n                <div className=\"border-t border-gray-700 bg-gray-800 p-2\">\n                  <div className=\"text-xs text-gray-400 mb-1\">Suggestions (Tab to complete):</div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {suggestions.slice(0, 6).map((suggestion, index) => (\n                      <button\n                        key={index}\n                        onClick={() => {\n                          setInput(suggestion);\n                          setShowSuggestions(false);\n                          inputRef.current?.focus();\n                        }}\n                        className=\"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors\"\n                      >\n                        {suggestion}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Input Area */}\n              <div className=\"border-t border-gray-700 p-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-green-400 font-mono\">$</span>\n                  <input\n                    ref={inputRef}\n                    type=\"text\"\n                    value={input}\n                    onChange={handleInputChange}\n                    onKeyDown={handleKeyDown}\n                    placeholder=\"Enter financial command... (type 'help' for commands)\"\n                    className=\"flex-1 bg-transparent text-gray-300 font-mono outline-none placeholder-gray-500\"\n                    disabled={isProcessing}\n                  />\n                  {isProcessing && (\n                    <div className=\"text-yellow-400\">\n                      <Zap className=\"w-4 h-4 animate-pulse\" />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"mt-2 text-xs text-gray-500 flex items-center justify-between\">\n                  <span>\n                    Use  for history  Tab for autocomplete  Type &quot;help&quot; for commands\n                  </span>\n                  <span>\n                    {commandHistory.length} commands in history\n                  </span>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default PersistentCLI;\n","/**\n * Production Monitoring and Analytics Utilities\n * Handles error tracking, performance monitoring, and user analytics\n */\n\nclass MonitoringService {\n  constructor() {\n    this.isProduction = import.meta.env.VITE_APP_ENV === 'production';\n    this.enableAnalytics = import.meta.env.VITE_ENABLE_ANALYTICS === 'true';\n    this.enableErrorReporting = import.meta.env.VITE_ENABLE_ERROR_REPORTING === 'true';\n    this.enablePerformanceMonitoring = import.meta.env.VITE_PERFORMANCE_MONITORING === 'true';\n    this.gaTrackingId = null;\n    this.hotjarLoaded = false;\n\n    this.initializeMonitoring();\n  }\n\n  /**\n   * Initialize all monitoring services\n   */\n  initializeMonitoring() {\n    if (this.enableErrorReporting) {\n      this.initializeSentry();\n    }\n\n    if (this.enableAnalytics) {\n      this.initializeGoogleAnalytics();\n      this.initializeHotjar();\n    }\n\n    if (this.enablePerformanceMonitoring) {\n      this.initializePerformanceMonitoring();\n    }\n\n    this.setupGlobalErrorHandlers();\n  }\n\n  /**\n   * Initialize Sentry for error tracking\n   */\n  initializeSentry() {\n    const sentryDsn = import.meta.env.VITE_SENTRY_DSN;\n    if (!sentryDsn) return;\n\n    // Dynamically import Sentry to avoid bundle bloat\n    import('@sentry/browser')\n      .then(async(Sentry) => {\n        const integrations = [];\n\n        Sentry.init({\n          dsn: sentryDsn,\n          environment: import.meta.env.VITE_APP_ENV,\n          release: import.meta.env.VITE_APP_VERSION,\n          integrations,\n          tracesSampleRate: this.isProduction ? 0.1 : 1.0,\n          beforeSend: event => {\n            // Filter out non-critical errors in production\n            if (this.isProduction && event.level === 'warning') {\n              return null;\n            }\n            return event;\n          }\n        });\n\n        Sentry.configureScope(scope => {\n          scope.setTag('component', 'financeanalyst-pro');\n          scope.setContext('app', {\n            version: import.meta.env.VITE_APP_VERSION,\n            environment: import.meta.env.VITE_APP_ENV\n          });\n        });\n\n        // Expose globally for cases that call window.Sentry\n        window.Sentry = Sentry;\n      })\n      .catch(console.warn);\n  }\n\n  /**\n   * Initialize Google Analytics\n   */\n  initializeGoogleAnalytics() {\n    const gaTrackingId = import.meta.env.VITE_GA_TRACKING_ID;\n    if (!gaTrackingId) return;\n\n    // Load Google Analytics script\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = `https://www.googletagmanager.com/gtag/js?id=${gaTrackingId}`;\n    document.head.appendChild(script);\n\n    // Initialize gtag\n    window.dataLayer = window.dataLayer || [];\n    function gtag() {\n      window.dataLayer.push(arguments);\n    }\n    window.gtag = gtag;\n\n    gtag('js', new Date());\n    gtag('config', gaTrackingId, {\n      page_title: document.title,\n      page_location: window.location.href\n    });\n\n    // store for route-change pageview updates\n    this.gaTrackingId = gaTrackingId;\n  }\n\n  /**\n   * Initialize Hotjar for user behavior analytics\n   */\n  initializeHotjar() {\n    const hotjarId = import.meta.env.VITE_HOTJAR_ID;\n    if (!hotjarId) return;\n\n    (function(h, o, t, j, a, r) {\n      h.hj =\n        h.hj ||\n        function() {\n          (h.hj.q = h.hj.q || []).push(arguments);\n        };\n      h._hjSettings = { hjid: hotjarId, hjsv: 6 };\n      a = o.getElementsByTagName('head')[0];\n      r = o.createElement('script');\n      r.async = 1;\n      r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n      a.appendChild(r);\n    })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');\n\n    this.hotjarLoaded = true;\n  }\n\n  /**\n   * Initialize performance monitoring\n   */\n  initializePerformanceMonitoring() {\n    // Core Web Vitals monitoring\n    this.monitorCoreWebVitals();\n\n    // Custom performance metrics\n    this.monitorCustomMetrics();\n\n    // Resource loading monitoring\n    this.monitorResourceLoading();\n  }\n\n  /**\n   * Monitor Core Web Vitals\n   */\n  monitorCoreWebVitals() {\n    // Dynamically import web-vitals library\n    import('web-vitals')\n      .then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n        getCLS(this.sendToAnalytics.bind(this));\n        getFID(this.sendToAnalytics.bind(this));\n        getFCP(this.sendToAnalytics.bind(this));\n        getLCP(this.sendToAnalytics.bind(this));\n        getTTFB(this.sendToAnalytics.bind(this));\n      })\n      .catch(console.warn);\n  }\n\n  /**\n   * Monitor custom performance metrics\n   */\n  monitorCustomMetrics() {\n    // Monitor API response times\n    this.monitorApiPerformance();\n\n    // Monitor component render times\n    this.monitorComponentPerformance();\n\n    // Monitor memory usage\n    this.monitorMemoryUsage();\n  }\n\n  /**\n   * Monitor API performance\n   */\n  monitorApiPerformance() {\n    const originalFetch = window.fetch;\n    window.fetch = async(...args) => {\n      const startTime = performance.now();\n      try {\n        const response = await originalFetch(...args);\n        const endTime = performance.now();\n\n        this.trackEvent('api_performance', {\n          url: args[0],\n          duration: endTime - startTime,\n          status: response.status,\n          success: response.ok\n        });\n\n        return response;\n      } catch (error) {\n        const endTime = performance.now();\n\n        this.trackEvent('api_error', {\n          url: args[0],\n          duration: endTime - startTime,\n          error: error.message\n        });\n\n        throw error;\n      }\n    };\n  }\n\n  /**\n   * Monitor component performance\n   */\n  monitorComponentPerformance() {\n    // Use Performance Observer to monitor long tasks\n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver(list => {\n        for (const entry of list.getEntries()) {\n          if (entry.duration > 50) {\n            // Tasks longer than 50ms\n            this.trackEvent('long_task', {\n              duration: entry.duration,\n              startTime: entry.startTime\n            });\n          }\n        }\n      });\n\n      observer.observe({ entryTypes: ['longtask'] });\n    }\n  }\n\n  /**\n   * Monitor memory usage\n   */\n  monitorMemoryUsage() {\n    if ('memory' in performance) {\n      setInterval(() => {\n        const memory = performance.memory;\n        this.trackEvent('memory_usage', {\n          usedJSHeapSize: memory.usedJSHeapSize,\n          totalJSHeapSize: memory.totalJSHeapSize,\n          jsHeapSizeLimit: memory.jsHeapSizeLimit\n        });\n      }, 60000); // Every minute\n    }\n  }\n\n  /**\n   * Monitor resource loading\n   */\n  monitorResourceLoading() {\n    if ('PerformanceObserver' in window) {\n      const observer = new PerformanceObserver(list => {\n        for (const entry of list.getEntries()) {\n          if (entry.transferSize > 1000000) {\n            // Resources larger than 1MB\n            this.trackEvent('large_resource', {\n              name: entry.name,\n              size: entry.transferSize,\n              duration: entry.duration\n            });\n          }\n        }\n      });\n\n      observer.observe({ entryTypes: ['resource'] });\n    }\n  }\n\n  /**\n   * Setup global error handlers\n   */\n  setupGlobalErrorHandlers() {\n    // Unhandled promise rejections\n    window.addEventListener('unhandledrejection', event => {\n      this.trackError(event.reason, 'unhandled_promise_rejection');\n    });\n\n    // Global JavaScript errors\n    window.addEventListener('error', event => {\n      this.trackError(event.error, 'javascript_error', {\n        filename: event.filename,\n        lineno: event.lineno,\n        colno: event.colno\n      });\n    });\n\n    // Resource loading errors\n    window.addEventListener(\n      'error',\n      event => {\n        if (event.target !== window) {\n          this.trackError(\n            new Error(`Resource failed to load: ${event.target.src || event.target.href}`),\n            'resource_error'\n          );\n        }\n      },\n      true\n    );\n  }\n\n  /**\n   * Track custom events\n   */\n  trackEvent(eventName, properties = {}) {\n    if (!this.enableAnalytics) return;\n\n    // Send to Google Analytics\n    if (window.gtag) {\n      window.gtag('event', eventName, properties);\n    }\n\n    // Send to custom analytics endpoint\n    this.sendToCustomAnalytics(eventName, properties);\n  }\n\n  /**\n   * Track errors\n   */\n  trackError(error, category = 'error', additionalData = {}) {\n    if (!this.enableErrorReporting) return;\n\n    console.error(`[${category}]`, error, additionalData);\n\n    // Send to Sentry if available\n    if (window.Sentry) {\n      window.Sentry.captureException(error, {\n        tags: { category },\n        extra: additionalData\n      });\n    }\n\n    // Track as event\n    this.trackEvent('error_occurred', {\n      category,\n      message: error.message,\n      stack: error.stack,\n      ...additionalData\n    });\n  }\n\n  /**\n   * Send metrics to analytics\n   */\n  sendToAnalytics(metric) {\n    this.trackEvent('web_vital', {\n      name: metric.name,\n      value: metric.value,\n      rating: metric.rating\n    });\n  }\n\n  /**\n   * Send to custom analytics endpoint\n   */\n  sendToCustomAnalytics(eventName, properties) {\n    if (!this.isProduction) return;\n\n    // Send to your custom analytics endpoint\n    fetch('/api/analytics', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        event: eventName,\n        properties: {\n          ...properties,\n          timestamp: new Date().toISOString(),\n          userAgent: navigator.userAgent,\n          url: window.location.href\n        }\n      })\n    }).catch(() => {\n      // Silently fail for analytics\n    });\n  }\n\n  /**\n   * Track page views\n   */\n  trackPageView(pageName, additionalData = {}) {\n    // Update GA single-page-app page view\n    if (window.gtag && this.gaTrackingId) {\n      window.gtag('config', this.gaTrackingId, {\n        page_title: document.title,\n        page_path: pageName,\n        page_location: window.location.href\n      });\n    }\n\n    // Notify Hotjar of route change\n    if (typeof window.hj === 'function') {\n      window.hj('stateChange', pageName);\n    }\n\n    // Custom analytics event\n    this.trackEvent('page_view', {\n      page: pageName,\n      title: document.title,\n      url: window.location.href,\n      ...additionalData\n    });\n  }\n\n  /**\n   * Track user interactions\n   */\n  trackUserInteraction(action, element, additionalData = {}) {\n    this.trackEvent('user_interaction', {\n      action,\n      element,\n      ...additionalData\n    });\n  }\n}\n\n// Create singleton instance\nconst monitoring = new MonitoringService();\n\nexport default monitoring;\n","import React from 'react';\n\nimport Icon from './AppIcon';\nimport monitoring from '../utils/monitoring';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(_error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    error.__ErrorBoundary = true;\n    window.__COMPONENT_ERROR__?.(error, errorInfo);\n    // Report to monitoring/Sentry\n    try {\n      monitoring.trackError(error, 'react_error', {\n        componentStack: errorInfo?.componentStack\n      });\n    } catch (_) {\n      // noop\n    }\n    // console.log(\"Error caught by ErrorBoundary:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-neutral-50\">\n          <div className=\"text-center p-8 max-w-md\">\n            <div className=\"flex justify-center items-center mb-2\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"42px\"\n                height=\"42px\"\n                viewBox=\"0 0 32 33\"\n                fill=\"none\"\n              >\n                <path\n                  d=\"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z\"\n                  stroke=\"#343330\"\n                  strokeWidth=\"2\"\n                  strokeMiterlimit=\"10\"\n                />\n                <path\n                  d=\"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z\"\n                  fill=\"#343330\"\n                />\n                <path\n                  d=\"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z\"\n                  fill=\"#343330\"\n                />\n                <path\n                  d=\"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5\"\n                  stroke=\"#343330\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n            </div>\n            <div className=\"flex flex-col gap-1 text-center\">\n              <h1 className=\"text-2xl font-medium text-neutral-800\">Something went wrong</h1>\n              <p className=\"text-neutral-600 text-base w w-8/12 mx-auto\">\n                We encountered an unexpected error while processing your request.\n              </p>\n            </div>\n            <div className=\"flex justify-center items-center mt-6\">\n              <button\n                onClick={() => {\n                  window.location.href = '/';\n                }}\n                className=\"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm\"\n              >\n                <Icon name=\"ArrowLeft\" size={18} color=\"#fff\" />\n                Back\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","// Accessibility Testing Framework with axe-core\nimport axeCore from 'axe-core';\n\nclass AccessibilityTester {\n  constructor(options = {}) {\n    this.options = {\n      // Default axe configuration\n      rules: {\n        // Financial application specific rules\n        'color-contrast': { enabled: true },\n        'keyboard-navigation': { enabled: true },\n        'focus-management': { enabled: true },\n        'aria-labels': { enabled: true },\n        'heading-order': { enabled: true },\n        'landmark-one-main': { enabled: true },\n        'skip-link': { enabled: true },\n\n        // Disable rules that might conflict with financial widgets\n        'nested-interactive': { enabled: false }, // Some financial tables need nested controls\n\n        ...options.rules\n      },\n      tags: ['wcag2a', 'wcag2aa', 'wcag21aa', 'best-practice'],\n      runOnly: options.runOnly || null,\n      reporter: options.reporter || 'v2',\n      ...options\n    };\n\n    this.violations = [];\n    this.lastTestResults = null;\n  }\n\n  // Run accessibility tests on current page or specific element\n  async runTests(element = document, options = {}) {\n    const testOptions = {\n      ...this.options,\n      ...options\n    };\n\n    try {\n      console.log(' Running accessibility tests...');\n      const results = await axeCore.run(element, testOptions);\n\n      this.lastTestResults = results;\n      this.violations = results.violations;\n\n      // Log results\n      this.logResults(results);\n\n      // Report violations in development\n      if (import.meta.env.DEV) {\n        this.reportViolations(results.violations);\n      }\n\n      // Store results for analytics\n      this.storeResults(results);\n\n      return results;\n    } catch (error) {\n      console.error('Accessibility testing failed:', error);\n      throw error;\n    }\n  }\n\n  // Test specific financial components\n  async testFinancialComponent(selector, componentType = 'generic') {\n    const element = document.querySelector(selector);\n    if (!element) {\n      throw new Error(`Element not found: ${selector}`);\n    }\n\n    // Component-specific test configurations\n    const componentConfigs = {\n      'spreadsheet': {\n        rules: {\n          'table-header': { enabled: true },\n          'th-has-data-cells': { enabled: true },\n          'table-duplicate-name': { enabled: true },\n          'scope-attr-valid': { enabled: true }\n        },\n        tags: ['wcag2aa', 'section508']\n      },\n\n      'chart': {\n        rules: {\n          'image-alt': { enabled: true },\n          'svg-img-alt': { enabled: true },\n          'aria-hidden-focus': { enabled: true }\n        },\n        tags: ['wcag2aa']\n      },\n\n      'calculator': {\n        rules: {\n          'label': { enabled: true },\n          'form-field-multiple-labels': { enabled: true },\n          'duplicate-id': { enabled: true }\n        },\n        tags: ['wcag2aa', 'section508']\n      },\n\n      'modal': {\n        rules: {\n          'focus-trap': { enabled: true },\n          'aria-dialog-name': { enabled: true },\n          'keyboard-navigation': { enabled: true }\n        },\n        tags: ['wcag2aa', 'best-practice']\n      }\n    };\n\n    const config = componentConfigs[componentType] || {};\n    return await this.runTests(element, config);\n  }\n\n  // Test keyboard navigation\n  async testKeyboardNavigation() {\n    console.log(' Testing keyboard navigation...');\n\n    const focusableElements = this.getFocusableElements();\n    const tabOrderIssues = [];\n\n    // Test tab order\n    let previousTabIndex = -1;\n    focusableElements.forEach((element, index) => {\n      const tabIndex = element.tabIndex || 0;\n\n      if (tabIndex > 0 && tabIndex <= previousTabIndex) {\n        tabOrderIssues.push({\n          element: element.tagName,\n          id: element.id,\n          tabIndex,\n          position: index,\n          issue: 'Tab order not sequential'\n        });\n      }\n\n      previousTabIndex = tabIndex;\n    });\n\n    // Test focus visibility\n    const focusVisibilityIssues = [];\n    focusableElements.forEach(element => {\n      const styles = window.getComputedStyle(element, ':focus');\n      const hasOutline = styles.outline !== 'none' && styles.outline !== '0px';\n      const hasBoxShadow = styles.boxShadow !== 'none';\n      const hasBackground = styles.backgroundColor !== 'transparent';\n\n      if (!hasOutline && !hasBoxShadow && !hasBackground) {\n        focusVisibilityIssues.push({\n          element: element.tagName,\n          id: element.id,\n          className: element.className,\n          issue: 'No visible focus indicator'\n        });\n      }\n    });\n\n    return {\n      focusableElementsCount: focusableElements.length,\n      tabOrderIssues,\n      focusVisibilityIssues,\n      passed: tabOrderIssues.length === 0 && focusVisibilityIssues.length === 0\n    };\n  }\n\n  // Test color contrast for financial data\n  async testColorContrast() {\n    console.log(' Testing color contrast...');\n\n    const textElements = document.querySelectorAll('p, span, div, td, th, label, button, a, h1, h2, h3, h4, h5, h6');\n    const contrastIssues = [];\n\n    textElements.forEach(element => {\n      const styles = window.getComputedStyle(element);\n      const textColor = styles.color;\n      const backgroundColor = styles.backgroundColor;\n\n      // Skip if background is transparent\n      if (backgroundColor === 'transparent' || backgroundColor === 'rgba(0, 0, 0, 0)') {\n        return;\n      }\n\n      const contrast = this.calculateContrastRatio(textColor, backgroundColor);\n      const fontSize = parseInt(styles.fontSize);\n      const fontWeight = styles.fontWeight;\n\n      // WCAG AA requirements\n      const isLargeText = fontSize >= 18 || (fontSize >= 14 && (fontWeight === 'bold' || fontWeight >= 700));\n      const requiredRatio = isLargeText ? 3.0 : 4.5;\n\n      if (contrast < requiredRatio) {\n        contrastIssues.push({\n          element: element.tagName,\n          id: element.id,\n          className: element.className,\n          textColor,\n          backgroundColor,\n          contrast: contrast.toFixed(2),\n          required: requiredRatio,\n          fontSize,\n          fontWeight,\n          text: element.textContent?.substring(0, 50) + '...'\n        });\n      }\n    });\n\n    return {\n      totalElements: textElements.length,\n      contrastIssues,\n      passed: contrastIssues.length === 0\n    };\n  }\n\n  // Test financial forms accessibility\n  async testFormAccessibility() {\n    console.log(' Testing form accessibility...');\n\n    const forms = document.querySelectorAll('form');\n    const formIssues = [];\n\n    forms.forEach((form, formIndex) => {\n      const inputs = form.querySelectorAll('input, select, textarea');\n\n      inputs.forEach(input => {\n        const issues = [];\n\n        // Check for labels\n        const hasLabel = this.hasAssociatedLabel(input);\n        if (!hasLabel) {\n          issues.push('Missing label');\n        }\n\n        // Check for required field indication\n        if (input.required && !this.hasRequiredIndication(input)) {\n          issues.push('Required field not clearly indicated');\n        }\n\n        // Check for error states\n        if (input.getAttribute('aria-invalid') === 'true' && !this.hasErrorMessage(input)) {\n          issues.push('Error state without error message');\n        }\n\n        // Check for autocomplete on financial inputs\n        if (this.isFinancialInput(input) && !input.autocomplete) {\n          issues.push('Financial input missing autocomplete attribute');\n        }\n\n        if (issues.length > 0) {\n          formIssues.push({\n            formIndex,\n            inputType: input.type,\n            inputId: input.id,\n            inputName: input.name,\n            issues\n          });\n        }\n      });\n    });\n\n    return {\n      totalForms: forms.length,\n      formIssues,\n      passed: formIssues.length === 0\n    };\n  }\n\n  // Generate comprehensive accessibility report\n  generateReport() {\n    if (!this.lastTestResults) {\n      throw new Error('No test results available. Run tests first.');\n    }\n\n    const { violations, passes, incomplete, inapplicable } = this.lastTestResults;\n\n    return {\n      summary: {\n        timestamp: new Date().toISOString(),\n        totalChecks: violations.length + passes.length + incomplete.length + inapplicable.length,\n        violations: violations.length,\n        passes: passes.length,\n        incomplete: incomplete.length,\n        inapplicable: inapplicable.length,\n        score: this.calculateAccessibilityScore()\n      },\n      violations: violations.map(violation => ({\n        id: violation.id,\n        impact: violation.impact,\n        description: violation.description,\n        help: violation.help,\n        helpUrl: violation.helpUrl,\n        nodes: violation.nodes.length,\n        tags: violation.tags\n      })),\n      recommendations: this.generateRecommendations(violations),\n      financialSpecific: this.getFinancialAccessibilityInsights()\n    };\n  }\n\n  // Calculate accessibility score (0-100)\n  calculateAccessibilityScore() {\n    if (!this.lastTestResults) return 0;\n\n    const { violations, passes } = this.lastTestResults;\n    const totalTests = violations.length + passes.length;\n\n    if (totalTests === 0) return 100;\n\n    // Weight violations by impact\n    const impactWeights = { critical: 4, serious: 3, moderate: 2, minor: 1 };\n    const violationScore = violations.reduce((score, violation) => {\n      return score + (impactWeights[violation.impact] || 1);\n    }, 0);\n\n    const maxPossibleScore = totalTests * 4; // Assuming all could be critical\n    return Math.max(0, 100 - (violationScore / maxPossibleScore) * 100);\n  }\n\n  // Generate specific recommendations for financial applications\n  generateRecommendations(violations) {\n    const recommendations = [];\n\n    violations.forEach(violation => {\n      switch (violation.id) {\n        case 'color-contrast':\n          recommendations.push({\n            category: 'Visual Design',\n            priority: 'High',\n            issue: 'Insufficient color contrast',\n            solution: 'Ensure text colors meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)',\n            financialContext: 'Critical for reading financial data and avoiding misinterpretation of numbers'\n          });\n          break;\n\n        case 'keyboard-navigation':\n          recommendations.push({\n            category: 'Keyboard Access',\n            priority: 'High',\n            issue: 'Keyboard navigation issues',\n            solution: 'Ensure all interactive elements are keyboard accessible with visible focus indicators',\n            financialContext: 'Essential for users who rely on keyboard navigation to access financial tools'\n          });\n          break;\n\n        case 'label':\n          recommendations.push({\n            category: 'Form Controls',\n            priority: 'High',\n            issue: 'Missing form labels',\n            solution: 'Add proper labels to all form controls, especially financial input fields',\n            financialContext: 'Critical for screen readers to understand financial input requirements'\n          });\n          break;\n\n        case 'aria-hidden-focus':\n          recommendations.push({\n            category: 'ARIA Usage',\n            priority: 'Medium',\n            issue: 'Focusable elements hidden from screen readers',\n            solution: 'Review aria-hidden usage on interactive elements',\n            financialContext: 'May hide important financial controls from assistive technology users'\n          });\n          break;\n      }\n    });\n\n    return recommendations;\n  }\n\n  // Get financial application specific accessibility insights\n  getFinancialAccessibilityInsights() {\n    const insights = [];\n\n    // Check for financial data tables\n    const tables = document.querySelectorAll('table');\n    if (tables.length > 0) {\n      insights.push({\n        component: 'Data Tables',\n        recommendation: 'Ensure financial data tables have proper headers and scope attributes for screen reader navigation'\n      });\n    }\n\n    // Check for charts\n    const charts = document.querySelectorAll('[data-chart], .recharts-wrapper, canvas');\n    if (charts.length > 0) {\n      insights.push({\n        component: 'Charts and Graphs',\n        recommendation: 'Provide alternative text descriptions and data tables for financial charts'\n      });\n    }\n\n    // Check for calculators\n    const calculators = document.querySelectorAll('[data-calculator], .calculator');\n    if (calculators.length > 0) {\n      insights.push({\n        component: 'Financial Calculators',\n        recommendation: 'Ensure calculator inputs have clear labels and results are announced to screen readers'\n      });\n    }\n\n    return insights;\n  }\n\n  // Utility methods\n  getFocusableElements() {\n    const focusableSelectors = [\n      'a[href]',\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      '[tabindex]:not([tabindex=\"-1\"])'\n    ];\n\n    return Array.from(document.querySelectorAll(focusableSelectors.join(',')));\n  }\n\n  hasAssociatedLabel(input) {\n    const id = input.id;\n    const ariaLabel = input.getAttribute('aria-label');\n    const ariaLabelledby = input.getAttribute('aria-labelledby');\n\n    if (ariaLabel || ariaLabelledby) return true;\n    if (id && document.querySelector(`label[for=\"${id}\"]`)) return true;\n\n    // Check for wrapping label\n    const parentLabel = input.closest('label');\n    return !!parentLabel;\n  }\n\n  hasRequiredIndication(input) {\n    const ariaRequired = input.getAttribute('aria-required');\n    const requiredAttr = input.hasAttribute('required');\n    const hasRequiredText = this.hasRequiredTextIndicator(input);\n\n    return ariaRequired === 'true' || requiredAttr || hasRequiredText;\n  }\n\n  hasRequiredTextIndicator(input) {\n    const label = this.getAssociatedLabel(input);\n    if (!label) return false;\n\n    const text = label.textContent || '';\n    return text.includes('*') || text.toLowerCase().includes('required');\n  }\n\n  hasErrorMessage(input) {\n    const ariaDescribedby = input.getAttribute('aria-describedby');\n    if (ariaDescribedby) {\n      const errorElement = document.getElementById(ariaDescribedby);\n      return errorElement && errorElement.textContent;\n    }\n    return false;\n  }\n\n  isFinancialInput(input) {\n    const financialTypes = ['number', 'email', 'tel'];\n    const financialNames = ['amount', 'price', 'rate', 'percent', 'currency', 'value'];\n\n    return financialTypes.includes(input.type) ||\n           financialNames.some(name => input.name?.toLowerCase().includes(name));\n  }\n\n  getAssociatedLabel(input) {\n    const id = input.id;\n    if (id) {\n      const label = document.querySelector(`label[for=\"${id}\"]`);\n      if (label) return label;\n    }\n\n    return input.closest('label');\n  }\n\n  // Simplified contrast ratio calculation\n  calculateContrastRatio(color1, color2) {\n    // This is a simplified version - in production use a proper color contrast library\n    const rgb1 = this.parseColor(color1);\n    const rgb2 = this.parseColor(color2);\n\n    const l1 = this.getLuminance(rgb1);\n    const l2 = this.getLuminance(rgb2);\n\n    const lighter = Math.max(l1, l2);\n    const darker = Math.min(l1, l2);\n\n    return (lighter + 0.05) / (darker + 0.05);\n  }\n\n  parseColor(color) {\n    // Simple RGB parsing - expand for production use\n    const match = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n    if (match) {\n      return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])];\n    }\n    return [0, 0, 0]; // Default to black\n  }\n\n  getLuminance([r, g, b]) {\n    const [rs, gs, bs] = [r, g, b].map(c => {\n      c = c / 255;\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n    });\n    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;\n  }\n\n  logResults(results) {\n    console.group(' Accessibility Test Results');\n    console.log(` Passed: ${results.passes.length}`);\n    console.log(` Violations: ${results.violations.length}`);\n    console.log(`  Incomplete: ${results.incomplete.length}`);\n    console.log(` Not applicable: ${results.inapplicable.length}`);\n\n    if (results.violations.length > 0) {\n      console.warn('Violations found:');\n      results.violations.forEach(violation => {\n        console.warn(`- ${violation.id}: ${violation.description}`);\n      });\n    }\n    console.groupEnd();\n  }\n\n  reportViolations(violations) {\n    violations.forEach(violation => {\n      violation.nodes.forEach(node => {\n        console.error('Accessibility violation:', {\n          rule: violation.id,\n          impact: violation.impact,\n          element: node.target,\n          message: node.failureSummary\n        });\n      });\n    });\n  }\n\n  storeResults(results) {\n    try {\n      const reportData = {\n        timestamp: Date.now(),\n        url: window.location.href,\n        violations: results.violations.length,\n        passes: results.passes.length,\n        score: this.calculateAccessibilityScore()\n      };\n\n      const existingReports = JSON.parse(localStorage.getItem('accessibility-reports') || '[]');\n      existingReports.push(reportData);\n\n      // Keep only last 10 reports\n      if (existingReports.length > 10) {\n        existingReports.splice(0, existingReports.length - 10);\n      }\n\n      localStorage.setItem('accessibility-reports', JSON.stringify(existingReports));\n    } catch (error) {\n      console.error('Failed to store accessibility results:', error);\n    }\n  }\n}\n\n// Create singleton instance\nexport const accessibilityTester = new AccessibilityTester();\n\n// React hook for accessibility testing\nexport function useAccessibilityTester() {\n  return {\n    runTests: (element, options) => accessibilityTester.runTests(element, options),\n    testFinancialComponent: (selector, type) => accessibilityTester.testFinancialComponent(selector, type),\n    testKeyboardNavigation: () => accessibilityTester.testKeyboardNavigation(),\n    testColorContrast: () => accessibilityTester.testColorContrast(),\n    testFormAccessibility: () => accessibilityTester.testFormAccessibility(),\n    generateReport: () => accessibilityTester.generateReport(),\n    getScore: () => accessibilityTester.calculateAccessibilityScore()\n  };\n}\n\nexport default AccessibilityTester;\n","// Real User Monitoring and Web Vitals Tracking\n\n// Web Vitals metrics tracking\nconst webVitalsData = {\n  CLS: null,\n  FID: null,\n  FCP: null,\n  LCP: null,\n  TTFB: null,\n  INP: null\n};\n\n// Performance observer for tracking metrics\nconst _performanceEntries = [];\nlet _performanceObserver;\n\n// Initialize performance monitoring\nexport function initializePerformanceMonitoring() {\n  // Initialize Web Vitals tracking\n  initializeWebVitals();\n\n  // Initialize custom performance tracking\n  initializeCustomMetrics();\n\n  // Initialize navigation timing\n  trackNavigationTiming();\n\n  // Initialize resource timing\n  trackResourceTiming();\n\n  // Initialize user interactions\n  trackUserInteractions();\n\n  console.log('Performance monitoring initialized');\n}\n\n// Web Vitals implementation\nfunction initializeWebVitals() {\n  // Cumulative Layout Shift (CLS)\n  let clsValue = 0;\n  const clsEntries = [];\n\n  new PerformanceObserver((entryList) => {\n    for (const entry of entryList.getEntries()) {\n      if (!entry.hadRecentInput) {\n        clsValue += entry.value;\n        clsEntries.push(entry);\n      }\n    }\n    webVitalsData.CLS = clsValue;\n    reportWebVital('CLS', clsValue, clsEntries);\n  }).observe({ type: 'layout-shift', buffered: true });\n\n  // First Input Delay (FID) / Interaction to Next Paint (INP)\n  new PerformanceObserver((entryList) => {\n    for (const entry of entryList.getEntries()) {\n      if (entry.name === 'first-input-delay') {\n        webVitalsData.FID = entry.processingStart - entry.startTime;\n        reportWebVital('FID', webVitalsData.FID, [entry]);\n      }\n\n      // Track INP for better user interaction measurement\n      if (entry.interactionId) {\n        const duration = entry.processingEnd - entry.startTime;\n        if (!webVitalsData.INP || duration > webVitalsData.INP) {\n          webVitalsData.INP = duration;\n          reportWebVital('INP', duration, [entry]);\n        }\n      }\n    }\n  }).observe({ type: 'event', buffered: true });\n\n  // First Contentful Paint (FCP)\n  new PerformanceObserver((entryList) => {\n    for (const entry of entryList.getEntries()) {\n      if (entry.name === 'first-contentful-paint') {\n        webVitalsData.FCP = entry.startTime;\n        reportWebVital('FCP', entry.startTime, [entry]);\n      }\n    }\n  }).observe({ type: 'paint', buffered: true });\n\n  // Largest Contentful Paint (LCP)\n  new PerformanceObserver((entryList) => {\n    const entries = entryList.getEntries();\n    const lastEntry = entries[entries.length - 1];\n    webVitalsData.LCP = lastEntry.startTime;\n    reportWebVital('LCP', lastEntry.startTime, [lastEntry]);\n  }).observe({ type: 'largest-contentful-paint', buffered: true });\n\n  // Time to First Byte (TTFB)\n  const navigationEntry = performance.getEntriesByType('navigation')[0];\n  if (navigationEntry) {\n    webVitalsData.TTFB = navigationEntry.responseStart - navigationEntry.requestStart;\n    reportWebVital('TTFB', webVitalsData.TTFB, [navigationEntry]);\n  }\n}\n\n// Custom metrics for financial application\nfunction initializeCustomMetrics() {\n  // Track when critical financial components load\n  const criticalComponents = [\n    'financial-spreadsheet',\n    'dcf-calculator',\n    'chart-rendering',\n    'market-data-fetch'\n  ];\n\n  criticalComponents.forEach(component => {\n    performance.mark(`${component}-start`);\n  });\n\n  // Track component rendering times\n  window.trackComponentRender = (componentName, renderTime) => {\n    performance.mark(`${componentName}-end`);\n    performance.measure(\n      `${componentName}-render`,\n      `${componentName}-start`,\n      `${componentName}-end`\n    );\n\n    reportCustomMetric('component-render', {\n      component: componentName,\n      renderTime,\n      timestamp: Date.now()\n    });\n  };\n\n  // Track financial calculation performance\n  window.trackCalculationPerformance = (calculationType, duration, complexity) => {\n    reportCustomMetric('financial-calculation', {\n      type: calculationType,\n      duration,\n      complexity,\n      timestamp: Date.now()\n    });\n  };\n}\n\n// Navigation timing tracking\nfunction trackNavigationTiming() {\n  window.addEventListener('load', () => {\n    setTimeout(() => {\n      const navigation = performance.getEntriesByType('navigation')[0];\n      if (navigation) {\n        const timings = {\n          dns: navigation.domainLookupEnd - navigation.domainLookupStart,\n          tcp: navigation.connectEnd - navigation.connectStart,\n          ssl: navigation.secureConnectionStart > 0 ? navigation.connectEnd - navigation.secureConnectionStart : 0,\n          ttfb: navigation.responseStart - navigation.requestStart,\n          download: navigation.responseEnd - navigation.responseStart,\n          domProcessing: navigation.domComplete - navigation.domLoading,\n          totalLoadTime: navigation.loadEventEnd - navigation.fetchStart\n        };\n\n        reportNavigationTiming(timings);\n      }\n    }, 0);\n  });\n}\n\n// Resource timing tracking\nfunction trackResourceTiming() {\n  new PerformanceObserver((list) => {\n    for (const entry of list.getEntries()) {\n      // Track important resource types\n      if (entry.initiatorType === 'script' ||\n          entry.initiatorType === 'css' ||\n          entry.initiatorType === 'img' ||\n          entry.initiatorType === 'fetch') {\n\n        const resourceData = {\n          name: entry.name,\n          type: entry.initiatorType,\n          size: entry.transferSize || entry.encodedBodySize,\n          duration: entry.duration,\n          cached: entry.transferSize === 0 && entry.encodedBodySize > 0,\n          timestamp: Date.now()\n        };\n\n        // Only report large resources or slow loads\n        if (resourceData.size > 50000 || resourceData.duration > 1000) {\n          reportResourceTiming(resourceData);\n        }\n      }\n    }\n  }).observe({ entryTypes: ['resource'] });\n}\n\n// User interaction tracking\nfunction trackUserInteractions() {\n  let interactionCount = 0;\n  let totalInteractionTime = 0;\n\n  const interactionEvents = ['click', 'keydown', 'touchstart'];\n\n  interactionEvents.forEach(eventType => {\n    document.addEventListener(eventType, (event) => {\n      const startTime = performance.now();\n\n      // Track interaction delay\n      requestAnimationFrame(() => {\n        const endTime = performance.now();\n        const interactionTime = endTime - startTime;\n\n        interactionCount++;\n        totalInteractionTime += interactionTime;\n\n        // Report slow interactions\n        if (interactionTime > 100) {\n          reportSlowInteraction({\n            type: eventType,\n            target: event.target.tagName,\n            duration: interactionTime,\n            timestamp: Date.now()\n          });\n        }\n      });\n    }, { passive: true });\n  });\n\n  // Report interaction summary periodically\n  setInterval(() => {\n    if (interactionCount > 0) {\n      reportInteractionSummary({\n        count: interactionCount,\n        averageTime: totalInteractionTime / interactionCount,\n        timestamp: Date.now()\n      });\n\n      // Reset counters\n      interactionCount = 0;\n      totalInteractionTime = 0;\n    }\n  }, 30000); // Every 30 seconds\n}\n\n// Reporting functions\nfunction reportWebVital(name, value, entries) {\n  const data = {\n    metric: name,\n    value: Math.round(value),\n    entries: entries.map(entry => ({\n      startTime: entry.startTime,\n      duration: entry.duration || 0\n    })),\n    url: window.location.href,\n    timestamp: Date.now(),\n    userAgent: navigator.userAgent,\n    connection: getConnectionInfo()\n  };\n\n  console.log(`Web Vital - ${name}:`, value);\n  sendToAnalytics('web-vital', data);\n}\n\nfunction reportCustomMetric(type, data) {\n  const metricData = {\n    type,\n    ...data,\n    url: window.location.href,\n    userAgent: navigator.userAgent\n  };\n\n  console.log(`Custom Metric - ${type}:`, data);\n  sendToAnalytics('custom-metric', metricData);\n}\n\nfunction reportNavigationTiming(timings) {\n  const data = {\n    ...timings,\n    url: window.location.href,\n    timestamp: Date.now(),\n    userAgent: navigator.userAgent,\n    connection: getConnectionInfo()\n  };\n\n  console.log('Navigation Timing:', timings);\n  sendToAnalytics('navigation-timing', data);\n}\n\nfunction reportResourceTiming(resourceData) {\n  console.log('Resource Timing:', resourceData);\n  sendToAnalytics('resource-timing', resourceData);\n}\n\nfunction reportSlowInteraction(interactionData) {\n  console.log('Slow Interaction:', interactionData);\n  sendToAnalytics('slow-interaction', interactionData);\n}\n\nfunction reportInteractionSummary(summaryData) {\n  console.log('Interaction Summary:', summaryData);\n  sendToAnalytics('interaction-summary', summaryData);\n}\n\n// Error tracking\nexport function trackError(error, errorInfo) {\n  const errorData = {\n    message: error.message,\n    stack: error.stack,\n    url: window.location.href,\n    timestamp: Date.now(),\n    userAgent: navigator.userAgent,\n    componentStack: errorInfo?.componentStack,\n    errorBoundary: errorInfo?.errorBoundary\n  };\n\n  console.error('Application Error:', errorData);\n  sendToAnalytics('error', errorData);\n}\n\n// Performance budget monitoring\nexport function checkPerformanceBudgets() {\n  const budgets = {\n    LCP: 2500,  // 2.5s\n    FID: 100,   // 100ms\n    CLS: 0.1,   // 0.1\n    FCP: 1800,  // 1.8s\n    TTFB: 800   // 800ms\n  };\n\n  const violations = [];\n\n  Object.entries(budgets).forEach(([metric, budget]) => {\n    const value = webVitalsData[metric];\n    if (value !== null && value > budget) {\n      violations.push({\n        metric,\n        value,\n        budget,\n        overBy: value - budget\n      });\n    }\n  });\n\n  if (violations.length > 0) {\n    console.warn('Performance Budget Violations:', violations);\n    sendToAnalytics('budget-violations', {\n      violations,\n      timestamp: Date.now(),\n      url: window.location.href\n    });\n  }\n\n  return violations;\n}\n\n// Utility functions\nfunction getConnectionInfo() {\n  if ('connection' in navigator) {\n    return {\n      effectiveType: navigator.connection.effectiveType,\n      downlink: navigator.connection.downlink,\n      rtt: navigator.connection.rtt\n    };\n  }\n  return null;\n}\n\nfunction sendToAnalytics(type, data) {\n  // In production, send to your analytics service\n  // For now, we'll store locally and batch send\n\n  try {\n    const analyticsData = {\n      type,\n      data,\n      sessionId: getSessionId(),\n      userId: getUserId()\n    };\n\n    // Store in localStorage for batching\n    const existingData = JSON.parse(localStorage.getItem('analytics-queue') || '[]');\n    existingData.push(analyticsData);\n\n    // Keep only last 100 entries to prevent storage overflow\n    if (existingData.length > 100) {\n      existingData.splice(0, existingData.length - 100);\n    }\n\n    localStorage.setItem('analytics-queue', JSON.stringify(existingData));\n\n    // Send batch if queue is full or on interval\n    if (existingData.length >= 10) {\n      sendAnalyticsBatch();\n    }\n\n  } catch (error) {\n    console.error('Failed to queue analytics data:', error);\n  }\n}\n\nfunction sendAnalyticsBatch() {\n  try {\n    const queuedData = JSON.parse(localStorage.getItem('analytics-queue') || '[]');\n    if (queuedData.length === 0) return;\n\n    // In production, replace with your analytics endpoint\n    console.log('Sending analytics batch:', queuedData.length, 'items');\n\n    // Simulate sending to analytics service\n    if (window.gtag) {\n      queuedData.forEach(item => {\n        window.gtag('event', item.type, {\n          custom_parameter: JSON.stringify(item.data)\n        });\n      });\n    }\n\n    // Clear queue after successful send\n    localStorage.removeItem('analytics-queue');\n\n  } catch (error) {\n    console.error('Failed to send analytics batch:', error);\n  }\n}\n\n// Session and user management\nfunction getSessionId() {\n  let sessionId = sessionStorage.getItem('session-id');\n  if (!sessionId) {\n    sessionId = Date.now() + '-' + Math.random().toString(36).substr(2, 9);\n    sessionStorage.setItem('session-id', sessionId);\n  }\n  return sessionId;\n}\n\nfunction getUserId() {\n  let userId = localStorage.getItem('user-id');\n  if (!userId) {\n    userId = 'anonymous-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);\n    localStorage.setItem('user-id', userId);\n  }\n  return userId;\n}\n\n// Initialize batch sending on interval\nsetInterval(sendAnalyticsBatch, 60000); // Every minute\n\n// Send batch before page unload\nwindow.addEventListener('beforeunload', () => {\n  sendAnalyticsBatch();\n});\n\n// Accessibility metrics reporting\nexport function reportPerformanceMetric(type, data) {\n  const metricData = {\n    type,\n    ...data,\n    url: window.location.href,\n    userAgent: navigator.userAgent,\n    timestamp: Date.now()\n  };\n\n  console.log(`Performance Metric - ${type}:`, data);\n  sendToAnalytics('performance-metric', metricData);\n}\n\n// Track accessibility test results\nexport function trackAccessibilityResults(results) {\n  const accessibilityData = {\n    violations: results.violations?.length || 0,\n    passes: results.passes?.length || 0,\n    incomplete: results.incomplete?.length || 0,\n    score: results.score || 0,\n    url: window.location.href,\n    timestamp: Date.now(),\n    userAgent: navigator.userAgent\n  };\n\n  console.log('Accessibility Results:', accessibilityData);\n  sendToAnalytics('accessibility-results', accessibilityData);\n\n  // Store accessibility history\n  try {\n    const history = JSON.parse(localStorage.getItem('accessibility-history') || '[]');\n    history.push(accessibilityData);\n\n    // Keep only last 50 entries\n    if (history.length > 50) {\n      history.splice(0, history.length - 50);\n    }\n\n    localStorage.setItem('accessibility-history', JSON.stringify(history));\n  } catch (error) {\n    console.error('Failed to store accessibility history:', error);\n  }\n}\n\n// Track financial component performance\nexport function trackFinancialComponentPerformance(componentName, metrics) {\n  const performanceData = {\n    component: componentName,\n    ...metrics,\n    url: window.location.href,\n    timestamp: Date.now(),\n    userAgent: navigator.userAgent\n  };\n\n  console.log(`Financial Component Performance - ${componentName}:`, metrics);\n  sendToAnalytics('financial-component-performance', performanceData);\n}\n\n// Get comprehensive performance dashboard data\nexport function getPerformanceDashboardData() {\n  const accessibilityHistory = JSON.parse(localStorage.getItem('accessibility-history') || '[]');\n  const analyticsQueue = JSON.parse(localStorage.getItem('analytics-queue') || '[]');\n\n  // Calculate trends\n  const recentAccessibility = accessibilityHistory.slice(-10);\n  const avgScore = recentAccessibility.reduce((sum, entry) => sum + entry.score, 0) / recentAccessibility.length || 0;\n  const avgViolations = recentAccessibility.reduce((sum, entry) => sum + entry.violations, 0) / recentAccessibility.length || 0;\n\n  // Get performance metrics from queue\n  const performanceMetrics = analyticsQueue\n    .filter(item => item.type === 'performance-metric')\n    .slice(-20)\n    .map(item => item.data);\n\n  const webVitalMetrics = analyticsQueue\n    .filter(item => item.type === 'web-vital')\n    .slice(-10)\n    .map(item => item.data);\n\n  return {\n    webVitals: webVitalsData,\n    budgetViolations: checkPerformanceBudgets(),\n    accessibility: {\n      currentScore: recentAccessibility[recentAccessibility.length - 1]?.score || 0,\n      averageScore: Math.round(avgScore),\n      averageViolations: Math.round(avgViolations),\n      history: recentAccessibility,\n      trends: {\n        scoreImproving: recentAccessibility.length >= 2 &&\n          recentAccessibility[recentAccessibility.length - 1].score >\n          recentAccessibility[recentAccessibility.length - 2].score\n      }\n    },\n    performance: {\n      recentMetrics: performanceMetrics,\n      webVitalHistory: webVitalMetrics\n    },\n    timestamp: Date.now()\n  };\n}\n\n// Export current performance data\nexport function getPerformanceData() {\n  return {\n    webVitals: webVitalsData,\n    budgetViolations: checkPerformanceBudgets(),\n    timestamp: Date.now()\n  };\n}\n","import { useState, useEffect, useCallback, useRef } from 'react';\n\nimport { accessibilityTester } from '../utils/accessibilityTesting';\nimport { reportPerformanceMetric } from '../utils/performanceMonitoring';\n\n// React hook for accessibility testing\nexport function useAccessibility(options = {}) {\n  const {\n    enabled = import.meta.env.DEV,\n    autoTest = false,\n    testInterval = null,\n    componentType = 'generic',\n    onViolations = null,\n    onSuccess = null\n  } = options;\n\n  const [results, setResults] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [violations, setViolations] = useState([]);\n  const [score, setScore] = useState(null);\n  const [lastTestTime, setLastTestTime] = useState(null);\n\n  const elementRef = useRef(null);\n  const intervalRef = useRef(null);\n\n  // Run accessibility tests\n  const runTests = useCallback(async(element = null, testOptions = {}) => {\n    if (!enabled) return null;\n\n    const targetElement = element || elementRef.current || document;\n    setIsLoading(true);\n\n    try {\n      const testResults = await accessibilityTester.runTests(targetElement, testOptions);\n\n      setResults(testResults);\n      setViolations(testResults.violations || []);\n      setScore(accessibilityTester.calculateAccessibilityScore());\n      setLastTestTime(Date.now());\n\n      // Report to performance monitoring\n      reportPerformanceMetric('accessibility_test', {\n        violations: testResults.violations?.length || 0,\n        score: accessibilityTester.calculateAccessibilityScore(),\n        componentType,\n        timestamp: Date.now()\n      });\n\n      // Call callbacks\n      if (testResults.violations?.length > 0) {\n        onViolations?.(testResults.violations);\n      } else {\n        onSuccess?.(testResults);\n      }\n\n      return testResults;\n    } catch (error) {\n      console.error('Accessibility test failed:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [enabled, componentType, onViolations, onSuccess]);\n\n  // Test specific financial component\n  const testFinancialComponent = useCallback(async(selector, type = componentType) => {\n    if (!enabled) return null;\n\n    setIsLoading(true);\n    try {\n      const testResults = await accessibilityTester.testFinancialComponent(selector, type);\n\n      setResults(testResults);\n      setViolations(testResults.violations || []);\n      setScore(accessibilityTester.calculateAccessibilityScore());\n      setLastTestTime(Date.now());\n\n      // Report specific component test\n      reportPerformanceMetric('financial_component_accessibility', {\n        componentType: type,\n        violations: testResults.violations?.length || 0,\n        score: accessibilityTester.calculateAccessibilityScore(),\n        timestamp: Date.now()\n      });\n\n      return testResults;\n    } catch (error) {\n      console.error('Financial component accessibility test failed:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [enabled, componentType]);\n\n  // Test keyboard navigation\n  const testKeyboardNavigation = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const navResults = await accessibilityTester.testKeyboardNavigation();\n\n      reportPerformanceMetric('keyboard_navigation_test', {\n        focusableElements: navResults.focusableElementsCount,\n        tabOrderIssues: navResults.tabOrderIssues?.length || 0,\n        focusVisibilityIssues: navResults.focusVisibilityIssues?.length || 0,\n        passed: navResults.passed,\n        timestamp: Date.now()\n      });\n\n      return navResults;\n    } catch (error) {\n      console.error('Keyboard navigation test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Test color contrast\n  const testColorContrast = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const contrastResults = await accessibilityTester.testColorContrast();\n\n      reportPerformanceMetric('color_contrast_test', {\n        totalElements: contrastResults.totalElements,\n        contrastIssues: contrastResults.contrastIssues?.length || 0,\n        passed: contrastResults.passed,\n        timestamp: Date.now()\n      });\n\n      return contrastResults;\n    } catch (error) {\n      console.error('Color contrast test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Test form accessibility\n  const testFormAccessibility = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const formResults = await accessibilityTester.testFormAccessibility();\n\n      reportPerformanceMetric('form_accessibility_test', {\n        totalForms: formResults.totalForms,\n        formIssues: formResults.formIssues?.length || 0,\n        passed: formResults.passed,\n        timestamp: Date.now()\n      });\n\n      return formResults;\n    } catch (error) {\n      console.error('Form accessibility test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Generate comprehensive report\n  const generateReport = useCallback(() => {\n    if (!results) return null;\n\n    try {\n      const report = accessibilityTester.generateReport();\n\n      // Store report data for performance monitoring\n      reportPerformanceMetric('accessibility_report_generated', {\n        score: report.summary.score,\n        violations: report.summary.violations,\n        totalChecks: report.summary.totalChecks,\n        timestamp: Date.now()\n      });\n\n      return report;\n    } catch (error) {\n      console.error('Failed to generate accessibility report:', error);\n      return null;\n    }\n  }, [results]);\n\n  // Set up automatic testing\n  useEffect(() => {\n    if (!enabled || !autoTest) return;\n\n    const runAutoTest = () => {\n      runTests();\n    };\n\n    // Run initial test\n    runAutoTest();\n\n    // Set up interval if specified\n    if (testInterval) {\n      intervalRef.current = setInterval(runAutoTest, testInterval);\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [enabled, autoTest, testInterval, runTests]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // State\n    results,\n    violations,\n    score,\n    isLoading,\n    lastTestTime,\n\n    // Test functions\n    runTests,\n    testFinancialComponent,\n    testKeyboardNavigation,\n    testColorContrast,\n    testFormAccessibility,\n    generateReport,\n\n    // Element ref for targeting tests\n    elementRef\n  };\n}\n\n// Hook for monitoring accessibility across the entire app\nexport function useAppAccessibility() {\n  const [globalScore, setGlobalScore] = useState(null);\n  const [recentViolations, setRecentViolations] = useState([]);\n  const [testHistory, setTestHistory] = useState([]);\n\n  const runGlobalAccessibilityCheck = useCallback(async() => {\n    try {\n      // Run comprehensive tests on the entire document\n      const results = await accessibilityTester.runTests(document);\n      const score = accessibilityTester.calculateAccessibilityScore();\n\n      setGlobalScore(score);\n      setRecentViolations(results.violations || []);\n\n      // Update test history\n      const historyEntry = {\n        timestamp: Date.now(),\n        score,\n        violations: results.violations?.length || 0,\n        url: window.location.pathname\n      };\n\n      setTestHistory(prev => [...prev.slice(-9), historyEntry]); // Keep last 10 entries\n\n      // Report global metrics\n      reportPerformanceMetric('global_accessibility_check', {\n        score,\n        violations: results.violations?.length || 0,\n        url: window.location.pathname,\n        timestamp: Date.now()\n      });\n\n      return results;\n    } catch (error) {\n      console.error('Global accessibility check failed:', error);\n      return null;\n    }\n  }, []);\n\n  // Check accessibility when route changes\n  useEffect(() => {\n    const checkOnRouteChange = () => {\n      setTimeout(() => {\n        runGlobalAccessibilityCheck();\n      }, 1000); // Allow time for route to fully load\n    };\n\n    // Listen for navigation changes\n    window.addEventListener('popstate', checkOnRouteChange);\n\n    // Run initial check\n    checkOnRouteChange();\n\n    return () => {\n      window.removeEventListener('popstate', checkOnRouteChange);\n    };\n  }, [runGlobalAccessibilityCheck]);\n\n  return {\n    globalScore,\n    recentViolations,\n    testHistory,\n    runGlobalAccessibilityCheck\n  };\n}\n\n// Hook for accessibility testing in financial components\nexport function useFinancialAccessibility(componentType) {\n  const accessibility = useAccessibility({\n    componentType,\n    autoTest: true,\n    testInterval: 30000, // Test every 30 seconds in development\n    onViolations: (violations) => {\n      // Log financial component specific violations\n      console.warn(`Financial component (${componentType}) accessibility violations:`, violations);\n    }\n  });\n\n  // Enhanced testing for financial components\n  const testFinancialFeatures = useCallback(async() => {\n    const results = {};\n\n    try {\n      // Test keyboard navigation (critical for financial apps)\n      results.keyboardNav = await accessibility.testKeyboardNavigation();\n\n      // Test color contrast (important for reading financial data)\n      results.colorContrast = await accessibility.testColorContrast();\n\n      // Test forms if component contains them\n      results.formAccessibility = await accessibility.testFormAccessibility();\n\n      // Generate comprehensive report\n      results.report = accessibility.generateReport();\n\n      return results;\n    } catch (error) {\n      console.error('Financial accessibility testing failed:', error);\n      return null;\n    }\n  }, [accessibility, componentType]);\n\n  return {\n    ...accessibility,\n    testFinancialFeatures\n  };\n}\n\n// Hook for real-time accessibility monitoring\nexport function useAccessibilityMonitor(options = {}) {\n  const {\n    threshold = 80, // Minimum acceptable score\n    alertOnViolations = true,\n    monitorInterval = 60000 // Check every minute\n  } = options;\n\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [alerts, setAlerts] = useState([]);\n  const intervalRef = useRef(null);\n\n  const startMonitoring = useCallback(() => {\n    if (isMonitoring) return;\n\n    setIsMonitoring(true);\n\n    const monitor = async() => {\n      try {\n        const results = await accessibilityTester.runTests(document);\n        const score = accessibilityTester.calculateAccessibilityScore();\n\n        // Check if score is below threshold\n        if (score < threshold) {\n          const alert = {\n            id: Date.now(),\n            type: 'low_score',\n            message: `Accessibility score (${score}) is below threshold (${threshold})`,\n            score,\n            violations: results.violations?.length || 0,\n            timestamp: Date.now()\n          };\n\n          setAlerts(prev => [...prev, alert]);\n\n          if (alertOnViolations) {\n            console.warn('Accessibility Alert:', alert.message);\n          }\n        }\n\n        // Check for critical violations\n        const criticalViolations = results.violations?.filter(v => v.impact === 'critical') || [];\n        if (criticalViolations.length > 0 && alertOnViolations) {\n          const alert = {\n            id: Date.now(),\n            type: 'critical_violations',\n            message: `${criticalViolations.length} critical accessibility violations found`,\n            violations: criticalViolations,\n            timestamp: Date.now()\n          };\n\n          setAlerts(prev => [...prev, alert]);\n          console.error('Critical Accessibility Violations:', criticalViolations);\n        }\n\n        // Report monitoring metrics\n        reportPerformanceMetric('accessibility_monitoring', {\n          score,\n          violations: results.violations?.length || 0,\n          criticalViolations: criticalViolations.length,\n          timestamp: Date.now()\n        });\n\n      } catch (error) {\n        console.error('Accessibility monitoring failed:', error);\n      }\n    };\n\n    // Run initial check\n    monitor();\n\n    // Set up interval\n    intervalRef.current = setInterval(monitor, monitorInterval);\n  }, [isMonitoring, threshold, alertOnViolations, monitorInterval]);\n\n  const stopMonitoring = useCallback(() => {\n    setIsMonitoring(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  const clearAlerts = useCallback(() => {\n    setAlerts([]);\n  }, []);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    isMonitoring,\n    alerts,\n    startMonitoring,\n    stopMonitoring,\n    clearAlerts\n  };\n}\n","import React, { useState, useEffect, useCallback } from 'react';\n\nimport { useAccessibilityMonitor } from '../../hooks/useAccessibility';\nimport { getPerformanceDashboardData, initializePerformanceMonitoring } from '../../utils/performanceMonitoring';\n\nconst PerformanceDashboard = ({ isVisible = false, onClose }) => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [refreshInterval, setRefreshInterval] = useState(30000); // 30 seconds\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [alertThreshold, setAlertThreshold] = useState(75);\n\n  const {\n    alerts,\n    startMonitoring: startAccessibilityMonitoring,\n    stopMonitoring: stopAccessibilityMonitoring,\n    clearAlerts\n  } = useAccessibilityMonitor({\n    threshold: alertThreshold,\n    monitorInterval: refreshInterval\n  });\n\n  // Refresh dashboard data\n  const refreshData = useCallback(() => {\n    try {\n      const data = getPerformanceDashboardData();\n      setDashboardData(data);\n    } catch (error) {\n      console.error('Failed to refresh performance dashboard:', error);\n    }\n  }, []);\n\n  // Toggle monitoring\n  const toggleMonitoring = useCallback(() => {\n    if (isMonitoring) {\n      stopAccessibilityMonitoring();\n      setIsMonitoring(false);\n    } else {\n      startAccessibilityMonitoring();\n      setIsMonitoring(true);\n    }\n  }, [isMonitoring, startAccessibilityMonitoring, stopAccessibilityMonitoring]);\n\n  // Initialize and set up refresh interval\n  useEffect(() => {\n    if (!isVisible) return;\n\n    // Initialize performance monitoring if not already done\n    initializePerformanceMonitoring();\n\n    // Initial data fetch\n    refreshData();\n\n    // Set up refresh interval\n    const interval = setInterval(refreshData, refreshInterval);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isVisible, refreshData, refreshInterval]);\n\n  // Format metric values for display\n  const formatMetric = (value, unit = 'ms') => {\n    if (value === null || value === undefined) return 'N/A';\n    if (typeof value === 'number') {\n      return `${Math.round(value)}${unit}`;\n    }\n    return value;\n  };\n\n  // Get metric status (good, needs improvement, poor)\n  const getMetricStatus = (metric, value) => {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      FID: { good: 100, poor: 300 },\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 }\n    };\n\n    const threshold = thresholds[metric];\n    if (!threshold || value === null) return 'unknown';\n\n    if (value <= threshold.good) return 'good';\n    if (value <= threshold.poor) return 'needs-improvement';\n    return 'poor';\n  };\n\n  // Get status color\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'good': return 'text-green-600 bg-green-100';\n      case 'needs-improvement': return 'text-yellow-600 bg-yellow-100';\n      case 'poor': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (!isVisible || !dashboardData) {\n    return null;\n  }\n\n  const { webVitals, budgetViolations, accessibility, performance } = dashboardData;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Performance Dashboard</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Real-time monitoring for FinanceAnalyst Pro\n            </p>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={toggleMonitoring}\n              className={`px-4 py-2 rounded-md text-sm font-medium ${\n                isMonitoring\n                  ? 'bg-red-100 text-red-700 hover:bg-red-200'\n                  : 'bg-green-100 text-green-700 hover:bg-green-200'\n              }`}\n            >\n              {isMonitoring ? 'Stop Monitoring' : 'Start Monitoring'}\n            </button>\n            <button\n              onClick={refreshData}\n              className=\"px-4 py-2 bg-blue-100 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-200\"\n            >\n              Refresh\n            </button>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <span className=\"sr-only\">Close</span>\n              <svg\n                className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\n                  d=\"M6 18L18 6M6 6l12 12\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-8\">\n          {/* Web Vitals */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Core Web Vitals</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n              {Object.entries(webVitals).map(([metric, value]) => {\n                const status = getMetricStatus(metric, value);\n                const statusColor = getStatusColor(status);\n\n                return (\n                  <div key={metric} className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm font-medium text-gray-600\">{metric}</span>\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${statusColor}`}>\n                        {status}\n                      </span>\n                    </div>\n                    <div className=\"mt-2\">\n                      <span className=\"text-2xl font-bold text-gray-900\">\n                        {formatMetric(value, metric === 'CLS' ? '' : 'ms')}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </section>\n\n          {/* Budget Violations */}\n          {budgetViolations.length > 0 && (\n            <section>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance Budget Violations</h3>\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"space-y-2\">\n                  {budgetViolations.map((violation, index) => (\n                    <div key={index} className=\"flex items-center justify-between\">\n                      <span className=\"text-sm font-medium text-red-800\">\n                        {violation.metric}: {formatMetric(violation.value)}\n                      </span>\n                      <span className=\"text-sm text-red-600\">\n                        Over budget by {formatMetric(violation.overBy)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </section>\n          )}\n\n          {/* Accessibility */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Accessibility</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Current Score</h4>\n                <div className=\"flex items-center\">\n                  <span className=\"text-3xl font-bold text-gray-900\">\n                    {accessibility.currentScore}\n                  </span>\n                  <span className=\"text-sm text-gray-500 ml-1\">/100</span>\n                  {accessibility.trends.scoreImproving && (\n                    <span className=\"ml-2 text-green-600\">\n                      <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Average Violations</h4>\n                <span className=\"text-3xl font-bold text-gray-900\">\n                  {accessibility.averageViolations}\n                </span>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Average Score</h4>\n                <span className=\"text-3xl font-bold text-gray-900\">\n                  {accessibility.averageScore}\n                </span>\n              </div>\n            </div>\n\n            {/* Accessibility Alerts */}\n            {alerts.length > 0 && (\n              <div className=\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h4 className=\"text-sm font-medium text-yellow-800\">Active Alerts</h4>\n                  <button\n                    onClick={clearAlerts}\n                    className=\"text-xs text-yellow-600 hover:text-yellow-800\"\n                  >\n                    Clear All\n                  </button>\n                </div>\n                <div className=\"space-y-2\">\n                  {alerts.slice(0, 5).map((alert) => (\n                    <div key={alert.id} className=\"text-sm text-yellow-700\">\n                      <span className=\"font-medium\">{alert.type}:</span> {alert.message}\n                    </div>\n                  ))}\n                  {alerts.length > 5 && (\n                    <div className=\"text-xs text-yellow-600\">\n                      And {alerts.length - 5} more alerts...\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </section>\n\n          {/* Recent Performance Metrics */}\n          {performance.recentMetrics.length > 0 && (\n            <section>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Performance Events</h3>\n              <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n                <div className=\"max-h-64 overflow-y-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Type\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Component\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Value\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Time\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {performance.recentMetrics.slice(0, 10).map((metric, index) => (\n                        <tr key={index}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                            {metric.type}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {metric.component || metric.componentType || 'N/A'}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {metric.violations !== undefined ? `${metric.violations} violations` :\n                              metric.score !== undefined ? `Score: ${metric.score}` :\n                                metric.duration !== undefined ? `${Math.round(metric.duration)}ms` : 'N/A'}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {new Date(metric.timestamp).toLocaleTimeString()}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </section>\n          )}\n\n          {/* Settings */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Monitoring Settings</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <label htmlFor=\"refresh-interval\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Refresh Interval (seconds)\n                </label>\n                <select\n                  id=\"refresh-interval\"\n                  value={refreshInterval / 1000}\n                  onChange={(e) => setRefreshInterval(parseInt(e.target.value) * 1000)}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                >\n                  <option value={10}>10 seconds</option>\n                  <option value={30}>30 seconds</option>\n                  <option value={60}>1 minute</option>\n                  <option value={300}>5 minutes</option>\n                </select>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <label htmlFor=\"alert-threshold\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Accessibility Alert Threshold\n                </label>\n                <select\n                  id=\"alert-threshold\"\n                  value={alertThreshold}\n                  onChange={(e) => setAlertThreshold(parseInt(e.target.value))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                >\n                  <option value={60}>60 (Strict)</option>\n                  <option value={75}>75 (Moderate)</option>\n                  <option value={85}>85 (Lenient)</option>\n                  <option value={95}>95 (Very Lenient)</option>\n                </select>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PerformanceDashboard;\n","import { HelmetProvider } from 'react-helmet-async';\n\nconst SEOProvider = ({ children }) => {\n  return <HelmetProvider>{children}</HelmetProvider>;\n};\n\nexport default SEOProvider;\n","import { useEffect, useCallback } from 'react';\n\n// Keyboard shortcut configuration\nconst SHORTCUT_CONFIG = {\n  // Command Palette\n  'cmd+k': { action: 'open-command-palette', description: 'Open command palette' },\n  'ctrl+k': { action: 'open-command-palette', description: 'Open command palette' },\n\n  // Navigation shortcuts\n  'ctrl+1': { action: 'navigate', target: 'data', description: 'Go to Data Entry' },\n  'ctrl+2': { action: 'navigate', target: 'modeling', description: 'Go to Modeling' },\n  'ctrl+3': { action: 'navigate', target: 'analysis', description: 'Go to Analysis' },\n\n  // Action shortcuts\n  'ctrl+n': { action: 'create-dcf', description: 'Create new DCF model' },\n  'ctrl+s': { action: 'save', description: 'Save current analysis' },\n  'ctrl+i': { action: 'import-data', description: 'Import data' },\n  'ctrl+e': { action: 'export-data', description: 'Export analysis' },\n  'ctrl+f': { action: 'search-data', description: 'Search data' },\n\n  // Analysis shortcuts\n  'ctrl+shift+s': { action: 'sensitivity-analysis', description: 'Run sensitivity analysis' },\n  'ctrl+shift+m': { action: 'monte-carlo', description: 'Run Monte Carlo simulation' },\n\n  // View shortcuts\n  'ctrl+shift+i': { action: 'toggle-insights', description: 'Toggle insights sidebar' },\n  'f1': { action: 'help', description: 'Open help' },\n\n  // Quick access\n  'alt+1': { action: 'quick-company', company: 'AAPL', description: 'Quick Apple analysis' },\n  'alt+2': { action: 'quick-company', company: 'MSFT', description: 'Quick Microsoft analysis' },\n  'alt+3': { action: 'quick-company', company: 'GOOGL', description: 'Quick Google analysis' },\n  'alt+4': { action: 'quick-company', company: 'AMZN', description: 'Quick Amazon analysis' }\n};\n\nexport const useKeyboardShortcuts = (handlers = {}) => {\n  // Normalize key combination\n  const normalizeKey = useCallback((event) => {\n    const parts = [];\n\n    if (event.metaKey || event.ctrlKey) {\n      parts.push(event.metaKey ? 'cmd' : 'ctrl');\n    }\n    if (event.altKey) parts.push('alt');\n    if (event.shiftKey) parts.push('shift');\n\n    // Handle special keys\n    let key = event.key.toLowerCase();\n    if (key === ' ') key = 'space';\n    if (key === 'escape') key = 'esc';\n    if (key === 'arrowup') key = 'up';\n    if (key === 'arrowdown') key = 'down';\n    if (key === 'arrowleft') key = 'left';\n    if (key === 'arrowright') key = 'right';\n\n    parts.push(key);\n\n    return parts.join('+');\n  }, []);\n\n  // Check if element should receive shortcuts\n  const shouldHandleShortcut = useCallback((target) => {\n    // Don't handle shortcuts when typing in inputs, textareas, or contenteditable elements\n    const tagName = target.tagName.toLowerCase();\n    const isEditable = target.contentEditable === 'true';\n    const isInput = ['input', 'textarea', 'select'].includes(tagName);\n\n    return !isInput && !isEditable;\n  }, []);\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback((event) => {\n    // Check if we should handle this shortcut\n    if (!shouldHandleShortcut(event.target)) {\n      return;\n    }\n\n    const keyCombo = normalizeKey(event);\n    const shortcut = SHORTCUT_CONFIG[keyCombo];\n\n    if (shortcut) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      // Call the appropriate handler\n      const handler = handlers[shortcut.action];\n      if (handler) {\n        handler(shortcut);\n      } else {\n        console.warn(`No handler found for shortcut action: ${shortcut.action}`);\n      }\n    }\n  }, [normalizeKey, shouldHandleShortcut, handlers]);\n\n  // Register global keyboard event listener\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, true);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, true);\n    };\n  }, [handleKeyDown]);\n\n  // Get all shortcuts for help display\n  const getAllShortcuts = useCallback(() => {\n    return Object.entries(SHORTCUT_CONFIG).map(([key, config]) => ({\n      key,\n      ...config\n    }));\n  }, []);\n\n  // Get shortcuts by category\n  const getShortcutsByCategory = useCallback(() => {\n    const categories = {\n      general: [],\n      navigation: [],\n      analysis: [],\n      data: [],\n      view: [],\n      quick: []\n    };\n\n    Object.entries(SHORTCUT_CONFIG).forEach(([key, config]) => {\n      const shortcut = { key, ...config };\n\n      if (config.action === 'navigate') {\n        categories.navigation.push(shortcut);\n      } else if (config.action.includes('analysis') || config.action === 'create-dcf' || config.action === 'monte-carlo') {\n        categories.analysis.push(shortcut);\n      } else if (config.action.includes('data') || config.action === 'import-data' || config.action === 'export-data') {\n        categories.data.push(shortcut);\n      } else if (config.action.includes('toggle') || config.action === 'help') {\n        categories.view.push(shortcut);\n      } else if (config.action === 'quick-company') {\n        categories.quick.push(shortcut);\n      } else {\n        categories.general.push(shortcut);\n      }\n    });\n\n    return categories;\n  }, []);\n\n  // Format key combination for display\n  const formatKeyCombo = useCallback((keyCombo) => {\n    return keyCombo\n      .split('+')\n      .map(key => {\n        switch (key) {\n          case 'cmd': return '';\n          case 'ctrl': return 'Ctrl';\n          case 'alt': return 'Alt';\n          case 'shift': return 'Shift';\n          case 'space': return 'Space';\n          case 'esc': return 'Esc';\n          case 'up': return '';\n          case 'down': return '';\n          case 'left': return '';\n          case 'right': return '';\n          default: return key.toUpperCase();\n        }\n      })\n      .join(' + ');\n  }, []);\n\n  // Check if a key combination is available\n  const isShortcutAvailable = useCallback((keyCombo) => {\n    return !SHORTCUT_CONFIG[keyCombo.toLowerCase()];\n  }, []);\n\n  // Register a new shortcut (for dynamic shortcuts)\n  const registerShortcut = useCallback((keyCombo, config) => {\n    const normalizedKey = keyCombo.toLowerCase();\n    if (SHORTCUT_CONFIG[normalizedKey]) {\n      console.warn(`Shortcut ${keyCombo} is already registered`);\n      return false;\n    }\n\n    SHORTCUT_CONFIG[normalizedKey] = config;\n    return true;\n  }, []);\n\n  return {\n    getAllShortcuts,\n    getShortcutsByCategory,\n    formatKeyCombo,\n    isShortcutAvailable,\n    registerShortcut\n  };\n};\n","import {\n  Calculator,\n  TrendingUp,\n  BarChart3,\n  FileText,\n  Download,\n  Upload,\n  Search,\n  Save,\n  Settings,\n  HelpCircle,\n  Users,\n  Zap,\n  Globe,\n  PieChart,\n  LineChart,\n  Activity,\n  Target,\n  ArrowRight,\n  RefreshCw,\n  Filter,\n  Eye,\n  Edit,\n  Copy,\n  Trash2,\n  Plus\n} from 'lucide-react';\nimport { useState, useEffect, useCallback } from 'react';\n\n// Natural language patterns for command matching\nconst NATURAL_LANGUAGE_PATTERNS = {\n  // Navigation patterns\n  navigation: [\n    { pattern: /(?:go to|navigate to|switch to|show me)\\s+(.+)/i, category: 'navigation' },\n    { pattern: /(?:open|view)\\s+(.+)/i, category: 'navigation' }\n  ],\n\n  // Analysis patterns\n  analysis: [\n    { pattern: /(?:create|new|build|make)\\s+(?:a\\s+)?(?:dcf|valuation|model)(?:\\s+for\\s+(.+))?/i, category: 'analysis', command: 'create-dcf' },\n    { pattern: /(?:run|perform|do)\\s+(?:a\\s+)?sensitivity\\s+(?:analysis\\s+)?(?:on\\s+(.+))?/i, category: 'analysis', command: 'sensitivity-analysis' },\n    { pattern: /(?:calculate|compute)\\s+(.+)/i, category: 'analysis' },\n    { pattern: /(?:analyze|analyse)\\s+(.+)/i, category: 'analysis' }\n  ],\n\n  // Data patterns\n  data: [\n    { pattern: /(?:find|search|look for)\\s+(.+)/i, category: 'data', command: 'search-data' },\n    { pattern: /(?:import|load)\\s+(.+)/i, category: 'data', command: 'import-data' },\n    { pattern: /(?:export|save|download)\\s+(.+)/i, category: 'export', command: 'export-data' }\n  ],\n\n  // Chart patterns\n  charts: [\n    { pattern: /(?:create|make|build|show)\\s+(?:a\\s+)?(?:chart|graph|plot)(?:\\s+for\\s+(.+))?/i, category: 'charts', command: 'create-chart' },\n    { pattern: /(?:visualize|plot)\\s+(.+)/i, category: 'charts', command: 'create-chart' }\n  ]\n};\n\n// Comprehensive command registry\nconst COMMAND_REGISTRY = {\n  // Navigation Commands\n  'go-to-data': {\n    id: 'go-to-data',\n    title: 'Go to Data Entry',\n    description: 'Navigate to financial data spreadsheet',\n    category: 'navigation',\n    icon: FileText,\n    shortcut: 'Ctrl+1',\n    keywords: ['data', 'spreadsheet', 'financial', 'entry', 'input'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'data' })\n  },\n\n  'go-to-modeling': {\n    id: 'go-to-modeling',\n    title: 'Go to Modeling Tools',\n    description: 'Navigate to financial modeling workspace',\n    category: 'navigation',\n    icon: Calculator,\n    shortcut: 'Ctrl+2',\n    keywords: ['modeling', 'tools', 'dcf', 'models'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'modeling' })\n  },\n\n  'go-to-analysis': {\n    id: 'go-to-analysis',\n    title: 'Go to Analysis Results',\n    description: 'View analysis results and outputs',\n    category: 'navigation',\n    icon: TrendingUp,\n    shortcut: 'Ctrl+3',\n    keywords: ['analysis', 'results', 'outputs', 'valuation'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'analysis' })\n  },\n\n  // Analysis Commands\n  'create-dcf': {\n    id: 'create-dcf',\n    title: 'Create New DCF Model',\n    description: 'Start a new discounted cash flow valuation model',\n    category: 'analysis',\n    icon: Calculator,\n    shortcut: 'Ctrl+N',\n    keywords: ['dcf', 'valuation', 'model', 'discounted', 'cash', 'flow', 'new', 'create'],\n    parameters: [\n      { name: 'company', type: 'string', description: 'Company ticker or name', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-model',\n      type: 'dcf',\n      company: params?.company || 'New Model'\n    })\n  },\n\n  'sensitivity-analysis': {\n    id: 'sensitivity-analysis',\n    title: 'Run Sensitivity Analysis',\n    description: 'Perform sensitivity analysis on key assumptions',\n    category: 'analysis',\n    icon: Target,\n    shortcut: 'Ctrl+Shift+S',\n    keywords: ['sensitivity', 'analysis', 'assumptions', 'wacc', 'growth', 'test'],\n    parameters: [\n      { name: 'variable', type: 'string', description: 'Variable to analyze (WACC, growth rate, etc.)', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'run-sensitivity',\n      variable: params?.variable || 'wacc'\n    })\n  },\n\n  'monte-carlo': {\n    id: 'monte-carlo',\n    title: 'Run Monte Carlo Simulation',\n    description: 'Perform Monte Carlo simulation on model',\n    category: 'analysis',\n    icon: Activity,\n    keywords: ['monte', 'carlo', 'simulation', 'probability', 'risk'],\n    execute: (_params, _context) => ({ action: 'run-monte-carlo' })\n  },\n\n  // Data Commands\n  'search-data': {\n    id: 'search-data',\n    title: 'Search Financial Data',\n    description: 'Find specific financial metrics or data points',\n    category: 'data',\n    icon: Search,\n    shortcut: 'Ctrl+F',\n    keywords: ['search', 'find', 'data', 'metrics', 'revenue', 'expenses'],\n    parameters: [\n      { name: 'query', type: 'string', description: 'What to search for', required: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'search',\n      query: params?.query\n    })\n  },\n\n  'import-data': {\n    id: 'import-data',\n    title: 'Import Financial Data',\n    description: 'Import data from Excel, CSV, or other sources',\n    category: 'data',\n    icon: Upload,\n    shortcut: 'Ctrl+I',\n    keywords: ['import', 'upload', 'excel', 'csv', 'data', 'file'],\n    execute: (_params, _context) => ({ action: 'import-data' })\n  },\n\n  'export-data': {\n    id: 'export-data',\n    title: 'Export Analysis',\n    description: 'Export current analysis to PDF, Excel, or PowerPoint',\n    category: 'export',\n    icon: Download,\n    shortcut: 'Ctrl+E',\n    keywords: ['export', 'download', 'pdf', 'excel', 'powerpoint', 'save'],\n    parameters: [\n      { name: 'format', type: 'string', description: 'Export format (PDF, Excel, PowerPoint)', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'export',\n      format: params?.format || 'pdf'\n    })\n  },\n\n  // Chart Commands\n  'create-chart': {\n    id: 'create-chart',\n    title: 'Create Chart',\n    description: 'Create a visualization from your data',\n    category: 'charts',\n    icon: BarChart3,\n    keywords: ['chart', 'graph', 'visualization', 'plot', 'visualize'],\n    parameters: [\n      { name: 'type', type: 'string', description: 'Chart type (line, bar, pie, etc.)', optional: true },\n      { name: 'data', type: 'string', description: 'Data to visualize', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-chart',\n      type: params?.type || 'line',\n      data: params?.data\n    })\n  },\n\n  'revenue-chart': {\n    id: 'revenue-chart',\n    title: 'Create Revenue Chart',\n    description: 'Visualize revenue trends over time',\n    category: 'charts',\n    icon: LineChart,\n    keywords: ['revenue', 'sales', 'income', 'trend', 'growth'],\n    execute: (_params, _context) => ({\n      action: 'create-chart',\n      type: 'line',\n      data: 'revenue'\n    })\n  },\n\n  'margin-analysis': {\n    id: 'margin-analysis',\n    title: 'Analyze Margins',\n    description: 'Create margin analysis visualization',\n    category: 'charts',\n    icon: PieChart,\n    keywords: ['margin', 'profitability', 'ebitda', 'operating', 'gross'],\n    execute: (_params, _context) => ({\n      action: 'create-chart',\n      type: 'bar',\n      data: 'margins'\n    })\n  },\n\n  // Company-specific commands (dynamic)\n  'company-apple': {\n    id: 'company-apple',\n    title: 'Analyze Apple (AAPL)',\n    description: 'Create analysis for Apple Inc.',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['apple', 'aapl', 'company', 'stock'],\n    execute: (_params, _context) => ({\n      action: 'create-model',\n      company: 'AAPL'\n    })\n  },\n\n  'company-microsoft': {\n    id: 'company-microsoft',\n    title: 'Analyze Microsoft (MSFT)',\n    description: 'Create analysis for Microsoft Corporation',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['microsoft', 'msft', 'company', 'stock'],\n    execute: (_params, _context) => ({\n      action: 'create-model',\n      company: 'MSFT'\n    })\n  },\n\n  // Utility Commands\n  'save-analysis': {\n    id: 'save-analysis',\n    title: 'Save Current Analysis',\n    description: 'Save your current work',\n    category: 'data',\n    icon: Save,\n    shortcut: 'Ctrl+S',\n    keywords: ['save', 'store', 'backup'],\n    execute: (_params, _context) => ({ action: 'save' })\n  },\n\n  'toggle-insights': {\n    id: 'toggle-insights',\n    title: 'Toggle Insights Sidebar',\n    description: 'Show or hide contextual insights',\n    category: 'navigation',\n    icon: Eye,\n    keywords: ['insights', 'sidebar', 'toggle', 'show', 'hide'],\n    execute: (_params, _context) => ({ action: 'toggle-insights' })\n  },\n\n  'settings': {\n    id: 'settings',\n    title: 'Open Settings',\n    description: 'Configure application preferences',\n    category: 'settings',\n    icon: Settings,\n    keywords: ['settings', 'preferences', 'config', 'options'],\n    execute: (_params, _context) => ({ action: 'open-settings' })\n  },\n\n  'help': {\n    id: 'help',\n    title: 'Get Help',\n    description: 'Access help documentation and tutorials',\n    category: 'help',\n    icon: HelpCircle,\n    shortcut: 'F1',\n    keywords: ['help', 'documentation', 'tutorial', 'support'],\n    execute: (_params, _context) => ({ action: 'open-help' })\n  }\n};\n\nexport const useCommandRegistry = (currentContext = {}) => {\n  const [commandUsage, setCommandUsage] = useState(() => {\n    const saved = localStorage.getItem('commandUsage');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  const [userLearning, setUserLearning] = useState(() => {\n    const saved = localStorage.getItem('commandLearning');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  // Parse natural language query\n  const parseNaturalLanguage = useCallback((query) => {\n    const results = [];\n\n    for (const [_category, patterns] of Object.entries(NATURAL_LANGUAGE_PATTERNS)) {\n      for (const pattern of patterns) {\n        const match = query.match(pattern.pattern);\n        if (match) {\n          results.push({\n            category: pattern.category,\n            command: pattern.command,\n            parameters: match.slice(1).filter(Boolean),\n            confidence: match[0].length / query.length\n          });\n        }\n      }\n    }\n\n    return results.sort((a, b) => b.confidence - a.confidence);\n  }, []);\n\n  // Search commands with intelligent matching\n  const searchCommands = useCallback((query) => {\n    if (!query.trim()) return [];\n\n    const normalizedQuery = query.toLowerCase().trim();\n    const results = [];\n\n    // First, try natural language parsing\n    const nlResults = parseNaturalLanguage(query);\n\n    // Score and rank commands\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      let score = 0;\n\n      // Exact title match\n      if (command.title.toLowerCase() === normalizedQuery) {\n        score += 100;\n      }\n\n      // Title contains query\n      if (command.title.toLowerCase().includes(normalizedQuery)) {\n        score += 50;\n      }\n\n      // Description contains query\n      if (command.description.toLowerCase().includes(normalizedQuery)) {\n        score += 30;\n      }\n\n      // Keyword matches\n      const keywordMatches = command.keywords.filter(keyword =>\n        keyword.toLowerCase().includes(normalizedQuery) ||\n        normalizedQuery.includes(keyword.toLowerCase())\n      );\n      score += keywordMatches.length * 20;\n\n      // Usage frequency boost\n      const usageCount = commandUsage[command.id] || 0;\n      score += Math.min(usageCount * 2, 20);\n\n      // Context relevance\n      if (currentContext.activeTab) {\n        if (command.category === 'navigation' && command.id.includes(currentContext.activeTab)) {\n          score += 15;\n        }\n        if (command.category === currentContext.activeTab) {\n          score += 10;\n        }\n      }\n\n      // Natural language match boost\n      const nlMatch = nlResults.find(nl => nl.command === command.id);\n      if (nlMatch) {\n        score += nlMatch.confidence * 40;\n      }\n\n      if (score > 0) {\n        results.push({\n          ...command,\n          score,\n          usageCount,\n          isRecommended: score > 60\n        });\n      }\n    });\n\n    return results\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 8); // Limit to top 8 results\n  }, [parseNaturalLanguage, commandUsage, currentContext]);\n\n  // Get contextual commands based on current state\n  const getContextualCommands = useCallback(() => {\n    const contextual = [];\n\n    // Based on active tab\n    switch (currentContext.activeTab) {\n      case 'data':\n      case 'spreadsheet':\n        contextual.push(\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['search-data'],\n          COMMAND_REGISTRY['go-to-modeling']\n        );\n        break;\n      case 'modeling':\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['sensitivity-analysis'],\n          COMMAND_REGISTRY['go-to-analysis']\n        );\n        break;\n      case 'analysis':\n        contextual.push(\n          COMMAND_REGISTRY['create-chart'],\n          COMMAND_REGISTRY['export-data'],\n          COMMAND_REGISTRY['sensitivity-analysis']\n        );\n        break;\n      default:\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['help']\n        );\n    }\n\n    // Add frequently used commands\n    const frequentCommands = Object.entries(commandUsage)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 2)\n      .map(([id]) => COMMAND_REGISTRY[id])\n      .filter(Boolean);\n\n    return [...contextual, ...frequentCommands].slice(0, 6);\n  }, [currentContext, commandUsage]);\n\n  // Execute command\n  const executeCommand = useCallback(async(commandName, _params) => {\n    const command = COMMAND_REGISTRY[commandName];\n    if (!command) {\n      throw new Error(`Command not found: ${commandName}`);\n    }\n\n    try {\n      const result = await command.execute(_params, currentContext);\n\n      // Track usage\n      setCommandUsage(prev => ({\n        ...prev,\n        [commandName]: (prev[commandName] || 0) + 1\n      }));\n\n      return result;\n    } catch (error) {\n      console.error(`Command execution failed: ${commandName}`, error);\n      throw error;\n    }\n  }, [currentContext]);\n\n  // Learn from user behavior\n  const learnFromUsage = useCallback((commandId, query) => {\n    if (!query.trim()) return;\n\n    setUserLearning(prev => ({\n      ...prev,\n      [commandId]: {\n        ...prev[commandId],\n        queries: [...(prev[commandId]?.queries || []), query].slice(-5), // Keep last 5 queries\n        lastUsed: Date.now()\n      }\n    }));\n  }, []);\n\n  // Get command categories\n  const getCommandCategories = useCallback(() => {\n    const categories = {};\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      if (!categories[command.category]) {\n        categories[command.category] = [];\n      }\n      categories[command.category].push(command);\n    });\n    return categories;\n  }, []);\n\n  // Save usage data to localStorage\n  useEffect(() => {\n    localStorage.setItem('commandUsage', JSON.stringify(commandUsage));\n  }, [commandUsage]);\n\n  useEffect(() => {\n    localStorage.setItem('commandLearning', JSON.stringify(userLearning));\n  }, [userLearning]);\n\n  return {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories,\n    learnFromUsage,\n    parseNaturalLanguage,\n    commandRegistry: COMMAND_REGISTRY,\n    commandUsage,\n    userLearning\n  };\n};\n","import { motion, AnimatePresence } from 'framer-motion';\nimport { createPortal } from 'react-dom';\nimport {\n  Search,\n  Command,\n  ArrowRight,\n  Clock,\n  Star,\n  TrendingUp,\n  Calculator,\n  FileText,\n  Download,\n  Upload,\n  BarChart3,\n  Users,\n  Zap,\n  Globe,\n  Settings,\n  HelpCircle\n} from 'lucide-react';\nimport { useState, useEffect, useRef, useMemo } from 'react';\n\nimport { useCommandRegistry } from '../../hooks/useCommandRegistry';\n\nconst CommandPalette = ({\n  isOpen,\n  onClose,\n  onExecuteCommand,\n  currentContext = {},\n  recentCommands = [],\n  userPreferences: _userPreferences = {},\n  className: _className\n}) => {\n  const [query, setQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [_commandHistory, setCommandHistory] = useState([]);\n  const inputRef = useRef(null);\n  const listRef = useRef(null);\n  const dialogRef = useRef(null);\n\n  // Get command registry and search functionality\n  const {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories: _getCommandCategories,\n    learnFromUsage\n  } = useCommandRegistry(currentContext);\n\n  // Search results based on query\n  const searchResults = useMemo(() => {\n    if (!query.trim()) {\n      // Show recent commands and contextual suggestions when no query\n      const recent = recentCommands.slice(0, 3).map(cmd => ({ ...cmd, category: 'recent' }));\n      const contextual = getContextualCommands().slice(0, 4).map(cmd => ({ ...cmd, category: 'suggested' }));\n      const popular = [\n        {\n          id: 'new-dcf',\n          title: 'Create New DCF Model',\n          description: 'Start a new discounted cash flow valuation',\n          icon: Calculator,\n          category: 'popular',\n          keywords: ['dcf', 'valuation', 'model', 'new']\n        },\n        {\n          id: 'sensitivity-analysis',\n          title: 'Run Sensitivity Analysis',\n          description: 'Test assumptions with sensitivity analysis',\n          icon: TrendingUp,\n          category: 'popular',\n          keywords: ['sensitivity', 'analysis', 'wacc', 'assumptions']\n        }\n      ];\n\n      return [...recent, ...contextual, ...popular];\n    }\n\n    return searchCommands(query);\n  }, [query, recentCommands, searchCommands, getContextualCommands]);\n\n  // Reset selection when results change\n  useEffect(() => {\n    setSelectedIndex(0);\n  }, [searchResults]);\n\n  // Focus input when opened\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      inputRef.current.focus();\n      setQuery('');\n      setSelectedIndex(0);\n    }\n  }, [isOpen]);\n\n  // Keyboard navigation and focus trap\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleKeyDown = (e) => {\n      // Arrow/Enter/Escape behavior\n      if (['ArrowDown', 'ArrowUp', 'Enter', 'Escape'].includes(e.key)) {\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setSelectedIndex(prev => Math.min(prev + 1, searchResults.length - 1));\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setSelectedIndex(prev => Math.max(prev - 1, 0));\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (searchResults[selectedIndex]) {\n              handleExecuteCommand(searchResults[selectedIndex]);\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            onClose();\n            break;\n          default:\n            break;\n        }\n        return;\n      }\n\n      // Focus trap for Tab/Shift+Tab inside dialog\n      if (e.key === 'Tab' && dialogRef.current) {\n        const focusableSelectors = [\n          'a[href]',\n          'button:not([disabled])',\n          'textarea:not([disabled])',\n          'input:not([disabled])',\n          'select:not([disabled])',\n          '[tabindex]:not([tabindex=\"-1\"])'\n        ].join(',');\n        const focusables = Array.from(dialogRef.current.querySelectorAll(focusableSelectors))\n          .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));\n        if (focusables.length === 0) return;\n\n        const first = focusables[0];\n        const last = focusables[focusables.length - 1];\n        const active = document.activeElement;\n\n        if (!e.shiftKey && active === last) {\n          e.preventDefault();\n          first.focus();\n        } else if (e.shiftKey && active === first) {\n          e.preventDefault();\n          last.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, selectedIndex, searchResults, onClose]);\n\n  // Execute command\n  const handleExecuteCommand = async(command) => {\n    try {\n      // Add to command history\n      setCommandHistory(prev => [command, ...prev.slice(0, 9)]);\n\n      // Learn from usage\n      learnFromUsage(command.id, query);\n\n      // Execute the command\n      const result = await executeCommand(command.id, command.params);\n\n      // Notify parent component\n      if (onExecuteCommand) {\n        onExecuteCommand(command, result);\n      }\n\n      // Close palette\n      onClose();\n    } catch (error) {\n      console.error('Command execution failed:', error);\n      // Could show error toast here\n    }\n  };\n\n  // Get category icon\n  const getCategoryIcon = (category) => {\n    switch (category) {\n      case 'recent': return Clock;\n      case 'suggested': return Star;\n      case 'popular': return TrendingUp;\n      case 'navigation': return ArrowRight;\n      case 'analysis': return Calculator;\n      case 'data': return FileText;\n      case 'export': return Download;\n      case 'import': return Upload;\n      case 'charts': return BarChart3;\n      case 'collaboration': return Users;\n      case 'automation': return Zap;\n      case 'external': return Globe;\n      case 'settings': return Settings;\n      case 'help': return HelpCircle;\n      default: return Command;\n    }\n  };\n\n  // Get category color\n  const getCategoryColor = (category) => {\n    switch (category) {\n      case 'recent': return 'text-blue-500';\n      case 'suggested': return 'text-amber-500';\n      case 'popular': return 'text-emerald-500';\n      case 'navigation': return 'text-slate-500';\n      case 'analysis': return 'text-purple-500';\n      case 'data': return 'text-indigo-500';\n      case 'export': return 'text-green-500';\n      case 'import': return 'text-orange-500';\n      case 'charts': return 'text-pink-500';\n      case 'collaboration': return 'text-cyan-500';\n      case 'automation': return 'text-red-500';\n      case 'external': return 'text-gray-500';\n      case 'settings': return 'text-slate-600';\n      case 'help': return 'text-blue-600';\n      default: return 'text-slate-500';\n    }\n  };\n\n  // Highlight matching text\n  const highlightMatch = (text, query) => {\n    if (!query.trim()) return text;\n\n    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\n    const parts = text.split(regex);\n\n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded\">\n          {part}\n        </mark>\n      ) : part\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return createPortal(\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1200] flex items-start justify-center pt-20\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95, y: -20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: -20 }}\n          transition={{ type: 'spring', duration: 0.3 }}\n          className=\"bg-white rounded-xl shadow-2xl border border-slate-200 w-full max-w-2xl mx-4 overflow-hidden\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"command-palette-title\"\n          ref={dialogRef}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center gap-3 p-4 border-b border-slate-100 bg-slate-50\">\n            <div className=\"p-2 bg-blue-500 rounded-lg\">\n              <Command size={18} className=\"text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 id=\"command-palette-title\" className=\"font-semibold text-slate-900\">Command Palette</h3>\n              <p className=\"text-xs text-slate-500\">Type to search commands, or use natural language</p>\n            </div>\n            <div className=\"flex items-center gap-1 text-xs text-slate-500\">\n              <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">Esc</kbd>\n              <span>to close</span>\n            </div>\n          </div>\n\n          {/* Search Input */}\n          <div className=\"relative p-4 border-b border-slate-100\">\n            <div className=\"relative\">\n              <Search size={18} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" />\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Type a command or just describe what you'd like to do...\"\n                className=\"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-900 placeholder-slate-500\"\n              />\n            </div>\n\n            {/* Quick tips */}\n            {!query && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                <span className=\"text-xs text-slate-500\">Try:</span>\n                {['New DCF for AAPL', 'Run sensitivity on WACC', 'Export to PDF', 'Find revenue data'].map((tip) => (\n                  <button\n                    key={tip}\n                    onClick={() => setQuery(tip)}\n                    className=\"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors\"\n                  >\n                    &quot;{tip}&quot;\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Results */}\n          <div className=\"max-h-96 overflow-y-auto\" ref={listRef}>\n            {searchResults.length === 0 ? (\n              <div className=\"p-8 text-center\">\n                <div className=\"p-3 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n                  <Search size={24} className=\"text-slate-400\" />\n                </div>\n                <h4 className=\"font-medium text-slate-900 mb-2\">No commands found</h4>\n                <p className=\"text-sm text-slate-500\">\n                  Try a different search term or use natural language to describe what you want to do.\n                </p>\n              </div>\n            ) : (\n              <div className=\"py-2\">\n                {searchResults.map((command, index) => {\n                  const CategoryIcon = getCategoryIcon(command.category);\n                  const CommandIcon = command.icon;\n                  const isSelected = index === selectedIndex;\n\n                  return (\n                    <motion.div\n                      key={`${command.id}-${index}`}\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.05 }}\n                      className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-all duration-150 ${\n                        isSelected\n                          ? 'bg-blue-50 border-r-2 border-blue-500'\n                          : 'hover:bg-slate-50'\n                      }`}\n                      role=\"button\"\n                      tabIndex={0}\n                      aria-selected={isSelected}\n                      onClick={() => handleExecuteCommand(command)}\n                      onFocus={() => setSelectedIndex(index)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                          e.preventDefault();\n                          handleExecuteCommand(command);\n                        }\n                      }}\n                    >\n                      {/* Category indicator */}\n                      <div\n                        className={`p-1.5 rounded-md ${\n                          isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                        }`}\n                      >\n                        <CategoryIcon size={12} className={getCategoryColor(command.category)} />\n                      </div>\n\n                      {/* Command icon */}\n                      {CommandIcon && (\n                        <div\n                          className={`p-2 rounded-lg ${\n                            isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                          }`}\n                        >\n                          <CommandIcon\n                            size={16} className={\n                              isSelected ? 'text-blue-600' : 'text-slate-600'\n                            }\n                          />\n                        </div>\n                      )}\n\n                      {/* Command details */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4\n                            className={`font-medium truncate ${\n                              isSelected ? 'text-blue-900' : 'text-slate-900'\n                            }`}\n                          >\n                            {highlightMatch(command.title, query)}\n                          </h4>\n                          {command.shortcut && (\n                            <div className=\"flex items-center gap-1\">\n                              {command.shortcut.split('+').map((key, idx) => (\n                                <kbd key={idx} className=\"px-1.5 py-0.5 bg-slate-200 text-slate-600 text-xs rounded\">\n                                  {key}\n                                </kbd>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                        <p\n                          className={`text-sm truncate ${\n                            isSelected ? 'text-blue-700' : 'text-slate-500'\n                          }`}\n                        >\n                          {highlightMatch(command.description, query)}\n                        </p>\n\n                        {/* Command metadata */}\n                        <div className=\"flex items-center gap-3 mt-1\">\n                          <span\n                            className={`text-xs px-2 py-0.5 rounded-full ${\n                              isSelected ? 'bg-blue-100 text-blue-700' : 'bg-slate-100 text-slate-600'\n                            }`}\n                          >\n                            {command.category}\n                          </span>\n                          {command.usageCount && (\n                            <span className=\"text-xs text-slate-400\">\n                              Used {command.usageCount} times\n                            </span>\n                          )}\n                          {command.isNew && (\n                            <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">\n                              New\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Execute indicator */}\n                      {isSelected && (\n                        <motion.div\n                          initial={{ opacity: 0, x: -10 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          className=\"text-blue-500\"\n                        >\n                          <ArrowRight size={16} />\n                        </motion.div>\n                      )}\n                    </motion.div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\"></kbd>\n                <span>Navigate</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">Enter</kbd>\n                <span>Execute</span>\n              </div>\n            </div>\n            <div className=\"text-slate-400\">\n              {searchResults.length} command{searchResults.length !== 1 ? 's' : ''} available\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>,\n    document.body\n  );\n};\n\nexport default CommandPalette;\n","import React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { X, Command, Search, Zap, KeyboardIcon } from 'lucide-react';\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\nimport { cn } from '../../utils/cn';\n\n/**\n * Keyboard Shortcuts Help Panel\n * Displays all available shortcuts organized by category\n */\n\nexport const KeyboardShortcutsHelp = ({ isOpen, onClose }) => {\n  const [activeCategory, setActiveCategory] = useState('general');\n  const { getShortcutsByCategory, formatKeyCombo } = useKeyboardShortcuts();\n  \n  if (!isOpen) return null;\n\n  const shortcuts = getShortcutsByCategory();\n  \n  const categories = [\n    { id: 'general', label: 'General', icon: Command },\n    { id: 'navigation', label: 'Navigation', icon: Search },\n    { id: 'analysis', label: 'Analysis', icon: Zap },\n    { id: 'data', label: 'Data', icon: KeyboardIcon },\n    { id: 'view', label: 'View', icon: Command },\n    { id: 'quick', label: 'Quick Access', icon: Zap }\n  ];\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-slate-200\">\n          <div className=\"flex items-center space-x-3\">\n            <KeyboardIcon className=\"w-6 h-6 text-blue-600\" />\n            <h2 className=\"text-xl font-semibold text-slate-900\">Keyboard Shortcuts</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"flex h-[calc(90vh-80px)]\">\n          {/* Sidebar */}\n          <div className=\"w-64 bg-slate-50 border-r border-slate-200 overflow-y-auto\">\n            <div className=\"p-4\">\n              <h3 className=\"text-sm font-medium text-slate-900 mb-3\">Categories</h3>\n              <nav className=\"space-y-1\">\n                {categories.map(category => {\n                  const Icon = category.icon;\n                  const shortcutCount = shortcuts[category.id]?.length || 0;\n                  \n                  return (\n                    <button\n                      key={category.id}\n                      onClick={() => setActiveCategory(category.id)}\n                      className={cn(\n                        'w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors',\n                        activeCategory === category.id\n                          ? 'bg-blue-100 text-blue-900'\n                          : 'text-slate-700 hover:bg-slate-100'\n                      )}\n                    >\n                      <div className=\"flex items-center space-x-2\">\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{category.label}</span>\n                      </div>\n                      <span className=\"text-xs text-slate-500\">{shortcutCount}</span>\n                    </button>\n                  );\n                })}\n              </nav>\n            </div>\n\n            {/* Tips */}\n            <div className=\"p-4 border-t border-slate-200\">\n              <h4 className=\"text-sm font-medium text-slate-900 mb-2\">Pro Tips</h4>\n              <ul className=\"text-xs text-slate-600 space-y-1\">\n                <li> Use Cmd+K (Ctrl+K) for command palette</li>\n                <li> Hold Shift for additional shortcuts</li>\n                <li> Shortcuts work globally except in text inputs</li>\n                <li> F1 opens context-sensitive help</li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">\n                  {categories.find(c => c.id === activeCategory)?.label} Shortcuts\n                </h3>\n                <p className=\"text-sm text-slate-600\">\n                  {shortcuts[activeCategory]?.length || 0} shortcuts available in this category\n                </p>\n              </div>\n\n              {shortcuts[activeCategory]?.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {shortcuts[activeCategory].map((shortcut, index) => (\n                    <div\n                      key={`${shortcut.key}-${index}`}\n                      className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors\"\n                    >\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium text-slate-900 mb-1\">\n                          {shortcut.description}\n                        </div>\n                        {shortcut.target && (\n                          <div className=\"text-xs text-slate-500\">\n                            Target: {shortcut.target}\n                          </div>\n                        )}\n                        {shortcut.company && (\n                          <div className=\"text-xs text-slate-500\">\n                            Company: {shortcut.company}\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"ml-4\">\n                        <kbd className=\"inline-flex items-center px-3 py-1.5 bg-white border border-slate-300 rounded-md shadow-sm text-sm font-mono text-slate-900\">\n                          {formatKeyCombo(shortcut.key)}\n                        </kbd>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <KeyboardIcon className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\n                  <p className=\"text-slate-500\">No shortcuts available in this category</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 py-4 border-t border-slate-200 bg-slate-50\">\n          <div className=\"flex items-center justify-between text-sm text-slate-600\">\n            <div>\n              Press <kbd className=\"px-2 py-1 bg-white border border-slate-300 rounded\">Esc</kbd> to close\n            </div>\n            <div>\n              Total: {Object.values(shortcuts).flat().length} shortcuts\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>,\n    document.body\n  );\n};\n\nexport default KeyboardShortcutsHelp;\n","import React, { useState, useCallback, createContext, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\nimport CommandPalette from '../CommandPalette/CommandPalette';\nimport KeyboardShortcutsHelp from './KeyboardShortcutsHelp';\n\n/**\n * Keyboard Shortcuts Provider\n * Provides global keyboard shortcuts functionality across the application\n */\n\nconst KeyboardShortcutsContext = createContext();\n\nexport const useKeyboardShortcutsContext = () => {\n  const context = useContext(KeyboardShortcutsContext);\n  if (!context) {\n    throw new Error('useKeyboardShortcutsContext must be used within KeyboardShortcutsProvider');\n  }\n  return context;\n};\n\nexport const KeyboardShortcutsProvider = ({ children }) => {\n  const navigate = useNavigate();\n  const [showCommandPalette, setShowCommandPalette] = useState(false);\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\n  const [recentCommands, setRecentCommands] = useState([]);\n  const [currentContext, setCurrentContext] = useState({});\n\n  // Define command handlers\n  const commandHandlers = {\n    'open-command-palette': () => setShowCommandPalette(true),\n    'navigate': (shortcut) => navigate(shortcut.target),\n    'create-dcf': () => {\n      navigate('/private-analysis');\n      // Trigger DCF creation after navigation\n      setTimeout(() => {\n        const event = new CustomEvent('create-dcf-model');\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'create-lbo': () => {\n      navigate('/private-analysis');\n      setTimeout(() => {\n        const event = new CustomEvent('create-lbo-model');\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'save': () => {\n      const event = new CustomEvent('save-analysis');\n      window.dispatchEvent(event);\n    },\n    'import-data': () => {\n      const event = new CustomEvent('import-data');\n      window.dispatchEvent(event);\n    },\n    'export-data': () => {\n      const event = new CustomEvent('export-data');\n      window.dispatchEvent(event);\n    },\n    'search-data': () => {\n      const event = new CustomEvent('search-data');\n      window.dispatchEvent(event);\n    },\n    'sensitivity-analysis': () => {\n      const event = new CustomEvent('run-sensitivity-analysis');\n      window.dispatchEvent(event);\n    },\n    'monte-carlo': () => {\n      const event = new CustomEvent('run-monte-carlo');\n      window.dispatchEvent(event);\n    },\n    'toggle-insights': () => {\n      const event = new CustomEvent('toggle-insights-sidebar');\n      window.dispatchEvent(event);\n    },\n    'help': () => setShowShortcutsHelp(true),\n    'quick-company': (shortcut) => {\n      navigate(`/market-analysis?symbol=${shortcut.company}`);\n    },\n    'open-options-pricer': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'options' } });\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'open-bond-analytics': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'fixed-income' } });\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'open-credit-modeling': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'credit' } });\n        window.dispatchEvent(event);\n      }, 100);\n    }\n  };\n\n  // Initialize keyboard shortcuts\n  useKeyboardShortcuts(commandHandlers);\n\n  // Handle post-execution from the canonical command palette\n  // The canonical palette executes via useCommandRegistry. We only track recents here.\n  const handlePostExecute = useCallback((command /*, result */) => {\n    setRecentCommands(prev => {\n      const filtered = prev.filter(cmd => cmd.id !== command.id);\n      return [command, ...filtered].slice(0, 5);\n    });\n  }, []);\n\n  const contextValue = {\n    showCommandPalette: () => setShowCommandPalette(true),\n    showShortcutsHelp: () => setShowShortcutsHelp(true),\n    // Expose a no-op executeCommand for compatibility; palette handles execution\n    executeCommand: () => {},\n    recentCommands,\n    updateCommandContext: (ctx) => setCurrentContext(prev => ({ ...prev, ...ctx }))\n  };\n\n  return (\n    <KeyboardShortcutsContext.Provider value={contextValue}>\n      {children}\n      \n      {/* Command Palette */}\n      <CommandPalette\n        isOpen={showCommandPalette}\n        onClose={() => setShowCommandPalette(false)}\n        onExecuteCommand={handlePostExecute}\n        currentContext={currentContext}\n        recentCommands={recentCommands}\n      />\n\n      {/* Shortcuts Help */}\n      <KeyboardShortcutsHelp\n        isOpen={showShortcutsHelp}\n        onClose={() => setShowShortcutsHelp(false)}\n      />\n    </KeyboardShortcutsContext.Provider>\n  );\n};\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n};\n\nexport default ScrollToTop;\n","import { cn } from '../../utils/cn';\n\nconst LoadingSpinner = ({\n  size = 'default',\n  className = '',\n  text = 'Loading...',\n  showText = true,\n  variant = 'primary'\n}) => {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    default: 'w-8 h-8',\n    lg: 'w-12 h-12',\n    xl: 'w-16 h-16'\n  };\n\n  const variantClasses = {\n    primary: 'text-primary',\n    secondary: 'text-secondary',\n    muted: 'text-muted-foreground',\n    white: 'text-white'\n  };\n\n  const textSizeClasses = {\n    sm: 'text-xs',\n    default: 'text-sm',\n    lg: 'text-base',\n    xl: 'text-lg'\n  };\n\n  return (\n    <div className={cn('flex flex-col items-center justify-center space-y-2', className)}>\n      <div\n        className={cn(\n          'animate-spin rounded-full border-2 border-current border-t-transparent',\n          sizeClasses[size],\n          variantClasses[variant]\n        )}\n      />\n      {showText && (\n        <p className={cn('font-medium', textSizeClasses[size], variantClasses[variant])}>{text}</p>\n      )}\n    </div>\n  );\n};\n\n// Full page loading spinner\nexport const FullPageLoader = ({ text = 'Loading FinanceAnalyst Pro...' }) => {\n  return (\n    <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center\">\n      <div className=\"bg-card border border-border rounded-lg p-8 shadow-elevation-2\">\n        <LoadingSpinner size=\"lg\" text={text} variant=\"primary\" />\n      </div>\n    </div>\n  );\n};\n\n// Inline loading spinner for buttons\nexport const ButtonSpinner = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'animate-spin rounded-full border-2 border-current border-t-transparent w-4 h-4',\n        className\n      )}\n    />\n  );\n};\n\n// Skeleton loader for content\nexport const SkeletonLoader = ({ lines = 3, className = '', animated = true }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={cn(\n            'h-4 bg-muted rounded',\n            animated && 'animate-pulse',\n            index === lines - 1 && 'w-3/4' // Last line shorter\n          )}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Chart loading placeholder\nexport const ChartLoader = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-center h-64 bg-muted/20 rounded-lg border-2 border-dashed border-muted',\n        className\n      )}\n    >\n      <div className=\"text-center space-y-2\">\n        <LoadingSpinner size=\"lg\" variant=\"muted\" showText={false} />\n        <p className=\"text-sm text-muted-foreground\">Loading chart data...</p>\n      </div>\n    </div>\n  );\n};\n\n// Table loading placeholder\nexport const TableLoader = ({ rows = 5, columns = 4, className = '' }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Header */}\n      <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className=\"h-6 bg-muted rounded animate-pulse\" />\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className=\"grid gap-4\"\n          style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div\n              key={`cell-${rowIndex}-${colIndex}`}\n              className=\"h-4 bg-muted/60 rounded animate-pulse\"\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import { Suspense, lazy, useEffect } from 'react';\nimport { BrowserRouter, Routes as RouterRoutes, Route, useLocation } from 'react-router-dom';\nimport { KeyboardShortcutsProvider } from './components/ui/KeyboardShortcutsProvider';\n\nimport ErrorBoundary from './components/ErrorBoundary';\nimport ScrollToTop from './components/ScrollToTop';\nimport LoadingSpinner from './components/ui/LoadingSpinner';\nimport monitoring from './utils/monitoring';\n\n// Lazy load pages for code splitting and better performance\nconst FinancialModelWorkspace = lazy(() => import('./pages/financial-model-workspace'));\nconst RealTimeMarketDataCenter = lazy(() => import('./pages/real-time-market-data-center'));\nconst ScenarioAnalysisSensitivityTools = lazy(\n  () => import('./pages/scenario-analysis-sensitivity-tools')\n);\nconst ValuationTool = lazy(() => import('./components/ValuationTool/ValuationTool'));\nconst ValuationToolDocs = lazy(() => import('./components/ValuationTool/ValuationToolDocs'));\nconst ValuationToolDemo = lazy(() => import('./pages/valuation-tool-demo'));\nconst PrivateAnalysis = lazy(() => import('./pages/PrivateAnalysis'));\nconst ValuationWorkbench = lazy(() => import('./pages/ValuationWorkbench'));\nconst ModelLab = lazy(() => import('./pages/ModelLab'));\nconst PortfolioManagement = lazy(() => import('./pages/PortfolioManagement'));\nconst ThesisCanvas = lazy(() => import('./pages/ThesisCanvas'));\nconst AdvancedCharting = lazy(() => import('./pages/AdvancedCharting'));\nconst MarketAnalysis = lazy(() => import('./pages/MarketAnalysis'));\nconst Reports = lazy(() => import('./pages/Reports'));\nconst Settings = lazy(() => import('./pages/Settings'));\nconst AIInsights = lazy(() => import('./pages/AIInsights'));\nconst Analytics = lazy(() => import('./pages/Analytics'));\nconst AdvancedAnalytics = lazy(() => import('./pages/AdvancedAnalytics'));\nconst FinancialInputsDemo = lazy(() => import('./components/FinancialInputsDemo'));\nconst Models = lazy(() => import('./pages/Models'));\nconst App = lazy(() => import('./pages/App'));\nconst Data = lazy(() => import('./pages/Data'));\nconst Integrations = lazy(() => import('./pages/Integrations'));\nconst NotFound = lazy(() => import('./pages/NotFound'));\nconst MonitoringDebugPanel = lazy(() => import('./components/MonitoringDebugPanel'));\n\n// Track route changes for analytics\nconst RouteChangeTracker = () => {\n  const location = useLocation();\n\n  useEffect(() => {\n    const path = location.pathname + (location.search || '');\n    monitoring.trackPageView(path);\n  }, [location.pathname, location.search]);\n\n  return null;\n};\n\nconst Routes = () => {\n  return (\n    <BrowserRouter>\n      <ErrorBoundary>\n        <ScrollToTop />\n        <RouteChangeTracker />\n        <KeyboardShortcutsProvider>\n          <Suspense fallback={<LoadingSpinner />}>\n            <RouterRoutes>\n            {/* Define your routes here */}\n            <Route path=\"/\" element={<FinancialModelWorkspace />} />\n            <Route path=\"/financial-model-workspace\" element={<FinancialModelWorkspace />} />\n            <Route path=\"/real-time-market-data-center\" element={<RealTimeMarketDataCenter />} />\n            <Route\n              path=\"/scenario-analysis-sensitivity-tools\"\n              element={<ScenarioAnalysisSensitivityTools />}\n            />\n            <Route path=\"/valuation-tool\" element={<ValuationTool />} />\n            <Route path=\"/valuation-tool/docs\" element={<ValuationToolDocs />} />\n            <Route path=\"/valuation-tool/demo\" element={<ValuationToolDemo />} />\n            <Route path=\"/valuation-workbench\" element={<ValuationWorkbench />} />\n            <Route path=\"/model-lab\" element={<ModelLab />} />\n            <Route path=\"/advanced-charts\" element={<AdvancedCharting />} />\n            <Route path=\"/market-analysis\" element={<MarketAnalysis />} />\n            <Route path=\"/reports\" element={<Reports />} />\n            <Route path=\"/settings\" element={<Settings />} />\n            <Route path=\"/ai-insights\" element={<AIInsights />} />\n            <Route path=\"/analytics\" element={<Analytics />} />\n            <Route path=\"/advanced-analytics\" element={<AdvancedAnalytics />} />\n            <Route path=\"/portfolio-management\" element={<PortfolioManagement />} />\n            <Route path=\"/portfolio\" element={<PortfolioManagement />} />\n            <Route path=\"/models\" element={<Models />} />\n            <Route path=\"/app\" element={<App />} />\n            <Route path=\"/data\" element={<Data />} />\n            <Route path=\"/integrations\" element={<Integrations />} />\n            <Route path=\"/canvas\" element={<ThesisCanvas />} />\n            <Route path=\"/private-analysis\" element={<PrivateAnalysis />} />\n            <Route path=\"/financial-inputs-demo\" element={<FinancialInputsDemo />} />\n            {(import.meta.env.VITE_ENABLE_DEBUG_MODE === 'true' || import.meta.env.VITE_APP_ENV !== 'production') && (\n              <Route path=\"/monitoring-debug\" element={<MonitoringDebugPanel />} />\n            )}\n            <Route path=\"*\" element={<NotFound />} />\n            </RouterRoutes>\n          </Suspense>\n        </KeyboardShortcutsProvider>\n      </ErrorBoundary>\n    </BrowserRouter>\n  );\n} \n\nexport default Routes;\n","import { useEffect, useState } from 'react';\n\nimport AIFinancialAssistant from './components/AIAssistant/AIFinancialAssistant';\nimport PersistentCLI from './components/CLI/PersistentCLI';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport PerformanceDashboard from './components/PerformanceDashboard';\nimport SEOProvider from './components/SEO/SEOProvider';\nimport { usePerformanceDashboard } from './hooks/usePerformanceDashboard';\nimport Routes from './Routes';\nimport { initializePerformanceMonitoring } from './utils/performanceMonitoring';\n\nfunction App() {\n  const { isVisible, hideDashboard } = usePerformanceDashboard();\n  const [isAIAssistantOpen, setIsAIAssistantOpen] = useState(false);\n  const [currentContext, setCurrentContext] = useState({\n    path: window.location.pathname,\n    timestamp: new Date().toISOString()\n  });\n  const [portfolioData, _setPortfolioData] = useState(null);\n  const [marketData, _setMarketData] = useState(null);\n\n  // Initialize performance monitoring on app start\n  useEffect(() => {\n    initializePerformanceMonitoring();\n  }, []);\n\n  // Update context when route changes\n  useEffect(() => {\n    setCurrentContext({\n      path: window.location.pathname,\n      timestamp: new Date().toISOString()\n    });\n  }, [window.location.pathname]);\n\n  // Removed local Cmd/Ctrl+K handler to reserve it for the global command palette\n\n  const handleNavigation = (route) => {\n    window.location.href = route;\n  };\n\n  return (\n    <ErrorBoundary>\n      <SEOProvider>\n        <Routes />\n        <PerformanceDashboard\n          isVisible={isVisible}\n          onClose={hideDashboard}\n        />\n        <AIFinancialAssistant\n          isOpen={isAIAssistantOpen}\n          onToggle={() => setIsAIAssistantOpen(prev => !prev)}\n          currentContext={currentContext}\n          portfolioData={portfolioData}\n          marketData={marketData}\n        />\n        {/* Persistent CLI - Always visible at bottom */}\n        <PersistentCLI\n          currentContext={currentContext}\n          portfolioData={portfolioData}\n          marketData={marketData}\n          onNavigate={handleNavigation}\n        />\n        {/* Floating AI Assistant Button */}\n        {!isAIAssistantOpen && (\n          <button\n            onClick={() => setIsAIAssistantOpen(true)}\n            className=\"fixed bottom-20 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 z-40\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n              />\n            </svg>\n          </button>\n        )}\n      </SEOProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import { useState, useCallback, useEffect } from 'react';\n\n// Hook for managing performance dashboard visibility and hotkey\nexport function usePerformanceDashboard() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const toggleDashboard = useCallback(() => {\n    setIsVisible(prev => !prev);\n  }, []);\n\n  const showDashboard = useCallback(() => {\n    setIsVisible(true);\n  }, []);\n\n  const hideDashboard = useCallback(() => {\n    setIsVisible(false);\n  }, []);\n\n  // Keyboard shortcut for dashboard (Ctrl/Cmd + Shift + P)\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key === 'P') {\n        event.preventDefault();\n        toggleDashboard();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [toggleDashboard]);\n\n  // Show dashboard automatically in development if there are performance issues\n  useEffect(() => {\n    if (import.meta.env.DEV) {\n      // Check for performance budget violations after page load\n      const checkPerformanceIssues = () => {\n        // This would integrate with your performance monitoring\n        const webVitals = window.webVitalsData;\n        if (webVitals) {\n          const hasIssues =\n            (webVitals.LCP && webVitals.LCP > 2500) ||\n            (webVitals.FID && webVitals.FID > 100) ||\n            (webVitals.CLS && webVitals.CLS > 0.1);\n\n          if (hasIssues) {\n            console.warn('Performance issues detected. Press Ctrl/Cmd + Shift + P to open dashboard.');\n          }\n        }\n      };\n\n      // Check after initial page load\n      setTimeout(checkPerformanceIssues, 3000);\n    }\n  }, []);\n\n  return {\n    isVisible,\n    toggleDashboard,\n    showDashboard,\n    hideDashboard\n  };\n}\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  name: 'Guest',\n  isAuthenticated: false\n};\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    login: (state, action) => {\n      state.name = action.payload.name;\n      state.isAuthenticated = true;\n    },\n    logout: (state) => {\n      state.name = 'Guest';\n      state.isAuthenticated = false;\n    }\n  }\n});\n\nexport const { login, logout } = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport userReducer from './slices/userSlice';\n\nexport const store = configureStore({\n  reducer: {\n    user: userReducer\n  }\n});\n","/**\n * Production Monitoring and Error Tracking Service\n * Comprehensive monitoring solution for production deployment\n */\n\nclass ProductionMonitoring {\n  constructor() {\n    this.isInitialized = false;\n    this.userId = null;\n    this.sessionId = this.generateSessionId();\n    this.startTime = Date.now();\n    this.errorQueue = [];\n    this.performanceQueue = [];\n    this.userActivityQueue = [];\n    \n    // Initialize immediately\n    this.init();\n  }\n\n  init() {\n    if (this.isInitialized) return;\n\n    try {\n      // Initialize Sentry if available\n      this.initSentry();\n      \n      // Setup error listeners\n      this.setupErrorListeners();\n      \n      // Setup performance monitoring\n      this.setupPerformanceMonitoring();\n      \n      // Setup user activity tracking\n      this.setupUserActivityTracking();\n      \n      // Setup periodic health checks\n      this.setupHealthChecks();\n\n      this.isInitialized = true;\n      console.log(' Production monitoring initialized');\n      \n    } catch (error) {\n      console.warn('Failed to initialize monitoring:', error);\n    }\n  }\n\n  initSentry() {\n    if (typeof window !== 'undefined' && window.Sentry) {\n      window.Sentry.init({\n        dsn: process.env.VITE_SENTRY_DSN,\n        environment: process.env.VITE_APP_ENV || 'development',\n        tracesSampleRate: 0.1,\n        beforeSend: (event, hint) => {\n          // Filter out known non-critical errors\n          const ignoredErrors = [\n            'ResizeObserver loop limit exceeded',\n            'Non-Error promise rejection captured',\n            'Network request failed'\n          ];\n          \n          if (ignoredErrors.some(ignored => \n            event.exception?.values?.[0]?.value?.includes(ignored)\n          )) {\n            return null;\n          }\n          \n          return event;\n        }\n      });\n\n      // Set user context if available\n      if (this.userId) {\n        window.Sentry.setUser({ id: this.userId });\n      }\n    }\n  }\n\n  setupErrorListeners() {\n    // Global error handler\n    window.addEventListener('error', (event) => {\n      this.logError({\n        type: 'javascript',\n        message: event.message,\n        filename: event.filename,\n        lineno: event.lineno,\n        colno: event.colno,\n        stack: event.error?.stack,\n        timestamp: new Date().toISOString()\n      });\n    });\n\n    // Promise rejection handler\n    window.addEventListener('unhandledrejection', (event) => {\n      this.logError({\n        type: 'promise',\n        message: event.reason?.message || 'Unhandled promise rejection',\n        stack: event.reason?.stack,\n        timestamp: new Date().toISOString()\n      });\n    });\n\n    // Resource loading errors\n    window.addEventListener('error', (event) => {\n      if (event.target !== window) {\n        this.logError({\n          type: 'resource',\n          message: `Failed to load ${event.target.tagName}: ${event.target.src || event.target.href}`,\n          element: event.target.tagName,\n          source: event.target.src || event.target.href,\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, true);\n  }\n\n  setupPerformanceMonitoring() {\n    // Web Vitals\n    if ('PerformanceObserver' in window) {\n      // Cumulative Layout Shift\n      new PerformanceObserver((entryList) => {\n        for (const entry of entryList.getEntries()) {\n          if (!entry.hadRecentInput) {\n            this.logPerformance({\n              metric: 'CLS',\n              value: entry.value,\n              timestamp: new Date().toISOString()\n            });\n          }\n        }\n      }).observe({ entryTypes: ['layout-shift'] });\n\n      // Largest Contentful Paint\n      new PerformanceObserver((entryList) => {\n        const entries = entryList.getEntries();\n        const lastEntry = entries[entries.length - 1];\n        this.logPerformance({\n          metric: 'LCP',\n          value: lastEntry.startTime,\n          timestamp: new Date().toISOString()\n        });\n      }).observe({ entryTypes: ['largest-contentful-paint'] });\n\n      // First Input Delay\n      new PerformanceObserver((entryList) => {\n        for (const entry of entryList.getEntries()) {\n          this.logPerformance({\n            metric: 'FID',\n            value: entry.processingStart - entry.startTime,\n            timestamp: new Date().toISOString()\n          });\n        }\n      }).observe({ entryTypes: ['first-input'] });\n    }\n\n    // Page load metrics\n    window.addEventListener('load', () => {\n      setTimeout(() => {\n        const navigation = performance.getEntriesByType('navigation')[0];\n        const paint = performance.getEntriesByType('paint');\n        \n        this.logPerformance({\n          metric: 'page_load',\n          domContentLoaded: navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,\n          loadComplete: navigation.loadEventEnd - navigation.loadEventStart,\n          firstPaint: paint.find(p => p.name === 'first-paint')?.startTime,\n          firstContentfulPaint: paint.find(p => p.name === 'first-contentful-paint')?.startTime,\n          timestamp: new Date().toISOString()\n        });\n      }, 0);\n    });\n  }\n\n  setupUserActivityTracking() {\n    let lastActivity = Date.now();\n    let isActive = true;\n\n    const trackActivity = () => {\n      lastActivity = Date.now();\n      if (!isActive) {\n        isActive = true;\n        this.logUserActivity({\n          type: 'session_resume',\n          timestamp: new Date().toISOString()\n        });\n      }\n    };\n\n    // Track user interactions\n    ['click', 'scroll', 'keypress', 'mousemove'].forEach(event => {\n      document.addEventListener(event, trackActivity, { passive: true });\n    });\n\n    // Check for inactivity\n    setInterval(() => {\n      if (Date.now() - lastActivity > 300000 && isActive) { // 5 minutes\n        isActive = false;\n        this.logUserActivity({\n          type: 'session_idle',\n          duration: Date.now() - lastActivity,\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, 60000); // Check every minute\n\n    // Track page visibility\n    document.addEventListener('visibilitychange', () => {\n      this.logUserActivity({\n        type: document.hidden ? 'page_hidden' : 'page_visible',\n        timestamp: new Date().toISOString()\n      });\n    });\n\n    // Track page unload\n    window.addEventListener('beforeunload', () => {\n      this.logUserActivity({\n        type: 'page_unload',\n        sessionDuration: Date.now() - this.startTime,\n        timestamp: new Date().toISOString()\n      });\n      this.flush(); // Send queued data\n    });\n  }\n\n  setupHealthChecks() {\n    // Periodic health check\n    setInterval(() => {\n      this.logHealthCheck({\n        memoryUsage: this.getMemoryUsage(),\n        connectionType: this.getConnectionType(),\n        timestamp: new Date().toISOString()\n      });\n    }, 300000); // Every 5 minutes\n  }\n\n  // Public API methods\n  logError(errorData) {\n    const enhancedError = {\n      ...errorData,\n      sessionId: this.sessionId,\n      userId: this.userId,\n      url: window.location.href,\n      userAgent: navigator.userAgent,\n      timestamp: errorData.timestamp || new Date().toISOString()\n    };\n\n    this.errorQueue.push(enhancedError);\n    \n    // Send to Sentry if available\n    if (window.Sentry) {\n      window.Sentry.captureException(new Error(errorData.message), {\n        extra: enhancedError\n      });\n    }\n\n    // Flush if queue is getting large\n    if (this.errorQueue.length >= 10) {\n      this.flushErrors();\n    }\n  }\n\n  logPerformance(performanceData) {\n    const enhancedData = {\n      ...performanceData,\n      sessionId: this.sessionId,\n      userId: this.userId,\n      url: window.location.href\n    };\n\n    this.performanceQueue.push(enhancedData);\n\n    // Flush periodically\n    if (this.performanceQueue.length >= 20) {\n      this.flushPerformance();\n    }\n  }\n\n  logUserActivity(activityData) {\n    const enhancedData = {\n      ...activityData,\n      sessionId: this.sessionId,\n      userId: this.userId,\n      url: window.location.href\n    };\n\n    this.userActivityQueue.push(enhancedData);\n\n    // Flush periodically\n    if (this.userActivityQueue.length >= 50) {\n      this.flushUserActivity();\n    }\n  }\n\n  logHealthCheck(healthData) {\n    this.sendToEndpoint('/api/health', {\n      ...healthData,\n      sessionId: this.sessionId,\n      userId: this.userId\n    });\n  }\n\n  // Set user context\n  setUser(userId, userData = {}) {\n    this.userId = userId;\n    \n    if (window.Sentry) {\n      window.Sentry.setUser({ id: userId, ...userData });\n    }\n  }\n\n  // Flush methods\n  flushErrors() {\n    if (this.errorQueue.length > 0) {\n      this.sendToEndpoint('/api/errors', this.errorQueue);\n      this.errorQueue = [];\n    }\n  }\n\n  flushPerformance() {\n    if (this.performanceQueue.length > 0) {\n      this.sendToEndpoint('/api/performance', this.performanceQueue);\n      this.performanceQueue = [];\n    }\n  }\n\n  flushUserActivity() {\n    if (this.userActivityQueue.length > 0) {\n      this.sendToEndpoint('/api/user-activity', this.userActivityQueue);\n      this.userActivityQueue = [];\n    }\n  }\n\n  flush() {\n    this.flushErrors();\n    this.flushPerformance();\n    this.flushUserActivity();\n  }\n\n  // Utility methods\n  generateSessionId() {\n    return `session-${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n  }\n\n  getMemoryUsage() {\n    if ('memory' in performance) {\n      return {\n        usedJSHeapSize: performance.memory.usedJSHeapSize,\n        totalJSHeapSize: performance.memory.totalJSHeapSize,\n        jsHeapSizeLimit: performance.memory.jsHeapSizeLimit\n      };\n    }\n    return null;\n  }\n\n  getConnectionType() {\n    if ('connection' in navigator) {\n      return {\n        effectiveType: navigator.connection.effectiveType,\n        downlink: navigator.connection.downlink,\n        rtt: navigator.connection.rtt\n      };\n    }\n    return null;\n  }\n\n  async sendToEndpoint(endpoint, data) {\n    try {\n      await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data)\n      });\n    } catch (error) {\n      console.warn(`Failed to send data to ${endpoint}:`, error);\n    }\n  }\n\n  // React Error Boundary integration\n  captureErrorBoundary(error, errorInfo, errorId) {\n    this.logError({\n      type: 'react_error_boundary',\n      message: error.message,\n      stack: error.stack,\n      componentStack: errorInfo.componentStack,\n      errorId,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  // Feature flag tracking\n  trackFeatureUsage(featureName, context = {}) {\n    this.logUserActivity({\n      type: 'feature_usage',\n      feature: featureName,\n      context,\n      timestamp: new Date().toISOString()\n    });\n  }\n\n  // Performance mark for custom metrics\n  mark(name) {\n    if ('performance' in window && 'mark' in performance) {\n      performance.mark(name);\n    }\n  }\n\n  measure(name, startMark, endMark) {\n    if ('performance' in window && 'measure' in performance) {\n      try {\n        performance.measure(name, startMark, endMark);\n        const measure = performance.getEntriesByName(name, 'measure')[0];\n        \n        this.logPerformance({\n          metric: 'custom_measure',\n          name,\n          duration: measure.duration,\n          timestamp: new Date().toISOString()\n        });\n      } catch (error) {\n        console.warn('Failed to measure performance:', error);\n      }\n    }\n  }\n}\n\n// Create singleton instance\nconst productionMonitoring = new ProductionMonitoring();\n\nexport default productionMonitoring;","// Security Headers Management and CSP Nonce Generation\n\n// Generate secure nonce for CSP\nexport function generateNonce() {\n  if (typeof window !== 'undefined' && window.crypto) {\n    const array = new Uint8Array(16);\n    window.crypto.getRandomValues(array);\n    return btoa(String.fromCharCode.apply(null, array));\n  }\n\n  // Fallback for server-side or older browsers\n  return Math.random().toString(36).substring(2, 15) +\n         Math.random().toString(36).substring(2, 15);\n}\n\n// Store current nonce for the session\nlet currentNonce = null;\n\nexport function getCurrentNonce() {\n  if (!currentNonce) {\n    currentNonce = generateNonce();\n  }\n  return currentNonce;\n}\n\n// Refresh nonce (call on navigation or sensitive operations)\nexport function refreshNonce() {\n  currentNonce = generateNonce();\n  return currentNonce;\n}\n\n// CSP Policy Builder\nexport class CSPPolicyBuilder {\n  constructor() {\n    this.policies = {};\n  }\n\n  // Set default secure policies\n  setDefaults() {\n    this.policies = {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Will be replaced with nonces in production\n        \"'unsafe-eval'\", // Required for some financial calculations\n        'https://static.rocket.new', // Third-party service\n        // Monitoring & Analytics\n        'https://www.googletagmanager.com',\n        'https://static.hotjar.com'\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Required for CSS-in-JS\n        'https://fonts.googleapis.com'\n      ],\n      'font-src': [\n        \"'self'\",\n        'https://fonts.gstatic.com'\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n        'https:'\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://www.alphavantage.co',\n        'https://financialmodelingprep.com',\n        'https://data.sec.gov',\n        'https://query1.finance.yahoo.com',\n        'https://query2.finance.yahoo.com',\n        'https://data.nasdaq.com',\n        'https://fred.stlouisfed.org',\n        // Monitoring & Analytics\n        'https://www.google-analytics.com',\n        'https://www.googletagmanager.com',\n        'https://script.hotjar.com',\n        'https://in.hotjar.com',\n        'https://api.hotjar.com',\n        'https://*.sentry.io',\n        'https://*.ingest.sentry.io',\n        'wss://*.hotjar.com'\n      ],\n      'frame-ancestors': [\"'none'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'upgrade-insecure-requests': [],\n      'block-all-mixed-content': []\n    };\n    return this;\n  }\n\n  // Add nonce to script-src and style-src\n  addNonce(nonce) {\n    if (this.policies['script-src']) {\n      // Remove unsafe-inline when nonce is present\n      this.policies['script-src'] = this.policies['script-src']\n        .filter(src => src !== \"'unsafe-inline'\")\n        .concat([`'nonce-${nonce}'`]);\n    }\n\n    if (this.policies['style-src']) {\n      // Keep unsafe-inline for CSS-in-JS compatibility\n      this.policies['style-src'] = this.policies['style-src']\n        .concat([`'nonce-${nonce}'`]);\n    }\n\n    return this;\n  }\n\n  // Add specific domain to directive\n  addSource(directive, source) {\n    if (!this.policies[directive]) {\n      this.policies[directive] = [];\n    }\n    if (!this.policies[directive].includes(source)) {\n      this.policies[directive].push(source);\n    }\n    return this;\n  }\n\n  // Remove source from directive\n  removeSource(directive, source) {\n    if (this.policies[directive]) {\n      this.policies[directive] = this.policies[directive]\n        .filter(src => src !== source);\n    }\n    return this;\n  }\n\n  // Build final CSP string\n  build() {\n    return Object.entries(this.policies)\n      .map(([directive, sources]) => {\n        if (sources.length === 0) {\n          return directive;\n        }\n        return `${directive} ${sources.join(' ')}`;\n      })\n      .join('; ');\n  }\n}\n\n// Security Headers Configuration\nexport const securityHeaders = {\n  // Content Security Policy\n  getCSP: (nonce = null) => {\n    const builder = new CSPPolicyBuilder().setDefaults();\n\n    if (nonce) {\n      builder.addNonce(nonce);\n    }\n\n    // Add development-specific policies\n    if (import.meta.env.DEV) {\n      builder\n        .addSource('script-src', 'http://localhost:*')\n        .addSource('connect-src', 'ws://localhost:*')\n        .addSource('connect-src', 'http://localhost:*');\n    }\n\n    return builder.build();\n  },\n\n  // HTTP Strict Transport Security\n  getHSTS: () => {\n    return 'max-age=31536000; includeSubDomains; preload';\n  },\n\n  // X-Frame-Options\n  getFrameOptions: () => {\n    return 'DENY';\n  },\n\n  // X-Content-Type-Options\n  getContentTypeOptions: () => {\n    return 'nosniff';\n  },\n\n  // Referrer-Policy\n  getReferrerPolicy: () => {\n    return 'strict-origin-when-cross-origin';\n  },\n\n  // Permissions-Policy\n  getPermissionsPolicy: () => {\n    return [\n      'camera=()',\n      'microphone=()',\n      'geolocation=()',\n      'payment=()',\n      'autoplay=()',\n      'fullscreen=*',\n      'picture-in-picture=*'\n    ].join(', ');\n  },\n\n  // Cross-Origin policies\n  getCrossOriginEmbedderPolicy: () => {\n    return 'require-corp';\n  },\n\n  getCrossOriginOpenerPolicy: () => {\n    return 'same-origin';\n  },\n\n  getCrossOriginResourcePolicy: () => {\n    return 'same-origin';\n  }\n};\n\n// Apply CSP nonce to script and style elements\nexport function applyCspNonce(nonce) {\n  if (typeof document === 'undefined') return;\n\n  // Add nonce to inline scripts\n  const inlineScripts = document.querySelectorAll('script:not([src])');\n  inlineScripts.forEach(script => {\n    script.setAttribute('nonce', nonce);\n  });\n\n  // Add nonce to inline styles\n  const inlineStyles = document.querySelectorAll('style');\n  inlineStyles.forEach(style => {\n    style.setAttribute('nonce', nonce);\n  });\n}\n\n// Create secure headers for server responses\nexport function createSecureHeaders(nonce = null) {\n  const headers = {};\n\n  // CSP with nonce\n  headers['Content-Security-Policy'] = securityHeaders.getCSP(nonce);\n\n  // Security headers\n  headers['Strict-Transport-Security'] = securityHeaders.getHSTS();\n  headers['X-Frame-Options'] = securityHeaders.getFrameOptions();\n  headers['X-Content-Type-Options'] = securityHeaders.getContentTypeOptions();\n  headers['Referrer-Policy'] = securityHeaders.getReferrerPolicy();\n  headers['Permissions-Policy'] = securityHeaders.getPermissionsPolicy();\n\n  // Cross-Origin policies\n  if (import.meta.env.PROD) {\n    headers['Cross-Origin-Embedder-Policy'] = securityHeaders.getCrossOriginEmbedderPolicy();\n    headers['Cross-Origin-Opener-Policy'] = securityHeaders.getCrossOriginOpenerPolicy();\n    headers['Cross-Origin-Resource-Policy'] = securityHeaders.getCrossOriginResourcePolicy();\n  }\n\n  return headers;\n}\n\n// Validate CSP compliance\nexport function validateCSPCompliance() {\n  const violations = [];\n\n  if (typeof document === 'undefined') return violations;\n\n  // Check for inline scripts without nonces\n  const inlineScripts = document.querySelectorAll('script:not([src]):not([nonce])');\n  if (inlineScripts.length > 0) {\n    violations.push({\n      type: 'inline-script-without-nonce',\n      count: inlineScripts.length,\n      elements: Array.from(inlineScripts).slice(0, 3) // First 3 for debugging\n    });\n  }\n\n  // Check for inline styles without nonces (less critical due to CSS-in-JS)\n  const inlineStyles = document.querySelectorAll('style:not([nonce])');\n  if (inlineStyles.length > 5) { // Allow some CSS-in-JS styles\n    violations.push({\n      type: 'excessive-inline-styles',\n      count: inlineStyles.length,\n      recommendation: 'Consider consolidating CSS-in-JS styles'\n    });\n  }\n\n  // Check for unsafe external resources\n  const externalScripts = document.querySelectorAll('script[src]');\n  externalScripts.forEach(script => {\n    const src = script.getAttribute('src');\n    if (src && !src.startsWith('https://') && !src.startsWith('/')) {\n      violations.push({\n        type: 'insecure-external-script',\n        src,\n        element: script\n      });\n    }\n  });\n\n  return violations;\n}\n\n// CSP violation reporter\nexport function setupCSPReporting() {\n  if (typeof document === 'undefined') return;\n\n  document.addEventListener('securitypolicyviolation', (event) => {\n    const violation = {\n      blockedURI: event.blockedURI,\n      violatedDirective: event.violatedDirective,\n      originalPolicy: event.originalPolicy,\n      disposition: event.disposition,\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent,\n      url: window.location.href\n    };\n\n    console.warn('CSP Violation:', violation);\n\n    // In production, send to monitoring service\n    if (import.meta.env.PROD) {\n      sendCSPViolation(violation);\n    }\n  });\n}\n\nfunction sendCSPViolation(violation) {\n  // Send to your monitoring service\n  fetch('/api/csp-violations', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(violation)\n  }).catch(error => {\n    console.error('Failed to report CSP violation:', error);\n  });\n}\n\n// Initialize security measures\nexport function initializeSecurity() {\n  const nonce = getCurrentNonce();\n\n  // Apply nonce to existing elements\n  applyCspNonce(nonce);\n\n  // Setup CSP violation reporting\n  setupCSPReporting();\n\n  // Validate compliance\n  const violations = validateCSPCompliance();\n  if (violations.length > 0) {\n    console.warn('CSP compliance issues found:', violations);\n  }\n\n  // Setup periodic compliance checks\n  setInterval(() => {\n    const currentViolations = validateCSPCompliance();\n    if (currentViolations.length > violations.length) {\n      console.warn('New CSP compliance issues detected:',\n        currentViolations.slice(violations.length));\n    }\n  }, 30000); // Check every 30 seconds\n\n  console.log('Security measures initialized with nonce:', nonce);\n  return nonce;\n}\n\n// Hook for React components to get current nonce\nexport function useSecurityNonce() {\n  return getCurrentNonce();\n}\n","// Service Worker Registration and Management\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  window.location.hostname === '[::1]' ||\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function registerSW() {\n  if ('serviceWorker' in navigator) {\n    const publicUrl = new URL(import.meta.env.BASE_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${import.meta.env.BASE_URL}sw.js`;\n\n      if (isLocalhost) {\n        checkValidServiceWorker(swUrl);\n        navigator.serviceWorker.ready.then(() => {\n          console.warn('PWA: Service Worker ready in development mode');\n        });\n      } else {\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      console.warn('PWA: Service Worker registered successfully:', registration);\n\n      // Check for updates\n      registration.addEventListener('updatefound', () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n\n        installingWorker.addEventListener('statechange', () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              console.log('PWA: New content available, will update on next visit');\n              showUpdateAvailableNotification();\n            } else {\n              console.log('PWA: Content cached for offline use');\n              showCachedNotification();\n            }\n          }\n        });\n      });\n    })\n    .catch((error) => {\n      console.error('PWA: Service Worker registration failed:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log('PWA: No internet connection found. App is running in offline mode.');\n      showOfflineNotification();\n    });\n}\n\nexport function unregisterSW() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error('PWA: Service Worker unregistration failed:', error);\n      });\n  }\n}\n\n// Notification functions for better UX\nfunction showUpdateAvailableNotification() {\n  if ('Notification' in window && Notification.permission === 'granted') {\n    new Notification('FinanceAnalyst Pro Update Available', {\n      body: 'A new version is available. Refresh to update.',\n      icon: '/assets/images/favicon.svg',\n      badge: '/assets/images/favicon.svg',\n      tag: 'app-update'\n    });\n  }\n\n  // Also show in-app notification\n  showInAppNotification(\n    'Update Available',\n    'A new version of FinanceAnalyst Pro is ready. Refresh to update.',\n    'info'\n  );\n}\n\nfunction showCachedNotification() {\n  showInAppNotification(\n    'App Ready for Offline',\n    'FinanceAnalyst Pro is now available offline for core features.',\n    'success'\n  );\n}\n\nfunction showOfflineNotification() {\n  showInAppNotification(\n    'Offline Mode',\n    'You\\'re currently offline. Some features may be limited.',\n    'warning'\n  );\n}\n\nfunction showInAppNotification(title, message, type = 'info') {\n  // Create a simple notification system\n  const notification = document.createElement('div');\n  notification.className = `\n    fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg\n    ${type === 'success' ? 'bg-green-50 text-green-800 border border-green-200' : ''}\n    ${type === 'warning' ? 'bg-yellow-50 text-yellow-800 border border-yellow-200' : ''}\n    ${type === 'info' ? 'bg-blue-50 text-blue-800 border border-blue-200' : ''}\n    transition-all duration-300 transform translate-x-full\n  `;\n\n  notification.innerHTML = `\n    <div class=\"flex items-start\">\n      <div class=\"flex-1\">\n        <h4 class=\"font-medium text-sm\">${title}</h4>\n        <p class=\"text-sm mt-1 opacity-90\">${message}</p>\n      </div>\n      <button class=\"ml-3 text-sm opacity-60 hover:opacity-100\" onclick=\"this.parentElement.parentElement.remove()\">\n        \n      </button>\n    </div>\n  `;\n\n  document.body.appendChild(notification);\n\n  // Animate in\n  requestAnimationFrame(() => {\n    notification.style.transform = 'translateX(0)';\n  });\n\n  // Auto remove after 5 seconds\n  setTimeout(() => {\n    if (notification.parentElement) {\n      notification.style.transform = 'translateX(100%)';\n      setTimeout(() => notification.remove(), 300);\n    }\n  }, 5000);\n}\n\n// Request notification permission\nexport function requestNotificationPermission() {\n  if ('Notification' in window && Notification.permission === 'default') {\n    Notification.requestPermission().then((permission) => {\n      console.log('PWA: Notification permission:', permission);\n    });\n  }\n}\n\n// Install prompt handling\nlet deferredPrompt;\n\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  e.preventDefault();\n  deferredPrompt = e;\n  showInstallPrompt();\n});\n\nfunction showInstallPrompt() {\n  // Show custom install button/banner\n  const installBanner = document.createElement('div');\n  installBanner.className = `\n    fixed bottom-4 left-4 right-4 p-4 bg-blue-600 text-white rounded-lg shadow-lg\n    flex items-center justify-between z-50 max-w-md mx-auto\n  `;\n\n  installBanner.innerHTML = `\n    <div class=\"flex-1\">\n      <h4 class=\"font-medium text-sm\">Install FinanceAnalyst Pro</h4>\n      <p class=\"text-sm opacity-90 mt-1\">Get faster access and offline features</p>\n    </div>\n    <div class=\"flex items-center space-x-2 ml-3\">\n      <button id=\"install-btn\" class=\"bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50\">\n        Install\n      </button>\n      <button id=\"dismiss-btn\" class=\"text-white opacity-60 hover:opacity-100 text-sm\">\n        \n      </button>\n    </div>\n  `;\n\n  document.body.appendChild(installBanner);\n\n  // Handle install button click\n  installBanner.querySelector('#install-btn').addEventListener('click', async() => {\n    if (deferredPrompt) {\n      deferredPrompt.prompt();\n      const { outcome } = await deferredPrompt.userChoice;\n      console.log('PWA: Install prompt outcome:', outcome);\n      deferredPrompt = null;\n    }\n    installBanner.remove();\n  });\n\n  // Handle dismiss button click\n  installBanner.querySelector('#dismiss-btn').addEventListener('click', () => {\n    installBanner.remove();\n    deferredPrompt = null;\n  });\n}\n\n// Handle successful installation\nwindow.addEventListener('appinstalled', () => {\n  console.log('PWA: App was installed successfully');\n  showInAppNotification(\n    'App Installed',\n    'FinanceAnalyst Pro has been installed successfully!',\n    'success'\n  );\n  deferredPrompt = null;\n});\n\n// Network status handling\nexport function setupNetworkHandling() {\n  function updateOnlineStatus() {\n    const isOnline = navigator.onLine;\n    console.log('PWA: Network status:', isOnline ? 'online' : 'offline');\n\n    if (!isOnline) {\n      showInAppNotification(\n        'Connection Lost',\n        'You\\'re now offline. Cached content will be used.',\n        'warning'\n      );\n    } else {\n      showInAppNotification(\n        'Connection Restored',\n        'You\\'re back online. Syncing latest data...',\n        'success'\n      );\n    }\n\n    // Update UI to reflect network status\n    document.body.setAttribute('data-network-status', isOnline ? 'online' : 'offline');\n  }\n\n  window.addEventListener('online', updateOnlineStatus);\n  window.addEventListener('offline', updateOnlineStatus);\n\n  // Initial status\n  updateOnlineStatus();\n}\n\n// Detect automated/audit environments (e.g., Lighthouse/CI)\nfunction isAutomatedEnvironment() {\n  try {\n    const params = new URLSearchParams(window.location.search);\n    return (\n      navigator.webdriver === true ||\n      params.has('lhci') ||\n      params.has('ci') ||\n      params.has('audit') ||\n      params.get('pwa') === '0'\n    );\n  } catch {\n    return navigator.webdriver === true;\n  }\n}\n\n// Initialize PWA features\nexport function initializePWA() {\n  // Skip PWA in automated environments to avoid permission prompts and SW interference\n  if (isAutomatedEnvironment()) {\n    console.warn('PWA: Skipping initialization in automated/audit environment');\n    return;\n  }\n\n  registerSW();\n  setupNetworkHandling();\n\n  // Do NOT request notification permission automatically on load\n  // Prefer requesting permission in response to explicit user action\n\n  console.log('PWA: Initialization complete');\n}\n","import { createRoot } from 'react-dom/client';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { store } from './store/store';\nimport ProductionErrorBoundary from './components/ErrorBoundary/ProductionErrorBoundary';\nimport productionMonitoring from './services/productionMonitoring';\nimport { initializePerformanceMonitoring } from './utils/performanceMonitoring';\nimport { initializeSecurity } from './utils/securityHeaders';\nimport { initializePWA, unregisterSW } from './utils/serviceWorker';\nimport './styles/tailwind.css';\nimport './styles/index.css';\nimport './utils/monitoring';\n\nconst container = document.getElementById('root');\nconst root = createRoot(container);\n\nroot.render(\n  <ProductionErrorBoundary level=\"app\">\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </ProductionErrorBoundary>\n);\n\n// Initialize security measures\nconst securityNonce = initializeSecurity();\n\n// Initialize PWA features only outside development to avoid HMR/cache interference\nif (!import.meta.env.DEV) {\n  initializePWA();\n} else {\n  // Ensure any previously registered service workers are removed during dev\n  try {\n    unregisterSW();\n    // Also attempt a direct cleanup to be thorough\n    if ('serviceWorker' in navigator && navigator.serviceWorker.getRegistrations) {\n      navigator.serviceWorker.getRegistrations().then((regs) => regs.forEach((r) => r.unregister()));\n    }\n    // eslint-disable-next-line no-console\n    console.warn('PWA is disabled in development to prevent caching issues with HMR.');\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.warn('Attempted to disable PWA in development, but encountered:', e);\n  }\n}\n\n// Initialize performance monitoring\ninitializePerformanceMonitoring();\n\n// Initialize production monitoring\nproductionMonitoring.init();\n\n// Log initialization complete\nconsole.log(' FinanceAnalyst Pro initialized with security nonce:', securityNonce);\n"],"file":"assets/index-Ch9xuoCy.js"}