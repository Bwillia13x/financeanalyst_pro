{"version":3,"file":"Select-8sM3TG_n.js","sources":["../../src/components/ui/Select.jsx"],"sourcesContent":["// components/ui/Select.jsx - Shadcn style Select\nimport { ChevronDown, Check, Search, X } from 'lucide-react';\nimport React, { useState } from 'react';\n\nimport { cn } from '../../utils/cn';\n\nimport Button from './Button';\nimport Input from './Input';\n\nconst Select = React.forwardRef(\n  (\n    {\n      className,\n      options = [],\n      value,\n      defaultValue,\n      placeholder = 'Select an option',\n      multiple = false,\n      disabled = false,\n      required = false,\n      label,\n      description,\n      error,\n      searchable = false,\n      clearable = false,\n      loading = false,\n      id,\n      name,\n      onChange,\n      onOpenChange,\n      ...props\n    },\n    ref\n  ) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    // Generate unique ID if not provided\n    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Filter options based on search\n    const filteredOptions =\n      searchable && searchTerm\n        ? options.filter(\n          option =>\n            option.label.toLowerCase().includes(searchTerm.toLowerCase()) ||\n              (option.value &&\n                option.value.toString().toLowerCase().includes(searchTerm.toLowerCase()))\n        )\n        : options;\n\n    // Get selected option(s) for display\n    const getSelectedDisplay = () => {\n      if (!value) return placeholder;\n\n      if (multiple) {\n        const selectedOptions = options.filter(opt => value.includes(opt.value));\n        if (selectedOptions.length === 0) return placeholder;\n        if (selectedOptions.length === 1) return selectedOptions[0].label;\n        return `${selectedOptions.length} items selected`;\n      }\n\n      const selectedOption = options.find(opt => opt.value === value);\n      return selectedOption ? selectedOption.label : placeholder;\n    };\n\n    const handleToggle = () => {\n      if (!disabled) {\n        const newIsOpen = !isOpen;\n        setIsOpen(newIsOpen);\n        onOpenChange?.(newIsOpen);\n        if (!newIsOpen) {\n          setSearchTerm('');\n        }\n      }\n    };\n\n    const handleOptionSelect = option => {\n      if (multiple) {\n        const newValue = value || [];\n        const updatedValue = newValue.includes(option.value)\n          ? newValue.filter(v => v !== option.value)\n          : [...newValue, option.value];\n        onChange?.(updatedValue);\n      } else {\n        onChange?.(option.value);\n        setIsOpen(false);\n        onOpenChange?.(false);\n      }\n    };\n\n    const handleClear = e => {\n      e.stopPropagation();\n      onChange?.(multiple ? [] : '');\n    };\n\n    const handleSearchChange = e => {\n      setSearchTerm(e.target.value);\n    };\n\n    const isSelected = optionValue => {\n      if (multiple) {\n        return value?.includes(optionValue) || false;\n      }\n      return value === optionValue;\n    };\n\n    const hasValue = multiple ? value?.length > 0 : value !== undefined && value !== '';\n\n    return (\n      <div className={cn('relative', className)}>\n        {label && (\n          <label\n            htmlFor={selectId}\n            className={cn(\n              'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block',\n              error ? 'text-destructive' : 'text-foreground'\n            )}\n          >\n            {label}\n            {required && <span className=\"text-destructive ml-1\">*</span>}\n          </label>\n        )}\n\n        <div className=\"relative\">\n          <button\n            ref={ref}\n            id={selectId}\n            type=\"button\"\n            className={cn(\n              'flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n              error && 'border-destructive focus:ring-destructive',\n              !hasValue && 'text-muted-foreground'\n            )}\n            onClick={handleToggle}\n            disabled={disabled}\n            aria-expanded={isOpen}\n            aria-haspopup=\"listbox\"\n            {...props}\n          >\n            <span className=\"truncate\">{getSelectedDisplay()}</span>\n\n            <div className=\"flex items-center gap-1\">\n              {loading && (\n                <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                    fill=\"none\"\n                  />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n              )}\n\n              {clearable && hasValue && !loading && (\n                <Button\n                  variant=\"ghost\" size=\"icon\" className=\"h-4 w-4\"\n                  onClick={handleClear}\n                >\n                  <X className=\"h-3 w-3\" />\n                </Button>\n              )}\n\n              <ChevronDown className={cn('h-4 w-4 transition-transform', isOpen && 'rotate-180')} />\n            </div>\n          </button>\n\n          {/* Hidden native select for form submission */}\n          <select\n            name={name}\n            value={value || ''}\n            onChange={() => {}} // Controlled by our custom logic\n            className=\"sr-only\"\n            tabIndex={-1}\n            multiple={multiple}\n            required={required}\n          >\n            <option value=\"\">Select...</option>\n            {options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n\n          {/* Dropdown */}\n          {isOpen && (\n            <div className=\"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md\">\n              {searchable && (\n                <div className=\"p-2 border-b\">\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      placeholder=\"Search options...\"\n                      value={searchTerm}\n                      onChange={handleSearchChange}\n                      className=\"pl-8\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              <div className=\"py-1 max-h-60 overflow-auto\">\n                {filteredOptions.length === 0 ? (\n                  <div className=\"px-3 py-2 text-sm text-muted-foreground\">\n                    {searchTerm ? 'No options found' : 'No options available'}\n                  </div>\n                ) : (\n                  filteredOptions.map(option => (\n                    <div\n                      key={option.value}\n                      className={cn(\n                        'relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground',\n                        isSelected(option.value) && 'bg-primary text-primary-foreground',\n                        option.disabled && 'pointer-events-none opacity-50'\n                      )}\n                      onClick={() => !option.disabled && handleOptionSelect(option)}\n                    >\n                      <span className=\"flex-1\">{option.label}</span>\n                      {multiple && isSelected(option.value) && <Check className=\"h-4 w-4\" />}\n                      {option.description && (\n                        <span className=\"text-xs text-muted-foreground ml-2\">\n                          {option.description}\n                        </span>\n                      )}\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {description && !error && (\n          <p className=\"text-sm text-muted-foreground mt-1\">{description}</p>\n        )}\n\n        {error && <p className=\"text-sm text-destructive mt-1\">{error}</p>}\n      </div>\n    );\n  }\n);\n\nSelect.displayName = 'Select';\n\nexport default Select;\n"],"names":["Select","React","forwardRef","className","options","value","defaultValue","placeholder","multiple","disabled","required","label","description","error","searchable","clearable","loading","id","name","onChange","onOpenChange","props","ref","isOpen","setIsOpen","useState","searchTerm","setSearchTerm","selectId","Math","random","toString","substr","filteredOptions","filter","option","toLowerCase","includes","isSelected","optionValue","hasValue","length","cn","children","jsxs","htmlFor","jsx","type","onClick","newIsOpen","selectedOptions","opt","selectedOption","find","getSelectedDisplay","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","Button","variant","size","e","stopPropagation","X","ChevronDown","tabIndex","map","Search","Input","target","newValue","updatedValue","v","handleOptionSelect","Check","displayName"],"mappings":"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"}