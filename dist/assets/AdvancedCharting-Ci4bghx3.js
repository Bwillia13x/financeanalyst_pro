import{r as e,j as s,p as a,aE as t,at as r,a as l,X as i,as as n,aF as c,aG as o,R as d,x as m,aH as x,z as h,o as p,D as u}from"./react-vendor-veQMdy8Q.js";import{ResponsiveContainer as g,ComposedChart as y,CartesianGrid as j,XAxis as b,YAxis as v,Tooltip as f,Line as N,Bar as w}from"./charts-vendor-YB5D2y8T.js";import{S as k}from"./SEOHead-ZhZ9pYW7.js";import{s as L}from"./index-Ch9xuoCy.js";import{b as M}from"./ui-vendor-zTucAtCH.js";import"./vendor-COg1wW2x.js";import"./ai-vendor-D2oz74m-.js";import"./advanced-analytics-BnJTTEAv.js";import"./utils-vendor-DUg4_aAP.js";import"./data-vendor-DpIj8wd6.js";import"./state-vendor-DFlCI_nm.js";const C=({data:a=[],symbol:t="",height:r=300,showVolume:l=!0,theme:i="light"})=>{const n=e.useMemo(()=>a&&Array.isArray(a)?a.map(e=>{const s=parseFloat(e.open||0),a=parseFloat(e.high||0),t=parseFloat(e.low||0),r=parseFloat(e.close||0);return{timestamp:e.timestamp,date:new Date(e.timestamp).toLocaleDateString(),time:new Date(e.timestamp).toLocaleTimeString(),open:s,high:a,low:t,close:r,volume:parseInt(e.volume||0),bodyLow:Math.min(s,r),bodyHigh:Math.max(s,r),wickLow:t,wickHigh:a,isGreen:r>=s,change:r-s,changePercent:s>0?(r-s)/s*100:0}}):[],[a]),c=({active:e,payload:a,label:r})=>{if(!e||!a||!a.length)return null;const i=a[0].payload;return i?s.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:t}),s.jsxs("p",{className:"text-sm text-gray-600",children:[i.date," ",i.time]}),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),s.jsxs("span",{className:"font-mono text-sm",children:["$",i.open.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"High:"}),s.jsxs("span",{className:"font-mono text-sm text-green-600",children:["$",i.high.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Low:"}),s.jsxs("span",{className:"font-mono text-sm text-red-600",children:["$",i.low.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),s.jsxs("span",{className:"font-mono text-sm",children:["$",i.close.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Change:"}),s.jsxs("span",{className:"font-mono text-sm "+(i.isGreen?"text-green-600":"text-red-600"),children:[i.change>=0?"+":"","$",i.change.toFixed(2)," (",i.changePercent.toFixed(2),"%)"]})]}),l&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Volume:"}),s.jsx("span",{className:"font-mono text-sm",children:i.volume.toLocaleString()})]})]})]}):null};return n.length?s.jsx("div",{className:"w-full h-full",children:s.jsx(g,{width:"100%",height:"100%",children:s.jsxs(y,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(j,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),s.jsx(b,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),s.jsx(v,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`$${e.toFixed(0)}`}),s.jsx(f,{content:s.jsx(c,{})}),s.jsx(N,{type:"monotone",dataKey:"close",stroke:"#3b82f6",strokeWidth:2,dot:!1,connectNulls:!1}),l&&s.jsx(w,{dataKey:"volume",fill:"#e5e7eb",opacity:.3,yAxisId:"volume"})]})})}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),s.jsx("p",{className:"text-sm text-gray-500",children:"No price data available"})]})})},S=()=>{const[g,y]=e.useState("1D"),[j,b]=e.useState(["AAPL","MSFT","GOOGL","AMZN","TSLA"]),[v,f]=e.useState("grid"),[N,w]=e.useState(!0),[S,D]=e.useState({}),[F,P]=e.useState(null),[$,O]=e.useState({charts:!1,data:!1,export:!1}),[R,T]=e.useState([{id:"price-chart",type:"candlestick",symbol:"AAPL",position:{x:0,y:0,w:6,h:4}},{id:"volume-chart",type:"bar",symbol:"AAPL",position:{x:6,y:0,w:6,h:2}},{id:"correlation-matrix",type:"heatmap",symbols:j,position:{x:6,y:2,w:6,h:2}},{id:"performance-comparison",type:"line",symbols:j.slice(0,3),position:{x:0,y:4,w:12,h:3}}]),E=[{id:"candlestick",name:"Candlestick",icon:C,description:"OHLC price data"},{id:"line",name:"Line Chart",icon:m,description:"Price trends over time"},{id:"bar",name:"Bar Chart",icon:x,description:"Volume and comparison data"},{id:"area",name:"Area Chart",icon:h,description:"Filled area charts"},{id:"heatmap",name:"Heatmap",icon:c,description:"Correlation matrices"},{id:"scatter",name:"Scatter Plot",icon:p,description:"Risk vs return analysis"}],z=e.useRef(null);e.useEffect(()=>(G(),N&&Y(),()=>{z.current&&clearInterval(z.current)}),[j,g]),e.useEffect(()=>{N?Y():q()},[N]);const G=async()=>{O(e=>({...e,data:!0}));try{const e=j.map(async e=>{try{const[s,a]=await Promise.all([L.get(`/market-data/quote/${e}`),L.get(`/market-data/historical/${e}?period=${g}`)]);return{symbol:e,quote:s.data,historical:a.data}}catch(s){return{symbol:e,quote:H(e),historical:I(e)}}}),s=await Promise.all(e),a={};s.forEach(e=>{e&&(a[e.symbol]=e)}),D(a);try{const e=await L.get("/portfolio/current");P(e.data)}catch{}}catch(e){}finally{O(e=>({...e,data:!1}))}},Y=()=>{q(),z.current=setInterval(async()=>{try{const e=j.map(async e=>{try{return{symbol:e,quote:(await L.get(`/market-data/quote/${e}`)).data}}catch{return{symbol:e,quote:H(e)}}}),s=await Promise.all(e);D(e=>{const a={...e};return s.forEach(({symbol:e,quote:s})=>{a[e]&&(a[e]={...a[e],quote:s})}),a})}catch(e){}},5e3)},q=()=>{z.current&&(clearInterval(z.current),z.current=null)},H=e=>{const s={AAPL:175,MSFT:280,GOOGL:2800,AMZN:3200,TSLA:250}[e]||100,a=10*(Math.random()-.5),t=s+a;return{symbol:e,price:t.toFixed(2),change:a.toFixed(2),changePercent:(a/s*100).toFixed(2),volume:Math.floor(1e7*Math.random()),marketCap:t*Math.floor(1e9*Math.random()),timestamp:(new Date).toISOString()}},I=e=>{const s=[];let a={AAPL:175,MSFT:280,GOOGL:2800,AMZN:3200,TSLA:250}[e]||100;const t={"1D":390,"5D":78,"1M":22,"3M":65,"6M":130,"1Y":252,"2Y":104,"5Y":260,MAX:520}[g]||100;for(let r=0;r<t;r++){a+=5*(Math.random()-.5);const e=Math.floor(1e6*Math.random());s.push({timestamp:new Date(Date.now()-24*(t-r)*60*60*1e3).toISOString(),open:a-2*Math.random(),high:a+3*Math.random(),low:a-3*Math.random(),close:a,volume:e})}return s},U=e=>{T(s=>s.filter(s=>s.id!==e))},V=async(e,s="png")=>{O(e=>({...e,export:!0}));try{R.find(s=>s.id===e);await new Promise(e=>setTimeout(e,1e3));const a=new Blob(["Chart export placeholder"],{type:"text/plain"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download=`chart-${e}.${s}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(a){}finally{O(e=>({...e,export:!1}))}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 pb-16",children:[s.jsx(k,{title:"Advanced Charting & Data Visualization - FinanceAnalyst Pro",description:"Professional-grade financial charting with real-time data, customizable dashboards, and advanced visualization tools for comprehensive market analysis."}),s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-20",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(a,{className:"w-8 h-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Charting"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Professional financial data visualization"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(N?"bg-green-400 animate-pulse":"bg-gray-400")}),s.jsx("span",{className:"text-xs text-gray-500",children:N?"Live Data":"Static Data"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>w(!N),className:"flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+(N?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[N?s.jsx(t,{className:"w-4 h-4"}):s.jsx(r,{className:"w-4 h-4"}),s.jsxs("span",{children:[N?"Pause":"Start"," Live"]})]}),s.jsxs("button",{onClick:G,disabled:$.data,className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[s.jsx(l,{className:"w-4 h-4 "+($.data?"animate-spin":"")}),s.jsx("span",{children:"Refresh"})]})]})]}),s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Timeframe:"}),s.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{value:"1D",label:"1 Day",interval:"1m"},{value:"5D",label:"5 Days",interval:"5m"},{value:"1M",label:"1 Month",interval:"1h"},{value:"3M",label:"3 Months",interval:"1d"},{value:"6M",label:"6 Months",interval:"1d"},{value:"1Y",label:"1 Year",interval:"1wk"},{value:"2Y",label:"2 Years",interval:"1wk"},{value:"5Y",label:"5 Years",interval:"1mo"},{value:"MAX",label:"Max",interval:"1mo"}].map(e=>s.jsx("button",{onClick:()=>y(e.value),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+(g===e.value?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e.label},e.value))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Symbols:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[j.map(e=>s.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-md text-xs",children:[s.jsx("span",{children:e}),s.jsx("button",{onClick:()=>b(s=>s.filter(s=>s!==e)),className:"hover:bg-blue-200 rounded-full p-0.5",children:s.jsx(i,{className:"w-3 h-3"})})]},e)),s.jsx("button",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-md text-xs hover:bg-gray-200 transition-colors",children:s.jsx(n,{className:"w-3 h-3"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Layout:"}),s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>f("grid"),className:"p-2 rounded-md transition-colors "+("grid"===v?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Grid Layout",children:s.jsx(c,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>f("stack"),className:"p-2 rounded-md transition-colors "+("stack"===v?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Stacked Layout",children:s.jsx(o,{className:"w-4 h-4"})})]})]})]})]})}),s.jsx("div",{className:"p-6",children:"grid"===v?s.jsxs("div",{className:"grid grid-cols-12 gap-4 min-h-screen",children:[R.map(e=>s.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`bg-white rounded-xl shadow-sm border overflow-hidden col-span-${e.position.w} row-span-${e.position.h}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-blue-100 rounded",children:d.createElement(E.find(s=>s.id===e.type)?.icon||a,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:E.find(s=>s.id===e.type)?.name}),s.jsx("p",{className:"text-xs text-gray-500",children:e.symbol||e.symbols?.join(", ")})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>V(e.id,"png"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Export Chart",children:s.jsx(u,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{onClick:()=>U(e.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Remove Chart",children:s.jsx(i,{className:"w-4 h-4 text-gray-600"})})]})]}),s.jsx("div",{className:"p-4 h-64",children:s.jsx(A,{chart:e,marketData:S,timeframe:g,isRealTime:N})})]},e.id)),s.jsx("div",{className:"col-span-6 bg-white border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center min-h-64 hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",children:s.jsxs("div",{className:"text-center",children:[s.jsx(n,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Chart"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.slice(0,4).map(e=>s.jsxs("button",{onClick:()=>((e,s=null,a=null)=>{const t={id:`chart-${Date.now()}`,type:e,symbol:s,symbols:a,position:{x:0,y:0,w:6,h:4}};T(e=>[...e,t])})(e.id,j[0]),className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors",children:[s.jsx(e.icon,{className:"w-4 h-4"}),s.jsx("span",{children:e.name})]},e.id))})]})})]}):s.jsx("div",{className:"space-y-6",children:R.map(e=>s.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"p-1 bg-blue-100 rounded",children:d.createElement(E.find(s=>s.id===e.type)?.icon||a,{className:"w-4 h-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:E.find(s=>s.id===e.type)?.name}),s.jsx("p",{className:"text-xs text-gray-500",children:e.symbol||e.symbols?.join(", ")})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>V(e.id,"png"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(u,{className:"w-4 h-4 text-gray-600"})}),s.jsx("button",{onClick:()=>U(e.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(i,{className:"w-4 h-4 text-gray-600"})})]})]}),s.jsx("div",{className:"p-4 h-96",children:s.jsx(A,{chart:e,marketData:S,timeframe:g,isRealTime:N})})]},e.id))})})]})},A=({chart:e,marketData:t,timeframe:r,isRealTime:l})=>{const i=e.symbol?t[e.symbol]:null,n=e.symbols?e.symbols.map(e=>t[e]).filter(Boolean):[];return i||0!==n.length?s.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:d.createElement({candlestick:C,line:m,bar:x,area:h,heatmap:c,scatter:p}[e.type]||a,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("h3",{className:"font-semibold text-gray-900 mb-1",children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," Chart"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[e.symbol||e.symbols?.join(", ")," • ",r]}),l&&s.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-2",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-green-600",children:"Live Updates"})]})]})}):s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(h,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-500",children:"Loading chart data..."})]})})};export{S as default};
//# sourceMappingURL=AdvancedCharting-Ci4bghx3.js.map
