import{r as e,j as t,S as a,c as s,e as l,F as r,h as i,a as o,C as c}from"./react-DbKEDq5F.js";import{A as n,m as d}from"./animations-DmEkbmfl.js";import{R as h,B as m,C as u,X as x,Y as p,T as g,b}from"./recharts-vendor-CMq9LHd_.js";import"./utils-vendor-DofaKlSJ.js";import"./vendor-DYwn_Zoo.js";import"./d3-vendor-C2v6EsNF.js";class f{constructor(){this.historicalData=new Map,this.correlationMatrix=new Map,this.riskModels=new Map,this.stressScenarios=new Map}calculateHistoricalVaR(e,t=.95,a=1){if(!e||0===e.length)throw new Error("No return data provided");const s=[...e].sort((e,t)=>e-t),l=Math.floor((1-t)*s.length),r=-s[l]*Math.sqrt(a),i=s.slice(0,l+1);return{var:r,expectedShortfall:-i.reduce((e,t)=>e+t,0)/i.length*Math.sqrt(a),confidenceLevel:t,holdingPeriod:a,worstReturn:-s[0],percentileReturn:-s[l],sampleSize:e.length,method:"Historical Simulation"}}calculateParametricVaR(e,t,a=.95,s=1){const l=this.getZScore(a),r=-(e*s-l*t*Math.sqrt(s)),i=this.normalPDF(l);return{var:r,expectedShortfall:-e*s+t*Math.sqrt(s)*i/(1-a),confidenceLevel:a,holdingPeriod:s,mean:e,volatility:t,zScore:l,method:"Parametric (Normal)"}}calculateMonteCarloVaR(e,t,a=.95,s=1,l=1e4){const r=[];for(let i=0;i<l;i++){const a=this.generateRandomPath(e,t,s).reduce((e,t)=>e+t,0);r.push(a)}return this.calculateHistoricalVaR(r,a,1)}calculatePortfolioRisk(e,t,a=.95){const s=e.map(e=>e.weight),l=e.map(e=>e.expectedReturn),r=s.reduce((e,t,a)=>e+t*l[a],0);let i=0;for(let d=0;d<s.length;d++)for(let e=0;e<s.length;e++)i+=s[d]*s[e]*t[d][e];const o=Math.sqrt(i),c=s.map((e,a)=>{let l=0;for(let r=0;r<s.length;r++)l+=s[r]*t[a][r];return e*l/i});e.reduce((e,t)=>e+t.marketValue,0);const n=e.map((a,s)=>({asset:a.symbol,weight:a.weight,marketValue:a.marketValue,componentVaR:c[s],percentageContribution:c[s]/i*100,marginalVaR:this.calculateMarginalVaR(e,t,s),beta:this.calculatePortfolioBeta(e,t,s)}));return{portfolioMetrics:{expectedReturn:r,volatility:o,sharpeRatio:r/o,...this.calculateParametricVaR(r,o,a)},riskContribution:n,diversificationRatio:this.calculateDiversificationRatio(s,t),concentrationRisk:this.calculateConcentrationRisk(s)}}performHistoricalStressTest(e,t){const a=t.map(t=>{const a=t.assetReturns;let s=0;return e.forEach((e,t)=>{s+=e.weight*(a[t]||0)}),{eventName:t.name,eventDate:t.date,portfolioReturn:s,portfolioValue:e.reduce((e,t)=>e+t.marketValue,0)*(1+s),description:t.description}});return{stressTestResults:a,worstCase:a.reduce((e,t)=>t.portfolioReturn<e.portfolioReturn?t:e),averageStressReturn:a.reduce((e,t)=>e+t.portfolioReturn,0)/a.length}}performMonteCarloStressTest(e,t,a=1e3){const s=[];for(let r=0;r<a;r++){let a=0;const l=[];e.forEach((e,s)=>{const r=this.generateStressedReturn(e.expectedReturn,e.volatility,t.shocks[s]||{factor:1,correlation:0});l.push(r),a+=e.weight*r}),s.push({simulation:r+1,portfolioReturn:a,assetReturns:l})}const l=s.map(e=>e.portfolioReturn).sort((e,t)=>e-t);return{simulations:s.length,worstCase:l[0],bestCase:l[l.length-1],percentiles:{p1:l[Math.floor(.01*l.length)],p5:l[Math.floor(.05*l.length)],p10:l[Math.floor(.1*l.length)]},meanReturn:l.reduce((e,t)=>e+t,0)/l.length,volatility:this.calculateVolatility(l)}}buildFactorModel(e,t){const a=Object.keys(t),s=Object.keys(e),l={},r={};return s.forEach(s=>{const i=this.multipleRegression(e[s],a.map(e=>t[e]));l[s]={alpha:i.alpha,betas:i.betas,rSquared:i.rSquared,tStats:i.tStats},r[s]=i.residualVolatility}),{factorLoadings:l,specificRisk:r,factors:a,factorCovariance:this.calculateFactorCovariance(t),riskAttribution:this.calculateFactorRiskAttribution(l,t)}}calculateLiquidityRisk(e,t){return e.map(e=>{const a=t[e.symbol]||{},s=(a.ask-a.bid)/a.mid,l=e.marketValue/(a.avgVolume*a.price),r=this.calculateLiquidityHorizon(l,a.avgVolume),i=.5*s+.01*Math.sqrt(r);return{symbol:e.symbol,liquidityScore:this.calculateLiquidityScore(a),bidAskSpread:s,volumeRatio:l,liquidityHorizon:r,liquidityPremium:i,liquidityAdjustedVaR:e.var*(1+i),marketImpactCost:this.calculateMarketImpact(e.marketValue,a)}})}calculateBaselIIIMetrics(e,t){const a=e.reduce((e,a)=>{const s=t[a.assetClass]||1;return e+a.marketValue*s},0),s=e.reduce((e,t)=>e+(t.tier1Eligible?t.marketValue:0),0);return{riskWeightedAssets:a,tier1Capital:s,tier1Ratio:s/a,leverageRatio:s/e.reduce((e,t)=>e+t.marketValue,0),minimumCapitalRequirement:.08*a,capitalSurplus:s-.08*a}}calculateCreditRisk(e){return e.map(t=>{const a=t.probabilityOfDefault,s=t.lossGivenDefault,l=t.exposureAtDefault,r=a*s*l,i=Math.sqrt(a*(1-a))*s*l;return{counterparty:t.counterparty,rating:t.rating,expectedLoss:r,unexpectedLoss:i,capitalCharge:12.5*i,riskContribution:r/e.reduce((e,t)=>e+t.exposureAtDefault,0)}})}generateRandomPath(e,t,a){const s=[];for(let l=0;l<a;l++){const a=this.boxMullerRandom();s.push(e+t*a)}return s}generateStressedReturn(e,t,a){return(e+t*this.boxMullerRandom())*a.factor+a.correlation*t}calculateMarginalVaR(e,t,a){let s=0;for(let l=0;l<e.length;l++)s+=e[l].weight*t[a][l];return s}calculatePortfolioBeta(e,t,a){const s=this.calculatePortfolioVariance(e,t);return this.calculateMarginalVaR(e,t,a)/s}calculatePortfolioVariance(e,t){const a=e.map(e=>e.weight);let s=0;for(let l=0;l<a.length;l++)for(let e=0;e<a.length;e++)s+=a[l]*a[e]*t[l][e];return s}calculateDiversificationRatio(e,t){return e.reduce((e,a,s)=>e+a*Math.sqrt(t[s][s]),0)/Math.sqrt(this.calculatePortfolioVariance(e.map((e,t)=>({weight:e})),t))}calculateConcentrationRisk(e){const t=e.reduce((e,t)=>e+t*t,0);return{herfindahlIndex:t,effectiveNumberOfAssets:1/t,maxWeight:Math.max(...e),top5Concentration:e.sort((e,t)=>t-e).slice(0,5).reduce((e,t)=>e+t,0)}}calculateVolatility(e){const t=e.reduce((e,t)=>e+t,0)/e.length,a=e.reduce((e,a)=>e+Math.pow(a-t,2),0)/(e.length-1);return Math.sqrt(a)}calculateLiquidityScore(e){return(Math.min(e.avgVolume/1e6,1)+Math.max(0,1-(e.bidAskSpread||.02)/.05)+Math.min((e.marketDepth||1e5)/1e6,1))/3}calculateLiquidityHorizon(e,t){return e<=.1?1:e<=.25?5:e<=.5?20:60}calculateMarketImpact(e,t){const a=e/(t.avgVolume*t.price);return Math.sqrt(a)*(t.bidAskSpread||.02)*.5}multipleRegression(e,t){const a=t.map(()=>.1*Math.random());return{alpha:.01*Math.random(),betas:a,rSquared:.7,tStats:a.map(()=>2.5),residualVolatility:.15}}calculateFactorCovariance(e){const t=Object.keys(e),a={};return t.forEach(s=>{a[s]={},t.forEach(t=>{a[s][t]=this.calculateCovariance(e[s],e[t])})}),a}calculateFactorRiskAttribution(e,t){return Object.keys(e).map(a=>({asset:a,factorRisk:Object.keys(t).reduce((s,l,r)=>{const i=e[a].betas[r],o=this.calculateVolatility(t[l]);return s+Math.pow(i*o,2)},0),specificRisk:Math.pow(e[a].residualVolatility||.1,2)}))}calculateCovariance(e,t){const a=Math.min(e.length,t.length),s=e.slice(0,a).reduce((e,t)=>e+t,0)/a,l=t.slice(0,a).reduce((e,t)=>e+t,0)/a;return e.slice(0,a).reduce((e,a,r)=>e+(a-s)*(t[r]-l),0)/(a-1)}getZScore(e){return{.9:1.282,.95:1.645,.99:2.326}[e]||1.645}normalPDF(e){return Math.exp(-.5*e*e)/Math.sqrt(2*Math.PI)}boxMullerRandom(){if(void 0!==this.spare){const e=this.spare;return this.spare=void 0,e}const e=Math.random(),t=Math.random(),a=Math.sqrt(-2*Math.log(e));return this.spare=a*Math.cos(2*Math.PI*t),a*Math.sin(2*Math.PI*t)}}const j=()=>{const[j,y]=e.useState([]),[v,N]=e.useState(null),[R,S]=e.useState(null),[V,M]=e.useState("var"),[k,w]=e.useState("historical"),[C,q]=e.useState(.95),P=e.useMemo(()=>new f,[]),A=[{symbol:"AAPL",name:"Apple Inc.",marketValue:5e5,weight:.25,expectedReturn:.12,volatility:.25,beta:1.2,assetClass:"equity",tier1Eligible:!1,sector:"Technology",var:15e3},{symbol:"GOOGL",name:"Alphabet Inc.",marketValue:4e5,weight:.2,expectedReturn:.14,volatility:.28,beta:1.1,assetClass:"equity",tier1Eligible:!1,sector:"Technology",var:14e3},{symbol:"MSFT",name:"Microsoft Corp.",marketValue:35e4,weight:.175,expectedReturn:.13,volatility:.22,beta:.9,assetClass:"equity",tier1Eligible:!1,sector:"Technology",var:9500},{symbol:"JPM",name:"JPMorgan Chase",marketValue:3e5,weight:.15,expectedReturn:.1,volatility:.3,beta:1.4,assetClass:"equity",tier1Eligible:!1,sector:"Financial",var:12e3},{symbol:"UST_10Y",name:"US Treasury 10Y",marketValue:45e4,weight:.225,expectedReturn:.04,volatility:.08,beta:-.2,assetClass:"fixed_income",tier1Eligible:!0,sector:"Government",var:2500}],F=[[.0625,.04,.035,.045,-.005],[.04,.0784,.038,.052,-.004],[.035,.038,.0484,.042,-.0035],[.045,.052,.042,.09,-.002],[-.005,-.004,-.0035,-.002,.0064]];e.useEffect(()=>{y(A);const e=P.calculatePortfolioRisk(A,F,C),t=Array.from({length:252},()=>.06*Math.random()-.03),a=P.calculateHistoricalVaR(t,C),s=P.calculateParametricVaR(e.portfolioMetrics.expectedReturn,e.portfolioMetrics.volatility,C);N({...e,historicalVaR:a,parametricVaR:s,totalPortfolioValue:A.reduce((e,t)=>e+t.marketValue,0)});const l=P.performHistoricalStressTest(A,[{name:"2008 Financial Crisis",date:"2008-09-15",description:"Lehman Brothers collapse scenario",assetReturns:[-.35,-.4,-.32,-.55,.15]},{name:"COVID-19 Pandemic",date:"2020-03-20",description:"Market crash due to pandemic",assetReturns:[-.25,-.22,-.2,-.38,.08]},{name:"Tech Bubble Burst",date:"2000-03-10",description:"Dot-com bubble collapse",assetReturns:[-.45,-.5,-.42,-.15,.12]}]);S(l)},[P,C]);const L=()=>{if(!v)return null;const e=[{method:"Historical VaR",value:v.historicalVaR.var*v.totalPortfolioValue,percentage:(100*v.historicalVaR.var).toFixed(2)},{method:"Parametric VaR",value:v.parametricVaR.var*v.totalPortfolioValue,percentage:(100*v.parametricVaR.var).toFixed(2)},{method:"Expected Shortfall",value:v.historicalVaR.expectedShortfall*v.totalPortfolioValue,percentage:(100*v.historicalVaR.expectedShortfall).toFixed(2)}];return t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[t.jsx(a,{className:"mr-2"}),"Value at Risk Analysis"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold mb-3",children:["VaR Comparison (",100*C,"% Confidence)"]}),t.jsx(h,{width:"100%",height:250,children:t.jsxs(m,{data:e,children:[t.jsx(u,{strokeDasharray:"3 3"}),t.jsx(x,{dataKey:"method"}),t.jsx(p,{tickFormatter:e=>`$${(e/1e3).toFixed(0)}K`}),t.jsx(g,{formatter:e=>[`$${e.toLocaleString()}`,"VaR"]}),t.jsx(b,{dataKey:"value",fill:"#ef4444"})]})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Risk Metrics Summary"}),t.jsx("div",{className:"space-y-3",children:[{label:"1-Day VaR (95%)",value:`$${(v.historicalVaR.var*v.totalPortfolioValue).toLocaleString()}`,subtext:`${(100*v.historicalVaR.var).toFixed(2)}% of portfolio`},{label:"Expected Shortfall",value:`$${(v.historicalVaR.expectedShortfall*v.totalPortfolioValue).toLocaleString()}`,subtext:"Average loss beyond VaR"},{label:"Portfolio Volatility",value:`${(100*v.portfolioMetrics.volatility).toFixed(2)}%`,subtext:"Annualized standard deviation"},{label:"Sharpe Ratio",value:v.portfolioMetrics.sharpeRatio.toFixed(2),subtext:"Risk-adjusted return"}].map(e=>t.jsxs("div",{className:"p-3 bg-gray-50 rounded",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("span",{className:"text-sm text-gray-600",children:e.label}),t.jsx("span",{className:"font-bold text-lg",children:e.value})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.subtext})]},e.label))})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Risk Contribution by Asset"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left py-2",children:"Asset"}),t.jsx("th",{className:"text-left py-2",children:"Weight"}),t.jsx("th",{className:"text-left py-2",children:"Component VaR"}),t.jsx("th",{className:"text-left py-2",children:"% Contribution"}),t.jsx("th",{className:"text-left py-2",children:"Marginal VaR"}),t.jsx("th",{className:"text-left py-2",children:"Beta"})]})}),t.jsx("tbody",{children:v.riskContribution.map(e=>t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"py-2 font-medium",children:e.asset}),t.jsxs("td",{className:"py-2",children:[(100*e.weight).toFixed(1),"%"]}),t.jsx("td",{className:"py-2",children:e.componentVaR.toFixed(4)}),t.jsxs("td",{className:"py-2",children:[e.percentageContribution.toFixed(1),"%"]}),t.jsx("td",{className:"py-2",children:e.marginalVaR.toFixed(4)}),t.jsx("td",{className:"py-2",children:e.beta.toFixed(2)})]},e.asset))})]})})]})]})},$=()=>{if(!R)return null;const e=R.stressTestResults.map(e=>({scenario:e.eventName,return:(100*e.portfolioReturn).toFixed(2),value:e.portfolioValue}));return t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[t.jsx(s,{className:"mr-2"}),"Stress Testing Analysis"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Historical Stress Scenarios"}),t.jsx(h,{width:"100%",height:250,children:t.jsxs(m,{data:e,children:[t.jsx(u,{strokeDasharray:"3 3"}),t.jsx(x,{dataKey:"scenario",angle:-45,textAnchor:"end",height:100}),t.jsx(p,{tickFormatter:e=>`${e}%`}),t.jsx(g,{formatter:e=>[`${e}%`,"Portfolio Return"]}),t.jsx(b,{dataKey:"return",fill:"#dc2626"})]})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Stress Test Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"p-4 border-2 border-red-200 bg-red-50 rounded-lg",children:[t.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"Worst Case Scenario"}),t.jsx("p",{className:"text-sm text-red-700",children:R.worstCase.eventName}),t.jsxs("p",{className:"text-lg font-bold text-red-800",children:[(100*R.worstCase.portfolioReturn).toFixed(2),"% loss"]}),t.jsxs("p",{className:"text-sm text-red-600",children:["Portfolio Value: $",R.worstCase.portfolioValue.toLocaleString()]})]}),t.jsx("div",{className:"p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Average Stress Return:"}),t.jsxs("span",{className:"font-bold text-red-600",children:[(100*R.averageStressReturn).toFixed(2),"%"]})]})}),t.jsx("div",{className:"p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Scenarios Tested:"}),t.jsx("span",{className:"font-bold",children:R.stressTestResults.length})]})})]})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Scenario Analysis"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:R.stressTestResults.map(e=>t.jsxs("div",{className:"p-4 border rounded-lg",children:[t.jsx("h5",{className:"font-semibold mb-1",children:e.eventName}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),t.jsxs("p",{className:"text-lg font-bold text-red-600",children:[(100*e.portfolioReturn).toFixed(2),"% loss"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Value: $",e.portfolioValue.toLocaleString()]})]},e.eventName))})]})]})},T=()=>{const e=j.map(e=>({symbol:e.symbol,liquidityScore:.8*Math.random()+.2,bidAskSpread:.02*Math.random(),volumeRatio:.5*Math.random(),liquidityHorizon:Math.floor(30*Math.random())+1}));return t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[t.jsx(l,{className:"mr-2"}),"Liquidity Risk Analysis"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Liquidity Scores by Asset"}),t.jsx(h,{width:"100%",height:250,children:t.jsxs(m,{data:e,children:[t.jsx(u,{strokeDasharray:"3 3"}),t.jsx(x,{dataKey:"symbol"}),t.jsx(p,{domain:[0,1]}),t.jsx(g,{formatter:e=>[e.toFixed(2),"Liquidity Score"]}),t.jsx(b,{dataKey:"liquidityScore",fill:"#10b981"})]})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Liquidity Metrics"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left py-2",children:"Asset"}),t.jsx("th",{className:"text-left py-2",children:"Score"}),t.jsx("th",{className:"text-left py-2",children:"Spread"}),t.jsx("th",{className:"text-left py-2",children:"Horizon"})]})}),t.jsx("tbody",{children:e.map(e=>t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"py-2 font-medium",children:e.symbol}),t.jsx("td",{className:"py-2",children:t.jsx("span",{className:"px-2 py-1 rounded text-xs "+(e.liquidityScore>.7?"bg-green-100 text-green-800":e.liquidityScore>.4?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.liquidityScore.toFixed(2)})}),t.jsxs("td",{className:"py-2",children:[(100*e.bidAskSpread).toFixed(2),"%"]}),t.jsxs("td",{className:"py-2",children:[e.liquidityHorizon," days"]})]},e.symbol))})]})})]})]})]})},D=()=>{const e=v?P.calculateBaselIIIMetrics(j,{equity:1,fixed_income:.2,cash:0}):null;return e?t.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-6",children:[t.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[t.jsx(r,{className:"mr-2"}),"Regulatory Capital Requirements"]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Basel III Ratios"}),t.jsx("div",{className:"space-y-4",children:[{label:"Tier 1 Capital Ratio",value:(100*e.tier1Ratio).toFixed(2),threshold:6,current:100*e.tier1Ratio},{label:"Leverage Ratio",value:(100*e.leverageRatio).toFixed(2),threshold:3,current:100*e.leverageRatio}].map(e=>t.jsxs("div",{className:"p-4 border rounded-lg",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"font-medium",children:e.label}),t.jsxs("span",{className:"font-bold text-lg "+(e.current>=e.threshold?"text-green-600":"text-red-600"),children:[e.value,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full "+(e.current>=e.threshold?"bg-green-500":"bg-red-500"),style:{width:`${Math.min(e.current/e.threshold*100,100)}%`}})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: ",e.threshold,"%"]})]},e.label))})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold mb-3",children:"Capital Adequacy"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Risk-Weighted Assets:"}),t.jsxs("span",{className:"font-bold",children:["$",e.riskWeightedAssets.toLocaleString()]})]})}),t.jsx("div",{className:"p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Tier 1 Capital:"}),t.jsxs("span",{className:"font-bold",children:["$",e.tier1Capital.toLocaleString()]})]})}),t.jsx("div",{className:"p-3 bg-gray-50 rounded",children:t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Minimum Capital:"}),t.jsxs("span",{className:"font-bold",children:["$",e.minimumCapitalRequirement.toLocaleString()]})]})}),t.jsx("div",{className:"p-3 rounded "+(e.capitalSurplus>0?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:e.capitalSurplus>0?"text-green-700":"text-red-700",children:["Capital ",e.capitalSurplus>0?"Surplus":"Deficit",":"]}),t.jsxs("span",{className:"font-bold "+(e.capitalSurplus>0?"text-green-700":"text-red-700"),children:["$",Math.abs(e.capitalSurplus).toLocaleString()]})]})})]})]})]})]}):null};return t.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("header",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Advanced Risk Management"}),t.jsx("p",{className:"text-gray-600",children:"Comprehensive portfolio risk analytics, VaR, stress testing, and regulatory compliance"})]}),t.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Confidence Level:"}),t.jsxs("select",{value:C,onChange:e=>q(parseFloat(e.target.value)),className:"border rounded px-2 py-1",children:[t.jsx("option",{value:.9,children:"90%"}),t.jsx("option",{value:.95,children:"95%"}),t.jsx("option",{value:.99,children:"99%"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{className:"text-sm font-medium",children:"Risk Model:"}),t.jsxs("select",{value:k,onChange:e=>w(e.target.value),className:"border rounded px-2 py-1",children:[t.jsx("option",{value:"historical",children:"Historical"}),t.jsx("option",{value:"parametric",children:"Parametric"}),t.jsx("option",{value:"monte_carlo",children:"Monte Carlo"})]})]})]})}),t.jsx("div",{className:"mb-6",children:t.jsx("nav",{className:"flex space-x-1 bg-blue-50 p-1 rounded-lg",children:[{id:"var",label:"VaR Analysis",icon:a},{id:"stress",label:"Stress Testing",icon:s},{id:"liquidity",label:"Liquidity Risk",icon:l},{id:"regulatory",label:"Regulatory Capital",icon:r}].map(e=>{const a=e.icon;return t.jsxs("button",{onClick:()=>M(e.id),className:"flex items-center px-4 py-2 rounded-md font-medium transition-colors "+(V===e.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),e.label]},e.id)})})}),t.jsxs(n,{mode:"wait",children:["var"===V&&t.jsx(L,{}),"stress"===V&&t.jsx($,{}),"liquidity"===V&&t.jsx(T,{}),"regulatory"===V&&t.jsx(D,{})]}),t.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-4",children:v&&[{label:"Portfolio VaR (1D)",value:`$${(v.historicalVaR.var*v.totalPortfolioValue).toLocaleString()}`,icon:a,color:"red",risk:!0},{label:"Expected Shortfall",value:`$${(v.historicalVaR.expectedShortfall*v.totalPortfolioValue).toLocaleString()}`,icon:i,color:"red",risk:!0},{label:"Sharpe Ratio",value:v.portfolioMetrics.sharpeRatio.toFixed(2),icon:o,color:"green"},{label:"Portfolio Beta",value:"1.08",icon:c,color:"blue"}].map(e=>{const a=e.icon;return t.jsx("div",{className:"bg-white rounded-lg shadow p-4 "+(e.risk?"border-l-4 border-red-500":""),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:e.label}),t.jsx("p",{className:"text-xl font-bold",children:e.value})]}),t.jsx(a,{className:`w-8 h-8 text-${e.color}-600`})]})},e.label)})})]})})};export{j as default};
//# sourceMappingURL=AdvancedRiskDashboard-BO5FUtOC.js.map
