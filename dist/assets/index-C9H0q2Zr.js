const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-PJ6BGmjC.js","assets/react-vendor-D-lf4L0Q.js","assets/vendor-CL4v2Q21.js","assets/SEOHead-BOQguyKT.js","assets/Button-9-h2DNsu.js","assets/utils-vendor-Cj_bvvWu.js","assets/Header-C4IQwkNB.js","assets/portfolioCommands-CoJt4C1u.js","assets/apiLogger-BNPwdfUB.js","assets/lboModelingEngine-BU3g5hW3.js","assets/defaultFinancialData-CL3DkgK1.js","assets/data-vendor-DpIj8wd6.js","assets/ui-vendor-CbqBXaF5.js","assets/state-vendor-BV-43PI7.js","assets/index-enzZrNKo.js","assets/Progress-BdObtLKo.js","assets/Card-KdMZedxn.js","assets/Input-od62nGYd.js","assets/index-DzDKx5u1.js","assets/Select-B3xK8qCz.js","assets/charts-vendor-CAGrgwuM.js","assets/ValuationTool-Bnmmx6Fc.js","assets/ValuationToolDocs-CI3WMo59.js","assets/valuation-tool-demo-DqwI37vw.js","assets/PrivateAnalysis-KnMb8Fzp.js","assets/ValuationWorkbench-GHDJkoJp.js","assets/UIHelpers-Dp9Q61wz.js","assets/ModelLab-BwfE8wWK.js","assets/PortfolioManagement-Dz6v1IFm.js","assets/FinancialInputsDemo-B5QLT_hE.js","assets/NotFound-DLI5cQs2.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,B as a,M as s,e as n,X as r,U as o,f as i,C as l,T as c,h as d,i as u,k as m,l as p,S as h,m as g,D as f,n as y,o as x,Z as b,p as v,L as w,R as j,H as N,u as k,q as C,s as S,t as A,v as E,P as I}from"./react-vendor-D-lf4L0Q.js";import{a as D}from"./data-vendor-DpIj8wd6.js";import{m as T,A as R}from"./ui-vendor-CbqBXaF5.js";import{P as L,T as P}from"./vendor-CL4v2Q21.js";import{t as $,c as F}from"./utils-vendor-Cj_bvvWu.js";import{c as _,a as M}from"./state-vendor-BV-43PI7.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O=new class{constructor(){this.baseURL="https://api.financeanalyst.pro",this.client=D.create({baseURL:this.baseURL,timeout:15e3,headers:{"Content-Type":"application/json"}}),this.client.interceptors.response.use(e=>e,e=>Promise.reject(e))}async getQuote(e){return(await this.client.get(`/market-data/quote/${e.toUpperCase()}`)).data}async getHistoricalData(e,t="1mo",a="1d"){return(await this.client.get(`/market-data/historical/${e.toUpperCase()}`,{params:{range:t,interval:a}})).data}async getIntradayData(e,t="5min"){return(await this.client.get(`/market-data/intraday/${e.toUpperCase()}`,{params:{interval:t}})).data}async getBatchQuotes(e){return(await this.client.post("/market-data/batch",{symbols:e.map(e=>e.toUpperCase())})).data}async getIncomeStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/income/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getBalanceSheet(e,t="annual",a=5){return(await this.client.get(`/financial-statements/balance/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCashFlowStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/cash-flow/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getFinancialRatios(e,t="annual",a=5){return(await this.client.get(`/financial-statements/ratios/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCompanyProfile(e){return(await this.client.get(`/company-data/profile/${e.toUpperCase()}`)).data}async getPeerCompanies(e,t=10){return(await this.client.get(`/company-data/peers/${e.toUpperCase()}`,{params:{limit:t}})).data}async getDCFValuation(e){return(await this.client.get(`/company-data/dcf/${e.toUpperCase()}`)).data}async getEarnings(e,t=8){return(await this.client.get(`/company-data/earnings/${e.toUpperCase()}`,{params:{limit:t}})).data}async getFREDData(e,t=100,a=null,s=null){const n={limit:t};a&&(n.start_date=a),s&&(n.end_date=s);return(await this.client.get(`/economic-data/fred/${e.toUpperCase()}`,{params:n})).data}async getEconomicIndicators(){return(await this.client.get("/economic-data/indicators")).data}async getTreasuryRates(){return(await this.client.get("/economic-data/treasury-rates")).data}async getHealthStatus(){return(await this.client.get("/health")).data}async getServiceHealth(){return(await this.client.get("/health/services")).data}async getCacheStats(){return(await this.client.get("/health/cache")).data}async fetchMarketData(e,t="1y"){try{const a=await this.getHistoricalData(e,t);return{symbol:a.symbol,range:a.range,data:a.data,meta:a.meta,timestamps:a.data.map(e=>e.timestamp),prices:{close:a.data.map(e=>e.close),high:a.data.map(e=>e.high),low:a.data.map(e=>e.low),open:a.data.map(e=>e.open)},volume:a.data.map(e=>e.volume),source:a.source}}catch(a){throw a}}async fetchFinancialStatements(e,t="income-statement",a="annual",s=5){try{let n;switch(t){case"income-statement":n=await this.getIncomeStatement(e,a,s);break;case"balance-sheet-statement":n=await this.getBalanceSheet(e,a,s);break;case"cash-flow-statement":n=await this.getCashFlowStatement(e,a,s);break;default:throw new Error(`Unsupported statement type: ${t}`)}return n.data}catch(n){throw n}}async fetchPeerComparables(e){try{return(await this.getPeerCompanies(e)).peers}catch(t){throw t}}},q=({isOpen:g=!1,onToggle:f,currentContext:y={},portfolioData:x=null,marketData:b=null})=>{const[v,w]=e.useState([{id:"1",type:"assistant",content:"Hi! I'm your AI Financial Assistant. I can help you with portfolio analysis, market insights, risk assessment, and financial planning. What would you like to explore today?",timestamp:new Date,suggestions:["Analyze my portfolio performance","What are the current market trends?","Calculate portfolio risk metrics","Suggest portfolio rebalancing"]}]),[j,N]=e.useState(""),[k,C]=e.useState(!1),[S,A]=e.useState(!1),E=e.useRef(null),I=e.useRef(null);e.useEffect(()=>{E.current?.scrollIntoView({behavior:"smooth"})},[v]);const D=async(e=j)=>{if(!e.trim())return;const t={id:Date.now().toString(),type:"user",content:e,timestamp:new Date};w(e=>[...e,t]),N(""),C(!0);try{const t=await O.post("/ai-assistant/chat",{message:e,context:{...y,portfolioData:x,marketData:b,previousMessages:v.slice(-5)}}),a={id:(Date.now()+1).toString(),type:"assistant",content:t.data.response,timestamp:new Date,suggestions:t.data.suggestions||[],charts:t.data.charts||[],actions:t.data.actions||[]};w(e=>[...e,a])}catch(a){const e={id:(Date.now()+1).toString(),type:"assistant",content:"I'm having trouble processing your request right now. This could be due to high demand or a temporary service issue. Please try again in a moment, or let me help you with basic portfolio analysis using the available data.",timestamp:new Date,suggestions:["Show portfolio overview","Calculate basic metrics","View market data","Help with analysis"]};w(t=>[...t,e])}finally{C(!1)}},L=[{icon:l,label:"Portfolio Analysis",action:"Analyze my current portfolio allocation and performance"},{icon:c,label:"Market Insights",action:"What are the current market trends and opportunities?"},{icon:d,label:"Risk Assessment",action:"Assess the risk profile of my portfolio"},{icon:u,label:"Financial Planning",action:"Help me with financial planning and projections"},{icon:m,label:"Goal Planning",action:"Help me set and track financial goals"},{icon:p,label:"Performance Review",action:"Review my portfolio performance over time"}];return g?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,height:S?"auto":"80vh"},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl flex flex-col",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:t.jsx(a,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:"AI Financial Assistant"}),t.jsx("p",{className:"text-blue-100 text-sm",children:"Powered by advanced financial AI"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>A(!S),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:S?t.jsx(s,{className:"w-5 h-5"}):t.jsx(n,{className:"w-5 h-5"})}),t.jsx("button",{onClick:f,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:t.jsx(r,{className:"w-5 h-5"})})]})]}),!S&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[t.jsx(R,{children:v.map(e=>t.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex "+("user"===e.type?"justify-end":"justify-start"),children:t.jsxs("div",{className:`max-w-3xl flex ${"user"===e.type?"flex-row-reverse":"flex-row"} items-start space-x-3`,children:[t.jsx("div",{className:"p-2 rounded-lg "+("user"===e.type?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"),children:"user"===e.type?t.jsx(o,{className:"w-5 h-5"}):t.jsx(i,{className:"w-5 h-5"})}),t.jsxs("div",{className:"px-4 py-3 rounded-2xl "+("user"===e.type?"bg-blue-600 text-white ml-3":"bg-gray-100 text-gray-800 mr-3"),children:[t.jsx("p",{className:"whitespace-pre-wrap",children:e.content}),e.suggestions&&e.suggestions.length>0&&t.jsxs("div",{className:"mt-3 space-y-2",children:[t.jsx("p",{className:"text-sm font-medium opacity-75",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.suggestions.map((e,a)=>t.jsx("button",{onClick:()=>(e=>{D(e)})(e),className:"text-xs px-3 py-1 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all",children:e},a))})]}),e.charts&&e.charts.length>0&&t.jsxs("div",{className:"mt-3 p-3 bg-white bg-opacity-10 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"ðŸ“Š Charts & Analysis"}),t.jsx("div",{className:"text-sm opacity-75",children:"Interactive charts would be rendered here based on the analysis"})]}),t.jsx("div",{className:"text-xs opacity-50 mt-2",children:e.timestamp.toLocaleTimeString()})]})]})},e.id))}),k&&t.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:t.jsx(i,{className:"w-5 h-5"})}),t.jsx("div",{className:"px-4 py-3 rounded-2xl bg-gray-100",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),t.jsx("div",{ref:E})]}),1===v.length&&t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions:"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:L.map((e,a)=>t.jsxs("button",{onClick:()=>D(e.action),className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 text-left",children:[t.jsx(e.icon,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.label})]},a))})]}),t.jsx("div",{className:"p-6 border-t border-gray-200",children:t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("div",{className:"flex-1 relative",children:t.jsx("textarea",{ref:I,value:j,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Ask me anything about your portfolio, market analysis, or financial planning...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"48px",maxHeight:"120px"}})}),t.jsxs("button",{onClick:()=>D(),disabled:!j.trim()||k,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[t.jsx(h,{className:"w-5 h-5"}),t.jsx("span",{children:"Send"})]})]})})]}),S&&t.jsx("div",{className:"p-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"AI Assistant is minimized"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})})]})}):null};class U{constructor(){this.context={},this.commandHistory=[],this.aliases={p:"portfolio",md:"market-data",calc:"calculate",nav:"navigate",help:"help",clear:"clear",ls:"list",ll:"list --detailed",cd:"navigate"},this.commands=this.initializeCommands()}updateContext(e){this.context={...this.context,...e}}initializeCommands(){return{help:{description:"Show available commands and usage",usage:"help [command]",category:"system",handler:this.handleHelp.bind(this)},portfolio:{description:"Portfolio management operations",usage:"portfolio [show|analyze|rebalance|risk|holdings]",category:"portfolio",handler:this.handlePortfolio.bind(this)},"market-data":{description:"Fetch market data and quotes",usage:"market-data [symbol] [--type=quote|chart|news]",category:"market",handler:this.handleMarketData.bind(this)},quote:{description:"Get stock quote",usage:"quote <symbol>",category:"market",handler:this.handleQuote.bind(this)},calculate:{description:"Financial calculations",usage:"calculate [dcf|wacc|beta|sharpe] [parameters]",category:"calculations",handler:this.handleCalculate.bind(this)},dcf:{description:"DCF valuation calculation",usage:"dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]",category:"calculations",handler:this.handleDCF.bind(this)},navigate:{description:"Navigate to different pages/sections",usage:"navigate <page> [workspace|market-data|portfolio|analysis|private-analysis]",category:"navigation",handler:this.handleNavigate.bind(this)},list:{description:"List portfolio holdings, watchlist, or other data",usage:"list [holdings|watchlist|portfolios] [--detailed]",category:"data",handler:this.handleList.bind(this)},search:{description:"Search stocks, funds, or financial instruments",usage:"search <query> [--type=stocks|etf|mutual-funds]",category:"data",handler:this.handleSearch.bind(this)},analyze:{description:"Perform financial analysis",usage:"analyze <symbol|portfolio> [--type=fundamental|technical|risk]",category:"analysis",handler:this.handleAnalyze.bind(this)},risk:{description:"Risk analysis and metrics",usage:"risk [portfolio|symbol] [--metric=var|sharpe|beta|correlation]",category:"analysis",handler:this.handleRisk.bind(this)},export:{description:"Export data to various formats",usage:"export <data-type> [--format=csv|json|xlsx] [--output=filename]",category:"utility",handler:this.handleExport.bind(this)},import:{description:"Import portfolio or transaction data",usage:"import <file-path> [--type=portfolio|transactions]",category:"utility",handler:this.handleImport.bind(this)},status:{description:"Show system and data connection status",usage:"status [--detailed]",category:"system",handler:this.handleStatus.bind(this)},clear:{description:"Clear the terminal output",usage:"clear",category:"system",handler:this.handleClear.bind(this)},version:{description:"Show application version and build info",usage:"version",category:"system",handler:this.handleVersion.bind(this)}}}async processCommand(e){const t=this.parseCommand(e),a=this.resolveAlias(t.command),s=this.commands[a];if(!s)return{success:!1,error:`Command '${a}' not found. Type 'help' for available commands.`};try{const a=await s.handler(t.args,t.flags);return this.commandHistory.push({command:e,timestamp:new Date,result:a}),a}catch(n){return{success:!1,error:`Error executing '${a}': ${n.message}`}}}parseCommand(e){const t=e.trim().split(/\s+/),a=t[0],s=t.slice(1),n=[],r={};for(let o=0;o<s.length;o++){const e=s[o];if(e.startsWith("--")){const[t,a]=e.substring(2).split("=");r[t]=a||!0}else e.startsWith("-")?r[e.substring(1)]=!0:n.push(e)}return{command:a,args:n,flags:r}}resolveAlias(e){return this.aliases[e]||e}getSuggestions(e){const t=e.trim().split(/\s+/),a=t[0].toLowerCase();if(1===t.length)return Object.keys(this.commands).filter(e=>e.startsWith(a)).concat(Object.keys(this.aliases).filter(e=>e.startsWith(a))).sort();const s=this.resolveAlias(t[0]);return this.getCommandArgumentSuggestions(s,t.slice(1))}getCommandArgumentSuggestions(e,t){const a=[];switch(e){case"navigate":a.push("workspace","market-data","portfolio","analysis","private-analysis","valuation-workbench","model-lab");break;case"portfolio":a.push("show","analyze","rebalance","risk","holdings","performance");break;case"calculate":a.push("dcf","wacc","beta","sharpe","sortino","var");break;case"list":a.push("holdings","watchlist","portfolios","transactions");break;case"analyze":a.push("--type=fundamental","--type=technical","--type=risk");break;case"export":a.push("--format=csv","--format=json","--format=xlsx")}return a}async handleHelp(e,t){if(e.length>0){const t=this.resolveAlias(e[0]),a=this.commands[t];return a?{success:!0,output:`${t}: ${a.description}\nUsage: ${a.usage}`,type:"info"}:{success:!1,error:`Command '${t}' not found.`}}const a={};Object.entries(this.commands).forEach(([e,t])=>{a[t.category]||(a[t.category]=[]),a[t.category].push(`${e.padEnd(15)} ${t.description}`)});let s="FINANCEANALYST PRO CLI COMMANDS\n";return s+="â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n",Object.entries(a).forEach(([e,t])=>{s+=`${e.toUpperCase()}:\n`,s+=t.join("\n")+"\n\n"}),s+='Use "help <command>" for detailed usage information.\n',s+="Use Tab for autocompletion and â†‘â†“ for command history.",{success:!0,output:s,type:"info"}}async handlePortfolio(e,t){const a=e[0]||"show";switch(a){case"show":return this.context.portfolioData?{success:!0,data:this.context.portfolioData,format:"portfolio"}:{success:!1,error:"No portfolio data available. Please navigate to Portfolio Management page first."};case"analyze":try{await O.post("/portfolio/analyze",{portfolio:this.context.portfolioData});return{success:!0,output:"Portfolio analysis completed. Check the Portfolio Management page for detailed results.",type:"success"}}catch(s){return{success:!1,error:"Failed to analyze portfolio. Please try again."}}case"risk":return{success:!0,output:"Risk metrics calculation initiated. Results will be displayed in the Portfolio Analytics section.",type:"info"};default:return{success:!1,error:`Unknown portfolio action: ${a}. Available: show, analyze, rebalance, risk, holdings`}}}async handleMarketData(e,t){const a=e[0];if(t.type,!a)return{success:!1,error:"Symbol required. Usage: market-data <symbol> [--type=quote|chart|news]"};try{return{success:!0,data:(await O.get(`/market-data/quote/${a.toUpperCase()}`)).data,format:"market"}}catch(s){return{success:!1,error:`Failed to fetch market data for ${a.toUpperCase()}: ${s.message}`}}}async handleQuote(e,t){return this.handleMarketData(e,{type:"quote"})}async handleCalculate(e,t){const a=e[0];return a?{success:!0,output:`${a.toUpperCase()} calculation initiated. Results will be displayed in the Analysis section.`,type:"info"}:{success:!1,error:"Calculation type required. Available: dcf, wacc, beta, sharpe, sortino, var"}}async handleDCF(e,t){const a=e[0],s=t.growth||5,n=t.discount||10,r=t.terminal||2;return a?{success:!0,output:`DCF calculation for ${a.toUpperCase()} initiated with growth=${s}%, discount=${n}%, terminal=${r}%`,navigation:"/valuation-workbench",type:"success"}:{success:!1,error:"Symbol required for DCF calculation. Usage: dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]"}}async handleNavigate(e,t){const a=e[0],s={workspace:"/financial-model-workspace","market-data":"/real-time-market-data-center",portfolio:"/portfolio-management",analysis:"/scenario-analysis-sensitivity-tools","private-analysis":"/private-analysis","valuation-workbench":"/valuation-workbench","model-lab":"/model-lab"};return a&&s[a]?{success:!0,output:`Navigating to ${a}...`,navigation:s[a],type:"success"}:{success:!1,error:`Page not found. Available: ${Object.keys(s).join(", ")}`}}async handleList(e,t){const a=e[0]||"holdings";switch(t.detailed||t.d,a){case"holdings":if(this.context.portfolioData?.holdings){return{success:!0,data:this.context.portfolioData.holdings.map(e=>({Symbol:e.symbol,Shares:e.shares,Value:e.value,Weight:`${(100*e.weight).toFixed(1)}%`})),format:"table"}}return{success:!1,error:"No portfolio holdings available"};case"portfolios":return{success:!0,output:"Available portfolios:\nâ€¢ Main Portfolio (Active)\nâ€¢ Demo Portfolio\nâ€¢ Conservative Portfolio",type:"info"};default:return{success:!1,error:`Unknown list type: ${a}. Available: holdings, watchlist, portfolios`}}}async handleSearch(e,t){const a=e.join(" ");if(!a)return{success:!1,error:"Search query required. Usage: search <query> [--type=stocks|etf|mutual-funds]"};try{return{success:!0,data:(await O.get(`/market-data/search/${encodeURIComponent(a)}`)).data,format:"table"}}catch(s){return{success:!1,error:`Search failed: ${s.message}`}}}async handleAnalyze(e,t){const a=e[0],s=t.type||"fundamental";return a?{success:!0,output:`${s.charAt(0).toUpperCase()+s.slice(1)} analysis for ${a.toUpperCase()} initiated.`,navigation:"/scenario-analysis-sensitivity-tools",type:"success"}:{success:!1,error:"Analysis target required. Usage: analyze <symbol|portfolio> [--type=fundamental|technical|risk]"}}async handleRisk(e,t){const a=e[0]||"portfolio";return{success:!0,output:`Risk analysis (${(t.metric||"var").toUpperCase()}) for ${a} initiated. Results will be displayed in Portfolio Analytics.`,type:"info"}}async handleExport(e,t){const a=e[0],s=t.format||"csv";return{success:!0,output:`Export initiated: ${a} â†’ ${t.output||`export_${(new Date).toISOString().split("T")[0]}`}.${s}`,type:"success"}}async handleImport(e,t){const a=e[0],s=t.type||"portfolio";return a?{success:!0,output:`Import initiated: ${a} (${s})`,type:"success"}:{success:!1,error:"File path required. Usage: import <file-path> [--type=portfolio|transactions]"}}async handleStatus(e,t){const a=t.detailed;let s="ðŸŸ¢ SYSTEM STATUS\n";return s+="â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n",s+="Backend API:       ðŸŸ¢ Connected\n",s+="Market Data:       ðŸŸ¢ Live\n",s+="Portfolio Data:    "+(this.context.portfolioData?"ðŸŸ¢ Loaded":"ðŸŸ¡ Not loaded")+"\n",s+="AI Assistant:      ðŸŸ¢ Online\n",a&&(s+="\nDETAILED STATUS:\n",s+=`Commands in history: ${this.commandHistory.length}\n`,s+=`Current page: ${this.context.currentContext?.path||"Unknown"}\n`,s+=`Session start: ${(new Date).toLocaleString()}\n`),{success:!0,output:s,type:"info"}}async handleClear(e,t){return{success:!0,output:"",type:"clear"}}async handleVersion(e,t){return{success:!0,output:"FinanceAnalyst Pro v1.0.0\nBuild: 2025.08.18\nNode.js CLI Interface\nSecure Backend API Integration",type:"info"}}}const V=(e,t="USD",a=!1)=>{if(null==e||isNaN(e))return"N/A";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},z=(e,t=1)=>null==e||isNaN(e)?"N/A":`${(100*e).toFixed(t)}%`,B=(e,t=2,a=!1)=>{if(null==e||isNaN(e))return"N/A";return new Intl.NumberFormat("en-US",{notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:t}).format(e)},W=e=>{const{currentRevenue:t,revenueGrowthRate:a,fcfMargin:s,wacc:n,terminalGrowthRate:r,sharesOutstanding:o,totalDebt:i,cash:l,projectionYears:c=5}=e,d=((e,t,a=5)=>{const s=[];let n=e;for(let r=0;r<a;r++)n*=1+(Array.isArray(t)?t[r]||t[t.length-1]:t),s.push(n);return s})(t,a,c),u=d.map(e=>e*s),m=((e,t,a)=>e*(1+t)/(a-t))(u[u.length-1],r,n),p=(h=n,u.reduce((e,t,a)=>e+t/Math.pow(1+h,a+1),0));var h;const g=m/Math.pow(1+n,c),f=p+g,y=f-i+l;return{enterpriseValue:f,equityValue:y,pricePerShare:y/o,pvOfCashFlows:p,pvOfTerminalValue:g,terminalValue:m,projectedRevenues:d,projectedFCFs:u,wacc:n,terminalGrowthRate:r}},H=e=>{const{purchasePrice:t,ebitda:a,debtMultiple:s=5,exitMultiple:n,exitYear:r=5,managementFeeRate:o=.02,carriedInterestRate:i=.2}=e,l=a*s,c=t-l,d=a*Math.pow(1.05,r),u=d*n,m=u-.5*l,p=m/c,h=Math.pow(p,1/r)-1,g=p,f=c*o*r,y=Math.max(0,(m-c)*i);return{equityInvestment:c,totalDebt:l,exitEquityValue:m,totalReturn:p,irr:h,moic:g,exitEbitda:d,exitEnterpriseValue:u,managementFees:f,carriedInterest:y,netReturn:m-f-y}},K=(e,t)=>{const a={};return["marketCap","peRatio","evToEbitda","priceToBook","debtToEquity"].forEach(e=>{const s=t.map(t=>t[e]);a[e]=(e=>{const t=e.filter(e=>null!=e&&!isNaN(e));return 0===t.length?{median:null,mean:null,min:null,max:null}:(t.sort((e,t)=>e-t),{median:t.length%2==0?(t[t.length/2-1]+t[t.length/2])/2:t[Math.floor(t.length/2)],mean:t.reduce((e,t)=>e+t,0)/t.length,min:Math.min(...t),max:Math.max(...t),count:t.length})})(s)}),{company:e,peerStatistics:a,relativeValuation:{marketCapPercentile:G(e.marketCap,t.map(e=>e.marketCap)),peRatioRelative:e.peRatio/a.peRatio.median,evEbitdaRelative:e.evToEbitda/a.evToEbitda.median,priceToBookRelative:e.priceToBook/a.priceToBook.median}}},G=(e,t)=>{const a=t.filter(e=>null!=e&&!isNaN(e));if(0===a.length||null==e||isNaN(e))return null;a.sort((e,t)=>e-t);return a.filter(t=>t<e).length/a.length},J=({currentContext:a={},portfolioData:o=null,marketData:i=null,onNavigate:l})=>{const[c,d]=e.useState(!1),[u,m]=e.useState(!1),[p,h]=e.useState(""),[v,w]=e.useState([{id:1,type:"system",content:'FinanceAnalyst Pro Terminal v1.0.0 - Type "help" for available commands',timestamp:new Date},{id:2,type:"info",content:"Connected to secure backend API â€¢ Market data live â€¢ Ready for commands",timestamp:new Date}]),[j,N]=e.useState([]),[k,C]=e.useState(-1),[S,A]=e.useState([]),[E,I]=e.useState(!1),[D,L]=e.useState(!1),P=e.useRef(null),$=e.useRef(null),F=e.useRef(new U);e.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[v]),e.useEffect(()=>{c&&!u&&P.current&&P.current.focus()},[c,u]),e.useEffect(()=>{F.current.updateContext({currentContext:a,portfolioData:o,marketData:i,onNavigate:l})},[a,o,i,l]);const _=e.useCallback((e,t="output")=>{const a={id:Date.now(),type:t,content:e,timestamp:new Date};w(e=>[...e,a])},[]),M=(e,t)=>{switch(t){case"table":return O(e);case"json":return JSON.stringify(e,null,2);case"portfolio":return q(e);case"market":return B(e);default:return e}},O=e=>{if(!Array.isArray(e)||0===e.length)return"No data";const t=Object.keys(e[0]),a=t.map(t=>Math.max(t.length,...e.map(e=>String(e[t]||"").length)));return[t.map((e,t)=>e.padEnd(a[t])).join(" | "),a.map(e=>"-".repeat(e)).join("-|-"),...e.map(e=>t.map((t,s)=>String(e[t]||"").padEnd(a[s])).join(" | "))].join("\n")},q=e=>{if(!e)return"No portfolio data available";let t="ðŸ“Š PORTFOLIO OVERVIEW\n";return t+="â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n",t+=`Total Value: ${V(e.totalValue||0)}\n`,t+=`Total Return: ${z(e.totalReturn||0)}\n`,t+=`Holdings: ${e.holdings?.length||0}\n\n`,e.holdings&&e.holdings.length>0&&(t+="HOLDINGS:\n",e.holdings.forEach(e=>{t+=`${e.symbol.padEnd(6)} ${V(e.value||0).padStart(12)} ${z(e.weight||0).padStart(8)}\n`})),t},B=e=>{if(!e)return"No market data available";let t="ðŸ“ˆ MARKET DATA\n";return t+="â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n",Object.entries(e).forEach(([e,a])=>{t+=`${e.toUpperCase().padEnd(15)} ${String(a).padStart(12)}\n`}),t},W=e=>{switch(e){case"command":return"text-blue-400";case"error":return"text-red-400";case"success":return"text-green-400";case"warning":return"text-yellow-400";case"info":return"text-cyan-400";case"system":return"text-gray-400";case"formatted":return"text-purple-400";default:return"text-gray-300"}};return t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:[t.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-2 flex items-center justify-between cursor-pointer select-none",onClick:()=>d(!c),role:"button",tabIndex:0,"aria-label":(c?"Collapse":"Expand")+" terminal",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d(!c))},children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(g,{className:"w-5 h-5 text-green-400"}),t.jsx("span",{className:"text-sm font-mono text-gray-300",children:"FinanceAnalyst Pro Terminal"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!u&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),w([])},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Clear output",children:t.jsx(r,{className:"w-4 h-4"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),(()=>{const e=v.map(e=>`[${e.timestamp.toLocaleTimeString()}] ${e.content}`).join("\n"),t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`financeanalyst-cli-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)})()},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Export output",children:t.jsx(f,{className:"w-4 h-4"})})]}),t.jsx("button",{onClick:e=>{e.stopPropagation(),m(!u)},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",children:u?t.jsx(s,{className:"w-4 h-4"}):t.jsx(n,{className:"w-4 h-4"})}),t.jsx("button",{className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:c?"Collapse":"Expand",children:c?t.jsx(y,{className:"w-4 h-4"}):t.jsx(x,{className:"w-4 h-4"})})]})]}),t.jsx(R,{children:c&&!u&&t.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:400,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"bg-gray-900 border-t border-gray-700 overflow-hidden",children:t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{ref:$,className:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1",style:{maxHeight:"320px"},children:[v.map(e=>t.jsx("div",{className:`${W(e.type)} whitespace-pre-wrap`,children:"formatted"===e.type?t.jsx("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 overflow-x-auto",children:t.jsx("pre",{className:"text-xs text-gray-300",children:e.content})}):e.content},e.id)),D&&t.jsxs("div",{className:"text-yellow-400 flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin w-3 h-3 border border-yellow-400 border-t-transparent rounded-full"}),t.jsx("span",{children:"Processing..."})]})]}),E&&S.length>0&&t.jsxs("div",{className:"border-t border-gray-700 bg-gray-800 p-2",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Suggestions (Tab to complete):"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,6).map((e,a)=>t.jsx("button",{onClick:()=>{h(e),I(!1),P.current?.focus()},className:"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors",children:e},a))})]}),t.jsxs("div",{className:"border-t border-gray-700 p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-green-400 font-mono",children:"$"}),t.jsx("input",{ref:P,type:"text",value:p,onChange:e=>{const t=e.target.value;if(h(t),t.trim()){const e=F.current.getSuggestions(t);A(e),I(e.length>0)}else I(!1)},onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),(async e=>{if(e.trim()){N(t=>[...t,e]),C(-1),_(`$ ${e}`,"command"),L(!0);try{const t=await F.current.processCommand(e);t.success?(t.output&&_(t.output,t.type||"output"),t.data&&t.format&&_(M(t.data,t.format),"formatted"),t.navigation&&l?.(t.navigation)):_(t.error||"Command failed","error")}catch(t){_(`Error: ${t.message}`,"error")}finally{L(!1)}}})(p),h(""),I(!1);else if("ArrowUp"===e.key){if(e.preventDefault(),k<j.length-1){const e=k+1;C(e),h(j[j.length-1-e])}}else if("ArrowDown"===e.key)if(e.preventDefault(),k>0){const e=k-1;C(e),h(j[j.length-1-e])}else 0===k&&(C(-1),h(""));else"Tab"===e.key?(e.preventDefault(),S.length>0&&(h(S[0]),I(!1))):"Escape"===e.key&&I(!1)},placeholder:"Enter financial command... (type 'help' for commands)",className:"flex-1 bg-transparent text-gray-300 font-mono outline-none placeholder-gray-500",disabled:D}),D&&t.jsx("div",{className:"text-yellow-400",children:t.jsx(b,{className:"w-4 h-4 animate-pulse"})})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[t.jsx("span",{children:'Use â†‘â†“ for history â€¢ Tab for autocomplete â€¢ Type "help" for commands'}),t.jsxs("span",{children:[j.length," commands in history"]})]})]})]})})})]})};function Y({name:e,size:a=24,color:s="currentColor",className:n="",strokeWidth:r=2,...o}){const i=w[e];return i?t.jsx(i,{size:a,color:s,strokeWidth:r,className:n,...o}):t.jsx(v,{size:a,color:"gray",strokeWidth:r,className:n,...o})}Y.propTypes={name:L.string.isRequired,size:L.number,color:L.string,className:L.string,strokeWidth:L.number};class Q extends j.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){e.__ErrorBoundary=!0,window.__COMPONENT_ERROR__?.(e,t)}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:t.jsxs("div",{className:"text-center p-8 max-w-md",children:[t.jsx("div",{className:"flex justify-center items-center mb-2",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42px",height:"42px",viewBox:"0 0 32 33",fill:"none",children:[t.jsx("path",{d:"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z",stroke:"#343330",strokeWidth:"2",strokeMiterlimit:"10"}),t.jsx("path",{d:"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z",fill:"#343330"}),t.jsx("path",{d:"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z",fill:"#343330"}),t.jsx("path",{d:"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5",stroke:"#343330",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),t.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[t.jsx("h1",{className:"text-2xl font-medium text-neutral-800",children:"Something went wrong"}),t.jsx("p",{className:"text-neutral-600 text-base w w-8/12 mx-auto",children:"We encountered an unexpected error while processing your request."})]}),t.jsx("div",{className:"flex justify-center items-center mt-6",children:t.jsxs("button",{onClick:()=>{window.location.href="/"},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm",children:[t.jsx(Y,{name:"ArrowLeft",size:18,color:"#fff"}),"Back"]})})]})}):this.props.children}}const Z=new class{constructor(e={}){this.options={rules:{"color-contrast":{enabled:!0},"keyboard-navigation":{enabled:!0},"focus-management":{enabled:!0},"aria-labels":{enabled:!0},"heading-order":{enabled:!0},"landmark-one-main":{enabled:!0},"skip-link":{enabled:!0},"nested-interactive":{enabled:!1},...e.rules},tags:["wcag2a","wcag2aa","wcag21aa","best-practice"],runOnly:e.runOnly||null,reporter:e.reporter||"v2",...e},this.violations=[],this.lastTestResults=null}async runTests(e=document,t={}){const a={...this.options,...t};try{const t=await P.run(e,a);return this.lastTestResults=t,this.violations=t.violations,this.logResults(t),this.storeResults(t),t}catch(s){throw s}}async testFinancialComponent(e,t="generic"){const a=document.querySelector(e);if(!a)throw new Error(`Element not found: ${e}`);const s={spreadsheet:{rules:{"table-header":{enabled:!0},"th-has-data-cells":{enabled:!0},"table-duplicate-name":{enabled:!0},"scope-attr-valid":{enabled:!0}},tags:["wcag2aa","section508"]},chart:{rules:{"image-alt":{enabled:!0},"svg-img-alt":{enabled:!0},"aria-hidden-focus":{enabled:!0}},tags:["wcag2aa"]},calculator:{rules:{label:{enabled:!0},"form-field-multiple-labels":{enabled:!0},"duplicate-id":{enabled:!0}},tags:["wcag2aa","section508"]},modal:{rules:{"focus-trap":{enabled:!0},"aria-dialog-name":{enabled:!0},"keyboard-navigation":{enabled:!0}},tags:["wcag2aa","best-practice"]}}[t]||{};return await this.runTests(a,s)}async testKeyboardNavigation(){const e=this.getFocusableElements(),t=[];let a=-1;e.forEach((e,s)=>{const n=e.tabIndex||0;n>0&&n<=a&&t.push({element:e.tagName,id:e.id,tabIndex:n,position:s,issue:"Tab order not sequential"}),a=n});const s=[];return e.forEach(e=>{const t=window.getComputedStyle(e,":focus"),a="none"!==t.outline&&"0px"!==t.outline,n="none"!==t.boxShadow,r="transparent"!==t.backgroundColor;a||n||r||s.push({element:e.tagName,id:e.id,className:e.className,issue:"No visible focus indicator"})}),{focusableElementsCount:e.length,tabOrderIssues:t,focusVisibilityIssues:s,passed:0===t.length&&0===s.length}}async testColorContrast(){const e=document.querySelectorAll("p, span, div, td, th, label, button, a, h1, h2, h3, h4, h5, h6"),t=[];return e.forEach(e=>{const a=window.getComputedStyle(e),s=a.color,n=a.backgroundColor;if("transparent"===n||"rgba(0, 0, 0, 0)"===n)return;const r=this.calculateContrastRatio(s,n),o=parseInt(a.fontSize),i=a.fontWeight,l=o>=18||o>=14&&("bold"===i||i>=700)?3:4.5;r<l&&t.push({element:e.tagName,id:e.id,className:e.className,textColor:s,backgroundColor:n,contrast:r.toFixed(2),required:l,fontSize:o,fontWeight:i,text:e.textContent?.substring(0,50)+"..."})}),{totalElements:e.length,contrastIssues:t,passed:0===t.length}}async testFormAccessibility(){const e=document.querySelectorAll("form"),t=[];return e.forEach((e,a)=>{e.querySelectorAll("input, select, textarea").forEach(e=>{const s=[];this.hasAssociatedLabel(e)||s.push("Missing label"),e.required&&!this.hasRequiredIndication(e)&&s.push("Required field not clearly indicated"),"true"!==e.getAttribute("aria-invalid")||this.hasErrorMessage(e)||s.push("Error state without error message"),this.isFinancialInput(e)&&!e.autocomplete&&s.push("Financial input missing autocomplete attribute"),s.length>0&&t.push({formIndex:a,inputType:e.type,inputId:e.id,inputName:e.name,issues:s})})}),{totalForms:e.length,formIssues:t,passed:0===t.length}}generateReport(){if(!this.lastTestResults)throw new Error("No test results available. Run tests first.");const{violations:e,passes:t,incomplete:a,inapplicable:s}=this.lastTestResults;return{summary:{timestamp:(new Date).toISOString(),totalChecks:e.length+t.length+a.length+s.length,violations:e.length,passes:t.length,incomplete:a.length,inapplicable:s.length,score:this.calculateAccessibilityScore()},violations:e.map(e=>({id:e.id,impact:e.impact,description:e.description,help:e.help,helpUrl:e.helpUrl,nodes:e.nodes.length,tags:e.tags})),recommendations:this.generateRecommendations(e),financialSpecific:this.getFinancialAccessibilityInsights()}}calculateAccessibilityScore(){if(!this.lastTestResults)return 0;const{violations:e,passes:t}=this.lastTestResults,a=e.length+t.length;if(0===a)return 100;const s={critical:4,serious:3,moderate:2,minor:1},n=e.reduce((e,t)=>e+(s[t.impact]||1),0),r=4*a;return Math.max(0,100-n/r*100)}generateRecommendations(e){const t=[];return e.forEach(e=>{switch(e.id){case"color-contrast":t.push({category:"Visual Design",priority:"High",issue:"Insufficient color contrast",solution:"Ensure text colors meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)",financialContext:"Critical for reading financial data and avoiding misinterpretation of numbers"});break;case"keyboard-navigation":t.push({category:"Keyboard Access",priority:"High",issue:"Keyboard navigation issues",solution:"Ensure all interactive elements are keyboard accessible with visible focus indicators",financialContext:"Essential for users who rely on keyboard navigation to access financial tools"});break;case"label":t.push({category:"Form Controls",priority:"High",issue:"Missing form labels",solution:"Add proper labels to all form controls, especially financial input fields",financialContext:"Critical for screen readers to understand financial input requirements"});break;case"aria-hidden-focus":t.push({category:"ARIA Usage",priority:"Medium",issue:"Focusable elements hidden from screen readers",solution:"Review aria-hidden usage on interactive elements",financialContext:"May hide important financial controls from assistive technology users"})}}),t}getFinancialAccessibilityInsights(){const e=[];document.querySelectorAll("table").length>0&&e.push({component:"Data Tables",recommendation:"Ensure financial data tables have proper headers and scope attributes for screen reader navigation"});document.querySelectorAll("[data-chart], .recharts-wrapper, canvas").length>0&&e.push({component:"Charts and Graphs",recommendation:"Provide alternative text descriptions and data tables for financial charts"});return document.querySelectorAll("[data-calculator], .calculator").length>0&&e.push({component:"Financial Calculators",recommendation:"Ensure calculator inputs have clear labels and results are announced to screen readers"}),e}getFocusableElements(){return Array.from(document.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",")))}hasAssociatedLabel(e){const t=e.id,a=e.getAttribute("aria-label"),s=e.getAttribute("aria-labelledby");if(a||s)return!0;if(t&&document.querySelector(`label[for="${t}"]`))return!0;return!!e.closest("label")}hasRequiredIndication(e){const t=e.getAttribute("aria-required"),a=e.hasAttribute("required"),s=this.hasRequiredTextIndicator(e);return"true"===t||a||s}hasRequiredTextIndicator(e){const t=this.getAssociatedLabel(e);if(!t)return!1;const a=t.textContent||"";return a.includes("*")||a.toLowerCase().includes("required")}hasErrorMessage(e){const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);return e&&e.textContent}return!1}isFinancialInput(e){return["number","email","tel"].includes(e.type)||["amount","price","rate","percent","currency","value"].some(t=>e.name?.toLowerCase().includes(t))}getAssociatedLabel(e){const t=e.id;if(t){const e=document.querySelector(`label[for="${t}"]`);if(e)return e}return e.closest("label")}calculateContrastRatio(e,t){const a=this.parseColor(e),s=this.parseColor(t),n=this.getLuminance(a),r=this.getLuminance(s);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}parseColor(e){const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return t?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:[0,0,0]}getLuminance([e,t,a]){const[s,n,r]=[e,t,a].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*s+.7152*n+.0722*r}logResults(e){e.violations.length>0&&e.violations.forEach(e=>{})}reportViolations(e){e.forEach(e=>{e.nodes.forEach(e=>{})})}storeResults(e){try{const t={timestamp:Date.now(),url:window.location.href,violations:e.violations.length,passes:e.passes.length,score:this.calculateAccessibilityScore()},a=JSON.parse(localStorage.getItem("accessibility-reports")||"[]");a.push(t),a.length>10&&a.splice(0,a.length-10),localStorage.setItem("accessibility-reports",JSON.stringify(a))}catch(t){}}},X={CLS:null,FID:null,FCP:null,LCP:null,TTFB:null,INP:null};function ee(){!function(){let e=0;const t=[];new PerformanceObserver(a=>{for(const s of a.getEntries())s.hadRecentInput||(e+=s.value,t.push(s));X.CLS=e,te("CLS",e,t)}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(e=>{for(const t of e.getEntries())if("first-input-delay"===t.name&&(X.FID=t.processingStart-t.startTime,te("FID",X.FID,[t])),t.interactionId){const e=t.processingEnd-t.startTime;(!X.INP||e>X.INP)&&(X.INP=e,te("INP",e,[t]))}}).observe({type:"event",buffered:!0}),new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(X.FCP=t.startTime,te("FCP",t.startTime,[t]))}).observe({type:"paint",buffered:!0}),new PerformanceObserver(e=>{const t=e.getEntries(),a=t[t.length-1];X.LCP=a.startTime,te("LCP",a.startTime,[a])}).observe({type:"largest-contentful-paint",buffered:!0});const a=performance.getEntriesByType("navigation")[0];a&&(X.TTFB=a.responseStart-a.requestStart,te("TTFB",X.TTFB,[a]))}(),["financial-spreadsheet","dcf-calculator","chart-rendering","market-data-fetch"].forEach(e=>{performance.mark(`${e}-start`)}),window.trackComponentRender=(e,t)=>{performance.mark(`${e}-end`),performance.measure(`${e}-render`,`${e}-start`,`${e}-end`),ae("component-render",{component:e,renderTime:t,timestamp:Date.now()})},window.trackCalculationPerformance=(e,t,a)=>{ae("financial-calculation",{type:e,duration:t,complexity:a,timestamp:Date.now()})},window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&function(e){const t={...e,url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent,connection:re()};oe("navigation-timing",t)}({dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ssl:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,ttfb:e.responseStart-e.requestStart,download:e.responseEnd-e.responseStart,domProcessing:e.domComplete-e.domLoading,totalLoadTime:e.loadEventEnd-e.fetchStart})},0)}),new PerformanceObserver(e=>{for(const t of e.getEntries())if("script"===t.initiatorType||"css"===t.initiatorType||"img"===t.initiatorType||"fetch"===t.initiatorType){const e={name:t.name,type:t.initiatorType,size:t.transferSize||t.encodedBodySize,duration:t.duration,cached:0===t.transferSize&&t.encodedBodySize>0,timestamp:Date.now()};(e.size>5e4||e.duration>1e3)&&se(e)}}).observe({entryTypes:["resource"]}),function(){let e=0,t=0;["click","keydown","touchstart"].forEach(a=>{document.addEventListener(a,s=>{const n=performance.now();requestAnimationFrame(()=>{const r=performance.now()-n;e++,t+=r,r>100&&oe("slow-interaction",{type:a,target:s.target.tagName,duration:r,timestamp:Date.now()})})},{passive:!0})}),setInterval(()=>{e>0&&(oe("interaction-summary",{count:e,averageTime:t/e,timestamp:Date.now()}),e=0,t=0)},3e4)}()}function te(e,t,a){oe("web-vital",{metric:e,value:Math.round(t),entries:a.map(e=>({startTime:e.startTime,duration:e.duration||0})),url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent,connection:re()})}function ae(e,t){oe("custom-metric",{type:e,...t,url:window.location.href,userAgent:navigator.userAgent})}function se(e){oe("resource-timing",e)}function ne(){const e=[];return Object.entries({LCP:2500,FID:100,CLS:.1,FCP:1800,TTFB:800}).forEach(([t,a])=>{const s=X[t];null!==s&&s>a&&e.push({metric:t,value:s,budget:a,overBy:s-a})}),e.length>0&&oe("budget-violations",{violations:e,timestamp:Date.now(),url:window.location.href}),e}function re(){return"connection"in navigator?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null}function oe(e,t){try{const a={type:e,data:t,sessionId:le(),userId:ce()},s=JSON.parse(localStorage.getItem("analytics-queue")||"[]");s.push(a),s.length>100&&s.splice(0,s.length-100),localStorage.setItem("analytics-queue",JSON.stringify(s)),s.length>=10&&ie()}catch(a){}}function ie(){try{const e=JSON.parse(localStorage.getItem("analytics-queue")||"[]");if(0===e.length)return;window.gtag&&e.forEach(e=>{window.gtag("event",e.type,{custom_parameter:JSON.stringify(e.data)})}),localStorage.removeItem("analytics-queue")}catch(e){}}function le(){let e=sessionStorage.getItem("session-id");return e||(e=Date.now()+"-"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("session-id",e)),e}function ce(){let e=localStorage.getItem("user-id");return e||(e="anonymous-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),localStorage.setItem("user-id",e)),e}function de(e,t){oe("performance-metric",{type:e,...t,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()})}function ue(e,t){oe("financial-component-performance",{component:e,...t,url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent})}function me(t){const a=function(t={}){const{enabled:a=!1,autoTest:s=!1,testInterval:n=null,componentType:r="generic",onViolations:o=null,onSuccess:i=null}=t,[l,c]=e.useState(null),[d,u]=e.useState(!1),[m,p]=e.useState([]),[h,g]=e.useState(null),[f,y]=e.useState(null),x=e.useRef(null),b=e.useRef(null),v=e.useCallback(async(e=null,t={})=>{if(!a)return null;const s=e||x.current||document;u(!0);try{const e=await Z.runTests(s,t);return c(e),p(e.violations||[]),g(Z.calculateAccessibilityScore()),y(Date.now()),de("accessibility_test",{violations:e.violations?.length||0,score:Z.calculateAccessibilityScore(),componentType:r,timestamp:Date.now()}),e.violations?.length>0?o?.(e.violations):i?.(e),e}catch(n){return null}finally{u(!1)}},[a,r,o,i]),w=e.useCallback(async(e,t=r)=>{if(!a)return null;u(!0);try{const a=await Z.testFinancialComponent(e,t);return c(a),p(a.violations||[]),g(Z.calculateAccessibilityScore()),y(Date.now()),de("financial_component_accessibility",{componentType:t,violations:a.violations?.length||0,score:Z.calculateAccessibilityScore(),timestamp:Date.now()}),a}catch(s){return null}finally{u(!1)}},[a,r]),j=e.useCallback(async()=>{if(!a)return null;try{const e=await Z.testKeyboardNavigation();return de("keyboard_navigation_test",{focusableElements:e.focusableElementsCount,tabOrderIssues:e.tabOrderIssues?.length||0,focusVisibilityIssues:e.focusVisibilityIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[a]),N=e.useCallback(async()=>{if(!a)return null;try{const e=await Z.testColorContrast();return de("color_contrast_test",{totalElements:e.totalElements,contrastIssues:e.contrastIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[a]),k=e.useCallback(async()=>{if(!a)return null;try{const e=await Z.testFormAccessibility();return de("form_accessibility_test",{totalForms:e.totalForms,formIssues:e.formIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[a]),C=e.useCallback(()=>{if(!l)return null;try{const e=Z.generateReport();return de("accessibility_report_generated",{score:e.summary.score,violations:e.summary.violations,totalChecks:e.summary.totalChecks,timestamp:Date.now()}),e}catch(e){return null}},[l]);return e.useEffect(()=>{if(!a||!s)return;const e=()=>{v()};return e(),n&&(b.current=setInterval(e,n)),()=>{b.current&&clearInterval(b.current)}},[a,s,n,v]),e.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]),{results:l,violations:m,score:h,isLoading:d,lastTestTime:f,runTests:v,testFinancialComponent:w,testKeyboardNavigation:j,testColorContrast:N,testFormAccessibility:k,generateReport:C,elementRef:x}}({componentType:t,autoTest:!0,testInterval:3e4,onViolations:e=>{}}),s=e.useCallback(async()=>{const e={};try{return e.keyboardNav=await a.testKeyboardNavigation(),e.colorContrast=await a.testColorContrast(),e.formAccessibility=await a.testFormAccessibility(),e.report=a.generateReport(),e}catch(t){return null}},[a,t]);return{...a,testFinancialFeatures:s}}setInterval(ie,6e4),window.addEventListener("beforeunload",()=>{ie()});const pe=({isVisible:a=!1,onClose:s})=>{const[n,r]=e.useState(null),[o,i]=e.useState(3e4),[l,c]=e.useState(!1),[d,u]=e.useState(75),{alerts:m,startMonitoring:p,stopMonitoring:h,clearAlerts:g}=function(t={}){const{threshold:a=80,alertOnViolations:s=!0,monitorInterval:n=6e4}=t,[r,o]=e.useState(!1),[i,l]=e.useState([]),c=e.useRef(null),d=e.useCallback(()=>{if(r)return;o(!0);const e=async()=>{try{const e=await Z.runTests(document),t=Z.calculateAccessibilityScore();if(t<a){const s={id:Date.now(),type:"low_score",message:`Accessibility score (${t}) is below threshold (${a})`,score:t,violations:e.violations?.length||0,timestamp:Date.now()};l(e=>[...e,s])}const n=e.violations?.filter(e=>"critical"===e.impact)||[];if(n.length>0&&s){const e={id:Date.now(),type:"critical_violations",message:`${n.length} critical accessibility violations found`,violations:n,timestamp:Date.now()};l(t=>[...t,e])}de("accessibility_monitoring",{score:t,violations:e.violations?.length||0,criticalViolations:n.length,timestamp:Date.now()})}catch(e){}};e(),c.current=setInterval(e,n)},[r,a,s,n]),u=e.useCallback(()=>{o(!1),c.current&&(clearInterval(c.current),c.current=null)},[]),m=e.useCallback(()=>{l([])},[]);return e.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]),{isMonitoring:r,alerts:i,startMonitoring:d,stopMonitoring:u,clearAlerts:m}}({threshold:d,monitorInterval:o}),f=e.useCallback(()=>{try{const e=function(){const e=JSON.parse(localStorage.getItem("accessibility-history")||"[]"),t=JSON.parse(localStorage.getItem("analytics-queue")||"[]"),a=e.slice(-10),s=a.reduce((e,t)=>e+t.score,0)/a.length||0,n=a.reduce((e,t)=>e+t.violations,0)/a.length||0,r=t.filter(e=>"performance-metric"===e.type).slice(-20).map(e=>e.data),o=t.filter(e=>"web-vital"===e.type).slice(-10).map(e=>e.data);return{webVitals:X,budgetViolations:ne(),accessibility:{currentScore:a[a.length-1]?.score||0,averageScore:Math.round(s),averageViolations:Math.round(n),history:a,trends:{scoreImproving:a.length>=2&&a[a.length-1].score>a[a.length-2].score}},performance:{recentMetrics:r,webVitalHistory:o},timestamp:Date.now()}}();r(e)}catch(e){}},[]),y=e.useCallback(()=>{l?(h(),c(!1)):(p(),c(!0))},[l,p,h]);e.useEffect(()=>{if(!a)return;ee(),f();const e=setInterval(f,o);return()=>{clearInterval(e)}},[a,f,o]);const x=(e,t="ms")=>null==e?"N/A":"number"==typeof e?`${Math.round(e)}${t}`:e;if(!a||!n)return null;const{webVitals:b,budgetViolations:v,accessibility:w,performance:j}=n;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Performance Dashboard"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time monitoring for FinanceAnalyst Pro"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:y,className:"px-4 py-2 rounded-md text-sm font-medium "+(l?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:l?"Stop Monitoring":"Start Monitoring"}),t.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-200",children:"Refresh"}),t.jsxs("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]}),t.jsxs("div",{className:"p-6 space-y-8",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Core Web Vitals"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(b).map(([e,a])=>{const s=((e,t)=>{const a={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}}[e];return a&&null!==t?t<=a.good?"good":t<=a.poor?"needs-improvement":"poor":"unknown"})(e,a),n=(e=>{switch(e){case"good":return"text-green-600 bg-green-100";case"needs-improvement":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(s);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:e}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n}`,children:s})]}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:x(a,"CLS"===e?"":"ms")})})]},e)})})]}),v.length>0&&t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Budget Violations"}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("div",{className:"space-y-2",children:v.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm font-medium text-red-800",children:[e.metric,": ",x(e.value)]}),t.jsxs("span",{className:"text-sm text-red-600",children:["Over budget by ",x(e.overBy)]})]},a))})})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accessibility"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Score"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.currentScore}),t.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"/100"}),w.trends.scoreImproving&&t.jsx("span",{className:"ml-2 text-green-600",children:t.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Violations"}),t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageViolations})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Score"}),t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageScore})]})]}),m.length>0&&t.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Active Alerts"}),t.jsx("button",{onClick:g,className:"text-xs text-yellow-600 hover:text-yellow-800",children:"Clear All"})]}),t.jsxs("div",{className:"space-y-2",children:[m.slice(0,5).map(e=>t.jsxs("div",{className:"text-sm text-yellow-700",children:[t.jsxs("span",{className:"font-medium",children:[e.type,":"]})," ",e.message]},e.id)),m.length>5&&t.jsxs("div",{className:"text-xs text-yellow-600",children:["And ",m.length-5," more alerts..."]})]})]})]}),j.recentMetrics.length>0&&t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance Events"}),t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:t.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Component"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.recentMetrics.slice(0,10).map((e,a)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.component||e.componentType||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:void 0!==e.violations?`${e.violations} violations`:void 0!==e.score?`Score: ${e.score}`:void 0!==e.duration?`${Math.round(e.duration)}ms`:"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},a))})]})})})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monitoring Settings"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("label",{htmlFor:"refresh-interval",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refresh Interval (seconds)"}),t.jsxs("select",{id:"refresh-interval",value:o/1e3,onChange:e=>i(1e3*parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[t.jsx("option",{value:10,children:"10 seconds"}),t.jsx("option",{value:30,children:"30 seconds"}),t.jsx("option",{value:60,children:"1 minute"}),t.jsx("option",{value:300,children:"5 minutes"})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("label",{htmlFor:"alert-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Accessibility Alert Threshold"}),t.jsxs("select",{id:"alert-threshold",value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[t.jsx("option",{value:60,children:"60 (Strict)"}),t.jsx("option",{value:75,children:"75 (Moderate)"}),t.jsx("option",{value:85,children:"85 (Lenient)"}),t.jsx("option",{value:95,children:"95 (Very Lenient)"})]})]})]})]})]})]})})},he=({children:e})=>t.jsx(N,{children:e});const ge={},fe=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),n=a?.nonce||a?.getAttribute("nonce");s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ge)return;ge[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},ye=()=>{const{pathname:t}=k();return e.useEffect(()=>{window.scrollTo(0,0)},[t]),null};function xe(...e){return $(F(e))}const be=({size:e="default",className:a="",text:s="Loading...",showText:n=!0,variant:r="primary"})=>{const o={primary:"text-primary",secondary:"text-secondary",muted:"text-muted-foreground",white:"text-white"};return t.jsxs("div",{className:xe("flex flex-col items-center justify-center space-y-2",a),children:[t.jsx("div",{className:xe("animate-spin rounded-full border-2 border-current border-t-transparent",{sm:"w-4 h-4",default:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[e],o[r])}),n&&t.jsx("p",{className:xe("font-medium",{sm:"text-xs",default:"text-sm",lg:"text-base",xl:"text-lg"}[e],o[r]),children:s})]})},ve=e.lazy(()=>fe(()=>import("./index-PJ6BGmjC.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),we=e.lazy(()=>fe(()=>import("./index-enzZrNKo.js"),__vite__mapDeps([14,1,2,4,5,6,8,15,16,17,11,12,13]))),je=e.lazy(()=>fe(()=>import("./index-DzDKx5u1.js"),__vite__mapDeps([18,1,2,4,5,6,19,17,20,11,12,13]))),Ne=e.lazy(()=>fe(()=>import("./ValuationTool-Bnmmx6Fc.js"),__vite__mapDeps([21,1,2,12,20,5,3,4,16,17,19,11,13]))),ke=e.lazy(()=>fe(()=>import("./ValuationToolDocs-CI3WMo59.js"),__vite__mapDeps([22,1,2,12]))),Ce=e.lazy(()=>fe(()=>import("./valuation-tool-demo-DqwI37vw.js"),__vite__mapDeps([23,1,2,12]))),Se=e.lazy(()=>fe(()=>import("./PrivateAnalysis-KnMb8Fzp.js"),__vite__mapDeps([24,1,2,8,9,12,20,5,3,4,6,10,11,13]))),Ae=e.lazy(()=>fe(()=>import("./ValuationWorkbench-GHDJkoJp.js"),__vite__mapDeps([25,1,2,26,6,4,5,11,12,13]))),Ee=e.lazy(()=>fe(()=>import("./ModelLab-BwfE8wWK.js"),__vite__mapDeps([27,1,2,26,6,4,5,11,12,13]))),Ie=e.lazy(()=>fe(()=>import("./PortfolioManagement-Dz6v1IFm.js"),__vite__mapDeps([28,1,2,7,8,9,20,5,3,11,12,13]))),De=e.lazy(()=>fe(()=>import("./FinancialInputsDemo-B5QLT_hE.js"),__vite__mapDeps([29,1,2,15,4,5,16,17,19,20,11,12,13]))),Te=e.lazy(()=>fe(()=>import("./NotFound-DLI5cQs2.js"),__vite__mapDeps([30,1,2,4,5,11,12,13]))),Re=()=>t.jsx(C,{children:t.jsxs(Q,{children:[t.jsx(ye,{}),t.jsx(e.Suspense,{fallback:t.jsx(be,{}),children:t.jsxs(S,{children:[t.jsx(A,{path:"/",element:t.jsx(ve,{})}),t.jsx(A,{path:"/financial-model-workspace",element:t.jsx(ve,{})}),t.jsx(A,{path:"/real-time-market-data-center",element:t.jsx(we,{})}),t.jsx(A,{path:"/scenario-analysis-sensitivity-tools",element:t.jsx(je,{})}),t.jsx(A,{path:"/valuation-tool",element:t.jsx(Ne,{})}),t.jsx(A,{path:"/valuation-tool/docs",element:t.jsx(ke,{})}),t.jsx(A,{path:"/valuation-tool/demo",element:t.jsx(Ce,{})}),t.jsx(A,{path:"/valuation-workbench",element:t.jsx(Ae,{})}),t.jsx(A,{path:"/model-lab",element:t.jsx(Ee,{})}),t.jsx(A,{path:"/portfolio-management",element:t.jsx(Ie,{})}),t.jsx(A,{path:"/private-analysis",element:t.jsx(Se,{})}),t.jsx(A,{path:"/financial-inputs-demo",element:t.jsx(De,{})}),t.jsx(A,{path:"*",element:t.jsx(Te,{})})]})})]})});function Le(){const{isVisible:a,hideDashboard:s}=function(){const[t,a]=e.useState(!1),s=e.useCallback(()=>{a(e=>!e)},[]),n=e.useCallback(()=>{a(!0)},[]),r=e.useCallback(()=>{a(!1)},[]);return e.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&"P"===e.key&&(e.preventDefault(),s())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[s]),e.useEffect(()=>{},[]),{isVisible:t,toggleDashboard:s,showDashboard:n,hideDashboard:r}}(),[n,r]=e.useState(!1),[o,i]=e.useState({path:window.location.pathname,timestamp:(new Date).toISOString()}),[l,c]=e.useState(null),[d,u]=e.useState(null);e.useEffect(()=>{ee()},[]),e.useEffect(()=>{i({path:window.location.pathname,timestamp:(new Date).toISOString()})},[window.location.pathname]),e.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),r(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);return t.jsx(Q,{children:t.jsxs(he,{children:[t.jsx(Re,{}),t.jsx(pe,{isVisible:a,onClose:s}),t.jsx(q,{isOpen:n,onToggle:()=>r(e=>!e),currentContext:o,portfolioData:l,marketData:d}),t.jsx(J,{currentContext:o,portfolioData:l,marketData:d,onNavigate:e=>{window.location.href=e}}),!n&&t.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-20 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 z-40",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]})})}const Pe=_({name:"user",initialState:{name:"Guest",isAuthenticated:!1},reducers:{login:(e,t)=>{e.name=t.payload.name,e.isAuthenticated=!0},logout:e=>{e.name="Guest",e.isAuthenticated=!1}}}),{login:$e,logout:Fe}=Pe.actions,_e=M({reducer:{user:Pe.reducer}});let Me=null;function Oe(){return Me||(Me=function(){if("undefined"!=typeof window&&window.crypto){const e=new Uint8Array(16);return window.crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,e))}return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}()),Me}function qe(){const e=[];if("undefined"==typeof document)return e;const t=document.querySelectorAll("script:not([src]):not([nonce])");t.length>0&&e.push({type:"inline-script-without-nonce",count:t.length,elements:Array.from(t).slice(0,3)});const a=document.querySelectorAll("style:not([nonce])");a.length>5&&e.push({type:"excessive-inline-styles",count:a.length,recommendation:"Consider consolidating CSS-in-JS styles"});return document.querySelectorAll("script[src]").forEach(t=>{const a=t.getAttribute("src");!a||a.startsWith("https://")||a.startsWith("/")||e.push({type:"insecure-external-script",src:a,element:t})}),e}function Ue(){"undefined"!=typeof document&&document.addEventListener("securitypolicyviolation",e=>{!function(e){fetch("/api/csp-violations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>{})}({blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,originalPolicy:e.originalPolicy,disposition:e.disposition,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href})})}const Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ze(){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/sw.js";Ve?(!function(e){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{const a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Be(e)}).catch(()=>{We("Offline Mode","You're currently offline. Some features may be limited.","warning")})}(e),navigator.serviceWorker.ready.then(()=>{})):Be(e)})}}function Be(e){navigator.serviceWorker.register(e).then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;null!=t&&t.addEventListener("statechange",()=>{"installed"===t.state&&(navigator.serviceWorker.controller?function(){"Notification"in window&&"granted"===Notification.permission&&new Notification("FinanceAnalyst Pro Update Available",{body:"A new version is available. Refresh to update.",icon:"/assets/images/favicon.svg",badge:"/assets/images/favicon.svg",tag:"app-update"});We("Update Available","A new version of FinanceAnalyst Pro is ready. Refresh to update.","info")}():We("App Ready for Offline","FinanceAnalyst Pro is now available offline for core features.","success"))})})}).catch(e=>{})}function We(e,t,a="info"){const s=document.createElement("div");s.className=`\n    fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg\n    ${"success"===a?"bg-green-50 text-green-800 border border-green-200":""}\n    ${"warning"===a?"bg-yellow-50 text-yellow-800 border border-yellow-200":""}\n    ${"info"===a?"bg-blue-50 text-blue-800 border border-blue-200":""}\n    transition-all duration-300 transform translate-x-full\n  `,s.innerHTML=`\n    <div class="flex items-start">\n      <div class="flex-1">\n        <h4 class="font-medium text-sm">${e}</h4>\n        <p class="text-sm mt-1 opacity-90">${t}</p>\n      </div>\n      <button class="ml-3 text-sm opacity-60 hover:opacity-100" onclick="this.parentElement.parentElement.remove()">\n        âœ•\n      </button>\n    </div>\n  `,document.body.appendChild(s),requestAnimationFrame(()=>{s.style.transform="translateX(0)"}),setTimeout(()=>{s.parentElement&&(s.style.transform="translateX(100%)",setTimeout(()=>s.remove(),300))},5e3)}let He;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),He=e,function(){const e=document.createElement("div");e.className="\n    fixed bottom-4 left-4 right-4 p-4 bg-blue-600 text-white rounded-lg shadow-lg\n    flex items-center justify-between z-50 max-w-md mx-auto\n  ",e.innerHTML='\n    <div class="flex-1">\n      <h4 class="font-medium text-sm">Install FinanceAnalyst Pro</h4>\n      <p class="text-sm opacity-90 mt-1">Get faster access and offline features</p>\n    </div>\n    <div class="flex items-center space-x-2 ml-3">\n      <button id="install-btn" class="bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50">\n        Install\n      </button>\n      <button id="dismiss-btn" class="text-white opacity-60 hover:opacity-100 text-sm">\n        âœ•\n      </button>\n    </div>\n  ',document.body.appendChild(e),e.querySelector("#install-btn").addEventListener("click",async()=>{if(He){He.prompt();const{outcome:e}=await He.userChoice;He=null}e.remove()}),e.querySelector("#dismiss-btn").addEventListener("click",()=>{e.remove(),He=null})}()}),window.addEventListener("appinstalled",()=>{We("App Installed","FinanceAnalyst Pro has been installed successfully!","success"),He=null});const Ke=document.getElementById("root");E.createRoot(Ke).render(t.jsx(I,{store:_e,children:t.jsx(Le,{})}));!function(){const e=Oe();!function(e){if("undefined"==typeof document)return;document.querySelectorAll("script:not([src])").forEach(t=>{t.setAttribute("nonce",e)}),document.querySelectorAll("style").forEach(t=>{t.setAttribute("nonce",e)})}(e),Ue();const t=qe();t.length,setInterval(()=>{qe().length,t.length},3e4)}();(function(){try{const e=new URLSearchParams(window.location.search);return!0===navigator.webdriver||e.has("lhci")||e.has("ci")||e.has("audit")||"0"===e.get("pwa")}catch{return!0===navigator.webdriver}})()||(ze(),function(){function e(){const e=navigator.onLine;e?We("Connection Restored","You're back online. Syncing latest data...","success"):We("Connection Lost","You're now offline. Cached content will be used.","warning"),document.body.setAttribute("data-network-status",e?"online":"offline")}window.addEventListener("online",e),window.addEventListener("offline",e),e()}()),ee();export{Y as I,fe as _,z as a,V as b,K as c,H as d,W as e,B as f,xe as g,O as s,ue as t,me as u};
//# sourceMappingURL=index-C9H0q2Zr.js.map
