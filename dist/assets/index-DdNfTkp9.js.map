{"version":3,"mappings":"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","names":["secureApiClient","constructor","this","baseURL","client","axios","create","timeout","headers","interceptors","response","use","error","Promise","reject","get","url","config","post","data","put","delete","getQuote","symbol","toUpperCase","getHistoricalData","range","interval","params","getIntradayData","getBatchQuotes","symbols","map","s","getIncomeStatement","period","limit","getBalanceSheet","getCashFlowStatement","getFinancialRatios","getCompanyProfile","getPeerCompanies","getDCFValuation","getEarnings","getFREDData","seriesId","startDate","endDate","start_date","end_date","getEconomicIndicators","getTreasuryRates","getHealthStatus","getServiceHealth","getCacheStats","fetchMarketData","ticker","meta","timestamps","d","timestamp","prices","close","high","low","open","volume","source","fetchFinancialStatements","statement","Error","fetchPeerComparables","peers","AIFinancialAssistant","isOpen","onToggle","currentContext","portfolioData","marketData","messages","setMessages","useState","id","type","content","Date","suggestions","inputValue","setInputValue","isLoading","setIsLoading","isMinimized","setIsMinimized","messagesEndRef","useRef","inputRef","useEffect","current","scrollIntoView","behavior","handleSendMessage","async","message","trim","userMessage","now","toString","prev","context","previousMessages","slice","assistantMessage","charts","actions","fallbackMessage","quickActions","icon","PieChart","label","action","TrendingUp","AlertTriangle","Calculator","Target","BarChart3","jsx","className","children","jsxs","motion","div","initial","opacity","scale","y","animate","height","exit","Brain","onClick","Maximize2","Minimize2","X","Fragment","AnimatePresence","User","Bot","length","suggestion","index","handleSuggestionClick","toLocaleTimeString","style","animationDelay","ref","value","onChange","e","target","onKeyPress","key","shiftKey","preventDefault","placeholder","rows","minHeight","maxHeight","disabled","Send","CLICommandProcessor","commandHistory","aliases","p","md","calc","nav","help","clear","ls","ll","cd","commands","initializeCommands","updateContext","newContext","description","usage","category","handler","handleHelp","bind","portfolio","handlePortfolio","handleMarketData","quote","handleQuote","calculate","handleCalculate","dcf","handleDcf","navigate","handleNavigate","list","handleList","search","handleSearch","analyze","handleAnalyze","risk","handleRisk","export","handleExport","import","handleImport","status","handleStatus","handleClear","version","handleVersion","processCommand","input","parts","parseCommand","commandName","resolveAlias","command","success","result","args","flags","push","split","remaining","i","part","startsWith","substring","getSuggestions","partial","toLowerCase","Object","keys","filter","cmd","concat","alias","sort","getCommandArgumentSuggestions","_args","_flags","output","categories","entries","forEach","name","padEnd","page","query","join","dataType","filePath","detailed","watchlists","path","toLocaleString","handleLbo","handleWatch","_detailed","formatCurrency","currency","compact","isNaN","Intl","NumberFormat","notation","minimumFractionDigits","maximumFractionDigits","format","formatPercentage","decimals","toFixed","formatNumber","calculateDCFValuation","inputs","currentRevenue","revenueGrowthRate","fcfMargin","wacc","terminalGrowthRate","sharesOutstanding","totalDebt","cash","projectionYears","projectedRevenues","baseCashFlow","growthRates","years","cashFlows","currentCashFlow","Array","isArray","projectCashFlows","projectedFCFs","revenue","terminalValue","finalCashFlow","discountRate","calculateTerminalValue","pvOfCashFlows","reduce","npv","cashFlow","Math","pow","pvOfTerminalValue","enterpriseValue","equityValue","pricePerShare","calculateLBOReturns","purchasePrice","ebitda","debtMultiple","exitMultiple","exitYear","managementFeeRate","carriedInterestRate","equityInvestment","exitEbitda","exitEnterpriseValue","exitEquityValue","totalReturn","irr","moic","totalManagementFees","carriedInterest","max","managementFees","netReturn","calculateComparableMetrics","companyData","peerData","peerStats","metric","peerValues","peer","values","validValues","v","median","mean","min","a","b","floor","sum","count","calculateStatistics","company","peerStatistics","relativeValuation","marketCapPercentile","calculatePercentile","marketCap","peRatioRelative","peRatio","evEbitdaRelative","evToEbitda","priceToBookRelative","priceToBook","dataset","validDataset","PersistentCLI","onNavigate","isExpanded","setIsExpanded","setInput","setOutput","setCommandHistory","historyIndex","setHistoryIndex","setSuggestions","showSuggestions","setShowSuggestions","isProcessing","setIsProcessing","outputRef","cliProcessor","scrollTop","scrollHeight","focus","addOutput","useCallback","newOutput","formatTable","maxWidths","header","row","String","width","repeat","formatPortfolioData","totalValue","holdings","holding","padStart","weight","formatMarketData","getOutputTypeColor","role","tabIndex","onKeyDown","Terminal","stopPropagation","title","exportText","item","blob","Blob","URL","createObjectURL","document","createElement","href","download","toISOString","body","appendChild","click","removeChild","revokeObjectURL","exportOutput","Download","ChevronDown","ChevronUp","transition","duration","ease","newSuggestions","JSON","stringify","formatCommandOutput","navigation","handleCommand","newIndex","Zap","ErrorBoundary","React","Component","props","super","state","hasError","getDerivedStateFromError","_error","componentDidCatch","errorInfo","__ErrorBoundary","window","__COMPONENT_ERROR__","navigator","webdriver","URLSearchParams","location","has","__vitePreload","__VITE_PRELOAD__","then","mod","default","trackError","componentStack","catch","_","render","xmlns","viewBox","fill","stroke","strokeWidth","strokeMiterlimit","strokeLinecap","strokeLinejoin","Icon","size","color","accessibilityTester","options","rules","enabled","tags","runOnly","reporter","violations","lastTestResults","runTests","element","testOptions","results","axeCore","run","logResults","storeResults","testFinancialComponent","selector","componentType","querySelector","spreadsheet","chart","calculator","modal","testKeyboardNavigation","focusableElements","getFocusableElements","tabOrderIssues","previousTabIndex","tagName","position","issue","focusVisibilityIssues","styles","getComputedStyle","hasOutline","outline","hasBoxShadow","boxShadow","hasBackground","backgroundColor","focusableElementsCount","passed","testColorContrast","textElements","querySelectorAll","contrastIssues","textColor","contrast","calculateContrastRatio","fontSize","parseInt","fontWeight","requiredRatio","required","text","textContent","totalElements","testFormAccessibility","forms","formIssues","form","formIndex","issues","hasAssociatedLabel","hasRequiredIndication","getAttribute","hasErrorMessage","isFinancialInput","autocomplete","inputType","inputId","inputName","totalForms","generateReport","passes","incomplete","inapplicable","summary","totalChecks","score","calculateAccessibilityScore","violation","impact","helpUrl","nodes","recommendations","generateRecommendations","financialSpecific","getFinancialAccessibilityInsights","totalTests","impactWeights","critical","serious","moderate","minor","violationScore","maxPossibleScore","priority","solution","financialContext","insights","component","recommendation","from","ariaLabel","ariaLabelledby","closest","ariaRequired","requiredAttr","hasAttribute","hasRequiredText","hasRequiredTextIndicator","getAssociatedLabel","includes","ariaDescribedby","errorElement","getElementById","some","color1","color2","rgb1","parseColor","rgb2","l1","getLuminance","l2","match","r","g","rs","gs","bs","c","reportViolations","node","reportData","existingReports","parse","localStorage","getItem","splice","setItem","useFinancialAccessibility","accessibility","autoTest","testInterval","onViolations","onSuccess","setResults","setViolations","setScore","lastTestTime","setLastTestTime","elementRef","intervalRef","targetElement","testResults","reportPerformanceMetric","navResults","contrastResults","formResults","report","runAutoTest","setInterval","clearInterval","useAccessibility","testFinancialFeatures","keyboardNav","colorContrast","formAccessibility","PerformanceDashboard","isVisible","onClose","dashboardData","setDashboardData","refreshInterval","setRefreshInterval","isMonitoring","setIsMonitoring","alertThreshold","setAlertThreshold","alerts","startMonitoring","startAccessibilityMonitoring","stopMonitoring","stopAccessibilityMonitoring","clearAlerts","threshold","alertOnViolations","monitorInterval","setAlerts","monitor","alert","criticalViolations","useAccessibilityMonitor","refreshData","getPerformanceDashboardData","toggleMonitoring","initializePerformanceMonitoring","formatMetric","unit","round","webVitals","budgetViolations","performance","LCP","good","poor","FID","CLS","FCP","TTFB","getMetricStatus","statusColor","getStatusColor","overBy","currentScore","trends","scoreImproving","fillRule","clipRule","averageViolations","averageScore","recentMetrics","htmlFor","SEOProvider","HelmetProvider","ScrollToTop","pathname","useLocation","scrollTo","SHORTCUT_CONFIG","f1","useKeyboardShortcuts","handlers","normalizeKey","event","metaKey","ctrlKey","altKey","shouldHandleShortcut","isEditable","contentEditable","handleKeyDown","keyCombo","shortcut","addEventListener","removeEventListener","getAllShortcuts","getShortcutsByCategory","general","analysis","view","quick","formatKeyCombo","isShortcutAvailable","registerShortcut","normalizedKey","NATURAL_LANGUAGE_PATTERNS","pattern","COMMAND_REGISTRY","FileText","keywords","execute","_params","_context","Activity","parameters","optional","variable","scenarios","Search","Upload","LineChart","Save","Eye","settings","Settings","HelpCircle","CommandPalette","onExecuteCommand","recentCommands","userPreferences","_userPreferences","_className","setQuery","selectedIndex","setSelectedIndex","_commandHistory","listRef","dialogRef","openTimestampRef","monitoringRef","getMonitoring","api","_e","noop","trackEvent","searchCommands","executeCommand","getContextualCommands","learnFromUsage","commandUsage","setCommandUsage","saved","userLearning","setUserLearning","parseNaturalLanguage","_category","patterns","Boolean","confidence","normalizedQuery","nlResults","keyword","usageCount","activeTab","nlMatch","find","nl","isRecommended","contextual","frequentCommands","commandId","queries","lastUsed","getCommandCategories","commandRegistry","useCommandRegistry","searchResults","useMemo","mon","recentCount","handleExecuteCommand","focusableSelectors","focusables","el","first","last","active","activeElement","execStart","execEnd","openedAt","latencyOpenMs","execDurationMs","getCategoryColor","highlightMatch","regex","RegExp","replace","test","createPortal","Command","tip","CategoryIcon","Clock","Star","ArrowRight","Users","Globe","getCategoryIcon","CommandIcon","isSelected","delay","onFocus","idx","isNew","x","KeyboardShortcutsHelp","activeCategory","setActiveCategory","shortcuts","KeyboardIcon","shortcutCount","cn","flat","KeyboardShortcutsContext","createContext","useKeyboardShortcutsContext","useContext","KeyboardShortcutsProvider","useNavigate","showCommandPalette","setShowCommandPalette","showShortcutsHelp","setShowShortcutsHelp","setRecentCommands","setCurrentContext","setTimeout","CustomEvent","dispatchEvent","save","detail","tab","handlePostExecute","filtered","contextValue","updateCommandContext","ctx","Provider","LoadingSpinner","showText","variant","variantClasses","primary","secondary","muted","white","sm","lg","xl","FinancialModelWorkspace","lazy","RealTimeMarketDataCenter","ScenarioAnalysisSensitivityTools","ValuationTool","ValuationToolDocs","ValuationToolDemo","PrivateAnalysis","ValuationWorkbench","ModelLab","PortfolioManagement","ThesisCanvas","AdvancedCharting","MarketAnalysis","Reports","AIInsights","Analytics","AdvancedAnalytics","n","A","FinancialInputsDemo","Models","App","Data","Integrations","NotFound","MonitoringDebugPanel","isAutomatedEnv","RouteChangeTracker","trackPageView","Routes","BrowserRouter","Suspense","fallback","RouterRoutes","Route","hideDashboard","setIsVisible","toggleDashboard","showDashboard","usePerformanceDashboard","isAIAssistantOpen","setIsAIAssistantOpen","_setPortfolioData","_setMarketData","route","analysisSlice","createSlice","initialState","financialData","adjustedValues","lastCalculated","lbo","threeStatement","monteCarlo","iterations","confidenceLevel","correlationsEnabled","crossModelAnalysis","correlations","dcfLbo","dcfScenarios","lboScenarios","activeModel","isDirty","lastSaved","collaborators","isCollaborationEnabled","calculationTimes","savedAnalyses","reducers","setFinancialData","payload","setAdjustedValues","setDcfInputs","setDcfLoading","setDcfResults","setDcfError","setLboInputs","setLboLoading","setLboResults","setLboError","setThreeStatementInputs","setThreeStatementLoading","setThreeStatementResults","setThreeStatementError","setScenarios","addScenario","updateScenario","updates","findIndex","removeScenario","setScenariosLoading","setScenariosResults","setScenariosError","setMonteCarloSettings","setMonteCarloLoading","setMonteCarloResults","setMonteCarloError","setCorrelations","setActiveModel","saveAnalysis","models","existingIndex","loadAnalysis","deleteAnalysis","setCollaborators","enableCollaboration","disableCollaboration","recordCalculationTime","model","lastDuration","resetModel","resetAll","assign","getInitialState","selectFinancialData","selectActiveModel","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","ignoredActionsPaths","ignoredPaths","devTools","analysisReducer","userSlice","isAuthenticated","login","logout","store","user","currentNonce","validateCSPCompliance","inlineScripts","elements","inlineStyles","script","src","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","registration","installingWorker","installing","controller","Notification","permission","badge","tag","showInAppNotification","notification","innerHTML","requestAnimationFrame","transform","parentElement","remove","deferredPrompt","installBanner","prompt","outcome","userChoice","showInstallPrompt","container","createRoot","ProductionErrorBoundary","level","nonce","setAttribute","applyCspNonce","crypto","array","Uint8Array","getRandomValues","btoa","fromCharCode","apply","random","generateNonce","blockedURI","violatedDirective","originalPolicy","disposition","userAgent","fetch","method","initializeSecurity","isAutomatedEnvironment","origin","contentType","indexOf","ready","unregister","reload","checkValidServiceWorker","registerSW","updateOnlineStatus","isOnline","onLine","setupNetworkHandling","aO","Sentry","init","dsn","environment","integrations","browserTracingIntegration","replayIntegration","maskAllText","blockAllMedia","tracesSampleRate","replaysSessionSampleRate","replaysOnErrorSampleRate","beforeSend"],"ignoreList":[],"sources":["../../src/services/secureApiClient.js","../../src/components/AIAssistant/AIFinancialAssistant.jsx","../../src/services/cliCommandProcessor.js","../../src/utils/dataTransformation.js","../../src/components/CLI/PersistentCLI.jsx","../../src/components/ErrorBoundary.jsx","../../src/utils/accessibilityTesting.js","../../src/hooks/useAccessibility.js","../../src/components/PerformanceDashboard/PerformanceDashboard.jsx","../../src/components/SEO/SEOProvider.jsx","../../src/components/ScrollToTop.jsx","../../src/hooks/useKeyboardShortcuts.js","../../src/hooks/useCommandRegistry.js","../../src/components/CommandPalette/CommandPalette.jsx","../../src/components/ui/KeyboardShortcutsHelp.jsx","../../src/components/ui/KeyboardShortcutsProvider.jsx","../../src/components/ui/LoadingSpinner.jsx","../../src/Routes.jsx","../../src/App.jsx","../../src/hooks/usePerformanceDashboard.js","../../src/store/analysisStore.js","../../src/store/slices/userSlice.js","../../src/store/store.js","../../src/utils/securityHeaders.js","../../src/utils/serviceWorker.js","../../src/index.jsx"],"sourcesContent":["import axios from 'axios';\n\n/**\n * Secure API Client for FinanceAnalyst Pro\n * This client communicates with our secure backend instead of making direct API calls\n * All API keys are now handled securely on the server side\n */\nclass SecureApiClient {\n  constructor() {\n    this.baseURL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:3001/api';\n    this.client = axios.create({\n      baseURL: this.baseURL,\n      timeout: 15000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Response interceptor for error handling\n    this.client.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        console.error('API Error:', error.response?.data || error.message);\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // =============================================================================\n  // GENERIC HTTP METHODS (delegate to axios instance)\n  // =============================================================================\n\n  get(url, config = {}) {\n    return this.client.get(url, config);\n  }\n\n  post(url, data = {}, config = {}) {\n    return this.client.post(url, data, config);\n  }\n\n  put(url, data = {}, config = {}) {\n    return this.client.put(url, data, config);\n  }\n\n  delete(url, config = {}) {\n    return this.client.delete(url, config);\n  }\n\n  // =============================================================================\n  // MARKET DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get real-time quote for a symbol\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} Quote data\n   */\n  async getQuote(symbol) {\n    const response = await this.client.get(`/market-data/quote/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get historical price data\n   * @param {string} symbol - Stock symbol\n   * @param {string} range - Time range (1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y)\n   * @param {string} interval - Data interval (1m, 5m, 15m, 30m, 60m, 1d, etc.)\n   * @returns {Promise<Object>} Historical data\n   */\n  async getHistoricalData(symbol, range = '1mo', interval = '1d') {\n    const response = await this.client.get(`/market-data/historical/${symbol.toUpperCase()}`, {\n      params: { range, interval }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get intraday price data\n   * @param {string} symbol - Stock symbol\n   * @param {string} interval - Intraday interval (1min, 5min, 15min, 30min, 60min)\n   * @returns {Promise<Object>} Intraday data\n   */\n  async getIntradayData(symbol, interval = '5min') {\n    const response = await this.client.get(`/market-data/intraday/${symbol.toUpperCase()}`, {\n      params: { interval }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get quotes for multiple symbols\n   * @param {string[]} symbols - Array of stock symbols\n   * @returns {Promise<Object>} Batch quote data\n   */\n  async getBatchQuotes(symbols) {\n    const response = await this.client.post('/market-data/batch', {\n      symbols: symbols.map(s => s.toUpperCase())\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // FINANCIAL STATEMENTS METHODS\n  // =============================================================================\n\n  /**\n   * Get income statement\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Income statement data\n   */\n  async getIncomeStatement(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/income/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get balance sheet\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Balance sheet data\n   */\n  async getBalanceSheet(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/balance/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get cash flow statement\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Cash flow data\n   */\n  async getCashFlowStatement(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/cash-flow/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get financial ratios\n   * @param {string} symbol - Stock symbol\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods to retrieve\n   * @returns {Promise<Object>} Financial ratios data\n   */\n  async getFinancialRatios(symbol, period = 'annual', limit = 5) {\n    const response = await this.client.get(`/financial-statements/ratios/${symbol.toUpperCase()}`, {\n      params: { period, limit }\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // COMPANY DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get company profile and overview\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} Company profile data\n   */\n  async getCompanyProfile(symbol) {\n    const response = await this.client.get(`/company-data/profile/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get peer companies\n   * @param {string} symbol - Stock symbol\n   * @param {number} limit - Number of peers to retrieve\n   * @returns {Promise<Object>} Peer companies data\n   */\n  async getPeerCompanies(symbol, limit = 10) {\n    const response = await this.client.get(`/company-data/peers/${symbol.toUpperCase()}`, {\n      params: { limit }\n    });\n    return response.data;\n  }\n\n  /**\n   * Get DCF valuation\n   * @param {string} symbol - Stock symbol\n   * @returns {Promise<Object>} DCF valuation data\n   */\n  async getDCFValuation(symbol) {\n    const response = await this.client.get(`/company-data/dcf/${symbol.toUpperCase()}`);\n    return response.data;\n  }\n\n  /**\n   * Get earnings data\n   * @param {string} symbol - Stock symbol\n   * @param {number} limit - Number of earnings periods to retrieve\n   * @returns {Promise<Object>} Earnings data\n   */\n  async getEarnings(symbol, limit = 8) {\n    const response = await this.client.get(`/company-data/earnings/${symbol.toUpperCase()}`, {\n      params: { limit }\n    });\n    return response.data;\n  }\n\n  // =============================================================================\n  // ECONOMIC DATA METHODS\n  // =============================================================================\n\n  /**\n   * Get FRED economic data\n   * @param {string} seriesId - FRED series ID\n   * @param {number} limit - Number of observations to retrieve\n   * @param {string} startDate - Start date (ISO format)\n   * @param {string} endDate - End date (ISO format)\n   * @returns {Promise<Object>} Economic data\n   */\n  async getFREDData(seriesId, limit = 100, startDate = null, endDate = null) {\n    const params = { limit };\n    if (startDate) params.start_date = startDate;\n    if (endDate) params.end_date = endDate;\n\n    const response = await this.client.get(`/economic-data/fred/${seriesId.toUpperCase()}`, {\n      params\n    });\n    return response.data;\n  }\n\n  /**\n   * Get popular economic indicators\n   * @returns {Promise<Object>} Economic indicators data\n   */\n  async getEconomicIndicators() {\n    const response = await this.client.get('/economic-data/indicators');\n    return response.data;\n  }\n\n  /**\n   * Get treasury yield curve data\n   * @returns {Promise<Object>} Treasury rates data\n   */\n  async getTreasuryRates() {\n    const response = await this.client.get('/economic-data/treasury-rates');\n    return response.data;\n  }\n\n  // =============================================================================\n  // HEALTH AND STATUS METHODS\n  // =============================================================================\n\n  /**\n   * Check backend health\n   * @returns {Promise<Object>} Health status\n   */\n  async getHealthStatus() {\n    const response = await this.client.get('/health');\n    return response.data;\n  }\n\n  /**\n   * Check service health (API providers)\n   * @returns {Promise<Object>} Service health status\n   */\n  async getServiceHealth() {\n    const response = await this.client.get('/health/services');\n    return response.data;\n  }\n\n  /**\n   * Get cache statistics\n   * @returns {Promise<Object>} Cache statistics\n   */\n  async getCacheStats() {\n    const response = await this.client.get('/health/cache');\n    return response.data;\n  }\n\n  // =============================================================================\n  // COMPATIBILITY METHODS (for existing frontend code)\n  // =============================================================================\n\n  /**\n   * Fetch market data (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @param {string} range - Time range\n   * @returns {Promise<Object>} Market data in expected format\n   */\n  async fetchMarketData(ticker, range = '1y') {\n    try {\n      const data = await this.getHistoricalData(ticker, range);\n\n      // Transform to match expected format from old API service\n      return {\n        symbol: data.symbol,\n        range: data.range,\n        data: data.data,\n        meta: data.meta,\n        timestamps: data.data.map(d => d.timestamp),\n        prices: {\n          close: data.data.map(d => d.close),\n          high: data.data.map(d => d.high),\n          low: data.data.map(d => d.low),\n          open: data.data.map(d => d.open)\n        },\n        volume: data.data.map(d => d.volume),\n        source: data.source\n      };\n    } catch (error) {\n      console.error('Failed to fetch market data:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch financial statements (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @param {string} statement - Statement type\n   * @param {string} period - 'annual' or 'quarter'\n   * @param {number} limit - Number of periods\n   * @returns {Promise<Object>} Financial statement data\n   */\n  async fetchFinancialStatements(ticker, statement = 'income-statement', period = 'annual', limit = 5) {\n    try {\n      let data;\n\n      switch (statement) {\n        case 'income-statement':\n          data = await this.getIncomeStatement(ticker, period, limit);\n          break;\n        case 'balance-sheet-statement':\n          data = await this.getBalanceSheet(ticker, period, limit);\n          break;\n        case 'cash-flow-statement':\n          data = await this.getCashFlowStatement(ticker, period, limit);\n          break;\n        default:\n          throw new Error(`Unsupported statement type: ${statement}`);\n      }\n\n      return data.data; // Return just the data array for compatibility\n    } catch (error) {\n      console.error('Failed to fetch financial statements:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Fetch peer comparables (compatibility method)\n   * @param {string} ticker - Stock symbol\n   * @returns {Promise<Array>} Peer companies array\n   */\n  async fetchPeerComparables(ticker) {\n    try {\n      const data = await this.getPeerCompanies(ticker);\n      return data.peers;\n    } catch (error) {\n      console.error('Failed to fetch peer comparables:', error);\n      throw error;\n    }\n  }\n}\n\n// Export singleton instance\nexport default new SecureApiClient();\n","/**\n * AI Financial Assistant Component\n * Conversational AI assistant for financial analysis and portfolio management\n */\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Send,\n  Bot,\n  User,\n  TrendingUp,\n  AlertTriangle,\n  PieChart,\n  BarChart3,\n  Calculator,\n  Brain,\n  Target,\n  Minimize2,\n  Maximize2,\n  X\n} from 'lucide-react';\nimport React, { useState, useRef, useEffect } from 'react';\n\nimport secureApiClient from '../../services/secureApiClient';\n\nconst AIFinancialAssistant = ({\n  isOpen = false,\n  onToggle,\n  currentContext = {},\n  portfolioData = null,\n  marketData = null\n}) => {\n  const [messages, setMessages] = useState([\n    {\n      id: '1',\n      type: 'assistant',\n      content: \"Hi! I'm your AI Financial Assistant. I can help you with portfolio analysis, market insights, risk assessment, and financial planning. What would you like to explore today?\",\n      timestamp: new Date(),\n      suggestions: [\n        'Analyze my portfolio performance',\n        'What are the current market trends?',\n        'Calculate portfolio risk metrics',\n        'Suggest portfolio rebalancing'\n      ]\n    }\n  ]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async(message = inputValue) => {\n    if (!message.trim()) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: message,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setIsLoading(true);\n\n    try {\n      // Send message to AI assistant backend\n      const response = await secureApiClient.post('/ai-assistant/chat', {\n        message,\n        context: {\n          ...currentContext,\n          portfolioData,\n          marketData,\n          previousMessages: messages.slice(-5) // Send last 5 messages for context\n        }\n      });\n\n      const assistantMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'assistant',\n        content: response.data.response,\n        timestamp: new Date(),\n        suggestions: response.data.suggestions || [],\n        charts: response.data.charts || [],\n        actions: response.data.actions || []\n      };\n\n      setMessages(prev => [...prev, assistantMessage]);\n    } catch (error) {\n      console.error('AI Assistant error:', error);\n\n      // Fallback response\n      const fallbackMessage = {\n        id: (Date.now() + 1).toString(),\n        type: 'assistant',\n        content: \"I'm having trouble processing your request right now. This could be due to high demand or a temporary service issue. Please try again in a moment, or let me help you with basic portfolio analysis using the available data.\",\n        timestamp: new Date(),\n        suggestions: [\n          'Show portfolio overview',\n          'Calculate basic metrics',\n          'View market data',\n          'Help with analysis'\n        ]\n      };\n\n      setMessages(prev => [...prev, fallbackMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSuggestionClick = (suggestion) => {\n    handleSendMessage(suggestion);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const quickActions = [\n    { icon: PieChart, label: 'Portfolio Analysis', action: 'Analyze my current portfolio allocation and performance' },\n    { icon: TrendingUp, label: 'Market Insights', action: 'What are the current market trends and opportunities?' },\n    { icon: AlertTriangle, label: 'Risk Assessment', action: 'Assess the risk profile of my portfolio' },\n    { icon: Calculator, label: 'Financial Planning', action: 'Help me with financial planning and projections' },\n    { icon: Target, label: 'Goal Planning', action: 'Help me set and track financial goals' },\n    { icon: BarChart3, label: 'Performance Review', action: 'Review my portfolio performance over time' }\n  ];\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9, y: 20 }}\n        animate={{\n          opacity: 1,\n          scale: 1,\n          y: 0,\n          height: isMinimized ? 'auto' : '80vh'\n        }}\n        exit={{ opacity: 0, scale: 0.9, y: 20 }}\n        className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl flex flex-col\"\n      >\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"bg-white bg-opacity-20 p-2 rounded-lg\">\n              <Brain className=\"w-6 h-6\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-bold\">AI Financial Assistant</h2>\n              <p className=\"text-blue-100 text-sm\">Powered by advanced financial AI</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setIsMinimized(!isMinimized)}\n              className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\n            >\n              {isMinimized ? <Maximize2 className=\"w-5 h-5\" /> : <Minimize2 className=\"w-5 h-5\" />}\n            </button>\n            <button\n              onClick={onToggle}\n              className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {!isMinimized && (\n          <>\n            {/* Messages Area */}\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n              <AnimatePresence>\n                {messages.map((message) => (\n                  <motion.div\n                    key={message.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -10 }}\n                    className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                  >\n                    <div className={`max-w-3xl flex ${message.type === 'user' ? 'flex-row-reverse' : 'flex-row'} items-start space-x-3`}>\n                      <div\n                        className={`p-2 rounded-lg ${\n                          message.type === 'user'\n                            ? 'bg-blue-100 text-blue-600'\n                            : 'bg-purple-100 text-purple-600'\n                        }`}\n                      >\n                        {message.type === 'user' ? <User className=\"w-5 h-5\" /> : <Bot className=\"w-5 h-5\" />}\n                      </div>\n                      <div\n                        className={`px-4 py-3 rounded-2xl ${\n                          message.type === 'user'\n                            ? 'bg-blue-600 text-white ml-3'\n                            : 'bg-gray-100 text-gray-800 mr-3'\n                        }`}\n                      >\n                        <p className=\"whitespace-pre-wrap\">{message.content}</p>\n\n                        {/* Suggestions */}\n                        {message.suggestions && message.suggestions.length > 0 && (\n                          <div className=\"mt-3 space-y-2\">\n                            <p className=\"text-sm font-medium opacity-75\">Suggestions:</p>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {message.suggestions.map((suggestion, index) => (\n                                <button\n                                  key={index}\n                                  onClick={() => handleSuggestionClick(suggestion)}\n                                  className=\"text-xs px-3 py-1 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all\"\n                                >\n                                  {suggestion}\n                                </button>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n\n                        {/* Charts placeholder */}\n                        {message.charts && message.charts.length > 0 && (\n                          <div className=\"mt-3 p-3 bg-white bg-opacity-10 rounded-lg\">\n                            <p className=\"text-sm font-medium mb-2\"> Charts & Analysis</p>\n                            <div className=\"text-sm opacity-75\">\n                              Interactive charts would be rendered here based on the analysis\n                            </div>\n                          </div>\n                        )}\n\n                        <div className=\"text-xs opacity-50 mt-2\">\n                          {message.timestamp.toLocaleTimeString()}\n                        </div>\n                      </div>\n                    </div>\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n\n              {isLoading && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  className=\"flex justify-start\"\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"p-2 rounded-lg bg-purple-100 text-purple-600\">\n                      <Bot className=\"w-5 h-5\" />\n                    </div>\n                    <div className=\"px-4 py-3 rounded-2xl bg-gray-100\">\n                      <div className=\"flex space-x-1\">\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" />\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }} />\n                        <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }} />\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              )}\n              <div ref={messagesEndRef} />\n            </div>\n\n            {/* Quick Actions */}\n            {messages.length === 1 && (\n              <div className=\"px-6 py-4 border-t border-gray-200\">\n                <p className=\"text-sm font-medium text-gray-700 mb-3\">Quick Actions:</p>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                  {quickActions.map((action, index) => (\n                    <button\n                      key={index}\n                      onClick={() => handleSendMessage(action.action)}\n                      className=\"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 text-left\"\n                    >\n                      <action.icon className=\"w-5 h-5 text-gray-600\" />\n                      <span className=\"text-sm font-medium text-gray-700\">{action.label}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Input Area */}\n            <div className=\"p-6 border-t border-gray-200\">\n              <div className=\"flex space-x-3\">\n                <div className=\"flex-1 relative\">\n                  <textarea\n                    ref={inputRef}\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Ask me anything about your portfolio, market analysis, or financial planning...\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                    rows={1}\n                    style={{ minHeight: '48px', maxHeight: '120px' }}\n                  />\n                </div>\n                <button\n                  onClick={() => handleSendMessage()}\n                  disabled={!inputValue.trim() || isLoading}\n                  className=\"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2\"\n                >\n                  <Send className=\"w-5 h-5\" />\n                  <span>Send</span>\n                </button>\n              </div>\n            </div>\n          </>\n        )}\n\n        {isMinimized && (\n          <div className=\"p-4 border-t border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-gray-600\">AI Assistant is minimized</p>\n              <div className=\"flex space-x-2\">\n                <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\n                <span className=\"text-xs text-gray-500\">Online</span>\n              </div>\n            </div>\n          </div>\n        )}\n      </motion.div>\n    </div>\n  );\n};\n\nexport default AIFinancialAssistant;\n","/**\n * CLI Command Processor\n * Core service for processing financial commands in the persistent CLI\n */\n\nimport _secureApiClient from './secureApiClient';\n\nexport class CLICommandProcessor {\n  constructor() {\n    this.context = {};\n    this.commandHistory = [];\n    this.aliases = {\n      'p': 'portfolio',\n      'md': 'market-data',\n      'calc': 'calculate',\n      'nav': 'navigate',\n      'help': 'help',\n      'clear': 'clear',\n      'ls': 'list',\n      'll': 'list --detailed',\n      'cd': 'navigate'\n    };\n\n    this.commands = this.initializeCommands();\n  }\n\n  updateContext(newContext) {\n    this.context = { ...this.context, ...newContext };\n  }\n\n  initializeCommands() {\n    return {\n      // Help and Information\n      help: {\n        description: 'Show available commands and usage',\n        usage: 'help [command]',\n        category: 'system',\n        handler: this.handleHelp.bind(this)\n      },\n\n      // Portfolio Management\n      portfolio: {\n        description: 'Portfolio management operations',\n        usage: 'portfolio [show|analyze|rebalance|risk|holdings]',\n        category: 'portfolio',\n        handler: this.handlePortfolio.bind(this)\n      },\n\n      // Market Data\n      'market-data': {\n        description: 'Fetch market data and quotes',\n        usage: 'market-data [symbol] [--type=quote|chart|news]',\n        category: 'market',\n        handler: this.handleMarketData.bind(this)\n      },\n\n      quote: {\n        description: 'Get stock quote',\n        usage: 'quote <symbol>',\n        category: 'market',\n        handler: this.handleQuote.bind(this)\n      },\n\n      // Financial Calculations\n      calculate: {\n        description: 'Financial calculations',\n        usage: 'calculate [dcf|wacc|beta|sharpe] [parameters]',\n        category: 'calculations',\n        handler: this.handleCalculate.bind(this)\n      },\n\n      dcf: {\n        description: 'DCF valuation calculation',\n        usage: 'dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]',\n        category: 'calculations',\n        handler: this.handleDcf.bind(this)\n      },\n\n      // Navigation\n      navigate: {\n        description: 'Navigate to different pages/sections',\n        usage: 'navigate <page> [workspace|market-data|portfolio|analysis|private-analysis]',\n        category: 'navigation',\n        handler: this.handleNavigate.bind(this)\n      },\n\n      // Data Management\n      list: {\n        description: 'List portfolio holdings, watchlist, or other data',\n        usage: 'list [holdings|watchlist|portfolios] [--detailed]',\n        category: 'data',\n        handler: this.handleList.bind(this)\n      },\n\n      search: {\n        description: 'Search stocks, funds, or financial instruments',\n        usage: 'search <query> [--type=stocks|etf|mutual-funds]',\n        category: 'data',\n        handler: this.handleSearch.bind(this)\n      },\n\n      // Analysis Tools\n      analyze: {\n        description: 'Perform financial analysis',\n        usage: 'analyze <symbol|portfolio> [--type=fundamental|technical|risk]',\n        category: 'analysis',\n        handler: this.handleAnalyze.bind(this)\n      },\n\n      risk: {\n        description: 'Risk analysis and metrics',\n        usage: 'risk [portfolio|symbol] [--metric=var|sharpe|beta|correlation]',\n        category: 'analysis',\n        handler: this.handleRisk.bind(this)\n      },\n\n      // Utility Commands\n      export: {\n        description: 'Export data to various formats',\n        usage: 'export <data-type> [--format=csv|json|xlsx] [--output=filename]',\n        category: 'utility',\n        handler: this.handleExport.bind(this)\n      },\n\n      import: {\n        description: 'Import portfolio or transaction data',\n        usage: 'import <file-path> [--type=portfolio|transactions]',\n        category: 'utility',\n        handler: this.handleImport.bind(this)\n      },\n\n      // System Commands\n      status: {\n        description: 'Show system and data connection status',\n        usage: 'status [--detailed]',\n        category: 'system',\n        handler: this.handleStatus.bind(this)\n      },\n\n      clear: {\n        description: 'Clear the terminal output',\n        usage: 'clear',\n        category: 'system',\n        handler: this.handleClear.bind(this)\n      },\n\n      version: {\n        description: 'Show application version and build info',\n        usage: 'version',\n        category: 'system',\n        handler: this.handleVersion.bind(this)\n      }\n    };\n  }\n\n  async processCommand(input) {\n    const parts = this.parseCommand(input);\n    const commandName = this.resolveAlias(parts.command);\n    const command = this.commands[commandName];\n\n    if (!command) {\n      return {\n        success: false,\n        error: `Command '${commandName}' not found. Type 'help' for available commands.`\n      };\n    }\n\n    try {\n      const result = await command.handler(parts.args, parts.flags);\n      this.commandHistory.push({ command: input, timestamp: new Date(), result });\n      return result;\n    } catch (error) {\n      return {\n        success: false,\n        error: `Error executing '${commandName}': ${error.message}`\n      };\n    }\n  }\n\n  parseCommand(input) {\n    const parts = input.trim().split(/\\s+/);\n    const command = parts[0];\n    const remaining = parts.slice(1);\n\n    const args = [];\n    const flags = {};\n\n    for (let i = 0; i < remaining.length; i++) {\n      const part = remaining[i];\n      if (part.startsWith('--')) {\n        const [key, value] = part.substring(2).split('=');\n        flags[key] = value || true;\n      } else if (part.startsWith('-')) {\n        flags[part.substring(1)] = true;\n      } else {\n        args.push(part);\n      }\n    }\n\n    return { command, args, flags };\n  }\n\n  resolveAlias(command) {\n    return this.aliases[command] || command;\n  }\n\n  getSuggestions(input) {\n    const parts = input.trim().split(/\\s+/);\n    const partial = parts[0].toLowerCase();\n\n    if (parts.length === 1) {\n      // Command suggestions\n      return Object.keys(this.commands)\n        .filter(cmd => cmd.startsWith(partial))\n        .concat(Object.keys(this.aliases).filter(alias => alias.startsWith(partial)))\n        .sort();\n    }\n\n    // Argument suggestions based on command\n    const command = this.resolveAlias(parts[0]);\n    return this.getCommandArgumentSuggestions(command, parts.slice(1));\n  }\n\n  getCommandArgumentSuggestions(command, _args) {\n    const suggestions = [];\n\n    switch (command) {\n      case 'navigate':\n        suggestions.push('workspace', 'market-data', 'portfolio', 'analysis', 'private-analysis', 'valuation-workbench', 'model-lab');\n        break;\n      case 'portfolio':\n        suggestions.push('show', 'analyze', 'rebalance', 'risk', 'holdings', 'performance');\n        break;\n      case 'calculate':\n        suggestions.push('dcf', 'wacc', 'beta', 'sharpe', 'sortino', 'var');\n        break;\n      case 'list':\n        suggestions.push('holdings', 'watchlist', 'portfolios', 'transactions');\n        break;\n      case 'analyze':\n        suggestions.push('--type=fundamental', '--type=technical', '--type=risk');\n        break;\n      case 'export':\n        suggestions.push('--format=csv', '--format=json', '--format=xlsx');\n        break;\n    }\n\n    return suggestions;\n  }\n\n  // Command Handlers\n  async handleHelp(args, _flags) {\n    if (args.length > 0) {\n      const commandName = this.resolveAlias(args[0]);\n      const command = this.commands[commandName];\n      if (command) {\n        return {\n          success: true,\n          output: `${commandName}: ${command.description}\\nUsage: ${command.usage}\\nCategory: ${command.category}`,\n          type: 'info'\n        };\n      } else {\n        return {\n          success: false,\n          output: `Command '${commandName}' not found.`,\n          type: 'error'\n        };\n      }\n    }\n\n    let output = ' AVAILABLE COMMANDS\\n';\n    output += '\\n\\n';\n\n    const categories = {};\n    Object.entries(this.commands).forEach(([name, cmd]) => {\n      if (!categories[cmd.category]) categories[cmd.category] = [];\n      categories[cmd.category].push({ name, ...cmd });\n    });\n\n    Object.entries(categories).forEach(([category, commands]) => {\n      output += `${category.toUpperCase()}\\n`;\n      commands.forEach(cmd => {\n        output += `  ${cmd.name.padEnd(15)} ${cmd.description}\\n`;\n      });\n      output += '\\n';\n    });\n\n    return { success: true, output, type: 'info' };\n  }\n\n  async handlePortfolio(args, _flags) {\n    const action = args[0] || 'show';\n    return {\n      success: true,\n      output: `Portfolio ${action} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleMarketData(args, _flags) {\n    const symbol = args[0] || 'SPY';\n    return {\n      success: true,\n      output: `Market data for ${symbol} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleQuote(args, _flags) {\n    const symbol = args[0];\n    if (!symbol) {\n      return {\n        success: false,\n        output: 'Usage: quote <symbol>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Quote for ${symbol} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleCalculate(args, _flags) {\n    const calcType = args[0] || 'dcf';\n    return {\n      success: true,\n      output: `Calculate ${calcType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleDcf(_args, _flags) {\n    return {\n      success: true,\n      output: 'DCF calculation command is not implemented yet.',\n      type: 'info'\n    };\n  }\n\n  async handleNavigate(args, _flags) {\n    const page = args[0];\n    if (!page) {\n      return {\n        success: false,\n        output: 'Usage: navigate <page>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Navigate to ${page} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleList(args, _flags) {\n    const listType = args[0] || 'holdings';\n    return {\n      success: true,\n      output: `List ${listType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleSearch(args, _flags) {\n    const query = args.join(' ');\n    if (!query) {\n      return {\n        success: false,\n        output: 'Usage: search <query>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Search for \"${query}\" command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleAnalyze(args, _flags) {\n    const target = args[0];\n    if (!target) {\n      return {\n        success: false,\n        output: 'Usage: analyze <symbol|portfolio>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Analyze ${target} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleRisk(args, _flags) {\n    const target = args[0] || 'portfolio';\n    return {\n      success: true,\n      output: `Risk analysis for ${target} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleExport(args, _flags) {\n    const dataType = args[0];\n    if (!dataType) {\n      return {\n        success: false,\n        output: 'Usage: export <data-type>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Export ${dataType} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleImport(args, _flags) {\n    const filePath = args[0];\n    if (!filePath) {\n      return {\n        success: false,\n        output: 'Usage: import <file-path>',\n        type: 'error'\n      };\n    }\n    return {\n      success: true,\n      output: `Import from ${filePath} command is not implemented yet.`,\n      type: 'info'\n    };\n  }\n\n  async handleStatus(_args, flags) {\n    const detailed = flags?.detailed || flags?.d;\n\n    let output = ' SYSTEM STATUS\\n';\n    output += '\\n';\n    output += 'Backend API:        Unknown\\n';\n    output += 'Cache:              Unknown\\n';\n    output += 'Watchlists:        ' + (this.context.watchlists ? ' Available' : ' Not available') + '\\n';\n    output += 'Portfolio Data:    ' + (this.context.portfolioData ? ' Loaded' : ' Not loaded') + '\\n';\n    output += 'AI Assistant:       Online\\n';\n\n    if (detailed) {\n      output += '\\nDETAILED STATUS:\\n';\n      output += `Commands in history: ${this.commandHistory.length}\\n`;\n      output += `Current page: ${this.context.currentContext?.path || 'Unknown'}\\n`;\n      output += `Session start: ${new Date().toLocaleString()}\\n`;\n    }\n\n    return {\n      success: true,\n      output,\n      type: 'info'\n    };\n  }\n\n  async handleLbo(_args, _flags) {\n    return {\n      success: true,\n      output: 'LBO analysis command is not implemented yet.',\n      type: 'info'\n    };\n  }\n\n  async handleWatch(_args, _flags) {\n    const _detailed = _flags?.detailed || _flags?.d;\n\n    let output = ' SYSTEM STATUS\\n';\n    output += '\\n';\n    output += 'Backend API:        Unknown\\n';\n    output += 'Cache:              Unknown\\n';\n    output += 'Watchlists:        ' + (this.context.watchlists ? ' Available' : ' Not available') + '\\n';\n    output += 'Portfolio Data:    ' + (this.context.portfolioData ? ' Loaded' : ' Not loaded') + '\\n';\n    output += 'AI Assistant:       Online\\n';\n\n    if (_detailed) {\n      output += '\\nDETAILED STATUS:\\n';\n      output += `Commands in history: ${this.commandHistory.length}\\n`;\n      output += `Current page: ${this.context.currentContext?.path || 'Unknown'}\\n`;\n      output += `Session start: ${new Date().toLocaleString()}\\n`;\n    }\n\n    return {\n      success: true,\n      output,\n      type: 'info'\n    };\n  }\n\n  async handleClear(_args, _flags) {\n    return {\n      success: true,\n      output: '',\n      type: 'clear'\n    };\n  }\n\n  async handleVersion(_args, _flags) {\n    return {\n      success: true,\n      output: 'FinanceAnalyst Pro v1.0.0\\nBuild: 2025.08.18\\nNode.js CLI Interface\\nSecure Backend API Integration',\n      type: 'info'\n    };\n  }\n}\n\nexport default CLICommandProcessor;\n","// Data transformation utilities for financial calculations\n\nexport const formatCurrency = (value, currency = 'USD', compact = false) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency,\n    notation: compact ? 'compact' : 'standard',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2\n  });\n\n  return formatter.format(value);\n};\n\nexport const formatPercentage = (value, decimals = 1) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n  return `${(value * 100).toFixed(decimals)}%`;\n};\n\nexport const formatNumber = (value, decimals = 2, compact = false) => {\n  if (value === null || value === undefined || isNaN(value)) return 'N/A';\n\n  const formatter = new Intl.NumberFormat('en-US', {\n    notation: compact ? 'compact' : 'standard',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: decimals\n  });\n\n  return formatter.format(value);\n};\n\nexport const calculateCAGR = (beginningValue, endingValue, years) => {\n  if (beginningValue <= 0 || endingValue <= 0 || years <= 0) return 0;\n  return Math.pow(endingValue / beginningValue, 1 / years) - 1;\n};\n\nexport const calculateNPV = (cashFlows, discountRate) => {\n  return cashFlows.reduce((npv, cashFlow, index) => {\n    return npv + cashFlow / Math.pow(1 + discountRate, index + 1);\n  }, 0);\n};\n\nexport const calculateIRR = (cashFlows, guess = 0.1) => {\n  // Handle edge cases\n  if (!cashFlows || cashFlows.length === 0 || cashFlows.length === 1) {\n    return 0;\n  }\n\n  const maxIterations = 100;\n  const tolerance = 1e-6;\n\n  let rate = guess;\n\n  for (let i = 0; i < maxIterations; i++) {\n    let npv = cashFlows[0]; // Initial investment (negative)\n    let derivative = 0;\n\n    for (let j = 1; j < cashFlows.length; j++) {\n      const factor = Math.pow(1 + rate, j);\n      npv += cashFlows[j] / factor;\n      derivative -= (j * cashFlows[j]) / (factor * (1 + rate));\n    }\n\n    if (Math.abs(npv) < tolerance) {\n      return rate;\n    }\n\n    if (Math.abs(derivative) < tolerance) {\n      break; // Avoid division by zero\n    }\n\n    rate = rate - npv / derivative;\n  }\n\n  return rate;\n};\n\nexport const calculateWACC = (costOfEquity, costOfDebt, taxRate, debtRatio) => {\n  const equityWeight = 1 - debtRatio;\n  return costOfEquity * equityWeight + costOfDebt * debtRatio * (1 - taxRate);\n};\n\nexport const calculateTerminalValue = (finalCashFlow, terminalGrowthRate, discountRate) => {\n  return (finalCashFlow * (1 + terminalGrowthRate)) / (discountRate - terminalGrowthRate);\n};\n\nexport const projectCashFlows = (baseCashFlow, growthRates, years = 5) => {\n  const cashFlows = [];\n  let currentCashFlow = baseCashFlow;\n\n  for (let i = 0; i < years; i++) {\n    const growthRate = Array.isArray(growthRates)\n      ? growthRates[i] || growthRates[growthRates.length - 1]\n      : growthRates;\n    currentCashFlow *= 1 + growthRate;\n    cashFlows.push(currentCashFlow);\n  }\n\n  return cashFlows;\n};\n\nexport const calculateDCFValuation = inputs => {\n  const {\n    currentRevenue,\n    revenueGrowthRate,\n    fcfMargin,\n    wacc,\n    terminalGrowthRate,\n    sharesOutstanding,\n    totalDebt,\n    cash,\n    projectionYears = 5\n  } = inputs;\n\n  // Project revenues\n  const projectedRevenues = projectCashFlows(currentRevenue, revenueGrowthRate, projectionYears);\n\n  // Calculate free cash flows\n  const projectedFCFs = projectedRevenues.map(revenue => revenue * fcfMargin);\n\n  // Calculate terminal value\n  const terminalValue = calculateTerminalValue(\n    projectedFCFs[projectedFCFs.length - 1],\n    terminalGrowthRate,\n    wacc\n  );\n\n  // Calculate present values\n  const pvOfCashFlows = calculateNPV(projectedFCFs, wacc);\n  const pvOfTerminalValue = terminalValue / Math.pow(1 + wacc, projectionYears);\n\n  // Calculate enterprise and equity value\n  const enterpriseValue = pvOfCashFlows + pvOfTerminalValue;\n  const equityValue = enterpriseValue - totalDebt + cash;\n  const pricePerShare = equityValue / sharesOutstanding;\n\n  return {\n    enterpriseValue,\n    equityValue,\n    pricePerShare,\n    pvOfCashFlows,\n    pvOfTerminalValue,\n    terminalValue,\n    projectedRevenues,\n    projectedFCFs,\n    wacc,\n    terminalGrowthRate\n  };\n};\n\nexport const calculateLBOReturns = inputs => {\n  const {\n    purchasePrice,\n    ebitda,\n    debtMultiple = 5,\n    exitMultiple,\n    exitYear = 5,\n    managementFeeRate = 0.02,\n    carriedInterestRate = 0.2\n  } = inputs;\n\n  // Calculate purchase structure\n  const totalDebt = ebitda * debtMultiple;\n  const equityInvestment = purchasePrice - totalDebt;\n\n  // Project EBITDA growth (simplified)\n  const ebitdaGrowthRate = 0.05; // 5% annual growth assumption\n  const exitEbitda = ebitda * Math.pow(1 + ebitdaGrowthRate, exitYear);\n\n  // Calculate exit value\n  const exitEnterpriseValue = exitEbitda * exitMultiple;\n  const remainingDebt = totalDebt * 0.5; // Assume 50% debt paydown\n  const exitEquityValue = exitEnterpriseValue - remainingDebt;\n\n  // Calculate returns\n  const totalReturn = exitEquityValue / equityInvestment;\n  const irr = Math.pow(totalReturn, 1 / exitYear) - 1;\n  const moic = totalReturn; // Multiple of Invested Capital\n\n  // Calculate fees (simplified)\n  const totalManagementFees = equityInvestment * managementFeeRate * exitYear;\n  const carriedInterest = Math.max(0, (exitEquityValue - equityInvestment) * carriedInterestRate);\n\n  return {\n    equityInvestment,\n    totalDebt,\n    exitEquityValue,\n    totalReturn,\n    irr,\n    moic,\n    exitEbitda,\n    exitEnterpriseValue,\n    managementFees: totalManagementFees,\n    carriedInterest,\n    netReturn: exitEquityValue - totalManagementFees - carriedInterest\n  };\n};\n\nexport const calculateComparableMetrics = (companyData, peerData) => {\n  const calculateStatistics = values => {\n    const validValues = values.filter(v => v !== null && v !== undefined && !isNaN(v));\n    if (validValues.length === 0) return { median: null, mean: null, min: null, max: null };\n\n    validValues.sort((a, b) => a - b);\n    const median =\n      validValues.length % 2 === 0\n        ? (validValues[validValues.length / 2 - 1] + validValues[validValues.length / 2]) / 2\n        : validValues[Math.floor(validValues.length / 2)];\n\n    const mean = validValues.reduce((sum, v) => sum + v, 0) / validValues.length;\n\n    return {\n      median,\n      mean,\n      min: Math.min(...validValues),\n      max: Math.max(...validValues),\n      count: validValues.length\n    };\n  };\n\n  const metrics = ['marketCap', 'peRatio', 'evToEbitda', 'priceToBook', 'debtToEquity'];\n  const peerStats = {};\n\n  metrics.forEach(metric => {\n    const peerValues = peerData.map(peer => peer[metric]);\n    peerStats[metric] = calculateStatistics(peerValues);\n  });\n\n  return {\n    company: companyData,\n    peerStatistics: peerStats,\n    relativeValuation: {\n      marketCapPercentile: calculatePercentile(\n        companyData.marketCap,\n        peerData.map(p => p.marketCap)\n      ),\n      peRatioRelative: companyData.peRatio / peerStats.peRatio.median,\n      evEbitdaRelative: companyData.evToEbitda / peerStats.evToEbitda.median,\n      priceToBookRelative: companyData.priceToBook / peerStats.priceToBook.median\n    }\n  };\n};\n\nexport const calculatePercentile = (value, dataset) => {\n  const validDataset = dataset.filter(v => v !== null && v !== undefined && !isNaN(v));\n  if (validDataset.length === 0 || value === null || value === undefined || isNaN(value))\n    return null;\n\n  validDataset.sort((a, b) => a - b);\n  const belowCount = validDataset.filter(v => v < value).length;\n  return belowCount / validDataset.length;\n};\n\nexport const generateMonteCarloScenarios = (baseInputs, variableRanges, iterations = 1000) => {\n  const scenarios = [];\n\n  for (let i = 0; i < iterations; i++) {\n    const scenario = { ...baseInputs };\n\n    Object.keys(variableRanges).forEach(variable => {\n      const range = variableRanges[variable];\n      const randomValue = range.min + Math.random() * (range.max - range.min);\n      scenario[variable] = randomValue;\n    });\n\n    scenarios.push(scenario);\n  }\n\n  return scenarios;\n};\n\nexport const calculateSensitivityAnalysis = (\n  baseInputs,\n  sensitivityVariable,\n  range,\n  steps = 10\n) => {\n  const results = [];\n  const stepSize = (range.max - range.min) / (steps - 1);\n\n  for (let i = 0; i < steps; i++) {\n    const variableValue = range.min + stepSize * i;\n    const inputs = { ...baseInputs, [sensitivityVariable]: variableValue };\n\n    results.push({\n      [sensitivityVariable]: variableValue,\n      inputs\n    });\n  }\n\n  return results;\n};\n","/**\n * Persistent CLI Component\n * Professional financial terminal interface that stays visible across all pages\n */\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Terminal,\n  ChevronUp,\n  ChevronDown,\n  Minimize2,\n  Maximize2,\n  X,\n  Download,\n  Zap\n} from 'lucide-react';\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\n\nimport { CLICommandProcessor } from '../../services/cliCommandProcessor';\nimport { formatCurrency, formatPercentage } from '../../utils/formatters';\n\nconst PersistentCLI = ({\n  currentContext = {},\n  portfolioData = null,\n  marketData = null,\n  onNavigate\n}) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const [input, setInput] = useState('');\n  const [output, setOutput] = useState([\n    {\n      id: 1,\n      type: 'system',\n      content: 'FinanceAnalyst Pro Terminal v1.0.0 - Type \"help\" for available commands',\n      timestamp: new Date()\n    },\n    {\n      id: 2,\n      type: 'info',\n      content: 'Connected to secure backend API  Market data live  Ready for commands',\n      timestamp: new Date()\n    }\n  ]);\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [suggestions, setSuggestions] = useState([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const inputRef = useRef(null);\n  const outputRef = useRef(null);\n  const cliProcessor = useRef(new CLICommandProcessor());\n\n  // Auto-scroll to bottom when output changes\n  useEffect(() => {\n    if (outputRef.current) {\n      outputRef.current.scrollTop = outputRef.current.scrollHeight;\n    }\n  }, [output]);\n\n  // Focus input when CLI is expanded\n  useEffect(() => {\n    if (isExpanded && !isMinimized && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isExpanded, isMinimized]);\n\n  // Initialize CLI processor with context\n  useEffect(() => {\n    cliProcessor.current.updateContext({\n      currentContext,\n      portfolioData,\n      marketData,\n      onNavigate\n    });\n  }, [currentContext, portfolioData, marketData, onNavigate]);\n\n  const addOutput = useCallback((content, type = 'output') => {\n    const newOutput = {\n      id: Date.now(),\n      type,\n      content,\n      timestamp: new Date()\n    };\n    setOutput(prev => [...prev, newOutput]);\n  }, []);\n\n  const handleCommand = async(command) => {\n    if (!command.trim()) return;\n\n    // Add command to history\n    setCommandHistory(prev => [...prev, command]);\n    setHistoryIndex(-1);\n\n    // Add command to output\n    addOutput(`$ ${command}`, 'command');\n    setIsProcessing(true);\n\n    try {\n      const result = await cliProcessor.current.processCommand(command);\n\n      if (result.success) {\n        if (result.output) {\n          addOutput(result.output, result.type || 'output');\n        }\n        if (result.data && result.format) {\n          // Handle formatted data output (tables, charts, etc.)\n          addOutput(formatCommandOutput(result.data, result.format), 'formatted');\n        }\n        if (result.navigation) {\n          onNavigate?.(result.navigation);\n        }\n      } else {\n        addOutput(result.error || 'Command failed', 'error');\n      }\n    } catch (error) {\n      addOutput(`Error: ${error.message}`, 'error');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const formatCommandOutput = (data, format) => {\n    switch (format) {\n      case 'table':\n        return formatTable(data);\n      case 'json':\n        return JSON.stringify(data, null, 2);\n      case 'portfolio':\n        return formatPortfolioData(data);\n      case 'market':\n        return formatMarketData(data);\n      default:\n        return data;\n    }\n  };\n\n  const formatTable = (data) => {\n    if (!Array.isArray(data) || data.length === 0) return 'No data';\n\n    const headers = Object.keys(data[0]);\n    const maxWidths = headers.map(header =>\n      Math.max(header.length, ...data.map(row => String(row[header] || '').length))\n    );\n\n    const headerRow = headers.map((header, i) => header.padEnd(maxWidths[i])).join(' | ');\n    const separator = maxWidths.map(width => '-'.repeat(width)).join('-|-');\n    const dataRows = data.map(row =>\n      headers.map((header, i) => String(row[header] || '').padEnd(maxWidths[i])).join(' | ')\n    );\n\n    return [headerRow, separator, ...dataRows].join('\\n');\n  };\n\n  const formatPortfolioData = (data) => {\n    if (!data) return 'No portfolio data available';\n\n    let output = ' PORTFOLIO OVERVIEW\\n';\n    output += '\\n';\n    output += `Total Value: ${formatCurrency(data.totalValue || 0)}\\n`;\n    output += `Total Return: ${formatPercentage(data.totalReturn || 0)}\\n`;\n    output += `Holdings: ${data.holdings?.length || 0}\\n\\n`;\n\n    if (data.holdings && data.holdings.length > 0) {\n      output += 'HOLDINGS:\\n';\n      data.holdings.forEach(holding => {\n        output += `${holding.symbol.padEnd(6)} ${formatCurrency(holding.value || 0).padStart(12)} ${formatPercentage(holding.weight || 0).padStart(8)}\\n`;\n      });\n    }\n\n    return output;\n  };\n\n  const formatMarketData = (data) => {\n    if (!data) return 'No market data available';\n\n    let output = ' MARKET DATA\\n';\n    output += '\\n';\n\n    Object.entries(data).forEach(([key, value]) => {\n      output += `${key.toUpperCase().padEnd(15)} ${String(value).padStart(12)}\\n`;\n    });\n\n    return output;\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleCommand(input);\n      setInput('');\n      setShowSuggestions(false);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (historyIndex < commandHistory.length - 1) {\n        const newIndex = historyIndex + 1;\n        setHistoryIndex(newIndex);\n        setInput(commandHistory[commandHistory.length - 1 - newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex > 0) {\n        const newIndex = historyIndex - 1;\n        setHistoryIndex(newIndex);\n        setInput(commandHistory[commandHistory.length - 1 - newIndex]);\n      } else if (historyIndex === 0) {\n        setHistoryIndex(-1);\n        setInput('');\n      }\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      if (suggestions.length > 0) {\n        setInput(suggestions[0]);\n        setShowSuggestions(false);\n      }\n    } else if (e.key === 'Escape') {\n      setShowSuggestions(false);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setInput(value);\n\n    // Generate suggestions\n    if (value.trim()) {\n      const newSuggestions = cliProcessor.current.getSuggestions(value);\n      setSuggestions(newSuggestions);\n      setShowSuggestions(newSuggestions.length > 0);\n    } else {\n      setShowSuggestions(false);\n    }\n  };\n\n  const clearOutput = () => {\n    setOutput([]);\n  };\n\n  const exportOutput = () => {\n    const exportText = output.map(item =>\n      `[${item.timestamp.toLocaleTimeString()}] ${item.content}`\n    ).join('\\n');\n\n    const blob = new Blob([exportText], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `financeanalyst-cli-${new Date().toISOString().split('T')[0]}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const getOutputTypeColor = (type) => {\n    switch (type) {\n      case 'command': return 'text-blue-400';\n      case 'error': return 'text-red-400';\n      case 'success': return 'text-green-400';\n      case 'warning': return 'text-yellow-400';\n      case 'info': return 'text-cyan-400';\n      case 'system': return 'text-gray-400';\n      case 'formatted': return 'text-purple-400';\n      default: return 'text-gray-300';\n    }\n  };\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 z-30\">\n      {/* CLI Header Bar */}\n      <div\n        className=\"bg-gray-900 border-t border-gray-700 px-4 py-2 flex items-center justify-between cursor-pointer select-none\"\n        onClick={() => setIsExpanded(!isExpanded)}\n        role=\"button\"\n        tabIndex={0}\n        aria-label={`${isExpanded ? 'Collapse' : 'Expand'} terminal`}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            setIsExpanded(!isExpanded);\n          }\n        }}\n      >\n        <div className=\"flex items-center space-x-3\">\n          <Terminal className=\"w-5 h-5 text-green-400\" />\n          <span className=\"text-sm font-mono text-gray-300\">\n            FinanceAnalyst Pro Terminal\n          </span>\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\" />\n            <span className=\"text-xs text-gray-500\">Live</span>\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          {!isMinimized && (\n            <>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  clearOutput();\n                }}\n                className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n                title=\"Clear output\"\n              >\n                <X className=\"w-4 h-4\" />\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  exportOutput();\n                }}\n                className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n                title=\"Export output\"\n              >\n                <Download className=\"w-4 h-4\" />\n              </button>\n            </>\n          )}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setIsMinimized(!isMinimized);\n            }}\n            className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n          >\n            {isMinimized ? <Maximize2 className=\"w-4 h-4\" /> : <Minimize2 className=\"w-4 h-4\" />}\n          </button>\n          <button\n            className=\"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300\"\n            title={isExpanded ? 'Collapse' : 'Expand'}\n          >\n            {isExpanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronUp className=\"w-4 h-4\" />}\n          </button>\n        </div>\n      </div>\n\n      {/* CLI Interface */}\n      <AnimatePresence>\n        {isExpanded && !isMinimized && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 400, opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.3, ease: 'easeInOut' }}\n            className=\"bg-gray-900 border-t border-gray-700 overflow-hidden\"\n          >\n            <div className=\"h-full flex flex-col\">\n              {/* Output Area */}\n              <div\n                ref={outputRef}\n                className=\"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1\"\n                style={{ maxHeight: '320px' }}\n              >\n                {output.map((item) => (\n                  <div key={item.id} className={`${getOutputTypeColor(item.type)} whitespace-pre-wrap`}>\n                    {item.type === 'formatted' ? (\n                      <div className=\"bg-gray-800 p-3 rounded border border-gray-700 overflow-x-auto\">\n                        <pre className=\"text-xs text-gray-300\">{item.content}</pre>\n                      </div>\n                    ) : (\n                      item.content\n                    )}\n                  </div>\n                ))}\n\n                {isProcessing && (\n                  <div className=\"text-yellow-400 flex items-center space-x-2\">\n                    <div className=\"animate-spin w-3 h-3 border border-yellow-400 border-t-transparent rounded-full\" />\n                    <span>Processing...</span>\n                  </div>\n                )}\n              </div>\n\n              {/* Suggestions */}\n              {showSuggestions && suggestions.length > 0 && (\n                <div className=\"border-t border-gray-700 bg-gray-800 p-2\">\n                  <div className=\"text-xs text-gray-400 mb-1\">Suggestions (Tab to complete):</div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {suggestions.slice(0, 6).map((suggestion, index) => (\n                      <button\n                        key={index}\n                        onClick={() => {\n                          setInput(suggestion);\n                          setShowSuggestions(false);\n                          inputRef.current?.focus();\n                        }}\n                        className=\"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors\"\n                      >\n                        {suggestion}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Input Area */}\n              <div className=\"border-t border-gray-700 p-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"text-green-400 font-mono\">$</span>\n                  <input\n                    ref={inputRef}\n                    type=\"text\"\n                    value={input}\n                    onChange={handleInputChange}\n                    onKeyDown={handleKeyDown}\n                    placeholder=\"Enter financial command... (type 'help' for commands)\"\n                    className=\"flex-1 bg-transparent text-gray-300 font-mono outline-none placeholder-gray-500\"\n                    disabled={isProcessing}\n                  />\n                  {isProcessing && (\n                    <div className=\"text-yellow-400\">\n                      <Zap className=\"w-4 h-4 animate-pulse\" />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"mt-2 text-xs text-gray-500 flex items-center justify-between\">\n                  <span>\n                    Use  for history  Tab for autocomplete  Type &quot;help&quot; for commands\n                  </span>\n                  <span>\n                    {commandHistory.length} commands in history\n                  </span>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default PersistentCLI;\n","import React from 'react';\n\nimport Icon from './AppIcon';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(_error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    error.__ErrorBoundary = true;\n    window.__COMPONENT_ERROR__?.(error, errorInfo);\n\n    // Report to monitoring/Sentry only if not in automated test environment\n    try {\n      const isAutomatedEnv = (\n        navigator.webdriver === true ||\n        new URLSearchParams(window.location.search).has('lhci') ||\n        new URLSearchParams(window.location.search).has('ci') ||\n        new URLSearchParams(window.location.search).has('audit')\n      );\n\n      if (!isAutomatedEnv) {\n        // Dynamically import monitoring to avoid side effects during tests\n        import('../utils/monitoring')\n          .then((mod) => {\n            if (mod?.default?.trackError) {\n              mod.default.trackError(error, 'react_error', {\n                componentStack: errorInfo?.componentStack\n              });\n            }\n          })\n          .catch(() => {\n            // Fail silently if monitoring unavailable\n          });\n      }\n    } catch (_) {\n      // noop\n    }\n    // console.log(\"Error caught by ErrorBoundary:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-neutral-50\">\n          <div className=\"text-center p-8 max-w-md\">\n            <div className=\"flex justify-center items-center mb-2\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"42px\"\n                height=\"42px\"\n                viewBox=\"0 0 32 33\"\n                fill=\"none\"\n              >\n                <path\n                  d=\"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z\"\n                  stroke=\"#343330\"\n                  strokeWidth=\"2\"\n                  strokeMiterlimit=\"10\"\n                />\n                <path\n                  d=\"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z\"\n                  fill=\"#343330\"\n                />\n                <path\n                  d=\"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z\"\n                  fill=\"#343330\"\n                />\n                <path\n                  d=\"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5\"\n                  stroke=\"#343330\"\n                  strokeWidth=\"2\"\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                />\n              </svg>\n            </div>\n            <div className=\"flex flex-col gap-1 text-center\">\n              <h1 className=\"text-2xl font-medium text-neutral-800\">Something went wrong</h1>\n              <p className=\"text-neutral-600 text-base w w-8/12 mx-auto\">\n                We encountered an unexpected error while processing your request.\n              </p>\n            </div>\n            <div className=\"flex justify-center items-center mt-6\">\n              <button\n                onClick={() => {\n                  window.location.href = '/';\n                }}\n                className=\"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm\"\n              >\n                <Icon name=\"ArrowLeft\" size={18} color=\"#fff\" />\n                Back\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","// Accessibility Testing Framework with axe-core\nimport axeCore from 'axe-core';\n\nclass AccessibilityTester {\n  constructor(options = {}) {\n    this.options = {\n      // Default axe configuration\n      rules: {\n        // Financial application specific rules\n        'color-contrast': { enabled: true },\n        'keyboard-navigation': { enabled: true },\n        'focus-management': { enabled: true },\n        'aria-labels': { enabled: true },\n        'heading-order': { enabled: true },\n        'landmark-one-main': { enabled: true },\n        'skip-link': { enabled: true },\n\n        // Disable rules that might conflict with financial widgets\n        'nested-interactive': { enabled: false }, // Some financial tables need nested controls\n\n        ...options.rules\n      },\n      tags: ['wcag2a', 'wcag2aa', 'wcag21aa', 'best-practice'],\n      runOnly: options.runOnly || null,\n      reporter: options.reporter || 'v2',\n      ...options\n    };\n\n    this.violations = [];\n    this.lastTestResults = null;\n  }\n\n  // Run accessibility tests on current page or specific element\n  async runTests(element = document, options = {}) {\n    const testOptions = {\n      ...this.options,\n      ...options\n    };\n\n    try {\n      console.log(' Running accessibility tests...');\n      const results = await axeCore.run(element, testOptions);\n\n      this.lastTestResults = results;\n      this.violations = results.violations;\n\n      // Log results\n      this.logResults(results);\n\n      // Report violations in development\n      if (import.meta.env.DEV) {\n        this.reportViolations(results.violations);\n      }\n\n      // Store results for analytics\n      this.storeResults(results);\n\n      return results;\n    } catch (error) {\n      console.error('Accessibility testing failed:', error);\n      throw error;\n    }\n  }\n\n  // Test specific financial components\n  async testFinancialComponent(selector, componentType = 'generic') {\n    const element = document.querySelector(selector);\n    if (!element) {\n      throw new Error(`Element not found: ${selector}`);\n    }\n\n    // Component-specific test configurations\n    const componentConfigs = {\n      'spreadsheet': {\n        rules: {\n          'table-header': { enabled: true },\n          'th-has-data-cells': { enabled: true },\n          'table-duplicate-name': { enabled: true },\n          'scope-attr-valid': { enabled: true }\n        },\n        tags: ['wcag2aa', 'section508']\n      },\n\n      'chart': {\n        rules: {\n          'image-alt': { enabled: true },\n          'svg-img-alt': { enabled: true },\n          'aria-hidden-focus': { enabled: true }\n        },\n        tags: ['wcag2aa']\n      },\n\n      'calculator': {\n        rules: {\n          'label': { enabled: true },\n          'form-field-multiple-labels': { enabled: true },\n          'duplicate-id': { enabled: true }\n        },\n        tags: ['wcag2aa', 'section508']\n      },\n\n      'modal': {\n        rules: {\n          'focus-trap': { enabled: true },\n          'aria-dialog-name': { enabled: true },\n          'keyboard-navigation': { enabled: true }\n        },\n        tags: ['wcag2aa', 'best-practice']\n      }\n    };\n\n    const config = componentConfigs[componentType] || {};\n    return await this.runTests(element, config);\n  }\n\n  // Test keyboard navigation\n  async testKeyboardNavigation() {\n    console.log(' Testing keyboard navigation...');\n\n    const focusableElements = this.getFocusableElements();\n    const tabOrderIssues = [];\n\n    // Test tab order\n    let previousTabIndex = -1;\n    focusableElements.forEach((element, index) => {\n      const tabIndex = element.tabIndex || 0;\n\n      if (tabIndex > 0 && tabIndex <= previousTabIndex) {\n        tabOrderIssues.push({\n          element: element.tagName,\n          id: element.id,\n          tabIndex,\n          position: index,\n          issue: 'Tab order not sequential'\n        });\n      }\n\n      previousTabIndex = tabIndex;\n    });\n\n    // Test focus visibility\n    const focusVisibilityIssues = [];\n    focusableElements.forEach(element => {\n      const styles = window.getComputedStyle(element, ':focus');\n      const hasOutline = styles.outline !== 'none' && styles.outline !== '0px';\n      const hasBoxShadow = styles.boxShadow !== 'none';\n      const hasBackground = styles.backgroundColor !== 'transparent';\n\n      if (!hasOutline && !hasBoxShadow && !hasBackground) {\n        focusVisibilityIssues.push({\n          element: element.tagName,\n          id: element.id,\n          className: element.className,\n          issue: 'No visible focus indicator'\n        });\n      }\n    });\n\n    return {\n      focusableElementsCount: focusableElements.length,\n      tabOrderIssues,\n      focusVisibilityIssues,\n      passed: tabOrderIssues.length === 0 && focusVisibilityIssues.length === 0\n    };\n  }\n\n  // Test color contrast for financial data\n  async testColorContrast() {\n    console.log(' Testing color contrast...');\n\n    const textElements = document.querySelectorAll('p, span, div, td, th, label, button, a, h1, h2, h3, h4, h5, h6');\n    const contrastIssues = [];\n\n    textElements.forEach(element => {\n      const styles = window.getComputedStyle(element);\n      const textColor = styles.color;\n      const backgroundColor = styles.backgroundColor;\n\n      // Skip if background is transparent\n      if (backgroundColor === 'transparent' || backgroundColor === 'rgba(0, 0, 0, 0)') {\n        return;\n      }\n\n      const contrast = this.calculateContrastRatio(textColor, backgroundColor);\n      const fontSize = parseInt(styles.fontSize);\n      const fontWeight = styles.fontWeight;\n\n      // WCAG AA requirements\n      const isLargeText = fontSize >= 18 || (fontSize >= 14 && (fontWeight === 'bold' || fontWeight >= 700));\n      const requiredRatio = isLargeText ? 3.0 : 4.5;\n\n      if (contrast < requiredRatio) {\n        contrastIssues.push({\n          element: element.tagName,\n          id: element.id,\n          className: element.className,\n          textColor,\n          backgroundColor,\n          contrast: contrast.toFixed(2),\n          required: requiredRatio,\n          fontSize,\n          fontWeight,\n          text: element.textContent?.substring(0, 50) + '...'\n        });\n      }\n    });\n\n    return {\n      totalElements: textElements.length,\n      contrastIssues,\n      passed: contrastIssues.length === 0\n    };\n  }\n\n  // Test financial forms accessibility\n  async testFormAccessibility() {\n    console.log(' Testing form accessibility...');\n\n    const forms = document.querySelectorAll('form');\n    const formIssues = [];\n\n    forms.forEach((form, formIndex) => {\n      const inputs = form.querySelectorAll('input, select, textarea');\n\n      inputs.forEach(input => {\n        const issues = [];\n\n        // Check for labels\n        const hasLabel = this.hasAssociatedLabel(input);\n        if (!hasLabel) {\n          issues.push('Missing label');\n        }\n\n        // Check for required field indication\n        if (input.required && !this.hasRequiredIndication(input)) {\n          issues.push('Required field not clearly indicated');\n        }\n\n        // Check for error states\n        if (input.getAttribute('aria-invalid') === 'true' && !this.hasErrorMessage(input)) {\n          issues.push('Error state without error message');\n        }\n\n        // Check for autocomplete on financial inputs\n        if (this.isFinancialInput(input) && !input.autocomplete) {\n          issues.push('Financial input missing autocomplete attribute');\n        }\n\n        if (issues.length > 0) {\n          formIssues.push({\n            formIndex,\n            inputType: input.type,\n            inputId: input.id,\n            inputName: input.name,\n            issues\n          });\n        }\n      });\n    });\n\n    return {\n      totalForms: forms.length,\n      formIssues,\n      passed: formIssues.length === 0\n    };\n  }\n\n  // Generate comprehensive accessibility report\n  generateReport() {\n    if (!this.lastTestResults) {\n      throw new Error('No test results available. Run tests first.');\n    }\n\n    const { violations, passes, incomplete, inapplicable } = this.lastTestResults;\n\n    return {\n      summary: {\n        timestamp: new Date().toISOString(),\n        totalChecks: violations.length + passes.length + incomplete.length + inapplicable.length,\n        violations: violations.length,\n        passes: passes.length,\n        incomplete: incomplete.length,\n        inapplicable: inapplicable.length,\n        score: this.calculateAccessibilityScore()\n      },\n      violations: violations.map(violation => ({\n        id: violation.id,\n        impact: violation.impact,\n        description: violation.description,\n        help: violation.help,\n        helpUrl: violation.helpUrl,\n        nodes: violation.nodes.length,\n        tags: violation.tags\n      })),\n      recommendations: this.generateRecommendations(violations),\n      financialSpecific: this.getFinancialAccessibilityInsights()\n    };\n  }\n\n  // Calculate accessibility score (0-100)\n  calculateAccessibilityScore() {\n    if (!this.lastTestResults) return 0;\n\n    const { violations, passes } = this.lastTestResults;\n    const totalTests = violations.length + passes.length;\n\n    if (totalTests === 0) return 100;\n\n    // Weight violations by impact\n    const impactWeights = { critical: 4, serious: 3, moderate: 2, minor: 1 };\n    const violationScore = violations.reduce((score, violation) => {\n      return score + (impactWeights[violation.impact] || 1);\n    }, 0);\n\n    const maxPossibleScore = totalTests * 4; // Assuming all could be critical\n    return Math.max(0, 100 - (violationScore / maxPossibleScore) * 100);\n  }\n\n  // Generate specific recommendations for financial applications\n  generateRecommendations(violations) {\n    const recommendations = [];\n\n    violations.forEach(violation => {\n      switch (violation.id) {\n        case 'color-contrast':\n          recommendations.push({\n            category: 'Visual Design',\n            priority: 'High',\n            issue: 'Insufficient color contrast',\n            solution: 'Ensure text colors meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)',\n            financialContext: 'Critical for reading financial data and avoiding misinterpretation of numbers'\n          });\n          break;\n\n        case 'keyboard-navigation':\n          recommendations.push({\n            category: 'Keyboard Access',\n            priority: 'High',\n            issue: 'Keyboard navigation issues',\n            solution: 'Ensure all interactive elements are keyboard accessible with visible focus indicators',\n            financialContext: 'Essential for users who rely on keyboard navigation to access financial tools'\n          });\n          break;\n\n        case 'label':\n          recommendations.push({\n            category: 'Form Controls',\n            priority: 'High',\n            issue: 'Missing form labels',\n            solution: 'Add proper labels to all form controls, especially financial input fields',\n            financialContext: 'Critical for screen readers to understand financial input requirements'\n          });\n          break;\n\n        case 'aria-hidden-focus':\n          recommendations.push({\n            category: 'ARIA Usage',\n            priority: 'Medium',\n            issue: 'Focusable elements hidden from screen readers',\n            solution: 'Review aria-hidden usage on interactive elements',\n            financialContext: 'May hide important financial controls from assistive technology users'\n          });\n          break;\n      }\n    });\n\n    return recommendations;\n  }\n\n  // Get financial application specific accessibility insights\n  getFinancialAccessibilityInsights() {\n    const insights = [];\n\n    // Check for financial data tables\n    const tables = document.querySelectorAll('table');\n    if (tables.length > 0) {\n      insights.push({\n        component: 'Data Tables',\n        recommendation: 'Ensure financial data tables have proper headers and scope attributes for screen reader navigation'\n      });\n    }\n\n    // Check for charts\n    const charts = document.querySelectorAll('[data-chart], .recharts-wrapper, canvas');\n    if (charts.length > 0) {\n      insights.push({\n        component: 'Charts and Graphs',\n        recommendation: 'Provide alternative text descriptions and data tables for financial charts'\n      });\n    }\n\n    // Check for calculators\n    const calculators = document.querySelectorAll('[data-calculator], .calculator');\n    if (calculators.length > 0) {\n      insights.push({\n        component: 'Financial Calculators',\n        recommendation: 'Ensure calculator inputs have clear labels and results are announced to screen readers'\n      });\n    }\n\n    return insights;\n  }\n\n  // Utility methods\n  getFocusableElements() {\n    const focusableSelectors = [\n      'a[href]',\n      'button:not([disabled])',\n      'input:not([disabled])',\n      'select:not([disabled])',\n      'textarea:not([disabled])',\n      '[tabindex]:not([tabindex=\"-1\"])'\n    ];\n\n    return Array.from(document.querySelectorAll(focusableSelectors.join(',')));\n  }\n\n  hasAssociatedLabel(input) {\n    const id = input.id;\n    const ariaLabel = input.getAttribute('aria-label');\n    const ariaLabelledby = input.getAttribute('aria-labelledby');\n\n    if (ariaLabel || ariaLabelledby) return true;\n    if (id && document.querySelector(`label[for=\"${id}\"]`)) return true;\n\n    // Check for wrapping label\n    const parentLabel = input.closest('label');\n    return !!parentLabel;\n  }\n\n  hasRequiredIndication(input) {\n    const ariaRequired = input.getAttribute('aria-required');\n    const requiredAttr = input.hasAttribute('required');\n    const hasRequiredText = this.hasRequiredTextIndicator(input);\n\n    return ariaRequired === 'true' || requiredAttr || hasRequiredText;\n  }\n\n  hasRequiredTextIndicator(input) {\n    const label = this.getAssociatedLabel(input);\n    if (!label) return false;\n\n    const text = label.textContent || '';\n    return text.includes('*') || text.toLowerCase().includes('required');\n  }\n\n  hasErrorMessage(input) {\n    const ariaDescribedby = input.getAttribute('aria-describedby');\n    if (ariaDescribedby) {\n      const errorElement = document.getElementById(ariaDescribedby);\n      return errorElement && errorElement.textContent;\n    }\n    return false;\n  }\n\n  isFinancialInput(input) {\n    const financialTypes = ['number', 'email', 'tel'];\n    const financialNames = ['amount', 'price', 'rate', 'percent', 'currency', 'value'];\n\n    return financialTypes.includes(input.type) ||\n           financialNames.some(name => input.name?.toLowerCase().includes(name));\n  }\n\n  getAssociatedLabel(input) {\n    const id = input.id;\n    if (id) {\n      const label = document.querySelector(`label[for=\"${id}\"]`);\n      if (label) return label;\n    }\n\n    return input.closest('label');\n  }\n\n  // Simplified contrast ratio calculation\n  calculateContrastRatio(color1, color2) {\n    // This is a simplified version - in production use a proper color contrast library\n    const rgb1 = this.parseColor(color1);\n    const rgb2 = this.parseColor(color2);\n\n    const l1 = this.getLuminance(rgb1);\n    const l2 = this.getLuminance(rgb2);\n\n    const lighter = Math.max(l1, l2);\n    const darker = Math.min(l1, l2);\n\n    return (lighter + 0.05) / (darker + 0.05);\n  }\n\n  parseColor(color) {\n    // Simple RGB parsing - expand for production use\n    const match = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n    if (match) {\n      return [parseInt(match[1]), parseInt(match[2]), parseInt(match[3])];\n    }\n    return [0, 0, 0]; // Default to black\n  }\n\n  getLuminance([r, g, b]) {\n    const [rs, gs, bs] = [r, g, b].map(c => {\n      c = c / 255;\n      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n    });\n    return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;\n  }\n\n  logResults(results) {\n    console.group(' Accessibility Test Results');\n    console.log(` Passed: ${results.passes.length}`);\n    console.log(` Violations: ${results.violations.length}`);\n    console.log(`  Incomplete: ${results.incomplete.length}`);\n    console.log(` Not applicable: ${results.inapplicable.length}`);\n\n    if (results.violations.length > 0) {\n      console.warn('Violations found:');\n      results.violations.forEach(violation => {\n        console.warn(`- ${violation.id}: ${violation.description}`);\n      });\n    }\n    console.groupEnd();\n  }\n\n  reportViolations(violations) {\n    violations.forEach(violation => {\n      violation.nodes.forEach(node => {\n        console.error('Accessibility violation:', {\n          rule: violation.id,\n          impact: violation.impact,\n          element: node.target,\n          message: node.failureSummary\n        });\n      });\n    });\n  }\n\n  storeResults(results) {\n    try {\n      const reportData = {\n        timestamp: Date.now(),\n        url: window.location.href,\n        violations: results.violations.length,\n        passes: results.passes.length,\n        score: this.calculateAccessibilityScore()\n      };\n\n      const existingReports = JSON.parse(localStorage.getItem('accessibility-reports') || '[]');\n      existingReports.push(reportData);\n\n      // Keep only last 10 reports\n      if (existingReports.length > 10) {\n        existingReports.splice(0, existingReports.length - 10);\n      }\n\n      localStorage.setItem('accessibility-reports', JSON.stringify(existingReports));\n    } catch (error) {\n      console.error('Failed to store accessibility results:', error);\n    }\n  }\n}\n\n// Create singleton instance\nexport const accessibilityTester = new AccessibilityTester();\n\n// React hook for accessibility testing\nexport function useAccessibilityTester() {\n  return {\n    runTests: (element, options) => accessibilityTester.runTests(element, options),\n    testFinancialComponent: (selector, type) => accessibilityTester.testFinancialComponent(selector, type),\n    testKeyboardNavigation: () => accessibilityTester.testKeyboardNavigation(),\n    testColorContrast: () => accessibilityTester.testColorContrast(),\n    testFormAccessibility: () => accessibilityTester.testFormAccessibility(),\n    generateReport: () => accessibilityTester.generateReport(),\n    getScore: () => accessibilityTester.calculateAccessibilityScore()\n  };\n}\n\nexport default AccessibilityTester;\n","import { useState, useEffect, useCallback, useRef } from 'react';\n\nimport { accessibilityTester } from '../utils/accessibilityTesting';\n\n// React hook for accessibility testing\nexport function useAccessibility(options = {}) {\n  // Disable accessibility testing during E2E tests to prevent interference\n  const isTestEnvironment = typeof window !== 'undefined' && (\n    window.navigator?.webdriver === true ||\n    window.location?.search?.includes('lhci') ||\n    window.location?.search?.includes('ci') ||\n    window.location?.search?.includes('audit')\n  );\n\n  const {\n    enabled = import.meta.env.DEV && !isTestEnvironment,\n    autoTest = false,\n    testInterval = null,\n    componentType = 'generic',\n    onViolations = null,\n    onSuccess = null\n  } = options;\n\n  const [results, setResults] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [violations, setViolations] = useState([]);\n  const [score, setScore] = useState(null);\n  const [lastTestTime, setLastTestTime] = useState(null);\n\n  const elementRef = useRef(null);\n  const intervalRef = useRef(null);\n\n  // Run accessibility tests\n  const runTests = useCallback(async(element = null, testOptions = {}) => {\n    if (!enabled) return null;\n\n    const targetElement = element || elementRef.current || document;\n    setIsLoading(true);\n\n    try {\n      const testResults = await accessibilityTester.runTests(targetElement, testOptions);\n\n      setResults(testResults);\n      setViolations(testResults.violations || []);\n      setScore(accessibilityTester.calculateAccessibilityScore());\n      setLastTestTime(Date.now());\n\n      // Report to performance monitoring\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('accessibility_test', {\n              violations: testResults.violations?.length || 0,\n              score: accessibilityTester.calculateAccessibilityScore(),\n              componentType,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      // Call callbacks\n      if (testResults.violations?.length > 0) {\n        onViolations?.(testResults.violations);\n      } else {\n        onSuccess?.(testResults);\n      }\n\n      return testResults;\n    } catch (error) {\n      console.error('Accessibility test failed:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [enabled, componentType, onViolations, onSuccess]);\n\n  // Test specific financial component\n  const testFinancialComponent = useCallback(async(selector, type = componentType) => {\n    if (!enabled) return null;\n\n    setIsLoading(true);\n    try {\n      const testResults = await accessibilityTester.testFinancialComponent(selector, type);\n\n      setResults(testResults);\n      setViolations(testResults.violations || []);\n      setScore(accessibilityTester.calculateAccessibilityScore());\n      setLastTestTime(Date.now());\n\n      // Report specific component test\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('financial_component_accessibility', {\n              componentType: type,\n              violations: testResults.violations?.length || 0,\n              score: accessibilityTester.calculateAccessibilityScore(),\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return testResults;\n    } catch (error) {\n      console.error('Financial component accessibility test failed:', error);\n      return null;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [enabled, componentType]);\n\n  // Test keyboard navigation\n  const testKeyboardNavigation = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const navResults = await accessibilityTester.testKeyboardNavigation();\n\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('keyboard_navigation_test', {\n              focusableElements: navResults.focusableElementsCount,\n              tabOrderIssues: navResults.tabOrderIssues?.length || 0,\n              focusVisibilityIssues: navResults.focusVisibilityIssues?.length || 0,\n              passed: navResults.passed,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return navResults;\n    } catch (error) {\n      console.error('Keyboard navigation test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Test color contrast\n  const testColorContrast = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const contrastResults = await accessibilityTester.testColorContrast();\n\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('color_contrast_test', {\n              totalElements: contrastResults.totalElements,\n              contrastIssues: contrastResults.contrastIssues?.length || 0,\n              passed: contrastResults.passed,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return contrastResults;\n    } catch (error) {\n      console.error('Color contrast test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Test form accessibility\n  const testFormAccessibility = useCallback(async() => {\n    if (!enabled) return null;\n\n    try {\n      const formResults = await accessibilityTester.testFormAccessibility();\n\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('form_accessibility_test', {\n              totalForms: formResults.totalForms,\n              formIssues: formResults.formIssues?.length || 0,\n              passed: formResults.passed,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return formResults;\n    } catch (error) {\n      console.error('Form accessibility test failed:', error);\n      return null;\n    }\n  }, [enabled]);\n\n  // Generate comprehensive report\n  const generateReport = useCallback(() => {\n    if (!results) return null;\n\n    try {\n      const report = accessibilityTester.generateReport();\n\n      // Store report data for performance monitoring\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('accessibility_report_generated', {\n              score: report.summary.score,\n              violations: report.summary.violations,\n              totalChecks: report.summary.totalChecks,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return report;\n    } catch (error) {\n      console.error('Failed to generate accessibility report:', error);\n      return null;\n    }\n  }, [results]);\n\n  // Set up automatic testing\n  useEffect(() => {\n    if (!enabled || !autoTest) return;\n\n    const runAutoTest = () => {\n      runTests();\n    };\n\n    // Run initial test\n    runAutoTest();\n\n    // Set up interval if specified\n    if (testInterval) {\n      intervalRef.current = setInterval(runAutoTest, testInterval);\n    }\n\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, [enabled, autoTest, testInterval, runTests]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    // State\n    results,\n    violations,\n    score,\n    isLoading,\n    lastTestTime,\n\n    // Test functions\n    runTests,\n    testFinancialComponent,\n    testKeyboardNavigation,\n    testColorContrast,\n    testFormAccessibility,\n    generateReport,\n\n    // Element ref for targeting tests\n    elementRef\n  };\n}\n\n// Hook for monitoring accessibility across the entire app\nexport function useAppAccessibility() {\n  const [globalScore, setGlobalScore] = useState(null);\n  const [recentViolations, setRecentViolations] = useState([]);\n  const [testHistory, setTestHistory] = useState([]);\n\n  const runGlobalAccessibilityCheck = useCallback(async() => {\n    try {\n      // Run comprehensive tests on the entire document\n      const results = await accessibilityTester.runTests(document);\n      const score = accessibilityTester.calculateAccessibilityScore();\n\n      setGlobalScore(score);\n      setRecentViolations(results.violations || []);\n\n      // Update test history\n      const historyEntry = {\n        timestamp: Date.now(),\n        score,\n        violations: results.violations?.length || 0,\n        url: window.location.pathname\n      };\n\n      setTestHistory(prev => [...prev.slice(-9), historyEntry]); // Keep last 10 entries\n\n      // Report global metrics\n      import('../utils/performanceMonitoring')\n        .then((mod) => {\n          if (mod?.reportPerformanceMetric) {\n            mod.reportPerformanceMetric('global_accessibility_check', {\n              score,\n              violations: results.violations?.length || 0,\n              url: window.location.pathname,\n              timestamp: Date.now()\n            });\n          }\n        })\n        .catch(() => {});\n\n      return results;\n    } catch (error) {\n      console.error('Global accessibility check failed:', error);\n      return null;\n    }\n  }, []);\n\n  // Check accessibility when route changes\n  useEffect(() => {\n    const checkOnRouteChange = () => {\n      setTimeout(() => {\n        runGlobalAccessibilityCheck();\n      }, 1000); // Allow time for route to fully load\n    };\n\n    // Listen for navigation changes\n    window.addEventListener('popstate', checkOnRouteChange);\n\n    // Run initial check\n    checkOnRouteChange();\n\n    return () => {\n      window.removeEventListener('popstate', checkOnRouteChange);\n    };\n  }, [runGlobalAccessibilityCheck]);\n\n  return {\n    globalScore,\n    recentViolations,\n    testHistory,\n    runGlobalAccessibilityCheck\n  };\n}\n\n// Hook for accessibility testing in financial components\nexport function useFinancialAccessibility(componentType) {\n  const accessibility = useAccessibility({\n    componentType,\n    autoTest: true,\n    testInterval: 30000, // Test every 30 seconds in development\n    onViolations: (violations) => {\n      // Log financial component specific violations\n      console.warn(`Financial component (${componentType}) accessibility violations:`, violations);\n    }\n  });\n\n  // Enhanced testing for financial components\n  const testFinancialFeatures = useCallback(async() => {\n    const results = {};\n\n    try {\n      // Test keyboard navigation (critical for financial apps)\n      results.keyboardNav = await accessibility.testKeyboardNavigation();\n\n      // Test color contrast (important for reading financial data)\n      results.colorContrast = await accessibility.testColorContrast();\n\n      // Test forms if component contains them\n      results.formAccessibility = await accessibility.testFormAccessibility();\n\n      // Generate comprehensive report\n      results.report = accessibility.generateReport();\n\n      return results;\n    } catch (error) {\n      console.error('Financial accessibility testing failed:', error);\n      return null;\n    }\n  }, [accessibility, componentType]);\n\n  return {\n    ...accessibility,\n    testFinancialFeatures\n  };\n}\n\n// Hook for real-time accessibility monitoring\nexport function useAccessibilityMonitor(options = {}) {\n  const {\n    threshold = 80, // Minimum acceptable score\n    alertOnViolations = true,\n    monitorInterval = 60000 // Check every minute\n  } = options;\n\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [alerts, setAlerts] = useState([]);\n  const intervalRef = useRef(null);\n\n  const startMonitoring = useCallback(() => {\n    if (isMonitoring) return;\n\n    setIsMonitoring(true);\n\n    const monitor = async() => {\n      try {\n        const results = await accessibilityTester.runTests(document);\n        const score = accessibilityTester.calculateAccessibilityScore();\n\n        // Check if score is below threshold\n        if (score < threshold) {\n          const alert = {\n            id: Date.now(),\n            type: 'low_score',\n            message: `Accessibility score (${score}) is below threshold (${threshold})`,\n            score,\n            violations: results.violations?.length || 0,\n            timestamp: Date.now()\n          };\n\n          setAlerts(prev => [...prev, alert]);\n\n          if (alertOnViolations) {\n            console.warn('Accessibility Alert:', alert.message);\n          }\n        }\n\n        // Check for critical violations\n        const criticalViolations = results.violations?.filter(v => v.impact === 'critical') || [];\n        if (criticalViolations.length > 0 && alertOnViolations) {\n          const alert = {\n            id: Date.now(),\n            type: 'critical_violations',\n            message: `${criticalViolations.length} critical accessibility violations found`,\n            violations: criticalViolations,\n            timestamp: Date.now()\n          };\n\n          setAlerts(prev => [...prev, alert]);\n          console.error('Critical Accessibility Violations:', criticalViolations);\n        }\n\n        // Report monitoring metrics\n        import('../utils/performanceMonitoring')\n          .then((mod) => {\n            if (mod?.reportPerformanceMetric) {\n              mod.reportPerformanceMetric('accessibility_monitoring', {\n                score,\n                violations: results.violations?.length || 0,\n                criticalViolations: criticalViolations.length,\n                timestamp: Date.now()\n              });\n            }\n          })\n          .catch(() => {});\n\n      } catch (error) {\n        console.error('Accessibility monitoring failed:', error);\n      }\n    };\n\n    // Run initial check\n    monitor();\n\n    // Set up interval\n    intervalRef.current = setInterval(monitor, monitorInterval);\n  }, [isMonitoring, threshold, alertOnViolations, monitorInterval]);\n\n  const stopMonitoring = useCallback(() => {\n    setIsMonitoring(false);\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, []);\n\n  const clearAlerts = useCallback(() => {\n    setAlerts([]);\n  }, []);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return {\n    isMonitoring,\n    alerts,\n    startMonitoring,\n    stopMonitoring,\n    clearAlerts\n  };\n}\n","import React, { useState, useEffect, useCallback } from 'react';\n\nimport { useAccessibilityMonitor } from '../../hooks/useAccessibility';\n\nconst PerformanceDashboard = ({ isVisible = false, onClose }) => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [refreshInterval, setRefreshInterval] = useState(30000); // 30 seconds\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [alertThreshold, setAlertThreshold] = useState(75);\n\n  const {\n    alerts,\n    startMonitoring: startAccessibilityMonitoring,\n    stopMonitoring: stopAccessibilityMonitoring,\n    clearAlerts\n  } = useAccessibilityMonitor({\n    threshold: alertThreshold,\n    monitorInterval: refreshInterval\n  });\n\n  // Refresh dashboard data\n  const refreshData = useCallback(() => {\n    import('../../utils/performanceMonitoring')\n      .then((mod) => {\n        if (mod?.getPerformanceDashboardData) {\n          try {\n            const data = mod.getPerformanceDashboardData();\n            setDashboardData(data);\n          } catch (error) {\n            console.error('Failed to refresh performance dashboard:', error);\n          }\n        }\n      })\n      .catch((error) => {\n        console.error('Failed to load performance monitoring:', error);\n      });\n  }, []);\n\n  // Toggle monitoring\n  const toggleMonitoring = useCallback(() => {\n    if (isMonitoring) {\n      stopAccessibilityMonitoring();\n      setIsMonitoring(false);\n    } else {\n      startAccessibilityMonitoring();\n      setIsMonitoring(true);\n    }\n  }, [isMonitoring, startAccessibilityMonitoring, stopAccessibilityMonitoring]);\n\n  // Initialize and set up refresh interval\n  useEffect(() => {\n    if (!isVisible) return;\n\n    // Initialize performance monitoring if not already done\n    import('../../utils/performanceMonitoring')\n      .then((mod) => {\n        if (mod?.initializePerformanceMonitoring) {\n          mod.initializePerformanceMonitoring();\n        }\n      })\n      .catch(() => {\n        // Performance monitoring is optional; ignore errors\n      });\n\n    // Initial data fetch\n    refreshData();\n\n    // Set up refresh interval\n    const interval = setInterval(refreshData, refreshInterval);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isVisible, refreshData, refreshInterval]);\n\n  // Format metric values for display\n  const formatMetric = (value, unit = 'ms') => {\n    if (value === null || value === undefined) return 'N/A';\n    if (typeof value === 'number') {\n      return `${Math.round(value)}${unit}`;\n    }\n    return value;\n  };\n\n  // Get metric status (good, needs improvement, poor)\n  const getMetricStatus = (metric, value) => {\n    const thresholds = {\n      LCP: { good: 2500, poor: 4000 },\n      FID: { good: 100, poor: 300 },\n      CLS: { good: 0.1, poor: 0.25 },\n      FCP: { good: 1800, poor: 3000 },\n      TTFB: { good: 800, poor: 1800 }\n    };\n\n    const threshold = thresholds[metric];\n    if (!threshold || value === null) return 'unknown';\n\n    if (value <= threshold.good) return 'good';\n    if (value <= threshold.poor) return 'needs-improvement';\n    return 'poor';\n  };\n\n  // Get status color\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'good': return 'text-green-600 bg-green-100';\n      case 'needs-improvement': return 'text-yellow-600 bg-yellow-100';\n      case 'poor': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (!isVisible || !dashboardData) {\n    return null;\n  }\n\n  const { webVitals, budgetViolations, accessibility, performance } = dashboardData;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Performance Dashboard</h2>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Real-time monitoring for FinanceAnalyst Pro\n            </p>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={toggleMonitoring}\n              className={`px-4 py-2 rounded-md text-sm font-medium ${\n                isMonitoring\n                  ? 'bg-red-100 text-red-700 hover:bg-red-200'\n                  : 'bg-green-100 text-green-700 hover:bg-green-200'\n              }`}\n            >\n              {isMonitoring ? 'Stop Monitoring' : 'Start Monitoring'}\n            </button>\n            <button\n              onClick={refreshData}\n              className=\"px-4 py-2 bg-blue-100 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-200\"\n            >\n              Refresh\n            </button>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <span className=\"sr-only\">Close</span>\n              <svg\n                className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2}\n                  d=\"M6 18L18 6M6 6l12 12\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-8\">\n          {/* Web Vitals */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Core Web Vitals</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n              {Object.entries(webVitals).map(([metric, value]) => {\n                const status = getMetricStatus(metric, value);\n                const statusColor = getStatusColor(status);\n\n                return (\n                  <div key={metric} className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm font-medium text-gray-600\">{metric}</span>\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${statusColor}`}>\n                        {status}\n                      </span>\n                    </div>\n                    <div className=\"mt-2\">\n                      <span className=\"text-2xl font-bold text-gray-900\">\n                        {formatMetric(value, metric === 'CLS' ? '' : 'ms')}\n                      </span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </section>\n\n          {/* Budget Violations */}\n          {budgetViolations.length > 0 && (\n            <section>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance Budget Violations</h3>\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                <div className=\"space-y-2\">\n                  {budgetViolations.map((violation, index) => (\n                    <div key={index} className=\"flex items-center justify-between\">\n                      <span className=\"text-sm font-medium text-red-800\">\n                        {violation.metric}: {formatMetric(violation.value)}\n                      </span>\n                      <span className=\"text-sm text-red-600\">\n                        Over budget by {formatMetric(violation.overBy)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </section>\n          )}\n\n          {/* Accessibility */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Accessibility</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Current Score</h4>\n                <div className=\"flex items-center\">\n                  <span className=\"text-3xl font-bold text-gray-900\">\n                    {accessibility.currentScore}\n                  </span>\n                  <span className=\"text-sm text-gray-500 ml-1\">/100</span>\n                  {accessibility.trends.scoreImproving && (\n                    <span className=\"ml-2 text-green-600\">\n                      <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z\" clipRule=\"evenodd\" />\n                      </svg>\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Average Violations</h4>\n                <span className=\"text-3xl font-bold text-gray-900\">\n                  {accessibility.averageViolations}\n                </span>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"text-sm font-medium text-gray-600 mb-2\">Average Score</h4>\n                <span className=\"text-3xl font-bold text-gray-900\">\n                  {accessibility.averageScore}\n                </span>\n              </div>\n            </div>\n\n            {/* Accessibility Alerts */}\n            {alerts.length > 0 && (\n              <div className=\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h4 className=\"text-sm font-medium text-yellow-800\">Active Alerts</h4>\n                  <button\n                    onClick={clearAlerts}\n                    className=\"text-xs text-yellow-600 hover:text-yellow-800\"\n                  >\n                    Clear All\n                  </button>\n                </div>\n                <div className=\"space-y-2\">\n                  {alerts.slice(0, 5).map((alert) => (\n                    <div key={alert.id} className=\"text-sm text-yellow-700\">\n                      <span className=\"font-medium\">{alert.type}:</span> {alert.message}\n                    </div>\n                  ))}\n                  {alerts.length > 5 && (\n                    <div className=\"text-xs text-yellow-600\">\n                      And {alerts.length - 5} more alerts...\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </section>\n\n          {/* Recent Performance Metrics */}\n          {performance.recentMetrics.length > 0 && (\n            <section>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Performance Events</h3>\n              <div className=\"bg-white border border-gray-200 rounded-lg overflow-hidden\">\n                <div className=\"max-h-64 overflow-y-auto\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Type\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Component\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Value\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Time\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {performance.recentMetrics.slice(0, 10).map((metric, index) => (\n                        <tr key={index}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                            {metric.type}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {metric.component || metric.componentType || 'N/A'}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {metric.violations !== undefined ? `${metric.violations} violations` :\n                              metric.score !== undefined ? `Score: ${metric.score}` :\n                                metric.duration !== undefined ? `${Math.round(metric.duration)}ms` : 'N/A'}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {new Date(metric.timestamp).toLocaleTimeString()}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </section>\n          )}\n\n          {/* Settings */}\n          <section>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Monitoring Settings</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <label htmlFor=\"refresh-interval\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Refresh Interval (seconds)\n                </label>\n                <select\n                  id=\"refresh-interval\"\n                  value={refreshInterval / 1000}\n                  onChange={(e) => setRefreshInterval(parseInt(e.target.value) * 1000)}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                >\n                  <option value={10}>10 seconds</option>\n                  <option value={30}>30 seconds</option>\n                  <option value={60}>1 minute</option>\n                  <option value={300}>5 minutes</option>\n                </select>\n              </div>\n\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <label htmlFor=\"alert-threshold\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Accessibility Alert Threshold\n                </label>\n                <select\n                  id=\"alert-threshold\"\n                  value={alertThreshold}\n                  onChange={(e) => setAlertThreshold(parseInt(e.target.value))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                >\n                  <option value={60}>60 (Strict)</option>\n                  <option value={75}>75 (Moderate)</option>\n                  <option value={85}>85 (Lenient)</option>\n                  <option value={95}>95 (Very Lenient)</option>\n                </select>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PerformanceDashboard;\n","import { HelmetProvider } from 'react-helmet-async';\n\nconst SEOProvider = ({ children }) => {\n  return <HelmetProvider>{children}</HelmetProvider>;\n};\n\nexport default SEOProvider;\n","import { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nconst ScrollToTop = () => {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n};\n\nexport default ScrollToTop;\n","import { useEffect, useCallback } from 'react';\n\n// Keyboard shortcut configuration\nconst SHORTCUT_CONFIG = {\n  // Command Palette\n  'cmd+k': { action: 'open-command-palette', description: 'Open command palette' },\n  'ctrl+k': { action: 'open-command-palette', description: 'Open command palette' },\n\n  // Navigation shortcuts\n  'ctrl+1': { action: 'navigate', target: 'data', description: 'Go to Data Entry' },\n  'ctrl+2': { action: 'navigate', target: 'modeling', description: 'Go to Modeling' },\n  'ctrl+3': { action: 'navigate', target: 'analysis', description: 'Go to Analysis' },\n\n  // Action shortcuts\n  'ctrl+n': { action: 'create-dcf', description: 'Create new DCF model' },\n  'ctrl+s': { action: 'save', description: 'Save current analysis' },\n  'ctrl+i': { action: 'import-data', description: 'Import data' },\n  'ctrl+e': { action: 'export-data', description: 'Export analysis' },\n  'ctrl+f': { action: 'search-data', description: 'Search data' },\n\n  // Analysis shortcuts\n  'ctrl+shift+s': { action: 'sensitivity-analysis', description: 'Run sensitivity analysis' },\n  'ctrl+shift+m': { action: 'monte-carlo', description: 'Run Monte Carlo simulation' },\n\n  // View shortcuts\n  'ctrl+shift+i': { action: 'toggle-insights', description: 'Toggle insights sidebar' },\n  'f1': { action: 'help', description: 'Open help' },\n\n  // Quick access\n  'alt+1': { action: 'quick-company', company: 'AAPL', description: 'Quick Apple analysis' },\n  'alt+2': { action: 'quick-company', company: 'MSFT', description: 'Quick Microsoft analysis' },\n  'alt+3': { action: 'quick-company', company: 'GOOGL', description: 'Quick Google analysis' },\n  'alt+4': { action: 'quick-company', company: 'AMZN', description: 'Quick Amazon analysis' }\n};\n\nexport const useKeyboardShortcuts = (handlers = {}) => {\n  // Normalize key combination\n  const normalizeKey = useCallback((event) => {\n    const parts = [];\n\n    if (event.metaKey || event.ctrlKey) {\n      parts.push(event.metaKey ? 'cmd' : 'ctrl');\n    }\n    if (event.altKey) parts.push('alt');\n    if (event.shiftKey) parts.push('shift');\n\n    // Handle special keys\n    let key = event.key.toLowerCase();\n    if (key === ' ') key = 'space';\n    if (key === 'escape') key = 'esc';\n    if (key === 'arrowup') key = 'up';\n    if (key === 'arrowdown') key = 'down';\n    if (key === 'arrowleft') key = 'left';\n    if (key === 'arrowright') key = 'right';\n\n    parts.push(key);\n\n    return parts.join('+');\n  }, []);\n\n  // Check if element should receive shortcuts\n  const shouldHandleShortcut = useCallback((target) => {\n    // Don't handle shortcuts when typing in inputs, textareas, or contenteditable elements\n    const tagName = target.tagName.toLowerCase();\n    const isEditable = target.contentEditable === 'true';\n    const isInput = ['input', 'textarea', 'select'].includes(tagName);\n\n    return !isInput && !isEditable;\n  }, []);\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback((event) => {\n    // Check if we should handle this shortcut\n    if (!shouldHandleShortcut(event.target)) {\n      return;\n    }\n\n    const keyCombo = normalizeKey(event);\n    const shortcut = SHORTCUT_CONFIG[keyCombo];\n\n    if (shortcut) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      // Call the appropriate handler\n      const handler = handlers[shortcut.action];\n      if (handler) {\n        handler(shortcut);\n      } else {\n        console.warn(`No handler found for shortcut action: ${shortcut.action}`);\n      }\n    }\n  }, [normalizeKey, shouldHandleShortcut, handlers]);\n\n  // Register global keyboard event listener\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, true);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, true);\n    };\n  }, [handleKeyDown]);\n\n  // Get all shortcuts for help display\n  const getAllShortcuts = useCallback(() => {\n    return Object.entries(SHORTCUT_CONFIG).map(([key, config]) => ({\n      key,\n      ...config\n    }));\n  }, []);\n\n  // Get shortcuts by category\n  const getShortcutsByCategory = useCallback(() => {\n    const categories = {\n      general: [],\n      navigation: [],\n      analysis: [],\n      data: [],\n      view: [],\n      quick: []\n    };\n\n    Object.entries(SHORTCUT_CONFIG).forEach(([key, config]) => {\n      const shortcut = { key, ...config };\n\n      if (config.action === 'navigate') {\n        categories.navigation.push(shortcut);\n      } else if (config.action.includes('analysis') || config.action === 'create-dcf' || config.action === 'monte-carlo') {\n        categories.analysis.push(shortcut);\n      } else if (config.action.includes('data') || config.action === 'import-data' || config.action === 'export-data') {\n        categories.data.push(shortcut);\n      } else if (config.action.includes('toggle') || config.action === 'help') {\n        categories.view.push(shortcut);\n      } else if (config.action === 'quick-company') {\n        categories.quick.push(shortcut);\n      } else {\n        categories.general.push(shortcut);\n      }\n    });\n\n    return categories;\n  }, []);\n\n  // Format key combination for display\n  const formatKeyCombo = useCallback((keyCombo) => {\n    return keyCombo\n      .split('+')\n      .map(key => {\n        switch (key) {\n          case 'cmd': return '';\n          case 'ctrl': return 'Ctrl';\n          case 'alt': return 'Alt';\n          case 'shift': return 'Shift';\n          case 'space': return 'Space';\n          case 'esc': return 'Esc';\n          case 'up': return '';\n          case 'down': return '';\n          case 'left': return '';\n          case 'right': return '';\n          default: return key.toUpperCase();\n        }\n      })\n      .join(' + ');\n  }, []);\n\n  // Check if a key combination is available\n  const isShortcutAvailable = useCallback((keyCombo) => {\n    return !SHORTCUT_CONFIG[keyCombo.toLowerCase()];\n  }, []);\n\n  // Register a new shortcut (for dynamic shortcuts)\n  const registerShortcut = useCallback((keyCombo, config) => {\n    const normalizedKey = keyCombo.toLowerCase();\n    if (SHORTCUT_CONFIG[normalizedKey]) {\n      console.warn(`Shortcut ${keyCombo} is already registered`);\n      return false;\n    }\n\n    SHORTCUT_CONFIG[normalizedKey] = config;\n    return true;\n  }, []);\n\n  return {\n    getAllShortcuts,\n    getShortcutsByCategory,\n    formatKeyCombo,\n    isShortcutAvailable,\n    registerShortcut\n  };\n};\n","import {\n  Calculator,\n  TrendingUp,\n  BarChart3,\n  FileText,\n  Download,\n  Upload,\n  Search,\n  Save,\n  Settings,\n  HelpCircle,\n  PieChart,\n  LineChart,\n  Activity,\n  Target,\n  Eye\n} from 'lucide-react';\nimport { useState, useEffect, useCallback } from 'react';\n\n// Natural language patterns for command matching\nconst NATURAL_LANGUAGE_PATTERNS = {\n  // Navigation patterns\n  navigation: [\n    { pattern: /(?:go to|navigate to|switch to|show me)\\s+(.+)/i, category: 'navigation' },\n    { pattern: /(?:open|view)\\s+(.+)/i, category: 'navigation' }\n  ],\n\n  // Analysis patterns\n  analysis: [\n    { pattern: /(?:create|new|build|make)\\s+(?:a\\s+)?(?:dcf|valuation|model)(?:\\s+for\\s+(.+))?/i, category: 'analysis', command: 'create-dcf' },\n    { pattern: /(?:run|perform|do)\\s+(?:a\\s+)?sensitivity\\s+(?:analysis\\s+)?(?:on\\s+(.+))?/i, category: 'analysis', command: 'sensitivity-analysis' },\n    { pattern: /(?:calculate|compute)\\s+(.+)/i, category: 'analysis' },\n    { pattern: /(?:analyze|analyse)\\s+(.+)/i, category: 'analysis' }\n  ],\n\n  // Data patterns\n  data: [\n    { pattern: /(?:find|search|look for)\\s+(.+)/i, category: 'data', command: 'search-data' },\n    { pattern: /(?:import|load)\\s+(.+)/i, category: 'data', command: 'import-data' },\n    { pattern: /(?:export|save|download)\\s+(.+)/i, category: 'export', command: 'export-data' }\n  ],\n\n  // Chart patterns\n  charts: [\n    { pattern: /(?:create|make|build|show)\\s+(?:a\\s+)?(?:chart|graph|plot)(?:\\s+for\\s+(.+))?/i, category: 'charts', command: 'create-chart' },\n    { pattern: /(?:visualize|plot)\\s+(.+)/i, category: 'charts', command: 'create-chart' }\n  ]\n};\n\n// Comprehensive command registry\nconst COMMAND_REGISTRY = {\n  // Navigation Commands\n  'go-to-data': {\n    id: 'go-to-data',\n    title: 'Go to Data Entry',\n    description: 'Navigate to financial data spreadsheet',\n    category: 'navigation',\n    icon: FileText,\n    shortcut: 'Ctrl+1',\n    keywords: ['data', 'spreadsheet', 'financial', 'entry', 'input'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'data' })\n  },\n\n  'go-to-modeling': {\n    id: 'go-to-modeling',\n    title: 'Go to Modeling Tools',\n    description: 'Navigate to financial modeling workspace',\n    category: 'navigation',\n    icon: Calculator,\n    shortcut: 'Ctrl+2',\n    keywords: ['modeling', 'tools', 'dcf', 'models'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'modeling' })\n  },\n\n  'go-to-analysis': {\n    id: 'go-to-analysis',\n    title: 'Go to Analysis Results',\n    description: 'View analysis results and outputs',\n    category: 'navigation',\n    icon: TrendingUp,\n    shortcut: 'Ctrl+3',\n    keywords: ['analysis', 'results', 'outputs', 'valuation'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'analysis' })\n  },\n\n  'go-to-lbo': {\n    id: 'go-to-lbo',\n    title: 'Advanced LBO Tool',\n    description: 'Navigate to leveraged buyout modeling workspace',\n    category: 'navigation',\n    icon: Calculator,\n    shortcut: 'Ctrl+4',\n    keywords: ['lbo', 'leveraged', 'buyout', 'private', 'equity', 'advanced'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'lbo' })\n  },\n\n  'go-to-threestatement': {\n    id: 'go-to-threestatement',\n    title: '3-Statement Model Workspace',\n    description: 'Navigate to integrated financial statement modeling',\n    category: 'navigation',\n    icon: FileText,\n    shortcut: 'Ctrl+5',\n    keywords: ['three', 'statement', 'financial', 'model', 'income', 'balance', 'cash'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'threestatement' })\n  },\n\n  'go-to-scenarios': {\n    id: 'go-to-scenarios',\n    title: 'Scenario Analysis',\n    description: 'Navigate to enhanced scenario analysis and stress testing',\n    category: 'navigation',\n    icon: TrendingUp,\n    shortcut: 'Ctrl+6',\n    keywords: ['scenario', 'analysis', 'stress', 'testing', 'sensitivity', 'multiple'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'scenarios' })\n  },\n\n  'go-to-montecarlo': {\n    id: 'go-to-montecarlo',\n    title: 'Monte Carlo Integration Hub',\n    description: 'Navigate to cross-model Monte Carlo simulation workspace',\n    category: 'navigation',\n    icon: Activity,\n    shortcut: 'Ctrl+7',\n    keywords: ['monte', 'carlo', 'simulation', 'integration', 'risk', 'probability'],\n    execute: (_params, _context) => ({ action: 'navigate', target: 'montecarlo' })\n  },\n\n  // Analysis Commands\n  'create-dcf': {\n    id: 'create-dcf',\n    title: 'Create New DCF Model',\n    description: 'Start a new discounted cash flow valuation model',\n    category: 'analysis',\n    icon: Calculator,\n    shortcut: 'Ctrl+N',\n    keywords: ['dcf', 'valuation', 'model', 'discounted', 'cash', 'flow', 'new', 'create'],\n    parameters: [\n      { name: 'company', type: 'string', description: 'Company ticker or name', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-model',\n      type: 'dcf',\n      company: params?.company || 'New Model'\n    })\n  },\n\n  'sensitivity-analysis': {\n    id: 'sensitivity-analysis',\n    title: 'Run Sensitivity Analysis',\n    description: 'Perform sensitivity analysis on key assumptions',\n    category: 'analysis',\n    icon: Target,\n    shortcut: 'Ctrl+Shift+S',\n    keywords: ['sensitivity', 'analysis', 'assumptions', 'wacc', 'growth', 'test'],\n    parameters: [\n      { name: 'variable', type: 'string', description: 'Variable to analyze (WACC, growth rate, etc.)', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'run-sensitivity',\n      variable: params?.variable || 'wacc'\n    })\n  },\n\n  'monte-carlo': {\n    id: 'monte-carlo',\n    title: 'Run Monte Carlo Simulation',\n    description: 'Perform Monte Carlo simulation on model',\n    category: 'analysis',\n    icon: Activity,\n    keywords: ['monte', 'carlo', 'simulation', 'probability', 'risk'],\n    execute: (_params, _context) => ({ action: 'run-monte-carlo' })\n  },\n\n  'create-lbo': {\n    id: 'create-lbo',\n    title: 'Create LBO Model',\n    description: 'Start a new leveraged buyout analysis model',\n    category: 'analysis',\n    icon: Calculator,\n    shortcut: 'Ctrl+Shift+L',\n    keywords: ['lbo', 'leveraged', 'buyout', 'private', 'equity', 'debt', 'returns'],\n    parameters: [\n      { name: 'company', type: 'string', description: 'Target company for LBO analysis', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-model',\n      type: 'lbo',\n      company: params?.company || 'New LBO Model'\n    })\n  },\n\n  'create-3statement': {\n    id: 'create-3statement',\n    title: 'Build 3-Statement Model',\n    description: 'Create integrated income statement, balance sheet, and cash flow model',\n    category: 'analysis',\n    icon: FileText,\n    shortcut: 'Ctrl+Shift+3',\n    keywords: ['three', 'statement', 'income', 'balance', 'cash', 'flow', 'integrated'],\n    parameters: [\n      { name: 'company', type: 'string', description: 'Company for financial modeling', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-model',\n      type: 'threestatement',\n      company: params?.company || 'New 3-Statement Model'\n    })\n  },\n\n  'scenario-analysis': {\n    id: 'scenario-analysis',\n    title: 'Run Scenario Analysis',\n    description: 'Create and analyze multiple scenarios with different assumptions',\n    category: 'analysis',\n    icon: TrendingUp,\n    shortcut: 'Ctrl+Shift+A',\n    keywords: ['scenario', 'analysis', 'multiple', 'assumptions', 'bull', 'bear', 'base'],\n    parameters: [\n      { name: 'scenarios', type: 'array', description: 'Number of scenarios to create', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-scenarios',\n      scenarios: params?.scenarios || ['Base', 'Bull', 'Bear']\n    })\n  },\n\n  // Data Commands\n  'search-data': {\n    id: 'search-data',\n    title: 'Search Financial Data',\n    description: 'Find specific financial metrics or data points',\n    category: 'data',\n    icon: Search,\n    shortcut: 'Ctrl+F',\n    keywords: ['search', 'find', 'data', 'metrics', 'revenue', 'expenses'],\n    parameters: [\n      { name: 'query', type: 'string', description: 'What to search for', required: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'search',\n      query: params?.query\n    })\n  },\n\n  'import-data': {\n    id: 'import-data',\n    title: 'Import Financial Data',\n    description: 'Import data from Excel, CSV, or other sources',\n    category: 'data',\n    icon: Upload,\n    shortcut: 'Ctrl+I',\n    keywords: ['import', 'upload', 'excel', 'csv', 'data', 'file'],\n    execute: (_params, _context) => ({ action: 'import-data' })\n  },\n\n  'export-data': {\n    id: 'export-data',\n    title: 'Export Analysis',\n    description: 'Export current analysis to PDF, Excel, or PowerPoint',\n    category: 'export',\n    icon: Download,\n    shortcut: 'Ctrl+E',\n    keywords: ['export', 'download', 'pdf', 'excel', 'powerpoint', 'save'],\n    parameters: [\n      { name: 'format', type: 'string', description: 'Export format (PDF, Excel, PowerPoint)', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'export',\n      format: params?.format || 'pdf'\n    })\n  },\n\n  // Chart Commands\n  'create-chart': {\n    id: 'create-chart',\n    title: 'Create Chart',\n    description: 'Create a visualization from your data',\n    category: 'charts',\n    icon: BarChart3,\n    keywords: ['chart', 'graph', 'visualization', 'plot', 'visualize'],\n    parameters: [\n      { name: 'type', type: 'string', description: 'Chart type (line, bar, pie, etc.)', optional: true },\n      { name: 'data', type: 'string', description: 'Data to visualize', optional: true }\n    ],\n    execute: (params, _context) => ({\n      action: 'create-chart',\n      type: params?.type || 'line',\n      data: params?.data\n    })\n  },\n\n  'revenue-chart': {\n    id: 'revenue-chart',\n    title: 'Create Revenue Chart',\n    description: 'Visualize revenue trends over time',\n    category: 'charts',\n    icon: LineChart,\n    keywords: ['revenue', 'sales', 'income', 'trend', 'growth'],\n    execute: (_params, _context) => ({\n      action: 'create-chart',\n      type: 'line',\n      data: 'revenue'\n    })\n  },\n\n  'margin-analysis': {\n    id: 'margin-analysis',\n    title: 'Analyze Margins',\n    description: 'Create margin analysis visualization',\n    category: 'charts',\n    icon: PieChart,\n    keywords: ['margin', 'profitability', 'ebitda', 'operating', 'gross'],\n    execute: (_params, _context) => ({\n      action: 'create-chart',\n      type: 'bar',\n      data: 'margins'\n    })\n  },\n\n  // Company-specific commands (dynamic)\n  'company-apple': {\n    id: 'company-apple',\n    title: 'Analyze Apple (AAPL)',\n    description: 'Create analysis for Apple Inc.',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['apple', 'aapl', 'company', 'stock'],\n    execute: (_params, _context) => ({\n      action: 'create-model',\n      company: 'AAPL'\n    })\n  },\n\n  'company-microsoft': {\n    id: 'company-microsoft',\n    title: 'Analyze Microsoft (MSFT)',\n    description: 'Create analysis for Microsoft Corporation',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['microsoft', 'msft', 'company', 'stock'],\n    execute: (_params, _context) => ({\n      action: 'create-model',\n      company: 'MSFT'\n    })\n  },\n\n  // Utility Commands\n  'save-analysis': {\n    id: 'save-analysis',\n    title: 'Save Current Analysis',\n    description: 'Save your current work',\n    category: 'data',\n    icon: Save,\n    shortcut: 'Ctrl+S',\n    keywords: ['save', 'store', 'backup'],\n    execute: (_params, _context) => ({ action: 'save' })\n  },\n\n  'toggle-insights': {\n    id: 'toggle-insights',\n    title: 'Toggle Insights Sidebar',\n    description: 'Show or hide contextual insights',\n    category: 'navigation',\n    icon: Eye,\n    keywords: ['insights', 'sidebar', 'toggle', 'show', 'hide'],\n    execute: (_params, _context) => ({ action: 'toggle-insights' })\n  },\n\n  'settings': {\n    id: 'settings',\n    title: 'Open Settings',\n    description: 'Configure application preferences',\n    category: 'settings',\n    icon: Settings,\n    keywords: ['settings', 'preferences', 'config', 'options'],\n    execute: (_params, _context) => ({ action: 'open-settings' })\n  },\n\n  'help': {\n    id: 'help',\n    title: 'Get Help',\n    description: 'Access help documentation and tutorials',\n    category: 'help',\n    icon: HelpCircle,\n    shortcut: 'F1',\n    keywords: ['help', 'documentation', 'tutorial', 'support'],\n    execute: (_params, _context) => ({ action: 'open-help' })\n  }\n};\n\nexport const useCommandRegistry = (currentContext = {}) => {\n  const [commandUsage, setCommandUsage] = useState(() => {\n    const saved = localStorage.getItem('commandUsage');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  const [userLearning, setUserLearning] = useState(() => {\n    const saved = localStorage.getItem('commandLearning');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  // Parse natural language query\n  const parseNaturalLanguage = useCallback((query) => {\n    const results = [];\n\n    for (const [_category, patterns] of Object.entries(NATURAL_LANGUAGE_PATTERNS)) {\n      for (const pattern of patterns) {\n        const match = query.match(pattern.pattern);\n        if (match) {\n          results.push({\n            category: pattern.category,\n            command: pattern.command,\n            parameters: match.slice(1).filter(Boolean),\n            confidence: match[0].length / query.length\n          });\n        }\n      }\n    }\n\n    return results.sort((a, b) => b.confidence - a.confidence);\n  }, []);\n\n  // Search commands with intelligent matching\n  const searchCommands = useCallback((query) => {\n    if (!query.trim()) return [];\n\n    const normalizedQuery = query.toLowerCase().trim();\n    const results = [];\n\n    // First, try natural language parsing\n    const nlResults = parseNaturalLanguage(query);\n\n    // Score and rank commands\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      let score = 0;\n\n      // Exact title match\n      if (command.title.toLowerCase() === normalizedQuery) {\n        score += 100;\n      }\n\n      // Title contains query\n      if (command.title.toLowerCase().includes(normalizedQuery)) {\n        score += 50;\n      }\n\n      // Description contains query\n      if (command.description.toLowerCase().includes(normalizedQuery)) {\n        score += 30;\n      }\n\n      // Keyword matches\n      const keywordMatches = command.keywords.filter(keyword =>\n        keyword.toLowerCase().includes(normalizedQuery) ||\n        normalizedQuery.includes(keyword.toLowerCase())\n      );\n      score += keywordMatches.length * 20;\n\n      // Usage frequency boost\n      const usageCount = commandUsage[command.id] || 0;\n      score += Math.min(usageCount * 2, 20);\n\n      // Context relevance\n      if (currentContext.activeTab) {\n        if (command.category === 'navigation' && command.id.includes(currentContext.activeTab)) {\n          score += 15;\n        }\n        if (command.category === currentContext.activeTab) {\n          score += 10;\n        }\n      }\n\n      // Natural language match boost\n      const nlMatch = nlResults.find(nl => nl.command === command.id);\n      if (nlMatch) {\n        score += nlMatch.confidence * 40;\n      }\n\n      if (score > 0) {\n        results.push({\n          ...command,\n          score,\n          usageCount,\n          isRecommended: score > 60\n        });\n      }\n    });\n\n    return results\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 8); // Limit to top 8 results\n  }, [parseNaturalLanguage, commandUsage, currentContext]);\n\n  // Get contextual commands based on current state\n  const getContextualCommands = useCallback(() => {\n    const contextual = [];\n\n    // Based on active tab\n    switch (currentContext.activeTab) {\n      case 'data':\n      case 'spreadsheet':\n        contextual.push(\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['search-data'],\n          COMMAND_REGISTRY['go-to-modeling']\n        );\n        break;\n      case 'modeling':\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['sensitivity-analysis'],\n          COMMAND_REGISTRY['go-to-analysis']\n        );\n        break;\n      case 'analysis':\n        contextual.push(\n          COMMAND_REGISTRY['create-chart'],\n          COMMAND_REGISTRY['export-data'],\n          COMMAND_REGISTRY['sensitivity-analysis']\n        );\n        break;\n      case 'lbo':\n        contextual.push(\n          COMMAND_REGISTRY['create-lbo'],\n          COMMAND_REGISTRY['sensitivity-analysis'],\n          COMMAND_REGISTRY['export-data']\n        );\n        break;\n      case 'threestatement':\n        contextual.push(\n          COMMAND_REGISTRY['create-3statement'],\n          COMMAND_REGISTRY['sensitivity-analysis'],\n          COMMAND_REGISTRY['go-to-scenarios']\n        );\n        break;\n      case 'scenarios':\n        contextual.push(\n          COMMAND_REGISTRY['scenario-analysis'],\n          COMMAND_REGISTRY['monte-carlo'],\n          COMMAND_REGISTRY['create-chart']\n        );\n        break;\n      case 'montecarlo':\n        contextual.push(\n          COMMAND_REGISTRY['monte-carlo'],\n          COMMAND_REGISTRY['scenario-analysis'],\n          COMMAND_REGISTRY['export-data']\n        );\n        break;\n      default:\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['help']\n        );\n    }\n\n    // Add frequently used commands\n    const frequentCommands = Object.entries(commandUsage)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 2)\n      .map(([id]) => COMMAND_REGISTRY[id])\n      .filter(Boolean);\n\n    return [...contextual, ...frequentCommands].slice(0, 6);\n  }, [currentContext, commandUsage]);\n\n  // Execute command\n  const executeCommand = useCallback(async(commandName, _params) => {\n    const command = COMMAND_REGISTRY[commandName];\n    if (!command) {\n      throw new Error(`Command not found: ${commandName}`);\n    }\n\n    try {\n      const result = await command.execute(_params, currentContext);\n\n      // Track usage\n      setCommandUsage(prev => ({\n        ...prev,\n        [commandName]: (prev[commandName] || 0) + 1\n      }));\n\n      return result;\n    } catch (error) {\n      console.error(`Command execution failed: ${commandName}`, error);\n      throw error;\n    }\n  }, [currentContext]);\n\n  // Learn from user behavior\n  const learnFromUsage = useCallback((commandId, query) => {\n    if (!query.trim()) return;\n\n    setUserLearning(prev => ({\n      ...prev,\n      [commandId]: {\n        ...prev[commandId],\n        queries: [...(prev[commandId]?.queries || []), query].slice(-5), // Keep last 5 queries\n        lastUsed: Date.now()\n      }\n    }));\n  }, []);\n\n  // Get command categories\n  const getCommandCategories = useCallback(() => {\n    const categories = {};\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      if (!categories[command.category]) {\n        categories[command.category] = [];\n      }\n      categories[command.category].push(command);\n    });\n    return categories;\n  }, []);\n\n  // Save usage data to localStorage\n  useEffect(() => {\n    localStorage.setItem('commandUsage', JSON.stringify(commandUsage));\n  }, [commandUsage]);\n\n  useEffect(() => {\n    localStorage.setItem('commandLearning', JSON.stringify(userLearning));\n  }, [userLearning]);\n\n  return {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories,\n    learnFromUsage,\n    parseNaturalLanguage,\n    commandRegistry: COMMAND_REGISTRY,\n    commandUsage,\n    userLearning\n  };\n};\n","import { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Search,\n  Command,\n  ArrowRight,\n  Clock,\n  Star,\n  TrendingUp,\n  Calculator,\n  FileText,\n  Download,\n  Upload,\n  BarChart3,\n  Users,\n  Zap,\n  Globe,\n  Settings,\n  HelpCircle\n} from 'lucide-react';\nimport { useState, useEffect, useRef, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { useCommandRegistry } from '../../hooks/useCommandRegistry';\n \n\nconst CommandPalette = ({\n  isOpen,\n  onClose,\n  onExecuteCommand,\n  currentContext = {},\n  recentCommands = [],\n  userPreferences: _userPreferences = {},\n  className: _className\n}) => {\n  const [query, setQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [_commandHistory, setCommandHistory] = useState([]);\n  const inputRef = useRef(null);\n  const listRef = useRef(null);\n  const dialogRef = useRef(null);\n  const openTimestampRef = useRef(null);\n  const monitoringRef = useRef(null);\n\n  // Lazy-load monitoring utilities to keep them out of primary chunks\n  const getMonitoring = async () => {\n    if (monitoringRef.current) return monitoringRef.current;\n    try {\n      const mod = await import('../../utils/monitoring');\n      const api = mod?.default || mod;\n      monitoringRef.current = api;\n      return api;\n    } catch (_e) {\n      // Fallback no-op implementation to avoid conditional checks\n      const noop = { trackEvent: () => {}, trackError: () => {} };\n      monitoringRef.current = noop;\n      return noop;\n    }\n  };\n\n  // Get command registry and search functionality\n  const {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories: _getCommandCategories,\n    learnFromUsage\n  } = useCommandRegistry(currentContext);\n\n  // Search results based on query\n  const searchResults = useMemo(() => {\n    if (!query.trim()) {\n      // Show recent commands and contextual suggestions when no query\n      const recent = recentCommands.slice(0, 3).map(cmd => ({ ...cmd, category: 'recent' }));\n      const contextual = getContextualCommands().slice(0, 4).map(cmd => ({ ...cmd, category: 'suggested' }));\n      const popular = [\n        {\n          id: 'new-dcf',\n          title: 'Create New DCF Model',\n          description: 'Start a new discounted cash flow valuation',\n          icon: Calculator,\n          category: 'popular',\n          keywords: ['dcf', 'valuation', 'model', 'new']\n        },\n        {\n          id: 'sensitivity-analysis',\n          title: 'Run Sensitivity Analysis',\n          description: 'Test assumptions with sensitivity analysis',\n          icon: TrendingUp,\n          category: 'popular',\n          keywords: ['sensitivity', 'analysis', 'wacc', 'assumptions']\n        }\n      ];\n\n      return [...recent, ...contextual, ...popular];\n    }\n\n    return searchCommands(query);\n  }, [query, recentCommands, searchCommands, getContextualCommands]);\n\n  // Reset selection when results change\n  useEffect(() => {\n    setSelectedIndex(0);\n  }, [searchResults]);\n\n  // Focus input when opened\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      inputRef.current.focus();\n      setQuery('');\n      setSelectedIndex(0);\n      // Mark palette open time and emit telemetry\n      openTimestampRef.current = performance.now();\n      getMonitoring()\n        .then((mon) => {\n          try {\n            mon.trackEvent('command_palette_open', {\n              page: currentContext?.page,\n              context: currentContext,\n              recentCount: recentCommands?.length || 0\n            });\n          } catch (e) {\n            console.warn('Monitoring: command_palette_open failed', e);\n          }\n        })\n        .catch(() => {});\n    }\n  }, [isOpen]);\n\n  // Keyboard navigation and focus trap\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleKeyDown = (e) => {\n      // Arrow/Enter/Escape behavior\n      if (['ArrowDown', 'ArrowUp', 'Enter', 'Escape'].includes(e.key)) {\n        switch (e.key) {\n          case 'ArrowDown':\n            e.preventDefault();\n            setSelectedIndex(prev => Math.min(prev + 1, searchResults.length - 1));\n            break;\n          case 'ArrowUp':\n            e.preventDefault();\n            setSelectedIndex(prev => Math.max(prev - 1, 0));\n            break;\n          case 'Enter':\n            e.preventDefault();\n            if (searchResults[selectedIndex]) {\n              handleExecuteCommand(searchResults[selectedIndex]);\n            }\n            break;\n          case 'Escape':\n            e.preventDefault();\n            onClose();\n            break;\n          default:\n            break;\n        }\n        return;\n      }\n\n      // Focus trap for Tab/Shift+Tab inside dialog\n      if (e.key === 'Tab' && dialogRef.current) {\n        const focusableSelectors = [\n          'a[href]',\n          'button:not([disabled])',\n          'textarea:not([disabled])',\n          'input:not([disabled])',\n          'select:not([disabled])',\n          '[tabindex]:not([tabindex=\"-1\"])'\n        ].join(',');\n        const focusables = Array.from(dialogRef.current.querySelectorAll(focusableSelectors))\n          .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));\n        if (focusables.length === 0) return;\n\n        const first = focusables[0];\n        const last = focusables[focusables.length - 1];\n        const active = document.activeElement;\n\n        if (!e.shiftKey && active === last) {\n          e.preventDefault();\n          first.focus();\n        } else if (e.shiftKey && active === first) {\n          e.preventDefault();\n          last.focus();\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, selectedIndex, searchResults, onClose]);\n\n  // Execute command\n  const handleExecuteCommand = async(command) => {\n    try {\n      // Add to command history\n      setCommandHistory(prev => [command, ...prev.slice(0, 9)]);\n\n      // Learn from usage\n      learnFromUsage(command.id, query);\n\n      // Execute the command\n      const execStart = performance.now();\n      const result = await executeCommand(command.id, command.params);\n      const execEnd = performance.now();\n\n      // Emit telemetry for command execution\n      try {\n        const openedAt = openTimestampRef.current || execStart;\n        const mon = await getMonitoring();\n        mon.trackEvent('command_execute', {\n          commandId: command.id,\n          query,\n          page: currentContext?.page,\n          context: currentContext,\n          latencyOpenMs: Math.max(0, Math.round(execStart - openedAt)),\n          execDurationMs: Math.max(0, Math.round(execEnd - execStart))\n        });\n      } catch (e) {\n        console.warn('Monitoring: command_execute failed', e);\n      }\n\n      // Notify parent component\n      if (onExecuteCommand) {\n        onExecuteCommand(command, result);\n      }\n\n      // Close palette\n      onClose();\n    } catch (error) {\n      console.error('Command execution failed:', error);\n      try {\n        const mon = await getMonitoring();\n        mon.trackError(error, 'command_execution', { commandId: command?.id, page: currentContext?.page });\n      } catch (e) {\n        console.warn('Monitoring: trackError failed', e);\n      }\n      // Could show error toast here\n    }\n  };\n\n  // Get category icon\n  const getCategoryIcon = (category) => {\n    switch (category) {\n      case 'recent': return Clock;\n      case 'suggested': return Star;\n      case 'popular': return TrendingUp;\n      case 'navigation': return ArrowRight;\n      case 'analysis': return Calculator;\n      case 'data': return FileText;\n      case 'export': return Download;\n      case 'import': return Upload;\n      case 'charts': return BarChart3;\n      case 'collaboration': return Users;\n      case 'automation': return Zap;\n      case 'external': return Globe;\n      case 'settings': return Settings;\n      case 'help': return HelpCircle;\n      default: return Command;\n    }\n  };\n\n  // Get category color\n  const getCategoryColor = (category) => {\n    switch (category) {\n      case 'recent': return 'text-blue-500';\n      case 'suggested': return 'text-amber-500';\n      case 'popular': return 'text-emerald-500';\n      case 'navigation': return 'text-slate-500';\n      case 'analysis': return 'text-purple-500';\n      case 'data': return 'text-indigo-500';\n      case 'export': return 'text-green-500';\n      case 'import': return 'text-orange-500';\n      case 'charts': return 'text-pink-500';\n      case 'collaboration': return 'text-cyan-500';\n      case 'automation': return 'text-red-500';\n      case 'external': return 'text-gray-500';\n      case 'settings': return 'text-slate-600';\n      case 'help': return 'text-blue-600';\n      default: return 'text-slate-500';\n    }\n  };\n\n  // Highlight matching text\n  const highlightMatch = (text, query) => {\n    if (!query.trim()) return text;\n\n    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\n    const parts = text.split(regex);\n\n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded\">\n          {part}\n        </mark>\n      ) : part\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return createPortal(\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1200] flex items-start justify-center pt-20\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95, y: -20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: -20 }}\n          transition={{ type: 'spring', duration: 0.3 }}\n          className=\"bg-white rounded-xl shadow-2xl border border-slate-200 w-full max-w-2xl mx-4 overflow-hidden\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-labelledby=\"command-palette-title\"\n          ref={dialogRef}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center gap-3 p-4 border-b border-slate-100 bg-slate-50\">\n            <div className=\"p-2 bg-blue-500 rounded-lg\">\n              <Command size={18} className=\"text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 id=\"command-palette-title\" className=\"font-semibold text-slate-900\">Command Palette</h3>\n              <p className=\"text-xs text-slate-500\">Type to search commands, or use natural language</p>\n            </div>\n            <div className=\"flex items-center gap-1 text-xs text-slate-500\">\n              <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">Esc</kbd>\n              <span>to close</span>\n            </div>\n          </div>\n\n          {/* Search Input */}\n          <div className=\"relative p-4 border-b border-slate-100\">\n            <div className=\"relative\">\n              <Search size={18} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" />\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Type a command or just describe what you'd like to do...\"\n                className=\"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-900 placeholder-slate-500\"\n              />\n            </div>\n\n            {/* Quick tips */}\n            {!query && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                <span className=\"text-xs text-slate-500\">Try:</span>\n                {['New DCF for AAPL', 'Run sensitivity on WACC', 'Export to PDF', 'Find revenue data'].map((tip) => (\n                  <button\n                    key={tip}\n                    onClick={() => setQuery(tip)}\n                    className=\"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors\"\n                  >\n                    &quot;{tip}&quot;\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Results */}\n          <div className=\"max-h-96 overflow-y-auto\" ref={listRef}>\n            {searchResults.length === 0 ? (\n              <div className=\"p-8 text-center\">\n                <div className=\"p-3 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n                  <Search size={24} className=\"text-slate-400\" />\n                </div>\n                <h4 className=\"font-medium text-slate-900 mb-2\">No commands found</h4>\n                <p className=\"text-sm text-slate-500\">\n                  Try a different search term or use natural language to describe what you want to do.\n                </p>\n              </div>\n            ) : (\n              <div className=\"py-2\">\n                {searchResults.map((command, index) => {\n                  const CategoryIcon = getCategoryIcon(command.category);\n                  const CommandIcon = command.icon;\n                  const isSelected = index === selectedIndex;\n\n                  return (\n                    <motion.div\n                      key={`${command.id}-${index}`}\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.05 }}\n                      className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-all duration-150 ${\n                        isSelected\n                          ? 'bg-blue-50 border-r-2 border-blue-500'\n                          : 'hover:bg-slate-50'\n                      }`}\n                      role=\"option\"\n                      tabIndex={0}\n                      aria-selected={isSelected}\n                      onClick={() => handleExecuteCommand(command)}\n                      onFocus={() => setSelectedIndex(index)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                          e.preventDefault();\n                          handleExecuteCommand(command);\n                        }\n                      }}\n                    >\n                      {/* Category indicator */}\n                      <div\n                        className={`p-1.5 rounded-md ${\n                          isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                        }`}\n                      >\n                        <CategoryIcon size={12} className={getCategoryColor(command.category)} />\n                      </div>\n\n                      {/* Command icon */}\n                      {CommandIcon && (\n                        <div\n                          className={`p-2 rounded-lg ${\n                            isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                          }`}\n                        >\n                          <CommandIcon\n                            size={16} className={\n                              isSelected ? 'text-blue-600' : 'text-slate-600'\n                            }\n                          />\n                        </div>\n                      )}\n\n                      {/* Command details */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4\n                            className={`font-medium truncate ${\n                              isSelected ? 'text-blue-900' : 'text-slate-900'\n                            }`}\n                          >\n                            {highlightMatch(command.title, query)}\n                          </h4>\n                          {command.shortcut && (\n                            <div className=\"flex items-center gap-1\">\n                              {command.shortcut.split('+').map((key, idx) => (\n                                <kbd key={idx} className=\"px-1.5 py-0.5 bg-slate-200 text-slate-600 text-xs rounded\">\n                                  {key}\n                                </kbd>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                        <p\n                          className={`text-sm truncate ${\n                            isSelected ? 'text-blue-700' : 'text-slate-500'\n                          }`}\n                        >\n                          {highlightMatch(command.description, query)}\n                        </p>\n\n                        {/* Command metadata */}\n                        <div className=\"flex items-center gap-3 mt-1\">\n                          <span\n                            className={`text-xs px-2 py-0.5 rounded-full ${\n                              isSelected ? 'bg-blue-100 text-blue-700' : 'bg-slate-100 text-slate-600'\n                            }`}\n                          >\n                            {command.category}\n                          </span>\n                          {command.usageCount && (\n                            <span className=\"text-xs text-slate-400\">\n                              Used {command.usageCount} times\n                            </span>\n                          )}\n                          {command.isNew && (\n                            <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">\n                              New\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Execute indicator */}\n                      {isSelected && (\n                        <motion.div\n                          initial={{ opacity: 0, x: -10 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          className=\"text-blue-500\"\n                        >\n                          <ArrowRight size={16} />\n                        </motion.div>\n                      )}\n                    </motion.div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\"></kbd>\n                <span>Navigate</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">Enter</kbd>\n                <span>Execute</span>\n              </div>\n            </div>\n            <div className=\"text-slate-400\">\n              {searchResults.length} command{searchResults.length !== 1 ? 's' : ''} available\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>,\n    document.body\n  );\n};\n\nexport default CommandPalette;\n","import { X, Command, Search, Zap, KeyboardIcon } from 'lucide-react';\nimport React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\nimport { cn } from '../../utils/cn';\n\n/**\n * Keyboard Shortcuts Help Panel\n * Displays all available shortcuts organized by category\n */\n\nexport const KeyboardShortcutsHelp = ({ isOpen, onClose }) => {\n  const [activeCategory, setActiveCategory] = useState('general');\n  const { getShortcutsByCategory, formatKeyCombo } = useKeyboardShortcuts();\n\n  if (!isOpen) return null;\n\n  const shortcuts = getShortcutsByCategory();\n\n  const categories = [\n    { id: 'general', label: 'General', icon: Command },\n    { id: 'navigation', label: 'Navigation', icon: Search },\n    { id: 'analysis', label: 'Analysis', icon: Zap },\n    { id: 'data', label: 'Data', icon: KeyboardIcon },\n    { id: 'view', label: 'View', icon: Command },\n    { id: 'quick', label: 'Quick Access', icon: Zap }\n  ];\n\n  return createPortal(\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-slate-200\">\n          <div className=\"flex items-center space-x-3\">\n            <KeyboardIcon className=\"w-6 h-6 text-blue-600\" />\n            <h2 className=\"text-xl font-semibold text-slate-900\">Keyboard Shortcuts</h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"flex h-[calc(90vh-80px)]\">\n          {/* Sidebar */}\n          <div className=\"w-64 bg-slate-50 border-r border-slate-200 overflow-y-auto\">\n            <div className=\"p-4\">\n              <h3 className=\"text-sm font-medium text-slate-900 mb-3\">Categories</h3>\n              <nav className=\"space-y-1\">\n                {categories.map(category => {\n                  const Icon = category.icon;\n                  const shortcutCount = shortcuts[category.id]?.length || 0;\n\n                  return (\n                    <button\n                      key={category.id}\n                      onClick={() => setActiveCategory(category.id)}\n                      className={cn(\n                        'w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors',\n                        activeCategory === category.id\n                          ? 'bg-blue-100 text-blue-900'\n                          : 'text-slate-700 hover:bg-slate-100'\n                      )}\n                    >\n                      <div className=\"flex items-center space-x-2\">\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{category.label}</span>\n                      </div>\n                      <span className=\"text-xs text-slate-500\">{shortcutCount}</span>\n                    </button>\n                  );\n                })}\n              </nav>\n            </div>\n\n            {/* Tips */}\n            <div className=\"p-4 border-t border-slate-200\">\n              <h4 className=\"text-sm font-medium text-slate-900 mb-2\">Pro Tips</h4>\n              <ul className=\"text-xs text-slate-600 space-y-1\">\n                <li> Use Cmd+K (Ctrl+K) for command palette</li>\n                <li> Hold Shift for additional shortcuts</li>\n                <li> Shortcuts work globally except in text inputs</li>\n                <li> F1 opens context-sensitive help</li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">\n                  {categories.find(c => c.id === activeCategory)?.label} Shortcuts\n                </h3>\n                <p className=\"text-sm text-slate-600\">\n                  {shortcuts[activeCategory]?.length || 0} shortcuts available in this category\n                </p>\n              </div>\n\n              {shortcuts[activeCategory]?.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {shortcuts[activeCategory].map((shortcut, index) => (\n                    <div\n                      key={`${shortcut.key}-${index}`}\n                      className=\"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors\"\n                    >\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium text-slate-900 mb-1\">\n                          {shortcut.description}\n                        </div>\n                        {shortcut.target && (\n                          <div className=\"text-xs text-slate-500\">\n                            Target: {shortcut.target}\n                          </div>\n                        )}\n                        {shortcut.company && (\n                          <div className=\"text-xs text-slate-500\">\n                            Company: {shortcut.company}\n                          </div>\n                        )}\n                      </div>\n                      <div className=\"ml-4\">\n                        <kbd className=\"inline-flex items-center px-3 py-1.5 bg-white border border-slate-300 rounded-md shadow-sm text-sm font-mono text-slate-900\">\n                          {formatKeyCombo(shortcut.key)}\n                        </kbd>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-12\">\n                  <KeyboardIcon className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\n                  <p className=\"text-slate-500\">No shortcuts available in this category</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-6 py-4 border-t border-slate-200 bg-slate-50\">\n          <div className=\"flex items-center justify-between text-sm text-slate-600\">\n            <div>\n              Press <kbd className=\"px-2 py-1 bg-white border border-slate-300 rounded\">Esc</kbd> to close\n            </div>\n            <div>\n              Total: {Object.values(shortcuts).flat().length} shortcuts\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>,\n    document.body\n  );\n};\n\nexport default KeyboardShortcutsHelp;\n","import React, { useState, useCallback, createContext, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\nimport CommandPalette from '../CommandPalette/CommandPalette';\n\nimport KeyboardShortcutsHelp from './KeyboardShortcutsHelp';\n\n/**\n * Keyboard Shortcuts Provider\n * Provides global keyboard shortcuts functionality across the application\n */\n\nconst KeyboardShortcutsContext = createContext();\n\nexport const useKeyboardShortcutsContext = () => {\n  const context = useContext(KeyboardShortcutsContext);\n  if (!context) {\n    throw new Error('useKeyboardShortcutsContext must be used within KeyboardShortcutsProvider');\n  }\n  return context;\n};\n\nexport const KeyboardShortcutsProvider = ({ children }) => {\n  const navigate = useNavigate();\n  const [showCommandPalette, setShowCommandPalette] = useState(false);\n  const [showShortcutsHelp, setShowShortcutsHelp] = useState(false);\n  const [recentCommands, setRecentCommands] = useState([]);\n  const [currentContext, setCurrentContext] = useState({});\n\n  // Define command handlers\n  const commandHandlers = {\n    'open-command-palette': () => setShowCommandPalette(true),\n    'navigate': (shortcut) => navigate(shortcut.target),\n    'create-dcf': () => {\n      navigate('/private-analysis');\n      // Trigger DCF creation after navigation\n      setTimeout(() => {\n        const event = new CustomEvent('create-dcf-model');\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'create-lbo': () => {\n      navigate('/private-analysis');\n      setTimeout(() => {\n        const event = new CustomEvent('create-lbo-model');\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'save': () => {\n      const event = new CustomEvent('save-analysis');\n      window.dispatchEvent(event);\n    },\n    'import-data': () => {\n      const event = new CustomEvent('import-data');\n      window.dispatchEvent(event);\n    },\n    'export-data': () => {\n      const event = new CustomEvent('export-data');\n      window.dispatchEvent(event);\n    },\n    'search-data': () => {\n      const event = new CustomEvent('search-data');\n      window.dispatchEvent(event);\n    },\n    'sensitivity-analysis': () => {\n      const event = new CustomEvent('run-sensitivity-analysis');\n      window.dispatchEvent(event);\n    },\n    'monte-carlo': () => {\n      const event = new CustomEvent('run-monte-carlo');\n      window.dispatchEvent(event);\n    },\n    'toggle-insights': () => {\n      const event = new CustomEvent('toggle-insights-sidebar');\n      window.dispatchEvent(event);\n    },\n    'help': () => setShowShortcutsHelp(true),\n    'quick-company': (shortcut) => {\n      navigate(`/market-analysis?symbol=${shortcut.company}`);\n    },\n    'open-options-pricer': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'options' } });\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'open-bond-analytics': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'fixed-income' } });\n        window.dispatchEvent(event);\n      }, 100);\n    },\n    'open-credit-modeling': () => {\n      navigate('/advanced-analytics');\n      setTimeout(() => {\n        const event = new CustomEvent('select-tab', { detail: { tab: 'credit' } });\n        window.dispatchEvent(event);\n      }, 100);\n    }\n  };\n\n  // Initialize keyboard shortcuts\n  useKeyboardShortcuts(commandHandlers);\n\n  // Handle post-execution from the canonical command palette\n  // The canonical palette executes via useCommandRegistry. We only track recents here.\n  const handlePostExecute = useCallback((command /* , result */) => {\n    setRecentCommands(prev => {\n      const filtered = prev.filter(cmd => cmd.id !== command.id);\n      return [command, ...filtered].slice(0, 5);\n    });\n  }, []);\n\n  const contextValue = {\n    showCommandPalette: () => setShowCommandPalette(true),\n    showShortcutsHelp: () => setShowShortcutsHelp(true),\n    // Expose a no-op executeCommand for compatibility; palette handles execution\n    executeCommand: () => {},\n    recentCommands,\n    updateCommandContext: (ctx) => setCurrentContext(prev => ({ ...prev, ...ctx }))\n  };\n\n  return (\n    <KeyboardShortcutsContext.Provider value={contextValue}>\n      {children}\n\n      {/* Command Palette */}\n      <CommandPalette\n        isOpen={showCommandPalette}\n        onClose={() => setShowCommandPalette(false)}\n        onExecuteCommand={handlePostExecute}\n        currentContext={currentContext}\n        recentCommands={recentCommands}\n      />\n\n      {/* Shortcuts Help */}\n      <KeyboardShortcutsHelp\n        isOpen={showShortcutsHelp}\n        onClose={() => setShowShortcutsHelp(false)}\n      />\n    </KeyboardShortcutsContext.Provider>\n  );\n};\n","import { cn } from '../../utils/cn';\n\nconst LoadingSpinner = ({\n  size = 'default',\n  className = '',\n  text = 'Loading...',\n  showText = true,\n  variant = 'primary'\n}) => {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    default: 'w-8 h-8',\n    lg: 'w-12 h-12',\n    xl: 'w-16 h-16'\n  };\n\n  const variantClasses = {\n    primary: 'text-primary',\n    secondary: 'text-secondary',\n    muted: 'text-muted-foreground',\n    white: 'text-white'\n  };\n\n  const textSizeClasses = {\n    sm: 'text-xs',\n    default: 'text-sm',\n    lg: 'text-base',\n    xl: 'text-lg'\n  };\n\n  return (\n    <div className={cn('flex flex-col items-center justify-center space-y-2', className)}>\n      <div\n        className={cn(\n          'animate-spin rounded-full border-2 border-current border-t-transparent',\n          sizeClasses[size],\n          variantClasses[variant]\n        )}\n      />\n      {showText && (\n        <p className={cn('font-medium', textSizeClasses[size], variantClasses[variant])}>{text}</p>\n      )}\n    </div>\n  );\n};\n\n// Full page loading spinner\nexport const FullPageLoader = ({ text = 'Loading FinanceAnalyst Pro...' }) => {\n  return (\n    <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center\">\n      <div className=\"bg-card border border-border rounded-lg p-8 shadow-elevation-2\">\n        <LoadingSpinner size=\"lg\" text={text} variant=\"primary\" />\n      </div>\n    </div>\n  );\n};\n\n// Inline loading spinner for buttons\nexport const ButtonSpinner = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'animate-spin rounded-full border-2 border-current border-t-transparent w-4 h-4',\n        className\n      )}\n    />\n  );\n};\n\n// Skeleton loader for content\nexport const SkeletonLoader = ({ lines = 3, className = '', animated = true }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={cn(\n            'h-4 bg-muted rounded',\n            animated && 'animate-pulse',\n            index === lines - 1 && 'w-3/4' // Last line shorter\n          )}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Chart loading placeholder\nexport const ChartLoader = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-center h-64 bg-muted/20 rounded-lg border-2 border-dashed border-muted',\n        className\n      )}\n    >\n      <div className=\"text-center space-y-2\">\n        <LoadingSpinner size=\"lg\" variant=\"muted\" showText={false} />\n        <p className=\"text-sm text-muted-foreground\">Loading chart data...</p>\n      </div>\n    </div>\n  );\n};\n\n// Table loading placeholder\nexport const TableLoader = ({ rows = 5, columns = 4, className = '' }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Header */}\n      <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className=\"h-6 bg-muted rounded animate-pulse\" />\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className=\"grid gap-4\"\n          style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div\n              key={`cell-${rowIndex}-${colIndex}`}\n              className=\"h-4 bg-muted/60 rounded animate-pulse\"\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","/* eslint-disable indent, react/jsx-indent */\nimport { Suspense, lazy, useEffect } from 'react';\nimport { BrowserRouter, Routes as RouterRoutes, Route, useLocation } from 'react-router-dom';\n\nimport ErrorBoundary from './components/ErrorBoundary';\nimport ScrollToTop from './components/ScrollToTop';\nimport { KeyboardShortcutsProvider } from './components/ui/KeyboardShortcutsProvider';\nimport LoadingSpinner from './components/ui/LoadingSpinner';\n\n// Lazy load pages for code splitting and better performance\nconst FinancialModelWorkspace = lazy(() => import('./pages/financial-model-workspace'));\nconst RealTimeMarketDataCenter = lazy(() => import('./pages/real-time-market-data-center'));\nconst ScenarioAnalysisSensitivityTools = lazy(\n  () => import('./pages/scenario-analysis-sensitivity-tools')\n);\nconst ValuationTool = lazy(() => import('./components/ValuationTool/ValuationTool'));\nconst ValuationToolDocs = lazy(() => import('./components/ValuationTool/ValuationToolDocs'));\nconst ValuationToolDemo = lazy(() => import('./pages/valuation-tool-demo'));\nconst PrivateAnalysis = lazy(() => import('./pages/PrivateAnalysis'));\nconst ValuationWorkbench = lazy(() => import('./pages/ValuationWorkbench'));\nconst ModelLab = lazy(() => import('./pages/ModelLab'));\nconst PortfolioManagement = lazy(() => import('./pages/PortfolioManagement'));\nconst ThesisCanvas = lazy(() => import('./pages/ThesisCanvas'));\nconst AdvancedCharting = lazy(() => import('./pages/AdvancedCharting'));\nconst MarketAnalysis = lazy(() => import('./pages/MarketAnalysis'));\nconst Reports = lazy(() => import('./pages/Reports'));\nconst Settings = lazy(() => import('./pages/Settings'));\nconst AIInsights = lazy(() => import('./pages/AIInsights'));\nconst Analytics = lazy(() => import('./pages/Analytics'));\nconst AdvancedAnalytics = lazy(() => import('./pages/AdvancedAnalytics'));\nconst FinancialInputsDemo = lazy(() => import('./components/FinancialInputsDemo'));\nconst Models = lazy(() => import('./pages/Models'));\nconst App = lazy(() => import('./pages/App'));\nconst Data = lazy(() => import('./pages/Data'));\nconst Integrations = lazy(() => import('./pages/Integrations'));\nconst NotFound = lazy(() => import('./pages/NotFound'));\nconst MonitoringDebugPanel = lazy(() => import('./components/MonitoringDebugPanel'));\n\n// Detect automated/CI environments (Playwright, LHCI, etc.)\nconst isAutomatedEnv = (() => {\n  try {\n    const params = new URLSearchParams(window.location.search);\n    return (\n      navigator.webdriver === true ||\n      params.has('lhci') ||\n      params.has('ci') ||\n      params.has('audit')\n    );\n  } catch {\n    return navigator.webdriver === true;\n  }\n})();\n\n// Track route changes for analytics (disabled in automated envs)\nconst RouteChangeTracker = () => {\n  const location = useLocation();\n\n  useEffect(() => {\n    const path = location.pathname + (location.search || '');\n    if (isAutomatedEnv) return;\n    // Dynamically import monitoring to avoid side effects during tests\n    import('./utils/monitoring')\n      .then((mod) => {\n        if (mod?.default?.trackPageView) {\n          mod.default.trackPageView(path);\n        }\n      })\n      .catch(() => {\n        // Optional analytics; ignore errors in non-critical paths\n      });\n  }, [location.pathname, location.search]);\n\n  return null;\n};\n\nconst Routes = () => {\n  return (\n    <BrowserRouter>\n      <ErrorBoundary>\n        <ScrollToTop />\n        <RouteChangeTracker />\n        <KeyboardShortcutsProvider>\n          <Suspense fallback={<LoadingSpinner />}>\n            <RouterRoutes>\n            {/* Define your routes here */}\n            <Route path=\"/\" element={<FinancialModelWorkspace />} />\n            <Route path=\"/financial-model-workspace\" element={<FinancialModelWorkspace />} />\n            <Route path=\"/real-time-market-data-center\" element={<RealTimeMarketDataCenter />} />\n            <Route\n              path=\"/scenario-analysis-sensitivity-tools\"\n              element={<ScenarioAnalysisSensitivityTools />}\n            />\n            <Route path=\"/valuation-tool\" element={<ValuationTool />} />\n            <Route path=\"/valuation-tool/docs\" element={<ValuationToolDocs />} />\n            <Route path=\"/valuation-tool/demo\" element={<ValuationToolDemo />} />\n            <Route path=\"/valuation-workbench\" element={<ValuationWorkbench />} />\n            <Route path=\"/model-lab\" element={<ModelLab />} />\n            <Route path=\"/advanced-charts\" element={<AdvancedCharting />} />\n            <Route path=\"/market-analysis\" element={<MarketAnalysis />} />\n            <Route path=\"/reports\" element={<Reports />} />\n            <Route path=\"/settings\" element={<Settings />} />\n            <Route path=\"/ai-insights\" element={<AIInsights />} />\n            <Route path=\"/analytics\" element={<Analytics />} />\n            <Route path=\"/advanced-analytics\" element={<AdvancedAnalytics />} />\n            <Route path=\"/portfolio-management\" element={<PortfolioManagement />} />\n            <Route path=\"/portfolio\" element={<PortfolioManagement />} />\n            <Route path=\"/models\" element={<Models />} />\n            <Route path=\"/app\" element={<App />} />\n            <Route path=\"/data\" element={<Data />} />\n            <Route path=\"/integrations\" element={<Integrations />} />\n            <Route path=\"/canvas\" element={<ThesisCanvas />} />\n            <Route path=\"/private-analysis\" element={<PrivateAnalysis />} />\n            <Route path=\"/financial-inputs-demo\" element={<FinancialInputsDemo />} />\n            {(import.meta.env.VITE_ENABLE_DEBUG_MODE === 'true' || import.meta.env.VITE_APP_ENV !== 'production') && (\n              <Route path=\"/monitoring-debug\" element={<MonitoringDebugPanel />} />\n            )}\n            <Route path=\"*\" element={<NotFound />} />\n            </RouterRoutes>\n          </Suspense>\n        </KeyboardShortcutsProvider>\n      </ErrorBoundary>\n    </BrowserRouter>\n  );\n};\n\nexport default Routes;\n","import { useEffect, useState } from 'react';\n\nimport AIFinancialAssistant from './components/AIAssistant/AIFinancialAssistant';\nimport PersistentCLI from './components/CLI/PersistentCLI';\nimport ErrorBoundary from './components/ErrorBoundary';\nimport PerformanceDashboard from './components/PerformanceDashboard';\nimport SEOProvider from './components/SEO/SEOProvider';\nimport { usePerformanceDashboard } from './hooks/usePerformanceDashboard';\nimport Routes from './Routes';\n\nfunction App() {\n  const { isVisible, hideDashboard } = usePerformanceDashboard();\n  const [isAIAssistantOpen, setIsAIAssistantOpen] = useState(false);\n  const [currentContext, setCurrentContext] = useState({\n    path: window.location.pathname,\n    timestamp: new Date().toISOString()\n  });\n  const [portfolioData, _setPortfolioData] = useState(null);\n  const [marketData, _setMarketData] = useState(null);\n\n  // Initialize performance monitoring on app start\n  useEffect(() => {\n    import('./utils/performanceMonitoring')\n      .then((mod) => {\n        if (mod?.initializePerformanceMonitoring) {\n          mod.initializePerformanceMonitoring();\n        }\n      })\n      .catch(() => {\n        // Performance monitoring is optional; ignore errors\n      });\n  }, []);\n\n  // Update context when route changes\n  useEffect(() => {\n    setCurrentContext({\n      path: window.location.pathname,\n      timestamp: new Date().toISOString()\n    });\n  }, [window.location.pathname]);\n\n  // Removed local Cmd/Ctrl+K handler to reserve it for the global command palette\n\n  const handleNavigation = (route) => {\n    window.location.href = route;\n  };\n\n  return (\n    <ErrorBoundary>\n      <SEOProvider>\n        <Routes />\n        <PerformanceDashboard\n          isVisible={isVisible}\n          onClose={hideDashboard}\n        />\n        <AIFinancialAssistant\n          isOpen={isAIAssistantOpen}\n          onToggle={() => setIsAIAssistantOpen(prev => !prev)}\n          currentContext={currentContext}\n          portfolioData={portfolioData}\n          marketData={marketData}\n        />\n        {/* Persistent CLI - Always visible at bottom */}\n        <PersistentCLI\n          currentContext={currentContext}\n          portfolioData={portfolioData}\n          marketData={marketData}\n          onNavigate={handleNavigation}\n        />\n        {/* Floating AI Assistant Button */}\n        {!isAIAssistantOpen && (\n          <button\n            onClick={() => setIsAIAssistantOpen(true)}\n            className=\"fixed bottom-20 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 z-40\"\n          >\n            <svg\n              className=\"w-6 h-6\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n              />\n            </svg>\n          </button>\n        )}\n      </SEOProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import { useState, useCallback, useEffect } from 'react';\n\n// Hook for managing performance dashboard visibility and hotkey\nexport function usePerformanceDashboard() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const toggleDashboard = useCallback(() => {\n    setIsVisible(prev => !prev);\n  }, []);\n\n  const showDashboard = useCallback(() => {\n    setIsVisible(true);\n  }, []);\n\n  const hideDashboard = useCallback(() => {\n    setIsVisible(false);\n  }, []);\n\n  // Keyboard shortcut for dashboard (Ctrl/Cmd + Shift + P)\n  useEffect(() => {\n    const handleKeyDown = (event) => {\n      if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key === 'P') {\n        event.preventDefault();\n        toggleDashboard();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [toggleDashboard]);\n\n  // Show dashboard automatically in development if there are performance issues\n  useEffect(() => {\n    if (import.meta.env.DEV) {\n      // Check for performance budget violations after page load\n      const checkPerformanceIssues = () => {\n        // This would integrate with your performance monitoring\n        const webVitals = window.webVitalsData;\n        if (webVitals) {\n          const hasIssues =\n            (webVitals.LCP && webVitals.LCP > 2500) ||\n            (webVitals.FID && webVitals.FID > 100) ||\n            (webVitals.CLS && webVitals.CLS > 0.1);\n\n          if (hasIssues) {\n            console.warn('Performance issues detected. Press Ctrl/Cmd + Shift + P to open dashboard.');\n          }\n        }\n      };\n\n      // Check after initial page load\n      setTimeout(checkPerformanceIssues, 3000);\n    }\n  }, []);\n\n  return {\n    isVisible,\n    toggleDashboard,\n    showDashboard,\n    hideDashboard\n  };\n}\n","import { configureStore, createSlice } from '@reduxjs/toolkit';\n\n// Analysis slice for unified state management\nconst analysisSlice = createSlice({\n  name: 'analysis',\n  initialState: {\n    // Financial data shared across all models\n    financialData: null,\n    adjustedValues: {},\n\n    // Model-specific results\n    dcf: {\n      inputs: null,\n      results: null,\n      status: 'idle', // 'idle' | 'loading' | 'succeeded' | 'failed'\n      error: null,\n      lastCalculated: null\n    },\n    lbo: {\n      inputs: null,\n      results: null,\n      status: 'idle',\n      error: null,\n      lastCalculated: null\n    },\n    threeStatement: {\n      inputs: null,\n      results: null,\n      status: 'idle',\n      error: null,\n      lastCalculated: null\n    },\n    scenarios: {\n      scenarios: [],\n      results: null,\n      status: 'idle',\n      error: null,\n      lastCalculated: null\n    },\n    monteCarlo: {\n      settings: {\n        iterations: 10000,\n        confidenceLevel: 0.95,\n        correlationsEnabled: true,\n        crossModelAnalysis: true\n      },\n      results: null,\n      status: 'idle',\n      error: null,\n      lastCalculated: null\n    },\n\n    // Cross-model analysis\n    correlations: {\n      dcfLbo: null,\n      dcfScenarios: null,\n      lboScenarios: null\n    },\n\n    // UI state\n    activeModel: 'dcf', // 'dcf' | 'lbo' | 'threeStatement' | 'scenarios' | 'monteCarlo'\n    isDirty: false,\n    lastSaved: null,\n\n    // Collaboration state\n    collaborators: [],\n    isCollaborationEnabled: false,\n\n    // Performance tracking\n    calculationTimes: {},\n\n    // Persistence\n    savedAnalyses: []\n  },\n  reducers: {\n    // Financial data management\n    setFinancialData: (state, action) => {\n      state.financialData = action.payload;\n      state.isDirty = true;\n    },\n    setAdjustedValues: (state, action) => {\n      state.adjustedValues = action.payload;\n      state.isDirty = true;\n    },\n\n    // DCF actions\n    setDcfInputs: (state, action) => {\n      state.dcf.inputs = action.payload;\n      state.isDirty = true;\n    },\n    setDcfLoading: (state) => {\n      state.dcf.status = 'loading';\n      state.dcf.error = null;\n    },\n    setDcfResults: (state, action) => {\n      state.dcf.results = action.payload;\n      state.dcf.status = 'succeeded';\n      state.dcf.lastCalculated = new Date().toISOString();\n      state.isDirty = true;\n    },\n    setDcfError: (state, action) => {\n      state.dcf.error = action.payload;\n      state.dcf.status = 'failed';\n    },\n\n    // LBO actions\n    setLboInputs: (state, action) => {\n      state.lbo.inputs = action.payload;\n      state.isDirty = true;\n    },\n    setLboLoading: (state) => {\n      state.lbo.status = 'loading';\n      state.lbo.error = null;\n    },\n    setLboResults: (state, action) => {\n      state.lbo.results = action.payload;\n      state.lbo.status = 'succeeded';\n      state.lbo.lastCalculated = new Date().toISOString();\n      state.isDirty = true;\n    },\n    setLboError: (state, action) => {\n      state.lbo.error = action.payload;\n      state.lbo.status = 'failed';\n    },\n\n    // 3-Statement model actions\n    setThreeStatementInputs: (state, action) => {\n      state.threeStatement.inputs = action.payload;\n      state.isDirty = true;\n    },\n    setThreeStatementLoading: (state) => {\n      state.threeStatement.status = 'loading';\n      state.threeStatement.error = null;\n    },\n    setThreeStatementResults: (state, action) => {\n      state.threeStatement.results = action.payload;\n      state.threeStatement.status = 'succeeded';\n      state.threeStatement.lastCalculated = new Date().toISOString();\n      state.isDirty = true;\n    },\n    setThreeStatementError: (state, action) => {\n      state.threeStatement.error = action.payload;\n      state.threeStatement.status = 'failed';\n    },\n\n    // Scenario analysis actions\n    setScenarios: (state, action) => {\n      state.scenarios.scenarios = action.payload;\n      state.isDirty = true;\n    },\n    addScenario: (state, action) => {\n      state.scenarios.scenarios.push(action.payload);\n      state.isDirty = true;\n    },\n    updateScenario: (state, action) => {\n      const { id, updates } = action.payload;\n      const index = state.scenarios.scenarios.findIndex(s => s.id === id);\n      if (index !== -1) {\n        state.scenarios.scenarios[index] = { ...state.scenarios.scenarios[index], ...updates };\n        state.isDirty = true;\n      }\n    },\n    removeScenario: (state, action) => {\n      state.scenarios.scenarios = state.scenarios.scenarios.filter(s => s.id !== action.payload);\n      state.isDirty = true;\n    },\n    setScenariosLoading: (state) => {\n      state.scenarios.status = 'loading';\n      state.scenarios.error = null;\n    },\n    setScenariosResults: (state, action) => {\n      state.scenarios.results = action.payload;\n      state.scenarios.status = 'succeeded';\n      state.scenarios.lastCalculated = new Date().toISOString();\n      state.isDirty = true;\n    },\n    setScenariosError: (state, action) => {\n      state.scenarios.error = action.payload;\n      state.scenarios.status = 'failed';\n    },\n\n    // Monte Carlo actions\n    setMonteCarloSettings: (state, action) => {\n      state.monteCarlo.settings = { ...state.monteCarlo.settings, ...action.payload };\n      state.isDirty = true;\n    },\n    setMonteCarloLoading: (state) => {\n      state.monteCarlo.status = 'loading';\n      state.monteCarlo.error = null;\n    },\n    setMonteCarloResults: (state, action) => {\n      state.monteCarlo.results = action.payload;\n      state.monteCarlo.status = 'succeeded';\n      state.monteCarlo.lastCalculated = new Date().toISOString();\n      state.isDirty = true;\n    },\n    setMonteCarloError: (state, action) => {\n      state.monteCarlo.error = action.payload;\n      state.monteCarlo.status = 'failed';\n    },\n\n    // Cross-model correlation tracking\n    setCorrelations: (state, action) => {\n      state.correlations = { ...state.correlations, ...action.payload };\n    },\n\n    // UI state management\n    setActiveModel: (state, action) => {\n      state.activeModel = action.payload;\n    },\n\n    // Persistence actions\n    saveAnalysis: (state, action) => {\n      const analysis = {\n        id: action.payload.id || Date.now().toString(),\n        name: action.payload.name,\n        timestamp: new Date().toISOString(),\n        financialData: state.financialData,\n        adjustedValues: state.adjustedValues,\n        models: {\n          dcf: state.dcf,\n          lbo: state.lbo,\n          threeStatement: state.threeStatement,\n          scenarios: state.scenarios,\n          monteCarlo: state.monteCarlo\n        },\n        correlations: state.correlations\n      };\n\n      // Update existing or add new\n      const existingIndex = state.savedAnalyses.findIndex(a => a.id === analysis.id);\n      if (existingIndex !== -1) {\n        state.savedAnalyses[existingIndex] = analysis;\n      } else {\n        state.savedAnalyses.push(analysis);\n      }\n\n      state.isDirty = false;\n      state.lastSaved = analysis.timestamp;\n    },\n\n    loadAnalysis: (state, action) => {\n      const analysis = action.payload;\n      state.financialData = analysis.financialData;\n      state.adjustedValues = analysis.adjustedValues;\n      state.dcf = analysis.models?.dcf || state.dcf;\n      state.lbo = analysis.models?.lbo || state.lbo;\n      state.threeStatement = analysis.models?.threeStatement || state.threeStatement;\n      state.scenarios = analysis.models?.scenarios || state.scenarios;\n      state.monteCarlo = analysis.models?.monteCarlo || state.monteCarlo;\n      state.correlations = analysis.correlations || {};\n      state.isDirty = false;\n      state.lastSaved = analysis.timestamp;\n    },\n\n    deleteAnalysis: (state, action) => {\n      state.savedAnalyses = state.savedAnalyses.filter(a => a.id !== action.payload);\n    },\n\n    // Collaboration actions\n    setCollaborators: (state, action) => {\n      state.collaborators = action.payload;\n    },\n    enableCollaboration: (state) => {\n      state.isCollaborationEnabled = true;\n    },\n    disableCollaboration: (state) => {\n      state.isCollaborationEnabled = false;\n      state.collaborators = [];\n    },\n\n    // Performance tracking\n    recordCalculationTime: (state, action) => {\n      const { model, duration } = action.payload;\n      state.calculationTimes[model] = {\n        lastDuration: duration,\n        timestamp: new Date().toISOString()\n      };\n    },\n\n    // Reset actions\n    resetModel: (state, action) => {\n      const model = action.payload;\n      state[model] = {\n        inputs: null,\n        results: null,\n        status: 'idle',\n        error: null,\n        lastCalculated: null\n      };\n      state.isDirty = true;\n    },\n\n    resetAll: (state) => {\n      Object.assign(state, analysisSlice.getInitialState());\n    }\n  }\n});\n\n// Export actions\nexport const {\n  setFinancialData,\n  setAdjustedValues,\n  setDcfInputs,\n  setDcfLoading,\n  setDcfResults,\n  setDcfError,\n  setLboInputs,\n  setLboLoading,\n  setLboResults,\n  setLboError,\n  setThreeStatementInputs,\n  setThreeStatementLoading,\n  setThreeStatementResults,\n  setThreeStatementError,\n  setScenarios,\n  addScenario,\n  updateScenario,\n  removeScenario,\n  setScenariosLoading,\n  setScenariosResults,\n  setScenariosError,\n  setMonteCarloSettings,\n  setMonteCarloLoading,\n  setMonteCarloResults,\n  setMonteCarloError,\n  setCorrelations,\n  setActiveModel,\n  saveAnalysis,\n  loadAnalysis,\n  deleteAnalysis,\n  setCollaborators,\n  enableCollaboration,\n  disableCollaboration,\n  recordCalculationTime,\n  resetModel,\n  resetAll\n} = analysisSlice.actions;\n\n// Selectors\nexport const selectFinancialData = (state) => state.analysis.financialData;\nexport const selectAdjustedValues = (state) => state.analysis.adjustedValues;\nexport const selectDcf = (state) => state.analysis.dcf;\nexport const selectLbo = (state) => state.analysis.lbo;\nexport const selectThreeStatement = (state) => state.analysis.threeStatement;\nexport const selectScenarios = (state) => state.analysis.scenarios;\nexport const selectMonteCarlo = (state) => state.analysis.monteCarlo;\nexport const selectCorrelations = (state) => state.analysis.correlations;\nexport const selectActiveModel = (state) => state.analysis.activeModel;\nexport const selectIsDirty = (state) => state.analysis.isDirty;\nexport const selectLastSaved = (state) => state.analysis.lastSaved;\nexport const selectSavedAnalyses = (state) => state.analysis.savedAnalyses;\nexport const selectCollaborators = (state) => state.analysis.collaborators;\nexport const selectIsCollaborationEnabled = (state) => state.analysis.isCollaborationEnabled;\nexport const selectCalculationTimes = (state) => state.analysis.calculationTimes;\n\n// Computed selectors\nexport const selectIsAnyModelLoading = (state) => {\n  return state.analysis.dcf.status === 'loading' ||\n         state.analysis.lbo.status === 'loading' ||\n         state.analysis.threeStatement.status === 'loading' ||\n         state.analysis.scenarios.status === 'loading' ||\n         state.analysis.monteCarlo.status === 'loading';\n};\n\nexport const selectModelResults = (state) => ({\n  dcf: state.analysis.dcf.results,\n  lbo: state.analysis.lbo.results,\n  threeStatement: state.analysis.threeStatement.results,\n  scenarios: state.analysis.scenarios.results,\n  monteCarlo: state.analysis.monteCarlo.results\n});\n\nexport const selectDataCompleteness = (state) => {\n  const financialData = state.analysis.financialData;\n  if (!financialData?.statements) return 0;\n\n  const coreFields = ['totalRevenue', 'totalCostOfGoodsSold', 'operatingIncome', 'netIncome'];\n  const completedFields = coreFields.filter(field =>\n    financialData.statements.incomeStatement?.[field]?.[2] !== undefined\n  ).length;\n\n  return Math.round((completedFields / coreFields.length) * 100);\n};\n\n// Configure store\nexport const store = configureStore({\n  reducer: {\n    analysis: analysisSlice.reducer\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        // Ignore these action types\n        ignoredActions: ['analysis/saveAnalysis', 'analysis/loadAnalysis'],\n        // Ignore these field paths in all actions\n        ignoredActionsPaths: ['meta.arg', 'payload.timestamp'],\n        // Ignore these paths in the state\n        ignoredPaths: ['analysis.lastSaved', 'analysis.dcf.lastCalculated']\n      }\n    }),\n  devTools: process.env.NODE_ENV !== 'production'\n});\n\nexport default analysisSlice.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  name: 'Guest',\n  isAuthenticated: false\n};\n\nexport const userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    login: (state, action) => {\n      state.name = action.payload.name;\n      state.isAuthenticated = true;\n    },\n    logout: (state) => {\n      state.name = 'Guest';\n      state.isAuthenticated = false;\n    }\n  }\n});\n\nexport const { login, logout } = userSlice.actions;\n\nexport default userSlice.reducer;\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport analysisReducer from './analysisStore';\nimport userReducer from './slices/userSlice';\n\nexport const store = configureStore({\n  reducer: {\n    user: userReducer,\n    analysis: analysisReducer\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        // Ignore these action types\n        ignoredActions: ['analysis/saveAnalysis', 'analysis/loadAnalysis'],\n        // Ignore these field paths in all actions\n        ignoredActionsPaths: ['meta.arg', 'payload.timestamp'],\n        // Ignore these paths in the state\n        ignoredPaths: ['analysis.lastSaved', 'analysis.dcf.lastCalculated']\n      }\n    }),\n  devTools: process.env.NODE_ENV !== 'production'\n});\n","// Security Headers Management and CSP Nonce Generation\n\n// Generate secure nonce for CSP\nexport function generateNonce() {\n  if (typeof window !== 'undefined' && window.crypto) {\n    const array = new Uint8Array(16);\n    window.crypto.getRandomValues(array);\n    return btoa(String.fromCharCode.apply(null, array));\n  }\n\n  // Fallback for server-side or older browsers\n  return Math.random().toString(36).substring(2, 15) +\n         Math.random().toString(36).substring(2, 15);\n}\n\n// Store current nonce for the session\nlet currentNonce = null;\n\nexport function getCurrentNonce() {\n  if (!currentNonce) {\n    currentNonce = generateNonce();\n  }\n  return currentNonce;\n}\n\n// Refresh nonce (call on navigation or sensitive operations)\nexport function refreshNonce() {\n  currentNonce = generateNonce();\n  return currentNonce;\n}\n\n// CSP Policy Builder\nexport class CSPPolicyBuilder {\n  constructor() {\n    this.policies = {};\n  }\n\n  // Set default secure policies\n  setDefaults() {\n    this.policies = {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Will be replaced with nonces in production\n        \"'unsafe-eval'\", // Required for some financial calculations\n        'https://static.rocket.new', // Third-party service\n        // Monitoring & Analytics\n        'https://www.googletagmanager.com',\n        'https://static.hotjar.com'\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Required for CSS-in-JS\n        'https://fonts.googleapis.com'\n      ],\n      'font-src': [\n        \"'self'\",\n        'https://fonts.gstatic.com'\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:',\n        'blob:',\n        'https:'\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://www.alphavantage.co',\n        'https://financialmodelingprep.com',\n        'https://data.sec.gov',\n        'https://query1.finance.yahoo.com',\n        'https://query2.finance.yahoo.com',\n        'https://data.nasdaq.com',\n        'https://fred.stlouisfed.org',\n        // Monitoring & Analytics\n        'https://www.google-analytics.com',\n        'https://www.googletagmanager.com',\n        'https://script.hotjar.com',\n        'https://in.hotjar.com',\n        'https://api.hotjar.com',\n        'https://*.sentry.io',\n        'https://*.ingest.sentry.io',\n        'wss://*.hotjar.com'\n      ],\n      'frame-ancestors': [\"'none'\"],\n      'base-uri': [\"'self'\"],\n      'form-action': [\"'self'\"],\n      'upgrade-insecure-requests': [],\n      'block-all-mixed-content': []\n    };\n    return this;\n  }\n\n  // Add nonce to script-src and style-src\n  addNonce(nonce) {\n    if (this.policies['script-src']) {\n      // Remove unsafe-inline when nonce is present\n      this.policies['script-src'] = this.policies['script-src']\n        .filter(src => src !== \"'unsafe-inline'\")\n        .concat([`'nonce-${nonce}'`]);\n    }\n\n    if (this.policies['style-src']) {\n      // Keep unsafe-inline for CSS-in-JS compatibility\n      this.policies['style-src'] = this.policies['style-src']\n        .concat([`'nonce-${nonce}'`]);\n    }\n\n    return this;\n  }\n\n  // Add specific domain to directive\n  addSource(directive, source) {\n    if (!this.policies[directive]) {\n      this.policies[directive] = [];\n    }\n    if (!this.policies[directive].includes(source)) {\n      this.policies[directive].push(source);\n    }\n    return this;\n  }\n\n  // Remove source from directive\n  removeSource(directive, source) {\n    if (this.policies[directive]) {\n      this.policies[directive] = this.policies[directive]\n        .filter(src => src !== source);\n    }\n    return this;\n  }\n\n  // Build final CSP string\n  build() {\n    return Object.entries(this.policies)\n      .map(([directive, sources]) => {\n        if (sources.length === 0) {\n          return directive;\n        }\n        return `${directive} ${sources.join(' ')}`;\n      })\n      .join('; ');\n  }\n}\n\n// Security Headers Configuration\nexport const securityHeaders = {\n  // Content Security Policy\n  getCSP: (nonce = null) => {\n    const builder = new CSPPolicyBuilder().setDefaults();\n\n    if (nonce) {\n      builder.addNonce(nonce);\n    }\n\n    // Add development-specific policies\n    if (import.meta.env.DEV) {\n      builder\n        .addSource('script-src', 'http://localhost:*')\n        .addSource('connect-src', 'ws://localhost:*')\n        .addSource('connect-src', 'http://localhost:*');\n    }\n\n    return builder.build();\n  },\n\n  // HTTP Strict Transport Security\n  getHSTS: () => {\n    return 'max-age=31536000; includeSubDomains; preload';\n  },\n\n  // X-Frame-Options\n  getFrameOptions: () => {\n    return 'DENY';\n  },\n\n  // X-Content-Type-Options\n  getContentTypeOptions: () => {\n    return 'nosniff';\n  },\n\n  // Referrer-Policy\n  getReferrerPolicy: () => {\n    return 'strict-origin-when-cross-origin';\n  },\n\n  // Permissions-Policy\n  getPermissionsPolicy: () => {\n    return [\n      'camera=()',\n      'microphone=()',\n      'geolocation=()',\n      'payment=()',\n      'autoplay=()',\n      'fullscreen=*',\n      'picture-in-picture=*'\n    ].join(', ');\n  },\n\n  // Cross-Origin policies\n  getCrossOriginEmbedderPolicy: () => {\n    return 'require-corp';\n  },\n\n  getCrossOriginOpenerPolicy: () => {\n    return 'same-origin';\n  },\n\n  getCrossOriginResourcePolicy: () => {\n    return 'same-origin';\n  }\n};\n\n// Apply CSP nonce to script and style elements\nexport function applyCspNonce(nonce) {\n  if (typeof document === 'undefined') return;\n\n  // Add nonce to inline scripts\n  const inlineScripts = document.querySelectorAll('script:not([src])');\n  inlineScripts.forEach(script => {\n    script.setAttribute('nonce', nonce);\n  });\n\n  // Add nonce to inline styles\n  const inlineStyles = document.querySelectorAll('style');\n  inlineStyles.forEach(style => {\n    style.setAttribute('nonce', nonce);\n  });\n}\n\n// Create secure headers for server responses\nexport function createSecureHeaders(nonce = null) {\n  const headers = {};\n\n  // CSP with nonce\n  headers['Content-Security-Policy'] = securityHeaders.getCSP(nonce);\n\n  // Security headers\n  headers['Strict-Transport-Security'] = securityHeaders.getHSTS();\n  headers['X-Frame-Options'] = securityHeaders.getFrameOptions();\n  headers['X-Content-Type-Options'] = securityHeaders.getContentTypeOptions();\n  headers['Referrer-Policy'] = securityHeaders.getReferrerPolicy();\n  headers['Permissions-Policy'] = securityHeaders.getPermissionsPolicy();\n\n  // Cross-Origin policies\n  if (import.meta.env.PROD) {\n    headers['Cross-Origin-Embedder-Policy'] = securityHeaders.getCrossOriginEmbedderPolicy();\n    headers['Cross-Origin-Opener-Policy'] = securityHeaders.getCrossOriginOpenerPolicy();\n    headers['Cross-Origin-Resource-Policy'] = securityHeaders.getCrossOriginResourcePolicy();\n  }\n\n  return headers;\n}\n\n// Validate CSP compliance\nexport function validateCSPCompliance() {\n  const violations = [];\n\n  if (typeof document === 'undefined') return violations;\n\n  // Check for inline scripts without nonces\n  const inlineScripts = document.querySelectorAll('script:not([src]):not([nonce])');\n  if (inlineScripts.length > 0) {\n    violations.push({\n      type: 'inline-script-without-nonce',\n      count: inlineScripts.length,\n      elements: Array.from(inlineScripts).slice(0, 3) // First 3 for debugging\n    });\n  }\n\n  // Check for inline styles without nonces (less critical due to CSS-in-JS)\n  const inlineStyles = document.querySelectorAll('style:not([nonce])');\n  if (inlineStyles.length > 5) { // Allow some CSS-in-JS styles\n    violations.push({\n      type: 'excessive-inline-styles',\n      count: inlineStyles.length,\n      recommendation: 'Consider consolidating CSS-in-JS styles'\n    });\n  }\n\n  // Check for unsafe external resources\n  const externalScripts = document.querySelectorAll('script[src]');\n  externalScripts.forEach(script => {\n    const src = script.getAttribute('src');\n    if (src && !src.startsWith('https://') && !src.startsWith('/')) {\n      violations.push({\n        type: 'insecure-external-script',\n        src,\n        element: script\n      });\n    }\n  });\n\n  return violations;\n}\n\n// CSP violation reporter\nexport function setupCSPReporting() {\n  if (typeof document === 'undefined') return;\n\n  document.addEventListener('securitypolicyviolation', (event) => {\n    const violation = {\n      blockedURI: event.blockedURI,\n      violatedDirective: event.violatedDirective,\n      originalPolicy: event.originalPolicy,\n      disposition: event.disposition,\n      timestamp: Date.now(),\n      userAgent: navigator.userAgent,\n      url: window.location.href\n    };\n\n    console.warn('CSP Violation:', violation);\n\n    // In production, send to monitoring service\n    if (import.meta.env.PROD) {\n      sendCSPViolation(violation);\n    }\n  });\n}\n\nfunction sendCSPViolation(violation) {\n  // Send to your monitoring service\n  fetch('/api/csp-violations', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(violation)\n  }).catch(error => {\n    console.error('Failed to report CSP violation:', error);\n  });\n}\n\n// Initialize security measures\nexport function initializeSecurity() {\n  const nonce = getCurrentNonce();\n\n  // Apply nonce to existing elements\n  applyCspNonce(nonce);\n\n  // Setup CSP violation reporting\n  setupCSPReporting();\n\n  // Validate compliance\n  const violations = validateCSPCompliance();\n  if (violations.length > 0) {\n    console.warn('CSP compliance issues found:', violations);\n  }\n\n  // Setup periodic compliance checks\n  setInterval(() => {\n    const currentViolations = validateCSPCompliance();\n    if (currentViolations.length > violations.length) {\n      console.warn('New CSP compliance issues detected:',\n        currentViolations.slice(violations.length));\n    }\n  }, 30000); // Check every 30 seconds\n\n  console.log('Security measures initialized with nonce:', nonce);\n  return nonce;\n}\n\n// Hook for React components to get current nonce\nexport function useSecurityNonce() {\n  return getCurrentNonce();\n}\n","// Service Worker Registration and Management\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  window.location.hostname === '[::1]' ||\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function registerSW() {\n  if ('serviceWorker' in navigator) {\n    const publicUrl = new URL(import.meta.env.BASE_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${import.meta.env.BASE_URL}sw.js`;\n\n      if (isLocalhost) {\n        checkValidServiceWorker(swUrl);\n        navigator.serviceWorker.ready.then(() => {\n          console.warn('PWA: Service Worker ready in development mode');\n        });\n      } else {\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      console.warn('PWA: Service Worker registered successfully:', registration);\n\n      // Check for updates\n      registration.addEventListener('updatefound', () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n\n        installingWorker.addEventListener('statechange', () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              console.log('PWA: New content available, will update on next visit');\n              showUpdateAvailableNotification();\n            } else {\n              console.log('PWA: Content cached for offline use');\n              showCachedNotification();\n            }\n          }\n        });\n      });\n    })\n    .catch((error) => {\n      console.error('PWA: Service Worker registration failed:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then((response) => {\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log('PWA: No internet connection found. App is running in offline mode.');\n      showOfflineNotification();\n    });\n}\n\nexport function unregisterSW() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error('PWA: Service Worker unregistration failed:', error);\n      });\n  }\n}\n\n// Notification functions for better UX\nfunction showUpdateAvailableNotification() {\n  if ('Notification' in window && Notification.permission === 'granted') {\n    new Notification('FinanceAnalyst Pro Update Available', {\n      body: 'A new version is available. Refresh to update.',\n      icon: '/assets/images/favicon.svg',\n      badge: '/assets/images/favicon.svg',\n      tag: 'app-update'\n    });\n  }\n\n  // Also show in-app notification\n  showInAppNotification(\n    'Update Available',\n    'A new version of FinanceAnalyst Pro is ready. Refresh to update.',\n    'info'\n  );\n}\n\nfunction showCachedNotification() {\n  showInAppNotification(\n    'App Ready for Offline',\n    'FinanceAnalyst Pro is now available offline for core features.',\n    'success'\n  );\n}\n\nfunction showOfflineNotification() {\n  showInAppNotification(\n    'Offline Mode',\n    'You\\'re currently offline. Some features may be limited.',\n    'warning'\n  );\n}\n\nfunction showInAppNotification(title, message, type = 'info') {\n  // Create a simple notification system\n  const notification = document.createElement('div');\n  notification.className = `\n    fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg\n    ${type === 'success' ? 'bg-green-50 text-green-800 border border-green-200' : ''}\n    ${type === 'warning' ? 'bg-yellow-50 text-yellow-800 border border-yellow-200' : ''}\n    ${type === 'info' ? 'bg-blue-50 text-blue-800 border border-blue-200' : ''}\n    transition-all duration-300 transform translate-x-full\n  `;\n\n  notification.innerHTML = `\n    <div class=\"flex items-start\">\n      <div class=\"flex-1\">\n        <h4 class=\"font-medium text-sm\">${title}</h4>\n        <p class=\"text-sm mt-1 opacity-90\">${message}</p>\n      </div>\n      <button class=\"ml-3 text-sm opacity-60 hover:opacity-100\" onclick=\"this.parentElement.parentElement.remove()\">\n        \n      </button>\n    </div>\n  `;\n\n  document.body.appendChild(notification);\n\n  // Animate in\n  requestAnimationFrame(() => {\n    notification.style.transform = 'translateX(0)';\n  });\n\n  // Auto remove after 5 seconds\n  setTimeout(() => {\n    if (notification.parentElement) {\n      notification.style.transform = 'translateX(100%)';\n      setTimeout(() => notification.remove(), 300);\n    }\n  }, 5000);\n}\n\n// Request notification permission\nexport function requestNotificationPermission() {\n  if ('Notification' in window && Notification.permission === 'default') {\n    Notification.requestPermission().then((permission) => {\n      console.log('PWA: Notification permission:', permission);\n    });\n  }\n}\n\n// Install prompt handling\nlet deferredPrompt;\n\nwindow.addEventListener('beforeinstallprompt', (e) => {\n  e.preventDefault();\n  deferredPrompt = e;\n  showInstallPrompt();\n});\n\nfunction showInstallPrompt() {\n  // Show custom install button/banner\n  const installBanner = document.createElement('div');\n  installBanner.className = `\n    fixed bottom-4 left-4 right-4 p-4 bg-blue-600 text-white rounded-lg shadow-lg\n    flex items-center justify-between z-50 max-w-md mx-auto\n  `;\n\n  installBanner.innerHTML = `\n    <div class=\"flex-1\">\n      <h4 class=\"font-medium text-sm\">Install FinanceAnalyst Pro</h4>\n      <p class=\"text-sm opacity-90 mt-1\">Get faster access and offline features</p>\n    </div>\n    <div class=\"flex items-center space-x-2 ml-3\">\n      <button id=\"install-btn\" class=\"bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50\">\n        Install\n      </button>\n      <button id=\"dismiss-btn\" class=\"text-white opacity-60 hover:opacity-100 text-sm\">\n        \n      </button>\n    </div>\n  `;\n\n  document.body.appendChild(installBanner);\n\n  // Handle install button click\n  installBanner.querySelector('#install-btn').addEventListener('click', async() => {\n    if (deferredPrompt) {\n      deferredPrompt.prompt();\n      const { outcome } = await deferredPrompt.userChoice;\n      console.log('PWA: Install prompt outcome:', outcome);\n      deferredPrompt = null;\n    }\n    installBanner.remove();\n  });\n\n  // Handle dismiss button click\n  installBanner.querySelector('#dismiss-btn').addEventListener('click', () => {\n    installBanner.remove();\n    deferredPrompt = null;\n  });\n}\n\n// Handle successful installation\nwindow.addEventListener('appinstalled', () => {\n  console.log('PWA: App was installed successfully');\n  showInAppNotification(\n    'App Installed',\n    'FinanceAnalyst Pro has been installed successfully!',\n    'success'\n  );\n  deferredPrompt = null;\n});\n\n// Network status handling\nexport function setupNetworkHandling() {\n  function updateOnlineStatus() {\n    const isOnline = navigator.onLine;\n    console.log('PWA: Network status:', isOnline ? 'online' : 'offline');\n\n    if (!isOnline) {\n      showInAppNotification(\n        'Connection Lost',\n        'You\\'re now offline. Cached content will be used.',\n        'warning'\n      );\n    } else {\n      showInAppNotification(\n        'Connection Restored',\n        'You\\'re back online. Syncing latest data...',\n        'success'\n      );\n    }\n\n    // Update UI to reflect network status\n    document.body.setAttribute('data-network-status', isOnline ? 'online' : 'offline');\n  }\n\n  window.addEventListener('online', updateOnlineStatus);\n  window.addEventListener('offline', updateOnlineStatus);\n\n  // Initial status\n  updateOnlineStatus();\n}\n\n// Detect automated/audit environments (e.g., Lighthouse/CI)\nfunction isAutomatedEnvironment() {\n  try {\n    const params = new URLSearchParams(window.location.search);\n    return (\n      navigator.webdriver === true ||\n      params.has('lhci') ||\n      params.has('ci') ||\n      params.has('audit') ||\n      params.get('pwa') === '0'\n    );\n  } catch {\n    return navigator.webdriver === true;\n  }\n}\n\n// Initialize PWA features\nexport function initializePWA() {\n  // Skip PWA in automated environments to avoid permission prompts and SW interference\n  if (isAutomatedEnvironment()) {\n    console.warn('PWA: Skipping initialization in automated/audit environment');\n    return;\n  }\n\n  registerSW();\n  setupNetworkHandling();\n\n  // Do NOT request notification permission automatically on load\n  // Prefer requesting permission in response to explicit user action\n\n  console.log('PWA: Initialization complete');\n}\n","import { createRoot } from 'react-dom/client';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport ProductionErrorBoundary from './components/ErrorBoundary/ProductionErrorBoundary';\nimport { store } from './store/store';\nimport { initializeSecurity } from './utils/securityHeaders';\nimport { initializePWA, unregisterSW } from './utils/serviceWorker';\nimport './styles/tailwind.css';\nimport './styles/index.css';\n\nconst container = document.getElementById('root');\nconst root = createRoot(container);\n\nroot.render(\n  <ProductionErrorBoundary level=\"app\">\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </ProductionErrorBoundary>\n);\n\n// Detect automated/CI environments (e.g., Playwright, LHCI)\nconst isAutomatedEnv = (() => {\n  try {\n    const params = new URLSearchParams(window.location.search);\n    return (\n      navigator.webdriver === true ||\n      params.has('lhci') ||\n      params.has('ci') ||\n      params.has('audit')\n    );\n  } catch {\n    return navigator.webdriver === true;\n  }\n})();\n\n// Initialize security measures\nconst securityNonce = initializeSecurity();\n\n// Initialize PWA features only outside development to avoid HMR/cache interference\nif (!import.meta.env.DEV) {\n  initializePWA();\n} else {\n  // Ensure any previously registered service workers are removed during dev\n  try {\n    unregisterSW();\n    // Also attempt a direct cleanup to be thorough\n    if ('serviceWorker' in navigator && navigator.serviceWorker.getRegistrations) {\n      navigator.serviceWorker.getRegistrations().then((regs) => regs.forEach((r) => r.unregister()));\n    }\n\n    console.warn('PWA is disabled in development to prevent caching issues with HMR.');\n  } catch (e) {\n\n    console.warn('Attempted to disable PWA in development, but encountered:', e);\n  }\n}\n\n// Initialize monitoring only when NOT in automated environments to keep tests stable\nif (!isAutomatedEnv) {\n  // Initialize Sentry Performance Monitoring dynamically\n  import('@sentry/react')\n    .then((Sentry) => {\n      Sentry.init({\n        dsn: import.meta.env.VITE_SENTRY_DSN,\n        environment: import.meta.env.MODE,\n        integrations: [\n          Sentry.browserTracingIntegration(),\n          Sentry.replayIntegration({\n            maskAllText: false,\n            blockAllMedia: false\n          })\n        ],\n        tracesSampleRate: import.meta.env.MODE === 'production' ? 0.1 : 1.0,\n        replaysSessionSampleRate: 0.1,\n        replaysOnErrorSampleRate: 1.0,\n        beforeSend(event) {\n          // Filter out development errors\n          if (import.meta.env.MODE === 'development' && event.exception) {\n            const error = event.exception.values?.[0];\n            if (error?.value?.includes('ResizeObserver loop limit exceeded')) {\n              return null;\n            }\n          }\n          return event;\n        }\n      });\n\n      // Expose globally for compatibility\n      window.Sentry = Sentry;\n    })\n    .catch((e) => console.warn('Skipping Sentry initialization:', e));\n\n  // Performance monitoring\n  import('./utils/performanceMonitoring')\n    .then((mod) => {\n      if (mod?.initializePerformanceMonitoring) {\n        mod.initializePerformanceMonitoring();\n      }\n    })\n    .catch((e) => console.warn('Skipping performance monitoring initialization:', e));\n\n  // Dynamically import monitoring modules to avoid side effects during tests\n  import('./services/productionMonitoring')\n    .then((mod) => {\n      // Singleton instance exports as default; ensure initialized if exposed\n      if (mod?.default?.init) {\n        mod.default.init();\n      }\n    })\n    .catch((e) => console.warn('Skipping production monitoring initialization:', e));\n\n  import('./utils/monitoring').catch(() => {\n    /* Analytics monitoring is optional; ignore errors */\n  });\n} else {\n  console.warn('Automated environment detected; monitoring disabled for stability.');\n}\n\n// Log initialization complete\nconsole.log(' FinanceAnalyst Pro initialized with security nonce:', securityNonce);\n"],"file":"assets/index-DdNfTkp9.js"}