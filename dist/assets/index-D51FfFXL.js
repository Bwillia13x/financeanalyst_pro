import{j as e,I as s}from"./index-DGF3HSb_.js";import{r as a}from"./react-vendor-BaLqnLcQ.js";import{B as r}from"./Button-5a7spVg3.js";import{H as t}from"./Header-CQFIp0qY.js";import{S as i}from"./Select-8sM3TG_n.js";import{R as l,B as n,C as o,X as d,Y as c,T as m,a as x,S as u,b as h,A as p,c as v,L as j}from"./charts-vendor-h_g8xRFq.js";import{I as b}from"./Input-DpegMNcI.js";import"./ui-vendor-HtFP23NJ.js";import"./utils-vendor-Cj_bvvWu.js";const f=({simulationResults:t,isSimulating:b})=>{const[f,g]=a.useState("distribution"),[N,y]=a.useState("enterprise_value"),w={summary:{mean:2847.5,median:2823.1,stdDev:456.2,percentile5:2156.7,percentile95:3687.4,iterations:1e4},distribution:Array.from({length:50},(e,s)=>({value:1500+60*s,frequency:Math.max(0,Math.round(200*Math.exp(-Math.pow((s-25)/10,2))))})),tornado:[{variable:"Revenue Growth",impact:847.2,direction:"positive"},{variable:"Terminal Growth",impact:623.8,direction:"positive"},{variable:"WACC",impact:-567.4,direction:"negative"},{variable:"Margin Expansion",impact:445.6,direction:"positive"},{variable:"CapEx Ratio",impact:-334.2,direction:"negative"},{variable:"Working Capital",impact:-187.9,direction:"negative"}],scatter:Array.from({length:1e3},(e,s)=>({revenueGrowth:.05+.3*Math.random(),enterpriseValue:1800+2e3*Math.random()+500*(Math.random()-.5)})),timeSeries:Array.from({length:20},(e,s)=>({iteration:500*(s+1),mean:2800+50*Math.sin(.5*s)+20*Math.random(),confidence95:3600+60*Math.sin(.5*s)+30*Math.random(),confidence5:2e3+40*Math.sin(.5*s)+20*Math.random()}))},S=t||w,C=[{value:"enterprise_value",label:"Enterprise Value ($M)"},{value:"equity_value",label:"Equity Value ($M)"},{value:"share_price",label:"Share Price ($)"},{value:"irr",label:"Internal Rate of Return (%)"},{value:"multiple",label:"EV/EBITDA Multiple"}];return e.jsxs("div",{className:"h-full flex flex-col bg-card",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Simulation Results"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{options:C,value:N,onChange:y,className:"w-48",disabled:b}),e.jsx(i,{options:[{value:"pdf",label:"PDF Report"},{value:"excel",label:"Excel Workbook"},{value:"csv",label:"CSV Data"},{value:"png",label:"PNG Image"}],value:"pdf",onChange:()=>{},className:"w-32",disabled:b}),e.jsx(r,{variant:"outline",iconName:"Download",disabled:b,children:"Export"})]})]})}),e.jsx("div",{className:"border-b border-border",children:e.jsx("div",{className:"flex",children:[{value:"distribution",label:"Distribution",icon:"BarChart3"},{value:"tornado",label:"Tornado Chart",icon:"BarChart2"},{value:"scatter",label:"Scatter Plot",icon:"Scatter3D"},{value:"convergence",label:"Convergence",icon:"TrendingUp"}].map(a=>e.jsxs("button",{onClick:()=>g(a.value),className:"flex items-center space-x-2 px-6 py-3 text-sm font-medium transition-smooth "+(f===a.value?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),disabled:b,children:[e.jsx(s,{name:a.icon,size:16}),e.jsx("span",{children:a.label})]},a.value))})}),e.jsx("div",{className:"p-6 border-b border-border bg-muted/30",children:e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",(S.summary.mean/1e3).toFixed(1),"B"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Mean Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",(S.summary.median/1e3).toFixed(1),"B"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Median Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["Â±$",(S.summary.stdDev/1e3).toFixed(1),"B"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Std Deviation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",(S.summary.percentile95/1e3).toFixed(1),"B"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"95th Percentile"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-error",children:["$",(S.summary.percentile5/1e3).toFixed(1),"B"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"5th Percentile"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:S.summary.iterations.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Iterations"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:b?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"text-lg font-medium text-foreground",children:"Running Simulation..."}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculating Monte Carlo scenarios with ",S.summary.iterations.toLocaleString()," ","iterations"]})]})}):e.jsxs(e.Fragment,{children:["distribution"===f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Value Distribution"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"ghost",size:"sm",iconName:"ZoomIn"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"ZoomOut"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"RotateCcw"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(n,{data:S.distribution,children:[e.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(d,{dataKey:"value",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),e.jsx(c,{stroke:"var(--color-muted-foreground)",fontSize:12}),e.jsx(m,{formatter:(e,s)=>[`${e} simulations`,"Frequency"],labelFormatter:e=>`Value: $${(e/1e3).toFixed(1)}B`,contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(x,{dataKey:"frequency",fill:"var(--color-primary)",radius:[2,2,0,0]})]})})})]}),"tornado"===f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Sensitivity Analysis"}),e.jsx(i,{options:[{value:"absolute",label:"Absolute Impact"},{value:"percentage",label:"Percentage Impact"}],value:"absolute",onChange:()=>{},className:"w-40"})]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(n,{data:S.tornado,layout:"horizontal",margin:{left:100},children:[e.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(d,{type:"number",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${Math.abs(e).toFixed(0)}M`}),e.jsx(c,{type:"category",dataKey:"variable",stroke:"var(--color-muted-foreground)",fontSize:12,width:90}),e.jsx(m,{formatter:(e,s)=>[`$${Math.abs(e).toFixed(1)}M`,"Impact"],contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(x,{dataKey:"impact",fill:e=>"positive"===e.direction?"var(--color-success)":"var(--color-error)",radius:[0,2,2,0]})]})})})]}),"scatter"===f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Variable Correlation"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{options:[{value:"revenue_growth",label:"Revenue Growth"},{value:"margin_expansion",label:"Margin Expansion"},{value:"terminal_growth",label:"Terminal Growth"}],value:"revenue_growth",onChange:()=>{},className:"w-40"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"vs"}),e.jsx(i,{options:C,value:N,onChange:y,className:"w-40"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(u,{data:S.scatter,children:[e.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(d,{dataKey:"revenueGrowth",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`${(100*e).toFixed(0)}%`}),e.jsx(c,{dataKey:"enterpriseValue",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),e.jsx(m,{formatter:(e,s)=>["revenueGrowth"===s?`${(100*e).toFixed(1)}%`:`$${(e/1e3).toFixed(1)}B`,"revenueGrowth"===s?"Revenue Growth":"Enterprise Value"],contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(h,{dataKey:"enterpriseValue",fill:"var(--color-secondary)",fillOpacity:.6})]})})})]}),"convergence"===f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Monte Carlo Convergence"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(s,{name:"TrendingUp",size:16}),e.jsx("span",{children:"Convergence achieved at 8,500 iterations"})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(l,{width:"100%",height:"100%",children:e.jsxs(p,{data:S.timeSeries,children:[e.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),e.jsx(d,{dataKey:"iteration",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`${(e/1e3).toFixed(0)}K`}),e.jsx(c,{stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),e.jsx(m,{formatter:(e,s)=>[`$${(e/1e3).toFixed(2)}B`,s],labelFormatter:e=>`Iteration: ${e.toLocaleString()}`,contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),e.jsx(v,{dataKey:"confidence95",stroke:"var(--color-primary)",fill:"var(--color-primary)",fillOpacity:.1}),e.jsx(v,{dataKey:"confidence5",stroke:"var(--color-primary)",fill:"var(--color-background)",fillOpacity:1}),e.jsx(j,{dataKey:"mean",stroke:"var(--color-primary)",strokeWidth:2,dot:!1})]})})})]})]})})]})},g=({onScenarioUpdate:t,isSimulating:l})=>{const[n,o]=a.useState("variables"),[d,c]=a.useState([{id:1,name:"Base Case",probability:.4,variables:{revenueGrowth:.15,marginExpansion:.02,capexRatio:.08,terminalGrowth:.025}},{id:2,name:"Bull Case",probability:.3,variables:{revenueGrowth:.25,marginExpansion:.05,capexRatio:.06,terminalGrowth:.035}},{id:3,name:"Bear Case",probability:.3,variables:{revenueGrowth:.05,marginExpansion:-.01,capexRatio:.12,terminalGrowth:.015}}]),[m,x]=a.useState(d[0]),[u,h]=a.useState([{var1:"Revenue Growth",var2:"Margin Expansion",correlation:.65},{var1:"Revenue Growth",var2:"CapEx Ratio",correlation:-.45},{var1:"Margin Expansion",var2:"Terminal Growth",correlation:.35}]),p=[{value:"normal",label:"Normal Distribution"},{value:"triangular",label:"Triangular Distribution"},{value:"uniform",label:"Uniform Distribution"},{value:"lognormal",label:"Log-Normal Distribution"}],v=[{value:"dcf_standard",label:"DCF Standard Variables"},{value:"lbo_analysis",label:"LBO Analysis Variables"},{value:"comps_analysis",label:"Comparable Analysis Variables"},{value:"custom",label:"Custom Variable Set"}],j=(e,s)=>{const a={...m,variables:{...m.variables,[e]:parseFloat(s)}};x(a);const r=d.map(e=>e.id===m.id?a:e);c(r),t(r)},f=()=>{const e={id:d.length+1,name:`Scenario ${d.length+1}`,probability:.1,variables:{...m.variables}};c([...d,e])};return e.jsxs("div",{className:"h-full flex flex-col bg-card border-r border-border",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Scenario Configuration"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+(l?"bg-warning":"bg-success")}),e.jsx("span",{className:"text-sm text-muted-foreground",children:l?"Simulating...":"Ready"})]})]})}),e.jsx("div",{className:"border-b border-border",children:e.jsx("div",{className:"flex",children:[{id:"variables",label:"Variables",icon:"Settings"},{id:"distributions",label:"Distributions",icon:"BarChart3"},{id:"correlations",label:"Correlations",icon:"Network"},{id:"templates",label:"Templates",icon:"FileTemplate"}].map(a=>e.jsxs("button",{onClick:()=>o(a.id),className:"flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-smooth "+(n===a.id?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),disabled:l,children:[e.jsx(s,{name:a.icon,size:16}),e.jsx("span",{children:a.label})]},a.id))})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["variables"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Scenario Configuration"}),e.jsx(r,{variant:"outline",size:"sm",iconName:"Plus",onClick:f,disabled:l,children:"Add Scenario"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(s=>e.jsxs("button",{onClick:()=>x(s),className:"p-3 rounded-lg border text-left transition-smooth "+(m.id===s.id?"border-primary bg-primary/5 text-primary":"border-border hover:border-primary/50"),disabled:l,children:[e.jsx("div",{className:"font-medium text-sm",children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["P: ",(100*s.probability).toFixed(0),"%"]})]},s.id))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Key Variables"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"Revenue Growth Rate",type:"number",value:m.variables.revenueGrowth,onChange:e=>j("revenueGrowth",e.target.value),placeholder:"0.15",disabled:l,description:"Annual revenue growth rate"}),e.jsx(b,{label:"Margin Expansion",type:"number",value:m.variables.marginExpansion,onChange:e=>j("marginExpansion",e.target.value),placeholder:"0.02",disabled:l,description:"EBITDA margin improvement"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"CapEx Ratio",type:"number",value:m.variables.capexRatio,onChange:e=>j("capexRatio",e.target.value),placeholder:"0.08",disabled:l,description:"CapEx as % of revenue"}),e.jsx(b,{label:"Terminal Growth Rate",type:"number",value:m.variables.terminalGrowth,onChange:e=>j("terminalGrowth",e.target.value),placeholder:"0.025",disabled:l,description:"Long-term growth rate"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Probability Weights"}),e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-medium text-sm",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{type:"number",value:s.probability,onChange:e=>{const a=d.map(a=>a.id===s.id?{...a,probability:parseFloat(e.target.value)}:a);c(a)},className:"w-20",disabled:l}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]},s.id))})]})]}),"distributions"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Distribution Parameters"}),e.jsx("div",{className:"space-y-4",children:Object.keys(m.variables).map(s=>e.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground capitalize",children:s.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(i,{label:"Distribution Type",options:p,value:"normal",onChange:()=>{},disabled:l}),e.jsx(b,{label:"Standard Deviation",type:"number",placeholder:"0.05",disabled:l,description:"Volatility parameter"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(b,{label:"Min Value",type:"number",placeholder:"-0.1",disabled:l}),e.jsx(b,{label:"Most Likely",type:"number",value:m.variables[s],disabled:l}),e.jsx(b,{label:"Max Value",type:"number",placeholder:"0.5",disabled:l})]})]},s))})]}),"correlations"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Variable Correlations"}),e.jsx("div",{className:"space-y-4",children:u.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:s.var1}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["vs ",s.var2]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(b,{type:"number",value:s.correlation,onChange:e=>{const s=u.map((s,r)=>r===a?{...s,correlation:parseFloat(e.target.value)}:s);h(s)},className:"w-24",disabled:l,min:"-1",max:"1",step:"0.01"}),e.jsx("div",{className:"w-3 h-3 rounded-full "+(s.correlation>.5?"bg-success":s.correlation<-.5?"bg-error":"bg-warning")})]})]},a))}),e.jsx(r,{variant:"outline",iconName:"Plus",disabled:l,className:"w-full",children:"Add Correlation Pair"})]}),"templates"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Scenario Templates"}),e.jsx(i,{label:"Load Template",options:v,value:"dcf_standard",onChange:()=>{},disabled:l,description:"Pre-configured variable sets for common analyses"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Template Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(r,{variant:"outline",iconName:"Download",disabled:l,className:"w-full",children:"Import from Excel"}),e.jsx(r,{variant:"outline",iconName:"Upload",disabled:l,className:"w-full",children:"Export Template"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Saved Templates"}),e.jsx("div",{className:"space-y-2",children:["Tech Company DCF","REIT Analysis","Energy Sector Model"].map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:s}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Last modified: 2 days ago"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"ghost",size:"sm",iconName:"Eye",disabled:l}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Download",disabled:l})]})]},a))})]})]})]})]})},N=({onRunSimulation:t,isSimulating:l,progress:n,onStopSimulation:o})=>{const[d,c]=a.useState({iterations:1e4,confidenceLevel:.95,randomSeed:12345,method:"monte_carlo"});return e.jsxs("div",{className:"bg-card border-b border-border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{options:[{value:1e3,label:"1,000 iterations"},{value:5e3,label:"5,000 iterations"},{value:1e4,label:"10,000 iterations"},{value:25e3,label:"25,000 iterations"},{value:5e4,label:"50,000 iterations"},{value:1e5,label:"100,000 iterations"}],value:d.iterations,onChange:e=>c(s=>({...s,iterations:e})),disabled:l,className:"w-48"}),e.jsx(i,{options:[{value:"monte_carlo",label:"Monte Carlo Simulation"},{value:"latin_hypercube",label:"Latin Hypercube Sampling"},{value:"sobol_sequence",label:"Sobol Sequence"},{value:"halton_sequence",label:"Halton Sequence"}],value:d.method,onChange:e=>c(s=>({...s,method:e})),disabled:l,className:"w-56"}),e.jsx(i,{options:[{value:.9,label:"90% Confidence"},{value:.95,label:"95% Confidence"},{value:.99,label:"99% Confidence"}],value:d.confidenceLevel,onChange:e=>c(s=>({...s,confidenceLevel:e})),disabled:l,className:"w-40"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(b,{type:"number",value:d.randomSeed,onChange:e=>c(s=>({...s,randomSeed:parseInt(e.target.value)})),disabled:l,className:"w-24",placeholder:"Seed"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Shuffle",onClick:()=>c(e=>({...e,randomSeed:Math.floor(1e5*Math.random())})),disabled:l,title:"Generate random seed"})]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${n}%`}})}),e.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[n.toFixed(1),"%"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-mono",children:Math.floor(n/100*d.iterations).toLocaleString()}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{className:"font-mono",children:d.iterations.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[!l&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Est. time: ",(()=>{const e=d.iterations/1e3;return e<60?`~${Math.ceil(e)}s`:`~${Math.ceil(e/60)}m`})()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l?e.jsx(r,{variant:"destructive",iconName:"Square",onClick:o,children:"Stop Simulation"}):e.jsx(r,{variant:"default",iconName:"Play",onClick:()=>{t(d)},children:"Run Simulation"}),e.jsx(r,{variant:"outline",iconName:"RotateCcw",disabled:l,title:"Reset parameters",onClick:()=>c({iterations:1e4,confidenceLevel:.95,randomSeed:12345,method:"monte_carlo"})}),e.jsx(r,{variant:"outline",iconName:"Settings",disabled:l,title:"Advanced settings"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"Cpu",size:16}),e.jsx("span",{children:"Web Workers: 4 active"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"MemoryStick",size:16}),e.jsx("span",{children:"Memory: 245MB allocated"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"Clock",size:16}),e.jsx("span",{children:"Last run: 2 min ago"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{variant:"ghost",size:"sm",iconName:"Download",disabled:l,children:"Export Config"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Upload",disabled:l,children:"Import Config"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"History",disabled:l,children:"Run History"})]})]})]})},y=({simulationResults:s,isSimulating:t})=>{const[l,n]=a.useState("enterprise_value"),[o,d]=a.useState("summary"),c=s?.statistics||{enterprise_value:{descriptive:{count:1e4,mean:2847.5,median:2823.1,mode:2798.3,stdDev:456.2,variance:208118.44,skewness:.12,kurtosis:2.98,min:1654.3,max:4521.8,range:2867.5,iqr:615.7},percentiles:{p1:1876.4,p5:2156.7,p10:2287.9,p25:2534.2,p50:2823.1,p75:3149.9,p90:3456.8,p95:3687.4,p99:4123.6},confidence:{ci90_lower:2156.7,ci90_upper:3687.4,ci95_lower:2034.8,ci95_upper:3798.2,ci99_lower:1789.3,ci99_upper:4021.7},risk:{var95:1034.8,var99:1456.2,cvar95:1287.6,cvar99:1678.9,probabilityOfLoss:.023,expectedShortfall:1456.8}}}[l],m=(e,s=l)=>"irr"===s?`${(100*e).toFixed(2)}%`:"multiple"===s?`${e.toFixed(2)}x`:"share_price"===s?`$${e.toFixed(2)}`:`$${(e/1e3).toFixed(1)}B`;return t?e.jsx("div",{className:"h-full flex items-center justify-center bg-card",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"text-lg font-medium text-foreground",children:"Calculating Statistics..."}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Processing simulation results and computing risk metrics"})]})}):e.jsxs("div",{className:"h-full flex flex-col bg-card",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Statistical Analysis"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{options:[{value:"enterprise_value",label:"Enterprise Value ($M)"},{value:"equity_value",label:"Equity Value ($M)"},{value:"share_price",label:"Share Price ($)"},{value:"irr",label:"Internal Rate of Return (%)"},{value:"multiple",label:"EV/EBITDA Multiple"}],value:l,onChange:n,className:"w-48"}),e.jsx(i,{options:[{value:"summary",label:"Summary Statistics"},{value:"percentiles",label:"Percentile Analysis"},{value:"confidence",label:"Confidence Intervals"},{value:"risk",label:"Risk Metrics"}],value:o,onChange:d,className:"w-48"}),e.jsx(r,{variant:"outline",iconName:"Download",size:"sm",children:"Export"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["summary"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Descriptive Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Central Tendency"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Mean"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.mean)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Median"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.median)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Mode"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.mode)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Dispersion"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Standard Deviation"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.stdDev)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Variance"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.variance)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Range"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.range)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Distribution Shape"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Skewness"}),e.jsx("span",{className:"font-mono text-sm",children:c.descriptive.skewness.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Kurtosis"}),e.jsx("span",{className:"font-mono text-sm",children:c.descriptive.kurtosis.toFixed(3)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Extremes"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Minimum"}),e.jsx("span",{className:"font-mono text-sm text-error",children:m(c.descriptive.min)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Maximum"}),e.jsx("span",{className:"font-mono text-sm text-success",children:m(c.descriptive.max)})]})]})]})]})]}),"percentiles"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Percentile Analysis"}),e.jsx("div",{className:"space-y-4",children:Object.entries(c.percentiles).map(([s,a])=>{const r=s.replace("p",""),t="1"===r||"99"===r,i=["25","50","75"].includes(r);return e.jsxs("div",{className:"flex justify-between items-center p-4 rounded-lg border "+(t?"border-warning bg-warning/5":i?"border-primary bg-primary/5":"border-border bg-muted"),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"50"===r?"Median":`${r}th Percentile`}),i&&e.jsxs("div",{className:"px-2 py-1 bg-primary text-primary-foreground text-xs rounded",children:["Q","25"===r?"1":"50"===r?"2":"3"]})]}),e.jsx("span",{className:"font-mono text-sm font-medium",children:m(a)})]},s)})}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Interpretation"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsxs("p",{children:["â¢ 50% of outcomes fall below ",m(c.percentiles.p50)]}),e.jsxs("p",{children:["â¢ 90% of outcomes fall between ",m(c.percentiles.p5)," and"," ",m(c.percentiles.p95)]}),e.jsxs("p",{children:["â¢ Interquartile range: ",m(c.descriptive.iqr)]})]})]})]}),"confidence"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Confidence Intervals"}),e.jsx("div",{className:"space-y-4",children:[{level:"90%",lower:c.confidence.ci90_lower,upper:c.confidence.ci90_upper},{level:"95%",lower:c.confidence.ci95_lower,upper:c.confidence.ci95_upper},{level:"99%",lower:c.confidence.ci99_lower,upper:c.confidence.ci99_upper}].map(s=>e.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-medium text-foreground",children:[s.level," Confidence Interval"]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Width: ",m(s.upper-s.lower)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Lower Bound"}),e.jsx("div",{className:"font-mono text-sm font-medium text-error",children:m(s.lower)})]}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-2 bg-muted rounded-full relative",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-error via-warning to-success rounded-full"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Upper Bound"}),e.jsx("div",{className:"font-mono text-sm font-medium text-success",children:m(s.upper)})]})]})]},s.level))})]}),"risk"===o&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Risk Assessment"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Value at Risk (VaR)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-error/10 border border-error/20 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"95% VaR"}),e.jsx("span",{className:"font-mono text-sm text-error",children:m(c.risk.var95)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-error/10 border border-error/20 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"99% VaR"}),e.jsx("span",{className:"font-mono text-sm text-error",children:m(c.risk.var99)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Conditional VaR (CVaR)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"95% CVaR"}),e.jsx("span",{className:"font-mono text-sm text-warning",children:m(c.risk.cvar95)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"99% CVaR"}),e.jsx("span",{className:"font-mono text-sm text-warning",children:m(c.risk.cvar99)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Additional Risk Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Probability of Loss"}),e.jsxs("span",{className:"font-mono text-sm",children:[(100*c.risk.probabilityOfLoss).toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"Expected Shortfall"}),e.jsx("span",{className:"font-mono text-sm",children:m(c.risk.expectedShortfall)})]})]})]}),e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Risk Interpretation"}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[e.jsxs("p",{children:["â¢ There is a 5% chance of losing more than ",m(c.risk.var95)]}),e.jsxs("p",{children:["â¢ In the worst 5% of scenarios, average loss is ",m(c.risk.cvar95)]}),e.jsxs("p",{children:["â¢ Probability of any loss: ",(100*c.risk.probabilityOfLoss).toFixed(1),"%"]})]})]})]})]})]})},w=()=>{const[i,l]=a.useState(!1),[n,o]=a.useState(0),[d,c]=a.useState(null),[m,x]=a.useState([]),[u,h]=a.useState("visualization"),[p,v]=a.useState({connected:!0,lastSync:new Date(Date.now()-12e4),baseModel:"DCF_Analysis_v2.3"});a.useEffect(()=>{const e=setInterval(()=>{v(e=>({...e,lastSync:new Date}))},6e4);return()=>clearInterval(e)},[]);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(t,{}),e.jsxs("div",{className:"pt-[60px] h-screen flex flex-col",children:[e.jsx(N,{onRunSimulation:async e=>{l(!0),o(0),c(null);const s=setInterval(()=>{o(e=>e>=100?(clearInterval(s),100):e+5*Math.random())},200);setTimeout(()=>{clearInterval(s),o(100);const a={summary:{mean:2847.5,median:2823.1,stdDev:456.2,min:1654.3,max:4521.8,percentile5:2156.7,percentile95:3687.4,iterations:e.iterations},completedAt:new Date,parameters:e};c(a),l(!1)},8e3)},isSimulating:i,progress:n,onStopSimulation:()=>{l(!1),o(0)}}),e.jsx("div",{className:"bg-muted/50 border-b border-border px-6 py-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+(p.connected?"bg-success":"bg-error")}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Base Model: ",p.baseModel]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"RefreshCw",size:14,className:"text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last sync: ",(e=>{const s=Math.floor((new Date-e)/1e3);if(s<60)return`${s}s ago`;const a=Math.floor(s/60);if(a<60)return`${a}m ago`;return`${Math.floor(a/60)}h ago`})(p.lastSync)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(s,{name:"Users",size:14,className:"text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"3 collaborators active"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(r,{variant:"ghost",size:"sm",iconName:"Sync",disabled:i,children:"Sync Now"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"History",disabled:i,children:"Version History"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Share2",disabled:i,children:"Share Analysis"})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-2/5 min-w-[480px]",children:e.jsx(g,{onScenarioUpdate:e=>{x(e)},isSimulating:i})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-card border-b border-border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-1",children:[{id:"visualization",label:"Charts",icon:"BarChart3"},{id:"statistics",label:"Statistics",icon:"Calculator"}].map(a=>e.jsxs("button",{onClick:()=>h(a.id),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg transition-smooth "+(u===a.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),disabled:i,children:[e.jsx(s,{name:a.icon,size:16}),e.jsx("span",{children:a.label})]},a.id))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Completed: ",d.completedAt.toLocaleTimeString()]}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Maximize2",title:"Fullscreen view"}),e.jsx(r,{variant:"ghost",size:"sm",iconName:"Settings",title:"Display settings"})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:"visualization"===u?e.jsx(f,{simulationResults:d,isSimulating:i}):e.jsx(y,{simulationResults:d,isSimulating:i})})]})]}),e.jsx("div",{className:"bg-muted/30 border-t border-border px-6 py-2",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("span",{children:["Scenarios: ",m.length]}),e.jsx("span",{children:"Variables: 4 active"}),e.jsx("span",{children:"Correlations: 3 defined"}),d&&e.jsxs("span",{children:["Iterations: ",d.summary.iterations.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["Â© ",(new Date).getFullYear()," FinanceAnalyst Pro"]}),e.jsx("span",{children:"â¢"}),e.jsx("span",{children:"SOX Compliant"}),e.jsx("span",{children:"â¢"}),e.jsx("span",{children:"Audit Trail: Enabled"})]})]})})]})]})};export{w as default};
//# sourceMappingURL=index-D51FfFXL.js.map
