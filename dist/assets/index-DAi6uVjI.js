import{r as e,j as s}from"./react-vendor-CaXMqa0k.js";import{I as a}from"./index-DPdPN0n0.js";import{B as r}from"./Button-DP1W3JTY.js";import{H as t}from"./Header-BiC9vSZ5.js";import{S as i}from"./Select-vzzrcgG8.js";import{ResponsiveContainer as l,BarChart as n,CartesianGrid as o,XAxis as d,YAxis as c,Tooltip as m,Bar as x,ScatterChart as u,Scatter as h,AreaChart as p,Area as v,Line as j}from"./charts-vendor-DVkUTdXq.js";import{I as b}from"./Input-Cd7DyeLJ.js";import"./vendor-zO7HU-o7.js";import"./data-vendor-DpIj8wd6.js";import"./ui-vendor-DOXsx3JB.js";import"./utils-vendor-Cj_bvvWu.js";import"./state-vendor-DL0PFC30.js";const f=({simulationResults:t,isSimulating:b})=>{const[f,g]=e.useState("distribution"),[N,y]=e.useState("enterprise_value"),w={summary:{mean:2847.5,median:2823.1,stdDev:456.2,percentile5:2156.7,percentile95:3687.4,iterations:1e4},distribution:Array.from({length:50},(e,s)=>({value:1500+60*s,frequency:Math.max(0,Math.round(200*Math.exp(-Math.pow((s-25)/10,2))))})),tornado:[{variable:"Revenue Growth",impact:847.2,direction:"positive"},{variable:"Terminal Growth",impact:623.8,direction:"positive"},{variable:"WACC",impact:-567.4,direction:"negative"},{variable:"Margin Expansion",impact:445.6,direction:"positive"},{variable:"CapEx Ratio",impact:-334.2,direction:"negative"},{variable:"Working Capital",impact:-187.9,direction:"negative"}],scatter:Array.from({length:1e3},(e,s)=>({revenueGrowth:.05+.3*Math.random(),enterpriseValue:1800+2e3*Math.random()+500*(Math.random()-.5)})),timeSeries:Array.from({length:20},(e,s)=>({iteration:500*(s+1),mean:2800+50*Math.sin(.5*s)+20*Math.random(),confidence95:3600+60*Math.sin(.5*s)+30*Math.random(),confidence5:2e3+40*Math.sin(.5*s)+20*Math.random()}))},S=t||w,C=[{value:"enterprise_value",label:"Enterprise Value ($M)"},{value:"equity_value",label:"Equity Value ($M)"},{value:"share_price",label:"Share Price ($)"},{value:"irr",label:"Internal Rate of Return (%)"},{value:"multiple",label:"EV/EBITDA Multiple"}];return s.jsxs("div",{className:"h-full flex flex-col bg-card",children:[s.jsx("div",{className:"p-6 border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Simulation Results"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(i,{options:C,value:N,onChange:y,className:"w-48",disabled:b}),s.jsx(i,{options:[{value:"pdf",label:"PDF Report"},{value:"excel",label:"Excel Workbook"},{value:"csv",label:"CSV Data"},{value:"png",label:"PNG Image"}],value:"pdf",onChange:()=>{},className:"w-32",disabled:b}),s.jsx(r,{variant:"outline",iconName:"Download",disabled:b,children:"Export"})]})]})}),s.jsx("div",{className:"border-b border-border",children:s.jsx("div",{className:"flex",children:[{value:"distribution",label:"Distribution",icon:"BarChart3"},{value:"tornado",label:"Tornado Chart",icon:"BarChart2"},{value:"scatter",label:"Scatter Plot",icon:"Scatter3D"},{value:"convergence",label:"Convergence",icon:"TrendingUp"}].map(e=>s.jsxs("button",{onClick:()=>g(e.value),className:"flex items-center space-x-2 px-6 py-3 text-sm font-medium transition-smooth "+(f===e.value?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),disabled:b,children:[s.jsx(a,{name:e.icon,size:16}),s.jsx("span",{children:e.label})]},e.value))})}),s.jsx("div",{className:"p-6 border-b border-border bg-muted/30",children:s.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",(S.summary.mean/1e3).toFixed(1),"B"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Mean Value"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["$",(S.summary.median/1e3).toFixed(1),"B"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Median Value"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["Â±$",(S.summary.stdDev/1e3).toFixed(1),"B"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Std Deviation"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-success",children:["$",(S.summary.percentile95/1e3).toFixed(1),"B"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"95th Percentile"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-error",children:["$",(S.summary.percentile5/1e3).toFixed(1),"B"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"5th Percentile"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-foreground",children:S.summary.iterations.toLocaleString()}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Iterations"})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:b?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),s.jsx("div",{className:"text-lg font-medium text-foreground",children:"Running Simulation..."}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Calculating Monte Carlo scenarios with ",S.summary.iterations.toLocaleString()," ","iterations"]})]})}):s.jsxs(s.Fragment,{children:["distribution"===f&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Value Distribution"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(r,{variant:"ghost",size:"sm",iconName:"ZoomIn"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"ZoomOut"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"RotateCcw"})]})]}),s.jsx("div",{className:"h-80",children:s.jsx(l,{width:"100%",height:"100%",children:s.jsxs(n,{data:S.distribution,children:[s.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),s.jsx(d,{dataKey:"value",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),s.jsx(c,{stroke:"var(--color-muted-foreground)",fontSize:12}),s.jsx(m,{formatter:(e,s)=>[`${e} simulations`,"Frequency"],labelFormatter:e=>`Value: $${(e/1e3).toFixed(1)}B`,contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),s.jsx(x,{dataKey:"frequency",fill:"var(--color-primary)",radius:[2,2,0,0]})]})})})]}),"tornado"===f&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Sensitivity Analysis"}),s.jsx(i,{options:[{value:"absolute",label:"Absolute Impact"},{value:"percentage",label:"Percentage Impact"}],value:"absolute",onChange:()=>{},className:"w-40"})]}),s.jsx("div",{className:"h-80",children:s.jsx(l,{width:"100%",height:"100%",children:s.jsxs(n,{data:S.tornado,layout:"horizontal",margin:{left:100},children:[s.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),s.jsx(d,{type:"number",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${Math.abs(e).toFixed(0)}M`}),s.jsx(c,{type:"category",dataKey:"variable",stroke:"var(--color-muted-foreground)",fontSize:12,width:90}),s.jsx(m,{formatter:(e,s)=>[`$${Math.abs(e).toFixed(1)}M`,"Impact"],contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),s.jsx(x,{dataKey:"impact",fill:e=>"positive"===e.direction?"var(--color-success)":"var(--color-error)",radius:[0,2,2,0]})]})})})]}),"scatter"===f&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Variable Correlation"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(i,{options:[{value:"revenue_growth",label:"Revenue Growth"},{value:"margin_expansion",label:"Margin Expansion"},{value:"terminal_growth",label:"Terminal Growth"}],value:"revenue_growth",onChange:()=>{},className:"w-40"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"vs"}),s.jsx(i,{options:C,value:N,onChange:y,className:"w-40"})]})]}),s.jsx("div",{className:"h-80",children:s.jsx(l,{width:"100%",height:"100%",children:s.jsxs(u,{data:S.scatter,children:[s.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),s.jsx(d,{dataKey:"revenueGrowth",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`${(100*e).toFixed(0)}%`}),s.jsx(c,{dataKey:"enterpriseValue",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),s.jsx(m,{formatter:(e,s)=>["revenueGrowth"===s?`${(100*e).toFixed(1)}%`:`$${(e/1e3).toFixed(1)}B`,"revenueGrowth"===s?"Revenue Growth":"Enterprise Value"],contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),s.jsx(h,{dataKey:"enterpriseValue",fill:"var(--color-secondary)",fillOpacity:.6})]})})})]}),"convergence"===f&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Monte Carlo Convergence"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[s.jsx(a,{name:"TrendingUp",size:16}),s.jsx("span",{children:"Convergence achieved at 8,500 iterations"})]})]}),s.jsx("div",{className:"h-80",children:s.jsx(l,{width:"100%",height:"100%",children:s.jsxs(p,{data:S.timeSeries,children:[s.jsx(o,{strokeDasharray:"3 3",stroke:"var(--color-border)"}),s.jsx(d,{dataKey:"iteration",stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`${(e/1e3).toFixed(0)}K`}),s.jsx(c,{stroke:"var(--color-muted-foreground)",fontSize:12,tickFormatter:e=>`$${(e/1e3).toFixed(1)}B`}),s.jsx(m,{formatter:(e,s)=>[`$${(e/1e3).toFixed(2)}B`,s],labelFormatter:e=>`Iteration: ${e.toLocaleString()}`,contentStyle:{backgroundColor:"var(--color-popover)",border:"1px solid var(--color-border)",borderRadius:"8px"}}),s.jsx(v,{dataKey:"confidence95",stroke:"var(--color-primary)",fill:"var(--color-primary)",fillOpacity:.1}),s.jsx(v,{dataKey:"confidence5",stroke:"var(--color-primary)",fill:"var(--color-background)",fillOpacity:1}),s.jsx(j,{dataKey:"mean",stroke:"var(--color-primary)",strokeWidth:2,dot:!1})]})})})]})]})})]})},g=({onScenarioUpdate:t,isSimulating:l})=>{const[n,o]=e.useState("variables"),[d,c]=e.useState([{id:1,name:"Base Case",probability:.4,variables:{revenueGrowth:.15,marginExpansion:.02,capexRatio:.08,terminalGrowth:.025}},{id:2,name:"Bull Case",probability:.3,variables:{revenueGrowth:.25,marginExpansion:.05,capexRatio:.06,terminalGrowth:.035}},{id:3,name:"Bear Case",probability:.3,variables:{revenueGrowth:.05,marginExpansion:-.01,capexRatio:.12,terminalGrowth:.015}}]),[m,x]=e.useState(d[0]),[u,h]=e.useState([{var1:"Revenue Growth",var2:"Margin Expansion",correlation:.65},{var1:"Revenue Growth",var2:"CapEx Ratio",correlation:-.45},{var1:"Margin Expansion",var2:"Terminal Growth",correlation:.35}]),p=[{value:"normal",label:"Normal Distribution"},{value:"triangular",label:"Triangular Distribution"},{value:"uniform",label:"Uniform Distribution"},{value:"lognormal",label:"Log-Normal Distribution"}],v=[{value:"dcf_standard",label:"DCF Standard Variables"},{value:"lbo_analysis",label:"LBO Analysis Variables"},{value:"comps_analysis",label:"Comparable Analysis Variables"},{value:"custom",label:"Custom Variable Set"}],j=(e,s)=>{const a={...m,variables:{...m.variables,[e]:parseFloat(s)}};x(a);const r=d.map(e=>e.id===m.id?a:e);c(r),t(r)},f=()=>{const e={id:d.length+1,name:`Scenario ${d.length+1}`,probability:.1,variables:{...m.variables}};c([...d,e])};return s.jsxs("div",{className:"h-full flex flex-col bg-card border-r border-border",children:[s.jsx("div",{className:"p-6 border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Scenario Configuration"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(l?"bg-warning":"bg-success")}),s.jsx("span",{className:"text-sm text-muted-foreground",children:l?"Simulating...":"Ready"})]})]})}),s.jsx("div",{className:"border-b border-border",children:s.jsx("div",{className:"flex",children:[{id:"variables",label:"Variables",icon:"Settings"},{id:"distributions",label:"Distributions",icon:"BarChart3"},{id:"correlations",label:"Correlations",icon:"Network"},{id:"templates",label:"Templates",icon:"FileTemplate"}].map(e=>s.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center space-x-2 px-4 py-3 text-sm font-medium transition-smooth "+(n===e.id?"border-b-2 border-primary text-primary":"text-muted-foreground hover:text-foreground"),disabled:l,children:[s.jsx(a,{name:e.icon,size:16}),s.jsx("span",{children:e.label})]},e.id))})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["variables"===n&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Scenario Configuration"}),s.jsx(r,{variant:"outline",size:"sm",iconName:"Plus",onClick:f,disabled:l,children:"Add Scenario"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(e=>s.jsxs("button",{onClick:()=>x(e),className:"p-3 rounded-lg border text-left transition-smooth "+(m.id===e.id?"border-primary bg-primary/5 text-primary":"border-border hover:border-primary/50"),disabled:l,children:[s.jsx("div",{className:"font-medium text-sm",children:e.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["P: ",(100*e.probability).toFixed(0),"%"]})]},e.id))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Key Variables"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(b,{label:"Revenue Growth Rate",type:"number",value:m.variables.revenueGrowth,onChange:e=>j("revenueGrowth",e.target.value),placeholder:"0.15",disabled:l,description:"Annual revenue growth rate"}),s.jsx(b,{label:"Margin Expansion",type:"number",value:m.variables.marginExpansion,onChange:e=>j("marginExpansion",e.target.value),placeholder:"0.02",disabled:l,description:"EBITDA margin improvement"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(b,{label:"CapEx Ratio",type:"number",value:m.variables.capexRatio,onChange:e=>j("capexRatio",e.target.value),placeholder:"0.08",disabled:l,description:"CapEx as % of revenue"}),s.jsx(b,{label:"Terminal Growth Rate",type:"number",value:m.variables.terminalGrowth,onChange:e=>j("terminalGrowth",e.target.value),placeholder:"0.025",disabled:l,description:"Long-term growth rate"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Probability Weights"}),s.jsx("div",{className:"space-y-2",children:d.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"font-medium text-sm",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(b,{type:"number",value:e.probability,onChange:s=>{const a=d.map(a=>a.id===e.id?{...a,probability:parseFloat(s.target.value)}:a);c(a)},className:"w-20",disabled:l}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"%"})]})]},e.id))})]})]}),"distributions"===n&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Distribution Parameters"}),s.jsx("div",{className:"space-y-4",children:Object.keys(m.variables).map(e=>s.jsxs("div",{className:"p-4 border border-border rounded-lg space-y-3",children:[s.jsx("h4",{className:"font-medium text-foreground capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(i,{label:"Distribution Type",options:p,value:"normal",onChange:()=>{},disabled:l}),s.jsx(b,{label:"Standard Deviation",type:"number",placeholder:"0.05",disabled:l,description:"Volatility parameter"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(b,{label:"Min Value",type:"number",placeholder:"-0.1",disabled:l}),s.jsx(b,{label:"Most Likely",type:"number",value:m.variables[e],disabled:l}),s.jsx(b,{label:"Max Value",type:"number",placeholder:"0.5",disabled:l})]})]},e))})]}),"correlations"===n&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Variable Correlations"}),s.jsx("div",{className:"space-y-4",children:u.map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:e.var1}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["vs ",e.var2]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(b,{type:"number",value:e.correlation,onChange:e=>{const s=u.map((s,r)=>r===a?{...s,correlation:parseFloat(e.target.value)}:s);h(s)},className:"w-24",disabled:l,min:"-1",max:"1",step:"0.01"}),s.jsx("div",{className:"w-3 h-3 rounded-full "+(e.correlation>.5?"bg-success":e.correlation<-.5?"bg-error":"bg-warning")})]})]},a))}),s.jsx(r,{variant:"outline",iconName:"Plus",disabled:l,className:"w-full",children:"Add Correlation Pair"})]}),"templates"===n&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Scenario Templates"}),s.jsx(i,{label:"Load Template",options:v,value:"dcf_standard",onChange:()=>{},disabled:l,description:"Pre-configured variable sets for common analyses"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Template Actions"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(r,{variant:"outline",iconName:"Download",disabled:l,className:"w-full",children:"Import from Excel"}),s.jsx(r,{variant:"outline",iconName:"Upload",disabled:l,className:"w-full",children:"Export Template"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Saved Templates"}),s.jsx("div",{className:"space-y-2",children:["Tech Company DCF","REIT Analysis","Energy Sector Model"].map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:e}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Last modified: 2 days ago"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(r,{variant:"ghost",size:"sm",iconName:"Eye",disabled:l}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Download",disabled:l})]})]},a))})]})]})]})]})},N=({onRunSimulation:t,isSimulating:l,progress:n,onStopSimulation:o})=>{const[d,c]=e.useState({iterations:1e4,confidenceLevel:.95,randomSeed:12345,method:"monte_carlo"});return s.jsxs("div",{className:"bg-card border-b border-border p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(i,{options:[{value:1e3,label:"1,000 iterations"},{value:5e3,label:"5,000 iterations"},{value:1e4,label:"10,000 iterations"},{value:25e3,label:"25,000 iterations"},{value:5e4,label:"50,000 iterations"},{value:1e5,label:"100,000 iterations"}],value:d.iterations,onChange:e=>c(s=>({...s,iterations:e})),disabled:l,className:"w-48"}),s.jsx(i,{options:[{value:"monte_carlo",label:"Monte Carlo Simulation"},{value:"latin_hypercube",label:"Latin Hypercube Sampling"},{value:"sobol_sequence",label:"Sobol Sequence"},{value:"halton_sequence",label:"Halton Sequence"}],value:d.method,onChange:e=>c(s=>({...s,method:e})),disabled:l,className:"w-56"}),s.jsx(i,{options:[{value:.9,label:"90% Confidence"},{value:.95,label:"95% Confidence"},{value:.99,label:"99% Confidence"}],value:d.confidenceLevel,onChange:e=>c(s=>({...s,confidenceLevel:e})),disabled:l,className:"w-40"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(b,{type:"number",value:d.randomSeed,onChange:e=>c(s=>({...s,randomSeed:parseInt(e.target.value)})),disabled:l,className:"w-24",placeholder:"Seed"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Shuffle",onClick:()=>c(e=>({...e,randomSeed:Math.floor(1e5*Math.random())})),disabled:l,title:"Generate random seed"})]})]}),l&&s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${n}%`}})}),s.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[n.toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-mono",children:Math.floor(n/100*d.iterations).toLocaleString()}),s.jsx("span",{className:"mx-1",children:"/"}),s.jsx("span",{className:"font-mono",children:d.iterations.toLocaleString()})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[!l&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Est. time: ",(()=>{const e=d.iterations/1e3;return e<60?`~${Math.ceil(e)}s`:`~${Math.ceil(e/60)}m`})()]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[l?s.jsx(r,{variant:"destructive",iconName:"Square",onClick:o,children:"Stop Simulation"}):s.jsx(r,{variant:"default",iconName:"Play",onClick:()=>{t(d)},children:"Run Simulation"}),s.jsx(r,{variant:"outline",iconName:"RotateCcw",disabled:l,title:"Reset parameters",onClick:()=>c({iterations:1e4,confidenceLevel:.95,randomSeed:12345,method:"monte_carlo"})}),s.jsx(r,{variant:"outline",iconName:"Settings",disabled:l,title:"Advanced settings"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-border",children:[s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{name:"Cpu",size:16}),s.jsx("span",{children:"Web Workers: 4 active"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{name:"MemoryStick",size:16}),s.jsx("span",{children:"Memory: 245MB allocated"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{name:"Clock",size:16}),s.jsx("span",{children:"Last run: 2 min ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(r,{variant:"ghost",size:"sm",iconName:"Download",disabled:l,children:"Export Config"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Upload",disabled:l,children:"Import Config"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"History",disabled:l,children:"Run History"})]})]})]})},y=({simulationResults:a,isSimulating:t})=>{const[l,n]=e.useState("enterprise_value"),[o,d]=e.useState("summary"),c=a?.statistics||{enterprise_value:{descriptive:{count:1e4,mean:2847.5,median:2823.1,mode:2798.3,stdDev:456.2,variance:208118.44,skewness:.12,kurtosis:2.98,min:1654.3,max:4521.8,range:2867.5,iqr:615.7},percentiles:{p1:1876.4,p5:2156.7,p10:2287.9,p25:2534.2,p50:2823.1,p75:3149.9,p90:3456.8,p95:3687.4,p99:4123.6},confidence:{ci90_lower:2156.7,ci90_upper:3687.4,ci95_lower:2034.8,ci95_upper:3798.2,ci99_lower:1789.3,ci99_upper:4021.7},risk:{var95:1034.8,var99:1456.2,cvar95:1287.6,cvar99:1678.9,probabilityOfLoss:.023,expectedShortfall:1456.8}}}[l],m=(e,s=l)=>"irr"===s?`${(100*e).toFixed(2)}%`:"multiple"===s?`${e.toFixed(2)}x`:"share_price"===s?`$${e.toFixed(2)}`:`$${(e/1e3).toFixed(1)}B`;return t?s.jsx("div",{className:"h-full flex items-center justify-center bg-card",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),s.jsx("div",{className:"text-lg font-medium text-foreground",children:"Calculating Statistics..."}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Processing simulation results and computing risk metrics"})]})}):s.jsxs("div",{className:"h-full flex flex-col bg-card",children:[s.jsx("div",{className:"p-6 border-b border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Statistical Analysis"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(i,{options:[{value:"enterprise_value",label:"Enterprise Value ($M)"},{value:"equity_value",label:"Equity Value ($M)"},{value:"share_price",label:"Share Price ($)"},{value:"irr",label:"Internal Rate of Return (%)"},{value:"multiple",label:"EV/EBITDA Multiple"}],value:l,onChange:n,className:"w-48"}),s.jsx(i,{options:[{value:"summary",label:"Summary Statistics"},{value:"percentiles",label:"Percentile Analysis"},{value:"confidence",label:"Confidence Intervals"},{value:"risk",label:"Risk Metrics"}],value:o,onChange:d,className:"w-48"}),s.jsx(r,{variant:"outline",iconName:"Download",size:"sm",children:"Export"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:["summary"===o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Descriptive Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Central Tendency"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Mean"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.mean)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Median"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.median)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Mode"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.mode)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Dispersion"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Standard Deviation"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.stdDev)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Variance"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.variance)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Range"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.descriptive.range)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Distribution Shape"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Skewness"}),s.jsx("span",{className:"font-mono text-sm",children:c.descriptive.skewness.toFixed(3)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Kurtosis"}),s.jsx("span",{className:"font-mono text-sm",children:c.descriptive.kurtosis.toFixed(3)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Extremes"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Minimum"}),s.jsx("span",{className:"font-mono text-sm text-error",children:m(c.descriptive.min)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Maximum"}),s.jsx("span",{className:"font-mono text-sm text-success",children:m(c.descriptive.max)})]})]})]})]})]}),"percentiles"===o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Percentile Analysis"}),s.jsx("div",{className:"space-y-4",children:Object.entries(c.percentiles).map(([e,a])=>{const r=e.replace("p",""),t="1"===r||"99"===r,i=["25","50","75"].includes(r);return s.jsxs("div",{className:"flex justify-between items-center p-4 rounded-lg border "+(t?"border-warning bg-warning/5":i?"border-primary bg-primary/5":"border-border bg-muted"),children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm font-medium",children:"50"===r?"Median":`${r}th Percentile`}),i&&s.jsxs("div",{className:"px-2 py-1 bg-primary text-primary-foreground text-xs rounded",children:["Q","25"===r?"1":"50"===r?"2":"3"]})]}),s.jsx("span",{className:"font-mono text-sm font-medium",children:m(a)})]},e)})}),s.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[s.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Interpretation"}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsxs("p",{children:["â¢ 50% of outcomes fall below ",m(c.percentiles.p50)]}),s.jsxs("p",{children:["â¢ 90% of outcomes fall between ",m(c.percentiles.p5)," and"," ",m(c.percentiles.p95)]}),s.jsxs("p",{children:["â¢ Interquartile range: ",m(c.descriptive.iqr)]})]})]})]}),"confidence"===o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Confidence Intervals"}),s.jsx("div",{className:"space-y-4",children:[{level:"90%",lower:c.confidence.ci90_lower,upper:c.confidence.ci90_upper},{level:"95%",lower:c.confidence.ci95_lower,upper:c.confidence.ci95_upper},{level:"99%",lower:c.confidence.ci99_lower,upper:c.confidence.ci99_upper}].map(e=>s.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"font-medium text-foreground",children:[e.level," Confidence Interval"]}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Width: ",m(e.upper-e.lower)]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Lower Bound"}),s.jsx("div",{className:"font-mono text-sm font-medium text-error",children:m(e.lower)})]}),s.jsx("div",{className:"flex-1 mx-4",children:s.jsx("div",{className:"h-2 bg-muted rounded-full relative",children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-error via-warning to-success rounded-full"})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Upper Bound"}),s.jsx("div",{className:"font-mono text-sm font-medium text-success",children:m(e.upper)})]})]})]},e.level))})]}),"risk"===o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Risk Assessment"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Value at Risk (VaR)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-error/10 border border-error/20 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"95% VaR"}),s.jsx("span",{className:"font-mono text-sm text-error",children:m(c.risk.var95)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-error/10 border border-error/20 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"99% VaR"}),s.jsx("span",{className:"font-mono text-sm text-error",children:m(c.risk.var99)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Conditional VaR (CVaR)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"95% CVaR"}),s.jsx("span",{className:"font-mono text-sm text-warning",children:m(c.risk.cvar95)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"99% CVaR"}),s.jsx("span",{className:"font-mono text-sm text-warning",children:m(c.risk.cvar99)})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-foreground",children:"Additional Risk Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Probability of Loss"}),s.jsxs("span",{className:"font-mono text-sm",children:[(100*c.risk.probabilityOfLoss).toFixed(2),"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[s.jsx("span",{className:"text-sm font-medium",children:"Expected Shortfall"}),s.jsx("span",{className:"font-mono text-sm",children:m(c.risk.expectedShortfall)})]})]})]}),s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Risk Interpretation"}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[s.jsxs("p",{children:["â¢ There is a 5% chance of losing more than ",m(c.risk.var95)]}),s.jsxs("p",{children:["â¢ In the worst 5% of scenarios, average loss is ",m(c.risk.cvar95)]}),s.jsxs("p",{children:["â¢ Probability of any loss: ",(100*c.risk.probabilityOfLoss).toFixed(1),"%"]})]})]})]})]})]})},w=()=>{const[i,l]=e.useState(!1),[n,o]=e.useState(0),[d,c]=e.useState(null),[m,x]=e.useState([]),[u,h]=e.useState("visualization"),[p,v]=e.useState({connected:!0,lastSync:new Date(Date.now()-12e4),baseModel:"DCF_Analysis_v2.3"});e.useEffect(()=>{const e=setInterval(()=>{v(e=>({...e,lastSync:new Date}))},6e4);return()=>clearInterval(e)},[]);return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(t,{}),s.jsxs("div",{className:"pt-[60px] h-screen flex flex-col",children:[s.jsx(N,{onRunSimulation:async e=>{l(!0),o(0),c(null);const s=setInterval(()=>{o(e=>e>=100?(clearInterval(s),100):e+5*Math.random())},200);setTimeout(()=>{clearInterval(s),o(100);const a={summary:{mean:2847.5,median:2823.1,stdDev:456.2,min:1654.3,max:4521.8,percentile5:2156.7,percentile95:3687.4,iterations:e.iterations},completedAt:new Date,parameters:e};c(a),l(!1)},8e3)},isSimulating:i,progress:n,onStopSimulation:()=>{l(!1),o(0)}}),s.jsx("div",{className:"bg-muted/50 border-b border-border px-6 py-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full "+(p.connected?"bg-success":"bg-error")}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Base Model: ",p.baseModel]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{name:"RefreshCw",size:14,className:"text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Last sync: ",(e=>{const s=Math.floor((new Date-e)/1e3);if(s<60)return`${s}s ago`;const a=Math.floor(s/60);if(a<60)return`${a}m ago`;return`${Math.floor(a/60)}h ago`})(p.lastSync)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(a,{name:"Users",size:14,className:"text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"3 collaborators active"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(r,{variant:"ghost",size:"sm",iconName:"Sync",disabled:i,children:"Sync Now"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"History",disabled:i,children:"Version History"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Share2",disabled:i,children:"Share Analysis"})]})]})}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsx("div",{className:"w-2/5 min-w-[480px]",children:s.jsx(g,{onScenarioUpdate:e=>{x(e)},isSimulating:i})}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-card border-b border-border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-1",children:[{id:"visualization",label:"Charts",icon:"BarChart3"},{id:"statistics",label:"Statistics",icon:"Calculator"}].map(e=>s.jsxs("button",{onClick:()=>h(e.id),className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg transition-smooth "+(u===e.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),disabled:i,children:[s.jsx(a,{name:e.icon,size:16}),s.jsx("span",{children:e.label})]},e.id))}),s.jsxs("div",{className:"flex items-center space-x-2",children:[d&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Completed: ",d.completedAt.toLocaleTimeString()]}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Maximize2",title:"Fullscreen view"}),s.jsx(r,{variant:"ghost",size:"sm",iconName:"Settings",title:"Display settings"})]})]})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:"visualization"===u?s.jsx(f,{simulationResults:d,isSimulating:i}):s.jsx(y,{simulationResults:d,isSimulating:i})})]})]}),s.jsx("div",{className:"bg-muted/30 border-t border-border px-6 py-2",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("span",{children:["Scenarios: ",m.length]}),s.jsx("span",{children:"Variables: 4 active"}),s.jsx("span",{children:"Correlations: 3 defined"}),d&&s.jsxs("span",{children:["Iterations: ",d.summary.iterations.toLocaleString()]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{children:["Â© ",(new Date).getFullYear()," FinanceAnalyst Pro"]}),s.jsx("span",{children:"â¢"}),s.jsx("span",{children:"SOX Compliant"}),s.jsx("span",{children:"â¢"}),s.jsx("span",{children:"Audit Trail: Enabled"})]})]})})]})]})};export{w as default};
//# sourceMappingURL=index-DAi6uVjI.js.map
