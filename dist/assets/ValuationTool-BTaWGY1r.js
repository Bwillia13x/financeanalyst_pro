import{r as e,j as s,l as a,m as t,n as r,o as l,p as n,q as i,s as c,D as d,t as o,k as x,S as m,v as h,w as u,x as g,y as p,M as b,X as y,z as j,E as f,F as v}from"./react-vendor-BWiQdkVb.js";import{C as N}from"./Card-BzCfOk1i.js";import{B as w}from"./Button-C0m44oek.js";import{I as C}from"./index-Dc3K68ej.js";import{S as k}from"./SEOHead-DrWvJWRJ.js";import{m as R,A as F}from"./ui-vendor-x_EeA8uv.js";import{ResponsiveContainer as P,LineChart as S,CartesianGrid as D,XAxis as T,YAxis as $,Tooltip as M,Legend as A,Line as G}from"./charts-vendor-CB3i9QZK.js";import{I as Y}from"./Input-BkAWvzgW.js";import"./Select-TUHkO3ep.js";import"./vendor-uZFMUkl0.js";import"./utils-vendor-Cj_bvvWu.js";import"./state-vendor-D3vL4m0Q.js";const E=({inputs:a,setInputs:t})=>{const[r,l]=e.useState("simple"),n=(e,s)=>{t(a=>({...a,[e]:parseFloat(s)||0}))},i=(e,s,r)=>{const l=a.yearlyData||{},n={...l,[e]:{...l[e],[s]:parseFloat(r)||0}};t(e=>({...e,yearlyData:n}))},c=(e,s)=>{const r=a.balanceSheet||{};t(a=>({...a,balanceSheet:{...r,[e]:parseFloat(s)||0}}))};e.useEffect(()=>{if(a.projectionYears&&!a.yearlyData){const e={};for(let s=1;s<=a.projectionYears;s++)e[s]={revenueGrowth:100*a.revenueGrowthRate||10,ebitdaMargin:100*a.ebitdaMargin||20,taxRate:100*a.taxRate||25,capexPercent:100*a.capexPercent||3,workingCapitalChange:100*a.workingCapitalPercent||2,daPercent:3};t(s=>({...s,yearlyData:e}))}},[a.projectionYears,a.yearlyData,t]),e.useEffect(()=>{a.balanceSheet||t(e=>({...e,balanceSheet:{cash:1e7,totalDebt:5e6,sharesOutstanding:1e6}}))},[a.balanceSheet,t]);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"DCF Model Assumptions"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>l("simple"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("simple"===r?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Simple"}),s.jsx("button",{onClick:()=>l("detailed"),className:"px-4 py-2 text-sm rounded-lg transition-colors "+("detailed"===r?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Detailed"})]})]}),"simple"===r?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentRevenue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Revenue ($)"}),s.jsx("input",{id:"currentRevenue",type:"number",value:a.currentRevenue||0,onChange:e=>n("currentRevenue",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"revenueGrowthRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Revenue Growth Rate (%)"}),s.jsx("input",{id:"revenueGrowthRate",type:"number",step:"0.01",value:100*(a.revenueGrowthRate||0),onChange:e=>n("revenueGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"ebitdaMargin",className:"block text-sm font-medium text-gray-700 mb-1",children:"EBITDA Margin (%)"}),s.jsx("input",{id:"ebitdaMargin",type:"number",step:"0.01",value:100*(a.ebitdaMargin||0),onChange:e=>n("ebitdaMargin",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"taxRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),s.jsx("input",{id:"taxRate",type:"number",step:"0.01",value:100*(a.taxRate||0),onChange:e=>n("taxRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"terminalGrowthRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Terminal Growth Rate (%)"}),s.jsx("input",{id:"terminalGrowthRate",type:"number",step:"0.01",value:100*(a.terminalGrowthRate||0),onChange:e=>n("terminalGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"discountRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Rate (WACC) (%)"}),s.jsx("input",{id:"discountRate",type:"number",step:"0.01",value:100*(a.discountRate||0),onChange:e=>n("discountRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"projectionYears",className:"block text-sm font-medium text-gray-700 mb-1",children:"Projection Years"}),s.jsx("input",{id:"projectionYears",type:"number",min:"3",max:"10",value:a.projectionYears||5,onChange:e=>n("projectionYears",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}):(()=>{const e=Array.from({length:a.projectionYears||5},(e,s)=>s+1),t=a.yearlyData||{},r=a.balanceSheet||{};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Base Year (Current)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Revenue ($)"}),s.jsx("input",{type:"number",value:a.currentRevenue||0,onChange:e=>n("currentRevenue",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terminal Growth Rate (%)"}),s.jsx("input",{type:"number",step:"0.01",value:100*(a.terminalGrowthRate||0),onChange:e=>n("terminalGrowthRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Rate (WACC) (%)"}),s.jsx("input",{type:"number",step:"0.01",value:100*(a.discountRate||0),onChange:e=>n("discountRate",e.target.value/100),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:s.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Annual Projections"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),e.map(e=>s.jsxs("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Year ",e]},e))]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Revenue Growth (%)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.revenueGrowth||0,onChange:s=>i(e,"revenueGrowth",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"EBITDA Margin (%)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.ebitdaMargin||0,onChange:s=>i(e,"ebitdaMargin",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Tax Rate (%)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.taxRate||0,onChange:s=>i(e,"taxRate",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"CapEx (% of Revenue)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.capexPercent||0,onChange:s=>i(e,"capexPercent",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"D&A (% of Revenue)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.daPercent||0,onChange:s=>i(e,"daPercent",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:"Δ Working Capital (% of Rev)"}),e.map(e=>s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",step:"0.1",value:t[e]?.workingCapitalChange||0,onChange:s=>i(e,"workingCapitalChange",s.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})},e))]})]})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Balance Sheet Items"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cash ($)"}),s.jsx("input",{type:"number",value:r.cash||0,onChange:e=>c("cash",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Debt ($)"}),s.jsx("input",{type:"number",value:r.totalDebt||0,onChange:e=>c("totalDebt",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shares Outstanding"}),s.jsx("input",{type:"number",value:r.sharesOutstanding||0,onChange:e=>c("sharesOutstanding",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})})()]})},B=({onBack:o})=>{const[x,m]=e.useState({currentRevenue:1e8,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,yearlyData:{},balanceSheet:{}}),[h,u]=e.useState(null),[g,p]=e.useState(null),[b,y]=e.useState("inputs"),[j,f]=e.useState(!1);e.useEffect(()=>{const e=setTimeout(()=>{v()},500);return()=>clearTimeout(e)},[x]);const v=async()=>{if(!x.currentRevenue||x.currentRevenue<=0)return u(null),void p(null);f(!0);try{const e=a(x);u(e);const s=t(x);p(s)}catch(e){u(null),p(null)}f(!1)},N=e=>e||0===e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e):"$0",w=e=>e||0===e?`${e.toFixed(1)}%`:"0%",C=[{id:"inputs",name:"Model Inputs",icon:l},{id:"results",name:"Results",icon:n},{id:"charts",name:"Charts",icon:i},{id:"sensitivity",name:"Sensitivity",icon:c}];return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:o&&s.jsxs("button",{onClick:o,className:"flex items-center text-gray-600 hover:text-gray-900 mr-4",children:[s.jsx(r,{className:"w-5 h-5 mr-1"}),"Back to Overview"]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Enhanced DCF Analysis Tool"}),s.jsx("p",{className:"text-gray-600",children:"Professional discounted cash flow modeling with year-by-year projections and sensitivity analysis"})]}),s.jsx("div",{className:"border-b border-gray-200 mb-8",children:s.jsx("nav",{className:"-mb-px flex space-x-8",children:C.map(e=>{const a=e.icon;return s.jsxs("button",{onClick:()=>y(e.id),className:"flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(b===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),e.name]},e.id)})})}),s.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:["inputs"===b&&s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:s.jsx(E,{inputs:x,setInputs:m})}),"results"===b&&s.jsxs("div",{className:"space-y-6",children:[j&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Calculating..."})]}),h&&!j&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Enterprise Value"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:N(h.enterpriseValue)})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Equity Value"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:N(h.equityValue)})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Share Price"}),s.jsxs("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",h.impliedSharePrice.toFixed(2)]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Terminal Value"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:N(h.presentValueTerminal)})]})]}),h?.projectionTable?s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Projections"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),h.projectionTable.map((e,a)=>s.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Year ",e.year]},a))]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Revenue"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.revenue)},a))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Revenue Growth %"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:w(e.revenueGrowth)},a))]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"EBITDA"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.ebitda)},a))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"EBIT"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.ebit)},a))]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"NOPAT"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.nopat)},a))]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"CapEx"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.capex)},a))]}),s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Δ Working Capital"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:N(e.deltaWorkingCapital)},a))]}),s.jsxs("tr",{className:"bg-blue-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-900",children:"Free Cash Flow"}),h.projectionTable.map((e,a)=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-900 text-right",children:N(e.freeCashFlow)},a))]})]})]})})]}):null,s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valuation Bridge"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"PV of Projection Period FCFs"}),s.jsx("span",{className:"font-semibold",children:N(h.cumulativePV)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"PV of Terminal Value"}),s.jsx("span",{className:"font-semibold",children:N(h.presentValueTerminal)})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-900 font-semibold",children:"Enterprise Value"}),s.jsx("span",{className:"font-bold text-lg",children:N(h.enterpriseValue)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Less: Net Debt"}),s.jsx("span",{className:"font-semibold",children:N(h.netDebt)})]}),s.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-900 font-semibold",children:"Equity Value"}),s.jsx("span",{className:"font-bold text-lg text-blue-600",children:N(h.equityValue)})]})]})]})]})]}),"charts"===b&&s.jsx("div",{className:"space-y-6",children:h&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cash Flow Projections"}),s.jsx("div",{className:"h-96",children:s.jsx(P,{width:"100%",height:"100%",children:s.jsxs(S,{data:h?h.years.map((e,s)=>({year:`Year ${e}`,freeCashFlow:h.freeCashFlows[s],presentValue:h.presentValues[s]})):[],children:[s.jsx(D,{strokeDasharray:"3 3"}),s.jsx(T,{dataKey:"year"}),s.jsx($,{tickFormatter:e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact"}).format(e)}),s.jsx(M,{formatter:e=>[new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)]}),s.jsx(A,{}),s.jsx(G,{type:"monotone",dataKey:"freeCashFlow",stroke:"#3b82f6",strokeWidth:2,name:"Free Cash Flow"}),s.jsx(G,{type:"monotone",dataKey:"presentValue",stroke:"#10b981",strokeWidth:2,name:"Present Value"})]})})})]})})}),"sensitivity"===b&&s.jsx("div",{className:"space-y-6",children:g&&(()=>{if(!g)return null;const{matrix:e,waccRange:a,terminalGrowthRange:t}=g;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sensitivity Analysis - Implied Share Price"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Impact of WACC and Terminal Growth Rate changes on valuation"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 bg-gray-50",children:"WACC \\ Terminal Growth"}),t.map(e=>s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 bg-gray-50",children:w(e)},e))]})}),s.jsx("tbody",{children:e.map((t,r)=>s.jsxs("tr",{className:r%2==0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:w(a[r])}),t.map((a,l)=>{const n=r===Math.floor(e.length/2)&&l===Math.floor(t.length/2);return s.jsxs("td",{className:"px-4 py-3 text-sm text-center "+(n?"bg-blue-100 font-bold text-blue-900":"text-gray-900"),children:["$",a.sharePrice.toFixed(2)]},l)})]},r))})]})})]})})()})]},b),h&&s.jsx("div",{className:"mt-8 text-center",children:s.jsxs("button",{className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",onClick:()=>{},children:[s.jsx(d,{className:"w-5 h-5 mr-2"}),"Export Results"]})})]})})},L=({initialYears:a=5,minYears:t=1,maxYears:r=15,onYearsChange:l,className:n=""})=>{const[i,c]=e.useState(a),[d,o]=e.useState(!1),[x,m]=e.useState(0),[h,u]=e.useState(0),g=e.useCallback(e=>{const s=Math.max(t,Math.min(r,Math.round(e)));s!==i&&(c(s),l?.(s))},[i,t,r,l]),p=e.useCallback(e=>{e.preventDefault(),o(!0),m(e.clientX),u(i),document.body.style.cursor="ew-resize"},[i]),b=e.useCallback(e=>{if(!d)return;const s=e.clientX-x;g(h+.02*s)},[d,x,h,g]),y=e.useCallback(()=>{o(!1),document.body.style.cursor="default"},[]);e.useEffect(()=>{if(d)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y)}},[d,b,y]);return s.jsxs(N,{className:`bg-gray-800 border-gray-700 p-6 ${n}`,children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(C,{name:"Clock",className:"w-5 h-5 text-blue-400"}),s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Projection Period"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Years:"}),s.jsx("span",{className:"text-xl font-bold text-blue-400",children:i})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative h-12",children:[s.jsx("div",{className:"absolute top-4 left-0 right-0 h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full transition-all duration-200",style:{width:i/r*100+"%"}})}),s.jsx("div",{className:"absolute top-2 w-6 h-6 bg-blue-500 rounded-full border-2 border-white shadow-lg cursor-ew-resize transform -translate-x-1/2 hover:bg-blue-400 transition-colors duration-200",style:{left:i/r*100+"%"},onMouseDown:p,children:s.jsx("div",{className:"absolute inset-0 rounded-full animate-pulse bg-blue-400 opacity-30"})}),(()=>{const e=[],a=i<=5?1:i<=10?2:3;for(let t=1;t<=i;t+=a){const a=t/i*100;e.push(s.jsxs("div",{className:"absolute flex flex-col items-center transform -translate-x-1/2",style:{left:`${a}%`},children:[s.jsx("div",{className:"w-px h-3 bg-blue-400"}),s.jsxs("span",{className:"text-xs text-gray-400 mt-1",children:["Y",t]})]},t))}return e})()]}),s.jsx("div",{className:"px-2",children:s.jsx("input",{type:"range",min:t,max:r,value:i,onChange:e=>{const s=parseInt(e.target.value);g(s)},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${i/r*100}%, #374151 ${i/r*100}%, #374151 100%)`}})})]}),s.jsx("div",{className:"flex justify-center space-x-2",children:[3,5,7,10,12,15].filter(e=>e>=t&&e<=r).map(e=>s.jsxs("button",{onClick:()=>{g(e)},className:"px-3 py-1 rounded-full text-sm font-medium transition-all duration-200 "+(i===e?"bg-blue-600 text-white shadow-lg":"bg-gray-700 text-gray-300 hover:bg-gray-600 hover:text-white"),children:[e,"Y"]},e))}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-400",children:[i<=3&&"Short-term focus with higher accuracy",i>3&&i<=7&&"Balanced projection period for most analyses",i>7&&i<=10&&"Extended projection for growth companies",i>10&&"Long-term strategic planning horizon"]})}),s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-gray-500",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"Model updates automatically"})]})]}),s.jsx("style",{jsx:!0,children:"\n        .slider::-webkit-slider-thumb {\n          appearance: none;\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          border: 2px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n          transition: all 0.2s ease;\n        }\n        \n        .slider::-webkit-slider-thumb:hover {\n          background: #2563eb;\n          transform: scale(1.1);\n        }\n        \n        .slider::-webkit-slider-track {\n          height: 8px;\n          border-radius: 4px;\n          background: transparent;\n        }\n        \n        .slider::-moz-range-thumb {\n          width: 20px;\n          height: 20px;\n          border-radius: 50%;\n          background: #3b82f6;\n          border: 2px solid white;\n          cursor: pointer;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        }\n        \n        .slider::-moz-range-track {\n          height: 8px;\n          border-radius: 4px;\n        }\n      "})]})},I=({symbol:a,onBack:t})=>{const[r]=e.useState(`dcf_${Date.now()}`),[l,n]=e.useState(null),[i,c]=e.useState(!1),[d,m]=e.useState(null),[h,u]=e.useState({}),[g,p]=e.useState(null),b=e.useRef(null),[y,j]=e.useState({currentRevenue:1e10,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,symbol:a||"AAPL",trackRealTime:!0,yearlyData:{1:{revenueGrowth:15,ebitdaMargin:25,taxRate:25,capexPercent:4,daPercent:3,workingCapitalChange:2},2:{revenueGrowth:12,ebitdaMargin:24,taxRate:25,capexPercent:4,daPercent:3,workingCapitalChange:2},3:{revenueGrowth:10,ebitdaMargin:23,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1},4:{revenueGrowth:8,ebitdaMargin:22,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1},5:{revenueGrowth:6,ebitdaMargin:21,taxRate:25,capexPercent:3,daPercent:3,workingCapitalChange:1}},balanceSheet:{cash:1e8,totalDebt:5e7,sharesOutstanding:1e9}});e.useEffect(()=>{const e=o.createReactiveModel(r,"dcf",y,(e,s,a)=>{n(e),m(a),p(new Date),c(!1)});return b.current=e,y.trackRealTime&&y.symbol&&(e.addDependency("stock_price",y.symbol),e.addDependency("interest_rates","USD_10Y"),e.addDependency("bond_yields","US10Y")),()=>{b.current&&b.current.destroy()}},[r]),e.useEffect(()=>{if(!y.trackRealTime||!y.symbol)return;const e=[{dataType:"stock_price",symbol:y.symbol},{dataType:"interest_rates",symbol:"USD_10Y"},{dataType:"bond_yields",symbol:"US10Y"},{dataType:"volatility_index",symbol:"VIX"}];return x.subscribeMultiple(e.map(({dataType:e,symbol:s})=>({dataType:e,symbol:s,callback:a=>{u(t=>({...t,[`${e}_${s}`]:a}))}})))},[y.trackRealTime,y.symbol]);const f=e.useCallback((e,s)=>{c(!0),b.current&&b.current.updateInput(e,s),j(a=>{const t={...a},r=e.split(".");let l=t;for(let e=0;e<r.length-1;e++)r[e]in l||(l[r[e]]={}),l=l[r[e]];return l[r[r.length-1]]=s,t})},[]),v=e.useCallback((e,s,a)=>{f(`yearlyData.${e}.${s}`,parseFloat(a)||0)},[f]),k=e.useCallback(e=>{f("projectionYears",e),j(s=>{const a={...s};a.projectionYears=e;for(let t=Object.keys(s.yearlyData).length+1;t<=e;t++)if(!a.yearlyData[t]){const e=a.yearlyData[t-1]||a.yearlyData[Object.keys(a.yearlyData).pop()];a.yearlyData[t]={revenueGrowth:Math.max(2,(e?.revenueGrowth||10)-2),ebitdaMargin:e?.ebitdaMargin||20,taxRate:e?.taxRate||25,capexPercent:e?.capexPercent||3,daPercent:e?.daPercent||3,workingCapitalChange:e?.workingCapitalChange||1}}return Object.keys(a.yearlyData).forEach(s=>{parseInt(s)>e&&delete a.yearlyData[s]}),a})},[f]),R=e.useCallback(()=>{const e=!y.trackRealTime;f("trackRealTime",e),e&&y.symbol&&b.current&&(b.current.addDependency("stock_price",y.symbol),b.current.addDependency("interest_rates","USD_10Y"))},[y.trackRealTime,y.symbol,f]),F=(e,s=0)=>{if(!e)return"$0";const a=Math.abs(e);return a>=1e12?`$${(e/1e12).toFixed(s)}T`:a>=1e9?`$${(e/1e9).toFixed(s)}B`:a>=1e6?`$${(e/1e6).toFixed(s)}M`:a>=1e3?`$${(e/1e3).toFixed(s)}K`:`$${e.toFixed(s)}`},P=(e,a)=>{const t=h[`${e}_${a}`];return t?s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsxs("span",{className:"text-gray-300",children:["stock_price"===e&&`$${t.price?.toFixed(2)}`,"interest_rates"===e&&`${t.rate?.toFixed(2)}%`,"bond_yields"===e&&`${t.yield?.toFixed(2)}%`,"volatility_index"===e&&`${t.volatility?.toFixed(1)}`]})]}):null};return s.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(w,{onClick:t,className:"bg-gray-700 hover:bg-gray-600",size:"sm",children:[s.jsx(C,{name:"ArrowLeft",className:"w-4 h-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Living Model DCF"}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsx("p",{className:"text-gray-400",children:"Real-time, reactive financial modeling"}),g&&s.jsxs("span",{className:"text-xs text-green-400",children:["Updated: ",g.toLocaleTimeString()]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("button",{onClick:R,className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(y.trackRealTime?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:[s.jsx(C,{name:y.trackRealTime?"Zap":"ZapOff",className:"w-4 h-4"}),s.jsxs("span",{children:["Real-time: ",y.trackRealTime?"ON":"OFF"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs(N,{className:"bg-gray-800 border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(C,{name:"Building",className:"w-5 h-5 mr-2 text-blue-400"}),"Company Basics"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Symbol"}),s.jsx(Y,{value:y.symbol,onChange:e=>f("symbol",e.target.value.toUpperCase()),className:"bg-gray-700 border-gray-600",placeholder:"AAPL"}),y.trackRealTime&&P("stock_price",y.symbol)]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Revenue"}),s.jsx(Y,{type:"number",value:y.currentRevenue,onChange:e=>f("currentRevenue",parseFloat(e.target.value)||0),className:"bg-gray-700 border-gray-600",step:"1000000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Discount Rate (WACC)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{type:"number",value:(100*y.discountRate).toFixed(1),onChange:e=>f("discountRate",parseFloat(e.target.value)/100||0),className:"bg-gray-700 border-gray-600",step:"0.1",min:"0",max:"50"}),s.jsx("span",{className:"text-gray-400",children:"%"})]}),y.trackRealTime&&P("interest_rates","USD_10Y")]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Terminal Growth Rate"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{type:"number",value:(100*y.terminalGrowthRate).toFixed(1),onChange:e=>f("terminalGrowthRate",parseFloat(e.target.value)/100||0),className:"bg-gray-700 border-gray-600",step:"0.1",min:"0",max:"10"}),s.jsx("span",{className:"text-gray-400",children:"%"})]})]})]})]}),s.jsx(L,{initialYears:y.projectionYears,onYearsChange:k}),y.trackRealTime&&s.jsxs(N,{className:"bg-gray-800 border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(C,{name:"Activity",className:"w-5 h-5 mr-2 text-green-400"}),"Live Market Data"]}),s.jsxs("div",{className:"space-y-3",children:[P("stock_price",y.symbol)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Stock Price:"}),P("stock_price",y.symbol)]}),P("bond_yields","US10Y")&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"10Y Treasury:"}),P("bond_yields","US10Y")]}),P("volatility_index","VIX")&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"VIX:"}),P("volatility_index","VIX")]})]})]})]}),s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(N,{className:"bg-gray-800 border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(C,{name:"Calendar",className:"w-5 h-5 mr-2 text-blue-400"}),"Year-by-Year Projections"]}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:Array.from({length:y.projectionYears},(e,s)=>s+1).map(e=>s.jsxs("div",{className:"border border-gray-700 rounded-lg p-4",children:[s.jsxs("h4",{className:"font-semibold text-blue-400 mb-3",children:["Year ",e]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Rev Growth %"}),s.jsx(Y,{type:"number",value:y.yearlyData[e]?.revenueGrowth||0,onChange:s=>v(e,"revenueGrowth",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"EBITDA Margin %"}),s.jsx(Y,{type:"number",value:y.yearlyData[e]?.ebitdaMargin||0,onChange:s=>v(e,"ebitdaMargin",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Tax Rate %"}),s.jsx(Y,{type:"number",value:y.yearlyData[e]?.taxRate||0,onChange:s=>v(e,"taxRate",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"CapEx % Rev"}),s.jsx(Y,{type:"number",value:y.yearlyData[e]?.capexPercent||0,onChange:s=>v(e,"capexPercent",s.target.value),className:"bg-gray-700 border-gray-600 text-sm",step:"0.1"})]})]})]},e))})]})}),s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i&&s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 text-gray-400",children:"Calculating..."})]}),d&&s.jsxs(N,{className:"bg-red-900/20 border-red-700 p-6",children:[s.jsxs("div",{className:"flex items-center text-red-400",children:[s.jsx(C,{name:"AlertCircle",className:"w-5 h-5 mr-2"}),s.jsx("span",{children:"Calculation Error"})]}),s.jsx("p",{className:"text-red-300 mt-2 text-sm",children:d.message})]}),l&&s.jsxs(s.Fragment,{children:[s.jsxs(N,{className:"bg-gray-800 border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(C,{name:"TrendingUp",className:"w-5 h-5 mr-2 text-green-400"}),"Key Results"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Enterprise Value:"}),s.jsx("span",{className:"font-semibold text-lg text-blue-400",children:F(l.enterpriseValue,1)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Equity Value:"}),s.jsx("span",{className:"font-semibold text-lg text-green-400",children:F(l.equityValue,1)})]}),s.jsxs("div",{className:"flex justify-between items-center border-t border-gray-700 pt-4",children:[s.jsx("span",{className:"text-gray-400",children:"Share Price:"}),s.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:["$",l.impliedSharePrice?.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400",children:"Terminal Value:"}),s.jsx("span",{className:"font-semibold",children:F(l.terminalValue,1)})]})]})]}),s.jsxs(N,{className:"bg-gray-800 border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(C,{name:"DollarSign",className:"w-5 h-5 mr-2 text-blue-400"}),"Cash Flow Summary"]}),s.jsxs("div",{className:"space-y-2",children:[l.years?.map((e,a)=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-gray-400",children:["Year ",e," FCF:"]}),s.jsx("span",{className:"font-mono",children:F(l.freeCashFlows[a],1)})]},e)),s.jsx("div",{className:"border-t border-gray-700 pt-2 mt-3",children:s.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold",children:[s.jsx("span",{className:"text-gray-300",children:"PV of FCFs:"}),s.jsx("span",{children:F(l.cumulativePV,1)})]})})]})]})]})]})]})]})})},V=({onCompanySelect:a})=>{const[t,r]=e.useState(""),[l,i]=e.useState([]),[c,d]=e.useState(!1),o=[{id:"AAPL",name:"Apple Inc.",ticker:"AAPL",sector:"Technology",marketCap:3e12,price:175.84,change:2.34,changePercent:1.35,financials:{revenue:[274515e6,294135e6,365817e6,383285e6,394328e6],years:[2019,2020,2021,2022,2023]}},{id:"MSFT",name:"Microsoft Corporation",ticker:"MSFT",sector:"Technology",marketCap:28e11,price:378.85,change:-1.23,changePercent:-.32,financials:{revenue:[125843e6,143015e6,168088e6,19827e7,211915e6],years:[2019,2020,2021,2022,2023]}},{id:"GOOGL",name:"Alphabet Inc.",ticker:"GOOGL",sector:"Technology",marketCap:21e11,price:142.56,change:3.21,changePercent:2.3,financials:{revenue:[161857e6,182527e6,257637e6,282836e6,307394e6],years:[2019,2020,2021,2022,2023]}},{id:"JNJ",name:"Johnson & Johnson",ticker:"JNJ",sector:"Healthcare",marketCap:45e10,price:156.78,change:.89,changePercent:.57,financials:{revenue:[82059e6,82584e6,93775e6,94943e6,85159e6],years:[2019,2020,2021,2022,2023]}},{id:"PFE",name:"Pfizer Inc.",ticker:"PFE",sector:"Healthcare",marketCap:32e10,price:28.95,change:-.45,changePercent:-1.53,financials:{revenue:[5175e7,41908e6,81288e6,10033e7,58496e6],years:[2019,2020,2021,2022,2023]}}];e.useEffect(()=>{if(t.length>0){d(!0);const e=setTimeout(()=>{const e=o.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.ticker.toLowerCase().includes(t.toLowerCase()));i(e),d(!1)},300);return()=>clearTimeout(e)}i([]),d(!1)},[t]);const x=e=>{a(e),r(""),i([])};return s.jsxs("div",{className:"relative max-w-lg mx-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(m,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:t,onChange:e=>r(e.target.value),className:"block w-full pl-10 pr-3 py-4 border border-gray-200 rounded-2xl leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg",placeholder:"Search companies (e.g., Apple, AAPL)"})]}),s.jsx(F,{children:(l.length>0||c)&&s.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-10 mt-2 w-full bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:c?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("p",{className:"mt-2 text-sm",children:"Searching..."})]}):s.jsx("div",{className:"max-h-80 overflow-y-auto",children:l.map(e=>{return s.jsx(R.button,{onClick:()=>x(e),whileHover:{backgroundColor:"rgba(59, 130, 246, 0.05)"},className:"w-full p-4 text-left border-b border-gray-50 last:border-b-0 focus:outline-none focus:bg-blue-50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(h,{className:"w-5 h-5 text-white"})})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.name}),s.jsx("span",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:e.ticker})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.sector," • Market Cap: ",(a=e.marketCap,a>=1e12?`$${(a/1e12).toFixed(1)}T`:a>=1e9?`$${(a/1e9).toFixed(1)}B`:a>=1e6?`$${(a/1e6).toFixed(1)}M`:`$${a.toFixed(2)}`)]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",e.price]}),s.jsxs("div",{className:"text-xs flex items-center "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[s.jsx(n,{className:"w-3 h-3 mr-1 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]})},e.id);var a})})})}),!t&&s.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-8",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Popular Companies"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:o.slice(0,4).map(e=>s.jsx(R.button,{onClick:()=>x(e),whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-3 bg-white border border-gray-200 rounded-xl hover:border-blue-300 transition-all text-left",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:s.jsx(h,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.ticker}),s.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.name})]})]})},e.id))})]})]})},_=({company:e,compact:a=!1})=>{if(!e)return null;const t=e=>e>=1e12?`$${(e/1e12).toFixed(1)}T`:e>=1e9?`$${(e/1e9).toFixed(1)}B`:e>=1e6?`$${(e/1e6).toFixed(1)}M`:`$${e.toFixed(2)}`,r=e.financials?.revenue?.map((s,a)=>({year:e.financials.years[a],revenue:s/1e9}))||[],l=(e=>{if(!e||e.length<2)return 0;const s=e[e.length-1],a=e[e.length-2];return(s-a)/a*100})(e.financials?.revenue);return a?s.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 border border-gray-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:s.jsx(h,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.name}),s.jsx("p",{className:"text-sm text-gray-500",children:e.sector})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",e.price]}),s.jsxs("div",{className:"text-sm flex items-center justify-end "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[s.jsx(n,{className:"w-4 h-4 mr-1 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.changePercent.toFixed(2),"%"]})]})]})}):s.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl p-8 border border-gray-100 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:s.jsx(h,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-light text-gray-900 mb-1",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:e.ticker}),s.jsx("span",{children:e.sector}),s.jsxs("span",{children:["Market Cap: ",t(e.marketCap)]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-4xl font-light text-gray-900 mb-1",children:["$",e.price]}),s.jsxs("div",{className:"text-lg flex items-center justify-end "+(e.changePercent>=0?"text-green-600":"text-red-600"),children:[s.jsx(n,{className:"w-5 h-5 mr-2 "+(e.changePercent<0?"rotate-180":"")}),e.changePercent>=0?"+":"",e.change.toFixed(2)," (",e.changePercent.toFixed(2),"%)"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Revenue Trend"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.financials?.years?.[0]," - ",e.financials?.years?.slice(-1)]})]})]}),s.jsx("div",{className:"h-48",children:s.jsx(P,{width:"100%",height:"100%",children:s.jsxs(S,{data:r,children:[s.jsx(T,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"}}),s.jsx($,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#6B7280"},tickFormatter:e=>`$${e}B`}),s.jsx(G,{type:"monotone",dataKey:"revenue",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:0,r:4},activeDot:{r:6,stroke:"#3B82F6",strokeWidth:2,fill:"#fff"}})]})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Latest Revenue"}),s.jsx(g,{className:"w-4 h-4 text-gray-400"})]}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:t(e.financials?.revenue?.slice(-1)[0]||0)}),s.jsxs("div",{className:"text-sm mt-1 "+(l>=0?"text-green-600":"text-red-600"),children:[l>=0?"+":"",l.toFixed(1),"% YoY"]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Market Cap"}),s.jsx(n,{className:"w-4 h-4 text-gray-400"})]}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:t(e.marketCap)}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Public Market"})]}),s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Sector"}),s.jsx(h,{className:"w-4 h-4 text-gray-400"})]}),s.jsx("div",{className:"text-lg font-medium text-gray-900",children:e.sector}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Industry Classification"})]})]})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Financial data loaded • Ready for analysis"})]})})]})},O=({moduleId:a,companyData:t,inputs:r,results:c,onInputChange:d,onFocus:o,onRemove:x,isCompact:m=!1,isFullscreen:h=!1})=>{const[f,v]=e.useState("assumptions"),N={dcf:{name:"DCF Analysis",icon:l,color:"blue",description:"Discounted cash flow valuation model"},comparables:{name:"Comparable Analysis",icon:i,color:"green",description:"Peer group valuation analysis"},lbo:{name:"LBO Analysis",icon:p,color:"purple",description:"Leveraged buyout return analysis"}}[a],w=N.icon,C=({label:e,value:a,min:t,max:r,step:l,suffix:n="",onChange:i})=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:e}),s.jsxs("span",{className:"text-sm font-mono text-gray-900 bg-gray-100 px-2 py-1 rounded",children:[a.toFixed(l<1?1:0),n]})]}),s.jsx("div",{className:"relative",children:s.jsx("input",{type:"range",min:t,max:r,step:l,value:a,onChange:e=>i(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, rgb(59 130 246) 0%, rgb(59 130 246) ${(a-t)/(r-t)*100}%, rgb(229 231 235) ${(a-t)/(r-t)*100}%, rgb(229 231 235) 100%)`}})})]});return s.jsx(R.div,{layout:!0,className:""+(h?"":"bg-white border border-gray-100 rounded-2xl overflow-hidden"),children:(()=>{switch(a){case"dcf":return(()=>{if(!r)return null;const a=(e,s)=>{d({[e]:s})},t=(e,s,a)=>{const t={...r.yearlyData,[e]:{...r.yearlyData?.[e],[s]:a}};d({yearlyData:t})},l=e.useMemo(()=>c?.freeCashFlows?c.years.map((e,s)=>({year:`Y${e}`,fcf:c.freeCashFlows[s]/1e6,pv:c.presentValues[s]/1e6})):[],[c]);return m?s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 bg-${N.color}-100 rounded-lg flex items-center justify-center`,children:s.jsx(w,{className:`w-5 h-5 text-${N.color}-600`})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:N.name}),s.jsx("p",{className:"text-sm text-gray-500",children:N.description})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(b,{className:"w-4 h-4"})}),s.jsx("button",{onClick:x,className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(y,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(C,{label:"Terminal Growth Rate",value:100*(r.terminalGrowthRate||.025),min:0,max:5,step:.1,suffix:"%",onChange:e=>a("terminalGrowthRate",e/100)}),s.jsx(C,{label:"Discount Rate (WACC)",value:100*(r.discountRate||.12),min:5,max:20,step:.1,suffix:"%",onChange:e=>a("discountRate",e/100)})]}),c&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Enterprise Value"}),s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",(c.enterpriseValue/1e9).toFixed(1),"B"]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Implied Price"}),s.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:["$",c.impliedSharePrice?.toFixed(2)||"0.00"]})]})]}),l.length>0&&s.jsx("div",{className:"h-32",children:s.jsx(P,{width:"100%",height:"100%",children:s.jsxs(S,{data:l,children:[s.jsx(G,{type:"monotone",dataKey:"fcf",stroke:"#3B82F6",strokeWidth:2,dot:!1}),s.jsx(T,{dataKey:"year",tick:{fontSize:10}}),s.jsx($,{tick:{fontSize:10}}),s.jsx(M,{formatter:e=>[`$${e.toFixed(0)}M`,"FCF"],labelStyle:{color:"#374151"}})]})})})]}):s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Model Assumptions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(C,{label:"Current Revenue",value:r.currentRevenue||0,min:1e6,max:1e12,step:1e6,suffix:"",onChange:e=>a("currentRevenue",e)}),s.jsx(C,{label:"Terminal Growth Rate",value:100*(r.terminalGrowthRate||.025),min:0,max:5,step:.1,suffix:"%",onChange:e=>a("terminalGrowthRate",e/100)}),s.jsx(C,{label:"Discount Rate (WACC)",value:100*(r.discountRate||.12),min:5,max:20,step:.1,suffix:"%",onChange:e=>a("discountRate",e/100)})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(C,{label:"Projection Years",value:r.projectionYears||5,min:3,max:10,step:1,suffix:" years",onChange:e=>a("projectionYears",e)}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Year 1 Assumptions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(C,{label:"Revenue Growth",value:r.yearlyData?.[1]?.revenueGrowth||10,min:-10,max:50,step:.5,suffix:"%",onChange:e=>t(1,"revenueGrowth",e)}),s.jsx(C,{label:"EBITDA Margin",value:r.yearlyData?.[1]?.ebitdaMargin||20,min:0,max:50,step:.5,suffix:"%",onChange:e=>t(1,"ebitdaMargin",e)})]})]})]})]})]}),c&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1 space-y-4",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Valuation Results"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(g,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Enterprise Value"})]}),s.jsxs("span",{className:"text-lg font-bold text-blue-900",children:["$",(c.enterpriseValue/1e9).toFixed(1),"B"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(n,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Equity Value"})]}),s.jsxs("span",{className:"text-lg font-bold text-green-900",children:["$",(c.equityValue/1e9).toFixed(1),"B"]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(j,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Implied Price"})]}),s.jsxs("span",{className:"text-lg font-bold text-purple-900",children:["$",c.impliedSharePrice?.toFixed(2)||"0.00"]})]})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Free Cash Flow Projection"}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(u,{className:"w-4 h-4"}),s.jsxs("span",{children:[r.projectionYears||5," Year Model"]})]})]}),s.jsx("div",{className:"h-64",children:s.jsx(P,{width:"100%",height:"100%",children:s.jsxs(S,{data:l,children:[s.jsx(D,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),s.jsx(T,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#64748b"}}),s.jsx($,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#64748b"},tickFormatter:e=>`$${e}M`}),s.jsx(M,{formatter:(e,s)=>[`$${e.toFixed(0)}M`,"fcf"===s?"Free Cash Flow":"Present Value"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),s.jsx(G,{type:"monotone",dataKey:"fcf",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:0,r:4},name:"fcf"}),s.jsx(G,{type:"monotone",dataKey:"pv",stroke:"#10B981",strokeWidth:3,dot:{fill:"#10B981",strokeWidth:0,r:4},name:"pv"})]})})})]})})]})]})})();case"comparables":return s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(i,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Comparable analysis module coming soon"})]});case"lbo":return s.jsxs("div",{className:"p-6 text-center text-gray-500",children:[s.jsx(p,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"LBO analysis module coming soon"})]});default:return null}})()})},W={type:"spring",stiffness:400,damping:25},U=()=>{const[t,r]=e.useState(null),[n,c]=e.useState([]),[d,o]=e.useState("overview"),[x,h]=e.useState(null),[u,g]=e.useState({profile:null,financials:null,marketData:null,consensus:null}),[b,y]=e.useState({dcf:{currentRevenue:0,projectionYears:5,terminalGrowthRate:.025,discountRate:.12,yearlyData:{},balanceSheet:{}}}),[j,N]=e.useState({}),w=[{id:"dcf",name:"DCF Analysis",icon:l,description:"Discounted Cash Flow valuation",color:"blue",isPrimary:!0},{id:"comparables",name:"Comparable Analysis",icon:i,description:"Peer comparison analysis",color:"green",isPrimary:!0},{id:"lbo",name:"LBO Analysis",icon:p,description:"Leveraged buyout modeling",color:"purple",isPrimary:!1}],C=e.useCallback(async e=>{if(r(e),o("analysis"),e.financials?.revenue){const s=e.financials.revenue[e.financials.revenue.length-1],a=k(e.financials.revenue);y(t=>({...t,dcf:{...t.dcf,currentRevenue:s,yearlyData:P(a,e.sector)}}))}c(["dcf"])},[]),k=e=>{if(!e||e.length<2)return[];const s=[];for(let a=1;a<e.length;a++){const t=(e[a]-e[a-1])/e[a-1]*100;s.push(t)}return s},P=(e,s)=>{const a=e.length>0?e.reduce((e,s)=>e+s,0)/e.length:10,t=S(s),r={};for(let l=1;l<=5;l++){const e=Math.max(a*(1-.1*(l-1)),t.terminalGrowth);r[l]={revenueGrowth:e,ebitdaMargin:t.ebitdaMargin,taxRate:t.taxRate,capexPercent:t.capexPercent,daPercent:t.daPercent,workingCapitalChange:t.workingCapitalChange}}return r},S=e=>{const s={Technology:{ebitdaMargin:25,taxRate:21,capexPercent:3,daPercent:5,workingCapitalChange:1,terminalGrowth:3},Healthcare:{ebitdaMargin:20,taxRate:25,capexPercent:4,daPercent:4,workingCapitalChange:2,terminalGrowth:2.5},default:{ebitdaMargin:18,taxRate:25,capexPercent:5,daPercent:4,workingCapitalChange:2,terminalGrowth:2.5}};return s[e]||s.default},D=e=>{c(s=>s.filter(s=>s!==e)),x===e&&(h(null),o("analysis"))},T=e.useCallback((e,s)=>{if(y(a=>({...a,[e]:{...a[e],...s}})),"dcf"===e){const e=a({...b.dcf,...s});N(s=>({...s,dcf:e}))}},[b]),$={overview:{scale:1,y:0,transition:W},analysis:{scale:1,y:0,transition:W},focused:{scale:1.02,y:-20,transition:W}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[s.jsx("div",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-100",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[t?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>{r(null),o("overview"),c([])},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(f,{size:20})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-light text-gray-900",children:t.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[t.sector," • ",t.ticker]})]})]}):s.jsx("h1",{className:"text-2xl font-light text-gray-900",children:"Analysis Canvas"}),t&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>o("analysis"),className:"px-3 py-1.5 text-sm rounded-full transition-all "+("analysis"===d?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Analysis"}),x&&s.jsx("button",{onClick:()=>o("focused"),className:"px-3 py-1.5 text-sm rounded-full transition-all "+("focused"===d?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"),children:"Focus"})]})]})})}),s.jsx(R.div,{variants:$,animate:d,className:"max-w-7xl mx-auto px-6 py-8",children:s.jsx(F,{mode:"wait",children:t?"focused"===d&&x?s.jsxs(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:W,className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>o("analysis"),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(v,{className:"w-5 h-5 rotate-180"})}),s.jsx("h2",{className:"text-2xl font-light text-gray-900",children:w.find(e=>e.id===x)?.name})]}),s.jsx("button",{onClick:()=>D(x),className:"text-gray-400 hover:text-red-500 transition-colors",children:"Remove"})]}),s.jsx(O,{moduleId:x,companyData:t,inputs:b[x],results:j[x],onInputChange:e=>T(x,e),isFullscreen:!0})]},"focused-module"):s.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:W,className:"space-y-8",children:[s.jsx(_,{company:t,compact:n.length>0}),n.length>0&&s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(e=>s.jsx(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:W,className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow duration-300",children:s.jsx(O,{moduleId:e,companyData:t,inputs:b[e],results:j[e],onInputChange:s=>T(e,s),onFocus:()=>(e=>{h(e),o("focused")})(e),onRemove:()=>D(e),isCompact:!0})},e))}),s.jsxs("div",{className:"border-t border-gray-100 pt-8",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Analysis Tools"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:w.filter(e=>!n.includes(e.id)).map(e=>{const a=e.icon;return s.jsxs(R.button,{onClick:()=>{return s=e.id,void(n.includes(s)||c(e=>[...e,s]));var s},whileHover:{scale:1.02},whileTap:{scale:.98},className:"p-6 bg-white rounded-xl border border-gray-200 hover:border-gray-300 transition-all duration-200 text-left group",children:[s.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 bg-${e.color}-50 rounded-lg mb-3 group-hover:bg-${e.color}-100 transition-colors`,children:s.jsx(a,{className:`w-6 h-6 text-${e.color}-600`})}),s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]},e.id)})})]})]},"analysis-canvas"):s.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:W,className:"text-center py-12",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-50 rounded-full mb-4",children:s.jsx(m,{className:"w-8 h-8 text-blue-600"})}),s.jsx("h2",{className:"text-3xl font-light text-gray-900 mb-3",children:"Begin Your Analysis"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Select a company to start building your financial model"})]}),s.jsx(V,{onCompanySelect:C})]})},"company-selection")})})]})},z=()=>{const[a,t]=e.useState("overview");return"dcf"===a?s.jsx(B,{onBack:()=>t("overview")}):"living-dcf"===a?s.jsx(I,{onBack:()=>t("overview")}):"canvas"===a?s.jsx(U,{}):s.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[s.jsx(k,{title:"Valuation Tool | FinanceAnalyst Pro",description:"Professional DCF analysis, LBO modeling, and comparative valuation tools for investment professionals and analysts.",canonical:"/valuation-tool",keywords:"valuation tool, DCF analysis, LBO model, comparable company analysis, investment valuation, financial analysis"}),s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Valuation Tool"}),s.jsx("p",{className:"text-gray-400",children:"Professional valuation models and analysis tools"})]}),s.jsx("div",{className:"mb-8",children:s.jsx(N,{className:"bg-gradient-to-r from-emerald-900 to-teal-900 border-emerald-700",children:s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"Zap",className:"w-10 h-10 text-emerald-300 mr-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white",children:"The Living Model"}),s.jsx("div",{className:"ml-3 px-2 py-1 bg-emerald-600 text-emerald-100 text-xs font-semibold rounded-full",children:"NEW"})]}),s.jsx("p",{className:"text-emerald-100 mb-6 text-lg leading-relaxed",children:"Experience financial modeling transformed. Real-time data integration, instantaneous calculations, and fluid time period adjustments create a living, breathing analysis that evolves with every input change."}),s.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[s.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Real-Time Data Feeds"}),s.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Instantaneous Calculations"}),s.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:"Dynamic Time Periods"}),s.jsx("span",{className:"px-3 py-1 bg-emerald-800/50 text-emerald-200 rounded-full text-sm",children:'No "Run" Button'})]}),s.jsx(w,{className:"bg-white text-emerald-900 hover:bg-emerald-50 font-semibold px-8 py-3",onClick:()=>t("living-dcf"),children:"Experience The Living Model"})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsxs("div",{className:"w-32 h-32 bg-emerald-800/30 rounded-2xl flex items-center justify-center relative",children:[s.jsx(C,{name:"Activity",className:"w-16 h-16 text-emerald-300"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl bg-emerald-400/20 animate-pulse"})]})})]})})})}),s.jsx("div",{className:"mb-8",children:s.jsx(N,{className:"bg-gradient-to-r from-blue-900 to-indigo-900 border-blue-700",children:s.jsx("div",{className:"p-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"Sparkles",className:"w-10 h-10 text-blue-300 mr-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analysis Canvas"})]}),s.jsx("p",{className:"text-blue-100 mb-6 text-lg leading-relaxed",children:"A unified workspace that reimagines financial analysis. Start with any company and seamlessly flow between DCF modeling, comparable analysis, and scenario planning—all in one integrated environment."}),s.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Company-Centric Workflow"}),s.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Intelligent Defaults"}),s.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Interactive Analysis"}),s.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-200 rounded-full text-sm",children:"Minimal Design"})]}),s.jsx(w,{className:"bg-white text-blue-900 hover:bg-blue-50 font-semibold px-8 py-3",onClick:()=>t("canvas"),children:"Enter Analysis Canvas"})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("div",{className:"w-32 h-32 bg-blue-800/30 rounded-2xl flex items-center justify-center",children:s.jsx(C,{name:"BarChart3",className:"w-16 h-16 text-blue-300"})})})]})})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(N,{className:"bg-gray-800 border-gray-700 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/10 rounded-full -translate-y-10 translate-x-10"}),s.jsxs("div",{className:"p-6 relative",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"Zap",className:"w-8 h-8 text-emerald-400 mr-3"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Living Model DCF"}),s.jsx("div",{className:"ml-2 px-2 py-1 bg-emerald-600 text-emerald-100 text-xs font-semibold rounded-full",children:"NEW"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:'Real-time, reactive DCF modeling with live data feeds and instantaneous calculations. No more "run" buttons—watch your model come alive.'}),s.jsx(w,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("living-dcf"),children:"Experience The Living Model"})]})]}),s.jsx(N,{className:"bg-gray-800 border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"TrendingUp",className:"w-8 h-8 text-blue-400 mr-3"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Enhanced DCF Analysis"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Professional DCF modeling with year-by-year projections, sensitivity analysis, and detailed financial statements"}),s.jsx(w,{className:"w-full",onClick:()=>t("dcf"),children:"Launch Enhanced DCF Tool"})]})}),s.jsx(N,{className:"bg-gray-800 border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"BarChart3",className:"w-8 h-8 text-green-400 mr-3"}),s.jsx("h3",{className:"text-xl font-semibold",children:"Comparable Analysis"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Peer comparison and relative valuation metrics"}),s.jsx(w,{className:"w-full",disabled:!0,children:"Coming Soon"})]})}),s.jsx(N,{className:"bg-gray-800 border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(C,{name:"Calculator",className:"w-8 h-8 text-purple-400 mr-3"}),s.jsx("h3",{className:"text-xl font-semibold",children:"LBO Analysis"})]}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Leveraged buyout modeling and returns analysis"}),s.jsx(w,{className:"w-full",disabled:!0,children:"Coming Soon"})]})})]}),s.jsx("div",{className:"mt-8",children:s.jsx(N,{className:"bg-gray-800 border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Enhanced DCF Features"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"Year-by-Year Modeling"}),s.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Individual assumptions for each projection year"}),s.jsx("li",{children:"• Revenue growth, margins, tax rates, and capex"}),s.jsx("li",{children:"• Working capital and D&A projections"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Professional Calculations"}),s.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Proper Unlevered Free Cash Flow calculation"}),s.jsx("li",{children:"• Enterprise to Equity value bridge"}),s.jsx("li",{children:"• Balance sheet integration"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-purple-400 mb-2",children:"Advanced Analytics"}),s.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[s.jsx("li",{children:"• WACC and terminal growth sensitivity analysis"}),s.jsx("li",{children:"• Interactive projection tables"}),s.jsx("li",{children:"• Cash flow visualization charts"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-orange-400 mb-2",children:"User Experience"}),s.jsxs("ul",{className:"text-gray-400 text-sm space-y-1",children:[s.jsx("li",{children:"• Simple and detailed input modes"}),s.jsx("li",{children:"• Real-time calculation updates"}),s.jsx("li",{children:"• Export capabilities"})]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(w,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>t("dcf"),children:"Try Enhanced DCF Tool"})})]})})}),s.jsx("div",{className:"mt-8",children:s.jsx(N,{className:"bg-gray-800 border-gray-700",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quick Access Terminal"}),s.jsx("p",{className:"text-gray-400 mb-4",children:"Use the enhanced terminal interface for advanced valuation commands:"}),s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 font-mono text-sm",children:[s.jsx("div",{className:"text-green-400",children:"$ DCF(AAPL)"}),s.jsx("div",{className:"text-green-400",children:"$ LBO(TSLA)"}),s.jsx("div",{className:"text-green-400",children:"$ COMP(MSFT)"}),s.jsx("div",{className:"text-green-400",children:'$ HELP("VALUATION")'})]}),s.jsx("div",{className:"mt-4",children:s.jsx(w,{disabled:!0,children:"Terminal Interface - Coming Soon"})})]})})})]})]})};export{z as default};
//# sourceMappingURL=ValuationTool-BTaWGY1r.js.map
