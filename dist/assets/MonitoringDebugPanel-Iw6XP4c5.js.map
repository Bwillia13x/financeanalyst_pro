{"version":3,"file":"MonitoringDebugPanel-Iw6XP4c5.js","sources":["../../src/components/MonitoringDebugPanel.jsx"],"sourcesContent":["import { useCallback, useMemo, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport monitoring from '../utils/monitoring';\n\nconst isProd = import.meta.env.VITE_APP_ENV === 'production';\n\nexport default function MonitoringDebugPanel() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [logs, setLogs] = useState([]);\n  const [shouldCrash, setShouldCrash] = useState(false);\n\n  const env = useMemo(() => ({\n    VITE_APP_ENV: import.meta.env.VITE_APP_ENV,\n    VITE_ENABLE_ANALYTICS: import.meta.env.VITE_ENABLE_ANALYTICS,\n    VITE_ENABLE_ERROR_REPORTING: import.meta.env.VITE_ENABLE_ERROR_REPORTING,\n    VITE_PERFORMANCE_MONITORING: import.meta.env.VITE_PERFORMANCE_MONITORING,\n    VITE_GA_TRACKING_ID: import.meta.env.VITE_GA_TRACKING_ID,\n    VITE_HOTJAR_ID: import.meta.env.VITE_HOTJAR_ID,\n    VITE_SENTRY_DSN: Boolean(import.meta.env.VITE_SENTRY_DSN) ? 'SET' : 'MISSING'\n  }), []);\n\n  const addLog = useCallback((msg) => {\n    setLogs((l) => [{ ts: new Date().toISOString(), msg }, ...l].slice(0, 50));\n  }, []);\n\n  const triggerPageview = useCallback(() => {\n    const testPath = `/debug-path-${Date.now()}?from=monitoring-panel`;\n    monitoring.trackPageView(testPath);\n    addLog(`Called monitoring.trackPageView('${testPath}')`);\n  }, [addLog]);\n\n  const navigateAndTrack = useCallback(() => {\n    const newPath = `${location.pathname}?pv=${Date.now()}`;\n    navigate(newPath, { replace: false });\n    addLog(`Navigated to '${newPath}' to test SPA pageview`);\n  }, [location.pathname, navigate, addLog]);\n\n  const captureSentry = useCallback(() => {\n    try {\n      throw new Error(`Sentry test error @ ${new Date().toISOString()}`);\n    } catch (e) {\n      monitoring.trackError(e, 'debug_panel_capture');\n      addLog('Sent error via monitoring.trackError(...)');\n    }\n  }, [addLog]);\n\n  const crashComponent = useCallback(() => {\n    // Cause an error during render so ErrorBoundary can catch it\n    addLog('Setting crash flag to render CrashNow component...');\n    setShouldCrash(true);\n  }, [addLog]);\n\n  const CrashNow = () => {\n    throw new Error('ErrorBoundary crash test from MonitoringDebugPanel (render phase)');\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6\">\n      {shouldCrash && <CrashNow />}\n      <h1 className=\"text-2xl font-semibold mb-2\">Monitoring Debug Panel</h1>\n      <p className=\"text-sm text-neutral-600 mb-4\">\n        Environment: <span className=\"font-mono\">{env.VITE_APP_ENV}</span>\n      </p>\n\n      {isProd && (\n        <div className=\"p-3 mb-4 rounded border border-yellow-300 bg-yellow-50 text-yellow-900\">\n          This panel is visible in production. Actions are still allowed, but use with caution.\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div className=\"p-4 rounded border bg-white\">\n          <h2 className=\"font-medium mb-2\">Flags & IDs</h2>\n          <ul className=\"text-sm space-y-1\">\n            <li>VITE_ENABLE_ANALYTICS: <b>{String(env.VITE_ENABLE_ANALYTICS)}</b></li>\n            <li>VITE_ENABLE_ERROR_REPORTING: <b>{String(env.VITE_ENABLE_ERROR_REPORTING)}</b></li>\n            <li>VITE_PERFORMANCE_MONITORING: <b>{String(env.VITE_PERFORMANCE_MONITORING)}</b></li>\n            <li>GA_TRACKING_ID: <b>{env.VITE_GA_TRACKING_ID || 'MISSING'}</b></li>\n            <li>HOTJAR_ID: <b>{env.VITE_HOTJAR_ID || 'MISSING'}</b></li>\n            <li>SENTRY_DSN: <b>{env.VITE_SENTRY_DSN}</b></li>\n          </ul>\n        </div>\n\n        <div className=\"p-4 rounded border bg-white\">\n          <h2 className=\"font-medium mb-2\">Actions</h2>\n          <div className=\"flex flex-col gap-2\">\n            <button className=\"px-3 py-2 rounded bg-blue-600 text-white\" onClick={triggerPageview}>\n              Trigger GA/Hotjar pageview (manual)\n            </button>\n            <button className=\"px-3 py-2 rounded bg-indigo-600 text-white\" onClick={navigateAndTrack}>\n              Navigate (SPA) to trigger route-based pageview\n            </button>\n            <button className=\"px-3 py-2 rounded bg-rose-600 text-white\" onClick={captureSentry}>\n              Capture Sentry error (non-crashing)\n            </button>\n            <button className=\"px-3 py-2 rounded bg-red-700 text-white\" onClick={crashComponent}>\n              Crash component to test ErrorBoundary\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-6 p-4 rounded border bg-white\">\n        <h2 className=\"font-medium mb-2\">Logs</h2>\n        <div className=\"max-h-64 overflow-auto text-sm font-mono space-y-1\">\n          {logs.length === 0 ? (\n            <div className=\"text-neutral-500\">No logs yet.</div>\n          ) : (\n            logs.map((l, i) => (\n              <div key={i}>\n                [{l.ts}] {l.msg}\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"mt-6 text-sm text-neutral-600\">\n        Tips:\n        <ul className=\"list-disc ml-6 mt-2 space-y-1\">\n          <li>Open DevTools Network tab and filter by \"collect\" to see GA hits.</li>\n          <li>Look for WebSocket to <code>wss://*.hotjar.com</code> and requests to <code>in.hotjar.com</code>.</li>\n          <li>Confirm Sentry events arrive in your project dashboard.</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":["MonitoringDebugPanel","navigate","useNavigate","location","useLocation","logs","setLogs","useState","shouldCrash","setShouldCrash","env","useMemo","VITE_APP_ENV","VITE_ENABLE_ANALYTICS","VITE_ENABLE_ERROR_REPORTING","VITE_PERFORMANCE_MONITORING","VITE_GA_TRACKING_ID","VITE_HOTJAR_ID","VITE_SENTRY_DSN","Boolean","addLog","useCallback","msg","l","ts","Date","toISOString","slice","triggerPageview","testPath","now","monitoring","trackPageView","navigateAndTrack","newPath","pathname","replace","captureSentry","Error","e","trackError","crashComponent","CrashNow","jsxs","className","children","jsx","String","onClick","length","map","i"],"mappings":"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"}