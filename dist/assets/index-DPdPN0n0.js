const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DaRjs9Je.js","assets/react-vendor-CaXMqa0k.js","assets/vendor-zO7HU-o7.js","assets/SEOHead-DhiHNgzz.js","assets/Button-DP1W3JTY.js","assets/utils-vendor-Cj_bvvWu.js","assets/Header-BiC9vSZ5.js","assets/portfolioCommands-CQmWdDO4.js","assets/apiLogger-BNPwdfUB.js","assets/lboModelingEngine-DdqVJUup.js","assets/defaultFinancialData-CL3DkgK1.js","assets/data-vendor-DpIj8wd6.js","assets/ui-vendor-DOXsx3JB.js","assets/state-vendor-DL0PFC30.js","assets/index-Df24Vyn4.js","assets/Progress-BgtNI-d-.js","assets/Card-CWZtCt1D.js","assets/Input-Cd7DyeLJ.js","assets/index-DAi6uVjI.js","assets/Select-vzzrcgG8.js","assets/charts-vendor-DVkUTdXq.js","assets/ValuationTool-JNyJC8ha.js","assets/ValuationToolDocs-k4tZhKtW.js","assets/valuation-tool-demo-IDwZ9V5G.js","assets/PrivateAnalysis-6lDoFDgK.js","assets/ValuationWorkbench-CCAiUJnC.js","assets/UIHelpers-CxhvCNNl.js","assets/ModelLab-BzoCkygC.js","assets/PortfolioManagement-4gonq3lo.js","assets/FinancialInputsDemo-BBfkZXRY.js","assets/NotFound--fBOynJD.js"])))=>i.map(i=>d[i]);
import{j as e,C as t,L as a,R as s,r as n,H as r,B as o,M as i,e as l,X as c,U as d,f as u,h as m,T as p,i as h,k as g,l as f,m as y,S as x,n as b,D as v,o as w,p as j,Z as N,u as k,q as C,s as S,t as A,v as E,P as I}from"./react-vendor-CaXMqa0k.js";import{P as D,T}from"./vendor-zO7HU-o7.js";import{a as R}from"./data-vendor-DpIj8wd6.js";import{m as L,A as P}from"./ui-vendor-DOXsx3JB.js";import{t as $,c as F}from"./utils-vendor-Cj_bvvWu.js";import{c as _,a as M}from"./state-vendor-DL0PFC30.js";function O({name:s,size:n=24,color:r="currentColor",className:o="",strokeWidth:i=2,...l}){const c=a[s];return c?e.jsx(c,{size:n,color:r,strokeWidth:i,className:o,...l}):e.jsx(t,{size:n,color:"gray",strokeWidth:i,className:o,...l})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}(),O.propTypes={name:D.string.isRequired,size:D.number,color:D.string,className:D.string,strokeWidth:D.number};class q extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){e.__ErrorBoundary=!0,window.__COMPONENT_ERROR__?.(e,t)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"flex justify-center items-center mb-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42px",height:"42px",viewBox:"0 0 32 33",fill:"none",children:[e.jsx("path",{d:"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z",stroke:"#343330",strokeWidth:"2",strokeMiterlimit:"10"}),e.jsx("path",{d:"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z",fill:"#343330"}),e.jsx("path",{d:"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z",fill:"#343330"}),e.jsx("path",{d:"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5",stroke:"#343330",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[e.jsx("h1",{className:"text-2xl font-medium text-neutral-800",children:"Something went wrong"}),e.jsx("p",{className:"text-neutral-600 text-base w w-8/12 mx-auto",children:"We encountered an unexpected error while processing your request."})]}),e.jsx("div",{className:"flex justify-center items-center mt-6",children:e.jsxs("button",{onClick:()=>{window.location.href="/"},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm",children:[e.jsx(O,{name:"ArrowLeft",size:18,color:"#fff"}),"Back"]})})]})}):this.props.children}}const U=new class{constructor(e={}){this.options={rules:{"color-contrast":{enabled:!0},"keyboard-navigation":{enabled:!0},"focus-management":{enabled:!0},"aria-labels":{enabled:!0},"heading-order":{enabled:!0},"landmark-one-main":{enabled:!0},"skip-link":{enabled:!0},"nested-interactive":{enabled:!1},...e.rules},tags:["wcag2a","wcag2aa","wcag21aa","best-practice"],runOnly:e.runOnly||null,reporter:e.reporter||"v2",...e},this.violations=[],this.lastTestResults=null}async runTests(e=document,t={}){const a={...this.options,...t};try{const t=await T.run(e,a);return this.lastTestResults=t,this.violations=t.violations,this.logResults(t),this.storeResults(t),t}catch(s){throw s}}async testFinancialComponent(e,t="generic"){const a=document.querySelector(e);if(!a)throw new Error(`Element not found: ${e}`);const s={spreadsheet:{rules:{"table-header":{enabled:!0},"th-has-data-cells":{enabled:!0},"table-duplicate-name":{enabled:!0},"scope-attr-valid":{enabled:!0}},tags:["wcag2aa","section508"]},chart:{rules:{"image-alt":{enabled:!0},"svg-img-alt":{enabled:!0},"aria-hidden-focus":{enabled:!0}},tags:["wcag2aa"]},calculator:{rules:{label:{enabled:!0},"form-field-multiple-labels":{enabled:!0},"duplicate-id":{enabled:!0}},tags:["wcag2aa","section508"]},modal:{rules:{"focus-trap":{enabled:!0},"aria-dialog-name":{enabled:!0},"keyboard-navigation":{enabled:!0}},tags:["wcag2aa","best-practice"]}}[t]||{};return await this.runTests(a,s)}async testKeyboardNavigation(){const e=this.getFocusableElements(),t=[];let a=-1;e.forEach((e,s)=>{const n=e.tabIndex||0;n>0&&n<=a&&t.push({element:e.tagName,id:e.id,tabIndex:n,position:s,issue:"Tab order not sequential"}),a=n});const s=[];return e.forEach(e=>{const t=window.getComputedStyle(e,":focus"),a="none"!==t.outline&&"0px"!==t.outline,n="none"!==t.boxShadow,r="transparent"!==t.backgroundColor;a||n||r||s.push({element:e.tagName,id:e.id,className:e.className,issue:"No visible focus indicator"})}),{focusableElementsCount:e.length,tabOrderIssues:t,focusVisibilityIssues:s,passed:0===t.length&&0===s.length}}async testColorContrast(){const e=document.querySelectorAll("p, span, div, td, th, label, button, a, h1, h2, h3, h4, h5, h6"),t=[];return e.forEach(e=>{const a=window.getComputedStyle(e),s=a.color,n=a.backgroundColor;if("transparent"===n||"rgba(0, 0, 0, 0)"===n)return;const r=this.calculateContrastRatio(s,n),o=parseInt(a.fontSize),i=a.fontWeight,l=o>=18||o>=14&&("bold"===i||i>=700)?3:4.5;r<l&&t.push({element:e.tagName,id:e.id,className:e.className,textColor:s,backgroundColor:n,contrast:r.toFixed(2),required:l,fontSize:o,fontWeight:i,text:e.textContent?.substring(0,50)+"..."})}),{totalElements:e.length,contrastIssues:t,passed:0===t.length}}async testFormAccessibility(){const e=document.querySelectorAll("form"),t=[];return e.forEach((e,a)=>{e.querySelectorAll("input, select, textarea").forEach(e=>{const s=[];this.hasAssociatedLabel(e)||s.push("Missing label"),e.required&&!this.hasRequiredIndication(e)&&s.push("Required field not clearly indicated"),"true"!==e.getAttribute("aria-invalid")||this.hasErrorMessage(e)||s.push("Error state without error message"),this.isFinancialInput(e)&&!e.autocomplete&&s.push("Financial input missing autocomplete attribute"),s.length>0&&t.push({formIndex:a,inputType:e.type,inputId:e.id,inputName:e.name,issues:s})})}),{totalForms:e.length,formIssues:t,passed:0===t.length}}generateReport(){if(!this.lastTestResults)throw new Error("No test results available. Run tests first.");const{violations:e,passes:t,incomplete:a,inapplicable:s}=this.lastTestResults;return{summary:{timestamp:(new Date).toISOString(),totalChecks:e.length+t.length+a.length+s.length,violations:e.length,passes:t.length,incomplete:a.length,inapplicable:s.length,score:this.calculateAccessibilityScore()},violations:e.map(e=>({id:e.id,impact:e.impact,description:e.description,help:e.help,helpUrl:e.helpUrl,nodes:e.nodes.length,tags:e.tags})),recommendations:this.generateRecommendations(e),financialSpecific:this.getFinancialAccessibilityInsights()}}calculateAccessibilityScore(){if(!this.lastTestResults)return 0;const{violations:e,passes:t}=this.lastTestResults,a=e.length+t.length;if(0===a)return 100;const s={critical:4,serious:3,moderate:2,minor:1},n=e.reduce((e,t)=>e+(s[t.impact]||1),0),r=4*a;return Math.max(0,100-n/r*100)}generateRecommendations(e){const t=[];return e.forEach(e=>{switch(e.id){case"color-contrast":t.push({category:"Visual Design",priority:"High",issue:"Insufficient color contrast",solution:"Ensure text colors meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)",financialContext:"Critical for reading financial data and avoiding misinterpretation of numbers"});break;case"keyboard-navigation":t.push({category:"Keyboard Access",priority:"High",issue:"Keyboard navigation issues",solution:"Ensure all interactive elements are keyboard accessible with visible focus indicators",financialContext:"Essential for users who rely on keyboard navigation to access financial tools"});break;case"label":t.push({category:"Form Controls",priority:"High",issue:"Missing form labels",solution:"Add proper labels to all form controls, especially financial input fields",financialContext:"Critical for screen readers to understand financial input requirements"});break;case"aria-hidden-focus":t.push({category:"ARIA Usage",priority:"Medium",issue:"Focusable elements hidden from screen readers",solution:"Review aria-hidden usage on interactive elements",financialContext:"May hide important financial controls from assistive technology users"})}}),t}getFinancialAccessibilityInsights(){const e=[];document.querySelectorAll("table").length>0&&e.push({component:"Data Tables",recommendation:"Ensure financial data tables have proper headers and scope attributes for screen reader navigation"});document.querySelectorAll("[data-chart], .recharts-wrapper, canvas").length>0&&e.push({component:"Charts and Graphs",recommendation:"Provide alternative text descriptions and data tables for financial charts"});return document.querySelectorAll("[data-calculator], .calculator").length>0&&e.push({component:"Financial Calculators",recommendation:"Ensure calculator inputs have clear labels and results are announced to screen readers"}),e}getFocusableElements(){return Array.from(document.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",")))}hasAssociatedLabel(e){const t=e.id,a=e.getAttribute("aria-label"),s=e.getAttribute("aria-labelledby");if(a||s)return!0;if(t&&document.querySelector(`label[for="${t}"]`))return!0;return!!e.closest("label")}hasRequiredIndication(e){const t=e.getAttribute("aria-required"),a=e.hasAttribute("required"),s=this.hasRequiredTextIndicator(e);return"true"===t||a||s}hasRequiredTextIndicator(e){const t=this.getAssociatedLabel(e);if(!t)return!1;const a=t.textContent||"";return a.includes("*")||a.toLowerCase().includes("required")}hasErrorMessage(e){const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);return e&&e.textContent}return!1}isFinancialInput(e){return["number","email","tel"].includes(e.type)||["amount","price","rate","percent","currency","value"].some(t=>e.name?.toLowerCase().includes(t))}getAssociatedLabel(e){const t=e.id;if(t){const e=document.querySelector(`label[for="${t}"]`);if(e)return e}return e.closest("label")}calculateContrastRatio(e,t){const a=this.parseColor(e),s=this.parseColor(t),n=this.getLuminance(a),r=this.getLuminance(s);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}parseColor(e){const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return t?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:[0,0,0]}getLuminance([e,t,a]){const[s,n,r]=[e,t,a].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*s+.7152*n+.0722*r}logResults(e){e.violations.length>0&&e.violations.forEach(e=>{})}reportViolations(e){e.forEach(e=>{e.nodes.forEach(e=>{})})}storeResults(e){try{const t={timestamp:Date.now(),url:window.location.href,violations:e.violations.length,passes:e.passes.length,score:this.calculateAccessibilityScore()},a=JSON.parse(localStorage.getItem("accessibility-reports")||"[]");a.push(t),a.length>10&&a.splice(0,a.length-10),localStorage.setItem("accessibility-reports",JSON.stringify(a))}catch(t){}}},V={CLS:null,FID:null,FCP:null,LCP:null,TTFB:null,INP:null};function z(){!function(){let e=0;const t=[];new PerformanceObserver(a=>{for(const s of a.getEntries())s.hadRecentInput||(e+=s.value,t.push(s));V.CLS=e,B("CLS",e,t)}).observe({type:"layout-shift",buffered:!0}),new PerformanceObserver(e=>{for(const t of e.getEntries())if("first-input-delay"===t.name&&(V.FID=t.processingStart-t.startTime,B("FID",V.FID,[t])),t.interactionId){const e=t.processingEnd-t.startTime;(!V.INP||e>V.INP)&&(V.INP=e,B("INP",e,[t]))}}).observe({type:"event",buffered:!0}),new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&(V.FCP=t.startTime,B("FCP",t.startTime,[t]))}).observe({type:"paint",buffered:!0}),new PerformanceObserver(e=>{const t=e.getEntries(),a=t[t.length-1];V.LCP=a.startTime,B("LCP",a.startTime,[a])}).observe({type:"largest-contentful-paint",buffered:!0});const a=performance.getEntriesByType("navigation")[0];a&&(V.TTFB=a.responseStart-a.requestStart,B("TTFB",V.TTFB,[a]))}(),["financial-spreadsheet","dcf-calculator","chart-rendering","market-data-fetch"].forEach(e=>{performance.mark(`${e}-start`)}),window.trackComponentRender=(e,t)=>{performance.mark(`${e}-end`),performance.measure(`${e}-render`,`${e}-start`,`${e}-end`),W("component-render",{component:e,renderTime:t,timestamp:Date.now()})},window.trackCalculationPerformance=(e,t,a)=>{W("financial-calculation",{type:e,duration:t,complexity:a,timestamp:Date.now()})},window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&function(e){const t={...e,url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent,connection:G()};J("navigation-timing",t)}({dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ssl:e.secureConnectionStart>0?e.connectEnd-e.secureConnectionStart:0,ttfb:e.responseStart-e.requestStart,download:e.responseEnd-e.responseStart,domProcessing:e.domComplete-e.domLoading,totalLoadTime:e.loadEventEnd-e.fetchStart})},0)}),new PerformanceObserver(e=>{for(const t of e.getEntries())if("script"===t.initiatorType||"css"===t.initiatorType||"img"===t.initiatorType||"fetch"===t.initiatorType){const e={name:t.name,type:t.initiatorType,size:t.transferSize||t.encodedBodySize,duration:t.duration,cached:0===t.transferSize&&t.encodedBodySize>0,timestamp:Date.now()};(e.size>5e4||e.duration>1e3)&&H(e)}}).observe({entryTypes:["resource"]}),function(){let e=0,t=0;["click","keydown","touchstart"].forEach(a=>{document.addEventListener(a,s=>{const n=performance.now();requestAnimationFrame(()=>{const r=performance.now()-n;e++,t+=r,r>100&&J("slow-interaction",{type:a,target:s.target.tagName,duration:r,timestamp:Date.now()})})},{passive:!0})}),setInterval(()=>{e>0&&(J("interaction-summary",{count:e,averageTime:t/e,timestamp:Date.now()}),e=0,t=0)},3e4)}()}function B(e,t,a){J("web-vital",{metric:e,value:Math.round(t),entries:a.map(e=>({startTime:e.startTime,duration:e.duration||0})),url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent,connection:G()})}function W(e,t){J("custom-metric",{type:e,...t,url:window.location.href,userAgent:navigator.userAgent})}function H(e){J("resource-timing",e)}function K(){const e=[];return Object.entries({LCP:2500,FID:100,CLS:.1,FCP:1800,TTFB:800}).forEach(([t,a])=>{const s=V[t];null!==s&&s>a&&e.push({metric:t,value:s,budget:a,overBy:s-a})}),e.length>0&&J("budget-violations",{violations:e,timestamp:Date.now(),url:window.location.href}),e}function G(){return"connection"in navigator?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null}function J(e,t){try{const a={type:e,data:t,sessionId:Q(),userId:Z()},s=JSON.parse(localStorage.getItem("analytics-queue")||"[]");s.push(a),s.length>100&&s.splice(0,s.length-100),localStorage.setItem("analytics-queue",JSON.stringify(s)),s.length>=10&&Y()}catch(a){}}function Y(){try{const e=JSON.parse(localStorage.getItem("analytics-queue")||"[]");if(0===e.length)return;window.gtag&&e.forEach(e=>{window.gtag("event",e.type,{custom_parameter:JSON.stringify(e.data)})}),localStorage.removeItem("analytics-queue")}catch(e){}}function Q(){let e=sessionStorage.getItem("session-id");return e||(e=Date.now()+"-"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("session-id",e)),e}function Z(){let e=localStorage.getItem("user-id");return e||(e="anonymous-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),localStorage.setItem("user-id",e)),e}function X(e,t){J("performance-metric",{type:e,...t,url:window.location.href,userAgent:navigator.userAgent,timestamp:Date.now()})}function ee(e,t){J("financial-component-performance",{component:e,...t,url:window.location.href,timestamp:Date.now(),userAgent:navigator.userAgent})}function te(e){const t=function(e={}){const{enabled:t=!1,autoTest:a=!1,testInterval:s=null,componentType:r="generic",onViolations:o=null,onSuccess:i=null}=e,[l,c]=n.useState(null),[d,u]=n.useState(!1),[m,p]=n.useState([]),[h,g]=n.useState(null),[f,y]=n.useState(null),x=n.useRef(null),b=n.useRef(null),v=n.useCallback(async(e=null,a={})=>{if(!t)return null;const s=e||x.current||document;u(!0);try{const e=await U.runTests(s,a);return c(e),p(e.violations||[]),g(U.calculateAccessibilityScore()),y(Date.now()),X("accessibility_test",{violations:e.violations?.length||0,score:U.calculateAccessibilityScore(),componentType:r,timestamp:Date.now()}),e.violations?.length>0?o?.(e.violations):i?.(e),e}catch(n){return null}finally{u(!1)}},[t,r,o,i]),w=n.useCallback(async(e,a=r)=>{if(!t)return null;u(!0);try{const t=await U.testFinancialComponent(e,a);return c(t),p(t.violations||[]),g(U.calculateAccessibilityScore()),y(Date.now()),X("financial_component_accessibility",{componentType:a,violations:t.violations?.length||0,score:U.calculateAccessibilityScore(),timestamp:Date.now()}),t}catch(s){return null}finally{u(!1)}},[t,r]),j=n.useCallback(async()=>{if(!t)return null;try{const e=await U.testKeyboardNavigation();return X("keyboard_navigation_test",{focusableElements:e.focusableElementsCount,tabOrderIssues:e.tabOrderIssues?.length||0,focusVisibilityIssues:e.focusVisibilityIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[t]),N=n.useCallback(async()=>{if(!t)return null;try{const e=await U.testColorContrast();return X("color_contrast_test",{totalElements:e.totalElements,contrastIssues:e.contrastIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[t]),k=n.useCallback(async()=>{if(!t)return null;try{const e=await U.testFormAccessibility();return X("form_accessibility_test",{totalForms:e.totalForms,formIssues:e.formIssues?.length||0,passed:e.passed,timestamp:Date.now()}),e}catch(e){return null}},[t]),C=n.useCallback(()=>{if(!l)return null;try{const e=U.generateReport();return X("accessibility_report_generated",{score:e.summary.score,violations:e.summary.violations,totalChecks:e.summary.totalChecks,timestamp:Date.now()}),e}catch(e){return null}},[l]);return n.useEffect(()=>{if(!t||!a)return;const e=()=>{v()};return e(),s&&(b.current=setInterval(e,s)),()=>{b.current&&clearInterval(b.current)}},[t,a,s,v]),n.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]),{results:l,violations:m,score:h,isLoading:d,lastTestTime:f,runTests:v,testFinancialComponent:w,testKeyboardNavigation:j,testColorContrast:N,testFormAccessibility:k,generateReport:C,elementRef:x}}({componentType:e,autoTest:!0,testInterval:3e4,onViolations:e=>{}}),a=n.useCallback(async()=>{const e={};try{return e.keyboardNav=await t.testKeyboardNavigation(),e.colorContrast=await t.testColorContrast(),e.formAccessibility=await t.testFormAccessibility(),e.report=t.generateReport(),e}catch(a){return null}},[t,e]);return{...t,testFinancialFeatures:a}}setInterval(Y,6e4),window.addEventListener("beforeunload",()=>{Y()});const ae=({isVisible:t=!1,onClose:a})=>{const[s,r]=n.useState(null),[o,i]=n.useState(3e4),[l,c]=n.useState(!1),[d,u]=n.useState(75),{alerts:m,startMonitoring:p,stopMonitoring:h,clearAlerts:g}=function(e={}){const{threshold:t=80,alertOnViolations:a=!0,monitorInterval:s=6e4}=e,[r,o]=n.useState(!1),[i,l]=n.useState([]),c=n.useRef(null),d=n.useCallback(()=>{if(r)return;o(!0);const e=async()=>{try{const e=await U.runTests(document),s=U.calculateAccessibilityScore();if(s<t){const a={id:Date.now(),type:"low_score",message:`Accessibility score (${s}) is below threshold (${t})`,score:s,violations:e.violations?.length||0,timestamp:Date.now()};l(e=>[...e,a])}const n=e.violations?.filter(e=>"critical"===e.impact)||[];if(n.length>0&&a){const e={id:Date.now(),type:"critical_violations",message:`${n.length} critical accessibility violations found`,violations:n,timestamp:Date.now()};l(t=>[...t,e])}X("accessibility_monitoring",{score:s,violations:e.violations?.length||0,criticalViolations:n.length,timestamp:Date.now()})}catch(e){}};e(),c.current=setInterval(e,s)},[r,t,a,s]),u=n.useCallback(()=>{o(!1),c.current&&(clearInterval(c.current),c.current=null)},[]),m=n.useCallback(()=>{l([])},[]);return n.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]),{isMonitoring:r,alerts:i,startMonitoring:d,stopMonitoring:u,clearAlerts:m}}({threshold:d,monitorInterval:o}),f=n.useCallback(()=>{try{const e=function(){const e=JSON.parse(localStorage.getItem("accessibility-history")||"[]"),t=JSON.parse(localStorage.getItem("analytics-queue")||"[]"),a=e.slice(-10),s=a.reduce((e,t)=>e+t.score,0)/a.length||0,n=a.reduce((e,t)=>e+t.violations,0)/a.length||0,r=t.filter(e=>"performance-metric"===e.type).slice(-20).map(e=>e.data),o=t.filter(e=>"web-vital"===e.type).slice(-10).map(e=>e.data);return{webVitals:V,budgetViolations:K(),accessibility:{currentScore:a[a.length-1]?.score||0,averageScore:Math.round(s),averageViolations:Math.round(n),history:a,trends:{scoreImproving:a.length>=2&&a[a.length-1].score>a[a.length-2].score}},performance:{recentMetrics:r,webVitalHistory:o},timestamp:Date.now()}}();r(e)}catch(e){}},[]),y=n.useCallback(()=>{l?(h(),c(!1)):(p(),c(!0))},[l,p,h]);n.useEffect(()=>{if(!t)return;z(),f();const e=setInterval(f,o);return()=>{clearInterval(e)}},[t,f,o]);const x=(e,t="ms")=>null==e?"N/A":"number"==typeof e?`${Math.round(e)}${t}`:e;if(!t||!s)return null;const{webVitals:b,budgetViolations:v,accessibility:w,performance:j}=s;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Performance Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time monitoring for FinanceAnalyst Pro"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 rounded-md text-sm font-medium "+(l?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:l?"Stop Monitoring":"Start Monitoring"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-200",children:"Refresh"}),e.jsxs("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Core Web Vitals"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(b).map(([t,a])=>{const s=((e,t)=>{const a={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}}[e];return a&&null!==t?t<=a.good?"good":t<=a.poor?"needs-improvement":"poor":"unknown"})(t,a),n=(e=>{switch(e){case"good":return"text-green-600 bg-green-100";case"needs-improvement":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(s);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n}`,children:s})]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:x(a,"CLS"===t?"":"ms")})})]},t)})})]}),v.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Budget Violations"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("div",{className:"space-y-2",children:v.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-red-800",children:[t.metric,": ",x(t.value)]}),e.jsxs("span",{className:"text-sm text-red-600",children:["Over budget by ",x(t.overBy)]})]},a))})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accessibility"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Score"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.currentScore}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"/100"}),w.trends.scoreImproving&&e.jsx("span",{className:"ml-2 text-green-600",children:e.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Violations"}),e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageViolations})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Score"}),e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageScore})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Active Alerts"}),e.jsx("button",{onClick:g,className:"text-xs text-yellow-600 hover:text-yellow-800",children:"Clear All"})]}),e.jsxs("div",{className:"space-y-2",children:[m.slice(0,5).map(t=>e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsxs("span",{className:"font-medium",children:[t.type,":"]})," ",t.message]},t.id)),m.length>5&&e.jsxs("div",{className:"text-xs text-yellow-600",children:["And ",m.length-5," more alerts..."]})]})]})]}),j.recentMetrics.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance Events"}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:e.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Component"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.recentMetrics.slice(0,10).map((t,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.component||t.componentType||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:void 0!==t.violations?`${t.violations} violations`:void 0!==t.score?`Score: ${t.score}`:void 0!==t.duration?`${Math.round(t.duration)}ms`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.timestamp).toLocaleTimeString()})]},a))})]})})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monitoring Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refresh Interval (seconds)"}),e.jsxs("select",{value:o/1e3,onChange:e=>i(1e3*parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:10,children:"10 seconds"}),e.jsx("option",{value:30,children:"30 seconds"}),e.jsx("option",{value:60,children:"1 minute"}),e.jsx("option",{value:300,children:"5 minutes"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accessibility Alert Threshold"}),e.jsxs("select",{value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:60,children:"60 (Strict)"}),e.jsx("option",{value:75,children:"75 (Moderate)"}),e.jsx("option",{value:85,children:"85 (Lenient)"}),e.jsx("option",{value:95,children:"95 (Very Lenient)"})]})]})]})]})]})]})})},se=({children:t})=>e.jsx(r,{children:t});const ne=new class{constructor(){this.baseURL="https://api.financeanalyst.pro",this.client=R.create({baseURL:this.baseURL,timeout:15e3,headers:{"Content-Type":"application/json"}}),this.client.interceptors.response.use(e=>e,e=>Promise.reject(e))}async getQuote(e){return(await this.client.get(`/market-data/quote/${e.toUpperCase()}`)).data}async getHistoricalData(e,t="1mo",a="1d"){return(await this.client.get(`/market-data/historical/${e.toUpperCase()}`,{params:{range:t,interval:a}})).data}async getIntradayData(e,t="5min"){return(await this.client.get(`/market-data/intraday/${e.toUpperCase()}`,{params:{interval:t}})).data}async getBatchQuotes(e){return(await this.client.post("/market-data/batch",{symbols:e.map(e=>e.toUpperCase())})).data}async getIncomeStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/income/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getBalanceSheet(e,t="annual",a=5){return(await this.client.get(`/financial-statements/balance/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCashFlowStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/cash-flow/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getFinancialRatios(e,t="annual",a=5){return(await this.client.get(`/financial-statements/ratios/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCompanyProfile(e){return(await this.client.get(`/company-data/profile/${e.toUpperCase()}`)).data}async getPeerCompanies(e,t=10){return(await this.client.get(`/company-data/peers/${e.toUpperCase()}`,{params:{limit:t}})).data}async getDCFValuation(e){return(await this.client.get(`/company-data/dcf/${e.toUpperCase()}`)).data}async getEarnings(e,t=8){return(await this.client.get(`/company-data/earnings/${e.toUpperCase()}`,{params:{limit:t}})).data}async getFREDData(e,t=100,a=null,s=null){const n={limit:t};a&&(n.start_date=a),s&&(n.end_date=s);return(await this.client.get(`/economic-data/fred/${e.toUpperCase()}`,{params:n})).data}async getEconomicIndicators(){return(await this.client.get("/economic-data/indicators")).data}async getTreasuryRates(){return(await this.client.get("/economic-data/treasury-rates")).data}async getHealthStatus(){return(await this.client.get("/health")).data}async getServiceHealth(){return(await this.client.get("/health/services")).data}async getCacheStats(){return(await this.client.get("/health/cache")).data}async fetchMarketData(e,t="1y"){try{const a=await this.getHistoricalData(e,t);return{symbol:a.symbol,range:a.range,data:a.data,meta:a.meta,timestamps:a.data.map(e=>e.timestamp),prices:{close:a.data.map(e=>e.close),high:a.data.map(e=>e.high),low:a.data.map(e=>e.low),open:a.data.map(e=>e.open)},volume:a.data.map(e=>e.volume),source:a.source}}catch(a){throw a}}async fetchFinancialStatements(e,t="income-statement",a="annual",s=5){try{let n;switch(t){case"income-statement":n=await this.getIncomeStatement(e,a,s);break;case"balance-sheet-statement":n=await this.getBalanceSheet(e,a,s);break;case"cash-flow-statement":n=await this.getCashFlowStatement(e,a,s);break;default:throw new Error(`Unsupported statement type: ${t}`)}return n.data}catch(n){throw n}}async fetchPeerComparables(e){try{return(await this.getPeerCompanies(e)).peers}catch(t){throw t}}},re=({isOpen:t=!1,onToggle:a,currentContext:s={},portfolioData:r=null,marketData:b=null})=>{const[v,w]=n.useState([{id:"1",type:"assistant",content:"Hi! I'm your AI Financial Assistant. I can help you with portfolio analysis, market insights, risk assessment, and financial planning. What would you like to explore today?",timestamp:new Date,suggestions:["Analyze my portfolio performance","What are the current market trends?","Calculate portfolio risk metrics","Suggest portfolio rebalancing"]}]),[j,N]=n.useState(""),[k,C]=n.useState(!1),[S,A]=n.useState(!1),E=n.useRef(null),I=n.useRef(null);n.useEffect(()=>{E.current?.scrollIntoView({behavior:"smooth"})},[v]);const D=async(e=j)=>{if(!e.trim())return;const t={id:Date.now().toString(),type:"user",content:e,timestamp:new Date};w(e=>[...e,t]),N(""),C(!0);try{const t=await ne.post("/ai-assistant/chat",{message:e,context:{...s,portfolioData:r,marketData:b,previousMessages:v.slice(-5)}}),a={id:(Date.now()+1).toString(),type:"assistant",content:t.data.response,timestamp:new Date,suggestions:t.data.suggestions||[],charts:t.data.charts||[],actions:t.data.actions||[]};w(e=>[...e,a])}catch(a){const e={id:(Date.now()+1).toString(),type:"assistant",content:"I'm having trouble processing your request right now. This could be due to high demand or a temporary service issue. Please try again in a moment, or let me help you with basic portfolio analysis using the available data.",timestamp:new Date,suggestions:["Show portfolio overview","Calculate basic metrics","View market data","Help with analysis"]};w(t=>[...t,e])}finally{C(!1)}},T=[{icon:m,label:"Portfolio Analysis",action:"Analyze my current portfolio allocation and performance"},{icon:p,label:"Market Insights",action:"What are the current market trends and opportunities?"},{icon:h,label:"Risk Assessment",action:"Assess the risk profile of my portfolio"},{icon:g,label:"Financial Planning",action:"Help me with financial planning and projections"},{icon:f,label:"Goal Planning",action:"Help me set and track financial goals"},{icon:y,label:"Performance Review",action:"Review my portfolio performance over time"}];return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(L.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,height:S?"auto":"80vh"},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:e.jsx(o,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"AI Financial Assistant"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Powered by advanced financial AI"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>A(!S),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:S?e.jsx(i,{className:"w-5 h-5"}):e.jsx(l,{className:"w-5 h-5"})}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:e.jsx(c,{className:"w-5 h-5"})})]})]}),!S&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsx(P,{children:v.map(t=>e.jsx(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex "+("user"===t.type?"justify-end":"justify-start"),children:e.jsxs("div",{className:`max-w-3xl flex ${"user"===t.type?"flex-row-reverse":"flex-row"} items-start space-x-3`,children:[e.jsx("div",{className:"p-2 rounded-lg "+("user"===t.type?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"),children:"user"===t.type?e.jsx(d,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})}),e.jsxs("div",{className:"px-4 py-3 rounded-2xl "+("user"===t.type?"bg-blue-600 text-white ml-3":"bg-gray-100 text-gray-800 mr-3"),children:[e.jsx("p",{className:"whitespace-pre-wrap",children:t.content}),t.suggestions&&t.suggestions.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium opacity-75",children:"Suggestions:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.suggestions.map((t,a)=>e.jsx("button",{onClick:()=>(e=>{D(e)})(t),className:"text-xs px-3 py-1 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all",children:t},a))})]}),t.charts&&t.charts.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-white bg-opacity-10 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"📊 Charts & Analysis"}),e.jsx("div",{className:"text-sm opacity-75",children:"Interactive charts would be rendered here based on the analysis"})]}),e.jsx("div",{className:"text-xs opacity-50 mt-2",children:t.timestamp.toLocaleTimeString()})]})]})},t.id))}),k&&e.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:e.jsx(u,{className:"w-5 h-5"})}),e.jsx("div",{className:"px-4 py-3 rounded-2xl bg-gray-100",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),e.jsx("div",{ref:E})]}),1===v.length&&e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:T.map((t,a)=>e.jsxs("button",{onClick:()=>D(t.action),className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 text-left",children:[e.jsx(t.icon,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.label})]},a))})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx("textarea",{ref:I,value:j,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Ask me anything about your portfolio, market analysis, or financial planning...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"48px",maxHeight:"120px"}})}),e.jsxs("button",{onClick:()=>D(),disabled:!j.trim()||k,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{children:"Send"})]})]})})]}),S&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"AI Assistant is minimized"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})})]})}):null};class oe{constructor(){this.context={},this.commandHistory=[],this.aliases={p:"portfolio",md:"market-data",calc:"calculate",nav:"navigate",help:"help",clear:"clear",ls:"list",ll:"list --detailed",cd:"navigate"},this.commands=this.initializeCommands()}updateContext(e){this.context={...this.context,...e}}initializeCommands(){return{help:{description:"Show available commands and usage",usage:"help [command]",category:"system",handler:this.handleHelp.bind(this)},portfolio:{description:"Portfolio management operations",usage:"portfolio [show|analyze|rebalance|risk|holdings]",category:"portfolio",handler:this.handlePortfolio.bind(this)},"market-data":{description:"Fetch market data and quotes",usage:"market-data [symbol] [--type=quote|chart|news]",category:"market",handler:this.handleMarketData.bind(this)},quote:{description:"Get stock quote",usage:"quote <symbol>",category:"market",handler:this.handleQuote.bind(this)},calculate:{description:"Financial calculations",usage:"calculate [dcf|wacc|beta|sharpe] [parameters]",category:"calculations",handler:this.handleCalculate.bind(this)},dcf:{description:"DCF valuation calculation",usage:"dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]",category:"calculations",handler:this.handleDCF.bind(this)},navigate:{description:"Navigate to different pages/sections",usage:"navigate <page> [workspace|market-data|portfolio|analysis|private-analysis]",category:"navigation",handler:this.handleNavigate.bind(this)},list:{description:"List portfolio holdings, watchlist, or other data",usage:"list [holdings|watchlist|portfolios] [--detailed]",category:"data",handler:this.handleList.bind(this)},search:{description:"Search stocks, funds, or financial instruments",usage:"search <query> [--type=stocks|etf|mutual-funds]",category:"data",handler:this.handleSearch.bind(this)},analyze:{description:"Perform financial analysis",usage:"analyze <symbol|portfolio> [--type=fundamental|technical|risk]",category:"analysis",handler:this.handleAnalyze.bind(this)},risk:{description:"Risk analysis and metrics",usage:"risk [portfolio|symbol] [--metric=var|sharpe|beta|correlation]",category:"analysis",handler:this.handleRisk.bind(this)},export:{description:"Export data to various formats",usage:"export <data-type> [--format=csv|json|xlsx] [--output=filename]",category:"utility",handler:this.handleExport.bind(this)},import:{description:"Import portfolio or transaction data",usage:"import <file-path> [--type=portfolio|transactions]",category:"utility",handler:this.handleImport.bind(this)},status:{description:"Show system and data connection status",usage:"status [--detailed]",category:"system",handler:this.handleStatus.bind(this)},clear:{description:"Clear the terminal output",usage:"clear",category:"system",handler:this.handleClear.bind(this)},version:{description:"Show application version and build info",usage:"version",category:"system",handler:this.handleVersion.bind(this)}}}async processCommand(e){const t=this.parseCommand(e),a=this.resolveAlias(t.command),s=this.commands[a];if(!s)return{success:!1,error:`Command '${a}' not found. Type 'help' for available commands.`};try{const a=await s.handler(t.args,t.flags);return this.commandHistory.push({command:e,timestamp:new Date,result:a}),a}catch(n){return{success:!1,error:`Error executing '${a}': ${n.message}`}}}parseCommand(e){const t=e.trim().split(/\s+/),a=t[0],s=t.slice(1),n=[],r={};for(let o=0;o<s.length;o++){const e=s[o];if(e.startsWith("--")){const[t,a]=e.substring(2).split("=");r[t]=a||!0}else e.startsWith("-")?r[e.substring(1)]=!0:n.push(e)}return{command:a,args:n,flags:r}}resolveAlias(e){return this.aliases[e]||e}getSuggestions(e){const t=e.trim().split(/\s+/),a=t[0].toLowerCase();if(1===t.length)return Object.keys(this.commands).filter(e=>e.startsWith(a)).concat(Object.keys(this.aliases).filter(e=>e.startsWith(a))).sort();const s=this.resolveAlias(t[0]);return this.getCommandArgumentSuggestions(s,t.slice(1))}getCommandArgumentSuggestions(e,t){const a=[];switch(e){case"navigate":a.push("workspace","market-data","portfolio","analysis","private-analysis","valuation-workbench","model-lab");break;case"portfolio":a.push("show","analyze","rebalance","risk","holdings","performance");break;case"calculate":a.push("dcf","wacc","beta","sharpe","sortino","var");break;case"list":a.push("holdings","watchlist","portfolios","transactions");break;case"analyze":a.push("--type=fundamental","--type=technical","--type=risk");break;case"export":a.push("--format=csv","--format=json","--format=xlsx")}return a}async handleHelp(e,t){if(e.length>0){const t=this.resolveAlias(e[0]),a=this.commands[t];return a?{success:!0,output:`${t}: ${a.description}\nUsage: ${a.usage}`,type:"info"}:{success:!1,error:`Command '${t}' not found.`}}const a={};Object.entries(this.commands).forEach(([e,t])=>{a[t.category]||(a[t.category]=[]),a[t.category].push(`${e.padEnd(15)} ${t.description}`)});let s="FINANCEANALYST PRO CLI COMMANDS\n";return s+="═══════════════════════════════════════════════════════════════\n\n",Object.entries(a).forEach(([e,t])=>{s+=`${e.toUpperCase()}:\n`,s+=t.join("\n")+"\n\n"}),s+='Use "help <command>" for detailed usage information.\n',s+="Use Tab for autocompletion and ↑↓ for command history.",{success:!0,output:s,type:"info"}}async handlePortfolio(e,t){const a=e[0]||"show";switch(a){case"show":return this.context.portfolioData?{success:!0,data:this.context.portfolioData,format:"portfolio"}:{success:!1,error:"No portfolio data available. Please navigate to Portfolio Management page first."};case"analyze":try{await ne.post("/portfolio/analyze",{portfolio:this.context.portfolioData});return{success:!0,output:"Portfolio analysis completed. Check the Portfolio Management page for detailed results.",type:"success"}}catch(s){return{success:!1,error:"Failed to analyze portfolio. Please try again."}}case"risk":return{success:!0,output:"Risk metrics calculation initiated. Results will be displayed in the Portfolio Analytics section.",type:"info"};default:return{success:!1,error:`Unknown portfolio action: ${a}. Available: show, analyze, rebalance, risk, holdings`}}}async handleMarketData(e,t){const a=e[0];if(t.type,!a)return{success:!1,error:"Symbol required. Usage: market-data <symbol> [--type=quote|chart|news]"};try{return{success:!0,data:(await ne.get(`/market-data/quote/${a.toUpperCase()}`)).data,format:"market"}}catch(s){return{success:!1,error:`Failed to fetch market data for ${a.toUpperCase()}: ${s.message}`}}}async handleQuote(e,t){return this.handleMarketData(e,{type:"quote"})}async handleCalculate(e,t){const a=e[0];return a?{success:!0,output:`${a.toUpperCase()} calculation initiated. Results will be displayed in the Analysis section.`,type:"info"}:{success:!1,error:"Calculation type required. Available: dcf, wacc, beta, sharpe, sortino, var"}}async handleDCF(e,t){const a=e[0],s=t.growth||5,n=t.discount||10,r=t.terminal||2;return a?{success:!0,output:`DCF calculation for ${a.toUpperCase()} initiated with growth=${s}%, discount=${n}%, terminal=${r}%`,navigation:"/valuation-workbench",type:"success"}:{success:!1,error:"Symbol required for DCF calculation. Usage: dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]"}}async handleNavigate(e,t){const a=e[0],s={workspace:"/financial-model-workspace","market-data":"/real-time-market-data-center",portfolio:"/portfolio-management",analysis:"/scenario-analysis-sensitivity-tools","private-analysis":"/private-analysis","valuation-workbench":"/valuation-workbench","model-lab":"/model-lab"};return a&&s[a]?{success:!0,output:`Navigating to ${a}...`,navigation:s[a],type:"success"}:{success:!1,error:`Page not found. Available: ${Object.keys(s).join(", ")}`}}async handleList(e,t){const a=e[0]||"holdings";switch(t.detailed||t.d,a){case"holdings":if(this.context.portfolioData?.holdings){return{success:!0,data:this.context.portfolioData.holdings.map(e=>({Symbol:e.symbol,Shares:e.shares,Value:e.value,Weight:`${(100*e.weight).toFixed(1)}%`})),format:"table"}}return{success:!1,error:"No portfolio holdings available"};case"portfolios":return{success:!0,output:"Available portfolios:\n• Main Portfolio (Active)\n• Demo Portfolio\n• Conservative Portfolio",type:"info"};default:return{success:!1,error:`Unknown list type: ${a}. Available: holdings, watchlist, portfolios`}}}async handleSearch(e,t){const a=e.join(" ");if(!a)return{success:!1,error:"Search query required. Usage: search <query> [--type=stocks|etf|mutual-funds]"};try{return{success:!0,data:(await ne.get(`/market-data/search/${encodeURIComponent(a)}`)).data,format:"table"}}catch(s){return{success:!1,error:`Search failed: ${s.message}`}}}async handleAnalyze(e,t){const a=e[0],s=t.type||"fundamental";return a?{success:!0,output:`${s.charAt(0).toUpperCase()+s.slice(1)} analysis for ${a.toUpperCase()} initiated.`,navigation:"/scenario-analysis-sensitivity-tools",type:"success"}:{success:!1,error:"Analysis target required. Usage: analyze <symbol|portfolio> [--type=fundamental|technical|risk]"}}async handleRisk(e,t){const a=e[0]||"portfolio";return{success:!0,output:`Risk analysis (${(t.metric||"var").toUpperCase()}) for ${a} initiated. Results will be displayed in Portfolio Analytics.`,type:"info"}}async handleExport(e,t){const a=e[0],s=t.format||"csv";return{success:!0,output:`Export initiated: ${a} → ${t.output||`export_${(new Date).toISOString().split("T")[0]}`}.${s}`,type:"success"}}async handleImport(e,t){const a=e[0],s=t.type||"portfolio";return a?{success:!0,output:`Import initiated: ${a} (${s})`,type:"success"}:{success:!1,error:"File path required. Usage: import <file-path> [--type=portfolio|transactions]"}}async handleStatus(e,t){const a=t.detailed;let s="🟢 SYSTEM STATUS\n";return s+="═══════════════════════════════════════\n",s+="Backend API:       🟢 Connected\n",s+="Market Data:       🟢 Live\n",s+="Portfolio Data:    "+(this.context.portfolioData?"🟢 Loaded":"🟡 Not loaded")+"\n",s+="AI Assistant:      🟢 Online\n",a&&(s+="\nDETAILED STATUS:\n",s+=`Commands in history: ${this.commandHistory.length}\n`,s+=`Current page: ${this.context.currentContext?.path||"Unknown"}\n`,s+=`Session start: ${(new Date).toLocaleString()}\n`),{success:!0,output:s,type:"info"}}async handleClear(e,t){return{success:!0,output:"",type:"clear"}}async handleVersion(e,t){return{success:!0,output:"FinanceAnalyst Pro v1.0.0\nBuild: 2025.08.18\nNode.js CLI Interface\nSecure Backend API Integration",type:"info"}}}const ie=(e,t="USD",a=!1)=>{if(null==e||isNaN(e))return"N/A";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:2}).format(e)},le=(e,t=1)=>null==e||isNaN(e)?"N/A":`${(100*e).toFixed(t)}%`,ce=(e,t=2,a=!1)=>{if(null==e||isNaN(e))return"N/A";return new Intl.NumberFormat("en-US",{notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:t}).format(e)},de=e=>{const{currentRevenue:t,revenueGrowthRate:a,fcfMargin:s,wacc:n,terminalGrowthRate:r,sharesOutstanding:o,totalDebt:i,cash:l,projectionYears:c=5}=e,d=((e,t,a=5)=>{const s=[];let n=e;for(let r=0;r<a;r++)n*=1+(Array.isArray(t)?t[r]||t[t.length-1]:t),s.push(n);return s})(t,a,c),u=d.map(e=>e*s),m=((e,t,a)=>e*(1+t)/(a-t))(u[u.length-1],r,n),p=(h=n,u.reduce((e,t,a)=>e+t/Math.pow(1+h,a+1),0));var h;const g=m/Math.pow(1+n,c),f=p+g,y=f-i+l;return{enterpriseValue:f,equityValue:y,pricePerShare:y/o,pvOfCashFlows:p,pvOfTerminalValue:g,terminalValue:m,projectedRevenues:d,projectedFCFs:u,wacc:n,terminalGrowthRate:r}},ue=e=>{const{purchasePrice:t,ebitda:a,debtMultiple:s=5,exitMultiple:n,exitYear:r=5,managementFeeRate:o=.02,carriedInterestRate:i=.2}=e,l=a*s,c=t-l,d=a*Math.pow(1.05,r),u=d*n,m=u-.5*l,p=m/c,h=Math.pow(p,1/r)-1,g=p,f=c*o*r,y=Math.max(0,(m-c)*i);return{equityInvestment:c,totalDebt:l,exitEquityValue:m,totalReturn:p,irr:h,moic:g,exitEbitda:d,exitEnterpriseValue:u,managementFees:f,carriedInterest:y,netReturn:m-f-y}},me=(e,t)=>{const a={};return["marketCap","peRatio","evToEbitda","priceToBook","debtToEquity"].forEach(e=>{const s=t.map(t=>t[e]);a[e]=(e=>{const t=e.filter(e=>null!=e&&!isNaN(e));return 0===t.length?{median:null,mean:null,min:null,max:null}:(t.sort((e,t)=>e-t),{median:t.length%2==0?(t[t.length/2-1]+t[t.length/2])/2:t[Math.floor(t.length/2)],mean:t.reduce((e,t)=>e+t,0)/t.length,min:Math.min(...t),max:Math.max(...t),count:t.length})})(s)}),{company:e,peerStatistics:a,relativeValuation:{marketCapPercentile:pe(e.marketCap,t.map(e=>e.marketCap)),peRatioRelative:e.peRatio/a.peRatio.median,evEbitdaRelative:e.evToEbitda/a.evToEbitda.median,priceToBookRelative:e.priceToBook/a.priceToBook.median}}},pe=(e,t)=>{const a=t.filter(e=>null!=e&&!isNaN(e));if(0===a.length||null==e||isNaN(e))return null;a.sort((e,t)=>e-t);return a.filter(t=>t<e).length/a.length},he=({currentContext:t={},portfolioData:a=null,marketData:s=null,onNavigate:r})=>{const[o,d]=n.useState(!1),[u,m]=n.useState(!1),[p,h]=n.useState(""),[g,f]=n.useState([{id:1,type:"system",content:'FinanceAnalyst Pro Terminal v1.0.0 - Type "help" for available commands',timestamp:new Date},{id:2,type:"info",content:"Connected to secure backend API • Market data live • Ready for commands",timestamp:new Date}]),[y,x]=n.useState([]),[k,C]=n.useState(-1),[S,A]=n.useState([]),[E,I]=n.useState(!1),[D,T]=n.useState(!1),R=n.useRef(null),$=n.useRef(null),F=n.useRef(new oe);n.useEffect(()=>{$.current&&($.current.scrollTop=$.current.scrollHeight)},[g]),n.useEffect(()=>{o&&!u&&R.current&&R.current.focus()},[o,u]),n.useEffect(()=>{F.current.updateContext({currentContext:t,portfolioData:a,marketData:s,onNavigate:r})},[t,a,s,r]);const _=n.useCallback((e,t="output")=>{const a={id:Date.now(),type:t,content:e,timestamp:new Date};f(e=>[...e,a])},[]),M=(e,t)=>{switch(t){case"table":return O(e);case"json":return JSON.stringify(e,null,2);case"portfolio":return q(e);case"market":return U(e);default:return e}},O=e=>{if(!Array.isArray(e)||0===e.length)return"No data";const t=Object.keys(e[0]),a=t.map(t=>Math.max(t.length,...e.map(e=>String(e[t]||"").length)));return[t.map((e,t)=>e.padEnd(a[t])).join(" | "),a.map(e=>"-".repeat(e)).join("-|-"),...e.map(e=>t.map((t,s)=>String(e[t]||"").padEnd(a[s])).join(" | "))].join("\n")},q=e=>{if(!e)return"No portfolio data available";let t="📊 PORTFOLIO OVERVIEW\n";return t+="═══════════════════════════════════════\n",t+=`Total Value: ${ie(e.totalValue||0)}\n`,t+=`Total Return: ${le(e.totalReturn||0)}\n`,t+=`Holdings: ${e.holdings?.length||0}\n\n`,e.holdings&&e.holdings.length>0&&(t+="HOLDINGS:\n",e.holdings.forEach(e=>{t+=`${e.symbol.padEnd(6)} ${ie(e.value||0).padStart(12)} ${le(e.weight||0).padStart(8)}\n`})),t},U=e=>{if(!e)return"No market data available";let t="📈 MARKET DATA\n";return t+="═══════════════════════════════════════\n",Object.entries(e).forEach(([e,a])=>{t+=`${e.toUpperCase().padEnd(15)} ${String(a).padStart(12)}\n`}),t},V=e=>{switch(e){case"command":return"text-blue-400";case"error":return"text-red-400";case"success":return"text-green-400";case"warning":return"text-yellow-400";case"info":return"text-cyan-400";case"system":return"text-gray-400";case"formatted":return"text-purple-400";default:return"text-gray-300"}};return e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:[e.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-2 flex items-center justify-between cursor-pointer select-none",onClick:()=>d(!o),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(b,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-sm font-mono text-gray-300",children:"FinanceAnalyst Pro Terminal"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!u&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),f([])},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Clear output",children:e.jsx(c,{className:"w-4 h-4"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),(()=>{const e=g.map(e=>`[${e.timestamp.toLocaleTimeString()}] ${e.content}`).join("\n"),t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`financeanalyst-cli-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)})()},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Export output",children:e.jsx(v,{className:"w-4 h-4"})})]}),e.jsx("button",{onClick:e=>{e.stopPropagation(),m(!u)},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",children:u?e.jsx(i,{className:"w-4 h-4"}):e.jsx(l,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:o?"Collapse":"Expand",children:o?e.jsx(w,{className:"w-4 h-4"}):e.jsx(j,{className:"w-4 h-4"})})]})]}),e.jsx(P,{children:o&&!u&&e.jsx(L.div,{initial:{height:0,opacity:0},animate:{height:400,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"bg-gray-900 border-t border-gray-700 overflow-hidden",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{ref:$,className:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1",style:{maxHeight:"320px"},children:[g.map(t=>e.jsx("div",{className:`${V(t.type)} whitespace-pre-wrap`,children:"formatted"===t.type?e.jsx("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 overflow-x-auto",children:e.jsx("pre",{className:"text-xs text-gray-300",children:t.content})}):t.content},t.id)),D&&e.jsxs("div",{className:"text-yellow-400 flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin w-3 h-3 border border-yellow-400 border-t-transparent rounded-full"}),e.jsx("span",{children:"Processing..."})]})]}),E&&S.length>0&&e.jsxs("div",{className:"border-t border-gray-700 bg-gray-800 p-2",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Suggestions (Tab to complete):"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,6).map((t,a)=>e.jsx("button",{onClick:()=>{h(t),I(!1),R.current?.focus()},className:"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors",children:t},a))})]}),e.jsxs("div",{className:"border-t border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-400 font-mono",children:"$"}),e.jsx("input",{ref:R,type:"text",value:p,onChange:e=>{const t=e.target.value;if(h(t),t.trim()){const e=F.current.getSuggestions(t);A(e),I(e.length>0)}else I(!1)},onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),(async e=>{if(e.trim()){x(t=>[...t,e]),C(-1),_(`$ ${e}`,"command"),T(!0);try{const t=await F.current.processCommand(e);t.success?(t.output&&_(t.output,t.type||"output"),t.data&&t.format&&_(M(t.data,t.format),"formatted"),t.navigation&&r?.(t.navigation)):_(t.error||"Command failed","error")}catch(t){_(`Error: ${t.message}`,"error")}finally{T(!1)}}})(p),h(""),I(!1);else if("ArrowUp"===e.key){if(e.preventDefault(),k<y.length-1){const e=k+1;C(e),h(y[y.length-1-e])}}else if("ArrowDown"===e.key)if(e.preventDefault(),k>0){const e=k-1;C(e),h(y[y.length-1-e])}else 0===k&&(C(-1),h(""));else"Tab"===e.key?(e.preventDefault(),S.length>0&&(h(S[0]),I(!1))):"Escape"===e.key&&I(!1)},placeholder:"Enter financial command... (type 'help' for commands)",className:"flex-1 bg-transparent text-gray-300 font-mono outline-none placeholder-gray-500",disabled:D}),D&&e.jsx("div",{className:"text-yellow-400",children:e.jsx(N,{className:"w-4 h-4 animate-pulse"})})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[e.jsx("span",{children:'Use ↑↓ for history • Tab for autocomplete • Type "help" for commands'}),e.jsxs("span",{children:[y.length," commands in history"]})]})]})]})})})]})};const ge={},fe=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),n=a?.nonce||a?.getAttribute("nonce");s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in ge)return;ge[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},ye=()=>{const{pathname:e}=k();return n.useEffect(()=>{window.scrollTo(0,0)},[e]),null};function xe(...e){return $(F(e))}const be=({size:t="default",className:a="",text:s="Loading...",showText:n=!0,variant:r="primary"})=>{const o={primary:"text-primary",secondary:"text-secondary",muted:"text-muted-foreground",white:"text-white"};return e.jsxs("div",{className:xe("flex flex-col items-center justify-center space-y-2",a),children:[e.jsx("div",{className:xe("animate-spin rounded-full border-2 border-current border-t-transparent",{sm:"w-4 h-4",default:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[t],o[r])}),n&&e.jsx("p",{className:xe("font-medium",{sm:"text-xs",default:"text-sm",lg:"text-base",xl:"text-lg"}[t],o[r]),children:s})]})},ve=n.lazy(()=>fe(()=>import("./index-DaRjs9Je.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),we=n.lazy(()=>fe(()=>import("./index-Df24Vyn4.js"),__vite__mapDeps([14,1,2,4,5,6,8,15,16,17,11,12,13]))),je=n.lazy(()=>fe(()=>import("./index-DAi6uVjI.js"),__vite__mapDeps([18,1,2,4,5,6,19,17,20,11,12,13]))),Ne=n.lazy(()=>fe(()=>import("./ValuationTool-JNyJC8ha.js"),__vite__mapDeps([21,1,2,12,20,5,3,4,16,17,19,11,13]))),ke=n.lazy(()=>fe(()=>import("./ValuationToolDocs-k4tZhKtW.js"),__vite__mapDeps([22,1,2,12]))),Ce=n.lazy(()=>fe(()=>import("./valuation-tool-demo-IDwZ9V5G.js"),__vite__mapDeps([23,1,2,12]))),Se=n.lazy(()=>fe(()=>import("./PrivateAnalysis-6lDoFDgK.js"),__vite__mapDeps([24,1,2,8,9,12,20,5,3,4,6,10,11,13]))),Ae=n.lazy(()=>fe(()=>import("./ValuationWorkbench-CCAiUJnC.js"),__vite__mapDeps([25,1,2,26,6,4,5,11,12,13]))),Ee=n.lazy(()=>fe(()=>import("./ModelLab-BzoCkygC.js"),__vite__mapDeps([27,1,2,26,6,4,5,11,12,13]))),Ie=n.lazy(()=>fe(()=>import("./PortfolioManagement-4gonq3lo.js"),__vite__mapDeps([28,1,2,3,7,8,9,20,5,11,12,13]))),De=n.lazy(()=>fe(()=>import("./FinancialInputsDemo-BBfkZXRY.js"),__vite__mapDeps([29,1,2,15,4,5,16,17,19,20,11,12,13]))),Te=n.lazy(()=>fe(()=>import("./NotFound--fBOynJD.js"),__vite__mapDeps([30,1,2,4,5,11,12,13]))),Re=()=>e.jsx(C,{children:e.jsxs(q,{children:[e.jsx(ye,{}),e.jsx(n.Suspense,{fallback:e.jsx(be,{}),children:e.jsxs(S,{children:[e.jsx(A,{path:"/",element:e.jsx(ve,{})}),e.jsx(A,{path:"/financial-model-workspace",element:e.jsx(ve,{})}),e.jsx(A,{path:"/real-time-market-data-center",element:e.jsx(we,{})}),e.jsx(A,{path:"/scenario-analysis-sensitivity-tools",element:e.jsx(je,{})}),e.jsx(A,{path:"/valuation-tool",element:e.jsx(Ne,{})}),e.jsx(A,{path:"/valuation-tool/docs",element:e.jsx(ke,{})}),e.jsx(A,{path:"/valuation-tool/demo",element:e.jsx(Ce,{})}),e.jsx(A,{path:"/valuation-workbench",element:e.jsx(Ae,{})}),e.jsx(A,{path:"/model-lab",element:e.jsx(Ee,{})}),e.jsx(A,{path:"/portfolio-management",element:e.jsx(Ie,{})}),e.jsx(A,{path:"/private-analysis",element:e.jsx(Se,{})}),e.jsx(A,{path:"/financial-inputs-demo",element:e.jsx(De,{})}),e.jsx(A,{path:"*",element:e.jsx(Te,{})})]})})]})});function Le(){const{isVisible:t,hideDashboard:a}=function(){const[e,t]=n.useState(!1),a=n.useCallback(()=>{t(e=>!e)},[]),s=n.useCallback(()=>{t(!0)},[]),r=n.useCallback(()=>{t(!1)},[]);return n.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&"P"===e.key&&(e.preventDefault(),a())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a]),n.useEffect(()=>{},[]),{isVisible:e,toggleDashboard:a,showDashboard:s,hideDashboard:r}}(),[s,r]=n.useState(!1),[o,i]=n.useState({path:window.location.pathname,timestamp:(new Date).toISOString()}),[l,c]=n.useState(null),[d,u]=n.useState(null);n.useEffect(()=>{z()},[]),n.useEffect(()=>{i({path:window.location.pathname,timestamp:(new Date).toISOString()})},[window.location.pathname]),n.useEffect(()=>{const e=e=>{(e.metaKey||e.ctrlKey)&&"k"===e.key&&(e.preventDefault(),r(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);return e.jsx(q,{children:e.jsxs(se,{children:[e.jsx(Re,{}),e.jsx(ae,{isVisible:t,onClose:a}),e.jsx(re,{isOpen:s,onToggle:()=>r(e=>!e),currentContext:o,portfolioData:l,marketData:d}),e.jsx(he,{currentContext:o,portfolioData:l,marketData:d,onNavigate:e=>{window.location.href=e}}),!s&&e.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-20 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 z-40",title:"Open AI Financial Assistant (Cmd+K)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]})})}const Pe=_({name:"user",initialState:{name:"Guest",isAuthenticated:!1},reducers:{login:(e,t)=>{e.name=t.payload.name,e.isAuthenticated=!0},logout:e=>{e.name="Guest",e.isAuthenticated=!1}}}),{login:$e,logout:Fe}=Pe.actions,_e=M({reducer:{user:Pe.reducer}});let Me=null;function Oe(){return Me||(Me=function(){if("undefined"!=typeof window&&window.crypto){const e=new Uint8Array(16);return window.crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,e))}return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}()),Me}function qe(){const e=[];if("undefined"==typeof document)return e;const t=document.querySelectorAll("script:not([src]):not([nonce])");t.length>0&&e.push({type:"inline-script-without-nonce",count:t.length,elements:Array.from(t).slice(0,3)});const a=document.querySelectorAll("style:not([nonce])");a.length>5&&e.push({type:"excessive-inline-styles",count:a.length,recommendation:"Consider consolidating CSS-in-JS styles"});return document.querySelectorAll("script[src]").forEach(t=>{const a=t.getAttribute("src");!a||a.startsWith("https://")||a.startsWith("/")||e.push({type:"insecure-external-script",src:a,element:t})}),e}function Ue(){"undefined"!=typeof document&&document.addEventListener("securitypolicyviolation",e=>{!function(e){fetch("/api/csp-violations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>{})}({blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,originalPolicy:e.originalPolicy,disposition:e.disposition,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href})})}const Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ze(){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/sw.js";Ve?(!function(e){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{const a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Be(e)}).catch(()=>{We("Offline Mode","You're currently offline. Some features may be limited.","warning")})}(e),navigator.serviceWorker.ready.then(()=>{})):Be(e)})}}function Be(e){navigator.serviceWorker.register(e).then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;null!=t&&t.addEventListener("statechange",()=>{"installed"===t.state&&(navigator.serviceWorker.controller?function(){"Notification"in window&&"granted"===Notification.permission&&new Notification("FinanceAnalyst Pro Update Available",{body:"A new version is available. Refresh to update.",icon:"/assets/images/favicon.svg",badge:"/assets/images/favicon.svg",tag:"app-update"});We("Update Available","A new version of FinanceAnalyst Pro is ready. Refresh to update.","info")}():We("App Ready for Offline","FinanceAnalyst Pro is now available offline for core features.","success"))})})}).catch(e=>{})}function We(e,t,a="info"){const s=document.createElement("div");s.className=`\n    fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg\n    ${"success"===a?"bg-green-50 text-green-800 border border-green-200":""}\n    ${"warning"===a?"bg-yellow-50 text-yellow-800 border border-yellow-200":""}\n    ${"info"===a?"bg-blue-50 text-blue-800 border border-blue-200":""}\n    transition-all duration-300 transform translate-x-full\n  `,s.innerHTML=`\n    <div class="flex items-start">\n      <div class="flex-1">\n        <h4 class="font-medium text-sm">${e}</h4>\n        <p class="text-sm mt-1 opacity-90">${t}</p>\n      </div>\n      <button class="ml-3 text-sm opacity-60 hover:opacity-100" onclick="this.parentElement.parentElement.remove()">\n        ✕\n      </button>\n    </div>\n  `,document.body.appendChild(s),requestAnimationFrame(()=>{s.style.transform="translateX(0)"}),setTimeout(()=>{s.parentElement&&(s.style.transform="translateX(100%)",setTimeout(()=>s.remove(),300))},5e3)}let He;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),He=e,function(){const e=document.createElement("div");e.className="\n    fixed bottom-4 left-4 right-4 p-4 bg-blue-600 text-white rounded-lg shadow-lg\n    flex items-center justify-between z-50 max-w-md mx-auto\n  ",e.innerHTML='\n    <div class="flex-1">\n      <h4 class="font-medium text-sm">Install FinanceAnalyst Pro</h4>\n      <p class="text-sm opacity-90 mt-1">Get faster access and offline features</p>\n    </div>\n    <div class="flex items-center space-x-2 ml-3">\n      <button id="install-btn" class="bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50">\n        Install\n      </button>\n      <button id="dismiss-btn" class="text-white opacity-60 hover:opacity-100 text-sm">\n        ✕\n      </button>\n    </div>\n  ',document.body.appendChild(e),e.querySelector("#install-btn").addEventListener("click",async()=>{if(He){He.prompt();const{outcome:e}=await He.userChoice;He=null}e.remove()}),e.querySelector("#dismiss-btn").addEventListener("click",()=>{e.remove(),He=null})}()}),window.addEventListener("appinstalled",()=>{We("App Installed","FinanceAnalyst Pro has been installed successfully!","success"),He=null});const Ke=document.getElementById("root");E.createRoot(Ke).render(e.jsx(I,{store:_e,children:e.jsx(Le,{})}));!function(){const e=Oe();!function(e){if("undefined"==typeof document)return;document.querySelectorAll("script:not([src])").forEach(t=>{t.setAttribute("nonce",e)}),document.querySelectorAll("style").forEach(t=>{t.setAttribute("nonce",e)})}(e),Ue();const t=qe();t.length,setInterval(()=>{qe().length,t.length},3e4)}();(function(){try{const e=new URLSearchParams(window.location.search);return!0===navigator.webdriver||e.has("lhci")||e.has("ci")||e.has("audit")||"0"===e.get("pwa")}catch(e){return!0===navigator.webdriver}})()||(ze(),function(){function e(){const e=navigator.onLine;e?We("Connection Restored","You're back online. Syncing latest data...","success"):We("Connection Lost","You're now offline. Cached content will be used.","warning"),document.body.setAttribute("data-network-status",e?"online":"offline")}window.addEventListener("online",e),window.addEventListener("offline",e),e()}()),z();export{O as I,fe as _,le as a,ie as b,me as c,ue as d,de as e,ce as f,xe as g,ne as s,ee as t,te as u};
//# sourceMappingURL=index-DPdPN0n0.js.map
