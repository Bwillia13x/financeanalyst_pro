import{r as e,j as a,o as s,ai as t,ab as r,a as l,X as i,af as n,aj as c,ak as o,R as d,w as m,al as x,y as h,n as p,D as u}from"./react-core-CeHLCIBw.js";import{ResponsiveContainer as g,ComposedChart as y,CartesianGrid as j,XAxis as b,YAxis as v,Tooltip as f,Line as N,Bar as w}from"./recharts-vendor-DQPXk1vH.js";import{S as k}from"./SEOHead-B2_EtFOU.js";import{s as M}from"./index-DdNfTkp9.js";import{b as L}from"./ui-vendor-B5RWaOCb.js";import"./vendor-D2fsnhsW.js";import"./ai-vendor-CuiosWbE.js";import"./advanced-analytics-y00dU25g.js";import"./utils-vendor-DUg4_aAP.js";import"./react-dom-B6lyId6m.js";import"./d3-vendor-DOBQrAlH.js";import"./data-vendor-vzM7rUwp.js";import"./react-router-D-l5j9EF.js";import"./state-vendor-ClT9_nJX.js";const C=({data:s=[],symbol:t="",height:r=300,showVolume:l=!0,theme:i="light"})=>{const n=e.useMemo(()=>s&&Array.isArray(s)?s.map(e=>{const a=parseFloat(e.open||0),s=parseFloat(e.high||0),t=parseFloat(e.low||0),r=parseFloat(e.close||0);return{timestamp:e.timestamp,date:new Date(e.timestamp).toLocaleDateString(),time:new Date(e.timestamp).toLocaleTimeString(),open:a,high:s,low:t,close:r,volume:parseInt(e.volume||0),bodyLow:Math.min(a,r),bodyHigh:Math.max(a,r),wickLow:t,wickHigh:s,isGreen:r>=a,change:r-a,changePercent:a>0?(r-a)/a*100:0}}):[],[s]),c=({active:e,payload:s,label:r})=>{if(!e||!s||!s.length)return null;const i=s[0].payload;return i?a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:t}),a.jsxs("p",{className:"text-sm text-gray-600",children:[i.date," ",i.time]}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Open:"}),a.jsxs("span",{className:"font-mono text-sm",children:["$",i.open.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"High:"}),a.jsxs("span",{className:"font-mono text-sm text-green-600",children:["$",i.high.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Low:"}),a.jsxs("span",{className:"font-mono text-sm text-red-600",children:["$",i.low.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Close:"}),a.jsxs("span",{className:"font-mono text-sm",children:["$",i.close.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Change:"}),a.jsxs("span",{className:"font-mono text-sm "+(i.isGreen?"text-green-600":"text-red-600"),children:[i.change>=0?"+":"","$",i.change.toFixed(2)," (",i.changePercent.toFixed(2),"%)"]})]}),l&&a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Volume:"}),a.jsx("span",{className:"font-mono text-sm",children:i.volume.toLocaleString()})]})]})]}):null};return n.length?a.jsx("div",{className:"w-full h-full",children:a.jsx(g,{width:"100%",height:"100%",children:a.jsxs(y,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(j,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),a.jsx(b,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),a.jsx(v,{stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>`$${e.toFixed(0)}`}),a.jsx(f,{content:a.jsx(c,{})}),a.jsx(N,{type:"monotone",dataKey:"close",stroke:"#3b82f6",strokeWidth:2,dot:!1,connectNulls:!1}),l&&a.jsx(w,{dataKey:"volume",fill:"#e5e7eb",opacity:.3,yAxisId:"volume"})]})})}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),a.jsx("p",{className:"text-sm text-gray-500",children:"No price data available"})]})})},S=()=>{const[g,y]=e.useState("1D"),[j,b]=e.useState(["AAPL","MSFT","GOOGL","AMZN","TSLA"]),[v,f]=e.useState("grid"),[N,w]=e.useState(!0),[S,D]=e.useState({}),[F,P]=e.useState(null),[$,O]=e.useState({charts:!1,data:!1,export:!1}),[R,T]=e.useState([{id:"price-chart",type:"candlestick",symbol:"AAPL",position:{x:0,y:0,w:6,h:4}},{id:"volume-chart",type:"bar",symbol:"AAPL",position:{x:6,y:0,w:6,h:2}},{id:"correlation-matrix",type:"heatmap",symbols:j,position:{x:6,y:2,w:6,h:2}},{id:"performance-comparison",type:"line",symbols:j.slice(0,3),position:{x:0,y:4,w:12,h:3}}]),Y=[{id:"candlestick",name:"Candlestick",icon:C,description:"OHLC price data"},{id:"line",name:"Line Chart",icon:m,description:"Price trends over time"},{id:"bar",name:"Bar Chart",icon:x,description:"Volume and comparison data"},{id:"area",name:"Area Chart",icon:h,description:"Filled area charts"},{id:"heatmap",name:"Heatmap",icon:c,description:"Correlation matrices"},{id:"scatter",name:"Scatter Plot",icon:p,description:"Risk vs return analysis"}],E=e.useRef(null);e.useEffect(()=>(z(),N&&G(),()=>{E.current&&clearInterval(E.current)}),[j,g]),e.useEffect(()=>{N?G():q()},[N]);const z=async()=>{O(e=>({...e,data:!0}));try{const e=j.map(async e=>{try{const[a,s]=await Promise.all([M.get(`/market-data/quote/${e}`),(()=>{const{range:a,interval:s}=(e=>{switch(e){case"1D":return{range:"1d",interval:"5m"};case"5D":return{range:"5d",interval:"15m"};case"1M":default:return{range:"1mo",interval:"1d"};case"3M":return{range:"3mo",interval:"1d"};case"6M":return{range:"6mo",interval:"1d"};case"1Y":return{range:"1y",interval:"1d"};case"2Y":return{range:"2y",interval:"1d"};case"5Y":case"MAX":return{range:"5y",interval:"1wk"}}})(g);return M.get(`/market-data/historical/${e}?range=${a}&interval=${s}`)})()]);return{symbol:e,quote:a.data,historical:s.data}}catch(a){return{symbol:e,quote:H(e),historical:I(e)}}}),a=await Promise.all(e),s={};a.forEach(e=>{e&&(s[e.symbol]=e)}),D(s);try{const e=await M.get("/portfolio/current");P(e.data)}catch{}}catch(e){}finally{O(e=>({...e,data:!1}))}},G=()=>{q(),E.current=setInterval(async()=>{try{const e=j.map(async e=>{try{return{symbol:e,quote:(await M.get(`/market-data/quote/${e}`)).data}}catch{return{symbol:e,quote:H(e)}}}),a=await Promise.all(e);D(e=>{const s={...e};return a.forEach(({symbol:e,quote:a})=>{s[e]&&(s[e]={...s[e],quote:a})}),s})}catch(e){}},5e3)},q=()=>{E.current&&(clearInterval(E.current),E.current=null)},H=e=>{const a={AAPL:175,MSFT:280,GOOGL:2800,AMZN:3200,TSLA:250}[e]||100,s=10*(Math.random()-.5),t=a+s;return{symbol:e,price:t.toFixed(2),change:s.toFixed(2),changePercent:(s/a*100).toFixed(2),volume:Math.floor(1e7*Math.random()),marketCap:t*Math.floor(1e9*Math.random()),timestamp:(new Date).toISOString()}},I=e=>{const a=[];let s={AAPL:175,MSFT:280,GOOGL:2800,AMZN:3200,TSLA:250}[e]||100;const t={"1D":390,"5D":78,"1M":22,"3M":65,"6M":130,"1Y":252,"2Y":104,"5Y":260,MAX:520}[g]||100;for(let r=0;r<t;r++){s+=5*(Math.random()-.5);const e=Math.floor(1e6*Math.random());a.push({timestamp:new Date(Date.now()-24*(t-r)*60*60*1e3).toISOString(),open:s-2*Math.random(),high:s+3*Math.random(),low:s-3*Math.random(),close:s,volume:e})}return a},U=e=>{T(a=>a.filter(a=>a.id!==e))},V=async(e,a="png")=>{O(e=>({...e,export:!0}));try{R.find(a=>a.id===e),await new Promise(e=>setTimeout(e,1e3));const s=new Blob(["Chart export placeholder"],{type:"text/plain"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`chart-${e}.${a}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch(s){}finally{O(e=>({...e,export:!1}))}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-16",children:[a.jsx(k,{title:"Advanced Charting & Data Visualization - FinanceAnalyst Pro",description:"Professional-grade financial charting with real-time data, customizable dashboards, and advanced visualization tools for comprehensive market analysis."}),a.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-20",children:a.jsxs("div",{className:"px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(s,{className:"w-8 h-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Charting"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Professional financial data visualization"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full "+(N?"bg-green-400 animate-pulse":"bg-gray-400")}),a.jsx("span",{className:"text-xs text-gray-500",children:N?"Live Data":"Static Data"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:()=>w(!N),className:"flex items-center space-x-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors "+(N?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[N?a.jsx(t,{className:"w-4 h-4"}):a.jsx(r,{className:"w-4 h-4"}),a.jsxs("span",{children:[N?"Pause":"Start"," Live"]})]}),a.jsxs("button",{onClick:z,disabled:$.data,className:"flex items-center space-x-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[a.jsx(l,{className:"w-4 h-4 "+($.data?"animate-spin":"")}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Timeframe:"}),a.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{value:"1D",label:"1 Day",interval:"1m"},{value:"5D",label:"5 Days",interval:"5m"},{value:"1M",label:"1 Month",interval:"1h"},{value:"3M",label:"3 Months",interval:"1d"},{value:"6M",label:"6 Months",interval:"1d"},{value:"1Y",label:"1 Year",interval:"1wk"},{value:"2Y",label:"2 Years",interval:"1wk"},{value:"5Y",label:"5 Years",interval:"1mo"},{value:"MAX",label:"Max",interval:"1mo"}].map(e=>a.jsx("button",{onClick:()=>y(e.value),className:"px-3 py-1.5 text-sm font-medium rounded-md transition-colors "+(g===e.value?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e.label},e.value))})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Symbols:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[j.map(e=>a.jsxs("span",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-md text-xs",children:[a.jsx("span",{children:e}),a.jsx("button",{onClick:()=>b(a=>a.filter(a=>a!==e)),className:"hover:bg-blue-200 rounded-full p-0.5",children:a.jsx(i,{className:"w-3 h-3"})})]},e)),a.jsx("button",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-md text-xs hover:bg-gray-200 transition-colors",children:a.jsx(n,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Layout:"}),a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>f("grid"),className:"p-2 rounded-md transition-colors "+("grid"===v?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Grid Layout",children:a.jsx(c,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>f("stack"),className:"p-2 rounded-md transition-colors "+("stack"===v?"bg-white shadow-sm":"hover:bg-gray-200"),title:"Stacked Layout",children:a.jsx(o,{className:"w-4 h-4"})})]})]})]})]})}),a.jsx("div",{className:"p-6",children:"grid"===v?a.jsxs("div",{className:"grid grid-cols-12 gap-4 min-h-screen",children:[R.map(e=>a.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`bg-white rounded-xl shadow-sm border overflow-hidden col-span-${e.position.w} row-span-${e.position.h}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-1 bg-blue-100 rounded",children:d.createElement(Y.find(a=>a.id===e.type)?.icon||s,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:Y.find(a=>a.id===e.type)?.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.symbol||e.symbols?.join(", ")})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>V(e.id,"png"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Export Chart",children:a.jsx(u,{className:"w-4 h-4 text-gray-600"})}),a.jsx("button",{onClick:()=>U(e.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",title:"Remove Chart",children:a.jsx(i,{className:"w-4 h-4 text-gray-600"})})]})]}),a.jsx("div",{className:"p-4 h-64",children:a.jsx(A,{chart:e,marketData:S,timeframe:g,isRealTime:N})})]},e.id)),a.jsx("div",{className:"col-span-6 bg-white border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center min-h-64 hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",children:a.jsxs("div",{className:"text-center",children:[a.jsx(n,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Chart"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Y.slice(0,4).map(e=>a.jsxs("button",{onClick:()=>((e,a=null,s=null)=>{const t={id:`chart-${Date.now()}`,type:e,symbol:a,symbols:s,position:{x:0,y:0,w:6,h:4}};T(e=>[...e,t])})(e.id,j[0]),className:"flex items-center space-x-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors",children:[a.jsx(e.icon,{className:"w-4 h-4"}),a.jsx("span",{children:e.name})]},e.id))})]})})]}):a.jsx("div",{className:"space-y-6",children:R.map(e=>a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-1 bg-blue-100 rounded",children:d.createElement(Y.find(a=>a.id===e.type)?.icon||s,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:Y.find(a=>a.id===e.type)?.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e.symbol||e.symbols?.join(", ")})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>V(e.id,"png"),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(u,{className:"w-4 h-4 text-gray-600"})}),a.jsx("button",{onClick:()=>U(e.id),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(i,{className:"w-4 h-4 text-gray-600"})})]})]}),a.jsx("div",{className:"p-4 h-96",children:a.jsx(A,{chart:e,marketData:S,timeframe:g,isRealTime:N})})]},e.id))})})]})},A=({chart:e,marketData:t,timeframe:r,isRealTime:l})=>{const i=e.symbol?t[e.symbol]:null,n=e.symbols?e.symbols.map(e=>t[e]).filter(Boolean):[];return i||0!==n.length?a.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:d.createElement({candlestick:C,line:m,bar:x,area:h,heatmap:c,scatter:p}[e.type]||s,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("h3",{className:"font-semibold text-gray-900 mb-1",children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," Chart"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e.symbol||e.symbols?.join(", ")," • ",r]}),l&&a.jsxs("div",{className:"flex items-center justify-center space-x-1 mt-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-xs text-green-600",children:"Live Updates"})]})]})}):a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(h,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"Loading chart data..."})]})})};export{S as default};
//# sourceMappingURL=AdvancedCharting-CWPcWeqp.js.map
