import{j as e,C as s,L as t,R as a,S as r,T as l,a as i,H as n,M as o,r as d,X as c,b as m,c as x,d as u}from"./react-vendor-veQMdy8Q.js";import{c as h,a as g}from"./utils-vendor-DUg4_aAP.js";import{t as p}from"./ai-vendor-D2oz74m-.js";import{P as b}from"./vendor-COg1wW2x.js";import{ResponsiveContainer as v,LineChart as j,CartesianGrid as y,XAxis as f,YAxis as N,Tooltip as w,Legend as k,Line as C,BarChart as F,Bar as R,PieChart as M,Pie as $,Cell as S,AreaChart as P,Area as A}from"./charts-vendor-YB5D2y8T.js";function D({name:a,size:r=24,color:l="currentColor",className:i="",strokeWidth:n=2,...o}){const d=t[a];return d?e.jsx(d,{size:r,color:l,strokeWidth:n,className:i,...o}):e.jsx(s,{size:r,color:"gray",strokeWidth:n,className:i,...o})}function T(...e){return p(h(e))}D.propTypes={name:b.string.isRequired,size:b.number,color:b.string,className:b.string,strokeWidth:b.number};const L=g("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{primary:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow",default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow",outline:"border border-border bg-background hover:bg-muted hover:text-foreground shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90 shadow-sm hover:shadow",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline p-0 h-auto",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow",danger:"bg-error text-error-foreground hover:bg-error/90 shadow-sm hover:shadow",minimal:"text-muted-foreground hover:text-foreground hover:bg-muted/50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xs:"h-8 rounded-md px-2 text-xs",xl:"h-12 rounded-md px-10 text-base"}},defaultVariants:{variant:"default",size:"default"}}),E=a.forwardRef(({className:s,variant:t,size:a,asChild:l=!1,children:i,loading:n=!1,iconName:o=null,iconPosition:d="left",iconSize:c=null,fullWidth:m=!1,disabled:x=!1,...u},h)=>{const g=l?r:"button",p=c||{xs:12,sm:14,default:16,lg:18,xl:20,icon:16}[a]||16,b=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24","data-loading":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v=()=>o?e.jsx(D,{name:o,size:p,className:T(i&&"left"===d&&"mr-2",i&&"right"===d&&"ml-2")}):null;return e.jsxs(g,{className:T(L({variant:t,size:a,className:s}),m&&"w-full"),ref:h,disabled:x||n,...u,children:[n&&e.jsx(b,{}),o&&"left"===d&&v(),i,o&&"right"===d&&v()]})});E.displayName="Button";class I extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,s){const t=this.generateErrorId();this.setState({error:e,errorInfo:s,errorId:t}),this.logToMonitoring(e,s,t)}generateErrorId(){return`ERR-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}logToMonitoring(e,s,t){try{window.Sentry&&window.Sentry.withScope(a=>{a.setTag("errorBoundary",!0),a.setContext("errorInfo",s),a.setContext("errorId",t),a.setLevel("error"),window.Sentry.captureException(e)}),fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorId:t,message:e.message,stack:e.stack,componentStack:s.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:this.props.userId||"anonymous"})}).catch(e=>{})}catch(a){}}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportIssue=()=>{const e=encodeURIComponent(`Error Report - ${this.state.errorId}`),s=encodeURIComponent(`\nError ID: ${this.state.errorId}\nError: ${this.state.error?.message}\nURL: ${window.location.href}\nTime: ${(new Date).toISOString()}\n\nPlease describe what you were doing when this error occurred:\n[Your description here]\n    `);window.open(`mailto:support@financeanalystpro.com?subject=${e}&body=${s}`)};render(){if(this.state.hasError){const{fallback:s,level:t="component"}=this.props;return s?e.jsx(s,{error:this.state.error,errorInfo:this.state.errorInfo,errorId:this.state.errorId,onRetry:this.handleRetry}):"component"===t?e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(l,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Component Error"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This component encountered an error and couldn't be displayed."}),e.jsx("div",{className:"mt-3 flex space-x-3",children:e.jsxs(E,{size:"sm",variant:"outline",onClick:this.handleRetry,className:"text-red-700 border-red-300 hover:bg-red-100",children:[e.jsx(i,{className:"w-4 h-4 mr-1"}),"Retry"]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(l,{className:"w-8 h-8 text-red-500"})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We apologize for the inconvenience. An unexpected error occurred while loading this page."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Error ID"}),e.jsx("div",{className:"text-sm font-mono text-gray-800",children:this.state.errorId})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(E,{onClick:this.handleRetry,className:"w-full",variant:"primary",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{onClick:this.handleGoHome,variant:"secondary",className:"flex-1",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Go Home"]}),e.jsxs(E,{onClick:this.handleReportIssue,variant:"outline",className:"flex-1",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Report"]})]}),e.jsx(E,{onClick:this.handleReload,variant:"ghost",className:"w-full text-sm",children:"Reload Page"})]}),!1]})})})}return this.props.children}}const V=a.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:T("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));V.displayName="Card";const K=a.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:T("flex flex-col space-y-1.5 p-6",s),...t}));K.displayName="CardHeader";const Y=a.forwardRef(({className:s,...t},a)=>e.jsx("h3",{className:T("text-2xl font-semibold leading-none tracking-tight",s),...t,children:t.children||"Card Title"}));Y.displayName="CardTitle";a.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:T("text-sm text-muted-foreground",s),...t})).displayName="CardDescription";const z=a.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:T("p-6 pt-0",s),...t}));z.displayName="CardContent";a.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:T("flex items-center p-6 pt-0",s),...t})).displayName="CardFooter";const q=a.forwardRef(({className:s,type:t="text",label:a,description:r,error:l,required:i=!1,id:n,...o},d)=>{const c=n||`input-${Math.random().toString(36).substr(2,9)}`;return"checkbox"===t?e.jsx("input",{type:"checkbox",className:T("h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:d,id:c,...o}):"radio"===t?e.jsx("input",{type:"radio",className:T("h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:d,id:c,...o}):e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{htmlFor:c,className:T("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",l?"text-destructive":"text-foreground"),children:[a,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{type:t,className:T("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"border-destructive focus-visible:ring-destructive",s),ref:d,id:c,...o}),r&&!l&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r}),l&&e.jsx("p",{className:"text-sm text-destructive",children:l})]})});q.displayName="Input";const B=a.forwardRef(({className:s,options:t=[],value:a,_defaultValue:r,placeholder:l="Select an option",multiple:i=!1,disabled:n=!1,required:o=!1,label:h,description:g,error:p,searchable:b=!1,clearable:v=!1,loading:j=!1,id:y,name:f,onChange:N,onOpenChange:w,...k},C)=>{const[F,R]=d.useState(!1),[M,$]=d.useState(""),S=y||`select-${Math.random().toString(36).substr(2,9)}`,P=b&&M?t.filter(e=>e.label.toLowerCase().includes(M.toLowerCase())||e.value&&e.value.toString().toLowerCase().includes(M.toLowerCase())):t,A=e=>{if(i){const s=a||[],t=s.includes(e.value)?s.filter(s=>s!==e.value):[...s,e.value];N?.(t)}else N?.(e.value),R(!1),w?.(!1)},D=e=>i?a?.includes(e)||!1:a===e,L=i?a?.length>0:void 0!==a&&""!==a;return e.jsxs("div",{className:T("relative",s),children:[h&&e.jsxs("label",{htmlFor:S,className:T("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block",p?"text-destructive":"text-foreground"),children:[h,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:C,id:S,type:"button",className:T("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p&&"border-destructive focus:ring-destructive",!L&&"text-muted-foreground"),onClick:()=>{if(!n){const e=!F;R(e),w?.(e),e||$("")}},disabled:n,"aria-expanded":F,"aria-haspopup":"listbox",...k,children:[e.jsx("span",{className:"truncate",children:(()=>{if(!a)return l;if(i){const e=t.filter(e=>a.includes(e.value));return 0===e.length?l:1===e.length?e[0].label:`${e.length} items selected`}const e=t.find(e=>e.value===a);return e?e.label:l})()}),e.jsxs("div",{className:"flex items-center gap-1",children:[j&&e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v&&L&&!j&&e.jsx(E,{variant:"ghost",size:"icon",className:"h-4 w-4",onClick:e=>{e.stopPropagation(),N?.(i?[]:"")},children:e.jsx(c,{className:"h-3 w-3"})}),e.jsx(m,{className:T("h-4 w-4 transition-transform",F&&"rotate-180")})]})]}),e.jsxs("select",{name:f,value:a||"",onChange:()=>{},className:"sr-only",tabIndex:-1,multiple:i,required:o,children:[e.jsx("option",{value:"",children:"Select..."}),t.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),F&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md",children:[b&&e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search options...",value:M,onChange:e=>{$(e.target.value)},className:"pl-8"})]})}),e.jsx("div",{className:"py-1 max-h-60 overflow-auto",children:0===P.length?e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:M?"No options found":"No options available"}):P.map(s=>e.jsxs("div",{role:"option",tabIndex:0,"aria-selected":D(s.value),className:T("relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",D(s.value)&&"bg-primary text-primary-foreground",s.disabled&&"pointer-events-none opacity-50"),onClick:()=>!s.disabled&&A(s),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s.disabled||A(s))},children:[e.jsx("span",{className:"flex-1",children:s.label}),i&&D(s.value)&&e.jsx(u,{className:"h-4 w-4"}),s.description&&e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:s.description})]},s.value))})]})]}),g&&!p&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g}),p&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p})]})});B.displayName="Select";const O=()=>{const[s,t]=d.useState({spotPrice:100,strikePrice:100,timeToExpiry:.25,riskFreeRate:.05,volatility:.2,optionType:"call",dividendYield:0}),[a,r]=d.useState("black-scholes"),l=d.useMemo(()=>{const{spotPrice:e,strikePrice:t,timeToExpiry:a,riskFreeRate:r,volatility:l,optionType:i,dividendYield:n}=s;if(!(e&&t&&a&&l))return null;const o=(Math.log(e/t)+(r-n+.5*l*l)*a)/(l*Math.sqrt(a)),d=o-l*Math.sqrt(a),c=e=>.5*(1+m(e/Math.sqrt(2))),m=e=>{const s=e<0?-1:1,t=1/(1+.3275911*(e=Math.abs(e)));return s*(1-((((1.061405429*t-1.453152027)*t+1.421413741)*t-.284496736)*t+.254829592)*t*Math.exp(-e*e))},x=c(o),u=c(d),h=c(-o),g=c(-d);let p,b,v,j,y,f;"call"===i?(p=e*Math.exp(-n*a)*x-t*Math.exp(-r*a)*u,b=Math.exp(-n*a)*x,f=t*a*Math.exp(-r*a)*u/100):(p=t*Math.exp(-r*a)*g-e*Math.exp(-n*a)*h,b=-Math.exp(-n*a)*h,f=-t*a*Math.exp(-r*a)*g/100);const N=e=>Math.exp(-.5*e*e)/Math.sqrt(2*Math.PI);return v=Math.exp(-n*a)*N(o)/(e*l*Math.sqrt(a)),j=(-e*Math.exp(-n*a)*N(o)*l/(2*Math.sqrt(a))-r*t*Math.exp(-r*a)*("call"===i?u:g)+n*e*Math.exp(-n*a)*("call"===i?x:h))/365,y=e*Math.exp(-n*a)*N(o)*Math.sqrt(a)/100,{price:p,delta:b,gamma:v,theta:j,vega:y,rho:f}},[s]),i=d.useMemo(()=>{const{spotPrice:e,strikePrice:t,timeToExpiry:a,riskFreeRate:r,volatility:l,optionType:i}=s,n=100;if(!(e&&t&&a&&l))return null;const o=a/n,d=Math.exp(l*Math.sqrt(o)),c=1/d,m=(Math.exp(r*o)-c)/(d-c),x=Array(101).fill(null).map(()=>Array(101).fill(0));for(let s=0;s<=n;s++){const a=e*Math.pow(d,2*s-n);x[100][s]="call"===i?Math.max(a-t,0):Math.max(t-a,0)}for(let s=99;s>=0;s--)for(let e=0;e<=s;e++)x[s][e]=Math.exp(-r*o)*(m*x[s+1][e+1]+(1-m)*x[s+1][e]);return{price:x[0][0]}},[s]),n=(e,s)=>{t(t=>({...t,[e]:parseFloat(s)||0}))},o=d.useMemo(()=>{const e=[80,90,100,110,120];return[.083,.167,.25,.5,1].map(s=>({expiry:`${Math.round(12*s)}M`,...e.reduce((e,t)=>{const a=.2+.05*Math.abs(t-100)/100+.02*Math.exp(-s);return e[`K${t}`]=a,e},{})}))},[]),c="black-scholes"===a?l:i;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(V,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Option Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Type"}),e.jsx(B,{value:a,onChange:e=>r(e.target.value),options:[{value:"black-scholes",label:"Black-Scholes"},{value:"binomial",label:"Binomial Tree"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Option Type"}),e.jsx(B,{value:s.optionType,onChange:e=>n("optionType",e.target.value),options:[{value:"call",label:"Call"},{value:"put",label:"Put"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Spot Price ($)"}),e.jsx(q,{type:"number",step:"0.01",value:s.spotPrice,onChange:e=>n("spotPrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Strike Price ($)"}),e.jsx(q,{type:"number",step:"0.01",value:s.strikePrice,onChange:e=>n("strikePrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time to Expiry (Years)"}),e.jsx(q,{type:"number",step:"0.01",value:s.timeToExpiry,onChange:e=>n("timeToExpiry",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk-Free Rate (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*s.riskFreeRate,onChange:e=>n("riskFreeRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Volatility (%)"}),e.jsx(q,{type:"number",step:"0.01",value:100*s.volatility,onChange:e=>n("volatility",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dividend Yield (%)"}),e.jsx(q,{type:"number",step:"0.01",value:100*s.dividendYield,onChange:e=>n("dividendYield",e.target.value/100)})]})]})]})}),e.jsx(V,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pricing Results"}),c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Option Price"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",c.price?.toFixed(4)||"N/A"]})]}),l&&"black-scholes"===a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Delta"}),e.jsx("div",{className:"text-xl font-semibold text-green-600",children:l.delta?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gamma"}),e.jsx("div",{className:"text-xl font-semibold text-purple-600",children:l.gamma?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Theta"}),e.jsx("div",{className:"text-xl font-semibold text-red-600",children:l.theta?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Vega"}),e.jsx("div",{className:"text-xl font-semibold text-yellow-600",children:l.vega?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Rho"}),e.jsx("div",{className:"text-xl font-semibold text-indigo-600",children:l.rho?.toFixed(4)||"N/A"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Implied Volatility Surface"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(j,{data:o,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"expiry"}),e.jsx(N,{tickFormatter:e=>`${(100*e).toFixed(0)}%`}),e.jsx(w,{formatter:e=>`${(100*e).toFixed(2)}%`}),e.jsx(k,{}),e.jsx(C,{type:"monotone",dataKey:"K80",stroke:"#ef4444",name:"K=80"}),e.jsx(C,{type:"monotone",dataKey:"K90",stroke:"#f97316",name:"K=90"}),e.jsx(C,{type:"monotone",dataKey:"K100",stroke:"#22c55e",name:"K=100"}),e.jsx(C,{type:"monotone",dataKey:"K110",stroke:"#3b82f6",name:"K=110"}),e.jsx(C,{type:"monotone",dataKey:"K120",stroke:"#8b5cf6",name:"K=120"})]})})]})]})})]})})},H=()=>{const[s,t]=d.useState({faceValue:1e3,couponRate:.05,maturity:5,paymentFrequency:2,marketYield:.045,daysToSettlement:0}),[a,r]=d.useState([{maturity:.25,yield:.02},{maturity:.5,yield:.025},{maturity:1,yield:.03},{maturity:2,yield:.035},{maturity:5,yield:.04},{maturity:10,yield:.045},{maturity:30,yield:.05}]),l=d.useMemo(()=>{const{faceValue:e,couponRate:t,maturity:a,paymentFrequency:r,marketYield:l}=s;if(!e||!a||!r)return null;const i=r,n=a*i,o=t*e/i,d=l/i;let c=0;for(let s=1;s<=n;s++)c+=o/Math.pow(1+d,s);const m=e/Math.pow(1+d,n),x=c+m;let u=0;for(let s=1;s<=n;s++){u+=s/i*((s===n?o+e:o)/Math.pow(1+d,s))}const h=u/x,g=h/(1+d);let p=0;for(let s=1;s<=n;s++){const t=s/i;p+=(s===n?o+e:o)/Math.pow(1+d,s)*t*(t+1/i)}return{price:x,ytm:l,currentYield:t*e/x,macaulayDuration:h,modifiedDuration:g,convexity:p/(x*Math.pow(1+d,2)),dv01:g*x*1e-4,pvCoupons:c,pvPrincipal:m}},[s]),i=d.useMemo(()=>{if(!l)return null;const{price:e,modifiedDuration:s,convexity:t}=l;return[-.02,-.01,-.005,0,.005,.01,.02].map(a=>{const r=-s*a*e,l=r+.5*t*a*a*e;return{yieldShock:100*a,priceChange1st:r/e*100,priceChange2nd:l/e*100,newPrice1st:e+r,newPrice2nd:e+l}})},[l]),n=(e,s)=>{t(t=>({...t,[e]:parseFloat(s)||0}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(V,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bond Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Face Value ($)"}),e.jsx(q,{type:"number",step:"1",value:s.faceValue,onChange:e=>n("faceValue",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Rate (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*s.couponRate,onChange:e=>n("couponRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maturity (Years)"}),e.jsx(q,{type:"number",step:"0.25",value:s.maturity,onChange:e=>n("maturity",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsx(B,{value:s.paymentFrequency,onChange:e=>n("paymentFrequency",e.target.value),options:[{value:1,label:"Annual"},{value:2,label:"Semi-Annual"},{value:4,label:"Quarterly"},{value:12,label:"Monthly"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Market Yield (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*s.marketYield,onChange:e=>n("marketYield",e.target.value/100)})]})]})]})}),e.jsx(V,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bond Analytics"}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Bond Price"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",l.price?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"YTM"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[(100*l.ytm)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Modified Duration"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:l.modifiedDuration?.toFixed(3)||"N/A"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Convexity"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:l.convexity?.toFixed(2)||"N/A"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"DV01"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",l.dv01?.toFixed(4)||"N/A"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Current Yield"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:[(100*l.currentYield)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Coupons"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:["$",l.pvCoupons?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Principal"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-600",children:["$",l.pvPrincipal?.toFixed(2)||"N/A"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interest Rate Sensitivity"}),i&&e.jsx(v,{width:"100%",height:300,children:e.jsxs(j,{data:i,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"yieldShock",tickFormatter:e=>`${e>0?"+":""}${e}`}),e.jsx(N,{tickFormatter:e=>`${e.toFixed(1)}%`}),e.jsx(w,{formatter:(e,s)=>[`${e.toFixed(2)}%`,"priceChange1st"===s?"Duration Only":"Duration + Convexity"],labelFormatter:e=>`Yield Shock: ${e>0?"+":""}${e} bps`}),e.jsx(k,{}),e.jsx(C,{type:"monotone",dataKey:"priceChange1st",stroke:"#ef4444",name:"Duration Only",strokeDasharray:"5 5"}),e.jsx(C,{type:"monotone",dataKey:"priceChange2nd",stroke:"#3b82f6",name:"Duration + Convexity",strokeWidth:2})]})})]})}),e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yield Curve"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(j,{data:a,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"maturity",tickFormatter:e=>`${e}Y`}),e.jsx(N,{tickFormatter:e=>`${(100*e).toFixed(1)}%`}),e.jsx(w,{formatter:e=>[`${(100*e).toFixed(2)}%`,"Yield"],labelFormatter:e=>`Maturity: ${e} Years`}),e.jsx(C,{type:"monotone",dataKey:"yield",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4}})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Edit Yield Curve Points"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"w-8",children:[s.maturity,"Y:"]}),e.jsx(q,{type:"number",step:"0.001",value:100*s.yield,onChange:e=>((e,s,t)=>{r(a=>a.map((a,r)=>r===e?{...a,[s]:parseFloat(t)||0}:a))})(t,"yield",e.target.value/100),className:"text-xs h-8"}),e.jsx("span",{className:"text-gray-500",children:"%"})]},t))})]})]})})]})]})},W=()=>{const[s,t]=d.useState({exposureAmount:1e6,timeHorizon:1,lgd:.45,pd:.02,correlationFactor:.15,confidenceLevel:.999}),[a,r]=d.useState({revenue:5e7,debt:15e6,ebitda:8e6,currentRatio:1.5,quickRatio:1.2,industryRisk:"medium",managementQuality:"good",marketPosition:"strong"}),l=d.useMemo(()=>{const{exposureAmount:e,lgd:t,pd:a,timeHorizon:r,correlationFactor:l,confidenceLevel:i}=s,n=e*a*t,o=e*t*Math.sqrt(a*(1-a)),d=(e=>{const s=Math.sqrt(-2*Math.log(1-e));return s-(2.515517+.802853*s+.010328*s*s)/(1+1.432788*s+.189269*s*s+.001308*s*s*s)})(i)*o;return{expectedLoss:n,unexpectedLoss:o,economicCapital:d,valueAtRisk:n+d,raroc:(.025*e-n)/d,cumulativePD:1-Math.pow(1-a,r),lossRate:n/e,capitalRatio:d/e}},[s]),i=d.useMemo(()=>{const{revenue:e,debt:s,ebitda:t,currentRatio:r,quickRatio:l,industryRisk:i,managementQuality:n,marketPosition:o}=a;let d=0,c=0;const m=s/t,x=t/e;c+=20,m<1?d+=20:m<2?d+=15:m<3?d+=10:m<4&&(d+=5),c+=20,x>.2?d+=20:x>.15?d+=15:x>.1?d+=10:x>.05&&(d+=5),c+=10,r>2?d+=10:r>1.5?d+=8:r>1.2?d+=6:r>1&&(d+=4),c+=10,l>1.5?d+=10:l>1.2?d+=8:l>1?d+=6:l>.8&&(d+=4),c+=15;d+={low:15,medium:10,high:5}[i]||0,c+=15;d+={excellent:15,good:12,fair:8,poor:3}[n]||0,c+=10;d+={dominant:10,strong:8,competitive:6,weak:3}[o]||0;const u=d/100*100;let h;h=u>=90?"AAA":u>=85?"AA":u>=80?"A":u>=75?"BBB":u>=65?"BB":u>=55?"B":u>=45?"CCC":"D";return{score:d,maxScore:100,scorePercentage:u,rating:h,estimatedPD:{AAA:1e-4,AA:5e-4,A:.002,BBB:.01,BB:.04,B:.12,CCC:.35,D:1}[h],debtToEbitda:m,ebitdaMargin:x}},[a]);d.useMemo(()=>{const e=[];for(let t=0;t<50;t++){const a=.1*Math.random(),r=s.exposureAmount*a*s.lgd;e.push({scenario:t+1,pd:a,loss:r/1e3,lossPercentage:r/s.exposureAmount*100})}return e.sort((e,s)=>e.loss-s.loss)},[s]);const n=(e,s)=>{t(t=>({...t,[e]:parseFloat(s)||0}))},o=(e,s)=>{r(t=>({...t,[e]:isNaN(parseFloat(s))?s:parseFloat(s)}))},c=["#3b82f6","#ef4444","#22c55e","#f59e0b","#8b5cf6"],m=[{range:"0-1%",count:850,probability:.85},{range:"1-3%",count:100,probability:.1},{range:"3-5%",count:30,probability:.03},{range:"5-10%",count:15,probability:.015},{range:">10%",count:5,probability:.005}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(V,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Risk Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exposure Amount ($)"}),e.jsx(q,{type:"number",step:"1000",value:s.exposureAmount,onChange:e=>n("exposureAmount",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Probability of Default (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*s.pd,onChange:e=>n("pd",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Given Default (%)"}),e.jsx(q,{type:"number",step:"0.01",value:100*s.lgd,onChange:e=>n("lgd",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Horizon (Years)"}),e.jsx(q,{type:"number",step:"0.25",value:s.timeHorizon,onChange:e=>n("timeHorizon",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Level (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*s.confidenceLevel,onChange:e=>n("confidenceLevel",e.target.value/100)})]})]})]})}),e.jsx(V,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Risk Metrics"}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expected Loss"}),e.jsxs("div",{className:"text-xl font-bold text-red-600",children:["$",l.expectedLoss?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Unexpected Loss"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-600",children:["$",l.unexpectedLoss?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Economic Capital"}),e.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:["$",l.economicCapital?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Value at Risk"}),e.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:["$",l.valueAtRisk?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"RAROC"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[(100*l.raroc)?.toFixed(1)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Cumulative PD"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:[(100*l.cumulativePD)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Loss Rate"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:[(100*l.lossRate)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capital Ratio"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-600",children:[(100*l.capitalRatio)?.toFixed(2)||"N/A","%"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Scorecard"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Revenue ($)"}),e.jsx(q,{type:"number",value:a.revenue,onChange:e=>o("revenue",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Debt ($)"}),e.jsx(q,{type:"number",value:a.debt,onChange:e=>o("debt",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"EBITDA ($)"}),e.jsx(q,{type:"number",value:a.ebitda,onChange:e=>o("ebitda",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Ratio"}),e.jsx(q,{type:"number",step:"0.1",value:a.currentRatio,onChange:e=>o("currentRatio",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry Risk"}),e.jsx(B,{value:a.industryRisk,onChange:e=>o("industryRisk",e.target.value),options:[{value:"low",label:"Low Risk"},{value:"medium",label:"Medium Risk"},{value:"high",label:"High Risk"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Quality"}),e.jsx(B,{value:a.managementQuality,onChange:e=>o("managementQuality",e.target.value),options:[{value:"excellent",label:"Excellent"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"}]})]})]}),i&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Credit Rating:"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:i.rating})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:"Score:"}),e.jsxs("span",{className:"font-semibold",children:[i.score,"/",i.maxScore," (",i.scorePercentage.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Estimated PD:"}),e.jsxs("span",{className:"font-semibold",children:[(100*i.estimatedPD).toFixed(3),"%"]})]})]})]})}),e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Loss Distribution"}),e.jsx(v,{width:"100%",height:250,children:e.jsxs(F,{data:m,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"range"}),e.jsx(N,{}),e.jsx(w,{formatter:(e,s)=>["count"===s?`${e} scenarios`:`${(100*e).toFixed(1)}%`,"count"===s?"Scenarios":"Probability"]}),e.jsx(R,{dataKey:"count",fill:"#3b82f6"})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Risk Concentration"}),e.jsx(v,{width:"100%",height:200,children:e.jsxs(M,{children:[e.jsx($,{data:m,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,dataKey:"probability",nameKey:"range",children:m.map((s,t)=>e.jsx(S,{fill:c[t%c.length]},`cell-${t}`))}),e.jsx(w,{formatter:e=>`${(100*e).toFixed(1)}%`}),e.jsx(k,{})]})})]})]})})]})]})},Q=()=>{const[s,t]=d.useState("swap"),[a,r]=d.useState({notional:1e7,maturity:5,fixedRate:.035,floatingRate:.03,paymentFrequency:2,dayCount:"ACT/360"}),[l,i]=d.useState({underlyingPrice:100,strikePrice:102,timeToExpiry:.25,riskFreeRate:.05,dividendYield:.02,contractSize:100}),n=d.useMemo(()=>{const{notional:e,maturity:s,fixedRate:t,floatingRate:r,paymentFrequency:l}=a;if(!e||!s||!l)return null;const i=l,n=s*i,o=t*e/i,d=r*e/i,c=r;let m=0;for(let a=1;a<=n;a++)m+=o/Math.pow(1+c/i,a);let x=d/Math.pow(1+c/i,1);x+=e/Math.pow(1+c/i,n),x-=e;const u=m-x;let h=0;for(let a=1;a<=n;a++){h+=a/i*(o/Math.pow(1+c/i,a))}const g=h/m;return{swapValue:u,pvFixedLeg:m,pvFloatingLeg:x,duration:g,dv01:g*Math.abs(m)*1e-4,fixedPayment:o,floatingPayment:d}},[a]),o=d.useMemo(()=>{const{underlyingPrice:e,timeToExpiry:s,riskFreeRate:t,dividendYield:a,contractSize:r}=l;if(!e||!s||!r)return null;const i=e*Math.exp((t-a)*s);return{futuresPrice:i,contractValue:i*r,basis:i-e,carryCost:e*(t-a)*s,underlyingValue:e*r}},[l]),c=d.useMemo(()=>{const e=[];for(let s=80;s<=120;s+=2)e.push(s);return"swap"===s?e.map(e=>({spotPrice:e,payoff:(e/100-a.fixedRate)*a.notional*a.maturity/1e6,derivative:"Interest Rate Swap"})):e.map(e=>({spotPrice:e,payoff:(e*Math.exp((l.riskFreeRate-l.dividendYield)*l.timeToExpiry)-l.strikePrice)*l.contractSize/1e3,derivative:"Futures Contract"}))},[s,a,l]),m=d.useMemo(()=>{const e=[],t=[-.02,-.01,-.005,0,.005,.01,.02];return"swap"===s&&n?t.forEach(s=>{const t=(a.floatingRate+s-a.fixedRate)*a.notional*a.maturity;e.push({shock:100*s,valueChange:t/1e6,newValue:(n.swapValue+t)/1e6})}):o&&t.forEach(s=>{const t=(l.underlyingPrice*(1+s)*Math.exp((l.riskFreeRate-l.dividendYield)*l.timeToExpiry)-o.futuresPrice)*l.contractSize;e.push({shock:100*s,valueChange:t/1e3,newValue:(o.contractValue+t)/1e3})}),e},[s,a,l,n,o]),x=(e,s)=>{r(t=>({...t,[e]:parseFloat(s)||0}))},u=(e,s)=>{i(t=>({...t,[e]:parseFloat(s)||0}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx(E,{variant:"swap"===s?"primary":"secondary",onClick:()=>t("swap"),children:"Interest Rate Swaps"}),e.jsx(E,{variant:"futures"===s?"primary":"secondary",onClick:()=>t("futures"),children:"Futures Contracts"})]}),"swap"===s&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(V,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Swap Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notional Amount ($)"}),e.jsx(q,{type:"number",step:"1000000",value:a.notional,onChange:e=>x("notional",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maturity (Years)"}),e.jsx(q,{type:"number",step:"0.25",value:a.maturity,onChange:e=>x("maturity",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Rate (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*a.fixedRate,onChange:e=>x("fixedRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Floating Rate (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*a.floatingRate,onChange:e=>x("floatingRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsx(B,{value:a.paymentFrequency,onChange:e=>x("paymentFrequency",e.target.value),options:[{value:1,label:"Annual"},{value:2,label:"Semi-Annual"},{value:4,label:"Quarterly"}]})]})]})]})}),e.jsx(V,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Swap Valuation"}),n&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Swap Value"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",n.swapValue?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Fixed Leg"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",n.pvFixedLeg?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Floating Leg"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",n.pvFloatingLeg?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:n.duration?.toFixed(2)||"N/A"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"DV01"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:["$",n.dv01?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Fixed Payment"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:["$",n.fixedPayment?.toLocaleString()||"N/A"]})]})]})]})})]}),"futures"===s&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(V,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Futures Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Underlying Price ($)"}),e.jsx(q,{type:"number",step:"0.01",value:l.underlyingPrice,onChange:e=>u("underlyingPrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Strike Price ($)"}),e.jsx(q,{type:"number",step:"0.01",value:l.strikePrice,onChange:e=>u("strikePrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time to Expiry (Years)"}),e.jsx(q,{type:"number",step:"0.01",value:l.timeToExpiry,onChange:e=>u("timeToExpiry",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk-Free Rate (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*l.riskFreeRate,onChange:e=>u("riskFreeRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dividend Yield (%)"}),e.jsx(q,{type:"number",step:"0.001",value:100*l.dividendYield,onChange:e=>u("dividendYield",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Size"}),e.jsx(q,{type:"number",step:"1",value:l.contractSize,onChange:e=>u("contractSize",e.target.value)})]})]})]})}),e.jsx(V,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Futures Valuation"}),o&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Futures Price"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",o.futuresPrice?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Contract Value"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",o.contractValue?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Basis"}),e.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:["$",o.basis?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Carry Cost"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:["$",o.carryCost?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Underlying Value"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",o.underlyingValue?.toLocaleString()||"N/A"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payoff Diagram"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(P,{data:c,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"spotPrice",tickFormatter:e=>"swap"===s?`${e}%`:`$${e}`}),e.jsx(N,{tickFormatter:e=>"swap"===s?`$${e}M`:`$${e}K`}),e.jsx(w,{formatter:e=>["swap"===s?`$${e.toFixed(2)}M`:`$${e.toFixed(2)}K`,"P&L"],labelFormatter:e=>"swap"===s?`Rate: ${e}%`:`Spot: $${e}`}),e.jsx(A,{type:"monotone",dataKey:"payoff",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3})]})})]})}),e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Risk Scenarios"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(j,{data:m,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"shock",tickFormatter:e=>`${e>0?"+":""}${e}${"swap"===s?"bps":"%"}`}),e.jsx(N,{tickFormatter:e=>"swap"===s?`$${e.toFixed(1)}M`:`$${e.toFixed(1)}K`}),e.jsx(w,{formatter:(e,t)=>["swap"===s?`$${e.toFixed(2)}M`:`$${e.toFixed(2)}K`,"valueChange"===t?"Value Change":"New Value"],labelFormatter:e=>`Shock: ${e>0?"+":""}${e}${"swap"===s?" bps":"%"}`}),e.jsx(k,{}),e.jsx(C,{type:"monotone",dataKey:"valueChange",stroke:"#ef4444",name:"Value Change",strokeWidth:2}),e.jsx(C,{type:"monotone",dataKey:"newValue",stroke:"#22c55e",name:"New Value",strokeWidth:2})]})})]})})]})]})},G=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[s,t]=d.useState("options");d.useEffect(()=>{const e=e=>{t(e.detail.tab)};return window.addEventListener("select-tab",e),()=>window.removeEventListener("select-tab",e)},[]);const a=[{id:"options",label:"Options Pricing",component:O},{id:"fixed-income",label:"Fixed Income",component:H},{id:"credit",label:"Credit Modeling",component:W},{id:"derivatives",label:"Derivatives",component:Q}],r=a.find(e=>e.id===s)?.component;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Professional-grade pricing models and risk analytics for complex financial instruments"})]}),e.jsxs(V,{className:"mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:a.map(a=>e.jsx(E,{variant:s===a.id?"primary":"ghost",onClick:()=>t(a.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(s===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:a.label},a.id))})}),e.jsx("div",{className:"p-6",children:r&&e.jsx(I,{level:"component",children:e.jsx(r,{})})})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{G as A,E as B,V as C,D as I,I as P,B as S,K as a,Y as b,T as c,z as d,q as e};
//# sourceMappingURL=advanced-analytics-BnJTTEAv.js.map
