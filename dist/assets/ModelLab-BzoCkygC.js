import{j as e,aw as t,r as s}from"./react-vendor-CaXMqa0k.js";import{P as r}from"./UIHelpers-CxhvCNNl.js";import{H as a}from"./Header-BiC9vSZ5.js";import"./vendor-zO7HU-o7.js";import"./index-DPdPN0n0.js";import"./data-vendor-DpIj8wd6.js";import"./ui-vendor-DOXsx3JB.js";import"./utils-vendor-Cj_bvvWu.js";import"./state-vendor-DL0PFC30.js";import"./Button-DP1W3JTY.js";const l=[{kind:"DCF",title:"Discounted Cash Flow",description:"Intrinsic value from projected FCFF and terminal assumptions.",tags:["intrinsic","long‑horizon","fundamental"],schema:[{key:"price",label:"Market Price",kind:"number",step:.01,min:0,suffix:"$"},{key:"shares",label:"Diluted Shares",kind:"number",step:1,min:1},{key:"netDebt",label:"Net Debt",kind:"number",step:1e6},{key:"rev0",label:"Revenue₀",kind:"number",step:1e6,min:0,suffix:"$"},{key:"margin",label:"EBIT Margin",kind:"percent",step:.005,min:0,max:.6},{key:"tax",label:"Tax Rate",kind:"percent",step:.005,min:0,max:.6},{key:"g",label:"Growth (yrs 1‑5)",kind:"percent",step:.005,min:-.2,max:.2},{key:"tg",label:"Terminal g",kind:"percent",step:.001,min:-.02,max:.05},{key:"wacc",label:"WACC",kind:"percent",step:.0025,min:.02,max:.25}]},{kind:"Comps",title:"Trading Comps",description:"Value via market multiple on a chosen metric.",tags:["relative","peer‑set"],schema:[{key:"price",label:"Market Price",kind:"number",step:.01,min:0,suffix:"$"},{key:"shares",label:"Diluted Shares",kind:"number",step:1,min:1},{key:"netDebt",label:"Net Debt",kind:"number",step:1e6},{key:"metric",label:"Metric (EBITDA)",kind:"number",step:1e6,min:0,suffix:"$"},{key:"multiple",label:"EV/Metric",kind:"number",step:.25,min:2,max:40}]},{kind:"EPV",title:"Earnings Power Value",description:"Steady‑state value = NOPAT / WACC (g≈0).",tags:["steady‑state","quality"],schema:[{key:"price",label:"Market Price",kind:"number",step:.01,min:0,suffix:"$"},{key:"shares",label:"Diluted Shares",kind:"number",step:1,min:1},{key:"netDebt",label:"Net Debt",kind:"number",step:1e6},{key:"ebit",label:"EBIT (normalized)",kind:"number",step:1e6,min:0,suffix:"$"},{key:"tax",label:"Tax Rate",kind:"percent",step:.005,min:0,max:.6},{key:"wacc",label:"WACC",kind:"percent",step:.0025,min:.02,max:.25}]},{kind:"LBO",title:"LBO Sketch",description:"Entry/exit multiples with leverage; quick equity IRR view.",tags:["private‑equity","leverage"],schema:[{key:"ebitda",label:"EBITDA₀",kind:"number",step:1e6,min:0,suffix:"$"},{key:"entryX",label:"Entry EV/EBITDA",kind:"number",step:.25,min:2,max:30},{key:"exitX",label:"Exit EV/EBITDA",kind:"number",step:.25,min:2,max:30},{key:"debtPct",label:"Debt % EV (t₀)",kind:"percent",step:.01,min:0,max:.9},{key:"years",label:"Hold (yrs)",kind:"number",step:1,min:1,max:10},{key:"ebitdaCAGR",label:"EBITDA CAGR",kind:"percent",step:.005,min:-.3,max:.5}]}];function n(e){const t=e.rev0*(e.margin??.15)*(1-(e.tax??.23)),s=e.g??.05,r=e.tg??.02,a=e.wacc??.09;let l=0,n=t;for(let d=1;d<=5;d++)n*=1+s,l+=n/(1+a)**d;const i=l+n*(1+r)/(a-r)/(1+a)**5;return{ev:i,perShare:(i-(e.netDebt||0))/Math.max(1,e.shares||1)}}function i(e){const t=(e.multiple||8)*(e.metric||0);return{ev:t,perShare:(t-(e.netDebt||0))/Math.max(1,e.shares||1)}}function d(e){const t=(e.ebit||0)*(1-(e.tax||.23))/Math.max(.02,e.wacc||.09);return{ev:t,perShare:(t-(e.netDebt||0))/Math.max(1,e.shares||1)}}function o(e){return"DCF"===e.kind?n(e.assumptions):"Comps"===e.kind?i(e.assumptions):"EPV"===e.kind?d(e.assumptions):"LBO"===e.kind?function(e){const t=e.ebitda||0,s=t*(e.entryX||8),r=s*(e.debtPct||.5),a=Math.max(1,s-r),l=Math.max(1,Math.round(e.years||5)),n=t*(1+(e.ebitdaCAGR||.05))**l*(e.exitX||8),i=Math.max(0,r*.9**l),d=Math.max(1,n-i)/a;return{irr:Math.max(-.99,d**(1/l)-1)}}(e.assumptions):{}}const c=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),m=({children:t,tone:s="slate"})=>e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] ${{slate:"bg-slate-50 text-slate-700 border-slate-200",blue:"bg-blue-50 text-blue-700 border-blue-200",amber:"bg-amber-50 text-amber-700 border-amber-200",green:"bg-emerald-50 text-emerald-700 border-emerald-200",red:"bg-rose-50 text-rose-700 border-rose-200"}[s]}`,children:t}),u=(e,t=0)=>e>=1e9?`$${(e/1e9).toFixed(t)}B`:e>=1e6?`$${(e/1e6).toFixed(t)}M`:`$${e.toFixed(t)}`,x=(e,t=1)=>`${(100*e).toFixed(t)}%`,p=({models:t})=>{const s=t.filter(e=>e.selected),r=s.map(e=>({id:e.id,name:e.name,kind:e.kind,out:o(e)}));return e.jsx(c,{title:"Cross‑Model Compare",right:e.jsxs(m,{tone:"green",children:[s.length," models"]}),children:0===s.length?e.jsx("div",{className:"text-[12px] text-slate-600",children:"Select models in the library to compare."}):e.jsx("div",{className:"overflow-auto rounded-xl border border-slate-200",children:e.jsxs("table",{className:"min-w-[640px] text-right text-[12px]",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left",children:"Model"}),e.jsx("th",{className:"px-2 py-1",children:"Kind"}),e.jsx("th",{className:"px-2 py-1",children:"EV"}),e.jsx("th",{className:"px-2 py-1",children:"Per‑share"}),e.jsx("th",{className:"px-2 py-1",children:"IRR (LBO)"})]})}),e.jsx("tbody",{children:r.map(t=>e.jsxs("tr",{className:"odd:bg-white even:bg-slate-50/40",children:[e.jsx("td",{className:"px-2 py-1 text-left",children:t.name}),e.jsx("td",{className:"px-2 py-1",children:t.kind}),e.jsx("td",{className:"px-2 py-1",children:void 0!==t.out.ev?u(t.out.ev,0):"—"}),e.jsx("td",{className:"px-2 py-1",children:void 0!==t.out.perShare?`$${t.out.perShare.toFixed(2)}`:"—"}),e.jsx("td",{className:"px-2 py-1",children:void 0!==t.out.irr?x(t.out.irr,1):"—"})]},t.id))})]})})})},h=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),b=({children:t,tone:s="slate"})=>e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] ${{slate:"bg-slate-50 text-slate-700 border-slate-200",blue:"bg-blue-50 text-blue-700 border-blue-200",amber:"bg-amber-50 text-amber-700 border-amber-200",green:"bg-emerald-50 text-emerald-700 border-emerald-200",red:"bg-rose-50 text-rose-700 border-rose-200"}[s]}`,children:t}),g=({model:t})=>{const s={DCF:[{label:"Revenue₀",affects:["EBIT","NOPAT","FCFF","EV","Per‑share"]},{label:"EBIT Margin",affects:["EBIT","NOPAT","FCFF","EV","Per‑share"]},{label:"Tax Rate",affects:["NOPAT","FCFF","EV","Per‑share"]},{label:"WACC",affects:["PV","TV","EV","Per‑share"]},{label:"Terminal g",affects:["TV","EV","Per‑share"]},{label:"Net Debt",affects:["Equity","Per‑share"]},{label:"Shares",affects:["Per‑share"]}],Comps:[{label:"Metric",affects:["EV","Per‑share"]},{label:"EV/Metric",affects:["EV","Per‑share"]},{label:"Net Debt",affects:["Equity","Per‑share"]},{label:"Shares",affects:["Per‑share"]}],EPV:[{label:"EBIT",affects:["NOPAT","EV","Per‑share"]},{label:"Tax Rate",affects:["NOPAT","EV","Per‑share"]},{label:"WACC",affects:["EV","Per‑share"]},{label:"Net Debt",affects:["Equity","Per‑share"]},{label:"Shares",affects:["Per‑share"]}],LBO:[{label:"EBITDA₀",affects:["Entry EV","Equity₀","IRR"]},{label:"Entry/Exit multiples",affects:["IRR"]},{label:"Debt %",affects:["Equity₀","IRR"]},{label:"Hold (yrs)",affects:["IRR"]},{label:"EBITDA CAGR",affects:["IRR"]}]}[t.kind]||[];return e.jsx(h,{title:"Driver Inspector",right:e.jsx(b,{tone:"amber",children:t.kind}),children:e.jsx("ul",{className:"space-y-1 text-[12px]",children:s.map((t,s)=>e.jsxs("li",{className:"flex items-center justify-between rounded border border-slate-200 bg-slate-50 px-2 py-1",children:[e.jsx("span",{className:"text-slate-700",children:t.label}),e.jsx("span",{className:"text-slate-500",children:t.affects.join(" • ")})]},s))})})},f="valor.models",v="1.0";function j(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}function y(e){const t=e.match(/^v(\d+)\.(\d+)$/);if(!t)return"v1.0";return`v${parseInt(t[1])}.${parseInt(t[2])+1}`}const w=new class{constructor(){this.models=this.loadFromStorage(),this.listeners=new Set}loadFromStorage(){try{const e=localStorage.getItem(f);if(!e)return[];const t=JSON.parse(e);return t.schemaVersion!==v?this.migrateSchema(t):t.models||[]}catch(e){return[]}}saveToStorage(){try{const e={schemaVersion:v,models:this.models,lastUpdated:(new Date).toISOString()};localStorage.setItem(f,JSON.stringify(e)),this.notifyListeners()}catch(e){throw new Error("Failed to save models to storage")}}migrateSchema(e){return Array.isArray(e)?e.map(e=>({...e,currency:e.currency||"USD",created:e.created||e.updated||(new Date).toISOString()})):e.models||[]}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e(this.models))}list(){return[...this.models]}get(e){return this.models.find(t=>t.id===e)}save(e){const t=(new Date).toISOString(),s=this.models.findIndex(t=>t.id===e.id),r={...e,updated:t,created:e.created||t};return s>=0?this.models[s]=r:this.models.push(r),this.saveToStorage(),r}delete(e){const t=this.models.length;return this.models=this.models.filter(t=>t.id!==e),this.models.length<t&&(this.saveToStorage(),!0)}clone(e){const t=this.get(e);if(!t)return null;const s={...t,id:j(),name:`${t.name} (Copy)`,version:"v1.0",created:(new Date).toISOString(),updated:(new Date).toISOString(),selected:!1};return this.save(s)}bumpVersion(e,t=""){const s=this.get(e);if(!s)return null;const r={...s,version:y(s.version),updated:(new Date).toISOString()};return this.save(r)}export(e=null){const t=e?this.models.filter(t=>e.includes(t.id)):this.models,s={schemaVersion:v,exportedAt:(new Date).toISOString(),models:t},r=JSON.stringify(s,null,2);return new Blob([r],{type:"application/json"})}import(e){try{const t="string"==typeof e?JSON.parse(e):e;if(!t.models||!Array.isArray(t.models))throw new Error("Invalid import format: missing models array");const s=[],r=(new Date).toISOString();for(const e of t.models){const t={...e,id:j(),created:r,updated:r,tags:[...e.tags||[],"imported"]};t.kind&&t.name&&t.assumptions&&(this.models.push(t),s.push(t))}return s.length>0&&this.saveToStorage(),s}catch(t){throw new Error(`Import failed: ${t.message}`)}}search(e,t=null){const s=e.toLowerCase();return this.models.filter(r=>{const a=!e||r.name.toLowerCase().includes(s)||r.tags.some(e=>e.toLowerCase().includes(s)),l=!t||r.tags.includes(t);return a&&l})}getAllTags(){const e=new Set;return this.models.forEach(t=>{t.tags.forEach(t=>e.add(t))}),Array.from(e).sort()}createFromTemplate(e,t=null){const s=function(e,t={}){const s=(new Date).toISOString();return{id:j(),name:`${e} Model`,kind:e,tags:["demo",e.toLowerCase()],version:"v1.0",created:s,updated:s,currency:"USD",assumptions:{...{DCF:{rev0:5e9,margin:.16,tax:.23,g:.05,tg:.02,wacc:.09,price:25,shares:3e8,netDebt:2e9},Comps:{metric:8e8,multiple:9,price:25,shares:3e8,netDebt:2e9},EPV:{ebit:7e8,tax:.23,wacc:.09,price:25,shares:3e8,netDebt:2e9},LBO:{ebitda:6e8,entryX:9,exitX:9,debtPct:.55,years:5,ebitdaCAGR:.06}}[e],...t},outputs:{},selected:!1,...t}}(e);return t&&(s.name=t),this.save(s)}clear(){this.models=[],this.saveToStorage()}getStats(){const e=localStorage.getItem(f)?.length||0,t={};return this.models.forEach(e=>{t[e.kind]=(t[e.kind]||0)+1}),{totalModels:this.models.length,storageSize:e,modelCounts:t,lastUpdated:this.models.length>0?Math.max(...this.models.map(e=>new Date(e.updated).getTime())):null}}},N=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),k=({children:t,tone:s="slate"})=>e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] ${{slate:"bg-slate-50 text-slate-700 border-slate-200",blue:"bg-blue-50 text-blue-700 border-blue-200",amber:"bg-amber-50 text-amber-700 border-amber-200",green:"bg-emerald-50 text-emerald-700 border-emerald-200",red:"bg-rose-50 text-rose-700 border-rose-200"}[s]}`,children:t}),S=({models:r,setModels:a,onSelect:l,selectedModelId:n})=>{const[i,d]=t(),[o,c]=s.useState(i.get("q")||""),[m,u]=s.useState(i.get("tag")||""),[x,p]=s.useState(i.get("sort")||"updated"),[h,b]=s.useState(0),[g,f]=s.useState(null),[v,j]=s.useState(!1),y=s.useRef(null),S=s.useRef(null),C=s.useRef(null),E=Array.from(new Set(r.flatMap(e=>e.tags))).sort();s.useEffect(()=>{const e=new URLSearchParams;o&&e.set("q",o),m&&e.set("tag",m),"updated"!==x&&e.set("sort",x);const t=r.filter(e=>e.selected).map(e=>e.id);t.length>0&&e.set("compare",t.join(",")),d(e,{replace:!0})},[o,m,x,r,d]),s.useEffect(()=>{const e=i.get("compare")?.split(",")||[];e.length>0&&a(r.map(t=>({...t,selected:e.includes(t.id)})))},[]);const D=r.filter(e=>{const t=!o||e.name.toLowerCase().includes(o.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(o.toLowerCase())),s=!m||e.tags.includes(m);return t&&s}).sort((e,t)=>{switch(x){case"name":return e.name.localeCompare(t.name);case"kind":return e.kind.localeCompare(t.kind);case"updated":return new Date(t.updated)-new Date(e.updated);default:return 0}});s.useEffect(()=>{const e=e=>{if(document.activeElement!==y.current)switch(e.key){case"ArrowUp":e.preventDefault(),b(e=>Math.max(0,e-1));break;case"ArrowDown":e.preventDefault(),b(e=>Math.min(D.length-1,e+1));break;case"Enter":e.preventDefault(),D[h]&&l(D[h].id);break;case" ":e.preventDefault(),D[h]&&M(D[h]);break;case"k":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),y.current?.focus())}else"Escape"===e.key&&(y.current.blur(),b(0))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[h,D,l]);const M=s.useCallback(e=>{a(r.map(t=>t.id===e.id?{...t,selected:!t.selected}:t))},[r,a]),T=s.useCallback(e=>{g===e.id?(w.delete(e.id),a(r.filter(t=>t.id!==e.id)),f(null)):f(e.id)},[r,a,g]),I=s.useCallback(e=>{const t=w.clone(e.id);t&&(a([t,...r]),l(t.id))},[r,a,l]),$=s.useCallback(e=>{const t=w.bumpVersion(e.id);t&&a(r.map(s=>s.id===e.id?t:s))},[r,a]),A=s.useCallback((e=!1)=>{const t=e?r.filter(e=>e.selected).map(e=>e.id):null,s=w.export(t),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`valor-models-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},[r]),F=s.useCallback(e=>{const t=new FileReader;t.onload=e=>{try{const t=w.import(e.target.result);a([...t,...r]),j(!1)}catch(t){alert(`Import failed: ${t.message}`)}},t.readAsText(e)},[r,a]);return e.jsxs(e.Fragment,{children:[e.jsxs(N,{title:"Model Library",right:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{tone:"blue",children:[r.filter(e=>e.selected).length," selected"]}),e.jsxs(k,{tone:"slate",children:[D.length," / ",r.length]})]}),children:[e.jsxs("div",{className:"mb-3 grid grid-cols-4 items-end gap-2",children:[e.jsxs("label",{className:"col-span-2 text-[12px]",children:[e.jsx("span",{className:"mb-1 block text-slate-600",children:"Search (⌘K)"}),e.jsx("input",{ref:y,value:o,onChange:e=>c(e.target.value),placeholder:"Name or tag…",className:"w-full rounded-md border border-slate-300 bg-white px-2 py-1 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),e.jsxs("label",{className:"text-[12px]",children:[e.jsx("span",{className:"mb-1 block text-slate-600",children:"Filter tag"}),e.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full rounded-md border border-slate-300 bg-white px-2 py-1",children:[e.jsx("option",{value:"",children:"All"}),E.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("label",{className:"text-[12px]",children:[e.jsx("span",{className:"mb-1 block text-slate-600",children:"Sort by"}),e.jsxs("select",{value:x,onChange:e=>p(e.target.value),className:"w-full rounded-md border border-slate-300 bg-white px-2 py-1",children:[e.jsx("option",{value:"updated",children:"Updated"}),e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"kind",children:"Kind"})]})]})]}),e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-[12px]",children:[e.jsx("button",{onClick:()=>A(!1),className:"rounded-md border border-slate-200 bg-white px-2 py-1 hover:bg-slate-50 transition-colors",children:"Export All"}),e.jsx("button",{onClick:()=>A(!0),disabled:0===r.filter(e=>e.selected).length,className:"rounded-md border border-slate-200 bg-white px-2 py-1 hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Export Selected"}),e.jsx("button",{onClick:()=>j(!0),className:"rounded-md border border-slate-200 bg-white px-2 py-1 hover:bg-slate-50 transition-colors",children:"Import"})]}),e.jsx("div",{className:"text-[11px] text-slate-500 mb-2",children:"Use ↑/↓ to navigate, Enter to open, Space to select"}),e.jsx("ul",{ref:S,className:"grid grid-cols-1 gap-2 max-h-96 overflow-y-auto",children:D.map((t,s)=>e.jsxs("li",{className:`flex items-center justify-between rounded-xl border p-3 transition-colors\n                ${n===t.id?"border-blue-500 bg-blue-50":"border-slate-200"}\n                ${h===s?"ring-2 ring-blue-200":""}\n                ${g===t.id?"border-red-300 bg-red-50":""}\n              `,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[13px] font-semibold text-slate-800",children:t.name}),e.jsx(k,{tone:"amber",children:t.version}),e.jsx(k,{tone:"slate",children:t.kind}),t.selected&&e.jsx(k,{tone:"green",children:"Compare"}),t.tags.includes("imported")&&e.jsx(k,{tone:"blue",children:"Imported"})]}),e.jsxs("div",{className:"text-[11px] text-slate-500",children:["Updated ",new Date(t.updated).toLocaleString()," • ",t.tags.map(t=>e.jsxs("span",{className:"mr-1",children:["#",t]},t))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(t.id),className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[12px] hover:bg-slate-50 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>M(t),className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[12px] hover:bg-slate-50 transition-colors",children:t.selected?"Unselect":"Select"}),e.jsx("button",{onClick:()=>I(t),className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[12px] hover:bg-slate-50 transition-colors",children:"Clone"}),e.jsx("button",{onClick:()=>$(t),className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[12px] hover:bg-slate-50 transition-colors",children:"Bump"}),e.jsx("button",{onClick:()=>T(t),className:"text-[12px] transition-colors "+(g===t.id?"text-red-700 font-semibold":"text-rose-600 hover:text-rose-700"),children:g===t.id?"Confirm?":"Delete"})]})]},t.id))}),0===D.length&&e.jsx("div",{className:"text-center text-slate-500 py-8",children:o||m?"No models match your search criteria":"No models created yet"})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Import Models"}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Select a JSON file exported from Model Lab to import models."}),e.jsx("input",{ref:C,type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];t&&F(t)},className:"w-full mb-4"}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-sm border border-slate-300 rounded-md hover:bg-slate-50",children:"Cancel"})})]})})]})},C=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),E=({t:t})=>e.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-2 py-[2px] text-[11px] text-slate-700",children:t}),D=({onUse:t})=>e.jsx(C,{title:"Template Gallery",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(s=>e.jsxs("div",{className:"rounded-xl border border-slate-200 p-3",children:[e.jsx("div",{className:"mb-1 text-[13px] font-semibold text-slate-800",children:s.title}),e.jsx("div",{className:"mb-2 text-[12px] text-slate-600",children:s.description}),e.jsx("div",{className:"mb-2 flex flex-wrap gap-1",children:s.tags.map(t=>e.jsx(E,{t:t},t))}),e.jsx("button",{onClick:()=>t(s.kind),className:"rounded-md border border-slate-200 bg-white px-2 py-1 text-[12px] hover:bg-slate-50 transition-colors",children:"Use Template"})]},s.kind))})}),M=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),T=({tests:t})=>e.jsx(M,{title:"Dev / Sanity Tests",children:e.jsx("ul",{className:"space-y-1 text-[13px]",children:t.map(t=>e.jsxs("li",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700",children:t.name}),e.jsx("span",{className:"ml-2 "+(t.pass?"text-emerald-600":"text-rose-600"),children:t.pass?"PASS":"FAIL"})]},t.name))})}),I={DCF:{kind:"DCF",compute(e,t={}){const s=e,r=[],a=s.rev0||0,l=s.margin||.15,n=s.tax||.23,i=s.g||.05,d=s.tg||.02,o=s.wacc||.09,c=s.netDebt||0,m=Math.max(1,s.shares||1);if(o<=d)return r.push("WACC must be greater than terminal growth rate"),{warnings:r};let u=0,x=a*l*(1-n);for(let g=1;g<=5;g++)x*=1+i,u+=x/Math.pow(1+o,g);const p=x*(1+d)/(o-d),h=u+p/Math.pow(1+o,5),b=(h-c)/m;return h<0&&r.push("Negative enterprise value - check assumptions"),b<0&&r.push("Negative per-share value - high net debt relative to EV"),p/h>.8&&r.push("Terminal value >80% of EV - consider longer projection period"),{ev:h,perShare:b,warnings:r}},validate(e){const t=[],s=e;return(!s.rev0||s.rev0<=0)&&t.push({field:"rev0",level:"error",message:"Revenue must be positive"}),(!s.shares||s.shares<=0)&&t.push({field:"shares",level:"error",message:"Shares outstanding must be positive"}),(s.margin<0||s.margin>.6)&&t.push({field:"margin",level:"warn",message:"EBIT margin outside typical range (0-60%)"}),(s.tax<0||s.tax>.6)&&t.push({field:"tax",level:"warn",message:"Tax rate outside typical range (0-60%)"}),(s.wacc<.02||s.wacc>.25)&&t.push({field:"wacc",level:"warn",message:"WACC outside typical range (2-25%)"}),(s.g<-.2||s.g>.2)&&t.push({field:"g",level:"warn",message:"Growth rate outside typical range (-20% to +20%)"}),(s.tg<-.02||s.tg>.05)&&t.push({field:"tg",level:"warn",message:"Terminal growth outside typical range (-2% to +5%)"}),s.wacc<=s.tg&&t.push({field:"wacc",level:"error",message:"WACC must be greater than terminal growth rate"}),t}},Comps:{kind:"Comps",compute(e,t={}){const s=e,r=[],a=s.metric||0,l=s.multiple||8,n=s.netDebt||0,i=Math.max(1,s.shares||1);if(a<=0)return r.push("Metric (EBITDA) must be positive for meaningful valuation"),{warnings:r};const d=l*a,o=(d-n)/i;return o<0&&r.push("Negative per-share value - high net debt relative to EV"),(l<3||l>30)&&r.push("Multiple outside typical range (3x-30x)"),{ev:d,perShare:o,warnings:r}},validate(e){const t=[],s=e;return(!s.metric||s.metric<=0)&&t.push({field:"metric",level:"error",message:"Metric must be positive"}),(!s.multiple||s.multiple<=0)&&t.push({field:"multiple",level:"error",message:"Multiple must be positive"}),(!s.shares||s.shares<=0)&&t.push({field:"shares",level:"error",message:"Shares outstanding must be positive"}),(s.multiple<2||s.multiple>40)&&t.push({field:"multiple",level:"warn",message:"Multiple outside typical range (2x-40x)"}),t}},EPV:{kind:"EPV",compute(e,t={}){const s=e,r=[],a=s.ebit||0,l=s.tax||.23,n=Math.max(.02,s.wacc||.09),i=s.netDebt||0,d=Math.max(1,s.shares||1);if(a<=0)return r.push("EBIT must be positive for EPV calculation"),{warnings:r};const o=a*(1-l)/n,c=(o-i)/d;return c<0&&r.push("Negative per-share value - high net debt relative to EV"),n<.05&&r.push("Very low WACC may overstate EPV"),{ev:o,perShare:c,warnings:r}},validate(e){const t=[],s=e;return(!s.ebit||s.ebit<=0)&&t.push({field:"ebit",level:"error",message:"EBIT must be positive"}),(!s.shares||s.shares<=0)&&t.push({field:"shares",level:"error",message:"Shares outstanding must be positive"}),(s.tax<0||s.tax>.6)&&t.push({field:"tax",level:"warn",message:"Tax rate outside typical range (0-60%)"}),(s.wacc<.02||s.wacc>.25)&&t.push({field:"wacc",level:"warn",message:"WACC outside typical range (2-25%)"}),t}},LBO:{kind:"LBO",compute(e,t={}){const s=e,r=[],a=s.ebitda||0,l=s.entryX||8,n=s.exitX||8,i=Math.min(.9,Math.max(0,s.debtPct||.5)),d=Math.max(1,Math.min(10,Math.round(s.years||5))),o=s.ebitdaCAGR||.05;if(a<=0)return r.push("EBITDA must be positive for LBO analysis"),{warnings:r};const c=a*l,m=c*i,u=Math.max(1,c-m),x=a*Math.pow(1+o,d)*n,p=Math.max(0,m*Math.pow(.9,d)),h=Math.max(1,x-p)/u,b=Math.max(-.99,Math.pow(h,1/d)-1);return b<.15&&r.push("IRR below typical PE target (15%+)"),i>.7&&r.push("High leverage ratio may increase risk"),l>n+2&&r.push("Entry multiple significantly higher than exit - check assumptions"),{irr:b,warnings:r}},validate(e){const t=[],s=e;return(!s.ebitda||s.ebitda<=0)&&t.push({field:"ebitda",level:"error",message:"EBITDA must be positive"}),(!s.entryX||s.entryX<=0)&&t.push({field:"entryX",level:"error",message:"Entry multiple must be positive"}),(!s.exitX||s.exitX<=0)&&t.push({field:"exitX",level:"error",message:"Exit multiple must be positive"}),(s.debtPct<0||s.debtPct>.9)&&t.push({field:"debtPct",level:"error",message:"Debt percentage must be between 0-90%"}),(s.years<1||s.years>10)&&t.push({field:"years",level:"error",message:"Hold period must be 1-10 years"}),(s.entryX<2||s.entryX>30)&&t.push({field:"entryX",level:"warn",message:"Entry multiple outside typical range (2x-30x)"}),(s.exitX<2||s.exitX>30)&&t.push({field:"exitX",level:"warn",message:"Exit multiple outside typical range (2x-30x)"}),(s.ebitdaCAGR<-.3||s.ebitdaCAGR>.5)&&t.push({field:"ebitdaCAGR",level:"warn",message:"EBITDA growth outside typical range (-30% to +50%)"}),t}}};function $(e){const t=I[e.kind];if(!t)return{warnings:[`No calculator available for ${e.kind}`]};try{return t.compute(e.assumptions)}catch(s){return{warnings:[`Calculation error: ${s.message}`]}}}const A=({title:t,right:s,children:r,className:a=""})=>e.jsxs("section",{className:`rounded-2xl border border-slate-200 bg-white shadow-sm ${a}`,children:[(t||s)&&e.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-2.5",children:[t&&e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-slate-700",children:t}),s]}),e.jsx("div",{className:"p-4",children:r})]}),F=({children:t,tone:s="slate"})=>e.jsx("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[11px] ${{slate:"bg-slate-50 text-slate-700 border-slate-200",blue:"bg-blue-50 text-blue-700 border-blue-200",amber:"bg-amber-50 text-amber-700 border-amber-200",green:"bg-emerald-50 text-emerald-700 border-emerald-200",red:"bg-rose-50 text-rose-700 border-rose-200"}[s]}`,children:t}),P=(e,t,s)=>Math.max(t,Math.min(s,e));function V({label:t,value:r,onChange:a,suffix:l,step:n=.01,min:i,max:d,fieldKey:o,validationIssues:c=[],onFocus:m,onBlur:u,isDirty:x=!1}){const[p,h]=s.useState(r),[b,g]=s.useState(!1),f=c.filter(e=>e.field===o),v=f.some(e=>"error"===e.level),j=f.some(e=>"warn"===e.level);s.useEffect(()=>{h(r)},[r]);return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"flex items-center justify-between gap-3 text-[13px]",children:[e.jsxs("span",{className:"text-slate-600 "+(x?"font-medium":""),children:[t,x&&e.jsx("span",{className:"ml-1 text-amber-500",children:"•"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:`w-32 rounded-md border px-2 py-1 text-right transition-colors\n                ${v?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-red-200":j?"border-amber-300 bg-amber-50 focus:border-amber-500 focus:ring-amber-200":"border-slate-300 bg-white focus:border-blue-500 focus:ring-blue-200"}\n                ${b?"ring-2":""}\n              `,value:Number((p??0).toFixed(6)),step:n,min:i,max:d,onChange:e=>{const t=parseFloat(e.target.value||"0");h(t);const s=P(t,i??-1/0,d??1/0);a(s)},onFocus:()=>{g(!0),m?.(o)},onBlur:()=>{g(!1),u?.(o)},onKeyDown:e=>{"ArrowUp"===e.key?(e.preventDefault(),a(P((r||0)+n,i??-1/0,d??1/0))):"ArrowDown"===e.key?(e.preventDefault(),a(P((r||0)-n,i??-1/0,d??1/0))):e.shiftKey&&"ArrowUp"===e.key?(e.preventDefault(),a(P((r||0)+10*n,i??-1/0,d??1/0))):e.shiftKey&&"ArrowDown"===e.key&&(e.preventDefault(),a(P((r||0)-10*n,i??-1/0,d??1/0)))}}),(v||j)&&e.jsx("div",{className:`absolute -right-2 -top-2 w-3 h-3 rounded-full\n                ${v?"bg-red-500":"bg-amber-500"}\n              `})]}),l&&e.jsx("span",{className:"text-slate-500",children:l})]})]}),f.length>0&&b&&e.jsx("div",{className:"absolute z-10 mt-1 p-2 bg-white border rounded-md shadow-lg text-[11px] min-w-48",children:f.map((t,s)=>e.jsx("div",{className:""+("error"===t.level?"text-red-700":"text-amber-700"),children:t.message},s))})]})}const B=({model:t,onChange:r,onValidationChange:a,autoSave:n=!0,undoStack:i=[],onUndo:d})=>{const[o,c]=s.useState([]),[m,u]=s.useState(new Set),[x,p]=s.useState(null),[h,b]=s.useState(null),g=l.find(e=>e.kind===t.kind);s.useEffect(()=>{const e=function(e){const t=I[e.kind];if(!t||!t.validate)return[];try{return t.validate(e.assumptions)}catch(s){return[{field:"general",level:"error",message:`Validation error: ${s.message}`}]}}(t);c(e),a?.(e)},[t,a]),s.useEffect(()=>{if(!n||0===m.size)return;x&&clearTimeout(x);const e=setTimeout(()=>{b(new Date),u(new Set)},500);return p(e),()=>clearTimeout(e)},[t.assumptions,n,m.size]);const f=s.useCallback(e=>s=>{u(t=>new Set(t).add(e)),r({...t.assumptions,[e]:s})},[t.assumptions,r]),v=s.useMemo(()=>{const e=[],s=t.assumptions;if("DCF"===t.kind&&s.rev0&&s.margin){const t=s.rev0*s.margin;if(e.push(`EBIT: $${(t/1e6).toFixed(0)}M`),s.wacc&&s.tg){const t=1/(s.wacc-s.tg);e.push(`TV Multiple: ${t.toFixed(1)}x`)}}if("Comps"===t.kind&&s.metric&&s.multiple){const t=s.metric*s.multiple;e.push(`Implied EV: $${(t/1e9).toFixed(1)}B`)}if(t.outputs?.perShare&&s.price){const r=(t.outputs.perShare-s.price)/s.price*100;e.push(`MOS: ${r>0?"+":""}${r.toFixed(1)}%`)}return e},[t]),j=s.useMemo(()=>{const e=o.filter(e=>"error"===e.level),t=o.filter(e=>"warn"===e.level);return{errors:e.length,warnings:t.length}},[o]);return g?e.jsxs(A,{title:"Assumptions",right:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{tone:"slate",children:"Schema‑driven"}),j.errors>0&&e.jsxs(F,{tone:"red",children:[j.errors," errors"]}),j.warnings>0&&e.jsxs(F,{tone:"amber",children:[j.warnings," warnings"]}),m.size>0&&e.jsx(F,{tone:"blue",children:"Unsaved"})]}),children:[j.errors>0&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"text-[13px] font-medium text-red-800 mb-1",children:[j.errors," validation error(s) found"]}),e.jsx("div",{className:"text-[12px] text-red-700",children:"Fix errors to enable calculations"})]}),i.length>0&&e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:d,className:"text-[12px] text-blue-600 hover:text-blue-700 underline",children:["↶ Undo (",i.length,")"]})}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.schema.map(s=>e.jsxs("div",{children:[("number"===s.kind||"percent"===s.kind)&&e.jsx(V,{label:s.label,value:Number(t.assumptions[s.key]||0),onChange:f(s.key),step:s.step,min:s.min,max:s.max,suffix:s.suffix,fieldKey:s.key,validationIssues:o,isDirty:m.has(s.key)}),"select"===s.kind&&e.jsxs("label",{className:"flex items-center justify-between text-[13px]",children:[e.jsx("span",{className:"text-slate-600",children:s.label}),e.jsx("select",{className:"rounded-md border border-slate-300 bg-white px-2 py-1",value:t.assumptions[s.key]||"",onChange:e=>f(s.key)(e.target.value),children:(s.options||[]).map(t=>e.jsx("option",{value:t,children:t},t))})]})]},s.key))}),v.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-[11px] text-slate-600 mb-1",children:"Derived Metrics"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:v.map((t,s)=>e.jsx("span",{className:"text-[11px] bg-white px-2 py-1 rounded border",children:t},s))})]}),n&&e.jsx("div",{className:"mt-3 text-[11px] text-slate-500",children:m.size>0?"Auto-saving...":h?`Last saved: ${h.toLocaleTimeString()}`:"All changes saved"})]}):null},R=()=>{const[t,l]=s.useState([]),[o,c]=s.useState(null),[m,u]=s.useState([]),[x,h]=s.useState([]),b=s.useMemo(()=>t.find(e=>e.id===o),[t,o]);s.useEffect(()=>{const e=w.list();if(0===e.length){const e=[w.createFromTemplate("DCF","DCF Model 1"),w.createFromTemplate("Comps","Comps Model 1"),w.createFromTemplate("EPV","EPV Model 1"),w.createFromTemplate("LBO","LBO Model 1")];l(e),c(e[0]?.id)}else l(e),c(e[0]?.id)},[]),s.useEffect(()=>w.subscribe(e=>{l(e)}),[]);const f=s.useCallback(e=>{const s=t.filter(t=>t.kind===e).length,r=w.createFromTemplate(e,`${e} Model ${s+1}`);l([r,...t]),c(r.id)},[t]),v=s.useCallback(e=>{if(!b)return;h(e=>[...e.slice(-4),b.assumptions]);const s={...b,assumptions:e,outputs:$({...b,assumptions:e}),updated:(new Date).toISOString()};w.save(s),l(t.map(e=>e.id===b.id?s:e))},[b,t]),j=s.useCallback(()=>{if(0===x.length||!b)return;const e=x[x.length-1];h(e=>e.slice(0,-1));const s={...b,assumptions:e,outputs:$({...b,assumptions:e}),updated:(new Date).toISOString()};w.save(s),l(t.map(e=>e.id===b.id?s:e))},[x,b,t]),y=s.useCallback(e=>{u(e)},[]),N=s.useMemo(()=>function(){const e=[],t=i({metric:100,multiple:10,netDebt:200,shares:10});e.push({name:"Comps per‑share = (EV−Debt)/shares",pass:Math.abs(t.perShare-80)<1e-9});const s=d({ebit:100,tax:.2,wacc:.1,netDebt:0,shares:10});e.push({name:"EPV EV ≈ NOPAT/W",pass:Math.abs(s.ev-800)<1e-6});const r=n({rev0:1e3,margin:.2,tax:.2,g:.05,tg:.02,wacc:.1,netDebt:0,shares:100}),a=n({rev0:1e3,margin:.2,tax:.2,g:.05,tg:.02,wacc:.09,netDebt:0,shares:100});return e.push({name:"DCF per‑share ↑ when WACC ↓",pass:a.perShare>r.perShare}),e}(),[]);return e.jsxs("div",{className:"min-h-[100dvh] bg-background text-foreground",children:[e.jsx(a,{}),e.jsxs("div",{className:"pt-[60px]",children:[e.jsx("div",{className:"border-b border-border bg-card",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-primary",children:e.jsx("svg",{viewBox:"0 0 24 24",className:"h-4 w-4 text-white",children:e.jsx("path",{d:"M4 6h16M4 12h10M4 18h7",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs tracking-wide text-muted-foreground",children:"FinanceAnalyst Pro"}),e.jsx("div",{className:"text-[13px] font-semibold text-foreground",children:"Model Lab"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[12px]",children:[e.jsxs(r,{tone:"blue",children:[t.length," models"]}),e.jsx(r,{tone:"green",children:"Route /model-lab"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-4",children:[e.jsx(S,{models:t,setModels:l,onSelect:c,selectedModelId:o}),e.jsx(D,{onUse:f})]}),e.jsx("div",{className:"col-span-12 lg:col-span-5 space-y-4",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-2.5",children:[e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-foreground",children:"Model Header"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{tone:"amber",children:b.version}),m.filter(e=>"error"===e.level).length>0&&e.jsx(r,{tone:"red",children:"Blocked"})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-[13px]",children:[e.jsxs("label",{className:"flex items-center justify-between gap-3 text-[13px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Name"}),e.jsx("input",{className:"w-48 rounded-md border border-border bg-background px-2 py-1 text-right text-foreground",value:b.name,onChange:e=>{const s={...b,name:e.target.value};w.save(s),l(t.map(e=>e.id===b.id?s:e))}})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Kind"}),e.jsx("span",{className:"text-[12px] font-semibold text-foreground",children:b.kind})]})]})})]}),e.jsx(B,{model:b,onChange:v,onValidationChange:y,autoSave:!0,undoStack:x,onUndo:j}),e.jsxs("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-2.5",children:[e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-foreground",children:"Quick Outputs"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{tone:0===m.filter(e=>"error"===e.level).length?"green":"red",children:0===m.filter(e=>"error"===e.level).length?"Computed":"Blocked"}),b.outputs?.warnings?.length>0&&e.jsxs(r,{tone:"amber",children:[b.outputs.warnings.length," warnings"]})]})]}),e.jsx("div",{className:"p-4",children:m.filter(e=>"error"===e.level).length>0?e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Fix validation errors to see outputs"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 gap-3 text-[13px]",children:"LBO"!==b.kind?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-xl border border-border p-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Enterprise Value"}),e.jsx("div",{className:"text-lg font-semibold",children:void 0!==b.outputs?.ev?b.outputs.ev>=1e9?`$${(b.outputs.ev/1e9).toFixed(0)}B`:b.outputs.ev>=1e6?`$${(b.outputs.ev/1e6).toFixed(0)}M`:`$${b.outputs.ev.toFixed(0)}`:"—"})]}),e.jsxs("div",{className:"rounded-xl border border-border p-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Per‑share"}),e.jsx("div",{className:"text-2xl font-bold",children:void 0!==b.outputs?.perShare?`$${b.outputs.perShare.toFixed(2)}`:"—"})]})]}):e.jsxs("div",{className:"rounded-xl border border-border p-3",children:[e.jsx("div",{className:"text-muted-foreground",children:"Equity IRR (sketch)"}),e.jsx("div",{className:"text-2xl font-bold",children:void 0!==b.outputs?.irr?`${(100*b.outputs.irr).toFixed(1)}%`:"—"})]})}),b.outputs?.warnings?.length>0&&e.jsxs("div",{className:"mt-3 p-2 bg-amber-50 border border-amber-200 rounded text-[11px]",children:[e.jsx("div",{className:"font-medium text-amber-800 mb-1",children:"Warnings:"}),b.outputs.warnings.map((t,s)=>e.jsx("div",{className:"text-amber-700",children:t},s))]})]})})]})]}):e.jsxs("div",{className:"rounded-2xl border border-border bg-card shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-border px-4 py-2.5",children:e.jsx("h3",{className:"text-[13px] font-semibold tracking-wide text-foreground",children:"Model Editor"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"text-[12px] text-muted-foreground",children:"Select a model from the library or create one from a template."})})]})}),e.jsxs("div",{className:"col-span-12 lg:col-span-3 space-y-4",children:[b&&e.jsx(g,{model:b}),e.jsx(p,{models:t}),e.jsx(T,{tests:N})]})]})})]})]})};export{R as default};
//# sourceMappingURL=ModelLab-BzoCkygC.js.map
