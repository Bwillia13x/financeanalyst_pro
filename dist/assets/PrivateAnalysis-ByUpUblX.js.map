{"version":3,"file":"PrivateAnalysis-ByUpUblX.js","sources":["../../src/services/monteCarloEngine.js","../../src/components/PrivateAnalysis/FinancialSpreadsheet.jsx","../../src/components/PrivateAnalysis/ScenarioModeling.jsx","../../src/components/PrivateAnalysis/SensitivityAnalysis.jsx","../../src/components/PrivateAnalysis/DataVisualization.jsx","../../src/components/PrivateAnalysis/WACCCalculator.jsx","../../src/components/PrivateAnalysis/AdvancedDCF.jsx","../../src/components/PrivateAnalysis/ComparableAnalysis.jsx","../../src/components/PrivateAnalysis/MonteCarloSimulation.jsx","../../src/components/PrivateAnalysis/ModelingTools.jsx","../../src/components/PrivateAnalysis/AnalysisResults.jsx","../../src/components/PrivateAnalysis/WorkflowNavigation.jsx","../../src/components/PrivateAnalysis/AdvancedLBOTool.jsx","../../src/components/PrivateAnalysis/FinancialModelWorkspace.jsx","../../src/components/PrivateAnalysis/EnhancedScenarioAnalysis.jsx","../../src/components/PrivateAnalysis/EnhancedMarketDataDashboard.jsx","../../src/components/PrivateAnalysis/MonteCarloIntegrationHub.jsx","../../src/services/storageService.js","../../src/services/financialDataStorage.js","../../src/components/DataExportImport.jsx","../../src/pages/PrivateAnalysis.jsx"],"sourcesContent":["import { apiLogger } from '../utils/apiLogger.js';\n\n/**\n * Monte Carlo Simulation Engine\n * Provides advanced statistical modeling and risk analysis\n */\nclass MonteCarloEngine {\n  constructor() {\n    this.workers = [];\n    this.isRunning = false;\n    this.currentSimulation = null;\n  }\n\n  /**\n   * Run Monte Carlo simulation for DCF analysis\n   * @param {Object} baseInputs - Base DCF inputs\n   * @param {Object} distributions - Variable distributions\n   * @param {Object} options - Simulation options\n   * @returns {Promise<Object>} Simulation results\n   */\n  async runDCFSimulation(baseInputs, distributions, options = {}) {\n    const {\n      iterations = 10000,\n      confidenceLevel = 0.95,\n      correlationMatrix = null,\n      randomSeed = null\n    } = options;\n\n    apiLogger.log('INFO', 'Starting DCF Monte Carlo simulation', {\n      iterations,\n      variables: Object.keys(distributions).length\n    });\n\n    this.isRunning = true;\n    const startTime = Date.now();\n\n    try {\n      // Initialize random number generator\n      if (randomSeed) {\n        this.setSeed(randomSeed);\n      }\n\n      // Generate correlated random samples\n      const samples = this.generateCorrelatedSamples(\n        distributions,\n        iterations,\n        correlationMatrix\n      );\n\n      // Run simulation iterations\n      const results = [];\n      const progressCallback = options.onProgress;\n\n      for (let i = 0; i < iterations; i++) {\n        if (!this.isRunning) {\n          throw new Error('Simulation cancelled');\n        }\n\n        // Create scenario inputs\n        const scenarioInputs = this.createScenarioInputs(baseInputs, samples[i], distributions);\n\n        // Calculate DCF for this scenario\n        const dcfResult = this.calculateDCFScenario(scenarioInputs);\n        results.push({\n          iteration: i + 1,\n          pricePerShare: dcfResult.pricePerShare,\n          enterpriseValue: dcfResult.enterpriseValue,\n          upside: dcfResult.upside,\n          inputs: scenarioInputs\n        });\n\n        // Report progress\n        if (progressCallback && i % Math.floor(iterations / 100) === 0) {\n          progressCallback((i / iterations) * 100);\n        }\n      }\n\n      // Analyze results\n      const analysis = this.analyzeResults(results, confidenceLevel);\n\n      const endTime = Date.now();\n      apiLogger.log('INFO', 'DCF Monte Carlo simulation completed', {\n        iterations,\n        duration: endTime - startTime,\n        meanPrice: analysis.statistics.mean\n      });\n\n      return {\n        type: 'DCF_MONTE_CARLO',\n        timestamp: new Date().toISOString(),\n        parameters: { iterations, confidenceLevel, randomSeed },\n        results,\n        analysis,\n        duration: endTime - startTime\n      };\n\n    } catch (error) {\n      this.isRunning = false;\n      apiLogger.log('ERROR', 'DCF Monte Carlo simulation failed', { error: error.message });\n      throw error;\n    } finally {\n      this.isRunning = false;\n    }\n  }\n\n  /**\n   * Run Monte Carlo simulation for LBO analysis\n   * @param {Object} baseInputs - Base LBO inputs\n   * @param {Object} distributions - Variable distributions\n   * @param {Object} options - Simulation options\n   * @returns {Promise<Object>} Simulation results\n   */\n  async runLBOSimulation(baseInputs, distributions, options = {}) {\n    const {\n      iterations = 10000,\n      confidenceLevel = 0.95,\n      correlationMatrix = null,\n      randomSeed = null\n    } = options;\n\n    apiLogger.log('INFO', 'Starting LBO Monte Carlo simulation', {\n      iterations,\n      variables: Object.keys(distributions).length\n    });\n\n    this.isRunning = true;\n    const startTime = Date.now();\n\n    try {\n      if (randomSeed) {\n        this.setSeed(randomSeed);\n      }\n\n      const samples = this.generateCorrelatedSamples(\n        distributions,\n        iterations,\n        correlationMatrix\n      );\n\n      const results = [];\n      const progressCallback = options.onProgress;\n\n      for (let i = 0; i < iterations; i++) {\n        if (!this.isRunning) {\n          throw new Error('Simulation cancelled');\n        }\n\n        const scenarioInputs = this.createScenarioInputs(baseInputs, samples[i], distributions);\n        const lboResult = this.calculateLBOScenario(scenarioInputs);\n\n        results.push({\n          iteration: i + 1,\n          irr: lboResult.irr,\n          moic: lboResult.moic,\n          totalReturn: lboResult.totalReturn,\n          inputs: scenarioInputs\n        });\n\n        if (progressCallback && i % Math.floor(iterations / 100) === 0) {\n          progressCallback((i / iterations) * 100);\n        }\n      }\n\n      const analysis = this.analyzeResults(results, confidenceLevel, ['irr', 'moic', 'totalReturn']);\n\n      const endTime = Date.now();\n      apiLogger.log('INFO', 'LBO Monte Carlo simulation completed', {\n        iterations,\n        duration: endTime - startTime,\n        meanIRR: analysis.statistics.irr?.mean\n      });\n\n      return {\n        type: 'LBO_MONTE_CARLO',\n        timestamp: new Date().toISOString(),\n        parameters: { iterations, confidenceLevel, randomSeed },\n        results,\n        analysis,\n        duration: endTime - startTime\n      };\n\n    } catch (error) {\n      this.isRunning = false;\n      apiLogger.log('ERROR', 'LBO Monte Carlo simulation failed', { error: error.message });\n      throw error;\n    } finally {\n      this.isRunning = false;\n    }\n  }\n\n  /**\n   * Generate correlated random samples using Cholesky decomposition\n   * @param {Object} distributions - Variable distributions\n   * @param {number} iterations - Number of iterations\n   * @param {Array} correlationMatrix - Correlation matrix\n   * @returns {Array} Array of sample sets\n   */\n  generateCorrelatedSamples(distributions, iterations, correlationMatrix) {\n    const variables = Object.keys(distributions);\n    const numVars = variables.length;\n    const samples = [];\n\n    // Generate independent samples first\n    const independentSamples = [];\n    for (let i = 0; i < iterations; i++) {\n      const sample = {};\n      variables.forEach(variable => {\n        const dist = distributions[variable];\n        sample[variable] = this.sampleFromDistribution(dist);\n      });\n      independentSamples.push(sample);\n    }\n\n    // Apply correlation if matrix is provided\n    if (correlationMatrix && correlationMatrix.length === numVars) {\n      const choleskyMatrix = this.choleskyDecomposition(correlationMatrix);\n\n      for (let i = 0; i < iterations; i++) {\n        const correlatedSample = {};\n        const independentValues = variables.map(v => independentSamples[i][v]);\n        const correlatedValues = this.applyCorrelation(independentValues, choleskyMatrix);\n\n        variables.forEach((variable, index) => {\n          correlatedSample[variable] = correlatedValues[index];\n        });\n\n        samples.push(correlatedSample);\n      }\n    } else {\n      samples.push(...independentSamples);\n    }\n\n    return samples;\n  }\n\n  /**\n   * Sample from a probability distribution with enhanced types\n   * @param {Object} distribution - Distribution parameters\n   * @returns {number} Random sample\n   */\n  sampleFromDistribution(distribution) {\n    const { type, parameters } = distribution;\n\n    switch (type) {\n      case 'normal':\n        return this.normalRandom(parameters.mean, parameters.stdDev);\n\n      case 'lognormal':\n        const normalSample = this.normalRandom(parameters.mu, parameters.sigma);\n        return Math.exp(normalSample);\n\n      case 'uniform':\n        return parameters.min + Math.random() * (parameters.max - parameters.min);\n\n      case 'triangular':\n        return this.triangularRandom(parameters.min, parameters.mode, parameters.max);\n\n      case 'beta':\n        return this.betaRandom(parameters.alpha, parameters.beta);\n        \n      case 'exponential':\n        return this.exponentialRandom(parameters.lambda);\n        \n      case 'weibull':\n        return this.weibullRandom(parameters.shape, parameters.scale);\n        \n      case 'pareto':\n        return this.paretoRandom(parameters.scale, parameters.shape);\n        \n      case 'student_t':\n        return this.studentTRandom(parameters.df);\n        \n      case 'chi_squared':\n        return this.chiSquaredRandom(parameters.df);\n\n      default:\n        throw new Error(`Unsupported distribution type: ${type}`);\n    }\n  }\n  \n  /**\n   * Generate exponential random variable\n   * @param {number} lambda - Rate parameter\n   * @returns {number} Exponential random variable\n   */\n  exponentialRandom(lambda) {\n    return -Math.log(1 - Math.random()) / lambda;\n  }\n  \n  /**\n   * Generate Weibull random variable\n   * @param {number} shape - Shape parameter (k)\n   * @param {number} scale - Scale parameter (lambda)\n   * @returns {number} Weibull random variable\n   */\n  weibullRandom(shape, scale) {\n    const u = Math.random();\n    return scale * Math.pow(-Math.log(1 - u), 1 / shape);\n  }\n  \n  /**\n   * Generate Pareto random variable\n   * @param {number} scale - Scale parameter (xm)\n   * @param {number} shape - Shape parameter (alpha)\n   * @returns {number} Pareto random variable\n   */\n  paretoRandom(scale, shape) {\n    const u = Math.random();\n    return scale / Math.pow(u, 1 / shape);\n  }\n  \n  /**\n   * Generate Student's t random variable\n   * @param {number} df - Degrees of freedom\n   * @returns {number} Student's t random variable\n   */\n  studentTRandom(df) {\n    if (df <= 0) throw new Error('Degrees of freedom must be positive');\n    \n    const normal = this.normalRandom(0, 1);\n    const chiSq = this.chiSquaredRandom(df);\n    \n    return normal / Math.sqrt(chiSq / df);\n  }\n  \n  /**\n   * Generate Chi-squared random variable\n   * @param {number} df - Degrees of freedom\n   * @returns {number} Chi-squared random variable\n   */\n  chiSquaredRandom(df) {\n    if (df <= 0) throw new Error('Degrees of freedom must be positive');\n    \n    return this.gammaRandom(df / 2) * 2;\n  }\n\n  /**\n   * Generate normal random variable using Box-Muller transform\n   * @param {number} mean - Mean\n   * @param {number} stdDev - Standard deviation\n   * @returns {number} Normal random variable\n   */\n  normalRandom(mean = 0, stdDev = 1) {\n    if (this.spareNormal !== undefined) {\n      const spare = this.spareNormal;\n      this.spareNormal = undefined;\n      return spare * stdDev + mean;\n    }\n\n    const u1 = Math.random();\n    const u2 = Math.random();\n    const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);\n    const z1 = Math.sqrt(-2 * Math.log(u1)) * Math.sin(2 * Math.PI * u2);\n\n    this.spareNormal = z1;\n    return z0 * stdDev + mean;\n  }\n\n  /**\n   * Generate triangular random variable\n   * @param {number} min - Minimum value\n   * @param {number} mode - Mode value\n   * @param {number} max - Maximum value\n   * @returns {number} Triangular random variable\n   */\n  triangularRandom(min, mode, max) {\n    const u = Math.random();\n    const c = (mode - min) / (max - min);\n\n    if (u < c) {\n      return min + Math.sqrt(u * (max - min) * (mode - min));\n    } else {\n      return max - Math.sqrt((1 - u) * (max - min) * (max - mode));\n    }\n  }\n\n  /**\n   * Generate beta random variable\n   * @param {number} alpha - Alpha parameter\n   * @param {number} beta - Beta parameter\n   * @returns {number} Beta random variable\n   */\n  betaRandom(alpha, beta) {\n    const x = this.gammaRandom(alpha);\n    const y = this.gammaRandom(beta);\n    return x / (x + y);\n  }\n\n  /**\n   * Generate gamma random variable\n   * @param {number} shape - Shape parameter\n   * @returns {number} Gamma random variable\n   */\n  gammaRandom(shape) {\n    // Marsaglia and Tsang's method for shape >= 1\n    if (shape >= 1) {\n      const d = shape - 1 / 3;\n      const c = 1 / Math.sqrt(9 * d);\n\n      while (true) {\n        let x, v;\n        do {\n          x = this.normalRandom();\n          v = 1 + c * x;\n        } while (v <= 0);\n\n        v = v * v * v;\n        const u = Math.random();\n\n        if (u < 1 - 0.0331 * x * x * x * x) {\n          return d * v;\n        }\n\n        if (Math.log(u) < 0.5 * x * x + d * (1 - v + Math.log(v))) {\n          return d * v;\n        }\n      }\n    } else {\n      // For shape < 1, use transformation\n      return this.gammaRandom(shape + 1) * Math.pow(Math.random(), 1 / shape);\n    }\n  }\n\n  /**\n   * Perform Cholesky decomposition\n   * @param {Array} matrix - Correlation matrix\n   * @returns {Array} Lower triangular matrix\n   */\n  choleskyDecomposition(matrix) {\n    const n = matrix.length;\n    const L = Array(n).fill().map(() => Array(n).fill(0));\n\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j <= i; j++) {\n        if (i === j) {\n          let sum = 0;\n          for (let k = 0; k < j; k++) {\n            sum += L[j][k] * L[j][k];\n          }\n          L[j][j] = Math.sqrt(matrix[j][j] - sum);\n        } else {\n          let sum = 0;\n          for (let k = 0; k < j; k++) {\n            sum += L[i][k] * L[j][k];\n          }\n          L[i][j] = (matrix[i][j] - sum) / L[j][j];\n        }\n      }\n    }\n\n    return L;\n  }\n\n  /**\n   * Apply correlation using Cholesky matrix\n   * @param {Array} independentValues - Independent random values\n   * @param {Array} choleskyMatrix - Cholesky decomposition matrix\n   * @returns {Array} Correlated values\n   */\n  applyCorrelation(independentValues, choleskyMatrix) {\n    const n = independentValues.length;\n    const correlatedValues = Array(n).fill(0);\n\n    for (let i = 0; i < n; i++) {\n      for (let j = 0; j <= i; j++) {\n        correlatedValues[i] += choleskyMatrix[i][j] * independentValues[j];\n      }\n    }\n\n    return correlatedValues;\n  }\n\n  /**\n   * Create scenario inputs by applying random samples to base inputs\n   * @param {Object} baseInputs - Base model inputs\n   * @param {Object} samples - Random samples\n   * @param {Object} distributions - Distribution definitions\n   * @returns {Object} Scenario inputs\n   */\n  createScenarioInputs(baseInputs, samples, distributions) {\n    const scenarioInputs = { ...baseInputs };\n\n    Object.entries(samples).forEach(([variable, sample]) => {\n      const distribution = distributions[variable];\n\n      if (distribution.applyTo) {\n        // Apply sample to specific input field\n        scenarioInputs[distribution.applyTo] = sample;\n      } else {\n        // Direct assignment\n        scenarioInputs[variable] = sample;\n      }\n    });\n\n    return scenarioInputs;\n  }\n\n  /**\n   * Calculate DCF scenario (simplified for Monte Carlo)\n   * @param {Object} inputs - Scenario inputs\n   * @returns {Object} DCF results\n   */\n  calculateDCFScenario(inputs) {\n    // This would integrate with the financialModelingEngine\n    // Simplified calculation for demonstration\n    const {\n      currentRevenue = 1000000000,\n      revenueGrowthRate = 0.1,\n      fcfMargin = 0.15,\n      wacc = 0.1,\n      terminalGrowthRate = 0.025,\n      sharesOutstanding = 100000000,\n      currentPrice = 100\n    } = inputs;\n\n    // Simple DCF calculation\n    const projectionYears = 5;\n    let totalPV = 0;\n    let revenue = currentRevenue;\n\n    for (let year = 1; year <= projectionYears; year++) {\n      revenue *= (1 + revenueGrowthRate);\n      const fcf = revenue * fcfMargin;\n      const pv = fcf / Math.pow(1 + wacc, year);\n      totalPV += pv;\n    }\n\n    // Terminal value\n    const terminalFCF = revenue * fcfMargin * (1 + terminalGrowthRate);\n    const terminalValue = terminalFCF / (wacc - terminalGrowthRate);\n    const pvTerminal = terminalValue / Math.pow(1 + wacc, projectionYears);\n\n    const enterpriseValue = totalPV + pvTerminal;\n    const pricePerShare = enterpriseValue / sharesOutstanding;\n    const upside = ((pricePerShare - currentPrice) / currentPrice) * 100;\n\n    return {\n      pricePerShare,\n      enterpriseValue,\n      upside\n    };\n  }\n\n  /**\n   * Calculate LBO scenario (simplified for Monte Carlo)\n   * @param {Object} inputs - Scenario inputs\n   * @returns {Object} LBO results\n   */\n  calculateLBOScenario(inputs) {\n    // Simplified LBO calculation for demonstration\n    const {\n      ebitda = 100000000,\n      ebitdaGrowthRate = 0.05,\n      exitMultiple = 10,\n      debtMultiple = 5,\n      holdingPeriod = 5\n    } = inputs;\n\n    const purchasePrice = ebitda * 10; // Assume 10x entry multiple\n    const debt = ebitda * debtMultiple;\n    const equity = purchasePrice - debt;\n\n    // Project exit EBITDA\n    const exitEbitda = ebitda * Math.pow(1 + ebitdaGrowthRate, holdingPeriod);\n    const exitValue = exitEbitda * exitMultiple;\n    const remainingDebt = debt * 0.5; // Assume 50% paydown\n    const exitProceeds = exitValue - remainingDebt;\n\n    const totalReturn = exitProceeds / equity;\n    const irr = Math.pow(totalReturn, 1 / holdingPeriod) - 1;\n\n    return {\n      irr,\n      moic: totalReturn,\n      totalReturn: exitProceeds\n    };\n  }\n\n  /**\n   * Analyze simulation results with enhanced statistical measures\n   * @param {Array} results - Simulation results\n   * @param {number} confidenceLevel - Confidence level\n   * @param {Array} metrics - Metrics to analyze\n   * @returns {Object} Comprehensive statistical analysis\n   */\n  analyzeResults(results, confidenceLevel, metrics = ['pricePerShare', 'enterpriseValue', 'upside']) {\n    const analysis = {\n      statistics: {},\n      percentiles: {},\n      confidenceIntervals: {},\n      riskMetrics: {},\n      distributionTests: {},\n      correlations: {}\n    };\n\n    metrics.forEach(metric => {\n      const values = results.map(r => r[metric]).filter(v => v !== null && !isNaN(v)).sort((a, b) => a - b);\n\n      if (values.length === 0) return;\n\n      const mean = values.reduce((sum, v) => sum + v, 0) / values.length;\n      const variance = values.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / values.length;\n      const stdDev = Math.sqrt(variance);\n      const sampleStdDev = Math.sqrt(variance * values.length / (values.length - 1)); // Bessel's correction\n\n      analysis.statistics[metric] = {\n        mean,\n        median: this.percentile(values, 0.5),\n        mode: this.calculateMode(values),\n        stdDev,\n        sampleStdDev,\n        variance,\n        min: values[0],\n        max: values[values.length - 1],\n        range: values[values.length - 1] - values[0],\n        count: values.length,\n        // Additional robust statistics\n        trimmedMean: this.calculateTrimmedMean(values, 0.1), // 10% trimmed mean\n        mad: this.calculateMAD(values), // Median Absolute Deviation\n        iqr: this.percentile(values, 0.75) - this.percentile(values, 0.25)\n      };\n\n      analysis.percentiles[metric] = {\n        p1: this.percentile(values, 0.01),\n        p5: this.percentile(values, 0.05),\n        p10: this.percentile(values, 0.10),\n        p25: this.percentile(values, 0.25),\n        p50: this.percentile(values, 0.5),\n        p75: this.percentile(values, 0.75),\n        p90: this.percentile(values, 0.90),\n        p95: this.percentile(values, 0.95),\n        p99: this.percentile(values, 0.99)\n      };\n\n      const alpha = 1 - confidenceLevel;\n      const lowerBound = this.percentile(values, alpha / 2);\n      const upperBound = this.percentile(values, 1 - alpha / 2);\n\n      analysis.confidenceIntervals[metric] = {\n        level: confidenceLevel,\n        lowerBound,\n        upperBound,\n        width: upperBound - lowerBound,\n        // Bootstrap confidence intervals\n        bootstrapCI: this.calculateBootstrapCI(values, confidenceLevel)\n      };\n\n      const var95 = this.percentile(values, 0.05);\n      const var99 = this.percentile(values, 0.01);\n      const cvar95 = values.slice(0, Math.floor(values.length * 0.05)).reduce((sum, v) => sum + v, 0) / Math.floor(values.length * 0.05);\n      const cvar99 = values.slice(0, Math.floor(values.length * 0.01)).reduce((sum, v) => sum + v, 0) / Math.floor(values.length * 0.01);\n\n      analysis.riskMetrics[metric] = {\n        var95, // Value at Risk (5%)\n        var99, // Value at Risk (1%)\n        cvar95, // Conditional VaR (5%)\n        cvar99, // Conditional VaR (1%)\n        skewness: this.calculateSkewness(values, mean, stdDev),\n        kurtosis: this.calculateKurtosis(values, mean, stdDev),\n        excessKurtosis: this.calculateKurtosis(values, mean, stdDev) - 3,\n        // Tail risk measures\n        expectedShortfall: cvar95,\n        maxDrawdown: this.calculateMaxDrawdown(values),\n        // Risk-adjusted returns\n        sharpeRatio: this.calculateSharpeRatio(values, 0.02), // Assuming 2% risk-free rate\n        sortinoRatio: this.calculateSortinoRatio(values, mean)\n      };\n      \n      // Distribution fitting tests\n      analysis.distributionTests[metric] = {\n        jarqueBera: this.jarqueBeraTest(values),\n        kolmogorovSmirnov: this.ksTestNormality(values),\n        shapiroWilk: values.length <= 5000 ? this.shapiroWilkTest(values) : null\n      };\n    });\n    \n    // Calculate correlation matrix between metrics\n    if (metrics.length > 1) {\n      analysis.correlations = this.calculateCorrelationMatrix(results, metrics);\n    }\n\n    return analysis;\n  }\n  \n  /**\n   * Calculate mode of dataset\n   */\n  calculateMode(values) {\n    const frequency = {};\n    values.forEach(v => {\n      const rounded = Math.round(v * 100) / 100; // Round to avoid floating point issues\n      frequency[rounded] = (frequency[rounded] || 0) + 1;\n    });\n    \n    const maxFreq = Math.max(...Object.values(frequency));\n    const modes = Object.keys(frequency).filter(k => frequency[k] === maxFreq);\n    \n    return modes.length === 1 ? parseFloat(modes[0]) : null;\n  }\n  \n  /**\n   * Calculate trimmed mean\n   */\n  calculateTrimmedMean(sortedValues, trimProportion = 0.1) {\n    const trimCount = Math.floor(sortedValues.length * trimProportion);\n    const trimmedValues = sortedValues.slice(trimCount, -trimCount || undefined);\n    return trimmedValues.reduce((sum, v) => sum + v, 0) / trimmedValues.length;\n  }\n  \n  /**\n   * Calculate Median Absolute Deviation\n   */\n  calculateMAD(values) {\n    const median = this.percentile(values, 0.5);\n    const deviations = values.map(v => Math.abs(v - median)).sort((a, b) => a - b);\n    return this.percentile(deviations, 0.5);\n  }\n  \n  /**\n   * Calculate bootstrap confidence interval\n   */\n  calculateBootstrapCI(values, confidenceLevel, bootstrapSamples = 1000) {\n    const bootstrapMeans = [];\n    \n    for (let i = 0; i < bootstrapSamples; i++) {\n      const sample = [];\n      for (let j = 0; j < values.length; j++) {\n        sample.push(values[Math.floor(Math.random() * values.length)]);\n      }\n      bootstrapMeans.push(sample.reduce((sum, v) => sum + v, 0) / sample.length);\n    }\n    \n    bootstrapMeans.sort((a, b) => a - b);\n    const alpha = 1 - confidenceLevel;\n    \n    return {\n      lowerBound: this.percentile(bootstrapMeans, alpha / 2),\n      upperBound: this.percentile(bootstrapMeans, 1 - alpha / 2)\n    };\n  }\n  \n  /**\n   * Calculate maximum drawdown\n   */\n  calculateMaxDrawdown(values) {\n    let peak = values[0];\n    let maxDrawdown = 0;\n    \n    for (const value of values) {\n      if (value > peak) {\n        peak = value;\n      }\n      const drawdown = (peak - value) / peak;\n      if (drawdown > maxDrawdown) {\n        maxDrawdown = drawdown;\n      }\n    }\n    \n    return maxDrawdown;\n  }\n  \n  /**\n   * Calculate Sharpe ratio approximation\n   */\n  calculateSharpeRatio(values, riskFreeRate = 0.02) {\n    const mean = values.reduce((sum, v) => sum + v, 0) / values.length;\n    const variance = values.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / values.length;\n    const stdDev = Math.sqrt(variance);\n    \n    return stdDev > 0 ? (mean - riskFreeRate) / stdDev : 0;\n  }\n  \n  /**\n   * Calculate Sortino ratio\n   */\n  calculateSortinoRatio(values, targetReturn) {\n    const excessReturns = values.map(v => v - targetReturn);\n    const negativeReturns = excessReturns.filter(r => r < 0);\n    \n    if (negativeReturns.length === 0) return Infinity;\n    \n    const downsideDeviation = Math.sqrt(\n      negativeReturns.reduce((sum, r) => sum + r * r, 0) / negativeReturns.length\n    );\n    \n    const meanExcessReturn = excessReturns.reduce((sum, r) => sum + r, 0) / excessReturns.length;\n    \n    return downsideDeviation > 0 ? meanExcessReturn / downsideDeviation : 0;\n  }\n  \n  /**\n   * Jarque-Bera test for normality\n   */\n  jarqueBeraTest(values) {\n    const n = values.length;\n    const mean = values.reduce((sum, v) => sum + v, 0) / n;\n    const variance = values.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / n;\n    const stdDev = Math.sqrt(variance);\n    \n    const skewness = this.calculateSkewness(values, mean, stdDev);\n    const kurtosis = this.calculateKurtosis(values, mean, stdDev);\n    \n    const jb = (n / 6) * (Math.pow(skewness, 2) + Math.pow(kurtosis - 3, 2) / 4);\n    const pValue = 1 - this.chiSquaredCDF(jb, 2); // Approximate p-value\n    \n    return {\n      statistic: jb,\n      pValue,\n      isNormal: pValue > 0.05\n    };\n  }\n  \n  /**\n   * Approximate chi-squared CDF\n   */\n  chiSquaredCDF(x, df) {\n    if (x <= 0) return 0;\n    return this.incompleteGamma(df / 2, x / 2);\n  }\n  \n  /**\n   * Incomplete gamma function approximation\n   */\n  incompleteGamma(a, x) {\n    // Simple approximation for demonstration\n    if (x === 0) return 0;\n    if (x < a + 1) {\n      let sum = 1 / a;\n      let term = 1 / a;\n      for (let n = 1; n < 100; n++) {\n        term *= x / (a + n);\n        sum += term;\n        if (term < 1e-15) break;\n      }\n      return Math.exp(-x + a * Math.log(x) - this.logGamma(a)) * sum;\n    } else {\n      return 1 - this.incompleteGamma(a, x);\n    }\n  }\n  \n  /**\n   * Log gamma function approximation\n   */\n  logGamma(x) {\n    const coef = [\n      76.18009172947146, -86.50532032941677, 24.01409824083091,\n      -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5\n    ];\n    \n    let j = 0;\n    let ser = 1.000000000190015;\n    let xx = x;\n    let y = xx = x;\n    let tmp = x + 5.5;\n    tmp -= (x + 0.5) * Math.log(tmp);\n    \n    for (; j < 6; j++) {\n      ser += coef[j] / ++y;\n    }\n    \n    return -tmp + Math.log(2.5066282746310005 * ser / xx);\n  }\n  \n  /**\n   * Kolmogorov-Smirnov test for normality\n   */\n  ksTestNormality(values) {\n    const n = values.length;\n    const mean = values.reduce((sum, v) => sum + v, 0) / n;\n    const variance = values.reduce((sum, v) => sum + Math.pow(v - mean, 2), 0) / n;\n    const stdDev = Math.sqrt(variance);\n    \n    let maxD = 0;\n    \n    for (let i = 0; i < n; i++) {\n      const empirical = (i + 1) / n;\n      const theoretical = this.normalCDF((values[i] - mean) / stdDev);\n      const d = Math.abs(empirical - theoretical);\n      if (d > maxD) maxD = d;\n    }\n    \n    const critical = 1.36 / Math.sqrt(n); // Critical value at 5% significance\n    \n    return {\n      statistic: maxD,\n      critical,\n      isNormal: maxD < critical\n    };\n  }\n  \n  /**\n   * Normal CDF approximation\n   */\n  normalCDF(x) {\n    return 0.5 * (1 + this.erf(x / Math.sqrt(2)));\n  }\n  \n  /**\n   * Error function approximation\n   */\n  erf(x) {\n    const a1 =  0.254829592;\n    const a2 = -0.284496736;\n    const a3 =  1.421413741;\n    const a4 = -1.453152027;\n    const a5 =  1.061405429;\n    const p  =  0.3275911;\n    \n    const sign = x < 0 ? -1 : 1;\n    x = Math.abs(x);\n    \n    const t = 1.0 / (1.0 + p * x);\n    const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);\n    \n    return sign * y;\n  }\n  \n  /**\n   * Shapiro-Wilk test for normality (simplified)\n   */\n  shapiroWilkTest(values) {\n    // Simplified implementation - in practice, would use lookup tables\n    const n = values.length;\n    if (n < 3 || n > 5000) return null;\n    \n    const sortedValues = [...values].sort((a, b) => a - b);\n    const mean = values.reduce((sum, v) => sum + v, 0) / n;\n    \n    // This is a very simplified approximation\n    let numerator = 0;\n    let denominator = 0;\n    \n    for (let i = 0; i < n; i++) {\n      denominator += Math.pow(sortedValues[i] - mean, 2);\n    }\n    \n    // Simplified calculation - real implementation would use Shapiro-Wilk coefficients\n    const w = numerator / denominator;\n    \n    return {\n      statistic: w,\n      isNormal: w > 0.9 // Very rough approximation\n    };\n  }\n  \n  /**\n   * Calculate correlation matrix between metrics\n   */\n  calculateCorrelationMatrix(results, metrics) {\n    const correlationMatrix = {};\n    \n    for (let i = 0; i < metrics.length; i++) {\n      correlationMatrix[metrics[i]] = {};\n      for (let j = 0; j < metrics.length; j++) {\n        if (i === j) {\n          correlationMatrix[metrics[i]][metrics[j]] = 1.0;\n        } else {\n          const valuesI = results.map(r => r[metrics[i]]).filter(v => v !== null && !isNaN(v));\n          const valuesJ = results.map(r => r[metrics[j]]).filter(v => v !== null && !isNaN(v));\n          \n          correlationMatrix[metrics[i]][metrics[j]] = this.calculateCorrelation(valuesI, valuesJ);\n        }\n      }\n    }\n    \n    return correlationMatrix;\n  }\n  \n  /**\n   * Calculate Pearson correlation coefficient\n   */\n  calculateCorrelation(x, y) {\n    if (x.length !== y.length || x.length === 0) return 0;\n    \n    const n = x.length;\n    const meanX = x.reduce((sum, v) => sum + v, 0) / n;\n    const meanY = y.reduce((sum, v) => sum + v, 0) / n;\n    \n    let numerator = 0;\n    let sumXX = 0;\n    let sumYY = 0;\n    \n    for (let i = 0; i < n; i++) {\n      const dx = x[i] - meanX;\n      const dy = y[i] - meanY;\n      numerator += dx * dy;\n      sumXX += dx * dx;\n      sumYY += dy * dy;\n    }\n    \n    const denominator = Math.sqrt(sumXX * sumYY);\n    return denominator > 0 ? numerator / denominator : 0;\n  }\n\n  /**\n   * Calculate percentile\n   * @param {Array} sortedValues - Sorted array of values\n   * @param {number} p - Percentile (0-1)\n   * @returns {number} Percentile value\n   */\n  percentile(sortedValues, p) {\n    const index = p * (sortedValues.length - 1);\n    const lower = Math.floor(index);\n    const upper = Math.ceil(index);\n    const weight = index - lower;\n\n    if (lower === upper) {\n      return sortedValues[lower];\n    }\n\n    return sortedValues[lower] * (1 - weight) + sortedValues[upper] * weight;\n  }\n\n  /**\n   * Calculate skewness\n   * @param {Array} values - Array of values\n   * @param {number} mean - Mean\n   * @param {number} stdDev - Standard deviation\n   * @returns {number} Skewness\n   */\n  calculateSkewness(values, mean, stdDev) {\n    const n = values.length;\n    const sum = values.reduce((sum, v) => sum + Math.pow((v - mean) / stdDev, 3), 0);\n    return (n / ((n - 1) * (n - 2))) * sum;\n  }\n\n  /**\n   * Calculate kurtosis\n   * @param {Array} values - Array of values\n   * @param {number} mean - Mean\n   * @param {number} stdDev - Standard deviation\n   * @returns {number} Kurtosis\n   */\n  calculateKurtosis(values, mean, stdDev) {\n    const n = values.length;\n    const sum = values.reduce((sum, v) => sum + Math.pow((v - mean) / stdDev, 4), 0);\n    return ((n * (n + 1)) / ((n - 1) * (n - 2) * (n - 3))) * sum - (3 * Math.pow(n - 1, 2)) / ((n - 2) * (n - 3));\n  }\n\n  /**\n   * Set random seed for reproducible results\n   * @param {number} seed - Random seed\n   */\n  setSeed(seed) {\n    // Simple linear congruential generator for reproducible results\n    this.seed = seed;\n    this.random = () => {\n      this.seed = (this.seed * 9301 + 49297) % 233280;\n      return this.seed / 233280;\n    };\n    Math.random = this.random;\n  }\n\n  /**\n   * Stop running simulation\n   */\n  stopSimulation() {\n    this.isRunning = false;\n  }\n\n  /**\n   * Check if simulation is running\n   * @returns {boolean} True if running\n   */\n  isSimulationRunning() {\n    return this.isRunning;\n  }\n}\n\n// Export singleton instance\nexport const monteCarloEngine = new MonteCarloEngine();\nexport default MonteCarloEngine;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Plus, ChevronDown, ChevronRight, Calculator, FileText, TrendingUp, Edit2 } from 'lucide-react';\n\nconst FinancialSpreadsheet = ({ data, onDataChange, onAdjustedValuesChange }) => {\n  const [activeStatement, setActiveStatement] = useState('incomeStatement');\n  const [adjustedValues, setAdjustedValues] = useState({});\n  const [expandedSections, setExpandedSections] = useState({\n    // Income Statement\n    revenue: true,\n    costOfGoodsSold: true,\n    operatingExpenses: true,\n    salariesBenefits: true,\n    grossProfit: true,\n    operatingIncome: true,\n    incomeBeforeTax: true,\n    otherIncomeExpense: true,\n    // Balance Sheet\n    currentAssets: true,\n    nonCurrentAssets: true,\n    currentLiabilities: true,\n    nonCurrentLiabilities: true,\n    equity: true,\n    // Cash Flow\n    operatingActivities: true,\n    investingActivities: true,\n    financingActivities: true\n  });\n  \n  const [editingCell, setEditingCell] = useState(null);\n  const [cellValue, setCellValue] = useState('');\n  const inputRef = useRef(null);\n\n  // Initialize adjusted values with 2024 data (period index 2)\n  useEffect(() => {\n    if (data?.statements?.incomeStatement && Object.keys(adjustedValues).length === 0) {\n      const newAdjustedValues = {};\n      const incomeStatement = data.statements.incomeStatement;\n      \n      Object.keys(incomeStatement).forEach(key => {\n        if (incomeStatement[key] && incomeStatement[key][2] !== undefined) {\n          newAdjustedValues[key] = incomeStatement[key][2];\n        }\n      });\n      \n      setAdjustedValues(newAdjustedValues);\n      if (onAdjustedValuesChange) {\n        onAdjustedValuesChange(newAdjustedValues);\n      }\n    }\n  }, [data, adjustedValues, onAdjustedValuesChange]);\n\n  // Get current template based on active statement\n  const getCurrentTemplate = () => {\n    switch (activeStatement) {\n      case 'balanceSheet':\n        return balanceSheetTemplate;\n      case 'cashFlow':\n        return cashFlowTemplate;\n      default:\n        return incomeStatementTemplate;\n    }\n  };\n\n\n  // Income Statement Template Structure with Enhanced Color Coding\n  const incomeStatementTemplate = {\n    revenue: {\n      title: 'Revenue',\n      color: 'bg-emerald-50 border-emerald-300',\n      headerBg: 'bg-emerald-600',\n      textColor: 'text-emerald-900',\n      items: [\n        { key: 'energyDevices', label: 'Energy Devices', level: 1 },\n        { key: 'injectables', label: 'Injectables', level: 1 },\n        { key: 'wellness', label: 'Wellness', level: 1 },\n        { key: 'weightloss', label: 'Weightloss', level: 1 },\n        { key: 'retailSales', label: 'Retail Sales', level: 1 },\n        { key: 'surgery', label: 'Surgery', level: 1 },\n        { key: 'totalRevenue', label: 'Total Revenue', level: 0, bold: true, formula: true }\n      ]\n    },\n    costOfGoodsSold: {\n      title: 'Cost of Goods Sold',\n      color: 'bg-red-50 border-red-300',\n      headerBg: 'bg-red-600',\n      textColor: 'text-red-900',\n      items: [\n        { key: 'energyDeviceSupplies', label: 'Energy Device Supplies', level: 1 },\n        { key: 'injectablesCogs', label: 'Injectables', level: 1 },\n        { key: 'wellnessCogs', label: 'Wellness', level: 1 },\n        { key: 'weightlossCogs', label: 'Weightloss', level: 1 },\n        { key: 'retailProducts', label: 'Retail Products', level: 1 },\n        { key: 'surgicalSupplies', label: 'Surgical Supplies', level: 1 },\n        { key: 'totalCostOfGoodsSold', label: 'Total Cost of Goods Sold', level: 0, bold: true, formula: true }\n      ]\n    },\n    grossProfit: {\n      title: 'Gross Profit',\n      color: 'bg-blue-50 border-blue-300',\n      headerBg: 'bg-blue-600',\n      textColor: 'text-blue-900',\n      items: [\n        { key: 'grossProfit', label: 'Gross Profit', level: 0, bold: true, formula: true }\n      ]\n    },\n    salariesBenefits: {\n      title: 'Salaries & Benefits',\n      color: 'bg-purple-50 border-purple-300',\n      headerBg: 'bg-purple-600',\n      textColor: 'text-purple-900',\n      items: [\n        { key: 'employeeBenefits', label: 'Employee Benefits', level: 1 },\n        { key: 'payroll', label: 'Payroll', level: 1 },\n        { key: 'payrollTaxes', label: 'Payroll Taxes', level: 1 },\n        { key: 'totalSalariesBenefits', label: 'Total Salaries & Benefits', level: 0, bold: true, formula: true }\n      ]\n    },\n    operatingExpenses: {\n      title: 'Operating Expenses',\n      color: 'bg-orange-50 border-orange-300',\n      headerBg: 'bg-orange-600',\n      textColor: 'text-orange-900',\n      items: [\n        { key: 'marketing', label: 'Marketing', level: 1 },\n        { key: 'automobile', label: 'Automobile', level: 1 },\n        { key: 'creditCardBankCharges', label: 'Credit Card and Bank Charges', level: 1 },\n        { key: 'donations', label: 'Donations', level: 1 },\n        { key: 'computerTelephoneUtilities', label: 'Computer, Telephone, and Utilities', level: 1 },\n        { key: 'depreciation', label: 'Depreciation', level: 1 },\n        { key: 'duesSubscriptions', label: 'Dues & Subscriptions', level: 1 },\n        { key: 'education', label: 'Education', level: 1 },\n        { key: 'equipmentRental', label: 'Equipment Rental', level: 1 },\n        { key: 'insurance', label: 'Insurance', level: 1 },\n        { key: 'interestExpense', label: 'Interest Expense', level: 1 },\n        { key: 'travelMealsEntertainment', label: 'Travel, Meals, and Entertainment', level: 1 },\n        { key: 'rent', label: 'Rent', level: 1 },\n        { key: 'officeExpenses', label: 'Office Expenses', level: 1 },\n        { key: 'professionalFees', label: 'Professional Fees', level: 1 },\n        { key: 'repairsMaintenance', label: 'Repairs & Maintenance', level: 1 },\n        { key: 'localTax', label: 'Local Tax', level: 1 },\n        { key: 'stateTax', label: 'State Tax', level: 1 },\n        { key: 'totalOperatingExpense', label: 'Total Operating Expense', level: 0, bold: true, formula: true }\n      ]\n    },\n    operatingIncome: {\n      title: 'Operating Income',\n      color: 'bg-teal-50 border-teal-300',\n      headerBg: 'bg-teal-600',\n      textColor: 'text-teal-900',\n      items: [\n        { key: 'operatingIncome', label: 'Operating Income', level: 0, bold: true }\n      ]\n    },\n    otherIncomeExpense: {\n      title: 'Other Income / (Expense)',\n      color: 'bg-slate-50 border-slate-300',\n      headerBg: 'bg-slate-600',\n      textColor: 'text-slate-900',\n      items: [\n        { key: 'gainOnAssetSale', label: 'Gain (Loss) On Asset Sale', level: 1 },\n        { key: 'interestIncome', label: 'Interest Income', level: 1 },\n        { key: 'otherExpenses', label: 'Other Expenses', level: 1 },\n        { key: 'totalOtherIncomeExpense', label: 'Total Other Income / (Expenses)', level: 0, bold: true, formula: true }\n      ]\n    },\n    incomeBeforeTax: {\n      title: 'Net Income Before Taxes',\n      color: 'bg-amber-50 border-amber-300',\n      headerBg: 'bg-amber-600',\n      textColor: 'text-amber-900',\n      items: [\n        { key: 'incomeBeforeTax', label: 'Net Income Before Taxes', level: 0, bold: true }\n      ]\n    }\n  };\n\n  // Balance Sheet Template Structure\n  const balanceSheetTemplate = {\n    currentAssets: {\n      title: 'Current Assets',\n      color: 'bg-emerald-50 border-emerald-300',\n      headerBg: 'bg-emerald-600',\n      textColor: 'text-emerald-900',\n      items: [\n        { key: 'cash', label: 'Cash and Cash Equivalents', level: 1 },\n        { key: 'receivables', label: 'Accounts Receivable', level: 1 },\n        { key: 'inventory', label: 'Inventory', level: 1 },\n        { key: 'prepaidExpenses', label: 'Prepaid Expenses', level: 1 },\n        { key: 'otherCurrentAssets', label: 'Other Current Assets', level: 1 },\n        { key: 'totalCurrentAssets', label: 'Total Current Assets', level: 0, formula: true, bold: true }\n      ]\n    },\n    nonCurrentAssets: {\n      title: 'Non-Current Assets',\n      color: 'bg-blue-50 border-blue-300',\n      headerBg: 'bg-blue-600',\n      textColor: 'text-blue-900',\n      items: [\n        { key: 'ppe', label: 'Property, Plant & Equipment', level: 1 },\n        { key: 'accumulatedDepreciation', label: 'Less: Accumulated Depreciation', level: 1 },\n        { key: 'netPPE', label: 'Net Property, Plant & Equipment', level: 1, formula: true },\n        { key: 'intangibleAssets', label: 'Intangible Assets', level: 1 },\n        { key: 'goodwill', label: 'Goodwill', level: 1 },\n        { key: 'otherNonCurrentAssets', label: 'Other Non-Current Assets', level: 1 },\n        { key: 'totalNonCurrentAssets', label: 'Total Non-Current Assets', level: 0, formula: true, bold: true }\n      ]\n    },\n    totalAssets: {\n      title: 'Total Assets',\n      color: 'bg-slate-50 border-slate-300',\n      headerBg: 'bg-slate-700',\n      textColor: 'text-slate-900',\n      items: [\n        { key: 'totalAssets', label: 'Total Assets', level: 0, formula: true, bold: true }\n      ]\n    },\n    currentLiabilities: {\n      title: 'Current Liabilities',\n      color: 'bg-red-50 border-red-300',\n      headerBg: 'bg-red-600',\n      textColor: 'text-red-900',\n      items: [\n        { key: 'accountsPayable', label: 'Accounts Payable', level: 1 },\n        { key: 'accruedExpenses', label: 'Accrued Expenses', level: 1 },\n        { key: 'shortTermDebt', label: 'Short-term Debt', level: 1 },\n        { key: 'currentPortionLongTermDebt', label: 'Current Portion of Long-term Debt', level: 1 },\n        { key: 'otherCurrentLiabilities', label: 'Other Current Liabilities', level: 1 },\n        { key: 'totalCurrentLiabilities', label: 'Total Current Liabilities', level: 0, formula: true, bold: true }\n      ]\n    },\n    nonCurrentLiabilities: {\n      title: 'Non-Current Liabilities',\n      color: 'bg-orange-50 border-orange-300',\n      headerBg: 'bg-orange-600',\n      textColor: 'text-orange-900',\n      items: [\n        { key: 'longTermDebt', label: 'Long-term Debt', level: 1 },\n        { key: 'deferredTaxLiabilities', label: 'Deferred Tax Liabilities', level: 1 },\n        { key: 'otherNonCurrentLiabilities', label: 'Other Non-Current Liabilities', level: 1 },\n        { key: 'totalNonCurrentLiabilities', label: 'Total Non-Current Liabilities', level: 0, formula: true, bold: true }\n      ]\n    },\n    totalLiabilities: {\n      title: 'Total Liabilities',\n      color: 'bg-slate-50 border-slate-300',\n      headerBg: 'bg-slate-700',\n      textColor: 'text-slate-900',\n      items: [\n        { key: 'totalLiabilities', label: 'Total Liabilities', level: 0, formula: true, bold: true }\n      ]\n    },\n    equity: {\n      title: 'Shareholders\\' Equity',\n      color: 'bg-purple-50 border-purple-300',\n      headerBg: 'bg-purple-600',\n      textColor: 'text-purple-900',\n      items: [\n        { key: 'commonStock', label: 'Common Stock', level: 1 },\n        { key: 'retainedEarnings', label: 'Retained Earnings', level: 1 },\n        { key: 'otherEquity', label: 'Other Comprehensive Income', level: 1 },\n        { key: 'totalEquity', label: 'Total Shareholders\\' Equity', level: 0, formula: true, bold: true }\n      ]\n    },\n    totalLiabilitiesEquity: {\n      title: 'Total Liabilities and Equity',\n      color: 'bg-slate-50 border-slate-300',\n      headerBg: 'bg-slate-700',\n      textColor: 'text-slate-900',\n      items: [\n        { key: 'totalLiabilitiesEquity', label: 'Total Liabilities and Shareholders\\' Equity', level: 0, formula: true, bold: true }\n      ]\n    }\n  };\n\n  // Cash Flow Template Structure\n  const cashFlowTemplate = {\n    operatingActivities: {\n      title: 'Operating Activities',\n      color: 'bg-emerald-50 border-emerald-300',\n      headerBg: 'bg-emerald-600',\n      textColor: 'text-emerald-900',\n      items: [\n        { key: 'netIncome', label: 'Net Income', level: 1 },\n        { key: 'depreciation', label: 'Depreciation and Amortization', level: 1 },\n        { key: 'receivablesChange', label: 'Change in Accounts Receivable', level: 1 },\n        { key: 'inventoryChange', label: 'Change in Inventory', level: 1 },\n        { key: 'payablesChange', label: 'Change in Accounts Payable', level: 1 },\n        { key: 'otherOperatingChanges', label: 'Other Operating Changes', level: 1 },\n        { key: 'netCashFromOperating', label: 'Net Cash from Operating Activities', level: 0, formula: true, bold: true }\n      ]\n    },\n    investingActivities: {\n      title: 'Investing Activities',\n      color: 'bg-blue-50 border-blue-300',\n      headerBg: 'bg-blue-600',\n      textColor: 'text-blue-900',\n      items: [\n        { key: 'capex', label: 'Capital Expenditures', level: 1 },\n        { key: 'acquisitions', label: 'Acquisitions', level: 1 },\n        { key: 'assetSales', label: 'Asset Sales', level: 1 },\n        { key: 'otherInvestingActivities', label: 'Other Investing Activities', level: 1 },\n        { key: 'netCashFromInvesting', label: 'Net Cash from Investing Activities', level: 0, formula: true, bold: true }\n      ]\n    },\n    financingActivities: {\n      title: 'Financing Activities',\n      color: 'bg-purple-50 border-purple-300',\n      headerBg: 'bg-purple-600',\n      textColor: 'text-purple-900',\n      items: [\n        { key: 'debtIssuance', label: 'Debt Issuance', level: 1 },\n        { key: 'debtRepayment', label: 'Debt Repayment', level: 1 },\n        { key: 'equityIssuance', label: 'Equity Issuance', level: 1 },\n        { key: 'dividends', label: 'Dividends Paid', level: 1 },\n        { key: 'otherFinancingActivities', label: 'Other Financing Activities', level: 1 },\n        { key: 'netCashFromFinancing', label: 'Net Cash from Financing Activities', level: 0, formula: true, bold: true }\n      ]\n    },\n    netCashFlow: {\n      title: 'Net Cash Flow',\n      color: 'bg-slate-50 border-slate-300',\n      headerBg: 'bg-slate-700',\n      textColor: 'text-slate-900',\n      items: [\n        { key: 'netCashFlow', label: 'Net Change in Cash', level: 0, formula: true, bold: true },\n        { key: 'beginningCash', label: 'Cash at Beginning of Period', level: 1 },\n        { key: 'endingCash', label: 'Cash at End of Period', level: 0, formula: true, bold: true }\n      ]\n    }\n  };\n\n  const currentTemplate = getCurrentTemplate();\n\n  const toggleSection = (section) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [section]: !prev[section]\n    }));\n  };\n\n  const handleCellClick = (rowKey, periodIndex, isAdjusted = false) => {\n    setEditingCell({ rowKey, periodIndex, isAdjusted });\n    let currentValue = '';\n    \n    if (isAdjusted) {\n      currentValue = adjustedValues[rowKey] || '';\n    } else {\n      currentValue = data.statements.incomeStatement[rowKey]?.[periodIndex] || '';\n    }\n    \n    setCellValue(currentValue.toString());\n  };\n\n  const handleCellBlur = () => {\n    if (editingCell) {\n      const { rowKey, periodIndex, isAdjusted } = editingCell;\n      const newValue = parseFloat(cellValue) || 0;\n      \n      if (isAdjusted) {\n        // Update adjusted values\n        const newAdjustedValues = {\n          ...adjustedValues,\n          [rowKey]: newValue\n        };\n        setAdjustedValues(newAdjustedValues);\n        if (onAdjustedValuesChange) {\n          onAdjustedValuesChange(newAdjustedValues);\n        }\n      } else {\n        // Update original data\n        const newData = { ...data };\n        if (!newData.statements.incomeStatement[rowKey]) {\n          newData.statements.incomeStatement[rowKey] = {};\n        }\n        newData.statements.incomeStatement[rowKey][periodIndex] = newValue;\n        onDataChange(newData);\n      }\n      \n      setEditingCell(null);\n      setCellValue('');\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleCellBlur();\n    } else if (e.key === 'Escape') {\n      e.preventDefault();\n      setEditingCell(null);\n      setCellValue('');\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      handleCellBlur();\n      // Could implement tab navigation to next cell here\n    }\n  };\n\n  // Input validation for numeric values\n  const validateNumericInput = (value) => {\n    // Allow negative numbers, decimals, and empty strings\n    const numericRegex = /^-?\\d*\\.?\\d*$/;\n    return numericRegex.test(value) || value === '';\n  };\n\n  const formatNumber = (value) => {\n    if (!value && value !== 0) return '';\n    \n    // Convert to number if it's a string\n    const numValue = typeof value === 'string' ? parseFloat(value) : value;\n    if (isNaN(numValue)) return '';\n    \n    // Format based on magnitude for better readability\n    const absValue = Math.abs(numValue);\n    let formattedValue;\n    \n    if (absValue >= 1000000) {\n      // Millions\n      formattedValue = new Intl.NumberFormat('en-US', {\n        minimumFractionDigits: 1,\n        maximumFractionDigits: 1\n      }).format(numValue / 1000000);\n      formattedValue += 'M';\n    } else if (absValue >= 1000) {\n      // Thousands\n      formattedValue = new Intl.NumberFormat('en-US', {\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0\n      }).format(numValue);\n    } else {\n      // Less than 1000\n      formattedValue = new Intl.NumberFormat('en-US', {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n      }).format(numValue);\n    }\n    \n    return formattedValue;\n  };\n\n  const addNewRow = () => {\n    const newRowLabel = prompt('Enter row label:');\n    if (newRowLabel) {\n      const newData = { ...data };\n      // Add to template structure (this could be enhanced to persist custom rows)\n      onDataChange(newData);\n    }\n  };\n\n  const addPeriod = () => {\n    const newPeriodLabel = prompt('Enter period label (e.g., \"Year 5\"):');\n    if (newPeriodLabel) {\n      const newData = { ...data };\n      newData.periods = [...newData.periods, newPeriodLabel];\n      onDataChange(newData);\n    }\n  };\n\n  useEffect(() => {\n    if (editingCell && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [editingCell]);\n\n  const renderRow = (item) => {\n    const { key, label, level, formula, bold } = item;\n    \n    // Enhanced spacing and visual hierarchy\n    const indentClass = level === 1 ? 'pl-8' : level === 2 ? 'pl-12' : 'pl-4';\n    const textWeight = bold ? 'font-bold' : level === 0 ? 'font-semibold' : 'font-medium';\n    const textSize = level === 0 ? 'text-sm' : 'text-sm';\n    const textColor = level === 0 ? 'text-slate-900' : 'text-slate-700';\n    const rowBg = level === 0 ? 'bg-slate-50/70' : 'bg-white';\n    const borderColor = level === 0 ? 'border-slate-200' : 'border-slate-100';\n    \n    return (\n      <tr key={key} className={`${rowBg} border-b ${borderColor} hover:bg-slate-50 transition-all duration-150 group`}>\n        {/* Account Name Column */}\n        <td className={`px-6 py-4 ${indentClass} ${textWeight} ${textSize} ${textColor}`}>\n          <div className=\"flex items-center gap-3\">\n            {level === 0 && (\n              <div className=\"w-1.5 h-4 bg-gradient-to-b from-blue-500 to-blue-600 rounded-full flex-shrink-0 shadow-sm\" />\n            )}\n            <span className=\"leading-tight\">{label}</span>\n            {formula && (\n              <div className=\"flex items-center gap-1\">\n                <Calculator size={14} className=\"text-blue-500/80 flex-shrink-0\" />\n                <span className=\"text-xs text-blue-600 font-medium px-1.5 py-0.5 bg-blue-50 rounded-md\">AUTO</span>\n              </div>\n            )}\n          </div>\n        </td>\n        \n        {/* Units Column */}\n        <td className=\"px-4 py-4 text-center\">\n          <span className=\"text-xs font-medium text-slate-500 uppercase tracking-wide bg-slate-100 px-2 py-1 rounded-md\">\n            $ 000s\n          </span>\n        </td>\n        \n        {/* Period Columns */}\n        {data.periods.map((_, periodIndex) => (\n          <td key={periodIndex} className=\"px-4 py-4 text-right\">\n            {editingCell?.rowKey === key && editingCell?.periodIndex === periodIndex && !editingCell?.isAdjusted ? (\n              <div className=\"relative\">\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={cellValue}\n                  onChange={(e) => {\n                    const newValue = e.target.value;\n                    if (validateNumericInput(newValue)) {\n                      setCellValue(newValue);\n                    }\n                  }}\n                  onBlur={handleCellBlur}\n                  onKeyDown={handleKeyPress}\n                  className=\"w-full px-3 py-2.5 bg-white border-2 border-blue-400 rounded-lg text-slate-900 text-right font-mono text-sm focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 shadow-lg\"\n                  placeholder=\"0.00\"\n                />\n                <div className=\"absolute -top-2 -right-2 flex gap-1\">\n                  <button\n                    onClick={handleCellBlur}\n                    className=\"w-5 h-5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-full flex items-center justify-center text-xs transition-colors\"\n                  >\n                    \n                  </button>\n                  <button\n                    onClick={() => {\n                      setEditingCell(null);\n                      setCellValue('');\n                    }}\n                    className=\"w-5 h-5 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-xs transition-colors\"\n                  >\n                    \n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div\n                onClick={() => !formula && handleCellClick(key, periodIndex)}\n                className={`px-3 py-2.5 rounded-lg font-mono text-sm transition-all duration-200 min-h-[40px] flex items-center justify-end ${\n                  formula \n                    ? 'bg-gradient-to-r from-blue-50 to-blue-100 text-blue-800 font-semibold border border-blue-200 shadow-sm' \n                    : 'hover:bg-slate-100 text-slate-800 cursor-pointer border border-transparent hover:border-slate-200 hover:shadow-sm group-hover:bg-slate-50'\n                }`}\n              >\n                <span className={formula ? 'text-blue-900' : 'text-slate-700'}>\n                  {formatNumber(data.statements.incomeStatement[key]?.[periodIndex]) || ''}\n                </span>\n                {!formula && (\n                  <Edit2 size={12} className=\"ml-2 opacity-0 group-hover:opacity-40 text-slate-400 transition-opacity\" />\n                )}\n              </div>\n            )}\n          </td>\n        ))}\n        \n        {/* Adjusted Column */}\n        <td className=\"px-4 py-4 text-right bg-gradient-to-r from-amber-50 to-yellow-50 border-l-2 border-amber-300\">\n          {editingCell?.rowKey === key && editingCell?.isAdjusted ? (\n            <div className=\"relative\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={cellValue}\n                onChange={(e) => {\n                  const newValue = e.target.value;\n                  if (validateNumericInput(newValue)) {\n                    setCellValue(newValue);\n                  }\n                }}\n                onBlur={handleCellBlur}\n                onKeyDown={handleKeyPress}\n                className=\"w-full px-3 py-2.5 bg-white border-2 border-amber-400 rounded-lg text-slate-900 text-right font-mono text-sm focus:outline-none focus:ring-4 focus:ring-amber-100 focus:border-amber-500 shadow-lg\"\n                placeholder=\"0.00\"\n              />\n              <div className=\"absolute -top-2 -right-2 flex gap-1\">\n                <button\n                  onClick={handleCellBlur}\n                  className=\"w-5 h-5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-full flex items-center justify-center text-xs transition-colors\"\n                >\n                  \n                </button>\n                <button\n                  onClick={() => {\n                    setEditingCell(null);\n                    setCellValue('');\n                  }}\n                  className=\"w-5 h-5 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-xs transition-colors\"\n                >\n                  \n                </button>\n              </div>\n            </div>\n          ) : (\n            <div\n              onClick={() => !formula && handleCellClick(key, null, true)}\n              className={`px-3 py-2.5 rounded-lg font-mono text-sm transition-all duration-200 min-h-[40px] flex items-center justify-end ${\n                formula \n                  ? 'bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 font-semibold border border-amber-300 shadow-sm' \n                  : 'hover:bg-amber-100 text-slate-800 cursor-pointer border border-transparent hover:border-amber-300 hover:shadow-sm'\n              }`}\n            >\n              <span className={formula ? 'text-amber-900' : 'text-slate-700'}>\n                {formatNumber(adjustedValues[key] || 0) || ''}\n              </span>\n              {!formula && (\n                <Edit2 size={12} className=\"ml-2 opacity-0 group-hover:opacity-40 text-amber-500 transition-opacity\" />\n              )}\n            </div>\n          )}\n        </td>\n        \n        {/* Type Column */}\n        <td className=\"px-4 py-4 text-center\">\n          <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${\n            formula \n              ? 'bg-blue-100 text-blue-800 border border-blue-200' \n              : 'bg-slate-100 text-slate-700 border border-slate-200'\n          }`}>\n            {formula ? (\n              <>\n                <Calculator size={10} className=\"mr-1\" />\n                Auto\n              </>\n            ) : (\n              <>\n                <Edit2 size={10} className=\"mr-1\" />\n                Manual\n              </>\n            )}\n          </span>\n        </td>\n      </tr>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 pb-8\">\n      {/* Header Section */}\n      <div className=\"bg-white border-b border-slate-200 shadow-sm\">\n        <div className=\"max-w-full mx-auto px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"p-2 bg-blue-100 rounded-lg\">\n                <TrendingUp className=\"w-6 h-6 text-blue-600\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-slate-900\">Financial Spreadsheet</h1>\n                <p className=\"text-sm text-slate-600 mt-1\">Professional financial modeling workspace</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={addPeriod}\n                className=\"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition-all duration-200 shadow-sm hover:shadow-md font-medium\"\n              >\n                <Plus size={16} />\n                Add Period\n              </button>\n              <select\n                value={activeStatement}\n                onChange={(e) => setActiveStatement(e.target.value)}\n                className=\"px-4 py-2.5 bg-white border border-slate-300 rounded-lg text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-medium shadow-sm\"\n              >\n                <option value=\"incomeStatement\">Income Statement</option>\n                <option value=\"balanceSheet\">Balance Sheet</option>\n                <option value=\"cashFlow\">Cash Flow Statement</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"max-w-full mx-auto p-8\">\n        <div className=\"bg-white rounded-xl border border-slate-200 shadow-lg\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              {/* Enhanced Table Header */}\n              <thead className=\"bg-gradient-to-r from-slate-800 to-slate-900 text-white\">\n                <tr>\n                  <th className=\"min-w-[320px] px-6 py-4 text-left text-sm font-semibold tracking-wider\">\n                    <div className=\"flex items-center gap-2\">\n                      <FileText size={16} className=\"text-slate-300\" />\n                      Account Description\n                    </div>\n                  </th>\n                  <th className=\"w-20 px-4 py-4 text-center text-sm font-semibold\">Units</th>\n                  {data.periods.map((period, index) => (\n                    <th key={index} className=\"min-w-[140px] px-4 py-4 text-center text-sm font-semibold\">\n                      <div className=\"flex flex-col\">\n                        <span>{period}</span>\n                        <span className=\"text-xs text-slate-300 font-normal\">Actual</span>\n                      </div>\n                    </th>\n                  ))}\n                  <th className=\"min-w-[140px] px-4 py-4 text-center text-sm font-semibold bg-gradient-to-r from-amber-600 to-yellow-600 border-l-2 border-amber-400\">\n                    <div className=\"flex flex-col\">\n                      <span>Adjusted</span>\n                      <span className=\"text-xs text-amber-100 font-normal\">Modified</span>\n                    </div>\n                  </th>\n                  <th className=\"w-28 px-4 py-4 text-center text-sm font-semibold\">\n                    <div className=\"flex items-center justify-center gap-1\">\n                      <Calculator size={14} />\n                      Type\n                    </div>\n                  </th>\n                </tr>\n              </thead>\n              \n              <tbody className=\"divide-y divide-slate-100\">\n                {Object.entries(currentTemplate).map(([sectionKey, section]) => (\n                  <React.Fragment key={sectionKey}>\n                    {/* Enhanced Section Header */}\n                    <tr className={`${section.headerBg || 'bg-slate-600'} border-b-2 border-slate-300`}>\n                      <td colSpan={data.periods.length + 4} className=\"py-4 px-6\">\n                        <div className=\"flex items-center gap-3 text-white w-full text-left group\">\n                          <button\n                            onClick={() => toggleSection(sectionKey)}\n                            className=\"flex items-center gap-3 text-white hover:text-slate-200 transition-colors flex-1\"\n                          >\n                            <div className=\"flex items-center justify-center w-6 h-6 rounded-full bg-white/20 group-hover:bg-white/30 transition-colors\">\n                              {expandedSections[sectionKey] ? \n                                <ChevronDown size={14} /> : \n                                <ChevronRight size={14} />\n                              }\n                            </div>\n                            <span className=\"font-bold text-lg\">{section.title}</span>\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              addNewRow();\n                            }}\n                            className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100\"\n                            title=\"Add custom row\"\n                          >\n                            <Plus size={16} />\n                          </button>\n                        </div>\n                      </td>\n                    </tr>\n                    \n                    {/* Section Rows */}\n                    {expandedSections[sectionKey] && section.items.map(item => \n                      renderRow(item)\n                    )}\n                  </React.Fragment>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* Enhanced Instructions Panel */}\n        <div className=\"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"p-2 bg-blue-100 rounded-lg\">\n                <Calculator className=\"w-5 h-5 text-blue-600\" />\n              </div>\n              <h3 className=\"font-bold text-slate-900\">How to Use</h3>\n            </div>\n            <ul className=\"space-y-2 text-sm text-slate-700\">\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-blue-500 font-bold\"></span>\n                Click any editable cell to modify values with enhanced input controls\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-blue-500 font-bold\"></span>\n                Use Enter to save changes or Escape to cancel editing\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-blue-500 font-bold\"></span>\n                Expand/collapse sections using the arrow controls\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-blue-500 font-bold\"></span>\n                Formula cells automatically calculate based on inputs\n              </li>\n            </ul>\n          </div>\n          \n          <div className=\"bg-white rounded-xl p-6 border border-slate-200 shadow-sm\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"p-2 bg-green-100 rounded-lg\">\n                <TrendingUp className=\"w-5 h-5 text-green-600\" />\n              </div>\n              <h3 className=\"font-bold text-slate-900\">Professional Features</h3>\n            </div>\n            <ul className=\"space-y-2 text-sm text-slate-700\">\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-green-500 font-bold\"></span>\n                Color-coded sections for easy visual navigation\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-green-500 font-bold\"></span>\n                Adjusted column for scenario analysis and modifications\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-green-500 font-bold\"></span>\n                Professional number formatting with proper alignment\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-green-500 font-bold\"></span>\n                Enhanced editing experience with save/cancel controls\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FinancialSpreadsheet;\n","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Trash2, TrendingUp, TrendingDown, Minus, BarChart3 } from 'lucide-react';\n\nconst ScenarioModeling = ({ data, modelInputs, onModelInputChange, calculateDCF, formatCurrency, formatPercent }) => {\n  const [showAddForm, setShowAddForm] = useState(false);\n  \n  const scenarios = modelInputs.scenario?.scenarios || [];\n\n  // Calculate DCF for each scenario\n  const scenarioResults = useMemo(() => {\n    return scenarios.map(scenario => {\n      try {\n        // Apply scenario assumptions to base DCF calculation\n        const incomeStatement = { ...data.statements.incomeStatement };\n        \n        // Apply revenue growth to revenue data (object format)\n        const baseRevenue = incomeStatement.totalRevenue || {};\n        const modifiedRevenue = {};\n        Object.keys(baseRevenue).forEach(periodIndex => {\n          const index = parseInt(periodIndex);\n          if (index === 0) {\n            modifiedRevenue[periodIndex] = baseRevenue[periodIndex]; // Base year unchanged\n          } else {\n            // Apply revenue growth for projection years\n            const growthRate = 1 + (scenario.revenueGrowth / 100);\n            modifiedRevenue[periodIndex] = baseRevenue[0] * Math.pow(growthRate, index);\n          }\n        });\n        \n        // Apply margin improvement to operating income\n        const baseOperating = incomeStatement.operatingIncome || {};\n        const modifiedOperating = {};\n        Object.keys(baseOperating).forEach(periodIndex => {\n          const index = parseInt(periodIndex);\n          if (index === 0) {\n            modifiedOperating[periodIndex] = baseOperating[periodIndex]; // Base year unchanged\n          } else {\n            // Apply margin improvement\n            const baseRevenueValue = baseRevenue[periodIndex] || 0;\n            const scenarioRevenue = modifiedRevenue[periodIndex] || 0;\n            const baseIncome = baseOperating[periodIndex] || 0;\n            \n            if (baseRevenueValue > 0) {\n              const baseMargin = baseIncome / baseRevenueValue;\n              const adjustedMargin = baseMargin + (scenario.marginImprovement / 100);\n              modifiedOperating[periodIndex] = scenarioRevenue * adjustedMargin;\n            } else {\n              modifiedOperating[periodIndex] = baseIncome;\n            }\n          }\n        });\n        \n        const scenarioData = {\n          ...data,\n          statements: {\n            ...data.statements,\n            incomeStatement: {\n              ...incomeStatement,\n              totalRevenue: modifiedRevenue,\n              operatingIncome: modifiedOperating\n            }\n          }\n        };\n\n      // Calculate DCF with scenario data\n      const dcfResult = calculateDCF(scenarioData);\n      \n      return {\n        ...scenario,\n        ...dcfResult,\n        weightedValue: dcfResult.enterpriseValue * (scenario.probability / 100)\n      };\n      } catch (error) {\n        console.error('Scenario calculation error:', error);\n        return {\n          ...scenario,\n          enterpriseValue: 0,\n          equityValue: 0,\n          weightedValue: 0\n        };\n      }\n    });\n  }, [scenarios, data, calculateDCF]);\n\n  // Calculate probability-weighted average\n  const weightedAverageValue = scenarioResults.reduce((sum, result) => sum + result.weightedValue, 0);\n\n  const addScenario = () => {\n    const newScenario = {\n      name: `Scenario ${scenarios.length + 1}`,\n      probability: Math.max(0, 100 - scenarios.reduce((sum, s) => sum + s.probability, 0)),\n      revenueGrowth: 10,\n      marginImprovement: 0\n    };\n    \n    onModelInputChange('scenario', 'scenarios', [...scenarios, newScenario]);\n    setShowAddForm(false);\n  };\n\n  const updateScenario = (index, field, value) => {\n    const updatedScenarios = scenarios.map((scenario, i) => \n      i === index ? { ...scenario, [field]: value } : scenario\n    );\n    onModelInputChange('scenario', 'scenarios', updatedScenarios);\n  };\n\n  const deleteScenario = (index) => {\n    const updatedScenarios = scenarios.filter((_, i) => i !== index);\n    onModelInputChange('scenario', 'scenarios', updatedScenarios);\n  };\n\n  const ScenarioForm = ({ scenario, index }) => (\n    <div className=\"border rounded-lg p-4 bg-white\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Scenario Name\n          </label>\n          <input\n            type=\"text\"\n            value={scenario.name}\n            onChange={(e) => updateScenario(index, 'name', e.target.value)}\n            className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            placeholder=\"Enter scenario name\"\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Probability (%)\n          </label>\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"100\"\n            value={scenario.probability}\n            onChange={(e) => updateScenario(index, 'probability', parseInt(e.target.value) || 0)}\n            className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Revenue Growth (%)\n          </label>\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            value={scenario.revenueGrowth}\n            onChange={(e) => updateScenario(index, 'revenueGrowth', parseFloat(e.target.value) || 0)}\n            className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Margin Change (%)\n          </label>\n          <input\n            type=\"number\"\n            step=\"0.1\"\n            value={scenario.marginImprovement}\n            onChange={(e) => updateScenario(index, 'marginImprovement', parseFloat(e.target.value) || 0)}\n            className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n      </div>\n      \n      <div className=\"flex justify-end mt-4 gap-2\">\n        <button\n          onClick={() => deleteScenario(index)}\n          className=\"px-3 py-1 text-red-600 hover:bg-red-50 rounded-lg transition-colors flex items-center gap-1\"\n        >\n          <Trash2 size={16} />\n          Delete\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header with Add Button */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <p className=\"text-gray-600\">\n            Create and compare multiple financial scenarios with different assumptions and probabilities.\n          </p>\n        </div>\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\n        >\n          <Plus size={16} />\n          Add Scenario\n        </button>\n      </div>\n\n      {/* Scenario Management */}\n      <div className=\"space-y-4\">\n        <h4 className=\"font-semibold text-lg\">Scenario Assumptions</h4>\n        \n        {scenarios.map((scenario, index) => (\n          <ScenarioForm key={index} scenario={scenario} index={index} />\n        ))}\n        \n        {showAddForm && (\n          <div className=\"border-2 border-dashed border-blue-300 rounded-lg p-4\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h5 className=\"font-medium\">Add New Scenario</h5>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={addScenario}\n                  className=\"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\n                >\n                  Add\n                </button>\n                <button\n                  onClick={() => setShowAddForm(false)}\n                  className=\"px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Results Display */}\n      {scenarioResults.length > 0 && (\n        <div className=\"space-y-6\">\n          <h4 className=\"font-semibold text-lg\">Scenario Analysis Results</h4>\n          \n          {/* Probability-Weighted Summary */}\n          <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <BarChart3 size={20} className=\"text-blue-600\" />\n              <h5 className=\"font-semibold text-blue-800\">Probability-Weighted Valuation</h5>\n            </div>\n            <div className=\"text-3xl font-bold text-blue-800\">\n              {formatCurrency(weightedAverageValue)}\n            </div>\n            <p className=\"text-sm text-blue-600 mt-2\">\n              Expected value based on scenario probabilities\n            </p>\n          </div>\n\n          {/* Individual Scenario Results */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\n            {scenarioResults.map((result, index) => (\n              <motion.div\n                key={index}\n                className=\"bg-white rounded-lg border p-4 hover:shadow-lg transition-shadow\"\n                whileHover={{ y: -2 }}\n              >\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div>\n                    <h6 className=\"font-semibold text-gray-800\">{result.name}</h6>\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                      <span>{result.probability}% probability</span>\n                      {result.revenueGrowth > 15 ? \n                        <TrendingUp size={14} className=\"text-green-500\" /> :\n                        result.revenueGrowth < 5 ?\n                        <TrendingDown size={14} className=\"text-red-500\" /> :\n                        <Minus size={14} className=\"text-gray-500\" />\n                      }\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  <div className=\"p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"text-sm text-gray-600\">Enterprise Value</div>\n                    <div className=\"text-xl font-bold text-gray-800\">\n                      {formatCurrency(result.enterpriseValue)}\n                    </div>\n                  </div>\n                  \n                  <div className=\"text-xs space-y-1 text-gray-600\">\n                    <div className=\"flex justify-between\">\n                      <span>Revenue Growth:</span>\n                      <span className=\"font-medium\">{formatPercent(result.revenueGrowth)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Margin Change:</span>\n                      <span className={`font-medium ${result.marginImprovement >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        {result.marginImprovement >= 0 ? '+' : ''}{formatPercent(result.marginImprovement)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Weighted Value:</span>\n                      <span className=\"font-medium\">{formatCurrency(result.weightedValue)}</span>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          {/* Summary Statistics */}\n          <div className=\"bg-white rounded-lg border p-6\">\n            <h5 className=\"font-semibold mb-4\">Scenario Statistics</h5>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">\n                  {formatCurrency(Math.max(...scenarioResults.map(r => r.enterpriseValue)))}\n                </div>\n                <div className=\"text-sm text-gray-600\">Best Case</div>\n              </div>\n              \n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-red-600\">\n                  {formatCurrency(Math.min(...scenarioResults.map(r => r.enterpriseValue)))}\n                </div>\n                <div className=\"text-sm text-gray-600\">Worst Case</div>\n              </div>\n              \n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">\n                  {formatCurrency(weightedAverageValue)}\n                </div>\n                <div className=\"text-sm text-gray-600\">Expected Value</div>\n              </div>\n              \n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-gray-800\">\n                  {formatCurrency(Math.max(...scenarioResults.map(r => r.enterpriseValue)) - Math.min(...scenarioResults.map(r => r.enterpriseValue)))}\n                </div>\n                <div className=\"text-sm text-gray-600\">Value Range</div>\n              </div>\n            </div>\n            \n            <div className=\"mt-4 pt-4 border-t\">\n              <div className=\"text-sm text-gray-600\">\n                <strong>Total Probability:</strong> {scenarios.reduce((sum, s) => sum + s.probability, 0)}%\n                {scenarios.reduce((sum, s) => sum + s.probability, 0) !== 100 && (\n                  <span className=\"text-orange-600 ml-2\"> Probabilities should sum to 100%</span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {scenarios.length === 0 && (\n        <div className=\"text-center py-12 text-gray-500\">\n          <BarChart3 size={48} className=\"mx-auto mb-4 opacity-50\" />\n          <p>No scenarios created yet.</p>\n          <p className=\"text-sm mt-2\">Click \"Add Scenario\" to get started with scenario modeling.</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScenarioModeling;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Activity, TrendingUp, TrendingDown, Settings, BarChart3, Plus, Minus } from 'lucide-react';\n\nconst SensitivityAnalysis = ({ data, modelInputs, onModelInputChange, calculateDCF, formatCurrency, formatPercent }) => {\n  const [selectedVariable, setSelectedVariable] = useState(null);\n  \n  const sensitivityConfig = modelInputs.sensitivity || {\n    variables: ['revenue', 'grossMargin', 'discountRate'],\n    ranges: {\n      revenue: { min: -20, max: 20 },\n      grossMargin: { min: -5, max: 5 },\n      discountRate: { min: 8, max: 15 }\n    }\n  };\n\n  // Variable definitions with display names and units\n  const variableDefinitions = {\n    revenue: { \n      name: 'Revenue Growth', \n      unit: '%', \n      description: 'Annual revenue growth rate',\n      baseValue: 15,\n      isPercentage: true\n    },\n    grossMargin: { \n      name: 'Gross Margin', \n      unit: '%', \n      description: 'Gross profit margin improvement',\n      baseValue: 45,\n      isPercentage: true\n    },\n    discountRate: { \n      name: 'Discount Rate (WACC)', \n      unit: '%', \n      description: 'Weighted average cost of capital',\n      baseValue: modelInputs.dcf?.discountRate || 10,\n      isPercentage: true\n    },\n    terminalGrowthRate: {\n      name: 'Terminal Growth Rate',\n      unit: '%',\n      description: 'Long-term growth rate assumption',\n      baseValue: modelInputs.dcf?.terminalGrowthRate || 2.5,\n      isPercentage: true\n    },\n    taxRate: {\n      name: 'Tax Rate',\n      unit: '%',\n      description: 'Corporate tax rate',\n      baseValue: modelInputs.dcf?.taxRate || 25,\n      isPercentage: true\n    }\n  };\n\n  // Calculate base case valuation\n  const baseValuation = useMemo(() => {\n    return calculateDCF();\n  }, [data, modelInputs, calculateDCF]);\n\n  // Generate sensitivity analysis data\n  const sensitivityResults = useMemo(() => {\n    const results = {};\n    \n    sensitivityConfig.variables.forEach(variable => {\n      const range = sensitivityConfig.ranges[variable];\n      const variableDef = variableDefinitions[variable];\n      \n      if (!range || !variableDef) return;\n      \n      const steps = 9; // Number of data points\n      const stepSize = (range.max - range.min) / (steps - 1);\n      const dataPoints = [];\n      \n      for (let i = 0; i < steps; i++) {\n        const value = range.min + (stepSize * i);\n        \n        // Create modified DCF inputs based on variable type\n        let modifiedData = { ...data };\n        let dcfInputs = {\n          ...modelInputs.dcf,\n          [variable]: variableDef.isPercentage ? value : value\n        };\n        \n        // For revenue and margin variables, we need to simulate the impact\n        if (variable === 'revenue' || variable === 'grossMargin') {\n          // Create a copy of the income statement with modified values\n          const incomeStatement = { ...data.statements.incomeStatement };\n          \n          if (variable === 'revenue') {\n            // Apply revenue growth change across periods\n            const baseRevenue = incomeStatement.totalRevenue || {};\n            const modifiedRevenue = {};\n            \n            Object.keys(baseRevenue).forEach(periodIndex => {\n              const index = parseInt(periodIndex);\n              if (index === 0) {\n                modifiedRevenue[periodIndex] = baseRevenue[periodIndex];\n              } else {\n                const growthRate = 1 + (value / 100);\n                modifiedRevenue[periodIndex] = baseRevenue[0] * Math.pow(growthRate, index);\n              }\n            });\n            \n            incomeStatement.totalRevenue = modifiedRevenue;\n          }\n          \n          if (variable === 'grossMargin') {\n            // Apply margin change to operating income\n            const baseOperating = incomeStatement.operatingIncome || {};\n            const baseRevenue = incomeStatement.totalRevenue || {};\n            const modifiedOperating = {};\n            \n            Object.keys(baseOperating).forEach(periodIndex => {\n              const revenue = baseRevenue[periodIndex] || 0;\n              const originalIncome = baseOperating[periodIndex] || 0;\n              if (revenue > 0) {\n                const baseMargin = originalIncome / revenue;\n                const adjustedMargin = baseMargin + (value / 100);\n                modifiedOperating[periodIndex] = revenue * adjustedMargin;\n              } else {\n                modifiedOperating[periodIndex] = originalIncome;\n              }\n            });\n            \n            incomeStatement.operatingIncome = modifiedOperating;\n          }\n          \n          modifiedData = {\n            ...data,\n            statements: {\n              ...data.statements,\n              incomeStatement\n            }\n          };\n        }\n        \n        // Use a temporary calculateDCF with modified inputs\n        const tempCalculateDCF = () => {\n          try {\n            const dcfParams = {\n              discountRate: dcfInputs.discountRate || 10,\n              terminalGrowthRate: dcfInputs.terminalGrowthRate || 2.5,\n              projectionYears: dcfInputs.projectionYears || 5,\n              taxRate: dcfInputs.taxRate || 25\n            };\n            \n            const sourceData = modifiedData;\n            const operatingIncomeData = sourceData.statements.incomeStatement.operatingIncome || {};\n            \n            // Extract operating incomes from object structure\n            let operatingIncomes = [];\n            Object.keys(operatingIncomeData).forEach(periodKey => {\n              const index = parseInt(periodKey);\n              if (index >= 0) {\n                operatingIncomes.push(operatingIncomeData[periodKey] || 0);\n              }\n            });\n            \n            if (operatingIncomes.length === 0) return { enterpriseValue: 0, equityValue: 0 };\n\n            let presentValue = 0;\n            const discountFactor = 1 + (dcfParams.discountRate / 100);\n\n            // Use available periods for projections\n            operatingIncomes.forEach((income, index) => {\n              if (index > 0 && index <= dcfParams.projectionYears) {\n                const afterTaxIncome = income * (1 - dcfParams.taxRate / 100);\n                const pv = afterTaxIncome / Math.pow(discountFactor, index);\n                presentValue += pv;\n              }\n            });\n\n            const lastYearIncome = operatingIncomes[operatingIncomes.length - 1] || 0;\n            const terminalCashFlow = lastYearIncome * (1 + dcfParams.terminalGrowthRate / 100) * (1 - dcfParams.taxRate / 100);\n            const terminalValue = terminalCashFlow / ((dcfParams.discountRate - dcfParams.terminalGrowthRate) / 100);\n            const presentTerminalValue = terminalValue / Math.pow(discountFactor, dcfParams.projectionYears);\n\n          const enterpriseValue = presentValue + presentTerminalValue;\n          \n          return {\n            enterpriseValue,\n            equityValue: enterpriseValue,\n            presentValueOperations: presentValue,\n            presentValueTerminal: presentTerminalValue,\n            terminalValue\n          };\n          } catch (error) {\n            console.error('DCF calculation error:', error);\n            return { enterpriseValue: 0, equityValue: 0 };\n          }\n        };\n        \n        const result = tempCalculateDCF();\n        \n        dataPoints.push({\n          variable: value,\n          valuation: result.enterpriseValue,\n          changeFromBase: ((result.enterpriseValue - baseValuation.enterpriseValue) / baseValuation.enterpriseValue) * 100\n        });\n      }\n      \n      results[variable] = {\n        definition: variableDef,\n        range: range,\n        dataPoints: dataPoints\n      };\n    });\n    \n    return results;\n  }, [data, modelInputs, sensitivityConfig, baseValuation, calculateDCF]);\n\n  // Tornado chart data (impact ranking)\n  const tornadoData = useMemo(() => {\n    return Object.entries(sensitivityResults).map(([variable, result]) => {\n      const maxImpact = Math.max(...result.dataPoints.map(d => Math.abs(d.changeFromBase)));\n      return {\n        variable,\n        definition: result.definition,\n        maxImpact,\n        positiveImpact: Math.max(...result.dataPoints.map(d => d.changeFromBase)),\n        negativeImpact: Math.min(...result.dataPoints.map(d => d.changeFromBase))\n      };\n    }).sort((a, b) => b.maxImpact - a.maxImpact);\n  }, [sensitivityResults]);\n\n  const updateSensitivityRange = (variable, field, value) => {\n    const updatedRanges = {\n      ...sensitivityConfig.ranges,\n      [variable]: {\n        ...sensitivityConfig.ranges[variable],\n        [field]: parseFloat(value)\n      }\n    };\n    onModelInputChange('sensitivity', 'ranges', updatedRanges);\n  };\n\n  const addVariable = (variableName) => {\n    if (!sensitivityConfig.variables.includes(variableName) && variableDefinitions[variableName]) {\n      const updatedVariables = [...sensitivityConfig.variables, variableName];\n      const updatedRanges = {\n        ...sensitivityConfig.ranges,\n        [variableName]: { min: -10, max: 10 }\n      };\n      onModelInputChange('sensitivity', 'variables', updatedVariables);\n      onModelInputChange('sensitivity', 'ranges', updatedRanges);\n    }\n  };\n\n  const removeVariable = (variableName) => {\n    const updatedVariables = sensitivityConfig.variables.filter(v => v !== variableName);\n    const { [variableName]: removed, ...updatedRanges } = sensitivityConfig.ranges;\n    onModelInputChange('sensitivity', 'variables', updatedVariables);\n    onModelInputChange('sensitivity', 'ranges', updatedRanges);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <p className=\"text-gray-600 mb-4\">\n            Analyze how changes in key variables impact enterprise valuation. \n            Higher sensitivity indicates greater risk and importance for due diligence.\n          </p>\n          <div className=\"flex items-center gap-4 text-sm\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-3 h-3 bg-blue-500 rounded\"></div>\n              <span>Base Case: {formatCurrency(baseValuation.enterpriseValue)}</span>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Activity size={14} />\n              <span>{sensitivityConfig.variables.length} variables analyzed</span>\n            </div>\n          </div>\n        </div>\n        <button\n          className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2\"\n        >\n          <Settings size={16} />\n          Configure\n        </button>\n      </div>\n\n      {/* Tornado Chart */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        <h4 className=\"font-semibold text-lg mb-4 flex items-center gap-2\">\n          <BarChart3 size={20} />\n          Impact Ranking (Tornado Chart)\n        </h4>\n        \n        <div className=\"space-y-3\">\n          {tornadoData.map((item, index) => (\n            <div key={item.variable} className=\"relative\">\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-sm font-medium\">{index + 1}. {item.definition.name}</span>\n                <span className=\"text-xs text-gray-500\">{item.maxImpact.toFixed(1)}%</span>\n              </div>\n              \n              <div className=\"relative h-8 bg-gray-100 rounded\">\n                {/* Negative impact bar */}\n                <div \n                  className=\"absolute left-1/2 h-full bg-red-400 rounded-l\"\n                  style={{\n                    width: `${Math.abs(item.negativeImpact) / Math.max(Math.abs(item.negativeImpact), item.positiveImpact) * 50}%`,\n                    transform: 'translateX(-100%)'\n                  }}\n                />\n                \n                {/* Positive impact bar */}\n                <div \n                  className=\"absolute left-1/2 h-full bg-green-400 rounded-r\"\n                  style={{\n                    width: `${item.positiveImpact / Math.max(Math.abs(item.negativeImpact), item.positiveImpact) * 50}%`\n                  }}\n                />\n                \n                {/* Center line */}\n                <div className=\"absolute left-1/2 top-0 bottom-0 w-0.5 bg-gray-400 transform -translate-x-0.5\" />\n                \n                {/* Labels */}\n                <div className=\"absolute inset-0 flex items-center justify-between px-2 text-xs font-medium text-white\">\n                  <span>{item.negativeImpact.toFixed(1)}%</span>\n                  <span>+{item.positiveImpact.toFixed(1)}%</span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Variable Configuration */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        <h4 className=\"font-semibold text-lg mb-4\">Variable Configuration</h4>\n        \n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {sensitivityConfig.variables.map(variable => {\n            const result = sensitivityResults[variable];\n            if (!result) return null;\n            \n            return (\n              <div key={variable} className=\"border rounded-lg p-4\">\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div>\n                    <h6 className=\"font-medium\">{result.definition.name}</h6>\n                    <p className=\"text-xs text-gray-500\">{result.definition.description}</p>\n                  </div>\n                  <button\n                    onClick={() => removeVariable(variable)}\n                    className=\"text-red-500 hover:bg-red-50 p-1 rounded\"\n                  >\n                    <Minus size={16} />\n                  </button>\n                </div>\n                \n                <div className=\"grid grid-cols-2 gap-3 mb-3\">\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                      Min Value ({result.definition.unit})\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={result.range.min}\n                      onChange={(e) => updateSensitivityRange(variable, 'min', e.target.value)}\n                      className=\"w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-medium text-gray-700 mb-1\">\n                      Max Value ({result.definition.unit})\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={result.range.max}\n                      onChange={(e) => updateSensitivityRange(variable, 'max', e.target.value)}\n                      className=\"w-full px-2 py-1 border rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                    />\n                  </div>\n                </div>\n                \n                {/* Mini chart */}\n                <div className=\"h-16 bg-gray-50 rounded p-2\">\n                  <div className=\"text-xs text-gray-500 mb-1\">Valuation Sensitivity</div>\n                  <div className=\"flex items-end justify-between h-8\">\n                    {result.dataPoints.map((point, index) => (\n                      <div\n                        key={index}\n                        className={`w-1 rounded-t ${\n                          point.changeFromBase > 0 ? 'bg-green-400' : \n                          point.changeFromBase < 0 ? 'bg-red-400' : 'bg-blue-400'\n                        }`}\n                        style={{\n                          height: `${Math.abs(point.changeFromBase) / 50 * 100}%`,\n                          minHeight: '2px'\n                        }}\n                        title={`${point.variable}${result.definition.unit}: ${formatCurrency(point.valuation)}`}\n                      />\n                    ))}\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n          \n          {/* Add Variable */}\n          <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center\">\n            <div className=\"text-center\">\n              <Plus size={24} className=\"mx-auto mb-2 text-gray-400\" />\n              <p className=\"text-sm text-gray-500 mb-3\">Add Variable</p>\n              <div className=\"space-y-2\">\n                {Object.keys(variableDefinitions)\n                  .filter(v => !sensitivityConfig.variables.includes(v))\n                  .map(variable => (\n                    <button\n                      key={variable}\n                      onClick={() => addVariable(variable)}\n                      className=\"block w-full px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors\"\n                    >\n                      {variableDefinitions[variable].name}\n                    </button>\n                  ))\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Detailed Analysis */}\n      {selectedVariable && sensitivityResults[selectedVariable] && (\n        <div className=\"bg-white rounded-lg border p-6\">\n          <h4 className=\"font-semibold text-lg mb-4\">\n            Detailed Analysis: {sensitivityResults[selectedVariable].definition.name}\n          </h4>\n          \n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div>\n              <h6 className=\"font-medium mb-3\">Data Points</h6>\n              <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                {sensitivityResults[selectedVariable].dataPoints.map((point, index) => (\n                  <div key={index} className=\"flex justify-between items-center text-sm p-2 bg-gray-50 rounded\">\n                    <span>{point.variable}{sensitivityResults[selectedVariable].definition.unit}</span>\n                    <span className=\"font-medium\">{formatCurrency(point.valuation)}</span>\n                    <span className={`font-medium ${\n                      point.changeFromBase > 0 ? 'text-green-600' : \n                      point.changeFromBase < 0 ? 'text-red-600' : 'text-gray-600'\n                    }`}>\n                      {point.changeFromBase > 0 ? '+' : ''}{point.changeFromBase.toFixed(1)}%\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            <div>\n              <h6 className=\"font-medium mb-3\">Key Statistics</h6>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Range Impact:</span>\n                  <span className=\"font-medium\">\n                    {Math.max(...sensitivityResults[selectedVariable].dataPoints.map(d => Math.abs(d.changeFromBase))).toFixed(1)}%\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Max Upside:</span>\n                  <span className=\"font-medium text-green-600\">\n                    +{Math.max(...sensitivityResults[selectedVariable].dataPoints.map(d => d.changeFromBase)).toFixed(1)}%\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm text-gray-600\">Max Downside:</span>\n                  <span className=\"font-medium text-red-600\">\n                    {Math.min(...sensitivityResults[selectedVariable].dataPoints.map(d => d.changeFromBase)).toFixed(1)}%\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SensitivityAnalysis;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  LineChart, Line, BarChart, Bar, AreaChart, Area, PieChart, Pie, Cell,\n  XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer \n} from 'recharts';\nimport { TrendingUp, BarChart3, PieChart as PieChartIcon, Activity, Eye, EyeOff } from 'lucide-react';\n\nconst DataVisualization = ({ \n  dcfData, \n  sensitivityData, \n  scenarioData, \n  formatCurrency, \n  formatPercent \n}) => {\n  const [activeChart, setActiveChart] = useState('dcf-waterfall');\n  const [showDetails, setShowDetails] = useState(true);\n\n  // Chart configuration\n  const chartTypes = [\n    { id: 'dcf-waterfall', label: 'DCF Waterfall', icon: BarChart3, category: 'dcf' },\n    { id: 'cashflow-trend', label: 'Cash Flow Trend', icon: TrendingUp, category: 'dcf' },\n    { id: 'sensitivity-tornado', label: 'Sensitivity Tornado', icon: Activity, category: 'sensitivity' },\n    { id: 'scenario-distribution', label: 'Scenario Distribution', icon: PieChartIcon, category: 'scenario' },\n    { id: 'valuation-bridge', label: 'Valuation Bridge', icon: BarChart3, category: 'combined' }\n  ];\n\n  // Prepare DCF Waterfall Data\n  const dcfWaterfallData = useMemo(() => {\n    if (!dcfData?.years) return [];\n    \n    let cumulativeValue = 0;\n    const data = [];\n    \n    // Add each year's contribution\n    dcfData.years.forEach((year, index) => {\n      const startValue = cumulativeValue;\n      cumulativeValue += year.presentValue;\n      \n      data.push({\n        name: `Year ${year.year}`,\n        value: year.presentValue,\n        cumulative: cumulativeValue,\n        start: startValue,\n        freeCashFlow: year.freeCashFlow,\n        category: 'operations'\n      });\n    });\n    \n    // Add terminal value\n    const terminalStart = cumulativeValue;\n    cumulativeValue += dcfData.presentValueTerminal;\n    \n    data.push({\n      name: 'Terminal Value',\n      value: dcfData.presentValueTerminal,\n      cumulative: cumulativeValue,\n      start: terminalStart,\n      category: 'terminal'\n    });\n    \n    return data;\n  }, [dcfData]);\n\n  // Prepare Cash Flow Trend Data\n  const cashFlowTrendData = useMemo(() => {\n    if (!dcfData?.years) return [];\n    \n    return dcfData.years.map((year, index) => ({\n      year: `Year ${year.year}`,\n      freeCashFlow: year.freeCashFlow,\n      presentValue: year.presentValue,\n      revenue: year.revenue,\n      operatingIncome: year.operatingIncome,\n      workingCapitalChange: year.workingCapitalChange,\n      capex: Math.abs(year.capex)\n    }));\n  }, [dcfData]);\n\n  // Prepare Sensitivity Tornado Data\n  const sensitivityTornadoData = useMemo(() => {\n    if (!sensitivityData) return [];\n    \n    return Object.entries(sensitivityData).map(([variable, result]) => {\n      const maxUpside = Math.max(...result.dataPoints.map(d => d.changeFromBase));\n      const maxDownside = Math.min(...result.dataPoints.map(d => d.changeFromBase));\n      \n      return {\n        variable: result.definition.name,\n        upside: maxUpside,\n        downside: Math.abs(maxDownside),\n        range: maxUpside - maxDownside\n      };\n    }).sort((a, b) => b.range - a.range);\n  }, [sensitivityData]);\n\n  // Prepare Scenario Distribution Data\n  const scenarioDistributionData = useMemo(() => {\n    if (!scenarioData?.length) return [];\n    \n    return scenarioData.map((scenario, index) => ({\n      name: scenario.name,\n      value: scenario.enterpriseValue,\n      probability: scenario.probability,\n      weightedValue: scenario.weightedValue,\n      fill: `hsl(${(index * 137.5) % 360}, 70%, 50%)`\n    }));\n  }, [scenarioData]);\n\n  // Custom tooltip for different chart types\n  const CustomTooltip = ({ active, payload, label, chartType }) => {\n    if (!active || !payload || !payload.length) return null;\n\n    const formatValue = (value, key) => {\n      if (key?.includes('Percent') || key?.includes('Rate')) {\n        return formatPercent(value);\n      }\n      return formatCurrency(value);\n    };\n\n    return (\n      <div className=\"bg-white p-3 border rounded-lg shadow-lg\">\n        <p className=\"font-medium text-gray-800\">{label}</p>\n        {payload.map((entry, index) => (\n          <p key={index} style={{ color: entry.color }} className=\"text-sm\">\n            {`${entry.dataKey}: ${formatValue(entry.value, entry.dataKey)}`}\n          </p>\n        ))}\n      </div>\n    );\n  };\n\n  // DCF Waterfall Chart\n  const DCFWaterfallChart = () => (\n    <ResponsiveContainer width=\"100%\" height={400}>\n      <BarChart data={dcfWaterfallData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey=\"name\" />\n        <YAxis tickFormatter={(value) => formatCurrency(value)} />\n        <Tooltip content={<CustomTooltip chartType=\"waterfall\" />} />\n        <Bar dataKey=\"value\" fill=\"#3B82F6\" />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n\n  // Cash Flow Trend Chart\n  const CashFlowTrendChart = () => (\n    <ResponsiveContainer width=\"100%\" height={400}>\n      <LineChart data={cashFlowTrendData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey=\"year\" />\n        <YAxis tickFormatter={(value) => formatCurrency(value)} />\n        <Tooltip content={<CustomTooltip chartType=\"trend\" />} />\n        <Legend />\n        <Line type=\"monotone\" dataKey=\"freeCashFlow\" stroke=\"#10B981\" strokeWidth={3} name=\"Free Cash Flow\" />\n        <Line type=\"monotone\" dataKey=\"presentValue\" stroke=\"#3B82F6\" strokeWidth={2} name=\"Present Value\" />\n        <Line type=\"monotone\" dataKey=\"revenue\" stroke=\"#8B5CF6\" strokeWidth={2} name=\"Revenue\" />\n      </LineChart>\n    </ResponsiveContainer>\n  );\n\n  // Sensitivity Tornado Chart\n  const SensitivityTornadoChart = () => (\n    <ResponsiveContainer width=\"100%\" height={400}>\n      <BarChart \n        data={sensitivityTornadoData} \n        layout=\"horizontal\"\n        margin={{ top: 20, right: 30, left: 100, bottom: 5 }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis type=\"number\" tickFormatter={(value) => `${value.toFixed(1)}%`} />\n        <YAxis type=\"category\" dataKey=\"variable\" />\n        <Tooltip \n          formatter={(value, name) => [`${value.toFixed(1)}%`, name]}\n          labelFormatter={(label) => `Variable: ${label}`}\n        />\n        <Bar dataKey=\"upside\" fill=\"#10B981\" name=\"Upside Impact\" />\n        <Bar dataKey=\"downside\" fill=\"#EF4444\" name=\"Downside Impact\" />\n      </BarChart>\n    </ResponsiveContainer>\n  );\n\n  // Scenario Distribution Chart\n  const ScenarioDistributionChart = () => (\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n      <ResponsiveContainer width=\"100%\" height={300}>\n        <PieChart>\n          <Pie\n            data={scenarioDistributionData}\n            cx=\"50%\"\n            cy=\"50%\"\n            outerRadius={80}\n            dataKey=\"probability\"\n            label={({ name, probability }) => `${name}: ${probability}%`}\n          >\n            {scenarioDistributionData.map((entry, index) => (\n              <Cell key={`cell-${index}`} fill={entry.fill} />\n            ))}\n          </Pie>\n          <Tooltip formatter={(value) => `${value}%`} />\n        </PieChart>\n      </ResponsiveContainer>\n      \n      <ResponsiveContainer width=\"100%\" height={300}>\n        <BarChart data={scenarioDistributionData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" />\n          <YAxis tickFormatter={(value) => formatCurrency(value)} />\n          <Tooltip content={<CustomTooltip chartType=\"scenario\" />} />\n          <Bar dataKey=\"value\" fill=\"#8B5CF6\" name=\"Enterprise Value\" />\n        </BarChart>\n      </ResponsiveContainer>\n    </div>\n  );\n\n  // Valuation Bridge Chart\n  const ValuationBridgeChart = () => {\n    const bridgeData = [\n      { name: 'PV of Operations', value: dcfData?.cumulativePV || 0, type: 'positive' },\n      { name: 'PV of Terminal', value: dcfData?.presentValueTerminal || 0, type: 'positive' },\n      { name: 'Enterprise Value', value: dcfData?.enterpriseValue || 0, type: 'total' }\n    ];\n\n    return (\n      <ResponsiveContainer width=\"100%\" height={400}>\n        <BarChart data={bridgeData} margin={{ top: 20, right: 30, left: 20, bottom: 5 }}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" />\n          <YAxis tickFormatter={(value) => formatCurrency(value)} />\n          <Tooltip content={<CustomTooltip chartType=\"bridge\" />} />\n          <Bar \n            dataKey=\"value\" \n            fill={(entry) => entry.type === 'total' ? '#1F2937' : '#3B82F6'}\n          />\n        </BarChart>\n      </ResponsiveContainer>\n    );\n  };\n\n  const renderChart = () => {\n    switch (activeChart) {\n      case 'dcf-waterfall':\n        return <DCFWaterfallChart />;\n      case 'cashflow-trend':\n        return <CashFlowTrendChart />;\n      case 'sensitivity-tornado':\n        return <SensitivityTornadoChart />;\n      case 'scenario-distribution':\n        return <ScenarioDistributionChart />;\n      case 'valuation-bridge':\n        return <ValuationBridgeChart />;\n      default:\n        return <DCFWaterfallChart />;\n    }\n  };\n\n  const getChartDescription = () => {\n    switch (activeChart) {\n      case 'dcf-waterfall':\n        return 'Shows the contribution of each year\\'s cash flows and terminal value to total enterprise value.';\n      case 'cashflow-trend':\n        return 'Displays the trend of free cash flows, present values, and key financial metrics over time.';\n      case 'sensitivity-tornado':\n        return 'Illustrates how changes in key variables impact enterprise value, ranked by sensitivity.';\n      case 'scenario-distribution':\n        return 'Compares different scenarios by probability weights and resulting enterprise values.';\n      case 'valuation-bridge':\n        return 'Breaks down enterprise value into operating value and terminal value components.';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h3 className=\"text-xl font-semibold mb-2 flex items-center gap-2\">\n            <BarChart3 size={20} />\n            Data Visualization\n          </h3>\n          <p className=\"text-gray-600\">\n            Interactive charts and graphs to visualize valuation results and sensitivity analysis.\n          </p>\n        </div>\n        <button\n          onClick={() => setShowDetails(!showDetails)}\n          className={`px-3 py-2 rounded-lg text-sm transition-colors flex items-center gap-2 ${\n            showDetails ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'\n          }`}\n        >\n          {showDetails ? <EyeOff size={14} /> : <Eye size={14} />}\n          {showDetails ? 'Hide Details' : 'Show Details'}\n        </button>\n      </div>\n\n      {/* Chart Type Selector */}\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3\">\n        {chartTypes.map((chart) => {\n          const Icon = chart.icon;\n          return (\n            <motion.button\n              key={chart.id}\n              onClick={() => setActiveChart(chart.id)}\n              className={`p-3 rounded-lg border-2 transition-all text-center ${\n                activeChart === chart.id\n                  ? 'border-blue-500 bg-blue-50 text-blue-700'\n                  : 'border-gray-200 bg-white hover:border-gray-300 text-gray-700'\n              }`}\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n              <Icon size={20} className=\"mx-auto mb-2\" />\n              <div className=\"text-xs font-medium\">{chart.label}</div>\n            </motion.button>\n          );\n        })}\n      </div>\n\n      {/* Chart Container */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h4 className=\"font-semibold text-lg\">\n            {chartTypes.find(c => c.id === activeChart)?.label}\n          </h4>\n          {showDetails && (\n            <span className=\"text-sm text-gray-500\">\n              {getChartDescription()}\n            </span>\n          )}\n        </div>\n        \n        <div className=\"min-h-[400px]\">\n          {renderChart()}\n        </div>\n      </div>\n\n      {/* Chart Insights */}\n      {showDetails && (\n        <div className=\"bg-white rounded-lg border p-6\">\n          <h4 className=\"font-semibold text-lg mb-4\">Key Insights</h4>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {activeChart === 'dcf-waterfall' && (\n              <>\n                <div className=\"p-4 bg-blue-50 rounded-lg\">\n                  <div className=\"text-sm text-blue-600 font-medium\">Operations Contribution</div>\n                  <div className=\"text-lg font-bold text-blue-800\">\n                    {dcfData?.cumulativePV ? \n                      `${((dcfData.cumulativePV / dcfData.enterpriseValue) * 100).toFixed(1)}%` : \n                      'N/A'\n                    }\n                  </div>\n                </div>\n                <div className=\"p-4 bg-purple-50 rounded-lg\">\n                  <div className=\"text-sm text-purple-600 font-medium\">Terminal Contribution</div>\n                  <div className=\"text-lg font-bold text-purple-800\">\n                    {dcfData?.presentValueTerminal ? \n                      `${((dcfData.presentValueTerminal / dcfData.enterpriseValue) * 100).toFixed(1)}%` : \n                      'N/A'\n                    }\n                  </div>\n                </div>\n                <div className=\"p-4 bg-green-50 rounded-lg\">\n                  <div className=\"text-sm text-green-600 font-medium\">Avg. Annual FCF</div>\n                  <div className=\"text-lg font-bold text-green-800\">\n                    {dcfData?.freeCashFlows ? \n                      formatCurrency(dcfData.freeCashFlows.reduce((a, b) => a + b, 0) / dcfData.freeCashFlows.length) : \n                      'N/A'\n                    }\n                  </div>\n                </div>\n              </>\n            )}\n\n            {activeChart === 'sensitivity-tornado' && sensitivityTornadoData.length > 0 && (\n              <>\n                <div className=\"p-4 bg-red-50 rounded-lg\">\n                  <div className=\"text-sm text-red-600 font-medium\">Highest Risk Variable</div>\n                  <div className=\"text-lg font-bold text-red-800\">\n                    {sensitivityTornadoData[0]?.variable}\n                  </div>\n                  <div className=\"text-sm text-red-600\">\n                    {sensitivityTornadoData[0]?.range.toFixed(1)}% impact\n                  </div>\n                </div>\n                <div className=\"p-4 bg-yellow-50 rounded-lg\">\n                  <div className=\"text-sm text-yellow-600 font-medium\">Medium Risk Variables</div>\n                  <div className=\"text-lg font-bold text-yellow-800\">\n                    {sensitivityTornadoData.slice(1, 3).map(v => v.variable).join(', ')}\n                  </div>\n                </div>\n                <div className=\"p-4 bg-green-50 rounded-lg\">\n                  <div className=\"text-sm text-green-600 font-medium\">Lowest Risk Variable</div>\n                  <div className=\"text-lg font-bold text-green-800\">\n                    {sensitivityTornadoData[sensitivityTornadoData.length - 1]?.variable}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DataVisualization;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Calculator, TrendingUp, DollarSign, Percent, Info, BookOpen, Settings } from 'lucide-react';\n\nconst WACCCalculator = ({ modelInputs, onModelInputChange, formatPercent }) => {\n  const [showDetails, setShowDetails] = useState(true);\n  const [activeTab, setActiveTab] = useState('inputs');\n\n  // WACC calculation inputs with defaults\n  const waccInputs = modelInputs.dcf.wacc || {\n    // Cost of Equity (CAPM)\n    riskFreeRate: 4.5,\n    marketRiskPremium: 6.0,\n    beta: 1.2,\n    smallCompanyPremium: 3.0,\n    companySpecificRisk: 2.0,\n    \n    // Cost of Debt\n    debtInterestRate: 6.5,\n    taxRate: 25,\n    \n    // Capital Structure\n    marketValueEquity: 100000,\n    marketValueDebt: 30000,\n    \n    // Alternative methods\n    buildUpMethod: {\n      riskFreeRate: 4.5,\n      equityRiskPremium: 6.0,\n      sizeRiskPremium: 3.0,\n      industryRiskPremium: 2.0,\n      companySpecificRisk: 2.0\n    },\n    \n    // Industry benchmarks\n    industryWACC: 10.5,\n    industryBeta: 1.1,\n    industryDebtEquityRatio: 0.3\n  };\n\n  // Calculate WACC components\n  const waccCalculation = useMemo(() => {\n    const inputs = { ...waccInputs, ...modelInputs.dcf.wacc };\n    \n    // Cost of Equity - CAPM Method\n    const costOfEquityCAPM = inputs.riskFreeRate + \n                            (inputs.beta * inputs.marketRiskPremium) + \n                            inputs.smallCompanyPremium + \n                            inputs.companySpecificRisk;\n    \n    // Cost of Equity - Build-up Method\n    const costOfEquityBuildUp = inputs.buildUpMethod.riskFreeRate +\n                               inputs.buildUpMethod.equityRiskPremium +\n                               inputs.buildUpMethod.sizeRiskPremium +\n                               inputs.buildUpMethod.industryRiskPremium +\n                               inputs.buildUpMethod.companySpecificRisk;\n    \n    // Cost of Debt (after-tax)\n    const costOfDebtAfterTax = inputs.debtInterestRate * (1 - inputs.taxRate / 100);\n    \n    // Capital structure weights\n    const totalCapital = inputs.marketValueEquity + inputs.marketValueDebt;\n    const equityWeight = inputs.marketValueEquity / totalCapital;\n    const debtWeight = inputs.marketValueDebt / totalCapital;\n    \n    // WACC calculations\n    const waccCAPM = (costOfEquityCAPM / 100 * equityWeight) + \n                     (costOfDebtAfterTax / 100 * debtWeight);\n    \n    const waccBuildUp = (costOfEquityBuildUp / 100 * equityWeight) + \n                        (costOfDebtAfterTax / 100 * debtWeight);\n    \n    // Risk-adjusted WACC (average of methods)\n    const finalWACC = (waccCAPM + waccBuildUp) / 2;\n    \n    return {\n      costOfEquityCAPM,\n      costOfEquityBuildUp,\n      costOfDebtAfterTax,\n      equityWeight: equityWeight * 100,\n      debtWeight: debtWeight * 100,\n      waccCAPM: waccCAPM * 100,\n      waccBuildUp: waccBuildUp * 100,\n      finalWACC: finalWACC * 100,\n      totalCapital,\n      debtToEquityRatio: inputs.marketValueDebt / inputs.marketValueEquity\n    };\n  }, [waccInputs, modelInputs.dcf.wacc]);\n\n  const updateWACCInput = (field, value) => {\n    const updatedWACC = {\n      ...waccInputs,\n      ...modelInputs.dcf.wacc,\n      [field]: parseFloat(value) || 0\n    };\n    onModelInputChange('dcf', 'wacc', updatedWACC);\n  };\n\n  const updateBuildUpInput = (field, value) => {\n    const updatedWACC = {\n      ...waccInputs,\n      ...modelInputs.dcf.wacc,\n      buildUpMethod: {\n        ...waccInputs.buildUpMethod,\n        ...modelInputs.dcf.wacc?.buildUpMethod,\n        [field]: parseFloat(value) || 0\n      }\n    };\n    onModelInputChange('dcf', 'wacc', updatedWACC);\n  };\n\n  const applyWACCToDCF = (waccValue) => {\n    onModelInputChange('dcf', 'discountRate', waccValue);\n  };\n\n  const tabs = [\n    { id: 'inputs', label: 'Inputs', icon: Settings },\n    { id: 'calculation', label: 'Calculation', icon: Calculator },\n    { id: 'benchmarks', label: 'Benchmarks', icon: TrendingUp }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h3 className=\"text-xl font-semibold mb-2 flex items-center gap-2\">\n            <Calculator size={20} />\n            WACC Calculator\n          </h3>\n          <p className=\"text-gray-600\">\n            Professional weighted average cost of capital calculation using CAPM and build-up methods.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => applyWACCToDCF(waccCalculation.finalWACC)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\n          >\n            Apply to DCF\n          </button>\n          <button\n            onClick={() => setShowDetails(!showDetails)}\n            className={`px-3 py-2 rounded-lg text-sm transition-colors ${\n              showDetails ? 'bg-gray-200 text-gray-700' : 'bg-gray-100 text-gray-600'\n            }`}\n          >\n            {showDetails ? 'Hide Details' : 'Show Details'}\n          </button>\n        </div>\n      </div>\n\n      {/* Key Results */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <motion.div \n          className=\"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Percent size={20} className=\"text-blue-600\" />\n            <span className=\"text-xs text-blue-600 font-medium\">FINAL WACC</span>\n          </div>\n          <div className=\"text-2xl font-bold text-blue-800\">\n            {formatPercent(waccCalculation.finalWACC)}\n          </div>\n          <div className=\"text-sm text-blue-600 mt-1\">\n            Risk-adjusted average\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4 border border-green-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <TrendingUp size={20} className=\"text-green-600\" />\n            <span className=\"text-xs text-green-600 font-medium\">COST OF EQUITY</span>\n          </div>\n          <div className=\"text-2xl font-bold text-green-800\">\n            {formatPercent(waccCalculation.costOfEquityCAPM)}\n          </div>\n          <div className=\"text-sm text-green-600 mt-1\">\n            CAPM method\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <DollarSign size={20} className=\"text-purple-600\" />\n            <span className=\"text-xs text-purple-600 font-medium\">COST OF DEBT</span>\n          </div>\n          <div className=\"text-2xl font-bold text-purple-800\">\n            {formatPercent(waccCalculation.costOfDebtAfterTax)}\n          </div>\n          <div className=\"text-sm text-purple-600 mt-1\">\n            After-tax\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Info size={20} className=\"text-orange-600\" />\n            <span className=\"text-xs text-orange-600 font-medium\">DEBT/EQUITY</span>\n          </div>\n          <div className=\"text-2xl font-bold text-orange-800\">\n            {waccCalculation.debtToEquityRatio.toFixed(2)}x\n          </div>\n          <div className=\"text-sm text-orange-600 mt-1\">\n            Capital structure\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-lg\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all ${\n                activeTab === tab.id\n                  ? 'bg-white text-blue-600 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-800'\n              }`}\n            >\n              <Icon size={16} />\n              {tab.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        {activeTab === 'inputs' && (\n          <div className=\"space-y-6\">\n            <h4 className=\"font-semibold text-lg\">WACC Input Parameters</h4>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* Cost of Equity - CAPM */}\n              <div>\n                <h5 className=\"font-medium mb-4 text-blue-800\">Cost of Equity (CAPM Method)</h5>\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Risk-Free Rate (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.riskFreeRate || waccInputs.riskFreeRate}\n                      onChange={(e) => updateWACCInput('riskFreeRate', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">10-year Treasury rate</span>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Market Risk Premium (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.marketRiskPremium || waccInputs.marketRiskPremium}\n                      onChange={(e) => updateWACCInput('marketRiskPremium', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Expected market return - risk-free rate</span>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Beta ()\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.beta || waccInputs.beta}\n                      onChange={(e) => updateWACCInput('beta', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Systematic risk relative to market</span>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Small Company Premium (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.smallCompanyPremium || waccInputs.smallCompanyPremium}\n                      onChange={(e) => updateWACCInput('smallCompanyPremium', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Size-related risk premium</span>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Company-Specific Risk (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.companySpecificRisk || waccInputs.companySpecificRisk}\n                      onChange={(e) => updateWACCInput('companySpecificRisk', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Unsystematic risk premium</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Capital Structure & Debt */}\n              <div>\n                <h5 className=\"font-medium mb-4 text-purple-800\">Capital Structure & Cost of Debt</h5>\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Market Value of Equity ($000s)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={modelInputs.dcf.wacc?.marketValueEquity || waccInputs.marketValueEquity}\n                      onChange={(e) => updateWACCInput('marketValueEquity', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Market Value of Debt ($000s)\n                    </label>\n                    <input\n                      type=\"number\"\n                      value={modelInputs.dcf.wacc?.marketValueDebt || waccInputs.marketValueDebt}\n                      onChange={(e) => updateWACCInput('marketValueDebt', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Pre-Tax Cost of Debt (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.debtInterestRate || waccInputs.debtInterestRate}\n                      onChange={(e) => updateWACCInput('debtInterestRate', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Interest rate on debt</span>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Tax Rate (%)\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={modelInputs.dcf.wacc?.taxRate || modelInputs.dcf.taxRate}\n                      onChange={(e) => updateWACCInput('taxRate', e.target.value)}\n                      className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-xs text-gray-500\">Corporate tax rate</span>\n                  </div>\n\n                  {/* Capital Structure Summary */}\n                  <div className=\"mt-6 p-4 bg-gray-50 rounded-lg\">\n                    <h6 className=\"font-medium mb-2\">Capital Structure</h6>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span>Equity Weight:</span>\n                        <span className=\"font-medium\">{formatPercent(waccCalculation.equityWeight)}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Debt Weight:</span>\n                        <span className=\"font-medium\">{formatPercent(waccCalculation.debtWeight)}</span>\n                      </div>\n                      <div className=\"flex justify-between border-t pt-2\">\n                        <span>Total Capital:</span>\n                        <span className=\"font-medium\">${(waccCalculation.totalCapital / 1000).toFixed(0)}M</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'calculation' && (\n          <div className=\"space-y-6\">\n            <h4 className=\"font-semibold text-lg\">WACC Calculation Breakdown</h4>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n              {/* CAPM Method */}\n              <div className=\"p-6 bg-blue-50 rounded-lg border border-blue-200\">\n                <h5 className=\"font-medium mb-4 text-blue-800\">CAPM Method</h5>\n                <div className=\"space-y-3 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>Risk-Free Rate:</span>\n                    <span className=\"font-medium\">{formatPercent(modelInputs.dcf.wacc?.riskFreeRate || waccInputs.riskFreeRate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Beta  Market Risk Premium:</span>\n                    <span className=\"font-medium\">\n                      {formatPercent((modelInputs.dcf.wacc?.beta || waccInputs.beta) * (modelInputs.dcf.wacc?.marketRiskPremium || waccInputs.marketRiskPremium))}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Small Company Premium:</span>\n                    <span className=\"font-medium\">{formatPercent(modelInputs.dcf.wacc?.smallCompanyPremium || waccInputs.smallCompanyPremium)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Company-Specific Risk:</span>\n                    <span className=\"font-medium\">{formatPercent(modelInputs.dcf.wacc?.companySpecificRisk || waccInputs.companySpecificRisk)}</span>\n                  </div>\n                  <div className=\"flex justify-between border-t pt-2 font-semibold\">\n                    <span>Cost of Equity (CAPM):</span>\n                    <span>{formatPercent(waccCalculation.costOfEquityCAPM)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Build-up Method */}\n              <div className=\"p-6 bg-green-50 rounded-lg border border-green-200\">\n                <h5 className=\"font-medium mb-4 text-green-800\">Build-up Method</h5>\n                <div className=\"space-y-3 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>Risk-Free Rate:</span>\n                    <span className=\"font-medium\">{formatPercent(waccInputs.buildUpMethod.riskFreeRate)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Equity Risk Premium:</span>\n                    <span className=\"font-medium\">{formatPercent(waccInputs.buildUpMethod.equityRiskPremium)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Size Risk Premium:</span>\n                    <span className=\"font-medium\">{formatPercent(waccInputs.buildUpMethod.sizeRiskPremium)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Industry Risk Premium:</span>\n                    <span className=\"font-medium\">{formatPercent(waccInputs.buildUpMethod.industryRiskPremium)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Company-Specific Risk:</span>\n                    <span className=\"font-medium\">{formatPercent(waccInputs.buildUpMethod.companySpecificRisk)}</span>\n                  </div>\n                  <div className=\"flex justify-between border-t pt-2 font-semibold\">\n                    <span>Cost of Equity (Build-up):</span>\n                    <span>{formatPercent(waccCalculation.costOfEquityBuildUp)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Final WACC Calculation */}\n            <div className=\"p-6 bg-gray-50 rounded-lg border\">\n              <h5 className=\"font-medium mb-4\">Final WACC Calculation</h5>\n              <div className=\"space-y-4 text-sm\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <div className=\"flex justify-between mb-2\">\n                      <span>WACC (CAPM Method):</span>\n                      <span className=\"font-medium\">{formatPercent(waccCalculation.waccCAPM)}</span>\n                    </div>\n                    <div className=\"text-xs text-gray-600\">\n                      [{formatPercent(waccCalculation.costOfEquityCAPM)}  {formatPercent(waccCalculation.equityWeight)}] + \n                      [{formatPercent(waccCalculation.costOfDebtAfterTax)}  {formatPercent(waccCalculation.debtWeight)}]\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"flex justify-between mb-2\">\n                      <span>WACC (Build-up Method):</span>\n                      <span className=\"font-medium\">{formatPercent(waccCalculation.waccBuildUp)}</span>\n                    </div>\n                    <div className=\"text-xs text-gray-600\">\n                      [{formatPercent(waccCalculation.costOfEquityBuildUp)}  {formatPercent(waccCalculation.equityWeight)}] + \n                      [{formatPercent(waccCalculation.costOfDebtAfterTax)}  {formatPercent(waccCalculation.debtWeight)}]\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"border-t pt-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-lg font-semibold\">Risk-Adjusted WACC:</span>\n                    <span className=\"text-2xl font-bold text-blue-600\">{formatPercent(waccCalculation.finalWACC)}</span>\n                  </div>\n                  <div className=\"text-xs text-gray-600 mt-1\">\n                    Average of CAPM and Build-up methods\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'benchmarks' && (\n          <div className=\"space-y-6\">\n            <h4 className=\"font-semibold text-lg\">Industry Benchmarks & Validation</h4>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"p-4 bg-blue-50 rounded-lg\">\n                <h6 className=\"font-medium text-blue-800 mb-2\">Your Company</h6>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>WACC:</span>\n                    <span className=\"font-semibold\">{formatPercent(waccCalculation.finalWACC)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Beta:</span>\n                    <span className=\"font-semibold\">{(modelInputs.dcf.wacc?.beta || waccInputs.beta).toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>D/E Ratio:</span>\n                    <span className=\"font-semibold\">{waccCalculation.debtToEquityRatio.toFixed(2)}x</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"p-4 bg-green-50 rounded-lg\">\n                <h6 className=\"font-medium text-green-800 mb-2\">Industry Average</h6>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>WACC:</span>\n                    <span className=\"font-semibold\">{formatPercent(waccInputs.industryWACC)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Beta:</span>\n                    <span className=\"font-semibold\">{waccInputs.industryBeta.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>D/E Ratio:</span>\n                    <span className=\"font-semibold\">{waccInputs.industryDebtEquityRatio.toFixed(2)}x</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"p-4 bg-yellow-50 rounded-lg\">\n                <h6 className=\"font-medium text-yellow-800 mb-2\">Variance</h6>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>WACC Diff:</span>\n                    <span className={`font-semibold ${\n                      waccCalculation.finalWACC > waccInputs.industryWACC ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {waccCalculation.finalWACC > waccInputs.industryWACC ? '+' : ''}\n                      {formatPercent(waccCalculation.finalWACC - waccInputs.industryWACC)}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Beta Diff:</span>\n                    <span className={`font-semibold ${\n                      (modelInputs.dcf.wacc?.beta || waccInputs.beta) > waccInputs.industryBeta ? 'text-red-600' : 'text-green-600'\n                    }`}>\n                      {(modelInputs.dcf.wacc?.beta || waccInputs.beta) > waccInputs.industryBeta ? '+' : ''}\n                      {((modelInputs.dcf.wacc?.beta || waccInputs.beta) - waccInputs.industryBeta).toFixed(2)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* Validation Notes */}\n            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-200\">\n              <div className=\"flex items-start gap-2\">\n                <BookOpen size={16} className=\"text-blue-600 mt-0.5\" />\n                <div>\n                  <h6 className=\"font-medium text-blue-800 mb-2\">Validation Guidelines</h6>\n                  <ul className=\"text-sm text-blue-700 space-y-1\">\n                    <li> WACC should be within 2% of industry average for similar companies</li>\n                    <li> Beta should reflect business risk relative to market (typically 0.8-1.5 for most companies)</li>\n                    <li> Cost of equity should exceed risk-free rate by at least 4-6% for private companies</li>\n                    <li> Debt/equity ratio should align with industry norms and company strategy</li>\n                    <li> Consider economic conditions and company-specific factors</li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default WACCCalculator;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Calculator, TrendingUp, DollarSign, BarChart3, Info, Settings, PieChart } from 'lucide-react';\nimport DataVisualization from './DataVisualization';\nimport WACCCalculator from './WACCCalculator';\n\nconst AdvancedDCF = ({ data, modelInputs, onModelInputChange, formatCurrency, formatPercent }) => {\n  const [showDetails, setShowDetails] = useState(false);\n  const [showAssumptions, setShowAssumptions] = useState(true);\n  const [activeTab, setActiveTab] = useState('results');\n\n  // Enhanced DCF calculation with working capital\n  const advancedDCFResults = useMemo(() => {\n    const { discountRate, terminalGrowthRate, projectionYears, taxRate } = modelInputs.dcf;\n    const statements = data.statements;\n    \n    // Working capital assumptions (if not provided, use defaults)\n    const workingCapitalAssumptions = modelInputs.dcf.workingCapital || {\n      receivablesDays: 45,\n      inventoryDays: 60,\n      payablesDays: 30,\n      receivablesGrowth: 2, // % of revenue\n      inventoryGrowth: 1.5, // % of revenue\n      payablesGrowth: 1.8 // % of revenue\n    };\n\n    // Capex assumptions\n    const capexAssumptions = modelInputs.dcf.capex || {\n      capexAsPercentOfRevenue: 3.5,\n      depreciationRate: 7, // years\n      maintenanceCapex: 2.0 // % of revenue\n    };\n\n    const results = {\n      years: [],\n      freeCashFlows: [],\n      presentValues: [],\n      workingCapitalChanges: [],\n      capexAmounts: [],\n      unleveredFreeCashFlow: [],\n      cumulativePV: 0,\n      terminalValue: 0,\n      presentValueTerminal: 0,\n      enterpriseValue: 0,\n      equityValue: 0,\n      impliedShare: 0\n    };\n\n    // Base year revenue for calculations\n    const baseRevenue = statements.incomeStatement.totalRevenue?.[0] || 100000;\n\n    for (let year = 1; year <= projectionYears; year++) {\n      const yearData = {\n        year,\n        revenue: statements.incomeStatement.totalRevenue?.[year] || 0,\n        operatingIncome: statements.incomeStatement.operatingIncome?.[year] || 0,\n        nopat: 0, // Net Operating Profit After Tax\n        workingCapitalChange: 0,\n        capex: 0,\n        depreciation: 0,\n        freeCashFlow: 0,\n        presentValue: 0\n      };\n\n      // NOPAT calculation\n      yearData.nopat = yearData.operatingIncome * (1 - taxRate / 100);\n\n      // Working capital calculation\n      const currentRevenue = yearData.revenue;\n      const previousRevenue = year > 1 ? (statements.incomeStatement.totalRevenue?.[year - 1] || 0) : baseRevenue;\n      \n      // Calculate working capital components\n      const currentReceivables = (currentRevenue * workingCapitalAssumptions.receivablesDays) / 365;\n      const currentInventory = (currentRevenue * workingCapitalAssumptions.inventoryDays) / 365;\n      const currentPayables = (currentRevenue * workingCapitalAssumptions.payablesDays) / 365;\n      \n      const previousReceivables = (previousRevenue * workingCapitalAssumptions.receivablesDays) / 365;\n      const previousInventory = (previousRevenue * workingCapitalAssumptions.inventoryDays) / 365;\n      const previousPayables = (previousRevenue * workingCapitalAssumptions.payablesDays) / 365;\n\n      const receivablesChange = currentReceivables - previousReceivables;\n      const inventoryChange = currentInventory - previousInventory;\n      const payablesChange = currentPayables - previousPayables;\n\n      // Working capital change (increase is negative for cash flow)\n      yearData.workingCapitalChange = -(receivablesChange + inventoryChange - payablesChange);\n\n      // Capex calculation\n      yearData.capex = -(currentRevenue * capexAssumptions.capexAsPercentOfRevenue / 100);\n      \n      // Depreciation (simplified - based on capex and depreciation rate)\n      yearData.depreciation = Math.abs(yearData.capex) / capexAssumptions.depreciationRate;\n\n      // Free Cash Flow = NOPAT + Depreciation - Capex - Change in Working Capital\n      yearData.freeCashFlow = yearData.nopat + yearData.depreciation + yearData.capex + yearData.workingCapitalChange;\n\n      // Present Value\n      const discountFactor = Math.pow(1 + discountRate / 100, year);\n      yearData.presentValue = yearData.freeCashFlow / discountFactor;\n\n      results.years.push(yearData);\n      results.freeCashFlows.push(yearData.freeCashFlow);\n      results.presentValues.push(yearData.presentValue);\n      results.workingCapitalChanges.push(yearData.workingCapitalChange);\n      results.capexAmounts.push(yearData.capex);\n      results.unleveredFreeCashFlow.push(yearData.freeCashFlow);\n      results.cumulativePV += yearData.presentValue;\n    }\n\n    // Terminal Value calculation\n    const finalYearFCF = results.years[results.years.length - 1]?.freeCashFlow || 0;\n    const terminalFCF = finalYearFCF * (1 + terminalGrowthRate / 100);\n    results.terminalValue = terminalFCF / ((discountRate - terminalGrowthRate) / 100);\n    \n    const terminalDiscountFactor = Math.pow(1 + discountRate / 100, projectionYears);\n    results.presentValueTerminal = results.terminalValue / terminalDiscountFactor;\n\n    // Enterprise Value\n    results.enterpriseValue = results.cumulativePV + results.presentValueTerminal;\n\n    // Simplified equity value (would subtract net debt in reality)\n    const netDebt = 0; // Could be calculated from balance sheet\n    results.equityValue = results.enterpriseValue - netDebt;\n\n    // Implied share price (assuming shares outstanding)\n    const sharesOutstanding = modelInputs.dcf.sharesOutstanding || 1000; // thousands\n    results.impliedShare = results.equityValue / sharesOutstanding;\n\n    return results;\n  }, [data, modelInputs]);\n\n  const updateDCFAssumption = (category, field, value) => {\n    const updatedDCF = {\n      ...modelInputs.dcf,\n      [category]: {\n        ...modelInputs.dcf[category],\n        [field]: parseFloat(value) || 0\n      }\n    };\n    onModelInputChange('dcf', category, updatedDCF[category]);\n  };\n\n  const updateBasicAssumption = (field, value) => {\n    onModelInputChange('dcf', field, parseFloat(value) || 0);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h3 className=\"text-xl font-semibold mb-2 flex items-center gap-2\">\n            <Calculator size={20} />\n            Advanced DCF Valuation\n          </h3>\n          <p className=\"text-gray-600\">\n            Professional-grade DCF with working capital analysis, capex modeling, and detailed cash flow projections.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          {['results', 'charts', 'wacc', 'assumptions'].map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`px-3 py-2 rounded-lg text-sm transition-colors flex items-center gap-1 ${\n                activeTab === tab ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'\n              }`}\n            >\n              {tab === 'results' && <DollarSign size={14} />}\n              {tab === 'charts' && <BarChart3 size={14} />}\n              {tab === 'wacc' && <Calculator size={14} />}\n              {tab === 'assumptions' && <Settings size={14} />}\n              {tab.charAt(0).toUpperCase() + tab.slice(1)}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Tab Content */}\n      {activeTab === 'results' && (\n        <>\n          {/* Key Results */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <motion.div \n          className=\"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4 border border-green-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <DollarSign size={20} className=\"text-green-600\" />\n            <span className=\"text-xs text-green-600 font-medium\">ENTERPRISE VALUE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-green-800\">\n            {formatCurrency(advancedDCFResults.enterpriseValue)}\n          </div>\n          <div className=\"text-sm text-green-600 mt-1\">\n            PV Operations: {formatCurrency(advancedDCFResults.cumulativePV)}\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <TrendingUp size={20} className=\"text-blue-600\" />\n            <span className=\"text-xs text-blue-600 font-medium\">EQUITY VALUE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-blue-800\">\n            {formatCurrency(advancedDCFResults.equityValue)}\n          </div>\n          <div className=\"text-sm text-blue-600 mt-1\">\n            Per Share: {formatCurrency(advancedDCFResults.impliedShare)}\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <BarChart3 size={20} className=\"text-purple-600\" />\n            <span className=\"text-xs text-purple-600 font-medium\">TERMINAL VALUE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-purple-800\">\n            {formatCurrency(advancedDCFResults.terminalValue)}\n          </div>\n          <div className=\"text-sm text-purple-600 mt-1\">\n            PV: {formatCurrency(advancedDCFResults.presentValueTerminal)}\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Info size={20} className=\"text-orange-600\" />\n            <span className=\"text-xs text-orange-600 font-medium\">IMPLIED MULTIPLE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-orange-800\">\n            {(advancedDCFResults.enterpriseValue / (data.statements.incomeStatement.totalRevenue?.[1] || 1)).toFixed(1)}x\n          </div>\n          <div className=\"text-sm text-orange-600 mt-1\">\n            EV/Revenue (Year 1)\n          </div>\n        </motion.div>\n      </div>\n\n          {/* Detailed Cash Flow Analysis */}\n        <div className=\"bg-white rounded-lg border p-6\">\n          <h4 className=\"font-semibold text-lg mb-4\">Detailed Cash Flow Analysis</h4>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead>\n                <tr className=\"border-b bg-gray-50\">\n                  <th className=\"text-left p-3 font-medium\">Year</th>\n                  <th className=\"text-right p-3 font-medium\">Revenue</th>\n                  <th className=\"text-right p-3 font-medium\">Operating Income</th>\n                  <th className=\"text-right p-3 font-medium\">NOPAT</th>\n                  <th className=\"text-right p-3 font-medium\">Depreciation</th>\n                  <th className=\"text-right p-3 font-medium\">Capex</th>\n                  <th className=\"text-right p-3 font-medium\">Working Capital</th>\n                  <th className=\"text-right p-3 font-medium\">Free Cash Flow</th>\n                  <th className=\"text-right p-3 font-medium\">Present Value</th>\n                </tr>\n              </thead>\n              <tbody>\n                {advancedDCFResults.years.map((yearData, index) => (\n                  <tr key={index} className=\"border-b hover:bg-gray-50\">\n                    <td className=\"p-3 font-medium\">{yearData.year}</td>\n                    <td className=\"p-3 text-right\">{formatCurrency(yearData.revenue)}</td>\n                    <td className=\"p-3 text-right\">{formatCurrency(yearData.operatingIncome)}</td>\n                    <td className=\"p-3 text-right\">{formatCurrency(yearData.nopat)}</td>\n                    <td className=\"p-3 text-right text-green-600\">+{formatCurrency(yearData.depreciation)}</td>\n                    <td className=\"p-3 text-right text-red-600\">{formatCurrency(yearData.capex)}</td>\n                    <td className={`p-3 text-right ${yearData.workingCapitalChange >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                      {yearData.workingCapitalChange >= 0 ? '+' : ''}{formatCurrency(yearData.workingCapitalChange)}\n                    </td>\n                    <td className=\"p-3 text-right font-medium\">{formatCurrency(yearData.freeCashFlow)}</td>\n                    <td className=\"p-3 text-right font-medium\">{formatCurrency(yearData.presentValue)}</td>\n                  </tr>\n                ))}\n                \n                {/* Terminal Value Row */}\n                <tr className=\"border-b-2 border-gray-300 bg-blue-50\">\n                  <td className=\"p-3 font-bold\">Terminal</td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3 text-right font-bold\">{formatCurrency(advancedDCFResults.terminalValue)}</td>\n                  <td className=\"p-3 text-right font-bold\">{formatCurrency(advancedDCFResults.presentValueTerminal)}</td>\n                </tr>\n                \n                {/* Total Row */}\n                <tr className=\"bg-gray-100 font-bold\">\n                  <td className=\"p-3\">TOTAL</td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3\"></td>\n                  <td className=\"p-3 text-right text-lg\">{formatCurrency(advancedDCFResults.enterpriseValue)}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        </>\n      )}\n      \n      {/* Charts Tab */}\n      {activeTab === 'charts' && (\n        <DataVisualization\n          dcfData={advancedDCFResults}\n          sensitivityData={null}\n          scenarioData={null}\n          formatCurrency={formatCurrency}\n          formatPercent={formatPercent}\n        />\n      )}\n      \n      {/* WACC Calculator Tab */}\n      {activeTab === 'wacc' && (\n        <WACCCalculator\n          modelInputs={modelInputs}\n          onModelInputChange={onModelInputChange}\n          formatPercent={formatPercent}\n        />\n      )}\n      \n      {/* Assumptions Tab */}\n      {activeTab === 'assumptions' && (\n        <div className=\"bg-white rounded-lg border p-6\">\n          <h4 className=\"font-semibold text-lg mb-4\">Model Assumptions</h4>\n          \n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* Basic DCF Assumptions */}\n            <div>\n              <h5 className=\"font-medium mb-3 text-gray-800\">Core Assumptions</h5>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Discount Rate (WACC) %\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={modelInputs.dcf.discountRate}\n                    onChange={(e) => updateBasicAssumption('discountRate', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Terminal Growth Rate %\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={modelInputs.dcf.terminalGrowthRate}\n                    onChange={(e) => updateBasicAssumption('terminalGrowthRate', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Tax Rate %\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={modelInputs.dcf.taxRate}\n                    onChange={(e) => updateBasicAssumption('taxRate', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Working Capital Assumptions */}\n            <div>\n              <h5 className=\"font-medium mb-3 text-gray-800\">Working Capital</h5>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Receivables (Days)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={modelInputs.dcf.workingCapital?.receivablesDays || 45}\n                    onChange={(e) => updateDCFAssumption('workingCapital', 'receivablesDays', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Inventory (Days)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={modelInputs.dcf.workingCapital?.inventoryDays || 60}\n                    onChange={(e) => updateDCFAssumption('workingCapital', 'inventoryDays', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Payables (Days)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={modelInputs.dcf.workingCapital?.payablesDays || 30}\n                    onChange={(e) => updateDCFAssumption('workingCapital', 'payablesDays', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Capex Assumptions */}\n            <div>\n              <h5 className=\"font-medium mb-3 text-gray-800\">Capital Expenditure</h5>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Capex (% of Revenue)\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={modelInputs.dcf.capex?.capexAsPercentOfRevenue || 3.5}\n                    onChange={(e) => updateDCFAssumption('capex', 'capexAsPercentOfRevenue', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Depreciation Period (Years)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={modelInputs.dcf.capex?.depreciationRate || 7}\n                    onChange={(e) => updateDCFAssumption('capex', 'depreciationRate', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Shares Outstanding (000s)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={modelInputs.dcf.sharesOutstanding || 1000}\n                    onChange={(e) => updateBasicAssumption('sharesOutstanding', e.target.value)}\n                    className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdvancedDCF;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Users, TrendingUp, BarChart3, Plus, Search, DollarSign, Percent, Target, Filter } from 'lucide-react';\n\nconst ComparableAnalysis = ({ data, formatCurrency, formatPercent }) => {\n  const [activeTab, setActiveTab] = useState('multiples');\n  const [selectedMultiple, setSelectedMultiple] = useState('ev_revenue');\n  const [showAddComp, setShowAddComp] = useState(false);\n  \n  // Sample comparable companies data (in practice, this would come from external API)\n  const [comparableCompanies, setComparableCompanies] = useState([\n    {\n      id: 1,\n      name: 'MedSpa Corp',\n      ticker: 'MSPA',\n      marketCap: 450000, // $450M\n      enterpriseValue: 520000, // $520M\n      revenue: 180000, // $180M\n      ebitda: 45000, // $45M\n      netIncome: 28000, // $28M\n      employees: 1200,\n      founded: 2015,\n      geography: 'US',\n      businessModel: 'B2C Medical Spa Chain'\n    },\n    {\n      id: 2,\n      name: 'Wellness Holdings',\n      ticker: 'WELL',\n      marketCap: 680000,\n      enterpriseValue: 750000,\n      revenue: 220000,\n      ebitda: 55000,\n      netIncome: 35000,\n      employees: 1800,\n      founded: 2012,\n      geography: 'US',\n      businessModel: 'Integrated Wellness Platform'\n    },\n    {\n      id: 3,\n      name: 'Aesthetic Solutions Inc',\n      ticker: 'AEST',\n      marketCap: 320000,\n      enterpriseValue: 380000,\n      revenue: 125000,\n      ebitda: 32000,\n      netIncome: 18000,\n      employees: 850,\n      founded: 2018,\n      geography: 'US',\n      businessModel: 'Medical Device & Services'\n    },\n    {\n      id: 4,\n      name: 'Premium Health Group',\n      ticker: 'PHG',\n      marketCap: 920000,\n      enterpriseValue: 1050000,\n      revenue: 310000,\n      ebitda: 78000,\n      netIncome: 48000,\n      employees: 2500,\n      founded: 2010,\n      geography: 'US',\n      businessModel: 'Premium Healthcare Services'\n    }\n  ]);\n\n  // Calculate multiples for comparable companies\n  const comparableMultiples = useMemo(() => {\n    return comparableCompanies.map(comp => ({\n      ...comp,\n      multiples: {\n        ev_revenue: comp.enterpriseValue / comp.revenue,\n        ev_ebitda: comp.enterpriseValue / comp.ebitda,\n        pe_ratio: comp.marketCap / comp.netIncome,\n        revenue_per_employee: comp.revenue / comp.employees,\n        market_cap_revenue: comp.marketCap / comp.revenue\n      }\n    }));\n  }, [comparableCompanies]);\n\n  // Calculate market statistics\n  const marketStats = useMemo(() => {\n    const multiples = comparableMultiples.map(c => c.multiples);\n    \n    const calculateStats = (values) => ({\n      mean: values.reduce((a, b) => a + b, 0) / values.length,\n      median: values.sort((a, b) => a - b)[Math.floor(values.length / 2)],\n      min: Math.min(...values),\n      max: Math.max(...values),\n      p25: values.sort((a, b) => a - b)[Math.floor(values.length * 0.25)],\n      p75: values.sort((a, b) => a - b)[Math.floor(values.length * 0.75)]\n    });\n\n    return {\n      ev_revenue: calculateStats(multiples.map(m => m.ev_revenue)),\n      ev_ebitda: calculateStats(multiples.map(m => m.ev_ebitda)),\n      pe_ratio: calculateStats(multiples.map(m => m.pe_ratio)),\n      revenue_per_employee: calculateStats(multiples.map(m => m.revenue_per_employee)),\n      market_cap_revenue: calculateStats(multiples.map(m => m.market_cap_revenue))\n    };\n  }, [comparableMultiples]);\n\n  // Calculate implied valuation for target company\n  const impliedValuation = useMemo(() => {\n    const targetRevenue = data.statements.incomeStatement.totalRevenue?.[1] || 100000; // Year 1 revenue\n    const targetEBITDA = (data.statements.incomeStatement.operatingIncome?.[1] || 50000) * 1.15; // Approx EBITDA\n    const targetNetIncome = (data.statements.incomeStatement.operatingIncome?.[1] || 50000) * 0.7; // Approx net income\n\n    return {\n      ev_revenue: {\n        mean: targetRevenue * marketStats.ev_revenue.mean,\n        median: targetRevenue * marketStats.ev_revenue.median,\n        p25: targetRevenue * marketStats.ev_revenue.p25,\n        p75: targetRevenue * marketStats.ev_revenue.p75\n      },\n      ev_ebitda: {\n        mean: targetEBITDA * marketStats.ev_ebitda.mean,\n        median: targetEBITDA * marketStats.ev_ebitda.median,\n        p25: targetEBITDA * marketStats.ev_ebitda.p25,\n        p75: targetEBITDA * marketStats.ev_ebitda.p75\n      },\n      pe_ratio: {\n        mean: targetNetIncome * marketStats.pe_ratio.mean,\n        median: targetNetIncome * marketStats.pe_ratio.median,\n        p25: targetNetIncome * marketStats.pe_ratio.p25,\n        p75: targetNetIncome * marketStats.pe_ratio.p75\n      }\n    };\n  }, [data, marketStats]);\n\n  const multipleDefinitions = {\n    ev_revenue: { name: 'EV/Revenue', description: 'Enterprise Value / Annual Revenue' },\n    ev_ebitda: { name: 'EV/EBITDA', description: 'Enterprise Value / EBITDA' },\n    pe_ratio: { name: 'P/E Ratio', description: 'Market Cap / Net Income' },\n    revenue_per_employee: { name: 'Revenue/Employee', description: 'Revenue per Employee' },\n    market_cap_revenue: { name: 'Market Cap/Revenue', description: 'Market Cap / Revenue' }\n  };\n\n  const addComparableCompany = (companyData) => {\n    const newCompany = {\n      id: Date.now(),\n      ...companyData,\n      marketCap: parseFloat(companyData.marketCap) || 0,\n      enterpriseValue: parseFloat(companyData.enterpriseValue) || 0,\n      revenue: parseFloat(companyData.revenue) || 0,\n      ebitda: parseFloat(companyData.ebitda) || 0,\n      netIncome: parseFloat(companyData.netIncome) || 0,\n      employees: parseInt(companyData.employees) || 0,\n      founded: parseInt(companyData.founded) || new Date().getFullYear()\n    };\n    setComparableCompanies([...comparableCompanies, newCompany]);\n    setShowAddComp(false);\n  };\n\n  const removeComparable = (id) => {\n    setComparableCompanies(comparableCompanies.filter(comp => comp.id !== id));\n  };\n\n  const tabs = [\n    { id: 'multiples', label: 'Trading Multiples', icon: BarChart3 },\n    { id: 'analysis', label: 'Valuation Analysis', icon: Target },\n    { id: 'companies', label: 'Comparable Set', icon: Users }\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-start\">\n        <div>\n          <h3 className=\"text-xl font-semibold mb-2 flex items-center gap-2\">\n            <Users size={20} />\n            Comparable Company Analysis\n          </h3>\n          <p className=\"text-gray-600\">\n            Market-based valuation using trading multiples from similar public companies.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setShowAddComp(true)}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 text-sm\"\n          >\n            <Plus size={16} />\n            Add Comparable\n          </button>\n        </div>\n      </div>\n\n      {/* Key Results Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <motion.div \n          className=\"bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <BarChart3 size={20} className=\"text-blue-600\" />\n            <span className=\"text-xs text-blue-600 font-medium\">EV/REVENUE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-blue-800\">\n            {marketStats.ev_revenue.median.toFixed(1)}x\n          </div>\n          <div className=\"text-sm text-blue-600 mt-1\">\n            Median multiple\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4 border border-green-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <TrendingUp size={20} className=\"text-green-600\" />\n            <span className=\"text-xs text-green-600 font-medium\">IMPLIED VALUE</span>\n          </div>\n          <div className=\"text-2xl font-bold text-green-800\">\n            {formatCurrency(impliedValuation.ev_revenue.median)}\n          </div>\n          <div className=\"text-sm text-green-600 mt-1\">\n            EV/Revenue basis\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <DollarSign size={20} className=\"text-purple-600\" />\n            <span className=\"text-xs text-purple-600 font-medium\">VALUATION RANGE</span>\n          </div>\n          <div className=\"text-lg font-bold text-purple-800\">\n            {formatCurrency(impliedValuation.ev_revenue.p25)} - {formatCurrency(impliedValuation.ev_revenue.p75)}\n          </div>\n          <div className=\"text-sm text-purple-600 mt-1\">\n            25th - 75th percentile\n          </div>\n        </motion.div>\n\n        <motion.div \n          className=\"bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200\"\n          whileHover={{ y: -2 }}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Users size={20} className=\"text-orange-600\" />\n            <span className=\"text-xs text-orange-600 font-medium\">PEER COUNT</span>\n          </div>\n          <div className=\"text-2xl font-bold text-orange-800\">\n            {comparableCompanies.length}\n          </div>\n          <div className=\"text-sm text-orange-600 mt-1\">\n            Comparable companies\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-lg\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon;\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-md transition-all ${\n                activeTab === tab.id\n                  ? 'bg-white text-blue-600 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-800'\n              }`}\n            >\n              <Icon size={16} />\n              {tab.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"bg-white rounded-lg border p-6\">\n        {activeTab === 'multiples' && (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <h4 className=\"font-semibold text-lg\">Trading Multiples Analysis</h4>\n              <select\n                value={selectedMultiple}\n                onChange={(e) => setSelectedMultiple(e.target.value)}\n                className=\"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              >\n                {Object.entries(multipleDefinitions).map(([key, def]) => (\n                  <option key={key} value={key}>{def.name}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b bg-gray-50\">\n                    <th className=\"text-left p-3 font-medium\">Company</th>\n                    <th className=\"text-right p-3 font-medium\">Market Cap</th>\n                    <th className=\"text-right p-3 font-medium\">Enterprise Value</th>\n                    <th className=\"text-right p-3 font-medium\">Revenue</th>\n                    <th className=\"text-right p-3 font-medium\">EV/Revenue</th>\n                    <th className=\"text-right p-3 font-medium\">EV/EBITDA</th>\n                    <th className=\"text-right p-3 font-medium\">P/E Ratio</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {comparableMultiples.map((comp, index) => (\n                    <tr key={comp.id} className=\"border-b hover:bg-gray-50\">\n                      <td className=\"p-3\">\n                        <div>\n                          <div className=\"font-medium\">{comp.name}</div>\n                          <div className=\"text-xs text-gray-500\">{comp.ticker}</div>\n                        </div>\n                      </td>\n                      <td className=\"p-3 text-right\">{formatCurrency(comp.marketCap)}</td>\n                      <td className=\"p-3 text-right\">{formatCurrency(comp.enterpriseValue)}</td>\n                      <td className=\"p-3 text-right\">{formatCurrency(comp.revenue)}</td>\n                      <td className=\"p-3 text-right font-medium\">{comp.multiples.ev_revenue.toFixed(1)}x</td>\n                      <td className=\"p-3 text-right font-medium\">{comp.multiples.ev_ebitda.toFixed(1)}x</td>\n                      <td className=\"p-3 text-right font-medium\">{comp.multiples.pe_ratio.toFixed(1)}x</td>\n                    </tr>\n                  ))}\n                  \n                  {/* Summary Statistics */}\n                  <tr className=\"border-t-2 border-gray-300 bg-blue-50 font-semibold\">\n                    <td className=\"p-3\">Market Statistics</td>\n                    <td className=\"p-3\"></td>\n                    <td className=\"p-3\"></td>\n                    <td className=\"p-3\"></td>\n                    <td className=\"p-3 text-right\">{marketStats.ev_revenue.median.toFixed(1)}x</td>\n                    <td className=\"p-3 text-right\">{marketStats.ev_ebitda.median.toFixed(1)}x</td>\n                    <td className=\"p-3 text-right\">{marketStats.pe_ratio.median.toFixed(1)}x</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            {/* Multiple Distribution Chart */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <div className=\"p-4 bg-gray-50 rounded-lg\">\n                <h6 className=\"font-medium mb-3\">Multiple Distribution</h6>\n                <div className=\"space-y-3\">\n                  {Object.entries(marketStats).slice(0, 3).map(([key, stats]) => (\n                    <div key={key}>\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span>{multipleDefinitions[key].name}</span>\n                        <span className=\"font-medium\">{stats.median.toFixed(1)}x</span>\n                      </div>\n                      <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                        <div\n                          className=\"bg-blue-500 h-2 rounded-full\"\n                          style={{\n                            width: `${((stats.median - stats.min) / (stats.max - stats.min)) * 100}%`\n                          }}\n                        />\n                      </div>\n                      <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                        <span>{stats.min.toFixed(1)}x</span>\n                        <span>{stats.max.toFixed(1)}x</span>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"p-4 bg-gray-50 rounded-lg\">\n                <h6 className=\"font-medium mb-3\">Key Statistics</h6>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span>Companies Analyzed:</span>\n                    <span className=\"font-medium\">{comparableCompanies.length}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Median Market Cap:</span>\n                    <span className=\"font-medium\">{formatCurrency(comparableCompanies.sort((a, b) => a.marketCap - b.marketCap)[Math.floor(comparableCompanies.length / 2)]?.marketCap || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Median Revenue:</span>\n                    <span className=\"font-medium\">{formatCurrency(comparableCompanies.sort((a, b) => a.revenue - b.revenue)[Math.floor(comparableCompanies.length / 2)]?.revenue || 0)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Avg Founded Year:</span>\n                    <span className=\"font-medium\">{Math.round(comparableCompanies.reduce((sum, c) => sum + c.founded, 0) / comparableCompanies.length)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'analysis' && (\n          <div className=\"space-y-6\">\n            <h4 className=\"font-semibold text-lg\">Valuation Analysis</h4>\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {/* Implied Valuation */}\n              <div>\n                <h5 className=\"font-medium mb-4\">Implied Valuation by Multiple</h5>\n                <div className=\"space-y-4\">\n                  {Object.entries(impliedValuation).map(([multiple, values]) => (\n                    <div key={multiple} className=\"p-4 border rounded-lg\">\n                      <div className=\"flex justify-between items-center mb-2\">\n                        <span className=\"font-medium\">{multipleDefinitions[multiple].name}</span>\n                        <span className=\"text-sm text-gray-500\">\n                          {marketStats[multiple].median.toFixed(1)}x median\n                        </span>\n                      </div>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span>25th Percentile:</span>\n                          <span className=\"font-medium\">{formatCurrency(values.p25)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Median:</span>\n                          <span className=\"font-bold text-blue-600\">{formatCurrency(values.median)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>75th Percentile:</span>\n                          <span className=\"font-medium\">{formatCurrency(values.p75)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Mean:</span>\n                          <span className=\"font-medium\">{formatCurrency(values.mean)}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Valuation Summary */}\n              <div>\n                <h5 className=\"font-medium mb-4\">Valuation Summary</h5>\n                <div className=\"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <div className=\"text-sm text-blue-600 font-medium mb-1\">Recommended Range</div>\n                      <div className=\"text-2xl font-bold text-blue-800\">\n                        {formatCurrency((impliedValuation.ev_revenue.p25 + impliedValuation.ev_ebitda.p25) / 2)} - \n                        {formatCurrency((impliedValuation.ev_revenue.p75 + impliedValuation.ev_ebitda.p75) / 2)}\n                      </div>\n                      <div className=\"text-sm text-blue-600\">Blended 25th-75th percentile</div>\n                    </div>\n                    \n                    <div>\n                      <div className=\"text-sm text-blue-600 font-medium mb-1\">Midpoint Valuation</div>\n                      <div className=\"text-xl font-bold text-blue-800\">\n                        {formatCurrency((impliedValuation.ev_revenue.median + impliedValuation.ev_ebitda.median) / 2)}\n                      </div>\n                      <div className=\"text-sm text-blue-600\">Average of median multiples</div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\n                  <div className=\"flex items-start gap-2\">\n                    <Target size={16} className=\"text-yellow-600 mt-0.5\" />\n                    <div>\n                      <h6 className=\"font-medium text-yellow-800 mb-1\">Valuation Considerations</h6>\n                      <ul className=\"text-sm text-yellow-700 space-y-1\">\n                        <li> Consider company-specific growth and margin profiles</li>\n                        <li> Adjust for differences in business model and scale</li>\n                        <li> Factor in market conditions and sector trends</li>\n                        <li> Apply appropriate discount for private company liquidity</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'companies' && (\n          <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center\">\n              <h4 className=\"font-semibold text-lg\">Comparable Company Set</h4>\n              <div className=\"flex gap-2\">\n                <div className=\"relative\">\n                  <Search size={16} className=\"absolute left-3 top-3 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search companies...\"\n                    className=\"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n                <button className=\"px-3 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2\">\n                  <Filter size={16} />\n                  Filter\n                </button>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n              {comparableCompanies.map((comp) => (\n                <motion.div\n                  key={comp.id}\n                  className=\"border rounded-lg p-4 hover:shadow-lg transition-shadow\"\n                  whileHover={{ y: -2 }}\n                >\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div>\n                      <h6 className=\"font-semibold text-gray-800\">{comp.name}</h6>\n                      <div className=\"text-sm text-gray-500\">{comp.ticker}  {comp.geography}</div>\n                    </div>\n                    <button\n                      onClick={() => removeComparable(comp.id)}\n                      className=\"text-red-500 hover:bg-red-50 p-1 rounded\"\n                    >\n                      \n                    </button>\n                  </div>\n                  \n                  <div className=\"space-y-2 text-sm\">\n                    <div className=\"flex justify-between\">\n                      <span>Market Cap:</span>\n                      <span className=\"font-medium\">{formatCurrency(comp.marketCap)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Revenue:</span>\n                      <span className=\"font-medium\">{formatCurrency(comp.revenue)}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>EV/Revenue:</span>\n                      <span className=\"font-medium\">{(comp.enterpriseValue / comp.revenue).toFixed(1)}x</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Founded:</span>\n                      <span className=\"font-medium\">{comp.founded}</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-3 pt-3 border-t\">\n                    <div className=\"text-xs text-gray-600\">{comp.businessModel}</div>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Add Comparable Modal */}\n      {showAddComp && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\n            <h4 className=\"font-semibold text-lg mb-4\">Add Comparable Company</h4>\n            <form onSubmit={(e) => {\n              e.preventDefault();\n              const formData = new FormData(e.target);\n              addComparableCompany(Object.fromEntries(formData));\n            }}>\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Company Name</label>\n                  <input name=\"name\" type=\"text\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Ticker</label>\n                  <input name=\"ticker\" type=\"text\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                </div>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Market Cap ($000s)</label>\n                    <input name=\"marketCap\" type=\"number\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Enterprise Value ($000s)</label>\n                    <input name=\"enterpriseValue\" type=\"number\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Revenue ($000s)</label>\n                    <input name=\"revenue\" type=\"number\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">EBITDA ($000s)</label>\n                    <input name=\"ebitda\" type=\"number\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Business Model</label>\n                  <input name=\"businessModel\" type=\"text\" required className=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\" />\n                </div>\n              </div>\n              \n              <div className=\"flex gap-3 mt-6\">\n                <button type=\"submit\" className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\">\n                  Add Company\n                </button>\n                <button \n                  type=\"button\" \n                  onClick={() => setShowAddComp(false)}\n                  className=\"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ComparableAnalysis;","import React, { useState, useMemo, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { BarChart3, TrendingUp, AlertTriangle, Play, Square, Settings, Download, FileText, Zap } from 'lucide-react';\nimport { ComposedChart, Bar, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ScatterChart, Scatter, Cell, AreaChart, Area } from 'recharts';\nimport { monteCarloEngine } from '../../services/monteCarloEngine.js';\n\nconst MonteCarloSimulation = ({ data, onDataChange }) => {\n  const [activeTab, setActiveTab] = useState('setup');\n  const [simulationResults, setSimulationResults] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [simulationSettings, setSimulationSettings] = useState({\n    iterations: 10000,\n    confidenceLevel: 0.95,\n    randomSeed: null,\n    enableCorrelation: false\n  });\n\n  const [distributions, setDistributions] = useState({\n    revenueGrowthRate: {\n      type: 'normal',\n      parameters: { mean: 0.1, stdDev: 0.03 },\n      name: 'Revenue Growth Rate',\n      enabled: true\n    },\n    fcfMargin: {\n      type: 'triangular',\n      parameters: { min: 0.12, mode: 0.15, max: 0.18 },\n      name: 'FCF Margin',\n      enabled: true\n    },\n    wacc: {\n      type: 'normal',\n      parameters: { mean: 0.1, stdDev: 0.015 },\n      name: 'WACC',\n      enabled: true\n    },\n    terminalGrowthRate: {\n      type: 'uniform',\n      parameters: { min: 0.02, max: 0.03 },\n      name: 'Terminal Growth Rate',\n      enabled: true\n    }\n  });\n\n  const [correlationMatrix, setCorrelationMatrix] = useState([\n    [1.0, 0.3, -0.2, 0.1],\n    [0.3, 1.0, -0.4, 0.2],\n    [-0.2, -0.4, 1.0, -0.3],\n    [0.1, 0.2, -0.3, 1.0]\n  ]);\n\n  const distributionTypes = [\n    { value: 'normal', label: 'Normal', parameters: ['mean', 'stdDev'] },\n    { value: 'triangular', label: 'Triangular', parameters: ['min', 'mode', 'max'] },\n    { value: 'uniform', label: 'Uniform', parameters: ['min', 'max'] },\n    { value: 'lognormal', label: 'Log-Normal', parameters: ['mu', 'sigma'] },\n    { value: 'beta', label: 'Beta', parameters: ['alpha', 'beta'] }\n  ];\n\n  const runSimulation = useCallback(async () => {\n    try {\n      // Validate data and settings before starting simulation\n      \n      setIsRunning(true);\n      setProgress(0);\n\n      const enabledDistributions = Object.fromEntries(\n        Object.entries(distributions).filter(([_, dist]) => dist.enabled)\n      );\n      \n      if (Object.keys(enabledDistributions).length === 0) {\n        throw new Error('No distributions are enabled. Please enable at least one variable distribution to run the simulation.');\n      }\n\n      const options = {\n        iterations: simulationSettings.iterations,\n        confidenceLevel: simulationSettings.confidenceLevel,\n        randomSeed: simulationSettings.randomSeed,\n        correlationMatrix: simulationSettings.enableCorrelation ? correlationMatrix : null,\n        onProgress: setProgress\n      };\n\n      // Extract current revenue from actual data structure\n      const statements = data?.statements?.incomeStatement;\n      const latestIndex = data?.periods?.length - 1 || 2;\n      const currentRevenue = statements?.totalRevenue?.[latestIndex] || 1000000;\n      const currentOperatingIncome = statements?.operatingIncome?.[latestIndex] || 150000;\n      \n      const baseInputs = {\n        currentRevenue: currentRevenue * 1000, // Convert from thousands to actual values\n        currentPrice: 100, // Default stock price for private company\n        sharesOutstanding: 1000000, // Default shares outstanding\n        currentOperatingIncome: currentOperatingIncome * 1000,\n        ...Object.fromEntries(\n          Object.entries(enabledDistributions).map(([key, dist]) => [\n            key,\n            dist.parameters.mean || dist.parameters.mode || (dist.parameters.min + dist.parameters.max) / 2\n          ])\n        )\n      };\n\n      const results = await monteCarloEngine.runDCFSimulation(\n        baseInputs,\n        enabledDistributions,\n        options\n      );\n\n      setSimulationResults(results);\n    } catch (error) {\n      console.error('Monte Carlo simulation failed:', error);\n      // Show error to user\n      alert(`Monte Carlo simulation failed: ${error.message}`);\n    } finally {\n      setIsRunning(false);\n      setProgress(0);\n    }\n  }, [distributions, simulationSettings, correlationMatrix, data]);\n\n  const stopSimulation = useCallback(() => {\n    monteCarloEngine.stopSimulation();\n    setIsRunning(false);\n  }, []);\n\n  const updateDistribution = useCallback((variable, updates) => {\n    setDistributions(prev => ({\n      ...prev,\n      [variable]: { ...prev[variable], ...updates }\n    }));\n  }, []);\n\n  const updateCorrelation = useCallback((i, j, value) => {\n    setCorrelationMatrix(prev => {\n      const newMatrix = prev.map(row => [...row]);\n      newMatrix[i][j] = value;\n      newMatrix[j][i] = value; // Keep matrix symmetric\n      return newMatrix;\n    });\n  }, []);\n\n  const generateHistogramData = useMemo(() => {\n    if (!simulationResults?.results) return [];\n\n    const values = simulationResults.results.map(r => r.pricePerShare);\n    const bins = 50;\n    const min = Math.min(...values);\n    const max = Math.max(...values);\n    const binWidth = (max - min) / bins;\n\n    const histogram = Array(bins).fill(0).map((_, i) => ({\n      bin: min + i * binWidth,\n      count: 0,\n      frequency: 0\n    }));\n\n    values.forEach(value => {\n      const binIndex = Math.min(Math.floor((value - min) / binWidth), bins - 1);\n      histogram[binIndex].count++;\n    });\n\n    histogram.forEach(bin => {\n      bin.frequency = bin.count / values.length;\n    });\n\n    return histogram;\n  }, [simulationResults]);\n\n  const generateScatterData = useMemo(() => {\n    if (!simulationResults?.results) return [];\n\n    return simulationResults.results.slice(0, 1000).map((result, i) => ({\n      x: result.inputs.revenueGrowthRate * 100,\n      y: result.pricePerShare,\n      upside: result.upside\n    }));\n  }, [simulationResults]);\n\n  const formatCurrency = (value) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(value);\n  };\n\n  const formatPercent = (value) => {\n    return `${(value * 100).toFixed(2)}%`;\n  };\n\n  const tabs = [\n    { id: 'setup', label: 'Setup', icon: Settings },\n    { id: 'run', label: 'Run Simulation', icon: Play },\n    { id: 'results', label: 'Results', icon: BarChart3 },\n    { id: 'analysis', label: 'Analysis', icon: TrendingUp }\n  ];\n\n  return (\n    <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n      <div className=\"mb-6\">\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          <h2 className=\"text-2xl font-bold text-white mb-2 flex items-center\">\n            <Zap className=\"inline-block mr-2\" />\n            Monte Carlo Simulation\n          </h2>\n          <p className=\"text-gray-400 text-sm\">\n            Advanced risk analysis using probabilistic modeling  Generate thousands of scenarios  Measure uncertainty\n          </p>\n        </motion.div>\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"flex space-x-2\">\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${\n                  activeTab === tab.id \n                    ? 'bg-blue-600 text-white' \n                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                }`}\n              >\n                <Icon size={16} />\n                {tab.label}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"mt-6\">\n        <AnimatePresence mode=\"wait\">\n          {activeTab === 'setup' && (\n            <motion.div\n              key=\"setup\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"space-y-6\">\n                <div className=\"bg-gray-700 rounded-lg p-4\">\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                     Simulation Settings\n                  </h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <label className=\"block text-sm font-medium text-gray-200\">Iterations</label>\n                      <input\n                        type=\"number\"\n                        className=\"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        value={simulationSettings.iterations}\n                        onChange={(e) => setSimulationSettings(prev => ({\n                          ...prev,\n                          iterations: parseInt(e.target.value)\n                        }))}\n                        min=\"1000\"\n                        max=\"100000\"\n                        step=\"1000\"\n                      />\n                      <small className=\"text-gray-400\">Leave empty for random</small>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"block text-sm font-medium text-gray-200\">Confidence Level</label>\n                      <select\n                        className=\"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        value={simulationSettings.confidenceLevel}\n                        onChange={(e) => setSimulationSettings(prev => ({\n                          ...prev,\n                          confidenceLevel: parseFloat(e.target.value)\n                        }))}\n                      >\n                        <option value={0.90}>90%</option>\n                        <option value={0.95}>95%</option>\n                        <option value={0.99}>99%</option>\n                      </select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"block text-sm font-medium text-gray-200\">Random Seed (Optional)</label>\n                      <input\n                        type=\"number\"\n                        className=\"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        value={simulationSettings.randomSeed || ''}\n                        onChange={(e) => setSimulationSettings(prev => ({\n                          ...prev,\n                          randomSeed: e.target.value ? parseInt(e.target.value) : null\n                        }))}\n                        placeholder=\"Leave empty for random\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <label className=\"flex items-center space-x-2 text-gray-200\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"w-4 h-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500\"\n                          checked={simulationSettings.enableCorrelation}\n                          onChange={(e) => setSimulationSettings(prev => ({\n                            ...prev,\n                            enableCorrelation: e.target.checked\n                          }))}\n                        />\n                        <span>Enable Variable Correlation</span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"bg-gray-700 rounded-lg p-4\">\n                  <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\">\n                     Variable Distributions\n                  </h3>\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n                    {Object.entries(distributions).map(([variable, dist]) => (\n                      <div key={variable} className=\"bg-gray-800 border border-gray-600 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <label className=\"flex items-center space-x-2 text-gray-200\">\n                            <input\n                              type=\"checkbox\"\n                              checked={dist.enabled}\n                              onChange={(e) => updateDistribution(variable, { enabled: e.target.checked })}\n                            />\n                            <span className=\"font-medium\">{dist.name}</span>\n                          </label>\n                        </div>\n                        \n                        {dist.enabled && (\n                          <div className=\"space-y-3\">\n                            <div className=\"space-y-2\">\n                              <label className=\"block text-sm font-medium text-gray-200\">Distribution Type</label>\n                              <select\n                                className=\"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                                value={dist.type}\n                                onChange={(e) => {\n                                  const newType = e.target.value;\n                                  const typeConfig = distributionTypes.find(t => t.value === newType);\n                                  const newParameters = {};\n                                  \n                                  // Set default parameters for new type\n                                  if (newType === 'normal') {\n                                    newParameters.mean = 0.1;\n                                    newParameters.stdDev = 0.02;\n                                  } else if (newType === 'triangular') {\n                                    newParameters.min = 0.05;\n                                    newParameters.mode = 0.1;\n                                    newParameters.max = 0.15;\n                                  } else if (newType === 'uniform') {\n                                    newParameters.min = 0.05;\n                                    newParameters.max = 0.15;\n                                  }\n                                  \n                                  updateDistribution(variable, { type: newType, parameters: newParameters });\n                                }}\n                              >\n                                {distributionTypes.map(type => (\n                                  <option key={type.value} value={type.value}>\n                                    {type.label}\n                                  </option>\n                                ))}\n                              </select>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-2 gap-3\">\n                              {distributionTypes\n                                .find(t => t.value === dist.type)\n                                ?.parameters.map(param => (\n                                  <div key={param} className=\"space-y-1\">\n                                    <label className=\"block text-xs font-medium text-gray-300\">{param.charAt(0).toUpperCase() + param.slice(1)}</label>\n                                    <input\n                                      className=\"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                                      type=\"number\"\n                                      value={dist.parameters[param] || ''}\n                                      onChange={(e) => updateDistribution(variable, {\n                                        parameters: {\n                                          ...dist.parameters,\n                                          [param]: parseFloat(e.target.value)\n                                        }\n                                      })}\n                                      step=\"0.001\"\n                                    />\n                                  </div>\n                                ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                {simulationSettings.enableCorrelation && (\n                  <div className=\"bg-gray-700 rounded-lg p-4\">\n                    <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\"> Correlation Matrix</h3>\n                    <div className=\"overflow-x-auto\">\n                      <table>\n                        <thead>\n                          <tr>\n                            <th></th>\n                            {Object.keys(distributions).map(variable => (\n                              <th key={variable}>{distributions[variable].name}</th>\n                            ))}\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {Object.keys(distributions).map((variable, i) => (\n                            <tr key={variable}>\n                              <td className=\"font-medium text-gray-200 p-2 border border-gray-600\">\n                                {distributions[variable].name}\n                              </td>\n                              {Object.keys(distributions).map((_, j) => (\n                                <td key={j} className=\"p-2 border border-gray-600\">\n                                  <input\n                                    type=\"number\"\n                                    value={correlationMatrix[i][j]}\n                                    onChange={(e) => updateCorrelation(i, j, parseFloat(e.target.value))}\n                                    min=\"-1\"\n                                    max=\"1\"\n                                    step=\"0.1\"\n                                    disabled={i === j}\n                                    className=\"w-full px-2 py-1 bg-gray-800 border border-gray-600 rounded text-white text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-gray-700 disabled:text-gray-400\"\n                                  />\n                                </td>\n                              ))}\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          )}\n\n          {activeTab === 'run' && (\n            <motion.div\n              key=\"run\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <h3> Simulation Control</h3>\n                  <div className=\"flex items-center space-x-2\">\n                    {!isRunning ? (\n                      <button\n                        onClick={runSimulation}\n                        className=\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-colors\"\n                        disabled={Object.values(distributions).every(d => !d.enabled)}\n                      >\n                        <Play size={16} />\n                        <span>Run Simulation</span>\n                      </button>\n                    ) : (\n                      <button\n                        onClick={stopSimulation}\n                        className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-colors\"\n                      >\n                        <Square size={16} />\n                        <span>Stop Simulation</span>\n                      </button>\n                    )}\n                  </div>\n                </div>\n\n                {isRunning && (\n                  <div className=\"mt-4\">\n                    <div className=\"w-full bg-gray-700 rounded-full h-2 mb-2\">\n                      <div\n                        className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                        style={{ width: `${progress}%` }}\n                      />\n                    </div>\n                    <div className=\"text-sm text-gray-400 text-center\">\n                      {progress.toFixed(1)}% Complete ({Math.floor(progress * simulationSettings.iterations / 100)} / {simulationSettings.iterations} iterations)\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"bg-gray-800 rounded-lg p-4 mt-4\">\n                  <h4 className=\"text-lg font-semibold text-white mb-4 flex items-center\"> Simulation Preview</h4>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <div className=\"bg-gray-700 rounded-lg p-3 text-center\">\n                      <div className=\"text-sm text-gray-400 mb-1\">Iterations</div>\n                      <div className=\"text-xl font-bold text-white\">\n                        {simulationSettings.iterations.toLocaleString()}\n                      </div>\n                    </div>\n                    <div className=\"bg-gray-700 rounded-lg p-3 text-center\">\n                      <div className=\"text-sm text-gray-400 mb-1\">Variables</div>\n                      <div className=\"text-xl font-bold text-white\">\n                        {Object.values(distributions).filter(d => d.enabled).length}\n                      </div>\n                    </div>\n                    <div className=\"bg-gray-700 rounded-lg p-3 text-center\">\n                      <div className=\"text-sm text-gray-400 mb-1\">Confidence Level</div>\n                      <div className=\"text-xl font-bold text-white\">\n                        {(simulationSettings.confidenceLevel * 100).toFixed(0)}%\n                      </div>\n                    </div>\n                    <div className=\"bg-gray-700 rounded-lg p-3 text-center\">\n                      <div className=\"text-sm text-gray-400 mb-1\">Correlation</div>\n                      <div className=\"text-xl font-bold text-white\">\n                        {simulationSettings.enableCorrelation ? 'Enabled' : 'Disabled'}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n\n          {activeTab === 'results' && (\n            <motion.div\n              key=\"results\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              {simulationResults ? (\n                <div className=\"space-y-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <h3 className=\"text-xl font-semibold text-white flex items-center\"> Simulation Results</h3>\n                    <div className=\"flex items-center space-x-2\">\n                      <button className=\"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-colors\">\n                        <Download size={16} />\n                        Export Results\n                      </button>\n                      <button className=\"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium flex items-center space-x-2 transition-colors\">\n                        <FileText size={16} />\n                        Generate Report\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    {Object.entries(simulationResults.analysis.statistics).map(([metric, stats]) => (\n                      <div key={metric} className=\"bg-gray-700 rounded-lg p-4\">\n                        <h4 className=\"text-lg font-semibold text-white mb-3\">\n                          {metric === 'pricePerShare' ? ' Price per Share' : \n                           metric === 'enterpriseValue' ? ' Enterprise Value' : \n                           ' Upside %'}\n                        </h4>\n                        <div className=\"text-2xl font-bold text-green-400 mb-2\">\n                          {metric === 'upside' \n                            ? `${stats.mean.toFixed(1)}%` \n                            : formatCurrency(stats.mean)\n                          }\n                        </div>\n                        <div className=\"space-y-1 text-sm text-gray-300\">\n                          <div>Median: {metric === 'upside' ? `${stats.median.toFixed(1)}%` : formatCurrency(stats.median)}</div>\n                          <div>Std Dev: {metric === 'upside' ? `${stats.stdDev.toFixed(1)}%` : formatCurrency(stats.stdDev)}</div>\n                          <div>Min: {metric === 'upside' ? `${stats.min.toFixed(1)}%` : formatCurrency(stats.min)}</div>\n                          <div>Max: {metric === 'upside' ? `${stats.max.toFixed(1)}%` : formatCurrency(stats.max)}</div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                    <div className=\"bg-gray-700 rounded-lg p-4\">\n                      <h4> Price Distribution</h4>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <AreaChart data={generateHistogramData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis \n                            dataKey=\"bin\" \n                            tickFormatter={formatCurrency}\n                          />\n                          <YAxis />\n                          <Tooltip \n                            formatter={(value, name) => [\n                              `${(value * 100).toFixed(2)}%`, \n                              'Frequency'\n                            ]}\n                            labelFormatter={(value) => `Price: ${formatCurrency(value)}`}\n                          />\n                          <Area \n                            type=\"monotone\" \n                            dataKey=\"frequency\" \n                            stroke=\"#3B82F6\" \n                            fill=\"#3B82F6\" \n                            fillOpacity={0.6}\n                          />\n                        </AreaChart>\n                      </ResponsiveContainer>\n                    </div>\n\n                    <div className=\"bg-gray-700 rounded-lg p-4\">\n                      <h4> Sensitivity Scatter Plot</h4>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <ScatterChart data={generateScatterData}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis \n                            dataKey=\"x\" \n                            name=\"Revenue Growth Rate\"\n                            tickFormatter={(value) => `${value.toFixed(1)}%`}\n                          />\n                          <YAxis \n                            dataKey=\"y\" \n                            name=\"Price per Share\"\n                            tickFormatter={formatCurrency}\n                          />\n                          <Tooltip \n                            formatter={(value, name) => [\n                              name === 'Revenue Growth Rate' ? `${value.toFixed(2)}%` : formatCurrency(value),\n                              name\n                            ]}\n                          />\n                          <Scatter name=\"Scenarios\" fill=\"#10B981\">\n                            {generateScatterData.map((entry, index) => (\n                              <Cell \n                                key={`cell-${index}`}\n                                fill={entry.upside > 0 ? '#10B981' : '#EF4444'}\n                              />\n                            ))}\n                          </Scatter>\n                        </ScatterChart>\n                      </ResponsiveContainer>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                  <AlertTriangle size={48} className=\"text-gray-400 mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-white mb-2\">No Results Available</h3>\n                  <p className=\"text-gray-400\">Run a simulation to see results here.</p>\n                </div>\n              )}\n            </motion.div>\n          )}\n\n          {activeTab === 'analysis' && (\n            <motion.div\n              key=\"analysis\"\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ duration: 0.3 }}\n            >\n              {simulationResults?.analysis ? (\n                <div className=\"space-y-6\">\n                  <div className=\"bg-gray-700 rounded-lg p-4\">\n                    <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\"> Risk Metrics</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                      {Object.entries(simulationResults.analysis.riskMetrics).map(([metric, value]) => (\n                        <div key={metric} className=\"bg-gray-800 rounded-lg p-4 border border-gray-600\">\n                          <h4 className=\"text-sm font-medium text-gray-300 mb-2\">{metric === 'var95' ? 'Value at Risk (95%)' : \n                               metric === 'cvar95' ? 'Conditional VaR (95%)' : \n                               metric === 'probabilityOfLoss' ? 'Probability of Loss' : \n                               'Sharpe Ratio'}</h4>\n                          <div className=\"text-xl font-bold text-red-400 mb-1\">\n                            {metric === 'probabilityOfLoss' ? `${(value * 100).toFixed(1)}%` : formatCurrency(value)}\n                          </div>\n                          <div className=\"text-xs text-gray-400\">\n                            Risk measure\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gray-700 rounded-lg p-4\">\n                    <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\"> Confidence Intervals ({(simulationResults.analysis.confidenceIntervals.pricePerShare?.level * 100).toFixed(0)}%)</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                      {Object.entries(simulationResults.analysis.confidenceIntervals).map(([metric, interval]) => (\n                        <div key={metric} className=\"bg-gray-800 rounded-lg p-4 border border-gray-600\">\n                          <h4 className=\"text-lg font-semibold text-white mb-3\">{metric === 'pricePerShare' ? 'Price per Share' : \n                               metric === 'enterpriseValue' ? 'Enterprise Value' : \n                               'Upside %'}</h4>\n                          <div className=\"space-y-3\">\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"text-sm text-gray-400\">Lower Bound:</span>\n                              <span className=\"font-medium text-white\">{metric === 'upside' ? `${interval.lowerBound.toFixed(1)}%` : formatCurrency(interval.lowerBound)}</span>\n                            </div>\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"text-sm text-gray-400\">Upper Bound:</span>\n                              <span className=\"font-medium text-white\">{metric === 'upside' ? `${interval.upperBound.toFixed(1)}%` : formatCurrency(interval.upperBound)}</span>\n                            </div>\n                            <div className=\"flex justify-between items-center\">\n                              <span className=\"text-sm text-gray-400\">Width:</span>\n                              <span className=\"font-medium text-blue-400\">{metric === 'upside' ? `${interval.width.toFixed(1)}%` : formatCurrency(interval.width)}</span>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gray-700 rounded-lg p-4\">\n                    <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center\"> Percentile Analysis</h3>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead>\n                          <tr className=\"border-b border-gray-600\">\n                            <th className=\"text-left p-3 text-sm font-medium text-gray-300\">Metric</th>\n                            <th className=\"text-right p-3 text-sm font-medium text-gray-300\">5th %ile</th>\n                            <th className=\"text-right p-3 text-sm font-medium text-gray-300\">25th %ile</th>\n                            <th className=\"text-right p-3 text-sm font-medium text-gray-300\">50th %ile</th>\n                            <th className=\"text-right p-3 text-sm font-medium text-gray-300\">75th %ile</th>\n                            <th className=\"text-right p-3 text-sm font-medium text-gray-300\">95th %ile</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {Object.entries(simulationResults.analysis.percentiles).map(([metric, percentiles]) => (\n                            <tr key={metric} className=\"border-b border-gray-600\">\n                              <td className=\"p-3 text-sm text-white\">{metric === 'pricePerShare' ? 'Price per Share' : \n                                   metric === 'enterpriseValue' ? 'Enterprise Value' : \n                                   'Upside %'}</td>\n                              <td className=\"p-3 text-sm text-right text-gray-300\">{metric === 'upside' ? `${percentiles.p5.toFixed(1)}%` : formatCurrency(percentiles.p5)}</td>\n                              <td className=\"p-3 text-sm text-right text-gray-300\">{metric === 'upside' ? `${percentiles.p25.toFixed(1)}%` : formatCurrency(percentiles.p25)}</td>\n                              <td className=\"p-3 text-sm text-right text-blue-400 font-medium\">{metric === 'upside' ? `${percentiles.p50.toFixed(1)}%` : formatCurrency(percentiles.p50)}</td>\n                              <td className=\"p-3 text-sm text-right text-gray-300\">{metric === 'upside' ? `${percentiles.p75.toFixed(1)}%` : formatCurrency(percentiles.p75)}</td>\n                              <td className=\"p-3 text-sm text-right text-gray-300\">{metric === 'upside' ? `${percentiles.p95.toFixed(1)}%` : formatCurrency(percentiles.p95)}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                  <AlertTriangle size={48} className=\"text-gray-400 mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-white mb-2\">No Analysis Available</h3>\n                  <p className=\"text-gray-400\">Run a simulation to see analysis here.</p>\n                </div>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\nexport default MonteCarloSimulation;","import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Target, BarChart3, Activity, DollarSign, Users, Zap } from 'lucide-react';\nimport ScenarioModeling from './ScenarioModeling.jsx';\nimport SensitivityAnalysis from './SensitivityAnalysis.jsx';\nimport AdvancedDCF from './AdvancedDCF.jsx';\nimport ComparableAnalysis from './ComparableAnalysis.jsx';\nimport MonteCarloSimulation from './MonteCarloSimulation.jsx';\n\nconst ModelingTools = ({ data, adjustedValues, onDataChange }) => {\n  const [activeModel, setActiveModel] = useState('dcf');\n  const [modelInputs, setModelInputs] = useState({\n    dcf: {\n      discountRate: 10,\n      terminalGrowthRate: 2.5,\n      projectionYears: 5,\n      terminalValueMultiple: 10,\n      taxRate: 25,\n      sharesOutstanding: 1000,\n      workingCapital: {\n        receivablesDays: 45,\n        inventoryDays: 60,\n        payablesDays: 30,\n        receivablesGrowth: 2,\n        inventoryGrowth: 1.5,\n        payablesGrowth: 1.8\n      },\n      capex: {\n        capexAsPercentOfRevenue: 3.5,\n        depreciationRate: 7,\n        maintenanceCapex: 2.0\n      }\n    },\n    ratios: {\n      compareToIndustry: true,\n      industryAverages: {\n        grossMargin: 45,\n        operatingMargin: 15,\n        netMargin: 8,\n        currentRatio: 2.1,\n        debtToEquity: 0.5\n      }\n    },\n    sensitivity: {\n      variables: ['revenue', 'grossMargin', 'discountRate'],\n      ranges: {\n        revenue: { min: -20, max: 20 },\n        grossMargin: { min: -5, max: 5 },\n        discountRate: { min: 8, max: 15 }\n      }\n    },\n    scenario: {\n      scenarios: [\n        { name: 'Base Case', probability: 50, revenueGrowth: 15, marginImprovement: 0 },\n        { name: 'Bull Case', probability: 25, revenueGrowth: 25, marginImprovement: 2 },\n        { name: 'Bear Case', probability: 25, revenueGrowth: 5, marginImprovement: -2 }\n      ]\n    }\n  });\n\n  // Calculate financial metrics from the spreadsheet data\n  const calculatedMetrics = useMemo(() => {\n    const statements = data.statements.incomeStatement;\n    const periods = data.periods;\n    \n    const metrics = {\n      revenue: [],\n      grossProfit: [],\n      operatingIncome: [],\n      margins: {\n        gross: [],\n        operating: [],\n        net: []\n      },\n      growth: {\n        revenue: [],\n        operating: []\n      }\n    };\n\n    periods.forEach((_, index) => {\n      // Revenue metrics - Use adjusted values for latest period when available\n      const isLatestPeriod = index === periods.length - 1;\n      const revenue = isLatestPeriod && adjustedValues?.totalRevenue \n        ? adjustedValues.totalRevenue \n        : statements.totalRevenue?.[index] || 0;\n      const totalCOGS = isLatestPeriod && adjustedValues?.totalCostOfGoodsSold \n        ? adjustedValues.totalCostOfGoodsSold \n        : statements.totalCostOfGoodsSold?.[index] || 0;\n      const grossProfit = isLatestPeriod && adjustedValues?.grossProfit \n        ? adjustedValues.grossProfit \n        : statements.grossProfit?.[index] || (revenue - totalCOGS);\n      const operatingIncome = isLatestPeriod && adjustedValues?.operatingIncome \n        ? adjustedValues.operatingIncome \n        : statements.operatingIncome?.[index] || 0;\n      \n      metrics.revenue.push(revenue);\n      metrics.grossProfit.push(grossProfit);\n      metrics.operatingIncome.push(operatingIncome);\n      \n      // Margin calculations\n      metrics.margins.gross.push(revenue ? (grossProfit / revenue) * 100 : 0);\n      metrics.margins.operating.push(revenue ? (operatingIncome / revenue) * 100 : 0);\n      \n      // Growth calculations\n      if (index > 0) {\n        const prevRevenue = statements.totalRevenue?.[index - 1] || 0;\n        const prevOperating = statements.operatingIncome?.[index - 1] || 0;\n        \n        metrics.growth.revenue.push(prevRevenue ? ((revenue - prevRevenue) / prevRevenue) * 100 : 0);\n        metrics.growth.operating.push(prevOperating ? ((operatingIncome - prevOperating) / prevOperating) * 100 : 0);\n      }\n    });\n\n    return metrics;\n  }, [data]);\n\n  // DCF Calculation - Enhanced to work with scenario data\n  const calculateDCF = (inputData = null) => {\n    const { discountRate, terminalGrowthRate, projectionYears, taxRate } = modelInputs.dcf;\n    const sourceData = inputData || data;\n    \n    // Use either scenario data or calculated metrics\n    let operatingIncomes;\n    if (inputData) {\n      // For scenario data, extract operating incomes directly\n      operatingIncomes = [];\n      sourceData.periods.forEach((_, index) => {\n        if (index > 0 && index <= projectionYears) {\n          operatingIncomes.push(sourceData.statements.incomeStatement.operatingIncome?.[index] || 0);\n        }\n      });\n    } else {\n      // For regular calculation, use calculated metrics\n      operatingIncomes = calculatedMetrics.operatingIncome.slice(1, projectionYears + 1);\n    }\n    \n    if (operatingIncomes.length === 0) return { enterpriseValue: 0, equityValue: 0, sharePrice: 0 };\n\n    let presentValue = 0;\n    const discountFactor = 1 + (discountRate / 100);\n\n    // Calculate present value of cash flows\n    operatingIncomes.forEach((income, index) => {\n      const afterTaxIncome = income * (1 - taxRate / 100);\n      const pv = afterTaxIncome / Math.pow(discountFactor, index + 1);\n      presentValue += pv;\n    });\n\n    // Terminal value\n    const lastYearIncome = operatingIncomes[operatingIncomes.length - 1] || 0;\n    const terminalCashFlow = lastYearIncome * (1 + terminalGrowthRate / 100) * (1 - taxRate / 100);\n    const terminalValue = terminalCashFlow / ((discountRate - terminalGrowthRate) / 100);\n    const presentTerminalValue = terminalValue / Math.pow(discountFactor, projectionYears);\n\n    const enterpriseValue = presentValue + presentTerminalValue;\n    \n    return {\n      enterpriseValue,\n      equityValue: enterpriseValue, // Simplified - would subtract net debt\n      presentValueOperations: presentValue,\n      presentValueTerminal: presentTerminalValue,\n      terminalValue\n    };\n  };\n\n  const dcfResults = calculateDCF();\n\n  const modelTypes = [\n    { id: 'dcf', label: 'DCF Valuation', icon: DollarSign, description: 'Discounted Cash Flow analysis' },\n    { id: 'ratios', label: 'Ratio Analysis', icon: BarChart3, description: 'Financial ratio comparison' },\n    { id: 'sensitivity', label: 'Sensitivity Analysis', icon: Activity, description: 'Variable impact analysis' },\n    { id: 'scenario', label: 'Scenario Modeling', icon: Target, description: 'Multi-scenario projections' },\n    { id: 'comparable', label: 'Comparable Analysis', icon: Users, description: 'Market-based valuation' },\n    { id: 'montecarlo', label: 'Monte Carlo', icon: Zap, description: 'Probabilistic risk analysis' }\n  ];\n\n  const updateModelInput = (modelType, field, value) => {\n    setModelInputs(prev => ({\n      ...prev,\n      [modelType]: {\n        ...prev[modelType],\n        [field]: value\n      }\n    }));\n  };\n\n  const formatCurrency = (value) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(value * 1000); // Convert from thousands\n  };\n\n  const formatPercent = (value) => {\n    return `${value.toFixed(1)}%`;\n  };\n\n  return (\n    <div className=\"h-full bg-gray-900 text-white p-6\">\n      {/* Streamlined Model Selection */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-xl font-semibold text-white\">Financial Modeling</h2>\n            <p className=\"text-gray-400 text-sm mt-1\">Select a modeling approach to analyze your financial data</p>\n          </div>\n        </div>\n        \n        <div className=\"flex flex-wrap gap-2 mb-6\">\n          {modelTypes.map((type) => {\n            const Icon = type.icon;\n            return (\n              <button\n                key={type.id}\n                onClick={() => setActiveModel(type.id)}\n                className={`${\n                  activeModel === type.id \n                    ? 'bg-blue-600 text-white border-blue-500 shadow-lg' \n                    : 'bg-gray-800 text-gray-300 border-gray-700 hover:bg-gray-700 hover:text-white hover:border-gray-600'\n                } flex items-center gap-3 px-4 py-3 rounded-lg border transition-all duration-200`}\n              >\n                <Icon size={18} className={activeModel === type.id ? 'text-white' : 'text-blue-400'} />\n                <span className=\"font-medium\">{type.label}</span>\n              </button>\n            );\n          })}\n        </div>\n        \n        {/* Active Model Description */}\n        <div className=\"bg-gray-800 border border-gray-700 rounded-lg p-4\">\n          <div className=\"flex items-center gap-3\">\n            {React.createElement(modelTypes.find(t => t.id === activeModel)?.icon, { \n              size: 20, \n              className: \"text-blue-400\" \n            })}\n            <div>\n              <h3 className=\"font-medium text-white\">\n                {modelTypes.find(t => t.id === activeModel)?.label}\n              </h3>\n              <p className=\"text-gray-400 text-sm\">\n                {modelTypes.find(t => t.id === activeModel)?.description}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Model Content */}\n      <div>\n        {activeModel === 'dcf' && (\n          <div className=\"p-6\">\n            <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2 text-white\">\n              <DollarSign size={20} className=\"text-blue-400\" />\n              DCF Valuation Model\n            </h3>\n            \n            <AdvancedDCF\n              data={data}\n              modelInputs={modelInputs}\n              onModelInputChange={updateModelInput}\n              formatCurrency={formatCurrency}\n              formatPercent={formatPercent}\n            />\n          </div>\n        )}\n\n        {activeModel === 'ratios' && (\n          <div className=\"p-6\">\n            <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2 text-white\">\n              <BarChart3 size={20} />\n              Financial Ratio Analysis\n            </h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {/* Profitability Ratios */}\n              <div>\n                <h4 className=\"font-semibold mb-3 text-gray-200\">Profitability Ratios</h4>\n                <div className=\"space-y-3\">\n                  {calculatedMetrics.margins.gross.map((margin, index) => (\n                    <div key={index} className=\"flex justify-between\">\n                      <span className=\"text-sm\">{data.periods[index + 1]} Gross Margin:</span>\n                      <span className=\"font-medium\">{formatPercent(margin)}</span>\n                    </div>\n                  ))}\n                  {calculatedMetrics.margins.operating.map((margin, index) => (\n                    <div key={index} className=\"flex justify-between\">\n                      <span className=\"text-sm\">{data.periods[index + 1]} Operating Margin:</span>\n                      <span className=\"font-medium\">{formatPercent(margin)}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Growth Ratios */}\n              <div>\n                <h4 className=\"font-semibold mb-3 text-gray-200\">Growth Rates</h4>\n                <div className=\"space-y-3\">\n                  {calculatedMetrics.growth.revenue.map((growth, index) => (\n                    <div key={index} className=\"flex justify-between\">\n                      <span className=\"text-sm\">{data.periods[index + 1]} Revenue Growth:</span>\n                      <span className={`font-medium ${growth >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        {formatPercent(growth)}\n                      </span>\n                    </div>\n                  ))}\n                  {calculatedMetrics.growth.operating.map((growth, index) => (\n                    <div key={index} className=\"flex justify-between\">\n                      <span className=\"text-sm\">{data.periods[index + 1]} Operating Growth:</span>\n                      <span className={`font-medium ${growth >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                        {formatPercent(growth)}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Industry Comparison */}\n              <div>\n                <h4 className=\"font-semibold mb-3 text-gray-200\">Industry Comparison</h4>\n                <div className=\"space-y-3\">\n                  <div className=\"p-3 bg-gray-700 rounded-lg\">\n                    <div className=\"text-xs text-gray-400 uppercase tracking-wide\">Industry Avg</div>\n                    <div className=\"text-sm\">Gross Margin: {formatPercent(modelInputs.ratios.industryAverages.grossMargin)}</div>\n                    <div className=\"text-sm\">Operating Margin: {formatPercent(modelInputs.ratios.industryAverages.operatingMargin)}</div>\n                    <div className=\"text-sm\">Net Margin: {formatPercent(modelInputs.ratios.industryAverages.netMargin)}</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeModel === 'sensitivity' && (\n          <div className=\"p-6\">\n            <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2 text-white\">\n              <Activity size={20} />\n              Sensitivity Analysis\n            </h3>\n            \n            <SensitivityAnalysis\n              data={data}\n              modelInputs={modelInputs}\n              onModelInputChange={updateModelInput}\n              calculateDCF={calculateDCF}\n              formatCurrency={formatCurrency}\n              formatPercent={formatPercent}\n            />\n          </div>\n        )}\n\n        {activeModel === 'scenario' && (\n          <div className=\"p-6\">\n            <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2 text-white\">\n              <Target size={20} />\n              Scenario Modeling\n            </h3>\n            \n            <ScenarioModeling\n              data={data}\n              modelInputs={modelInputs}\n              onModelInputChange={updateModelInput}\n              calculateDCF={calculateDCF}\n              formatCurrency={formatCurrency}\n              formatPercent={formatPercent}\n            />\n          </div>\n        )}\n\n        {activeModel === 'comparable' && (\n          <div className=\"p-6\">\n            <ComparableAnalysis\n              data={data}\n              formatCurrency={formatCurrency}\n              formatPercent={formatPercent}\n            />\n          </div>\n        )}\n\n        {activeModel === 'montecarlo' && (\n          <div className=\"p-6\">\n            <h3 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\n              <Zap size={20} />\n              Monte Carlo Simulation\n            </h3>\n            \n            <MonteCarloSimulation\n              data={data}\n              onDataChange={onDataChange}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ModelingTools;\n","import React, { useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  TrendingUp, \n  TrendingDown, \n  DollarSign, \n  Percent, \n  BarChart3,\n  Target,\n  AlertTriangle,\n  CheckCircle,\n  Calculator,\n  PieChart,\n  Activity,\n  Zap,\n  Shield,\n  Clock,\n  Layers,\n  Award,\n  TrendingDown as Decline,\n  Eye,\n  FileText,\n  BarChart2,\n  LineChart,\n  Timer,\n  ArrowUpRight,\n  ArrowDownRight,\n  Gauge,\n  CreditCard,\n  Banknote,\n  Building2,\n  Users,\n  Star\n} from 'lucide-react';\n\nconst AnalysisResults = ({ \n  data, \n  adjustedValues,\n  modelInputs, \n  calculateDCF, \n  formatCurrency, \n  formatPercentage \n}) => {\n  // Calculate comprehensive financial metrics\n  const analysis = useMemo(() => {\n    try {\n      if (!data?.statements?.incomeStatement) return null;\n\n      const income = data.statements.incomeStatement;\n      const periods = Object.keys(income.totalRevenue || {}).sort((a, b) => parseInt(a) - parseInt(b));\n      \n      if (periods.length < 2) return null;\n\n    const latest = periods[periods.length - 1];\n    const previous = periods[periods.length - 2];\n    const earliest = periods[0];\n\n    // Financial Performance Analysis - Use adjusted values for latest period when available\n    const revenueLatest = adjustedValues?.totalRevenue || income.totalRevenue?.[latest] || 0;\n    const revenuePrevious = income.totalRevenue?.[previous] || 0;\n    const revenueEarliest = income.totalRevenue?.[earliest] || 0;\n    \n    const grossProfitLatest = adjustedValues?.grossProfit || income.grossProfit?.[latest] || 0;\n    const grossProfitPrevious = income.grossProfit?.[previous] || 0;\n    \n    const operatingIncomeLatest = adjustedValues?.operatingIncome || income.operatingIncome?.[latest] || 0;\n    const operatingIncomePrevious = income.operatingIncome?.[previous] || 0;\n    \n    const totalCOGSLatest = adjustedValues?.totalCostOfGoodsSold || income.totalCostOfGoodsSold?.[latest] || 0;\n    const totalCOGSPrevious = income.totalCostOfGoodsSold?.[previous] || 0;\n\n    // Growth Calculations\n    const revenueGrowthYoY = revenuePrevious ? ((revenueLatest - revenuePrevious) / revenuePrevious) * 100 : 0;\n    const revenueCAGR = revenueEarliest && periods.length > 2 ? \n      (Math.pow(revenueLatest / revenueEarliest, 1 / (periods.length - 1)) - 1) * 100 : 0;\n    \n    const grossProfitGrowth = grossProfitPrevious ? ((grossProfitLatest - grossProfitPrevious) / grossProfitPrevious) * 100 : 0;\n    const operatingIncomeGrowth = operatingIncomePrevious ? ((operatingIncomeLatest - operatingIncomePrevious) / operatingIncomePrevious) * 100 : 0;\n\n    // Profitability Ratios (with safe calculations)\n    const grossMarginLatest = (revenueLatest && revenueLatest !== 0) ? (grossProfitLatest / revenueLatest) * 100 : 0;\n    const grossMarginPrevious = (revenuePrevious && revenuePrevious !== 0) ? (grossProfitPrevious / revenuePrevious) * 100 : 0;\n    const operatingMarginLatest = (revenueLatest && revenueLatest !== 0) ? (operatingIncomeLatest / revenueLatest) * 100 : 0;\n    const operatingMarginPrevious = (revenuePrevious && revenuePrevious !== 0) ? (operatingIncomePrevious / revenuePrevious) * 100 : 0;\n    \n    const marginImprovement = isFinite(grossMarginLatest) && isFinite(grossMarginPrevious) ? grossMarginLatest - grossMarginPrevious : 0;\n    const operatingMarginChange = isFinite(operatingMarginLatest) && isFinite(operatingMarginPrevious) ? operatingMarginLatest - operatingMarginPrevious : 0;\n\n    // DCF Analysis\n    let dcfResults = null;\n    if (calculateDCF) {\n      try {\n        dcfResults = calculateDCF(data);\n      } catch (error) {\n        console.error('DCF calculation error:', error);\n      }\n    }\n\n    // Business Unit Analysis (Revenue Breakdown) - with safe value access\n    const revenueBreakdown = [\n      { name: 'Energy Devices', value: Number(income.energyDevices?.[latest]) || 0 },\n      { name: 'Injectables', value: Number(income.injectables?.[latest]) || 0 },\n      { name: 'Wellness', value: Number(income.wellness?.[latest]) || 0 },\n      { name: 'Weightloss', value: Number(income.weightloss?.[latest]) || 0 },\n      { name: 'Retail Sales', value: Number(income.retailSales?.[latest]) || 0 },\n      { name: 'Surgery', value: Number(income.surgery?.[latest]) || 0 }\n    ].filter(item => item.value > 0 && isFinite(item.value));\n\n    // Advanced Financial Ratios and Metrics\n    const totalAssets = income.totalAssets?.[latest] || revenueLatest * 1.2; // Estimate if not provided\n    const totalEquity = income.totalEquity?.[latest] || totalAssets * 0.6; // Estimate if not provided\n    const totalDebt = income.totalDebt?.[latest] || totalAssets * 0.3; // Estimate if not provided\n    const currentAssets = income.currentAssets?.[latest] || totalAssets * 0.4; // Estimate if not provided\n    const currentLiabilities = income.currentLiabilities?.[latest] || totalAssets * 0.2; // Estimate if not provided\n    const inventory = income.inventory?.[latest] || revenueLatest * 0.15; // Estimate if not provided\n    const accountsReceivable = income.accountsReceivable?.[latest] || revenueLatest * 0.1; // Estimate if not provided\n    const cashAndEquivalents = income.cashAndEquivalents?.[latest] || totalAssets * 0.1; // Estimate if not provided\n    \n    // Advanced Ratios\n    const returnOnAssets = (totalAssets && totalAssets !== 0) ? (operatingIncomeLatest / totalAssets) * 100 : 0;\n    const returnOnEquity = (totalEquity && totalEquity !== 0) ? (operatingIncomeLatest / totalEquity) * 100 : 0;\n    const debtToEquity = (totalEquity && totalEquity !== 0) ? totalDebt / totalEquity : 0;\n    const currentRatio = (currentLiabilities && currentLiabilities !== 0) ? currentAssets / currentLiabilities : 0;\n    const quickRatio = (currentLiabilities && currentLiabilities !== 0) ? (currentAssets - inventory) / currentLiabilities : 0;\n    const assetTurnover = (totalAssets && totalAssets !== 0) ? revenueLatest / totalAssets : 0;\n    const inventoryTurnover = (inventory && inventory !== 0) ? (revenueLatest * 0.7) / inventory : 0; // Assuming COGS is 70% of revenue\n    const receivablesTurnover = (accountsReceivable && accountsReceivable !== 0) ? revenueLatest / accountsReceivable : 0;\n    const cashRatio = (currentLiabilities && currentLiabilities !== 0) ? cashAndEquivalents / currentLiabilities : 0;\n    const workingCapital = currentAssets - currentLiabilities;\n    const workingCapitalRatio = (revenueLatest && revenueLatest !== 0) ? workingCapital / revenueLatest : 0;\n    \n    // Efficiency Metrics\n    const operatingCycle = inventoryTurnover > 0 && receivablesTurnover > 0 ? (365 / inventoryTurnover) + (365 / receivablesTurnover) : 0;\n    const cashConversionCycle = operatingCycle > 0 ? operatingCycle - 30 : 0; // Assuming 30 days payable period\n    \n    // Growth Quality Metrics\n    const operatingLeverage = grossProfitPrevious !== 0 ? (operatingIncomeGrowth / revenueGrowthYoY) : 0;\n    const profitabilityTrend = (operatingMarginLatest - operatingMarginPrevious) * 100;\n    \n    // Risk Metrics\n    const financialLeverage = (totalEquity && totalEquity !== 0) ? totalAssets / totalEquity : 0;\n    const interestCoverage = income.interestExpense?.[latest] ? operatingIncomeLatest / income.interestExpense[latest] : 0;\n    const debtServiceCoverage = income.debtService?.[latest] ? operatingIncomeLatest / income.debtService[latest] : 0;\n    \n    // Market & Valuation Metrics (estimated)\n    const revenuePerEmployee = income.employeeCount?.[latest] ? revenueLatest / income.employeeCount[latest] : 0;\n    const revenuePerShare = income.sharesOutstanding?.[latest] ? revenueLatest / income.sharesOutstanding[latest] : 0;\n    const bookValuePerShare = income.sharesOutstanding?.[latest] && totalEquity ? totalEquity / income.sharesOutstanding[latest] : 0;\n    \n    // Industry Benchmarks (Healthcare/Medical Device estimates)\n    const industryBenchmarks = {\n      grossMargin: 65,\n      operatingMargin: 18,\n      returnOnAssets: 8,\n      returnOnEquity: 15,\n      currentRatio: 2.5,\n      debtToEquity: 0.4,\n      assetTurnover: 0.8,\n      revenueGrowth: 8\n    };\n    \n    // Performance vs Benchmarks\n    const benchmarkComparison = {\n      grossMargin: grossMarginLatest - industryBenchmarks.grossMargin,\n      operatingMargin: operatingMarginLatest - industryBenchmarks.operatingMargin,\n      returnOnAssets: returnOnAssets - industryBenchmarks.returnOnAssets,\n      returnOnEquity: returnOnEquity - industryBenchmarks.returnOnEquity,\n      currentRatio: currentRatio - industryBenchmarks.currentRatio,\n      debtToEquity: industryBenchmarks.debtToEquity - debtToEquity, // Lower is better\n      assetTurnover: assetTurnover - industryBenchmarks.assetTurnover,\n      revenueGrowth: revenueGrowthYoY - industryBenchmarks.revenueGrowth\n    };\n    \n    // Comprehensive KPI Suite\n    const kpis = [\n      {\n        title: 'Revenue Growth',\n        value: `${revenueGrowthYoY > 0 ? '+' : ''}${isFinite(revenueGrowthYoY) ? revenueGrowthYoY.toFixed(1) : '0.0'}%`,\n        trend: revenueGrowthYoY > 0 ? 'up' : 'down',\n        description: 'Year-over-year revenue growth rate',\n        icon: TrendingUp,\n        benchmark: industryBenchmarks.revenueGrowth,\n        performance: benchmarkComparison.revenueGrowth\n      },\n      {\n        title: 'Gross Margin',\n        value: `${isFinite(grossMarginLatest) ? grossMarginLatest.toFixed(1) : '0.0'}%`,\n        trend: marginImprovement > 0 ? 'up' : 'down',\n        description: `${marginImprovement > 0 ? '+' : ''}${isFinite(marginImprovement) ? marginImprovement.toFixed(1) : '0.0'}% vs prior year`,\n        icon: Percent,\n        benchmark: industryBenchmarks.grossMargin,\n        performance: benchmarkComparison.grossMargin\n      },\n      {\n        title: 'Operating Margin',\n        value: `${isFinite(operatingMarginLatest) ? operatingMarginLatest.toFixed(1) : '0.0'}%`,\n        trend: operatingMarginChange > 0 ? 'up' : 'down',\n        description: `${operatingMarginChange > 0 ? '+' : ''}${isFinite(operatingMarginChange) ? operatingMarginChange.toFixed(1) : '0.0'}% vs prior year`,\n        icon: BarChart3,\n        benchmark: industryBenchmarks.operatingMargin,\n        performance: benchmarkComparison.operatingMargin\n      },\n      {\n        title: 'Return on Assets',\n        value: `${isFinite(returnOnAssets) ? returnOnAssets.toFixed(1) : '0.0'}%`,\n        trend: returnOnAssets > industryBenchmarks.returnOnAssets ? 'up' : 'down',\n        description: 'Asset utilization efficiency',\n        icon: Target,\n        benchmark: industryBenchmarks.returnOnAssets,\n        performance: benchmarkComparison.returnOnAssets\n      },\n      {\n        title: 'Return on Equity',\n        value: `${isFinite(returnOnEquity) ? returnOnEquity.toFixed(1) : '0.0'}%`,\n        trend: returnOnEquity > industryBenchmarks.returnOnEquity ? 'up' : 'down',\n        description: 'Shareholder value generation',\n        icon: Award,\n        benchmark: industryBenchmarks.returnOnEquity,\n        performance: benchmarkComparison.returnOnEquity\n      },\n      {\n        title: 'Current Ratio',\n        value: `${isFinite(currentRatio) ? currentRatio.toFixed(1) : '0.0'}x`,\n        trend: currentRatio > 2.0 ? 'up' : currentRatio > 1.5 ? 'neutral' : 'down',\n        description: 'Short-term liquidity strength',\n        icon: Shield,\n        benchmark: industryBenchmarks.currentRatio,\n        performance: benchmarkComparison.currentRatio\n      },\n      {\n        title: 'Asset Turnover',\n        value: `${isFinite(assetTurnover) ? assetTurnover.toFixed(1) : '0.0'}x`,\n        trend: assetTurnover > industryBenchmarks.assetTurnover ? 'up' : 'down',\n        description: 'Revenue per dollar of assets',\n        icon: Zap,\n        benchmark: industryBenchmarks.assetTurnover,\n        performance: benchmarkComparison.assetTurnover\n      },\n      {\n        title: 'Debt-to-Equity',\n        value: `${isFinite(debtToEquity) ? debtToEquity.toFixed(1) : '0.0'}x`,\n        trend: debtToEquity < industryBenchmarks.debtToEquity ? 'up' : 'down',\n        description: 'Financial leverage position',\n        icon: CreditCard,\n        benchmark: industryBenchmarks.debtToEquity,\n        performance: benchmarkComparison.debtToEquity\n      }\n    ];\n    \n    // Liquidity Analysis\n    const liquidityMetrics = [\n      {\n        name: 'Current Ratio',\n        value: currentRatio,\n        formatted: `${currentRatio.toFixed(2)}x`,\n        benchmark: 2.5,\n        status: currentRatio >= 2.5 ? 'excellent' : currentRatio >= 2.0 ? 'good' : currentRatio >= 1.5 ? 'fair' : 'poor'\n      },\n      {\n        name: 'Quick Ratio',\n        value: quickRatio,\n        formatted: `${quickRatio.toFixed(2)}x`,\n        benchmark: 1.5,\n        status: quickRatio >= 1.5 ? 'excellent' : quickRatio >= 1.0 ? 'good' : quickRatio >= 0.8 ? 'fair' : 'poor'\n      },\n      {\n        name: 'Cash Ratio',\n        value: cashRatio,\n        formatted: `${cashRatio.toFixed(2)}x`,\n        benchmark: 0.5,\n        status: cashRatio >= 0.5 ? 'excellent' : cashRatio >= 0.3 ? 'good' : cashRatio >= 0.2 ? 'fair' : 'poor'\n      },\n      {\n        name: 'Working Capital',\n        value: workingCapital,\n        formatted: formatCurrency(workingCapital),\n        benchmark: revenueLatest * 0.15,\n        status: workingCapital >= revenueLatest * 0.15 ? 'excellent' : workingCapital >= 0 ? 'good' : 'poor'\n      }\n    ];\n    \n    // Efficiency Analysis\n    const efficiencyMetrics = [\n      {\n        name: 'Asset Turnover',\n        value: assetTurnover,\n        formatted: `${assetTurnover.toFixed(2)}x`,\n        description: 'Revenue generation per asset dollar'\n      },\n      {\n        name: 'Inventory Turnover',\n        value: inventoryTurnover,\n        formatted: `${inventoryTurnover.toFixed(1)}x`,\n        description: 'Inventory management efficiency'\n      },\n      {\n        name: 'Receivables Turnover',\n        value: receivablesTurnover,\n        formatted: `${receivablesTurnover.toFixed(1)}x`,\n        description: 'Collection efficiency'\n      },\n      {\n        name: 'Operating Cycle',\n        value: operatingCycle,\n        formatted: `${operatingCycle.toFixed(0)} days`,\n        description: 'Cash-to-cash cycle duration'\n      }\n    ];\n    \n    // Risk Assessment\n    const riskMetrics = [\n      {\n        name: 'Financial Leverage',\n        value: financialLeverage,\n        formatted: `${financialLeverage.toFixed(1)}x`,\n        level: financialLeverage < 2 ? 'low' : financialLeverage < 3 ? 'moderate' : 'high'\n      },\n      {\n        name: 'Debt-to-Equity',\n        value: debtToEquity,\n        formatted: `${debtToEquity.toFixed(2)}x`,\n        level: debtToEquity < 0.3 ? 'low' : debtToEquity < 0.6 ? 'moderate' : 'high'\n      },\n      {\n        name: 'Interest Coverage',\n        value: interestCoverage,\n        formatted: `${interestCoverage.toFixed(1)}x`,\n        level: interestCoverage > 10 ? 'low' : interestCoverage > 5 ? 'moderate' : 'high'\n      }\n    ];\n\n      return {\n        periods,\n        latest,\n        previous,\n        revenue: {\n          latest: revenueLatest,\n          previous: revenuePrevious,\n          growth: revenueGrowthYoY,\n          cagr: revenueCAGR\n        },\n        profitability: {\n          grossMargin: grossMarginLatest,\n          grossMarginChange: marginImprovement,\n          operatingMargin: operatingMarginLatest,\n          operatingMarginChange,\n          operatingLeverage,\n          profitabilityTrend\n        },\n        financial: {\n          returnOnAssets,\n          returnOnEquity,\n          assetTurnover,\n          totalAssets,\n          totalEquity,\n          totalDebt,\n          workingCapital,\n          workingCapitalRatio\n        },\n        liquidity: {\n          currentRatio,\n          quickRatio,\n          cashRatio,\n          cashAndEquivalents,\n          currentAssets,\n          currentLiabilities\n        },\n        efficiency: {\n          inventoryTurnover,\n          receivablesTurnover,\n          operatingCycle,\n          cashConversionCycle\n        },\n        risk: {\n          debtToEquity,\n          financialLeverage,\n          interestCoverage,\n          debtServiceCoverage\n        },\n        market: {\n          revenuePerEmployee,\n          revenuePerShare,\n          bookValuePerShare\n        },\n        benchmarks: {\n          industry: industryBenchmarks,\n          comparison: benchmarkComparison\n        },\n        dcf: dcfResults,\n        revenueBreakdown,\n        kpis,\n        liquidityMetrics,\n        efficiencyMetrics,\n        riskMetrics\n      };\n    } catch (error) {\n      console.error('Error in AnalysisResults analysis calculation:', error);\n      return null;\n    }\n  }, [data, calculateDCF]);\n\n  if (!analysis) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <AlertTriangle className=\"mx-auto h-12 w-12 text-yellow-400 mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Insufficient Data</h3>\n          <p className=\"text-gray-500\">Please ensure financial data is loaded to generate analysis results.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const MetricCard = ({ title, value, trend, description, icon: Icon, benchmark, performance }) => (\n    <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-gray-600 transition-all duration-200\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`p-2 rounded-lg ${\n            trend === 'up' ? 'bg-green-900/30 text-green-400' : \n            trend === 'down' ? 'bg-red-900/30 text-red-400' : \n            'bg-gray-700 text-gray-400'\n          }`}>\n            <Icon className=\"h-5 w-5\" />\n          </div>\n          <div>\n            <div className=\"text-sm font-medium text-gray-300\">{title}</div>\n            <div className=\"text-xs text-gray-500 mt-1\">{description}</div>\n          </div>\n        </div>\n        {trend === 'up' && <TrendingUp className=\"h-5 w-5 text-green-400 flex-shrink-0\" />}\n        {trend === 'down' && <TrendingDown className=\"h-5 w-5 text-red-400 flex-shrink-0\" />}\n      </div>\n      <div className=\"text-3xl font-bold text-white mb-2\">{value}</div>\n      {benchmark && (\n        <div className=\"border-t border-gray-700 pt-3 mt-3\">\n          <div className=\"flex justify-between text-xs\">\n            <span className=\"text-gray-400\">Industry Avg:</span>\n            <span className=\"text-gray-300\">{typeof benchmark === 'number' ? benchmark.toFixed(1) + (title.includes('%') ? '%' : title.includes('x') ? 'x' : '') : benchmark}</span>\n          </div>\n          <div className=\"flex justify-between text-xs mt-1\">\n            <span className=\"text-gray-400\">vs Industry:</span>\n            <span className={`font-medium ${\n              performance > 0 ? 'text-green-400' : performance < 0 ? 'text-red-400' : 'text-gray-300'\n            }`}>\n              {performance > 0 ? '+' : ''}{performance?.toFixed(1) || '0.0'}\n            </span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"space-y-6 p-6 bg-gray-900 text-white h-full\">\n      {/* Header */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n        <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center\">\n          <BarChart3 className=\"h-6 w-6 text-blue-400 mr-3\" />\n          Financial Analysis Results\n        </h2>\n        <p className=\"text-gray-400\">\n          Comprehensive analysis of your company's financial performance and valuation\n        </p>\n      </div>\n\n      {/* Key Performance Indicators */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {analysis.kpis.map((kpi, index) => (\n          <MetricCard key={index} {...kpi} />\n        ))}\n      </div>\n\n      {/* Advanced Financial Analysis Tabs */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 overflow-hidden\">\n        <div className=\"flex border-b border-gray-700\">\n          <button className=\"px-6 py-3 text-sm font-medium text-white bg-blue-600 border-r border-gray-700\">\n            Liquidity Analysis\n          </button>\n          <button className=\"px-6 py-3 text-sm font-medium text-gray-400 hover:text-white border-r border-gray-700\">\n            Efficiency Metrics\n          </button>\n          <button className=\"px-6 py-3 text-sm font-medium text-gray-400 hover:text-white border-r border-gray-700\">\n            Risk Assessment\n          </button>\n          <button className=\"px-6 py-3 text-sm font-medium text-gray-400 hover:text-white\">\n            Benchmarking\n          </button>\n        </div>\n        \n        {/* Liquidity Analysis Panel */}\n        <div className=\"p-6\">\n          <div className=\"flex items-center mb-4\">\n            <Shield className=\"h-5 w-5 text-blue-400 mr-2\" />\n            <h3 className=\"text-lg font-semibold text-white\">Liquidity Position Analysis</h3>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            {analysis.liquidityMetrics.map((metric, index) => (\n              <div key={index} className=\"bg-gray-700 rounded-lg p-4 border border-gray-600\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"text-sm font-medium text-gray-200\">{metric.name}</span>\n                  <span className={`px-2 py-1 rounded text-xs font-medium ${\n                    metric.status === 'excellent' ? 'bg-green-900/30 text-green-400' :\n                    metric.status === 'good' ? 'bg-blue-900/30 text-blue-400' :\n                    metric.status === 'fair' ? 'bg-yellow-900/30 text-yellow-400' :\n                    'bg-red-900/30 text-red-400'\n                  }`}>\n                    {metric.status}\n                  </span>\n                </div>\n                <div className=\"text-xl font-bold text-white mb-1\">{metric.formatted}</div>\n                <div className=\"text-xs text-gray-400\">\n                  Benchmark: {typeof metric.benchmark === 'number' ? metric.benchmark.toFixed(1) + 'x' : formatCurrency(metric.benchmark)}\n                </div>\n              </div>\n            ))}\n          </div>\n          \n          <div className=\"mt-6 p-4 bg-gray-750 rounded-lg border border-gray-600\">\n            <h4 className=\"font-medium text-gray-200 mb-3 flex items-center\">\n              <Eye className=\"h-4 w-4 text-blue-400 mr-2\" />\n              Liquidity Analysis Summary\n            </h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n              <div>\n                <span className=\"text-gray-400\">Working Capital:</span>\n                <span className=\"text-white ml-2 font-medium\">{formatCurrency(analysis.financial.workingCapital)}</span>\n              </div>\n              <div>\n                <span className=\"text-gray-400\">Cash Position:</span>\n                <span className=\"text-white ml-2 font-medium\">{formatCurrency(analysis.liquidity.cashAndEquivalents)}</span>\n              </div>\n              <div>\n                <span className=\"text-gray-400\">Current Assets:</span>\n                <span className=\"text-white ml-2 font-medium\">{formatCurrency(analysis.liquidity.currentAssets)}</span>\n              </div>\n              <div>\n                <span className=\"text-gray-400\">Current Liabilities:</span>\n                <span className=\"text-white ml-2 font-medium\">{formatCurrency(analysis.liquidity.currentLiabilities)}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Efficiency & Operations Analysis */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n        <div className=\"flex items-center mb-6\">\n          <Zap className=\"h-5 w-5 text-orange-400 mr-2\" />\n          <h3 className=\"text-lg font-semibold text-white\">Operational Efficiency Metrics</h3>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {analysis.efficiencyMetrics.map((metric, index) => (\n            <div key={index} className=\"bg-gray-700 rounded-lg p-4 border border-gray-600\">\n              <div className=\"text-sm font-medium text-gray-200 mb-2\">{metric.name}</div>\n              <div className=\"text-xl font-bold text-white mb-1\">{metric.formatted}</div>\n              <div className=\"text-xs text-gray-400\">{metric.description}</div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-gray-750 rounded-lg p-4 border border-gray-600\">\n            <div className=\"flex items-center mb-2\">\n              <Timer className=\"h-4 w-4 text-orange-400 mr-2\" />\n              <span className=\"text-sm font-medium text-gray-200\">Cash Conversion</span>\n            </div>\n            <div className=\"text-lg font-bold text-white\">{analysis.efficiency.cashConversionCycle.toFixed(0)} days</div>\n            <div className=\"text-xs text-gray-400\">Time to convert inventory to cash</div>\n          </div>\n          <div className=\"bg-gray-750 rounded-lg p-4 border border-gray-600\">\n            <div className=\"flex items-center mb-2\">\n              <Gauge className=\"h-4 w-4 text-orange-400 mr-2\" />\n              <span className=\"text-sm font-medium text-gray-200\">Asset Productivity</span>\n            </div>\n            <div className=\"text-lg font-bold text-white\">{analysis.financial.assetTurnover.toFixed(2)}x</div>\n            <div className=\"text-xs text-gray-400\">Revenue per dollar of assets</div>\n          </div>\n          <div className=\"bg-gray-750 rounded-lg p-4 border border-gray-600\">\n            <div className=\"flex items-center mb-2\">\n              <Users className=\"h-4 w-4 text-orange-400 mr-2\" />\n              <span className=\"text-sm font-medium text-gray-200\">Revenue/Employee</span>\n            </div>\n            <div className=\"text-lg font-bold text-white\">\n              {analysis.market.revenuePerEmployee > 0 ? formatCurrency(analysis.market.revenuePerEmployee) : 'N/A'}\n            </div>\n            <div className=\"text-xs text-gray-400\">Productivity per employee</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Risk Assessment Dashboard */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n        <div className=\"flex items-center mb-6\">\n          <AlertTriangle className=\"h-5 w-5 text-red-400 mr-2\" />\n          <h3 className=\"text-lg font-semibold text-white\">Financial Risk Assessment</h3>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {analysis.riskMetrics.map((metric, index) => (\n            <div key={index} className=\"bg-gray-700 rounded-lg p-4 border border-gray-600\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <span className=\"text-sm font-medium text-gray-200\">{metric.name}</span>\n                <span className={`px-2 py-1 rounded text-xs font-medium ${\n                  metric.level === 'low' ? 'bg-green-900/30 text-green-400' :\n                  metric.level === 'moderate' ? 'bg-yellow-900/30 text-yellow-400' :\n                  'bg-red-900/30 text-red-400'\n                }`}>\n                  {metric.level} risk\n                </span>\n              </div>\n              <div className=\"text-xl font-bold text-white\">{metric.formatted}</div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"mt-6 p-4 bg-gray-750 rounded-lg border border-gray-600\">\n          <h4 className=\"font-medium text-gray-200 mb-3 flex items-center\">\n            <Shield className=\"h-4 w-4 text-red-400 mr-2\" />\n            Risk Analysis Summary\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n            <div>\n              <span className=\"text-gray-400\">Financial Leverage:</span>\n              <span className={`ml-2 font-medium ${\n                analysis.risk.financialLeverage < 2 ? 'text-green-400' : \n                analysis.risk.financialLeverage < 3 ? 'text-yellow-400' : 'text-red-400'\n              }`}>\n                {analysis.risk.financialLeverage.toFixed(1)}x\n              </span>\n            </div>\n            <div>\n              <span className=\"text-gray-400\">Interest Coverage:</span>\n              <span className={`ml-2 font-medium ${\n                analysis.risk.interestCoverage > 10 ? 'text-green-400' : \n                analysis.risk.interestCoverage > 5 ? 'text-yellow-400' : 'text-red-400'\n              }`}>\n                {analysis.risk.interestCoverage.toFixed(1)}x\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Financial Performance Summary */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Financial Performance Trends */}\n        <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold mb-4 flex items-center text-white\">\n            <Activity className=\"h-5 w-5 text-purple-400 mr-2\" />\n            Performance Trends\n          </h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"font-medium text-gray-200 mb-3\">Revenue Analysis</h4>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">Latest Period:</span>\n                  <span className=\"font-semibold text-white\">{formatCurrency(analysis.revenue.latest)}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">YoY Growth:</span>\n                  <span className={`font-semibold ${\n                    analysis.revenue.growth > 0 ? 'text-green-400' : 'text-red-400'\n                  }`}>\n                    {analysis.revenue.growth > 0 ? '+' : ''}{analysis.revenue.growth.toFixed(1)}%\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">CAGR:</span>\n                  <span className=\"font-semibold text-gray-200\">{analysis.revenue.cagr.toFixed(1)}%</span>\n                </div>\n              </div>\n            </div>\n            <div>\n              <h4 className=\"font-medium text-gray-200 mb-3\">Profitability Margins</h4>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">Gross Margin:</span>\n                  <span className=\"font-semibold text-white\">{analysis.profitability.grossMargin.toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">Operating Margin:</span>\n                  <span className=\"font-semibold text-white\">{analysis.profitability.operatingMargin.toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm text-gray-400\">Margin Change:</span>\n                  <span className={`font-semibold ${\n                    analysis.profitability.grossMarginChange > 0 ? 'text-green-400' : 'text-red-400'\n                  }`}>\n                    {analysis.profitability.grossMarginChange > 0 ? '+' : ''}{analysis.profitability.grossMarginChange.toFixed(1)}pp\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Valuation Summary */}\n        {analysis.dcf && (\n          <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n            <h3 className=\"text-lg font-semibold mb-4 flex items-center text-white\">\n              <DollarSign className=\"h-5 w-5 text-green-400 mr-2\" />\n              DCF Valuation Summary\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"text-center p-4 bg-green-900/30 border border-green-700 rounded-lg\">\n                <div className=\"text-2xl font-bold text-green-400\">\n                  {formatCurrency(analysis.dcf.enterpriseValue)}\n                </div>\n                <div className=\"text-sm text-green-300\">Enterprise Value</div>\n              </div>\n              <div className=\"text-center p-4 bg-blue-900/30 border border-blue-700 rounded-lg\">\n                <div className=\"text-2xl font-bold text-blue-400\">\n                  {formatCurrency(analysis.dcf.sharePrice)}\n                </div>\n                <div className=\"text-sm text-blue-300\">Price per Share</div>\n              </div>\n              <div className=\"text-center p-4 bg-gray-700 border border-gray-600 rounded-lg\">\n                <div className=\"text-2xl font-bold text-gray-300\">\n                  {formatCurrency(analysis.dcf.terminalValue)}\n                </div>\n                <div className=\"text-sm text-gray-400\">Terminal Value</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Revenue Breakdown */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n        <h3 className=\"text-lg font-semibold mb-4 flex items-center text-white\">\n          <PieChart className=\"h-5 w-5 text-orange-400 mr-2\" />\n          Business Unit Performance\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {analysis.revenueBreakdown.map((unit, index) => {\n            const percentage = analysis.revenue.latest ? (unit.value / analysis.revenue.latest) * 100 : 0;\n            return (\n              <div key={index} className=\"p-4 bg-gray-700 border border-gray-600 rounded-lg\">\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"font-medium text-gray-200\">{unit.name}</span>\n                  <span className=\"text-sm text-gray-400\">{percentage.toFixed(1)}%</span>\n                </div>\n                <div className=\"text-lg font-semibold text-white mb-1\">\n                  {formatCurrency(unit.value)}\n                </div>\n                <div className=\"w-full bg-gray-600 rounded-full h-2\">\n                  <div \n                    className=\"bg-blue-500 h-2 rounded-full\" \n                    style={{ width: `${Math.min(percentage, 100)}%` }}\n                  ></div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Key Insights */}\n      <div className=\"bg-gray-800 rounded-lg border border-gray-700 p-6\">\n        <h3 className=\"text-lg font-semibold mb-4 flex items-center text-white\">\n          <CheckCircle className=\"h-5 w-5 text-green-400 mr-2\" />\n          Key Financial Insights\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <h4 className=\"font-medium text-gray-200 mb-2\">Strengths</h4>\n            <ul className=\"space-y-1 text-sm text-gray-400\">\n              {analysis.revenue.growth > 0 && (\n                <li className=\"flex items-center\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                  Positive revenue growth trajectory\n                </li>\n              )}\n              {analysis.profitability.grossMargin > 60 && (\n                <li className=\"flex items-center\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                  Strong gross margin above 60%\n                </li>\n              )}\n              {analysis.profitability.grossMarginChange > 0 && (\n                <li className=\"flex items-center\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                  Improving profitability margins\n                </li>\n              )}\n              <li className=\"flex items-center\">\n                <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                Diversified healthcare revenue streams\n              </li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"font-medium text-gray-200 mb-2\">Areas for Focus</h4>\n            <ul className=\"space-y-1 text-sm text-gray-400\">\n              {analysis.revenue.growth < 5 && (\n                <li className=\"flex items-center\">\n                  <AlertTriangle className=\"h-4 w-4 text-yellow-500 mr-2\" />\n                  Revenue growth below industry benchmarks\n                </li>\n              )}\n              {analysis.profitability.operatingMargin < 20 && (\n                <li className=\"flex items-center\">\n                  <AlertTriangle className=\"h-4 w-4 text-yellow-500 mr-2\" />\n                  Operating margin optimization opportunities\n                </li>\n              )}\n              <li className=\"flex items-center\">\n                <AlertTriangle className=\"h-4 w-4 text-yellow-500 mr-2\" />\n                Monitor competitive positioning in key segments\n              </li>\n              <li className=\"flex items-center\">\n                <AlertTriangle className=\"h-4 w-4 text-yellow-500 mr-2\" />\n                Consider strategic initiatives for growth acceleration\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AnalysisResults;\n","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Database, \n  Calculator, \n  BarChart3, \n  CheckCircle, \n  AlertTriangle,\n  Clock,\n  ChevronRight,\n  HelpCircle,\n  TrendingUp,\n  FileSpreadsheet\n} from 'lucide-react';\n\nconst WorkflowNavigation = ({ \n  activeStep, \n  onStepChange, \n  dataCompleteness, \n  modelingProgress, \n  analysisProgress,\n  validationErrors = {}\n}) => {\n  const [showHelpFor, setShowHelpFor] = useState(null);\n\n  // Calculate step statuses based on progress\n  const getStepStatus = (stepId) => {\n    switch (stepId) {\n      case 'data':\n        if (dataCompleteness >= 80) return 'completed';\n        if (dataCompleteness > 0) return 'in-progress';\n        return 'pending';\n      \n      case 'modeling':\n        if (dataCompleteness < 50) return 'disabled';\n        if (modelingProgress >= 80) return 'completed';\n        if (modelingProgress > 0) return 'in-progress';\n        return 'available';\n      \n      case 'analysis':\n        if (dataCompleteness < 80 || modelingProgress < 50) return 'disabled';\n        if (analysisProgress >= 80) return 'completed';\n        if (analysisProgress > 0) return 'in-progress';\n        return 'available';\n      \n      default:\n        return 'pending';\n    }\n  };\n\n  const steps = [\n    {\n      id: 'data',\n      title: 'Data Entry',\n      subtitle: 'Financial statements & inputs',\n      icon: Database,\n      progress: dataCompleteness,\n      description: 'Import or manually input your company\\'s financial statements including income statement, balance sheet, and cash flow data.',\n      validationFields: ['revenue', 'expenses', 'assets'],\n      helpContent: {\n        title: 'Data Entry Guidelines',\n        items: [\n          'Ensure all financial figures are in the same currency',\n          'Use consistent time periods across all statements',\n          'Review data for obvious errors or inconsistencies',\n          'Include at least 3 years of historical data for better analysis'\n        ]\n      }\n    },\n    {\n      id: 'modeling',\n      title: 'Financial Modeling',\n      subtitle: 'DCF, LBO & scenario analysis',\n      icon: Calculator,\n      progress: modelingProgress,\n      description: 'Configure valuation parameters, build financial models, and run scenario analyses to understand value drivers.',\n      validationFields: ['discountRate', 'growthAssumptions', 'margins'],\n      helpContent: {\n        title: 'Modeling Best Practices',\n        items: [\n          'Set realistic discount rates based on industry benchmarks',\n          'Use conservative growth assumptions for terminal value',\n          'Consider multiple scenarios (base, bull, bear cases)',\n          'Validate model outputs against comparable companies'\n        ]\n      }\n    },\n    {\n      id: 'analysis',\n      title: 'Analysis & Results',\n      subtitle: 'Insights, reports & recommendations',\n      icon: BarChart3,\n      progress: analysisProgress,\n      description: 'Review valuation results, sensitivity analysis, and generate comprehensive reports with actionable insights.',\n      validationFields: ['valuation', 'sensitivity', 'recommendations'],\n      helpContent: {\n        title: 'Analysis Interpretation',\n        items: [\n          'Compare results across different valuation methods',\n          'Pay attention to key value drivers in sensitivity analysis',\n          'Consider qualitative factors not captured in models',\n          'Document assumptions and limitations in your analysis'\n        ]\n      }\n    }\n  ];\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'completed': return 'text-emerald-400';\n      case 'in-progress': return 'text-blue-400';\n      case 'available': return 'text-slate-300';\n      case 'disabled': return 'text-slate-500';\n      default: return 'text-slate-400';\n    }\n  };\n\n  const getStatusBg = (status, isActive) => {\n    if (isActive) return 'bg-blue-600';\n    switch (status) {\n      case 'completed': return 'bg-emerald-500/10 border-emerald-400/20';\n      case 'in-progress': return 'bg-blue-500/10 border-blue-400/20';\n      case 'available': return 'bg-slate-700/30 border-slate-600/20';\n      case 'disabled': return 'bg-slate-800/30 border-slate-700/10';\n      default: return 'bg-slate-700/20 border-slate-600/10';\n    }\n  };\n\n  const renderStatusIcon = (step, status, isActive) => {\n    const Icon = step.icon;\n    \n    if (status === 'completed') {\n      return <CheckCircle size={20} className=\"text-emerald-400\" />;\n    }\n    \n    if (status === 'disabled') {\n      return <Icon size={20} className=\"text-slate-500\" />;\n    }\n    \n    if (validationErrors[step.id]?.length > 0) {\n      return <AlertTriangle size={20} className=\"text-amber-400\" />;\n    }\n    \n    if (status === 'in-progress') {\n      return <Clock size={20} className=\"text-blue-400\" />;\n    }\n    \n    return <Icon size={20} className={isActive ? 'text-white' : getStatusColor(status)} />;\n  };\n\n  const renderProgressRing = (progress, status) => {\n    const radius = 18;\n    const circumference = 2 * Math.PI * radius;\n    const strokeDasharray = circumference;\n    const strokeDashoffset = circumference - (progress / 100) * circumference;\n    \n    const getProgressColor = () => {\n      if (progress >= 80) return '#10b981'; // emerald-500\n      if (progress >= 50) return '#3b82f6'; // blue-500\n      if (progress > 0) return '#f59e0b'; // amber-500\n      return '#64748b'; // slate-500\n    };\n\n    return (\n      <div className=\"relative\">\n        <svg className=\"w-10 h-10 transform -rotate-90\" viewBox=\"0 0 40 40\">\n          <circle\n            cx=\"20\"\n            cy=\"20\"\n            r={radius}\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n            className=\"text-slate-700\"\n          />\n          <circle\n            cx=\"20\"\n            cy=\"20\"\n            r={radius}\n            stroke={getProgressColor()}\n            strokeWidth=\"2\"\n            fill=\"none\"\n            strokeDasharray={strokeDasharray}\n            strokeDashoffset={strokeDashoffset}\n            className=\"transition-all duration-500 ease-in-out\"\n            strokeLinecap=\"round\"\n          />\n        </svg>\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <span className=\"text-xs font-medium text-slate-300\">\n            {Math.round(progress)}%\n          </span>\n        </div>\n      </div>\n    );\n  };\n\n  const HelpTooltip = ({ step, isVisible, onClose }) => {\n    if (!isVisible) return null;\n\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 10, scale: 0.95 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        exit={{ opacity: 0, y: 10, scale: 0.95 }}\n        className=\"absolute top-full left-0 mt-2 w-80 bg-slate-800 border border-slate-600 rounded-lg p-4 shadow-xl z-50\"\n      >\n        <div className=\"flex items-center gap-2 mb-3\">\n          <HelpCircle size={16} className=\"text-blue-400\" />\n          <h4 className=\"font-medium text-white\">{step.helpContent.title}</h4>\n        </div>\n        <p className=\"text-sm text-slate-300 mb-3\">{step.description}</p>\n        <ul className=\"space-y-2\">\n          {step.helpContent.items.map((item, index) => (\n            <li key={index} className=\"flex items-start gap-2 text-sm text-slate-400\">\n              <ChevronRight size={14} className=\"text-blue-400 mt-0.5 flex-shrink-0\" />\n              <span>{item}</span>\n            </li>\n          ))}\n        </ul>\n        <button\n          onClick={onClose}\n          className=\"absolute top-2 right-2 text-slate-400 hover:text-white transition-colors\"\n        >\n          \n        </button>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* Progress Overview */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-blue-500/10 rounded-lg\">\n            <TrendingUp size={20} className=\"text-blue-400\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-white\">Analysis Workflow</h3>\n            <p className=\"text-sm text-slate-400\">Follow these steps to complete your analysis</p>\n          </div>\n        </div>\n        \n        {/* Overall Progress */}\n        <div className=\"flex items-center gap-4\">\n          <div className=\"text-right\">\n            <div className=\"text-sm font-medium text-slate-300\">Overall Progress</div>\n            <div className=\"text-xs text-slate-400\">\n              {Math.round((dataCompleteness + modelingProgress + analysisProgress) / 3)}% Complete\n            </div>\n          </div>\n          <div className=\"w-16 h-2 bg-slate-700 rounded-full overflow-hidden\">\n            <motion.div\n              className=\"h-full bg-gradient-to-r from-blue-500 to-emerald-500\"\n              initial={{ width: 0 }}\n              animate={{ \n                width: `${(dataCompleteness + modelingProgress + analysisProgress) / 3}%` \n              }}\n              transition={{ duration: 0.8, ease: 'easeOut' }}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Step Navigation */}\n      <div className=\"grid grid-cols-3 gap-4\">\n        {steps.map((step, index) => {\n          const status = getStepStatus(step.id);\n          const isActive = activeStep === step.id;\n          const isDisabled = status === 'disabled';\n          const hasErrors = validationErrors[step.id]?.length > 0;\n\n          return (\n            <div key={step.id} className=\"relative\">\n              <motion.button\n                onClick={() => !isDisabled && onStepChange(step.id)}\n                disabled={isDisabled}\n                className={`\n                  w-full p-4 rounded-xl border transition-all duration-200 text-left relative overflow-hidden\n                  ${isActive \n                    ? 'bg-blue-600 border-blue-500 shadow-lg shadow-blue-600/20' \n                    : getStatusBg(status, false)\n                  }\n                  ${!isDisabled && !isActive ? 'hover:border-slate-500 hover:bg-slate-700/40' : ''}\n                  ${isDisabled ? 'cursor-not-allowed opacity-60' : 'cursor-pointer'}\n                  ${hasErrors ? 'border-amber-400/40' : 'border-slate-600/30'}\n                `}\n                whileHover={!isDisabled && !isActive ? { scale: 1.02 } : {}}\n                whileTap={!isDisabled ? { scale: 0.98 } : {}}\n              >\n                {/* Step Number & Icon */}\n                <div className=\"flex items-center justify-between mb-3\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className={`\n                      flex items-center justify-center w-10 h-10 rounded-lg transition-all\n                      ${isActive \n                        ? 'bg-white/20' \n                        : status === 'completed' \n                        ? 'bg-emerald-500/20' \n                        : 'bg-slate-600/30'\n                      }\n                    `}>\n                      {renderStatusIcon(step, status, isActive)}\n                    </div>\n                    <div className=\"text-xs font-medium text-slate-400\">\n                      Step {index + 1}\n                    </div>\n                  </div>\n                  \n                  {step.progress > 0 && (\n                    <div className=\"flex-shrink-0\">\n                      {renderProgressRing(step.progress, status)}\n                    </div>\n                  )}\n                </div>\n\n                {/* Step Content */}\n                <div className=\"space-y-1\">\n                  <h4 className={`font-semibold ${\n                    isActive ? 'text-white' : getStatusColor(status)\n                  }`}>\n                    {step.title}\n                  </h4>\n                  <p className={`text-sm ${\n                    isActive ? 'text-blue-100' : 'text-slate-400'\n                  }`}>\n                    {step.subtitle}\n                  </p>\n                </div>\n\n                {/* Validation Errors */}\n                {hasErrors && (\n                  <div className=\"mt-2 text-xs text-amber-400\">\n                    {validationErrors[step.id].length} validation issue(s)\n                  </div>\n                )}\n\n                {/* Active Indicator */}\n                {isActive && (\n                  <motion.div\n                    className=\"absolute bottom-0 left-0 right-0 h-1 bg-white/30\"\n                    layoutId=\"activeIndicator\"\n                  />\n                )}\n              </motion.button>\n\n              {/* Help Button */}\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setShowHelpFor(showHelpFor === step.id ? null : step.id);\n                }}\n                className=\"absolute top-2 right-2 p-1.5 text-slate-400 hover:text-white transition-colors opacity-0 group-hover:opacity-100\"\n              >\n                <HelpCircle size={14} />\n              </button>\n\n              {/* Help Tooltip */}\n              <HelpTooltip\n                step={step}\n                isVisible={showHelpFor === step.id}\n                onClose={() => setShowHelpFor(null)}\n              />\n\n              {/* Connection Line */}\n              {index < steps.length - 1 && (\n                <div className=\"absolute top-1/2 -right-2 transform -translate-y-1/2 z-10\">\n                  <ChevronRight \n                    size={16} \n                    className={`\n                      ${getStepStatus(steps[index + 1].id) !== 'disabled' \n                        ? 'text-slate-400' \n                        : 'text-slate-600'\n                      }\n                    `} \n                  />\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"mt-6 grid grid-cols-3 gap-4\">\n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-lg p-3\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <FileSpreadsheet size={14} className=\"text-slate-400\" />\n            <span className=\"text-xs font-medium text-slate-400\">Data Quality</span>\n          </div>\n          <div className=\"text-lg font-semibold text-white\">{dataCompleteness}%</div>\n        </div>\n        \n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-lg p-3\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <Calculator size={14} className=\"text-slate-400\" />\n            <span className=\"text-xs font-medium text-slate-400\">Models Built</span>\n          </div>\n          <div className=\"text-lg font-semibold text-white\">{Math.round(modelingProgress)}%</div>\n        </div>\n        \n        <div className=\"bg-slate-800/30 border border-slate-700/50 rounded-lg p-3\">\n          <div className=\"flex items-center gap-2 mb-1\">\n            <BarChart3 size={14} className=\"text-slate-400\" />\n            <span className=\"text-xs font-medium text-slate-400\">Analysis Done</span>\n          </div>\n          <div className=\"text-lg font-semibold text-white\">{Math.round(analysisProgress)}%</div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WorkflowNavigation;","import React, { useState, useMemo, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Building2, Calculator, TrendingUp, DollarSign, BarChart3, Target } from 'lucide-react';\nimport { lboModelingEngine } from '../../services/lboModelingEngine.js';\n\nconst AdvancedLBOTool = ({ data, onDataChange }) => {\n  const [activeTab, setActiveTab] = useState('inputs');\n  const [lboResults, setLBOResults] = useState(null);\n  const [isCalculating, setIsCalculating] = useState(false);\n  \n  const [lboInputs, setLBOInputs] = useState({\n    symbol: 'COMPANY',\n    companyName: 'Target Company',\n    purchasePrice: 500000000,\n    ebitda: 75000000,\n    revenue: 500000000,\n    equityContribution: 0.35,\n    seniorDebtMultiple: 4.0,\n    subordinatedDebtMultiple: 1.5,\n    seniorInterestRate: 0.055,\n    subordinatedInterestRate: 0.095,\n    ebitdaGrowthRate: 0.06,\n    capexAsPercentOfRevenue: 0.03,\n    nwcAsPercentOfRevenue: 0.02,\n    holdingPeriod: 5,\n    exitMultiple: 10.0,\n    transactionFees: 0.02,\n    managementFees: 0.02,\n    taxRate: 0.21\n  });\n\n  const formatCurrency = useCallback((value) => {\n    if (!value) return '$0';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(value);\n  }, []);\n\n  const formatPercent = useCallback((value) => {\n    return `${(value * 100).toFixed(1)}%`;\n  }, []);\n\n  const calculateLBO = useCallback(async () => {\n    try {\n      setIsCalculating(true);\n      const modelInputs = {\n        symbol: lboInputs.symbol,\n        companyName: lboInputs.companyName,\n        purchasePrice: lboInputs.purchasePrice,\n        ebitda: lboInputs.ebitda,\n        revenue: lboInputs.revenue,\n        assumptions: {\n          debt: {\n            seniorDebtMultiple: lboInputs.seniorDebtMultiple,\n            subordinatedDebtMultiple: lboInputs.subordinatedDebtMultiple,\n            seniorInterestRate: lboInputs.seniorInterestRate,\n            subordinatedInterestRate: lboInputs.subordinatedInterestRate\n          },\n          operating: {\n            ebitdaGrowthRate: lboInputs.ebitdaGrowthRate,\n            capexAsPercentOfRevenue: lboInputs.capexAsPercentOfRevenue,\n            nwcAsPercentOfRevenue: lboInputs.nwcAsPercentOfRevenue,\n            taxRate: lboInputs.taxRate\n          },\n          exit: {\n            exitMultiple: lboInputs.exitMultiple\n          },\n          transaction: {\n            holdingPeriod: lboInputs.holdingPeriod,\n            transactionFees: lboInputs.transactionFees\n          }\n        }\n      };\n      \n      const results = lboModelingEngine.buildLBOModel(modelInputs);\n      setLBOResults(results);\n      \n      if (onDataChange) {\n        onDataChange({\n          lboModel: { inputs: lboInputs, results, timestamp: new Date().toISOString() }\n        });\n      }\n    } catch (error) {\n      console.error('LBO calculation error:', error);\n      alert(`Error: ${error.message}`);\n    } finally {\n      setIsCalculating(false);\n    }\n  }, [lboInputs, onDataChange]);\n\n  const handleInputChange = useCallback((field, value) => {\n    setLBOInputs(prev => ({\n      ...prev,\n      [field]: typeof value === 'string' ? parseFloat(value) || 0 : value\n    }));\n  }, []);\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <Building2 className=\"text-blue-600\" size={28} />\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Advanced LBO Modeling</h2>\n            <p className=\"text-gray-600\">Professional leveraged buyout analysis</p>\n          </div>\n        </div>\n        \n        <motion.button\n          onClick={calculateLBO}\n          disabled={isCalculating}\n          className={`px-6 py-2 rounded-lg font-medium flex items-center space-x-2 ${\n            isCalculating \n              ? 'bg-gray-300 text-gray-500' \n              : 'bg-blue-600 hover:bg-blue-700 text-white'\n          }`}\n        >\n          <Calculator size={18} />\n          <span>{isCalculating ? 'Calculating...' : 'Calculate LBO'}</span>\n        </motion.button>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {[\n            { id: 'inputs', label: 'Model Inputs', icon: DollarSign },\n            { id: 'results', label: 'Results & Analysis', icon: BarChart3 }\n          ].map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\n                  activeTab === tab.id\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                <Icon size={16} />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Inputs Tab */}\n      {activeTab === 'inputs' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {/* Transaction */}\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold mb-3\">Transaction</h3>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Purchase Price</label>\n                  <input\n                    type=\"number\"\n                    value={lboInputs.purchasePrice}\n                    onChange={(e) => handleInputChange('purchasePrice', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                  <p className=\"text-xs text-gray-500\">{formatCurrency(lboInputs.purchasePrice)}</p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Current EBITDA</label>\n                  <input\n                    type=\"number\"\n                    value={lboInputs.ebitda}\n                    onChange={(e) => handleInputChange('ebitda', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Holding Period</label>\n                  <input\n                    type=\"number\"\n                    value={lboInputs.holdingPeriod}\n                    onChange={(e) => handleInputChange('holdingPeriod', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Financing */}\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold mb-3\">Financing</h3>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Senior Debt Multiple</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={lboInputs.seniorDebtMultiple}\n                    onChange={(e) => handleInputChange('seniorDebtMultiple', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Sub Debt Multiple</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={lboInputs.subordinatedDebtMultiple}\n                    onChange={(e) => handleInputChange('subordinatedDebtMultiple', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Senior Rate (%)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.001\"\n                    value={lboInputs.seniorInterestRate * 100}\n                    onChange={(e) => handleInputChange('seniorInterestRate', (e.target.value || 0) / 100)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            {/* Operating */}\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold mb-3\">Operating</h3>\n              <div className=\"space-y-3\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">EBITDA Growth (%)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={lboInputs.ebitdaGrowthRate * 100}\n                    onChange={(e) => handleInputChange('ebitdaGrowthRate', (e.target.value || 0) / 100)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Exit Multiple</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    value={lboInputs.exitMultiple}\n                    onChange={(e) => handleInputChange('exitMultiple', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tax Rate (%)</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.01\"\n                    value={lboInputs.taxRate * 100}\n                    onChange={(e) => handleInputChange('taxRate', (e.target.value || 0) / 100)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Results Tab */}\n      {activeTab === 'results' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          {lboResults ? (\n            <div className=\"space-y-6\">\n              {/* Key Metrics */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-blue-600\">\n                    {formatPercent(lboResults.baseCase?.returnsAnalysis?.irr || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">IRR</div>\n                </div>\n                <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">\n                    {(lboResults.baseCase?.returnsAnalysis?.moic || 0).toFixed(1)}x\n                  </div>\n                  <div className=\"text-sm text-gray-600\">MOIC</div>\n                </div>\n                <div className=\"bg-purple-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-purple-600\">\n                    {(lboResults.transactionStructure?.debtToEbitda || 0).toFixed(1)}x\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Leverage</div>\n                </div>\n                <div className=\"bg-orange-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-orange-600\">\n                    {formatCurrency(lboResults.baseCase?.exitAnalysis?.equityProceeds || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Exit Value</div>\n                </div>\n              </div>\n\n              {/* Transaction Structure */}\n              <div className=\"bg-gray-50 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold mb-4\">Transaction Structure</h3>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Purchase Price:</span>\n                      <span className=\"font-medium\">{formatCurrency(lboResults.transactionStructure?.purchasePrice)}</span>\n                    </div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Total Debt:</span>\n                      <span className=\"font-medium\">{formatCurrency(lboResults.transactionStructure?.totalDebt)}</span>\n                    </div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Equity Investment:</span>\n                      <span className=\"font-medium\">{formatCurrency(lboResults.transactionStructure?.equityContribution)}</span>\n                    </div>\n                  </div>\n                  <div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Entry Multiple:</span>\n                      <span className=\"font-medium\">{(lboResults.transactionStructure?.entryMultiple || 0).toFixed(1)}x</span>\n                    </div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Debt/EBITDA:</span>\n                      <span className=\"font-medium\">{(lboResults.transactionStructure?.debtToEbitda || 0).toFixed(1)}x</span>\n                    </div>\n                    <div className=\"flex justify-between py-2\">\n                      <span>Equity %:</span>\n                      <span className=\"font-medium\">{formatPercent(lboResults.transactionStructure?.equityPercentage || 0)}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Scenarios */}\n              {lboResults.scenarios && Object.keys(lboResults.scenarios).length > 0 && (\n                <div className=\"bg-gray-50 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold mb-4\">Scenario Analysis</h3>\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead>\n                        <tr className=\"border-b border-gray-300\">\n                          <th className=\"text-left py-2\">Scenario</th>\n                          <th className=\"text-right py-2\">IRR</th>\n                          <th className=\"text-right py-2\">MOIC</th>\n                          <th className=\"text-right py-2\">Exit Value</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr className=\"border-b border-gray-200\">\n                          <td className=\"py-2 font-medium\">Base Case</td>\n                          <td className=\"text-right py-2\">{formatPercent(lboResults.baseCase?.returnsAnalysis?.irr || 0)}</td>\n                          <td className=\"text-right py-2\">{(lboResults.baseCase?.returnsAnalysis?.moic || 0).toFixed(1)}x</td>\n                          <td className=\"text-right py-2\">{formatCurrency(lboResults.baseCase?.exitAnalysis?.equityProceeds || 0)}</td>\n                        </tr>\n                        {Object.entries(lboResults.scenarios).map(([name, scenario]) => (\n                          <tr key={name} className=\"border-b border-gray-200\">\n                            <td className=\"py-2\">{name}</td>\n                            <td className=\"text-right py-2\">{formatPercent(scenario.returnsAnalysis?.irr || 0)}</td>\n                            <td className=\"text-right py-2\">{(scenario.returnsAnalysis?.moic || 0).toFixed(1)}x</td>\n                            <td className=\"text-right py-2\">{formatCurrency(scenario.exitAnalysis?.equityProceeds || 0)}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"text-center py-12 text-gray-500\">\n              <BarChart3 size={48} className=\"mx-auto mb-4 opacity-50\" />\n              <p>Run LBO calculation to see results</p>\n            </div>\n          )}\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default AdvancedLBOTool;\n","import React, { useState, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { FileText, TrendingUp, Building, Activity, Calculator, RefreshCw, CheckCircle, AlertCircle } from 'lucide-react';\n\nconst FinancialModelWorkspace = ({ data, onDataChange }) => {\n  const [activeStatement, setActiveStatement] = useState('income');\n  const [modelData, setModelData] = useState({\n    // Income Statement (in thousands)\n    revenue: [100000, 105000, 110250, 115763, 121551],\n    costOfGoodsSold: [60000, 63000, 66150, 69458, 72931],\n    grossProfit: [40000, 42000, 44100, 46305, 48620],\n    operatingExpenses: [25000, 26250, 27563, 28941, 30388],\n    ebitda: [15000, 15750, 16538, 17364, 18232],\n    depreciation: [3000, 3150, 3308, 3473, 3647],\n    ebit: [12000, 12600, 13230, 13891, 14585],\n    interestExpense: [2000, 1800, 1580, 1340, 1080],\n    ebt: [10000, 10800, 11650, 12551, 13505],\n    taxes: [2100, 2268, 2447, 2636, 2836],\n    netIncome: [7900, 8532, 9203, 9915, 10669],\n    \n    // Balance Sheet\n    cash: [5000, 8532, 12735, 17650, 23319],\n    accountsReceivable: [8333, 8750, 9188, 9647, 10129],\n    inventory: [10000, 10500, 11025, 11576, 12155],\n    totalCurrentAssets: [23333, 27782, 32948, 38873, 45603],\n    ppe: [50000, 51850, 53543, 55070, 56423],\n    totalAssets: [73333, 79632, 86491, 93943, 102026],\n    \n    accountsPayable: [5000, 5250, 5513, 5789, 6078],\n    shortTermDebt: [3000, 2000, 1000, 0, 0],\n    totalCurrentLiabilities: [8000, 7250, 6513, 5789, 6078],\n    longTermDebt: [25000, 23000, 21000, 19000, 17000],\n    totalLiabilities: [33000, 30250, 27513, 24789, 23078],\n    shareholderEquity: [40333, 49382, 58978, 69154, 78948],\n    totalLiabilitiesEquity: [73333, 79632, 86491, 93943, 102026],\n    \n    // Cash Flow\n    operatingCashFlow: [8567, 10233, 11345, 12464, 13584],\n    capex: [-5000, -4850, -5000, -5000, -5000],\n    investingCashFlow: [-5000, -4850, -5000, -5000, -5000],\n    debtRepayment: [-2000, -2000, -2000, -2000, -2000],\n    financingCashFlow: [-2000, -2000, -2000, -2000, -2000],\n    netCashFlow: [1567, 3383, 4345, 5464, 6584],\n    endingCash: [5000, 8383, 12728, 18192, 24776]\n  });\n\n  const [assumptions, setAssumptions] = useState({\n    revenueGrowthRate: 0.05,\n    cogsPercentOfRevenue: 0.60,\n    opexGrowthRate: 0.05,\n    taxRate: 0.21,\n    depreciationRate: 0.06,\n    capexPercentOfRevenue: 0.05,\n    debtPaydown: 2000\n  });\n\n  const [validationErrors, setValidationErrors] = useState([]);\n  const periods = ['Year 1', 'Year 2', 'Year 3', 'Year 4', 'Year 5'];\n\n  const formatCurrency = useCallback((value) => {\n    if (!value && value !== 0) return '$0';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0,\n    }).format(value * 1000); // Convert from thousands\n  }, []);\n\n  const recalculateModel = useCallback(() => {\n    const newData = { ...modelData };\n    \n    // Recalculate projections based on assumptions\n    for (let i = 1; i < 5; i++) {\n      // Income Statement\n      newData.revenue[i] = newData.revenue[i-1] * (1 + assumptions.revenueGrowthRate);\n      newData.costOfGoodsSold[i] = newData.revenue[i] * assumptions.cogsPercentOfRevenue;\n      newData.grossProfit[i] = newData.revenue[i] - newData.costOfGoodsSold[i];\n      newData.operatingExpenses[i] = newData.operatingExpenses[i-1] * (1 + assumptions.opexGrowthRate);\n      newData.ebitda[i] = newData.grossProfit[i] - newData.operatingExpenses[i];\n      newData.depreciation[i] = newData.ppe[i-1] * assumptions.depreciationRate;\n      newData.ebit[i] = newData.ebitda[i] - newData.depreciation[i];\n      newData.interestExpense[i] = newData.longTermDebt[i-1] * 0.06;\n      newData.ebt[i] = newData.ebit[i] - newData.interestExpense[i];\n      newData.taxes[i] = Math.max(0, newData.ebt[i] * assumptions.taxRate);\n      newData.netIncome[i] = newData.ebt[i] - newData.taxes[i];\n      \n      // Balance Sheet\n      const capex = newData.revenue[i] * assumptions.capexPercentOfRevenue;\n      newData.ppe[i] = newData.ppe[i-1] + capex - newData.depreciation[i];\n      newData.longTermDebt[i] = Math.max(0, newData.longTermDebt[i-1] - assumptions.debtPaydown);\n      newData.shortTermDebt[i] = Math.max(0, newData.shortTermDebt[i-1] - 1000);\n      \n      // Working capital (simplified)\n      newData.accountsReceivable[i] = newData.revenue[i] * 0.083; // ~30 days\n      newData.inventory[i] = newData.costOfGoodsSold[i] * 0.1; // ~36 days\n      newData.accountsPayable[i] = newData.costOfGoodsSold[i] * 0.05; // ~18 days\n      \n      // Cash Flow\n      const wcChange = (newData.accountsReceivable[i] - newData.accountsReceivable[i-1]) + \n                      (newData.inventory[i] - newData.inventory[i-1]) - \n                      (newData.accountsPayable[i] - newData.accountsPayable[i-1]);\n      \n      newData.operatingCashFlow[i] = newData.netIncome[i] + newData.depreciation[i] - wcChange;\n      newData.capex[i] = -capex;\n      newData.investingCashFlow[i] = newData.capex[i];\n      newData.debtRepayment[i] = -assumptions.debtPaydown;\n      newData.financingCashFlow[i] = newData.debtRepayment[i];\n      newData.netCashFlow[i] = newData.operatingCashFlow[i] + newData.investingCashFlow[i] + newData.financingCashFlow[i];\n      newData.endingCash[i] = newData.cash[i-1] + newData.netCashFlow[i];\n      newData.cash[i] = newData.endingCash[i];\n      \n      // Complete Balance Sheet\n      newData.totalCurrentAssets[i] = newData.cash[i] + newData.accountsReceivable[i] + newData.inventory[i];\n      newData.totalAssets[i] = newData.totalCurrentAssets[i] + newData.ppe[i];\n      newData.totalCurrentLiabilities[i] = newData.accountsPayable[i] + newData.shortTermDebt[i];\n      newData.totalLiabilities[i] = newData.totalCurrentLiabilities[i] + newData.longTermDebt[i];\n      newData.shareholderEquity[i] = newData.totalAssets[i] - newData.totalLiabilities[i];\n      newData.totalLiabilitiesEquity[i] = newData.totalLiabilities[i] + newData.shareholderEquity[i];\n    }\n    \n    setModelData(newData);\n    \n    // Validate model\n    const errors = [];\n    for (let i = 0; i < 5; i++) {\n      const diff = Math.abs(newData.totalAssets[i] - newData.totalLiabilitiesEquity[i]);\n      if (diff > 1) {\n        errors.push(`Balance sheet doesn't balance in ${periods[i]}`);\n      }\n    }\n    setValidationErrors(errors);\n    \n  }, [modelData, assumptions, periods]);\n\n  const handleAssumptionChange = useCallback((field, value) => {\n    setAssumptions(prev => ({ ...prev, [field]: parseFloat(value) || 0 }));\n  }, []);\n\n  const statements = [\n    { id: 'income', label: 'Income Statement', icon: TrendingUp },\n    { id: 'balance', label: 'Balance Sheet', icon: Building },\n    { id: 'cashflow', label: 'Cash Flow', icon: Activity },\n    { id: 'assumptions', label: 'Assumptions', icon: Calculator }\n  ];\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <FileText className=\"text-green-600\" size={28} />\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">3-Statement Financial Model</h2>\n            <p className=\"text-gray-600\">Integrated Income Statement, Balance Sheet & Cash Flow</p>\n          </div>\n        </div>\n        \n        <motion.button\n          onClick={recalculateModel}\n          className=\"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center space-x-2\"\n          whileHover={{ scale: 1.02 }}\n        >\n          <RefreshCw size={16} />\n          <span>Recalculate</span>\n        </motion.button>\n      </div>\n\n      {/* Validation Status */}\n      {validationErrors.length === 0 ? (\n        <div className=\"mb-6 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center\">\n          <CheckCircle className=\"text-green-500 mr-2\" size={20} />\n          <span className=\"text-green-800 font-medium\">Model is balanced and consistent</span>\n        </div>\n      ) : (\n        <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n          <div className=\"flex items-center mb-2\">\n            <AlertCircle className=\"text-red-500 mr-2\" size={20} />\n            <h3 className=\"font-semibold text-red-800\">Validation Errors</h3>\n          </div>\n          <ul className=\"text-sm text-red-700\">\n            {validationErrors.map((error, idx) => <li key={idx}> {error}</li>)}\n          </ul>\n        </div>\n      )}\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {statements.map((statement) => {\n            const Icon = statement.icon;\n            return (\n              <button\n                key={statement.id}\n                onClick={() => setActiveStatement(statement.id)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\n                  activeStatement === statement.id\n                    ? 'border-green-500 text-green-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                <Icon size={16} />\n                <span>{statement.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Income Statement */}\n      {activeStatement === 'income' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-300\">\n                  <th className=\"text-left py-3 px-4 font-semibold\">Income Statement ($000s)</th>\n                  {periods.map(period => <th key={period} className=\"text-right py-3 px-4 font-semibold\">{period}</th>)}\n                </tr>\n              </thead>\n              <tbody>\n                {[\n                  { label: 'Revenue', key: 'revenue' },\n                  { label: 'Cost of Goods Sold', key: 'costOfGoodsSold' },\n                  { label: 'Gross Profit', key: 'grossProfit' },\n                  { label: 'Operating Expenses', key: 'operatingExpenses' },\n                  { label: 'EBITDA', key: 'ebitda' },\n                  { label: 'Depreciation', key: 'depreciation' },\n                  { label: 'EBIT', key: 'ebit' },\n                  { label: 'Interest Expense', key: 'interestExpense' },\n                  { label: 'EBT', key: 'ebt' },\n                  { label: 'Taxes', key: 'taxes' },\n                  { label: 'Net Income', key: 'netIncome' }\n                ].map((item) => (\n                  <tr key={item.key} className=\"border-b border-gray-200\">\n                    <td className=\"py-2 px-4 font-medium\">{item.label}</td>\n                    {modelData[item.key]?.map((value, periodIdx) => (\n                      <td key={periodIdx} className=\"text-right py-2 px-4\">{formatCurrency(value)}</td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Balance Sheet */}\n      {activeStatement === 'balance' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-300\">\n                  <th className=\"text-left py-3 px-4 font-semibold\">Balance Sheet ($000s)</th>\n                  {periods.map(period => <th key={period} className=\"text-right py-3 px-4 font-semibold\">{period}</th>)}\n                </tr>\n              </thead>\n              <tbody>\n                <tr className=\"bg-gray-100\"><td colSpan={6} className=\"py-2 px-4 font-semibold\">ASSETS</td></tr>\n                {[\n                  { label: 'Cash', key: 'cash' },\n                  { label: 'Accounts Receivable', key: 'accountsReceivable' },\n                  { label: 'Inventory', key: 'inventory' },\n                  { label: 'Total Current Assets', key: 'totalCurrentAssets' },\n                  { label: 'PP&E', key: 'ppe' },\n                  { label: 'Total Assets', key: 'totalAssets' }\n                ].map((item) => (\n                  <tr key={item.key} className=\"border-b border-gray-200\">\n                    <td className=\"py-2 px-4\">{item.label}</td>\n                    {modelData[item.key]?.map((value, periodIdx) => (\n                      <td key={periodIdx} className=\"text-right py-2 px-4\">{formatCurrency(value)}</td>\n                    ))}\n                  </tr>\n                ))}\n                \n                <tr className=\"bg-gray-100\"><td colSpan={6} className=\"py-2 px-4 font-semibold\">LIABILITIES & EQUITY</td></tr>\n                {[\n                  { label: 'Accounts Payable', key: 'accountsPayable' },\n                  { label: 'Short-term Debt', key: 'shortTermDebt' },\n                  { label: 'Total Current Liabilities', key: 'totalCurrentLiabilities' },\n                  { label: 'Long-term Debt', key: 'longTermDebt' },\n                  { label: 'Total Liabilities', key: 'totalLiabilities' },\n                  { label: 'Shareholder Equity', key: 'shareholderEquity' },\n                  { label: 'Total Liab. & Equity', key: 'totalLiabilitiesEquity' }\n                ].map((item) => (\n                  <tr key={item.key} className=\"border-b border-gray-200\">\n                    <td className=\"py-2 px-4\">{item.label}</td>\n                    {modelData[item.key]?.map((value, periodIdx) => (\n                      <td key={periodIdx} className=\"text-right py-2 px-4\">{formatCurrency(value)}</td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Cash Flow */}\n      {activeStatement === 'cashflow' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-300\">\n                  <th className=\"text-left py-3 px-4 font-semibold\">Cash Flow Statement ($000s)</th>\n                  {periods.map(period => <th key={period} className=\"text-right py-3 px-4 font-semibold\">{period}</th>)}\n                </tr>\n              </thead>\n              <tbody>\n                {[\n                  { label: 'Operating Cash Flow', key: 'operatingCashFlow' },\n                  { label: 'CapEx', key: 'capex' },\n                  { label: 'Investing Cash Flow', key: 'investingCashFlow' },\n                  { label: 'Debt Repayment', key: 'debtRepayment' },\n                  { label: 'Financing Cash Flow', key: 'financingCashFlow' },\n                  { label: 'Net Cash Flow', key: 'netCashFlow' },\n                  { label: 'Ending Cash', key: 'endingCash' }\n                ].map((item) => (\n                  <tr key={item.key} className=\"border-b border-gray-200\">\n                    <td className=\"py-2 px-4\">{item.label}</td>\n                    {modelData[item.key]?.map((value, periodIdx) => (\n                      <td key={periodIdx} className=\"text-right py-2 px-4\">{formatCurrency(value)}</td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Assumptions */}\n      {activeStatement === 'assumptions' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }}>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold mb-4\">Key Assumptions</h3>\n              <div className=\"space-y-3\">\n                {[\n                  { label: 'Revenue Growth Rate (%)', key: 'revenueGrowthRate', isPercent: true },\n                  { label: 'COGS % of Revenue', key: 'cogsPercentOfRevenue', isPercent: true },\n                  { label: 'OpEx Growth Rate (%)', key: 'opexGrowthRate', isPercent: true },\n                  { label: 'Tax Rate (%)', key: 'taxRate', isPercent: true },\n                  { label: 'CapEx % of Revenue', key: 'capexPercentOfRevenue', isPercent: true },\n                  { label: 'Annual Debt Paydown ($000s)', key: 'debtPaydown', isPercent: false }\n                ].map(assumption => (\n                  <div key={assumption.key}>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      {assumption.label}\n                    </label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={assumption.isPercent ? assumptions[assumption.key] * 100 : assumptions[assumption.key]}\n                      onChange={(e) => handleAssumptionChange(\n                        assumption.key, \n                        assumption.isPercent ? (e.target.value || 0) / 100 : e.target.value\n                      )}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n            \n            <div className=\"bg-blue-50 p-4 rounded-lg\">\n              <h3 className=\"font-semibold mb-4\">Model Metrics</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span>5-Year Revenue CAGR:</span>\n                  <span className=\"font-medium\">{((Math.pow(modelData.revenue[4] / modelData.revenue[0], 1/4) - 1) * 100).toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>5-Year EBITDA CAGR:</span>\n                  <span className=\"font-medium\">{((Math.pow(modelData.ebitda[4] / modelData.ebitda[0], 1/4) - 1) * 100).toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Exit EBITDA Margin:</span>\n                  <span className=\"font-medium\">{((modelData.ebitda[4] / modelData.revenue[4]) * 100).toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Exit Debt/EBITDA:</span>\n                  <span className=\"font-medium\">{(modelData.longTermDebt[4] / modelData.ebitda[4]).toFixed(1)}x</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default FinancialModelWorkspace;\n","import React, { useState, useMemo, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  BarChart3, TrendingUp, TrendingDown, Target, Plus, Trash2, \n  Play, Download, Settings, RefreshCw, AlertTriangle, CheckCircle\n} from 'lucide-react';\nimport { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, LineChart, Line } from 'recharts';\n\nconst EnhancedScenarioAnalysis = ({ data, onDataChange, calculateDCF, lboModelingEngine }) => {\n  const [activeView, setActiveView] = useState('scenarios');\n  const [scenarios, setScenarios] = useState([\n    {\n      id: 1,\n      name: 'Base Case',\n      probability: 40,\n      revenueGrowth: 5.0,\n      marginExpansion: 0.5,\n      exitMultiple: 10.0,\n      capexIntensity: 3.0,\n      isBase: true\n    },\n    {\n      id: 2,\n      name: 'Bull Case',\n      probability: 30,\n      revenueGrowth: 8.0,\n      marginExpansion: 1.5,\n      exitMultiple: 12.0,\n      capexIntensity: 2.5,\n      isBase: false\n    },\n    {\n      id: 3,\n      name: 'Bear Case',\n      probability: 30,\n      revenueGrowth: 2.0,\n      marginExpansion: -0.5,\n      exitMultiple: 8.0,\n      capexIntensity: 4.0,\n      isBase: false\n    }\n  ]);\n\n  const [analysisSettings, setAnalysisSettings] = useState({\n    modelType: 'dcf', // 'dcf', 'lbo', '3statement'\n    outputMetric: 'enterpriseValue',\n    includeCorrelations: false,\n    numSimulations: 1000\n  });\n\n  const [results, setResults] = useState(null);\n  const [isCalculating, setIsCalculating] = useState(false);\n\n  const formatCurrency = useCallback((value) => {\n    if (!value && value !== 0) return '$0';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(value);\n  }, []);\n\n  const formatPercent = useCallback((value) => {\n    return `${(value || 0).toFixed(1)}%`;\n  }, []);\n\n  const runScenarioAnalysis = useCallback(async () => {\n    setIsCalculating(true);\n    \n    try {\n      const scenarioResults = [];\n      \n      for (const scenario of scenarios) {\n        let result = null;\n        \n        if (analysisSettings.modelType === 'dcf') {\n          // Run DCF analysis for each scenario\n          const scenarioData = {\n            ...data,\n            statements: {\n              ...data.statements,\n              incomeStatement: {\n                ...data.statements.incomeStatement,\n                // Apply scenario assumptions to modify data\n                totalRevenue: data.statements.incomeStatement.totalRevenue?.map((rev, idx) => {\n                  if (idx === 0) return rev; // Base year unchanged\n                  return rev * Math.pow(1 + scenario.revenueGrowth / 100, idx);\n                })\n              }\n            }\n          };\n          \n          result = calculateDCF ? calculateDCF(scenarioData) : null;\n        } \n        else if (analysisSettings.modelType === 'lbo' && lboModelingEngine) {\n          // Run LBO analysis for each scenario\n          const lboInputs = {\n            symbol: data.symbol || 'COMPANY',\n            companyName: data.companyName || 'Target Company',\n            purchasePrice: 500000000,\n            ebitda: 75000000,\n            revenue: 500000000,\n            assumptions: {\n              operating: {\n                ebitdaGrowthRate: scenario.revenueGrowth / 100,\n                capexAsPercentOfRevenue: scenario.capexIntensity / 100\n              },\n              exit: {\n                exitMultiple: scenario.exitMultiple\n              }\n            }\n          };\n          \n          result = lboModelingEngine.buildLBOModel(lboInputs);\n        }\n        \n        scenarioResults.push({\n          ...scenario,\n          result: result,\n          enterpriseValue: result?.enterpriseValue || result?.baseCase?.exitAnalysis?.enterpriseValue || 0,\n          equityValue: result?.equityValue || result?.baseCase?.exitAnalysis?.equityProceeds || 0,\n          irr: result?.irr || result?.baseCase?.returnsAnalysis?.irr || 0,\n          moic: result?.moic || result?.baseCase?.returnsAnalysis?.moic || 0\n        });\n      }\n      \n      // Calculate probability-weighted metrics\n      const weightedValue = scenarioResults.reduce((sum, s) => \n        sum + (s.enterpriseValue * s.probability / 100), 0\n      );\n      \n      const valueRange = {\n        min: Math.min(...scenarioResults.map(s => s.enterpriseValue)),\n        max: Math.max(...scenarioResults.map(s => s.enterpriseValue)),\n        range: Math.max(...scenarioResults.map(s => s.enterpriseValue)) - \n               Math.min(...scenarioResults.map(s => s.enterpriseValue))\n      };\n      \n      // Risk metrics\n      const standardDeviation = Math.sqrt(\n        scenarioResults.reduce((sum, s) => {\n          const deviation = s.enterpriseValue - weightedValue;\n          return sum + (deviation * deviation * s.probability / 100);\n        }, 0)\n      );\n      \n      const coefficientOfVariation = standardDeviation / weightedValue;\n      \n      setResults({\n        scenarios: scenarioResults,\n        summary: {\n          weightedValue,\n          valueRange,\n          standardDeviation,\n          coefficientOfVariation,\n          probabilityOfPositiveReturn: scenarioResults\n            .filter(s => s.enterpriseValue > (data.currentMarketCap || 1000000000))\n            .reduce((sum, s) => sum + s.probability, 0)\n        },\n        chartData: scenarioResults.map(s => ({\n          name: s.name,\n          value: s.enterpriseValue,\n          probability: s.probability,\n          irr: s.irr * 100,\n          moic: s.moic\n        }))\n      });\n      \n    } catch (error) {\n      console.error('Scenario analysis error:', error);\n      alert(`Error running scenario analysis: ${error.message}`);\n    } finally {\n      setIsCalculating(false);\n    }\n  }, [scenarios, analysisSettings, data, calculateDCF, lboModelingEngine]);\n\n  const addScenario = useCallback(() => {\n    const newScenario = {\n      id: Date.now(),\n      name: `Scenario ${scenarios.length + 1}`,\n      probability: Math.max(0, 100 - scenarios.reduce((sum, s) => sum + s.probability, 0)),\n      revenueGrowth: 5.0,\n      marginExpansion: 0.0,\n      exitMultiple: 10.0,\n      capexIntensity: 3.0,\n      isBase: false\n    };\n    setScenarios(prev => [...prev, newScenario]);\n  }, [scenarios]);\n\n  const updateScenario = useCallback((id, field, value) => {\n    setScenarios(prev => prev.map(scenario => \n      scenario.id === id ? { ...scenario, [field]: parseFloat(value) || value } : scenario\n    ));\n  }, []);\n\n  const deleteScenario = useCallback((id) => {\n    setScenarios(prev => prev.filter(scenario => scenario.id !== id && !scenario.isBase));\n  }, []);\n\n  const totalProbability = useMemo(() => \n    scenarios.reduce((sum, s) => sum + s.probability, 0), [scenarios]\n  );\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <BarChart3 className=\"text-purple-600\" size={28} />\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Enhanced Scenario Analysis</h2>\n            <p className=\"text-gray-600\">Cross-model scenario planning & risk assessment</p>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-3\">\n          <motion.button\n            onClick={runScenarioAnalysis}\n            disabled={isCalculating || totalProbability !== 100}\n            className={`px-6 py-2 rounded-lg font-medium flex items-center space-x-2 ${\n              isCalculating || totalProbability !== 100\n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : 'bg-purple-600 hover:bg-purple-700 text-white'\n            }`}\n            whileHover={!isCalculating && totalProbability === 100 ? { scale: 1.02 } : {}}\n          >\n            <Play size={18} />\n            <span>{isCalculating ? 'Running...' : 'Run Analysis'}</span>\n          </motion.button>\n        </div>\n      </div>\n\n      {/* Model Selection & Settings */}\n      <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Model Type</label>\n            <select\n              value={analysisSettings.modelType}\n              onChange={(e) => setAnalysisSettings(prev => ({ ...prev, modelType: e.target.value }))}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n            >\n              <option value=\"dcf\">DCF Valuation</option>\n              <option value=\"lbo\">LBO Analysis</option>\n              <option value=\"3statement\">3-Statement Model</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Output Metric</label>\n            <select\n              value={analysisSettings.outputMetric}\n              onChange={(e) => setAnalysisSettings(prev => ({ ...prev, outputMetric: e.target.value }))}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n            >\n              <option value=\"enterpriseValue\">Enterprise Value</option>\n              <option value=\"equityValue\">Equity Value</option>\n              <option value=\"irr\">IRR</option>\n              <option value=\"moic\">MOIC</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Simulations</label>\n            <input\n              type=\"number\"\n              value={analysisSettings.numSimulations}\n              onChange={(e) => setAnalysisSettings(prev => ({ ...prev, numSimulations: parseInt(e.target.value) || 1000 }))}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div className=\"flex items-end\">\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={analysisSettings.includeCorrelations}\n                onChange={(e) => setAnalysisSettings(prev => ({ ...prev, includeCorrelations: e.target.checked }))}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm text-gray-700\">Include Correlations</span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Probability Warning */}\n      {totalProbability !== 100 && (\n        <div className=\"mb-6 p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-center\">\n          <AlertTriangle className=\"text-amber-500 mr-2\" size={20} />\n          <span className=\"text-amber-800\">\n            Total probability is {totalProbability}%. Adjust scenarios to sum to 100%.\n          </span>\n        </div>\n      )}\n\n      {/* Scenarios Table */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold\">Scenarios</h3>\n          <motion.button\n            onClick={addScenario}\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center space-x-2\"\n            whileHover={{ scale: 1.02 }}\n          >\n            <Plus size={16} />\n            <span>Add Scenario</span>\n          </motion.button>\n        </div>\n        \n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b-2 border-gray-300\">\n                <th className=\"text-left py-3 px-4\">Scenario</th>\n                <th className=\"text-right py-3 px-4\">Probability (%)</th>\n                <th className=\"text-right py-3 px-4\">Revenue Growth (%)</th>\n                <th className=\"text-right py-3 px-4\">Margin Expansion (bps)</th>\n                <th className=\"text-right py-3 px-4\">Exit Multiple</th>\n                <th className=\"text-right py-3 px-4\">CapEx Intensity (%)</th>\n                <th className=\"text-center py-3 px-4\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {scenarios.map((scenario) => (\n                <tr key={scenario.id} className={`border-b border-gray-200 ${scenario.isBase ? 'bg-blue-50' : ''}`}>\n                  <td className=\"py-3 px-4\">\n                    <input\n                      type=\"text\"\n                      value={scenario.name}\n                      onChange={(e) => updateScenario(scenario.id, 'name', e.target.value)}\n                      disabled={scenario.isBase}\n                      className={`border border-gray-300 rounded px-2 py-1 ${scenario.isBase ? 'bg-gray-100' : ''}`}\n                    />\n                  </td>\n                  <td className=\"text-right py-3 px-4\">\n                    <input\n                      type=\"number\"\n                      step=\"1\"\n                      value={scenario.probability}\n                      onChange={(e) => updateScenario(scenario.id, 'probability', e.target.value)}\n                      className=\"w-20 text-right border border-gray-300 rounded px-2 py-1\"\n                    />\n                  </td>\n                  <td className=\"text-right py-3 px-4\">\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={scenario.revenueGrowth}\n                      onChange={(e) => updateScenario(scenario.id, 'revenueGrowth', e.target.value)}\n                      className=\"w-20 text-right border border-gray-300 rounded px-2 py-1\"\n                    />\n                  </td>\n                  <td className=\"text-right py-3 px-4\">\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={scenario.marginExpansion}\n                      onChange={(e) => updateScenario(scenario.id, 'marginExpansion', e.target.value)}\n                      className=\"w-20 text-right border border-gray-300 rounded px-2 py-1\"\n                    />\n                  </td>\n                  <td className=\"text-right py-3 px-4\">\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={scenario.exitMultiple}\n                      onChange={(e) => updateScenario(scenario.id, 'exitMultiple', e.target.value)}\n                      className=\"w-20 text-right border border-gray-300 rounded px-2 py-1\"\n                    />\n                  </td>\n                  <td className=\"text-right py-3 px-4\">\n                    <input\n                      type=\"number\"\n                      step=\"0.1\"\n                      value={scenario.capexIntensity}\n                      onChange={(e) => updateScenario(scenario.id, 'capexIntensity', e.target.value)}\n                      className=\"w-20 text-right border border-gray-300 rounded px-2 py-1\"\n                    />\n                  </td>\n                  <td className=\"text-center py-3 px-4\">\n                    {!scenario.isBase && (\n                      <button\n                        onClick={() => deleteScenario(scenario.id)}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        <Trash2 size={16} />\n                      </button>\n                    )}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Results */}\n      {results && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"space-y-6\"\n        >\n          {/* Summary Metrics */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {formatCurrency(results.summary.weightedValue)}\n              </div>\n              <div className=\"text-sm text-gray-600\">Expected Value</div>\n            </div>\n            <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-green-600\">\n                {formatCurrency(results.summary.valueRange.max)}\n              </div>\n              <div className=\"text-sm text-gray-600\">Best Case</div>\n            </div>\n            <div className=\"bg-red-50 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-red-600\">\n                {formatCurrency(results.summary.valueRange.min)}\n              </div>\n              <div className=\"text-sm text-gray-600\">Worst Case</div>\n            </div>\n            <div className=\"bg-purple-50 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {formatPercent(results.summary.probabilityOfPositiveReturn)}\n              </div>\n              <div className=\"text-sm text-gray-600\">Success Probability</div>\n            </div>\n          </div>\n\n          {/* Scenario Results Chart */}\n          <div className=\"bg-gray-50 rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Scenario Results</h3>\n            <div className=\"h-80\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <BarChart data={results.chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis tickFormatter={(value) => formatCurrency(value)} />\n                  <Tooltip formatter={(value) => [formatCurrency(value), 'Enterprise Value']} />\n                  <Bar dataKey=\"value\" fill=\"#8884d8\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n\n          {/* Risk Analysis */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <h4 className=\"font-semibold mb-3\">Risk Metrics</h4>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span>Standard Deviation:</span>\n                  <span className=\"font-medium\">{formatCurrency(results.summary.standardDeviation)}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Coefficient of Variation:</span>\n                  <span className=\"font-medium\">{(results.summary.coefficientOfVariation * 100).toFixed(1)}%</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Value at Risk (5%):</span>\n                  <span className=\"font-medium\">{formatCurrency(results.summary.valueRange.min)}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Upside Potential:</span>\n                  <span className=\"font-medium\">{formatCurrency(results.summary.valueRange.range)}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <h4 className=\"font-semibold mb-3\">Scenario Returns</h4>\n              <div className=\"space-y-2 text-sm\">\n                {results.scenarios.map((scenario) => (\n                  <div key={scenario.id} className=\"flex justify-between\">\n                    <span>{scenario.name}:</span>\n                    <span className=\"font-medium\">\n                      {analysisSettings.outputMetric === 'irr' ? formatPercent(scenario.irr) : \n                       analysisSettings.outputMetric === 'moic' ? `${scenario.moic.toFixed(1)}x` :\n                       formatCurrency(scenario[analysisSettings.outputMetric])}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {!results && (\n        <div className=\"text-center py-12 text-gray-500\">\n          <BarChart3 size={48} className=\"mx-auto mb-4 opacity-50\" />\n          <p>Configure scenarios and run analysis to see results</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedScenarioAnalysis;\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  TrendingUp, TrendingDown, Activity, Globe, Bell, \n  Plus, Minus, RefreshCw, Settings, Download, Search,\n  BarChart3, LineChart, PieChart, AlertCircle, CheckCircle\n} from 'lucide-react';\nimport { LineChart as RechartsLineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, AreaChart, Area, BarChart, Bar } from 'recharts';\n\nconst EnhancedMarketDataDashboard = ({ data, onDataChange }) => {\n  const [activeView, setActiveView] = useState('overview');\n  const [watchlist, setWatchlist] = useState([\n    { symbol: 'SPY', name: 'SPDR S&P 500 ETF', price: 445.67, change: 2.34, changePercent: 0.53, category: 'index' },\n    { symbol: 'QQQ', name: 'Invesco QQQ Trust', price: 378.91, change: -1.45, changePercent: -0.38, category: 'index' },\n    { symbol: 'VIX', name: 'CBOE Volatility Index', price: 18.45, change: 0.87, changePercent: 4.95, category: 'volatility' },\n    { symbol: 'DXY', name: 'US Dollar Index', price: 102.45, change: -0.23, changePercent: -0.22, category: 'currency' },\n    { symbol: '^TNX', name: '10-Year Treasury Yield', price: 4.25, change: 0.05, changePercent: 1.19, category: 'rates' }\n  ]);\n\n  const [marketData, setMarketData] = useState({\n    indices: {\n      'S&P 500': { value: 4456.78, change: 23.45, changePercent: 0.53 },\n      'NASDAQ': { value: 13789.45, change: -45.67, changePercent: -0.33 },\n      'DOW': { value: 34567.89, change: 156.78, changePercent: 0.46 },\n      'Russell 2000': { value: 1987.65, change: 12.34, changePercent: 0.63 }\n    },\n    sectors: [\n      { name: 'Technology', change: 1.2, weight: 23.5 },\n      { name: 'Healthcare', change: 0.8, weight: 13.2 },\n      { name: 'Financial', change: -0.4, weight: 12.8 },\n      { name: 'Consumer Disc.', change: 0.6, weight: 10.9 },\n      { name: 'Communication', change: -0.2, weight: 9.1 },\n      { name: 'Industrials', change: 0.9, weight: 8.7 }\n    ],\n    economicIndicators: {\n      'Fed Funds Rate': { value: 5.25, change: 0.0, unit: '%' },\n      '10Y Treasury': { value: 4.25, change: 0.05, unit: '%' },\n      'Inflation (CPI)': { value: 3.1, change: -0.2, unit: '%' },\n      'Unemployment': { value: 3.8, change: 0.1, unit: '%' },\n      'GDP Growth': { value: 2.4, change: 0.1, unit: '%' }\n    }\n  });\n\n  const [alerts, setAlerts] = useState([\n    { id: 1, type: 'price', symbol: 'SPY', condition: 'above', value: 450, active: true },\n    { id: 2, type: 'volatility', symbol: 'VIX', condition: 'above', value: 20, active: true }\n  ]);\n\n  const [newSymbol, setNewSymbol] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const formatCurrency = useCallback((value) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(value);\n  }, []);\n\n  const formatPercent = useCallback((value) => {\n    const sign = value >= 0 ? '+' : '';\n    return `${sign}${value.toFixed(2)}%`;\n  }, []);\n\n  const getChangeColor = useCallback((change) => {\n    if (change > 0) return 'text-green-600';\n    if (change < 0) return 'text-red-600';\n    return 'text-gray-600';\n  }, []);\n\n  const getChangeIcon = useCallback((change) => {\n    if (change > 0) return TrendingUp;\n    if (change < 0) return TrendingDown;\n    return Minus;\n  }, []);\n\n  // Simulate real-time data updates\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setWatchlist(prev => prev.map(item => ({\n        ...item,\n        price: item.price + (Math.random() - 0.5) * 2,\n        change: item.change + (Math.random() - 0.5) * 0.5,\n        changePercent: item.changePercent + (Math.random() - 0.5) * 0.1\n      })));\n    }, 5000); // Update every 5 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const addToWatchlist = useCallback(async () => {\n    if (!newSymbol.trim()) return;\n    \n    setIsLoading(true);\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      const newItem = {\n        symbol: newSymbol.toUpperCase(),\n        name: `${newSymbol.toUpperCase()} Inc.`,\n        price: Math.random() * 200 + 50,\n        change: (Math.random() - 0.5) * 10,\n        changePercent: (Math.random() - 0.5) * 5,\n        category: 'stock'\n      };\n      \n      setWatchlist(prev => [...prev, newItem]);\n      setNewSymbol('');\n    } catch (error) {\n      console.error('Error adding symbol:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [newSymbol]);\n\n  const removeFromWatchlist = useCallback((symbol) => {\n    setWatchlist(prev => prev.filter(item => item.symbol !== symbol));\n  }, []);\n\n  const chartData = useMemo(() => {\n    // Generate sample time series data\n    const now = new Date();\n    return Array.from({ length: 30 }, (_, i) => ({\n      time: new Date(now.getTime() - (29 - i) * 24 * 60 * 60 * 1000).toLocaleDateString(),\n      SPY: 440 + Math.sin(i * 0.2) * 10 + Math.random() * 5,\n      QQQ: 370 + Math.sin(i * 0.25) * 15 + Math.random() * 8,\n      VIX: 20 + Math.sin(i * 0.3) * 5 + Math.random() * 3\n    }));\n  }, []);\n\n  const correlationMatrix = useMemo(() => {\n    // Calculate correlations between major indices (simulated)\n    return [\n      { pair: 'SPY vs QQQ', correlation: 0.85, strength: 'Strong Positive' },\n      { pair: 'SPY vs VIX', correlation: -0.72, strength: 'Strong Negative' },\n      { pair: 'QQQ vs VIX', correlation: -0.68, strength: 'Moderate Negative' },\n      { pair: 'SPY vs DXY', correlation: -0.45, strength: 'Moderate Negative' }\n    ];\n  }, []);\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <Activity className=\"text-blue-600\" size={28} />\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Enhanced Market Data Dashboard</h2>\n            <p className=\"text-gray-600\">Real-time market insights & valuation integration</p>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-3\">\n          <motion.button\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center space-x-2\"\n            whileHover={{ scale: 1.02 }}\n          >\n            <RefreshCw size={16} />\n            <span>Sync Data</span>\n          </motion.button>\n          \n          <motion.button\n            className=\"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg flex items-center space-x-2\"\n            whileHover={{ scale: 1.02 }}\n          >\n            <Settings size={16} />\n            <span>Settings</span>\n          </motion.button>\n        </div>\n      </div>\n\n      {/* View Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {[\n            { id: 'overview', label: 'Market Overview', icon: Globe },\n            { id: 'watchlist', label: 'Watchlist', icon: BarChart3 },\n            { id: 'charts', label: 'Charts & Analysis', icon: LineChart },\n            { id: 'alerts', label: 'Alerts', icon: Bell }\n          ].map((tab) => {\n            const Icon = tab.icon;\n            return (\n              <button\n                key={tab.id}\n                onClick={() => setActiveView(tab.id)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\n                  activeView === tab.id\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                <Icon size={16} />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Market Overview */}\n      {activeView === 'overview' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-6\">\n          {/* Major Indices */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Major Indices</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              {Object.entries(marketData.indices).map(([name, data]) => {\n                const ChangeIcon = getChangeIcon(data.change);\n                return (\n                  <div key={name} className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"text-sm text-gray-600 mb-1\">{name}</div>\n                    <div className=\"text-xl font-bold text-gray-800\">\n                      {data.value.toLocaleString()}\n                    </div>\n                    <div className={`flex items-center space-x-1 text-sm ${getChangeColor(data.change)}`}>\n                      <ChangeIcon size={14} />\n                      <span>{data.change > 0 ? '+' : ''}{data.change.toFixed(2)}</span>\n                      <span>({formatPercent(data.changePercent)})</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Sector Performance */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Sector Performance</h3>\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                {marketData.sectors.map((sector) => (\n                  <div key={sector.name} className=\"flex justify-between items-center\">\n                    <div>\n                      <div className=\"font-medium text-gray-800\">{sector.name}</div>\n                      <div className=\"text-sm text-gray-600\">{sector.weight}% weight</div>\n                    </div>\n                    <div className={`font-semibold ${getChangeColor(sector.change)}`}>\n                      {formatPercent(sector.change)}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* Economic Indicators */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Economic Indicators</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n              {Object.entries(marketData.economicIndicators).map(([name, data]) => (\n                <div key={name} className=\"bg-blue-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-sm text-gray-600 mb-1\">{name}</div>\n                  <div className=\"text-lg font-bold text-gray-800\">\n                    {data.value}{data.unit}\n                  </div>\n                  <div className={`text-sm ${getChangeColor(data.change)}`}>\n                    {data.change > 0 ? '+' : ''}{data.change}{data.unit}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Watchlist */}\n      {activeView === 'watchlist' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-6\">\n          {/* Add Symbol */}\n          <div className=\"flex space-x-3\">\n            <div className=\"flex-1\">\n              <input\n                type=\"text\"\n                placeholder=\"Enter symbol (e.g., AAPL, MSFT)\"\n                value={newSymbol}\n                onChange={(e) => setNewSymbol(e.target.value.toUpperCase())}\n                onKeyPress={(e) => e.key === 'Enter' && addToWatchlist()}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              />\n            </div>\n            <motion.button\n              onClick={addToWatchlist}\n              disabled={isLoading || !newSymbol.trim()}\n              className={`px-6 py-2 rounded-lg font-medium flex items-center space-x-2 ${\n                isLoading || !newSymbol.trim()\n                  ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                  : 'bg-green-600 hover:bg-green-700 text-white'\n              }`}\n              whileHover={!isLoading && newSymbol.trim() ? { scale: 1.02 } : {}}\n            >\n              <Plus size={16} />\n              <span>{isLoading ? 'Adding...' : 'Add'}</span>\n            </motion.button>\n          </div>\n\n          {/* Watchlist Table */}\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-300\">\n                  <th className=\"text-left py-3 px-4\">Symbol</th>\n                  <th className=\"text-left py-3 px-4\">Name</th>\n                  <th className=\"text-right py-3 px-4\">Price</th>\n                  <th className=\"text-right py-3 px-4\">Change</th>\n                  <th className=\"text-right py-3 px-4\">Change %</th>\n                  <th className=\"text-center py-3 px-4\">Category</th>\n                  <th className=\"text-center py-3 px-4\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {watchlist.map((item) => {\n                  const ChangeIcon = getChangeIcon(item.change);\n                  return (\n                    <tr key={item.symbol} className=\"border-b border-gray-200 hover:bg-gray-50\">\n                      <td className=\"py-3 px-4 font-medium text-gray-800\">{item.symbol}</td>\n                      <td className=\"py-3 px-4 text-gray-600\">{item.name}</td>\n                      <td className=\"text-right py-3 px-4 font-medium\">{formatCurrency(item.price)}</td>\n                      <td className={`text-right py-3 px-4 ${getChangeColor(item.change)}`}>\n                        <div className=\"flex items-center justify-end space-x-1\">\n                          <ChangeIcon size={14} />\n                          <span>{item.change > 0 ? '+' : ''}{item.change.toFixed(2)}</span>\n                        </div>\n                      </td>\n                      <td className={`text-right py-3 px-4 font-medium ${getChangeColor(item.changePercent)}`}>\n                        {formatPercent(item.changePercent)}\n                      </td>\n                      <td className=\"text-center py-3 px-4\">\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          item.category === 'index' ? 'bg-blue-100 text-blue-800' :\n                          item.category === 'stock' ? 'bg-green-100 text-green-800' :\n                          item.category === 'volatility' ? 'bg-red-100 text-red-800' :\n                          'bg-gray-100 text-gray-800'\n                        }`}>\n                          {item.category}\n                        </span>\n                      </td>\n                      <td className=\"text-center py-3 px-4\">\n                        <button\n                          onClick={() => removeFromWatchlist(item.symbol)}\n                          className=\"text-red-600 hover:text-red-800\"\n                        >\n                          <Minus size={16} />\n                        </button>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Charts & Analysis */}\n      {activeView === 'charts' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-6\">\n          {/* Price Chart */}\n          <div className=\"bg-gray-50 rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">30-Day Price Performance</h3>\n            <div className=\"h-80\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <RechartsLineChart data={chartData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"time\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Line type=\"monotone\" dataKey=\"SPY\" stroke=\"#3B82F6\" strokeWidth={2} name=\"S&P 500\" />\n                  <Line type=\"monotone\" dataKey=\"QQQ\" stroke=\"#10B981\" strokeWidth={2} name=\"NASDAQ\" />\n                  <Line type=\"monotone\" dataKey=\"VIX\" stroke=\"#EF4444\" strokeWidth={2} name=\"VIX\" />\n                </RechartsLineChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n\n          {/* Correlation Analysis */}\n          <div className=\"bg-gray-50 rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Correlation Analysis</h3>\n            <div className=\"space-y-3\">\n              {correlationMatrix.map((corr, idx) => (\n                <div key={idx} className=\"flex items-center justify-between p-3 bg-white rounded-lg\">\n                  <div>\n                    <div className=\"font-medium text-gray-800\">{corr.pair}</div>\n                    <div className=\"text-sm text-gray-600\">{corr.strength}</div>\n                  </div>\n                  <div className=\"flex items-center space-x-3\">\n                    <div className={`text-lg font-bold ${\n                      Math.abs(corr.correlation) > 0.7 ? 'text-red-600' :\n                      Math.abs(corr.correlation) > 0.4 ? 'text-yellow-600' :\n                      'text-green-600'\n                    }`}>\n                      {corr.correlation.toFixed(2)}\n                    </div>\n                    <div className=\"w-24 bg-gray-200 rounded-full h-2\">\n                      <div \n                        className={`h-2 rounded-full ${\n                          Math.abs(corr.correlation) > 0.7 ? 'bg-red-600' :\n                          Math.abs(corr.correlation) > 0.4 ? 'bg-yellow-600' :\n                          'bg-green-600'\n                        }`}\n                        style={{ width: `${Math.abs(corr.correlation) * 100}%` }}\n                      />\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Alerts */}\n      {activeView === 'alerts' && (\n        <motion.div initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} className=\"space-y-6\">\n          {/* Active Alerts */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Active Alerts</h3>\n            <div className=\"space-y-3\">\n              {alerts.map((alert) => (\n                <div key={alert.id} className=\"flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                  <div className=\"flex items-center space-x-3\">\n                    <Bell className=\"text-yellow-600\" size={20} />\n                    <div>\n                      <div className=\"font-medium text-gray-800\">\n                        {alert.symbol} {alert.type} alert\n                      </div>\n                      <div className=\"text-sm text-gray-600\">\n                        Notify when {alert.type} goes {alert.condition} {alert.value}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                      alert.active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {alert.active ? 'Active' : 'Inactive'}\n                    </span>\n                    <button className=\"text-red-600 hover:text-red-800\">\n                      <Minus size={16} />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Market Status Indicators */}\n          <div className=\"bg-gray-50 rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">Market Status</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div className=\"flex items-center space-x-3 p-3 bg-white rounded-lg\">\n                <CheckCircle className=\"text-green-600\" size={20} />\n                <div>\n                  <div className=\"font-medium text-gray-800\">US Markets</div>\n                  <div className=\"text-sm text-gray-600\">Open (6h 23m remaining)</div>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3 p-3 bg-white rounded-lg\">\n                <AlertCircle className=\"text-yellow-600\" size={20} />\n                <div>\n                  <div className=\"font-medium text-gray-800\">European Markets</div>\n                  <div className=\"text-sm text-gray-600\">Closed</div>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3 p-3 bg-white rounded-lg\">\n                <AlertCircle className=\"text-red-600\" size={20} />\n                <div>\n                  <div className=\"font-medium text-gray-800\">Asian Markets</div>\n                  <div className=\"text-sm text-gray-600\">Closed</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedMarketDataDashboard;\n","import React, { useState, useMemo, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  Zap, BarChart3, TrendingUp, Target, Settings, \n  Play, Download, RefreshCw, AlertTriangle, CheckCircle,\n  Activity, DollarSign, Percent, Calculator\n} from 'lucide-react';\nimport { ComposedChart, Bar, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ScatterChart, Scatter } from 'recharts';\nimport { monteCarloEngine } from '../../services/monteCarloEngine.js';\n\nconst MonteCarloIntegrationHub = ({ \n  data, \n  dcfResults, \n  lboResults, \n  financialModel, \n  scenarioResults,\n  onDataChange \n}) => {\n  const [activeAnalysis, setActiveAnalysis] = useState('unified');\n  const [simulationSettings, setSimulationSettings] = useState({\n    iterations: 10000,\n    confidenceLevel: 0.95,\n    correlationsEnabled: true,\n    crossModelAnalysis: true,\n    riskMetrics: ['var', 'cvar', 'downside']\n  });\n\n  const [integratedResults, setIntegratedResults] = useState(null);\n  const [isRunning, setIsRunning] = useState(false);\n  const [progress, setProgress] = useState(0);\n\n  const formatCurrency = useCallback((value) => {\n    if (!value && value !== 0) return '$0';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(value);\n  }, []);\n\n  const formatPercent = useCallback((value) => {\n    return `${(value * 100).toFixed(1)}%`;\n  }, []);\n\n  // Cross-model Monte Carlo analysis\n  const runIntegratedSimulation = useCallback(async () => {\n    setIsRunning(true);\n    setProgress(0);\n\n    try {\n      const results = {\n        dcf: null,\n        lbo: null,\n        correlation: null,\n        portfolio: null,\n        riskMetrics: null\n      };\n\n      // DCF Monte Carlo (if DCF results available)\n      if (dcfResults && simulationSettings.crossModelAnalysis) {\n        const dcfDistributions = {\n          revenueGrowthRate: {\n            type: 'normal',\n            parameters: { mean: 0.05, stdDev: 0.02 },\n            enabled: true\n          },\n          fcfMargin: {\n            type: 'triangular',\n            parameters: { min: 0.10, mode: 0.15, max: 0.20 },\n            enabled: true\n          },\n          wacc: {\n            type: 'normal',\n            parameters: { mean: 0.10, stdDev: 0.015 },\n            enabled: true\n          },\n          terminalGrowthRate: {\n            type: 'uniform',\n            parameters: { min: 0.02, max: 0.03 },\n            enabled: true\n          }\n        };\n\n        const dcfInputs = {\n          currentRevenue: data?.statements?.incomeStatement?.totalRevenue?.[0] * 1000 || 1000000,\n          currentPrice: 100,\n          sharesOutstanding: 1000000,\n          ...dcfResults\n        };\n\n        setProgress(25);\n        results.dcf = await monteCarloEngine.runDCFSimulation(\n          dcfInputs, \n          dcfDistributions, \n          {\n            iterations: simulationSettings.iterations,\n            confidenceLevel: simulationSettings.confidenceLevel,\n            onProgress: (p) => setProgress(25 + p * 0.25)\n          }\n        );\n      }\n\n      // LBO Monte Carlo (if LBO results available)\n      if (lboResults && simulationSettings.crossModelAnalysis) {\n        const lboDistributions = {\n          ebitdaGrowthRate: {\n            type: 'normal',\n            parameters: { mean: 0.06, stdDev: 0.02 },\n            enabled: true\n          },\n          exitMultiple: {\n            type: 'triangular',\n            parameters: { min: 8.0, mode: 10.0, max: 12.0 },\n            enabled: true\n          },\n          leverageRatio: {\n            type: 'normal',\n            parameters: { mean: 5.5, stdDev: 0.5 },\n            enabled: true\n          }\n        };\n\n        setProgress(50);\n        results.lbo = await monteCarloEngine.runLBOSimulation(\n          lboResults.inputs || {},\n          lboDistributions,\n          {\n            iterations: simulationSettings.iterations,\n            confidenceLevel: simulationSettings.confidenceLevel,\n            onProgress: (p) => setProgress(50 + p * 0.25)\n          }\n        );\n      }\n\n      // Cross-model correlation analysis\n      if (results.dcf && results.lbo && simulationSettings.correlationsEnabled) {\n        setProgress(75);\n        results.correlation = calculateCrossModelCorrelations(results.dcf, results.lbo);\n      }\n\n      // Portfolio-level risk metrics\n      setProgress(90);\n      results.riskMetrics = calculateIntegratedRiskMetrics(results);\n      \n      // Generate scenario-weighted results\n      if (scenarioResults && scenarioResults.scenarios) {\n        results.portfolio = generatePortfolioAnalysis(results, scenarioResults);\n      }\n\n      setProgress(100);\n      setIntegratedResults(results);\n\n      // Save results\n      if (onDataChange) {\n        onDataChange({\n          monteCarloIntegrated: {\n            settings: simulationSettings,\n            results: results,\n            timestamp: new Date().toISOString()\n          }\n        });\n      }\n\n    } catch (error) {\n      console.error('Integrated Monte Carlo simulation error:', error);\n      alert(`Simulation error: ${error.message}`);\n    } finally {\n      setIsRunning(false);\n      setProgress(0);\n    }\n  }, [dcfResults, lboResults, scenarioResults, simulationSettings, data, onDataChange]);\n\n  const calculateCrossModelCorrelations = useCallback((dcfResults, lboResults) => {\n    // Calculate correlations between DCF and LBO outcomes\n    const dcfValues = dcfResults.simulations?.map(s => s.pricePerShare) || [];\n    const lboValues = lboResults.simulations?.map(s => s.irr) || [];\n    \n    if (dcfValues.length === 0 || lboValues.length === 0) return null;\n\n    const correlation = pearsonCorrelation(dcfValues, lboValues);\n    \n    return {\n      dcfLboCorrelation: correlation,\n      interpretation: Math.abs(correlation) > 0.7 ? 'Strong' : \n                     Math.abs(correlation) > 0.4 ? 'Moderate' : 'Weak',\n      riskImplication: correlation > 0 ? 'Aligned Risk' : 'Hedged Risk'\n    };\n  }, []);\n\n  const pearsonCorrelation = (x, y) => {\n    const n = Math.min(x.length, y.length);\n    if (n === 0) return 0;\n    \n    const sumX = x.slice(0, n).reduce((a, b) => a + b, 0);\n    const sumY = y.slice(0, n).reduce((a, b) => a + b, 0);\n    const sumXY = x.slice(0, n).reduce((sum, xi, i) => sum + xi * y[i], 0);\n    const sumXX = x.slice(0, n).reduce((sum, xi) => sum + xi * xi, 0);\n    const sumYY = y.slice(0, n).reduce((sum, yi) => sum + yi * yi, 0);\n    \n    const numerator = n * sumXY - sumX * sumY;\n    const denominator = Math.sqrt((n * sumXX - sumX * sumX) * (n * sumYY - sumY * sumY));\n    \n    return denominator === 0 ? 0 : numerator / denominator;\n  };\n\n  const calculateIntegratedRiskMetrics = useCallback((results) => {\n    const metrics = {};\n    \n    if (results.dcf?.analysis) {\n      metrics.dcf = {\n        var95: results.dcf.analysis.percentiles?.pricePerShare?.p5 || 0,\n        expectedValue: results.dcf.analysis.summary?.mean || 0,\n        volatility: results.dcf.analysis.summary?.standardDeviation || 0\n      };\n    }\n    \n    if (results.lbo?.analysis) {\n      metrics.lbo = {\n        var95: results.lbo.analysis.percentiles?.irr?.p5 || 0,\n        expectedValue: results.lbo.analysis.summary?.mean || 0,\n        volatility: results.lbo.analysis.summary?.standardDeviation || 0\n      };\n    }\n    \n    return metrics;\n  }, []);\n\n  const generatePortfolioAnalysis = useCallback((results, scenarios) => {\n    // Weight Monte Carlo results by scenario probabilities\n    const weightedMetrics = scenarios.scenarios.reduce((acc, scenario) => {\n      const weight = scenario.probability / 100;\n      \n      if (results.dcf) {\n        acc.dcfWeighted = (acc.dcfWeighted || 0) + \n          (results.dcf.analysis?.summary?.mean || 0) * weight;\n      }\n      \n      if (results.lbo) {\n        acc.lboWeighted = (acc.lboWeighted || 0) + \n          (results.lbo.analysis?.summary?.mean || 0) * weight;\n      }\n      \n      return acc;\n    }, {});\n    \n    return weightedMetrics;\n  }, []);\n\n  const analysisOptions = [\n    { id: 'unified', label: 'Unified Analysis', icon: Zap },\n    { id: 'dcf', label: 'DCF Monte Carlo', icon: TrendingUp },\n    { id: 'lbo', label: 'LBO Monte Carlo', icon: Target },\n    { id: 'correlation', label: 'Cross-Model Risk', icon: Activity }\n  ];\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center space-x-3\">\n          <Zap className=\"text-purple-600\" size={28} />\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-800\">Monte Carlo Integration Hub</h2>\n            <p className=\"text-gray-600\">Cross-model risk analysis & unified simulations</p>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-3\">\n          <motion.button\n            onClick={runIntegratedSimulation}\n            disabled={isRunning}\n            className={`px-6 py-2 rounded-lg font-medium flex items-center space-x-2 ${\n              isRunning \n                ? 'bg-gray-300 text-gray-500 cursor-not-allowed' \n                : 'bg-purple-600 hover:bg-purple-700 text-white'\n            }`}\n            whileHover={!isRunning ? { scale: 1.02 } : {}}\n            whileTap={!isRunning ? { scale: 0.98 } : {}}\n          >\n            <Play size={18} />\n            <span>{isRunning ? 'Running...' : 'Run Integrated Simulation'}</span>\n          </motion.button>\n        </div>\n      </div>\n\n      {/* Progress Bar */}\n      {isRunning && (\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm font-medium text-gray-700\">Simulation Progress</span>\n            <span className=\"text-sm text-gray-500\">{progress.toFixed(0)}%</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"bg-purple-600 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${progress}%` }}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Simulation Settings */}\n      <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n        <h3 className=\"font-semibold mb-3\">Simulation Settings</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Iterations</label>\n            <input\n              type=\"number\"\n              value={simulationSettings.iterations}\n              onChange={(e) => setSimulationSettings(prev => ({ \n                ...prev, \n                iterations: parseInt(e.target.value) || 10000 \n              }))}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">Confidence Level</label>\n            <select\n              value={simulationSettings.confidenceLevel}\n              onChange={(e) => setSimulationSettings(prev => ({ \n                ...prev, \n                confidenceLevel: parseFloat(e.target.value) \n              }))}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n            >\n              <option value={0.90}>90%</option>\n              <option value={0.95}>95%</option>\n              <option value={0.99}>99%</option>\n            </select>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={simulationSettings.correlationsEnabled}\n                onChange={(e) => setSimulationSettings(prev => ({ \n                  ...prev, \n                  correlationsEnabled: e.target.checked \n                }))}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm text-gray-700\">Cross-Model Correlations</span>\n            </label>\n          </div>\n          \n          <div className=\"flex items-end\">\n            <label className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={simulationSettings.crossModelAnalysis}\n                onChange={(e) => setSimulationSettings(prev => ({ \n                  ...prev, \n                  crossModelAnalysis: e.target.checked \n                }))}\n                className=\"mr-2\"\n              />\n              <span className=\"text-sm text-gray-700\">Cross-Model Analysis</span>\n            </label>\n          </div>\n        </div>\n      </div>\n\n      {/* Analysis Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {analysisOptions.map((option) => {\n            const Icon = option.icon;\n            return (\n              <button\n                key={option.id}\n                onClick={() => setActiveAnalysis(option.id)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\n                  activeAnalysis === option.id\n                    ? 'border-purple-500 text-purple-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                <Icon size={16} />\n                <span>{option.label}</span>\n              </button>\n            );\n          })}\n        </nav>\n      </div>\n\n      {/* Results Display */}\n      {integratedResults ? (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"space-y-6\"\n        >\n          {/* Unified Analysis */}\n          {activeAnalysis === 'unified' && (\n            <div className=\"space-y-6\">\n              {/* Key Metrics Summary */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                {integratedResults.dcf && (\n                  <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n                    <div className=\"text-2xl font-bold text-blue-600\">\n                      {formatCurrency(integratedResults.dcf.analysis?.summary?.mean || 0)}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">DCF Expected Value</div>\n                  </div>\n                )}\n                \n                {integratedResults.lbo && (\n                  <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n                    <div className=\"text-2xl font-bold text-green-600\">\n                      {formatPercent(integratedResults.lbo.analysis?.summary?.mean || 0)}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">LBO Expected IRR</div>\n                  </div>\n                )}\n                \n                {integratedResults.correlation && (\n                  <div className=\"bg-purple-50 p-4 rounded-lg text-center\">\n                    <div className=\"text-2xl font-bold text-purple-600\">\n                      {(integratedResults.correlation.dcfLboCorrelation || 0).toFixed(2)}\n                    </div>\n                    <div className=\"text-sm text-gray-600\">DCF-LBO Correlation</div>\n                  </div>\n                )}\n                \n                <div className=\"bg-orange-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-orange-600\">\n                    {simulationSettings.iterations.toLocaleString()}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Simulations Run</div>\n                </div>\n              </div>\n\n              {/* Risk Correlation Matrix */}\n              {integratedResults.correlation && (\n                <div className=\"bg-gray-50 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold mb-4\">Cross-Model Risk Analysis</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                    <div className=\"bg-white p-4 rounded-lg\">\n                      <div className=\"font-medium text-gray-800 mb-2\">Correlation Strength</div>\n                      <div className=\"text-2xl font-bold text-purple-600\">\n                        {integratedResults.correlation.interpretation}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">\n                        {integratedResults.correlation.riskImplication}\n                      </div>\n                    </div>\n                    \n                    <div className=\"bg-white p-4 rounded-lg\">\n                      <div className=\"font-medium text-gray-800 mb-2\">Risk Diversification</div>\n                      <div className=\"text-2xl font-bold text-blue-600\">\n                        {Math.abs(integratedResults.correlation.dcfLboCorrelation) < 0.5 ? 'High' : 'Low'}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Portfolio benefit</div>\n                    </div>\n                    \n                    <div className=\"bg-white p-4 rounded-lg\">\n                      <div className=\"font-medium text-gray-800 mb-2\">Confidence Level</div>\n                      <div className=\"text-2xl font-bold text-green-600\">\n                        {formatPercent(simulationSettings.confidenceLevel)}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">Statistical confidence</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Portfolio-Level Insights */}\n              {integratedResults.portfolio && (\n                <div className=\"bg-gray-50 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold mb-4\">Portfolio-Weighted Analysis</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"bg-white p-4 rounded-lg\">\n                      <div className=\"font-medium text-gray-800 mb-2\">Scenario-Weighted DCF</div>\n                      <div className=\"text-xl font-bold text-blue-600\">\n                        {formatCurrency(integratedResults.portfolio.dcfWeighted || 0)}\n                      </div>\n                    </div>\n                    \n                    <div className=\"bg-white p-4 rounded-lg\">\n                      <div className=\"font-medium text-gray-800 mb-2\">Scenario-Weighted LBO IRR</div>\n                      <div className=\"text-xl font-bold text-green-600\">\n                        {formatPercent(integratedResults.portfolio.lboWeighted || 0)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Individual Analysis Views */}\n          {activeAnalysis === 'dcf' && integratedResults.dcf && (\n            <div className=\"bg-gray-50 rounded-lg p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">DCF Monte Carlo Results</h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-blue-600\">\n                    {formatCurrency(integratedResults.dcf.analysis?.summary?.mean || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Mean Value</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-green-600\">\n                    {formatCurrency(integratedResults.dcf.analysis?.percentiles?.pricePerShare?.p95 || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">95th Percentile</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-red-600\">\n                    {formatCurrency(integratedResults.dcf.analysis?.percentiles?.pricePerShare?.p5 || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">5th Percentile</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-purple-600\">\n                    {formatCurrency(integratedResults.dcf.analysis?.summary?.standardDeviation || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Std Deviation</div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeAnalysis === 'lbo' && integratedResults.lbo && (\n            <div className=\"bg-gray-50 rounded-lg p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">LBO Monte Carlo Results</h3>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-green-600\">\n                    {formatPercent(integratedResults.lbo.analysis?.summary?.mean || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Mean IRR</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-blue-600\">\n                    {formatPercent(integratedResults.lbo.analysis?.percentiles?.irr?.p95 || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">95th Percentile IRR</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-red-600\">\n                    {formatPercent(integratedResults.lbo.analysis?.percentiles?.irr?.p5 || 0)}\n                  </div>\n                  <div className=\"text-sm text-gray-600\">5th Percentile IRR</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-lg font-bold text-purple-600\">\n                    {((integratedResults.lbo.analysis?.percentiles?.moic?.p95 || 0) + \n                      (integratedResults.lbo.analysis?.percentiles?.moic?.p5 || 0)) / 2}x\n                  </div>\n                  <div className=\"text-sm text-gray-600\">Avg MOIC</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </motion.div>\n      ) : (\n        <div className=\"text-center py-12 text-gray-500\">\n          <Zap size={48} className=\"mx-auto mb-4 opacity-50\" />\n          <p>Configure settings and run integrated simulation to see cross-model analysis</p>\n          <p className=\"text-sm mt-2\">\n            {!dcfResults && !lboResults ? 'Run DCF and/or LBO analysis first to enable Monte Carlo integration' : \n             'Ready to run comprehensive Monte Carlo analysis'}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MonteCarloIntegrationHub;\n","/**\n * Enhanced Local Storage Service for Finance Analyst Pro\n * Provides comprehensive data persistence with compression, encryption, and versioning\n */\n\nimport { apiLogger } from '../utils/apiLogger.js';\n\n// Storage configuration\nconst STORAGE_CONFIG = {\n  version: '1.0.0',\n  prefix: 'financeanalyst_',\n  compression: {\n    enabled: true,\n    threshold: 1024 // Compress data larger than 1KB\n  },\n  encryption: {\n    enabled: false, // Will be enabled when auth is implemented\n    algorithm: 'AES-GCM'\n  },\n  quotaManagement: {\n    maxSize: 50 * 1024 * 1024, // 50MB limit\n    cleanupThreshold: 0.8 // Clean up when 80% full\n  }\n};\n\n// Data schemas for validation\nconst DATA_SCHEMAS = {\n  dcfModel: {\n    version: '1.0',\n    required: ['symbol', 'assumptions', 'projections', 'valuation'],\n    structure: {\n      symbol: 'string',\n      assumptions: 'object',\n      projections: 'object',\n      valuation: 'object',\n      metadata: 'object'\n    }\n  },\n  lboModel: {\n    version: '1.0',\n    required: ['symbol', 'transaction', 'financing', 'returns'],\n    structure: {\n      symbol: 'string',\n      transaction: 'object',\n      financing: 'object',\n      returns: 'object',\n      metadata: 'object'\n    }\n  },\n  monteCarloResults: {\n    version: '1.0',\n    required: ['modelType', 'iterations', 'results', 'statistics'],\n    structure: {\n      modelType: 'string',\n      iterations: 'number',\n      results: 'array',\n      statistics: 'object',\n      metadata: 'object'\n    }\n  },\n  userPreferences: {\n    version: '1.0',\n    required: ['theme', 'layout'],\n    structure: {\n      theme: 'string',\n      layout: 'object',\n      notifications: 'object',\n      privacy: 'object'\n    }\n  },\n  marketData: {\n    version: '1.0',\n    required: ['symbol', 'data', 'timestamp'],\n    structure: {\n      symbol: 'string',\n      data: 'object',\n      timestamp: 'number',\n      source: 'string'\n    }\n  }\n};\n\n/**\n * Enhanced Storage Service Class\n */\nclass StorageService {\n  constructor() {\n    this.isAvailable = this.checkStorageAvailability();\n    this.compressionWorker = null;\n    this.initializeCompression();\n    this.setupQuotaMonitoring();\n  }\n\n  /**\n   * Check if localStorage is available\n   */\n  checkStorageAvailability() {\n    try {\n      const test = '__storage_test__';\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n    } catch (e) {\n      apiLogger.log('ERROR', 'localStorage not available', { error: e.message });\n      return false;\n    }\n  }\n\n  /**\n   * Initialize compression capabilities\n   */\n  initializeCompression() {\n    if (STORAGE_CONFIG.compression.enabled && 'CompressionStream' in window) {\n      // Modern browsers with compression support\n      this.compressionAvailable = true;\n    } else {\n      // Fallback to simple JSON stringification\n      this.compressionAvailable = false;\n    }\n  }\n\n  /**\n   * Setup quota monitoring\n   */\n  setupQuotaMonitoring() {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      this.monitorQuota();\n    }\n  }\n\n  /**\n   * Monitor storage quota usage\n   */\n  async monitorQuota() {\n    try {\n      const estimate = await navigator.storage.estimate();\n      const usageRatio = estimate.usage / estimate.quota;\n\n      if (usageRatio > STORAGE_CONFIG.quotaManagement.cleanupThreshold) {\n        apiLogger.log('WARN', 'Storage quota threshold exceeded', {\n          usage: estimate.usage,\n          quota: estimate.quota,\n          ratio: usageRatio\n        });\n        await this.performCleanup();\n      }\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to monitor storage quota', { error: error.message });\n    }\n  }\n\n  /**\n   * Generate storage key with prefix\n   */\n  generateKey(type, identifier) {\n    return `${STORAGE_CONFIG.prefix}${type}_${identifier}`;\n  }\n\n  /**\n   * Validate data against schema\n   */\n  validateData(data, schemaType) {\n    const schema = DATA_SCHEMAS[schemaType];\n    if (!schema) {\n      throw new Error(`Unknown schema type: ${schemaType}`);\n    }\n\n    // Check required fields\n    for (const field of schema.required) {\n      if (!(field in data)) {\n        throw new Error(`Missing required field: ${field}`);\n      }\n    }\n\n    // Validate data types\n    for (const [field, expectedType] of Object.entries(schema.structure)) {\n      if (field in data) {\n        const actualType = Array.isArray(data[field]) ? 'array' : typeof data[field];\n        if (actualType !== expectedType) {\n          throw new Error(`Invalid type for ${field}: expected ${expectedType}, got ${actualType}`);\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Compress data if enabled and beneficial\n   */\n  async compressData(data) {\n    const jsonString = JSON.stringify(data);\n\n    if (!STORAGE_CONFIG.compression.enabled ||\n        jsonString.length < STORAGE_CONFIG.compression.threshold ||\n        !this.compressionAvailable) {\n      return { data: jsonString, compressed: false };\n    }\n\n    try {\n      // Simple compression using built-in methods\n      const compressed = await this.simpleCompress(jsonString);\n      return { data: compressed, compressed: true };\n    } catch (error) {\n      apiLogger.log('WARN', 'Compression failed, storing uncompressed', { error: error.message });\n      return { data: jsonString, compressed: false };\n    }\n  }\n\n  /**\n   * Simple compression implementation\n   */\n  async simpleCompress(data) {\n    // For now, use a simple encoding - can be enhanced with actual compression\n    return btoa(encodeURIComponent(data));\n  }\n\n  /**\n   * Decompress data\n   */\n  async decompressData(compressedData, isCompressed) {\n    if (!isCompressed) {\n      return compressedData;\n    }\n\n    try {\n      return decodeURIComponent(atob(compressedData));\n    } catch (error) {\n      apiLogger.log('ERROR', 'Decompression failed', { error: error.message });\n      throw new Error('Failed to decompress data');\n    }\n  }\n\n  /**\n   * Store data with metadata\n   */\n  async setItem(type, identifier, data, options = {}) {\n    if (!this.isAvailable) {\n      throw new Error('Storage not available');\n    }\n\n    try {\n      // Validate data if schema exists\n      if (DATA_SCHEMAS[type]) {\n        this.validateData(data, type);\n      }\n\n      // Prepare storage object\n      const storageObject = {\n        version: STORAGE_CONFIG.version,\n        schemaVersion: DATA_SCHEMAS[type]?.version || '1.0',\n        timestamp: Date.now(),\n        data,\n        metadata: {\n          type,\n          identifier,\n          size: JSON.stringify(data).length,\n          ...options.metadata\n        }\n      };\n\n      // Compress if needed\n      const { data: processedData, compressed } = await this.compressData(storageObject);\n\n      // Add compression flag\n      const finalObject = {\n        compressed,\n        data: processedData\n      };\n\n      const key = this.generateKey(type, identifier);\n      localStorage.setItem(key, JSON.stringify(finalObject));\n\n      apiLogger.log('DEBUG', 'Data stored successfully', {\n        key,\n        type,\n        identifier,\n        compressed,\n        size: processedData.length\n      });\n\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to store data', {\n        type,\n        identifier,\n        error: error.message\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Retrieve data with decompression\n   */\n  async getItem(type, identifier) {\n    if (!this.isAvailable) {\n      return null;\n    }\n\n    try {\n      const key = this.generateKey(type, identifier);\n      const stored = localStorage.getItem(key);\n\n      if (!stored) {\n        return null;\n      }\n\n      const parsedStored = JSON.parse(stored);\n      const decompressedData = await this.decompressData(\n        parsedStored.data,\n        parsedStored.compressed\n      );\n\n      const storageObject = JSON.parse(decompressedData);\n\n      // Check version compatibility\n      if (storageObject.version !== STORAGE_CONFIG.version) {\n        apiLogger.log('WARN', 'Version mismatch detected', {\n          stored: storageObject.version,\n          current: STORAGE_CONFIG.version\n        });\n        // Could trigger migration here\n      }\n\n      apiLogger.log('DEBUG', 'Data retrieved successfully', {\n        key,\n        type,\n        identifier,\n        age: Date.now() - storageObject.timestamp\n      });\n\n      return storageObject.data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve data', {\n        type,\n        identifier,\n        error: error.message\n      });\n      return null;\n    }\n  }\n\n  /**\n   * Remove specific item\n   */\n  removeItem(type, identifier) {\n    if (!this.isAvailable) {\n      return false;\n    }\n\n    try {\n      const key = this.generateKey(type, identifier);\n      localStorage.removeItem(key);\n\n      apiLogger.log('DEBUG', 'Data removed successfully', { key, type, identifier });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to remove data', {\n        type,\n        identifier,\n        error: error.message\n      });\n      return false;\n    }\n  }\n\n  /**\n   * List all items of a specific type\n   */\n  listItems(type) {\n    if (!this.isAvailable) {\n      return [];\n    }\n\n    const prefix = this.generateKey(type, '');\n    const items = [];\n\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith(prefix)) {\n        const identifier = key.replace(prefix, '');\n        items.push(identifier);\n      }\n    }\n\n    return items;\n  }\n\n  /**\n   * Perform cleanup of old data\n   */\n  async performCleanup() {\n    const cutoffTime = Date.now() - (30 * 24 * 60 * 60 * 1000); // 30 days\n    let cleanedCount = 0;\n\n    for (let i = localStorage.length - 1; i >= 0; i--) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith(STORAGE_CONFIG.prefix)) {\n        try {\n          const stored = localStorage.getItem(key);\n          const parsedStored = JSON.parse(stored);\n          const decompressedData = await this.decompressData(\n            parsedStored.data,\n            parsedStored.compressed\n          );\n          const storageObject = JSON.parse(decompressedData);\n\n          if (storageObject.timestamp < cutoffTime) {\n            localStorage.removeItem(key);\n            cleanedCount++;\n          }\n        } catch (error) {\n          // Remove corrupted data\n          localStorage.removeItem(key);\n          cleanedCount++;\n        }\n      }\n    }\n\n    apiLogger.log('INFO', 'Storage cleanup completed', { cleanedCount });\n    return cleanedCount;\n  }\n\n  /**\n   * Get storage statistics\n   */\n  async getStorageStats() {\n    let totalSize = 0;\n    let itemCount = 0;\n    const typeStats = {};\n\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith(STORAGE_CONFIG.prefix)) {\n        const value = localStorage.getItem(key);\n        totalSize += value.length;\n        itemCount++;\n\n        // Extract type from key\n        const type = key.split('_')[1];\n        if (type) {\n          typeStats[type] = (typeStats[type] || 0) + 1;\n        }\n      }\n    }\n\n    const quota = await this.getQuotaInfo();\n\n    return {\n      totalSize,\n      itemCount,\n      typeStats,\n      quota,\n      usageRatio: quota ? totalSize / quota.quota : 0\n    };\n  }\n\n  /**\n   * Get quota information\n   */\n  async getQuotaInfo() {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      try {\n        return await navigator.storage.estimate();\n      } catch (error) {\n        apiLogger.log('ERROR', 'Failed to get quota info', { error: error.message });\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Clear all application data\n   */\n  clearAll() {\n    if (!this.isAvailable) {\n      return false;\n    }\n\n    const keys = [];\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && key.startsWith(STORAGE_CONFIG.prefix)) {\n        keys.push(key);\n      }\n    }\n\n    keys.forEach(key => localStorage.removeItem(key));\n\n    apiLogger.log('INFO', 'All application data cleared', { clearedCount: keys.length });\n    return true;\n  }\n}\n\n// Create and export singleton instance\nexport const storageService = new StorageService();\nexport default storageService;\n","/**\n * Financial Data Storage Service\n * Specialized storage utilities for financial models and market data\n */\n\nimport { apiLogger } from '../utils/apiLogger.js';\n\nimport { storageService } from './storageService.js';\n\n/**\n * Financial Data Storage Manager\n */\nclass FinancialDataStorage {\n  constructor() {\n    this.storage = storageService;\n  }\n\n  /**\n   * DCF Model Storage\n   */\n  async saveDCFModel(symbol, modelData) {\n    try {\n      const dcfData = {\n        symbol: symbol.toUpperCase(),\n        assumptions: modelData.assumptions || {},\n        projections: modelData.projections || {},\n        valuation: modelData.valuation || {},\n        metadata: {\n          createdAt: Date.now(),\n          lastModified: Date.now(),\n          version: '1.0',\n          modelType: 'DCF',\n          ...modelData.metadata\n        }\n      };\n\n      await this.storage.setItem('dcfModel', symbol.toUpperCase(), dcfData);\n\n      apiLogger.log('INFO', 'DCF model saved', { symbol, valuation: dcfData.valuation.intrinsicValue });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to save DCF model', { symbol, error: error.message });\n      throw error;\n    }\n  }\n\n  async getDCFModel(symbol) {\n    try {\n      const data = await this.storage.getItem('dcfModel', symbol.toUpperCase());\n      if (data) {\n        apiLogger.log('DEBUG', 'DCF model retrieved', { symbol });\n      }\n      return data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve DCF model', { symbol, error: error.message });\n      return null;\n    }\n  }\n\n  async listDCFModels() {\n    return this.storage.listItems('dcfModel');\n  }\n\n  async deleteDCFModel(symbol) {\n    return this.storage.removeItem('dcfModel', symbol.toUpperCase());\n  }\n\n  /**\n   * LBO Model Storage\n   */\n  async saveLBOModel(symbol, modelData) {\n    try {\n      const lboData = {\n        symbol: symbol.toUpperCase(),\n        transaction: modelData.transaction || {},\n        financing: modelData.financing || {},\n        returns: modelData.returns || {},\n        metadata: {\n          createdAt: Date.now(),\n          lastModified: Date.now(),\n          version: '1.0',\n          modelType: 'LBO',\n          ...modelData.metadata\n        }\n      };\n\n      await this.storage.setItem('lboModel', symbol.toUpperCase(), lboData);\n\n      apiLogger.log('INFO', 'LBO model saved', {\n        symbol,\n        irr: lboData.returns.irr,\n        moic: lboData.returns.moic\n      });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to save LBO model', { symbol, error: error.message });\n      throw error;\n    }\n  }\n\n  async getLBOModel(symbol) {\n    try {\n      const data = await this.storage.getItem('lboModel', symbol.toUpperCase());\n      if (data) {\n        apiLogger.log('DEBUG', 'LBO model retrieved', { symbol });\n      }\n      return data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve LBO model', { symbol, error: error.message });\n      return null;\n    }\n  }\n\n  async listLBOModels() {\n    return this.storage.listItems('lboModel');\n  }\n\n  async deleteLBOModel(symbol) {\n    return this.storage.removeItem('lboModel', symbol.toUpperCase());\n  }\n\n  /**\n   * Monte Carlo Results Storage\n   */\n  async saveMonteCarloResults(modelId, resultsData) {\n    try {\n      const mcData = {\n        modelType: resultsData.modelType || 'DCF',\n        iterations: resultsData.iterations || 10000,\n        results: resultsData.results || [],\n        statistics: resultsData.statistics || {},\n        metadata: {\n          createdAt: Date.now(),\n          modelId,\n          symbol: resultsData.symbol,\n          version: '1.0',\n          ...resultsData.metadata\n        }\n      };\n\n      await this.storage.setItem('monteCarloResults', modelId, mcData);\n\n      apiLogger.log('INFO', 'Monte Carlo results saved', {\n        modelId,\n        iterations: mcData.iterations,\n        mean: mcData.statistics.mean\n      });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to save Monte Carlo results', { modelId, error: error.message });\n      throw error;\n    }\n  }\n\n  async getMonteCarloResults(modelId) {\n    try {\n      const data = await this.storage.getItem('monteCarloResults', modelId);\n      if (data) {\n        apiLogger.log('DEBUG', 'Monte Carlo results retrieved', { modelId });\n      }\n      return data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve Monte Carlo results', { modelId, error: error.message });\n      return null;\n    }\n  }\n\n  async listMonteCarloResults() {\n    return this.storage.listItems('monteCarloResults');\n  }\n\n  async deleteMonteCarloResults(modelId) {\n    return this.storage.removeItem('monteCarloResults', modelId);\n  }\n\n  /**\n   * Market Data Storage with TTL\n   */\n  async saveMarketData(symbol, marketData, ttlMinutes = 15) {\n    try {\n      const data = {\n        symbol: symbol.toUpperCase(),\n        data: marketData,\n        timestamp: Date.now(),\n        source: marketData.source || 'unknown',\n        expiresAt: Date.now() + (ttlMinutes * 60 * 1000)\n      };\n\n      await this.storage.setItem('marketData', symbol.toUpperCase(), data);\n\n      apiLogger.log('DEBUG', 'Market data cached', {\n        symbol,\n        source: data.source,\n        ttlMinutes\n      });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to cache market data', { symbol, error: error.message });\n      throw error;\n    }\n  }\n\n  async getMarketData(symbol) {\n    try {\n      const data = await this.storage.getItem('marketData', symbol.toUpperCase());\n\n      if (data && data.expiresAt > Date.now()) {\n        apiLogger.log('DEBUG', 'Market data cache hit', { symbol });\n        return data.data;\n      } else if (data) {\n        // Data expired, remove it\n        await this.deleteMarketData(symbol);\n        apiLogger.log('DEBUG', 'Market data cache expired', { symbol });\n      }\n\n      return null;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve market data', { symbol, error: error.message });\n      return null;\n    }\n  }\n\n  async deleteMarketData(symbol) {\n    return this.storage.removeItem('marketData', symbol.toUpperCase());\n  }\n\n  /**\n   * User Preferences Storage\n   */\n  async saveUserPreferences(preferences) {\n    try {\n      const prefData = {\n        theme: preferences.theme || 'light',\n        layout: preferences.layout || {},\n        notifications: preferences.notifications || {},\n        privacy: preferences.privacy || {},\n        metadata: {\n          lastUpdated: Date.now(),\n          version: '1.0'\n        }\n      };\n\n      await this.storage.setItem('userPreferences', 'default', prefData);\n\n      apiLogger.log('INFO', 'User preferences saved', { theme: prefData.theme });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to save user preferences', { error: error.message });\n      throw error;\n    }\n  }\n\n  async getUserPreferences() {\n    try {\n      const data = await this.storage.getItem('userPreferences', 'default');\n      if (data) {\n        apiLogger.log('DEBUG', 'User preferences retrieved');\n      }\n      return data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve user preferences', { error: error.message });\n      return null;\n    }\n  }\n\n  /**\n   * Watchlist Storage\n   */\n  async saveWatchlist(name, symbols) {\n    try {\n      const watchlistData = {\n        name,\n        symbols: symbols.map(s => s.toUpperCase()),\n        metadata: {\n          createdAt: Date.now(),\n          lastModified: Date.now(),\n          symbolCount: symbols.length\n        }\n      };\n\n      await this.storage.setItem('watchlist', name, watchlistData);\n\n      apiLogger.log('INFO', 'Watchlist saved', { name, symbolCount: symbols.length });\n      return true;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to save watchlist', { name, error: error.message });\n      throw error;\n    }\n  }\n\n  async getWatchlist(name) {\n    try {\n      const data = await this.storage.getItem('watchlist', name);\n      if (data) {\n        apiLogger.log('DEBUG', 'Watchlist retrieved', { name });\n      }\n      return data;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to retrieve watchlist', { name, error: error.message });\n      return null;\n    }\n  }\n\n  async listWatchlists() {\n    return this.storage.listItems('watchlist');\n  }\n\n  async deleteWatchlist(name) {\n    return this.storage.removeItem('watchlist', name);\n  }\n\n  /**\n   * Export all financial data\n   */\n  async exportAllData() {\n    try {\n      const exportData = {\n        timestamp: Date.now(),\n        version: '1.0',\n        data: {\n          dcfModels: {},\n          lboModels: {},\n          monteCarloResults: {},\n          watchlists: {},\n          userPreferences: null\n        }\n      };\n\n      // Export DCF models\n      const dcfModels = await this.listDCFModels();\n      for (const symbol of dcfModels) {\n        exportData.data.dcfModels[symbol] = await this.getDCFModel(symbol);\n      }\n\n      // Export LBO models\n      const lboModels = await this.listLBOModels();\n      for (const symbol of lboModels) {\n        exportData.data.lboModels[symbol] = await this.getLBOModel(symbol);\n      }\n\n      // Export Monte Carlo results\n      const mcResults = await this.listMonteCarloResults();\n      for (const modelId of mcResults) {\n        exportData.data.monteCarloResults[modelId] = await this.getMonteCarloResults(modelId);\n      }\n\n      // Export watchlists\n      const watchlists = await this.listWatchlists();\n      for (const name of watchlists) {\n        exportData.data.watchlists[name] = await this.getWatchlist(name);\n      }\n\n      // Export user preferences\n      exportData.data.userPreferences = await this.getUserPreferences();\n\n      apiLogger.log('INFO', 'Data export completed', {\n        dcfCount: dcfModels.length,\n        lboCount: lboModels.length,\n        mcCount: mcResults.length,\n        watchlistCount: watchlists.length\n      });\n\n      return exportData;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to export data', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Import financial data\n   */\n  async importData(importData) {\n    try {\n      let importCount = 0;\n\n      // Import DCF models\n      if (importData.data.dcfModels) {\n        for (const [symbol, data] of Object.entries(importData.data.dcfModels)) {\n          await this.saveDCFModel(symbol, data);\n          importCount++;\n        }\n      }\n\n      // Import LBO models\n      if (importData.data.lboModels) {\n        for (const [symbol, data] of Object.entries(importData.data.lboModels)) {\n          await this.saveLBOModel(symbol, data);\n          importCount++;\n        }\n      }\n\n      // Import Monte Carlo results\n      if (importData.data.monteCarloResults) {\n        for (const [modelId, data] of Object.entries(importData.data.monteCarloResults)) {\n          await this.saveMonteCarloResults(modelId, data);\n          importCount++;\n        }\n      }\n\n      // Import watchlists\n      if (importData.data.watchlists) {\n        for (const [name, data] of Object.entries(importData.data.watchlists)) {\n          await this.saveWatchlist(name, data.symbols);\n          importCount++;\n        }\n      }\n\n      // Import user preferences\n      if (importData.data.userPreferences) {\n        await this.saveUserPreferences(importData.data.userPreferences);\n        importCount++;\n      }\n\n      apiLogger.log('INFO', 'Data import completed', { importCount });\n      return importCount;\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to import data', { error: error.message });\n      throw error;\n    }\n  }\n\n  /**\n   * Get storage statistics for financial data\n   */\n  async getFinancialDataStats() {\n    const stats = await this.storage.getStorageStats();\n\n    return {\n      ...stats,\n      financialData: {\n        dcfModels: (await this.listDCFModels()).length,\n        lboModels: (await this.listLBOModels()).length,\n        monteCarloResults: (await this.listMonteCarloResults()).length,\n        watchlists: (await this.listWatchlists()).length\n      }\n    };\n  }\n\n  /**\n   * Clean up expired market data\n   */\n  async cleanupExpiredMarketData() {\n    const marketDataKeys = this.storage.listItems('marketData');\n    let cleanedCount = 0;\n\n    for (const symbol of marketDataKeys) {\n      const data = await this.storage.getItem('marketData', symbol);\n      if (data && data.expiresAt <= Date.now()) {\n        await this.deleteMarketData(symbol);\n        cleanedCount++;\n      }\n    }\n\n    apiLogger.log('INFO', 'Expired market data cleaned', { cleanedCount });\n    return cleanedCount;\n  }\n}\n\n// Create and export singleton instance\nexport const financialDataStorage = new FinancialDataStorage();\nexport default financialDataStorage;\n","/**\n * Data Export/Import Component\n * Provides UI for exporting and importing financial data\n */\n\nimport {\n  Download,\n  Upload,\n  FileText,\n  Database,\n  AlertCircle,\n  CheckCircle,\n  Loader2,\n  Info,\n  FileSpreadsheet,\n  Bookmark,\n  Users,\n  Clock,\n  Eye,\n  Edit3,\n  Share,\n  Save\n} from 'lucide-react';\nimport React, { useState, useCallback } from 'react';\n\nimport { financialDataStorage } from '../services/financialDataStorage.js';\nimport { apiLogger } from '../utils/apiLogger.js';\n\nconst DataExportImport = ({ data, onDataChange, savedAnalyses, onAnalysesChange }) => {\n  const [activeTab, setActiveTab] = useState('excel');\n  const [isExporting, setIsExporting] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  const [exportStatus, setExportStatus] = useState(null);\n  const [importStatus, setImportStatus] = useState(null);\n  const [stats, setStats] = useState(null);\n  const [templates, setTemplates] = useState([\n    { id: 1, name: 'Standard 3-Statement Model', category: 'General', lastUsed: '2024-01-15', uses: 42 },\n    { id: 2, name: 'SaaS DCF Template', category: 'Technology', lastUsed: '2024-01-10', uses: 28 },\n    { id: 3, name: 'LBO Analysis Template', category: 'Private Equity', lastUsed: '2024-01-05', uses: 35 }\n  ]);\n  const [collaborators, setCollaborators] = useState([\n    { id: 1, name: 'John Smith', email: 'john@company.com', role: 'Analyst', lastActive: '2 min ago', avatar: 'JS' },\n    { id: 2, name: 'Sarah Johnson', email: 'sarah@company.com', role: 'VP', lastActive: '1 hour ago', avatar: 'SJ' }\n  ]);\n\n  // Load storage statistics on component mount\n  React.useEffect(() => {\n    loadStats();\n  }, []);\n\n  const loadStats = async() => {\n    try {\n      const storageStats = await financialDataStorage.getFinancialDataStats();\n      setStats(storageStats);\n    } catch (error) {\n      apiLogger.log('ERROR', 'Failed to load storage stats', { error: error.message });\n    }\n  };\n\n  const handleExport = async() => {\n    setIsExporting(true);\n    setExportStatus(null);\n\n    try {\n      const exportData = await financialDataStorage.exportAllData();\n\n      // Create downloadable file\n      const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n        type: 'application/json'\n      });\n\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `financeanalyst_backup_${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n\n      setExportStatus({\n        type: 'success',\n        message: 'Data exported successfully',\n        details: {\n          dcfModels: Object.keys(exportData.data.dcfModels).length,\n          lboModels: Object.keys(exportData.data.lboModels).length,\n          monteCarloResults: Object.keys(exportData.data.monteCarloResults).length,\n          watchlists: Object.keys(exportData.data.watchlists).length\n        }\n      });\n\n      apiLogger.log('INFO', 'Data export completed', {\n        totalItems: Object.keys(exportData.data.dcfModels).length +\n                   Object.keys(exportData.data.lboModels).length +\n                   Object.keys(exportData.data.monteCarloResults).length +\n                   Object.keys(exportData.data.watchlists).length\n      });\n    } catch (error) {\n      setExportStatus({\n        type: 'error',\n        message: 'Export failed',\n        details: error.message\n      });\n      apiLogger.log('ERROR', 'Data export failed', { error: error.message });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  const handleImport = async(event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    setIsImporting(true);\n    setImportStatus(null);\n\n    try {\n      const text = await file.text();\n      const importData = JSON.parse(text);\n\n      // Validate import data structure\n      if (!importData.data || !importData.version) {\n        throw new Error('Invalid backup file format');\n      }\n\n      const importCount = await financialDataStorage.importData(importData);\n\n      setImportStatus({\n        type: 'success',\n        message: 'Data imported successfully',\n        details: {\n          importCount,\n          timestamp: new Date(importData.timestamp).toLocaleString()\n        }\n      });\n\n      // Refresh stats\n      await loadStats();\n\n      apiLogger.log('INFO', 'Data import completed', { importCount });\n    } catch (error) {\n      setImportStatus({\n        type: 'error',\n        message: 'Import failed',\n        details: error.message\n      });\n      apiLogger.log('ERROR', 'Data import failed', { error: error.message });\n    } finally {\n      setIsImporting(false);\n      // Clear file input\n      event.target.value = '';\n    }\n  };\n\n  const formatBytes = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Data Management</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            \n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            {[\n              { id: 'excel', label: 'Excel Integration', icon: FileSpreadsheet },\n              { id: 'templates', label: 'Templates', icon: Bookmark },\n              { id: 'collaboration', label: 'Collaboration', icon: Users },\n              { id: 'export', label: 'Export', icon: Download },\n              { id: 'import', label: 'Import', icon: Upload },\n              { id: 'stats', label: 'Statistics', icon: Database }\n            ].map((tab) => {\n              const Icon = tab.icon;\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\n                    activeTab === tab.id\n                      ? 'border-blue-500 text-blue-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  <span>{tab.label}</span>\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          \n          {activeTab === 'excel' && (\n            <div className=\"space-y-4\">\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start\">\n                  <Info className=\"w-5 h-5 text-blue-600 mt-0.5 mr-3\" />\n                  <div>\n                    <h3 className=\"font-medium text-blue-900\">Excel Integration</h3>\n                    <p className=\"text-sm text-blue-700 mt-1\">\n                      Connect your Excel spreadsheets to FinanceAnalyst for seamless data synchronization.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <button\n                onClick={handleExport}\n                disabled={isExporting}\n                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\n              >\n                {isExporting ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Exporting...\n                  </>\n                ) : (\n                  <>\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Export All Data\n                  </>\n                )}\n              </button>\n\n              {exportStatus && (\n                <div\n                  className={`border rounded-lg p-4 ${\n                    exportStatus.type === 'success'\n                      ? 'bg-green-50 border-green-200'\n                      : 'bg-red-50 border-red-200'\n                  }`}\n                >\n                  <div className=\"flex items-start\">\n                    {exportStatus.type === 'success' ? (\n                      <CheckCircle className=\"w-5 h-5 text-green-600 mt-0.5 mr-3\" />\n                    ) : (\n                      <AlertCircle className=\"w-5 h-5 text-red-600 mt-0.5 mr-3\" />\n                    )}\n                    <div>\n                      <h4\n                        className={`font-medium ${\n                          exportStatus.type === 'success' ? 'text-green-900' : 'text-red-900'\n                        }`}\n                      >\n                        {exportStatus.message}\n                      </h4>\n                      {exportStatus.type === 'success' && exportStatus.details && (\n                        <div className=\"text-sm text-green-700 mt-2\">\n                          <p>Exported items:</p>\n                          <ul className=\"list-disc list-inside ml-4\">\n                            <li>{exportStatus.details.dcfModels} DCF Models</li>\n                            <li>{exportStatus.details.lboModels} LBO Models</li>\n                            <li>{exportStatus.details.monteCarloResults} Monte Carlo Results</li>\n                            <li>{exportStatus.details.watchlists} Watchlists</li>\n                          </ul>\n                        </div>\n                      )}\n                      {exportStatus.type === 'error' && (\n                        <p className=\"text-sm text-red-700 mt-1\">{exportStatus.details}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'templates' && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Templates</h3>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {templates.map((template) => (\n                  <div key={template.id} className=\"bg-gray-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">{template.name}</h4>\n                    <p className=\"text-sm text-gray-600\">{template.category}</p>\n                    <p className=\"text-sm text-gray-600\">Last used: {template.lastUsed}</p>\n                    <p className=\"text-sm text-gray-600\">Uses: {template.uses}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'collaboration' && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Collaboration</h3>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {collaborators.map((collaborator) => (\n                  <div key={collaborator.id} className=\"bg-gray-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">{collaborator.name}</h4>\n                    <p className=\"text-sm text-gray-600\">{collaborator.email}</p>\n                    <p className=\"text-sm text-gray-600\">Role: {collaborator.role}</p>\n                    <p className=\"text-sm text-gray-600\">Last active: {collaborator.lastActive}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'export' && (\n            <div className=\"space-y-4\">\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <div className=\"flex items-start\">\n                  <Info className=\"w-5 h-5 text-blue-600 mt-0.5 mr-3\" />\n                  <div>\n                    <h3 className=\"font-medium text-blue-900\">Export Your Data</h3>\n                    <p className=\"text-sm text-blue-700 mt-1\">\n                      Download all your financial models, analysis results, and preferences as a backup file.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <button\n                onClick={handleExport}\n                disabled={isExporting}\n                className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center\"\n              >\n                {isExporting ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Exporting...\n                  </>\n                ) : (\n                  <>\n                    <Download className=\"w-4 h-4 mr-2\" />\n                    Export All Data\n                  </>\n                )}\n              </button>\n\n              {exportStatus && (\n                <div\n                  className={`border rounded-lg p-4 ${\n                    exportStatus.type === 'success'\n                      ? 'bg-green-50 border-green-200'\n                      : 'bg-red-50 border-red-200'\n                  }`}\n                >\n                  <div className=\"flex items-start\">\n                    {exportStatus.type === 'success' ? (\n                      <CheckCircle className=\"w-5 h-5 text-green-600 mt-0.5 mr-3\" />\n                    ) : (\n                      <AlertCircle className=\"w-5 h-5 text-red-600 mt-0.5 mr-3\" />\n                    )}\n                    <div>\n                      <h4\n                        className={`font-medium ${\n                          exportStatus.type === 'success' ? 'text-green-900' : 'text-red-900'\n                        }`}\n                      >\n                        {exportStatus.message}\n                      </h4>\n                      {exportStatus.type === 'success' && exportStatus.details && (\n                        <div className=\"text-sm text-green-700 mt-2\">\n                          <p>Exported items:</p>\n                          <ul className=\"list-disc list-inside ml-4\">\n                            <li>{exportStatus.details.dcfModels} DCF Models</li>\n                            <li>{exportStatus.details.lboModels} LBO Models</li>\n                            <li>{exportStatus.details.monteCarloResults} Monte Carlo Results</li>\n                            <li>{exportStatus.details.watchlists} Watchlists</li>\n                          </ul>\n                        </div>\n                      )}\n                      {exportStatus.type === 'error' && (\n                        <p className=\"text-sm text-red-700 mt-1\">{exportStatus.details}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          \n          {activeTab === 'import' && (\n            <div className=\"space-y-4\">\n              <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n                <div className=\"flex items-start\">\n                  <AlertCircle className=\"w-5 h-5 text-amber-600 mt-0.5 mr-3\" />\n                  <div>\n                    <h3 className=\"font-medium text-amber-900\">Import Data</h3>\n                    <p className=\"text-sm text-amber-700 mt-1\">\n                      Import data from a backup file. This will add to your existing data.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\n                <FileText className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n                <label className=\"cursor-pointer\">\n                  <span className=\"text-lg font-medium text-gray-900\">\n                    Choose backup file\n                  </span>\n                  <p className=\"text-sm text-gray-500 mt-1\">\n                    Select a JSON backup file to import\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\".json\"\n                    onChange={handleImport}\n                    disabled={isImporting}\n                    className=\"hidden\"\n                  />\n                </label>\n              </div>\n\n              {isImporting && (\n                <div className=\"flex items-center justify-center py-4\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-600 mr-2\" />\n                  <span className=\"text-gray-600\">Importing data...</span>\n                </div>\n              )}\n\n              {importStatus && (\n                <div\n                  className={`border rounded-lg p-4 ${\n                    importStatus.type === 'success'\n                      ? 'bg-green-50 border-green-200'\n                      : 'bg-red-50 border-red-200'\n                  }`}\n                >\n                  <div className=\"flex items-start\">\n                    {importStatus.type === 'success' ? (\n                      <CheckCircle className=\"w-5 h-5 text-green-600 mt-0.5 mr-3\" />\n                    ) : (\n                      <AlertCircle className=\"w-5 h-5 text-red-600 mt-0.5 mr-3\" />\n                    )}\n                    <div>\n                      <h4\n                        className={`font-medium ${\n                          importStatus.type === 'success' ? 'text-green-900' : 'text-red-900'\n                        }`}\n                      >\n                        {importStatus.message}\n                      </h4>\n                      {importStatus.type === 'success' && importStatus.details && (\n                        <div className=\"text-sm text-green-700 mt-2\">\n                          <p>Imported {importStatus.details.importCount} items</p>\n                          <p>Backup created: {importStatus.details.timestamp}</p>\n                        </div>\n                      )}\n                      {importStatus.type === 'error' && (\n                        <p className=\"text-sm text-red-700 mt-1\">{importStatus.details}</p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          \n          {activeTab === 'stats' && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Storage Statistics</h3>\n\n              {stats ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Storage Usage</h4>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span>Total Size:</span>\n                        <span className=\"font-medium\">{formatBytes(stats.totalSize)}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Total Items:</span>\n                        <span className=\"font-medium\">{stats.itemCount}</span>\n                      </div>\n                      {stats.quota && (\n                        <div className=\"flex justify-between\">\n                          <span>Usage:</span>\n                          <span className=\"font-medium\">\n                            {(stats.usageRatio * 100).toFixed(1)}%\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Financial Data</h4>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span>DCF Models:</span>\n                        <span className=\"font-medium\">{stats.financialData.dcfModels}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>LBO Models:</span>\n                        <span className=\"font-medium\">{stats.financialData.lboModels}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Monte Carlo Results:</span>\n                        <span className=\"font-medium\">{stats.financialData.monteCarloResults}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Watchlists:</span>\n                        <span className=\"font-medium\">{stats.financialData.watchlists}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex items-center justify-center py-8\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-600 mr-2\" />\n                  <span className=\"text-gray-600\">Loading statistics...</span>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DataExportImport;\n","import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Calculator, \n  Save, \n  Upload, \n  Download, \n  CheckCircle,\n  Activity,\n  FileText,\n  BarChart3,\n  AlertCircle,\n  Clock,\n  Database\n} from 'lucide-react';\nimport Header from '../components/ui/Header';\nimport Button from '../components/ui/Button';\nimport FinancialSpreadsheet from '../components/PrivateAnalysis/FinancialSpreadsheet';\nimport ModelingTools from '../components/PrivateAnalysis/ModelingTools';\nimport AnalysisResults from '../components/PrivateAnalysis/AnalysisResults';\nimport WorkflowNavigation from '../components/PrivateAnalysis/WorkflowNavigation';\nimport AdvancedLBOTool from '../components/PrivateAnalysis/AdvancedLBOTool';\nimport FinancialModelWorkspace from '../components/PrivateAnalysis/FinancialModelWorkspace';\nimport EnhancedScenarioAnalysis from '../components/PrivateAnalysis/EnhancedScenarioAnalysis';\nimport EnhancedMarketDataDashboard from '../components/PrivateAnalysis/EnhancedMarketDataDashboard';\nimport MonteCarloIntegrationHub from '../components/PrivateAnalysis/MonteCarloIntegrationHub';\nimport DataExportImport from '../components/DataExportImport';\nimport defaultFinancialData from '../data/defaultFinancialData';\nimport { formatCurrency, formatPercentage } from '../utils/dataTransformation';\nimport { calculateDCF } from '../utils/dcfCalculations';\n\nconst PrivateAnalysis = () => {\n  const [activeTab, setActiveTab] = useState('data');\n  const [advancedResults, setAdvancedResults] = useState({\n    lbo: null,\n    threeStatement: null,\n    scenarios: null,\n    marketData: null,\n    monteCarlo: null\n  });\n  const [financialData, setFinancialData] = useState(defaultFinancialData);\n  const [adjustedValues, setAdjustedValues] = useState({});\n  const [modelInputs, setModelInputs] = useState({\n    dcf: {\n      discountRate: 10,\n      terminalGrowthRate: 2.5,\n      projectionYears: 5,\n      taxRate: 25\n    },\n    scenario: {\n      scenarios: []\n    }\n  });\n\n  const [savedAnalyses, setSavedAnalyses] = useState(() => {\n    const saved = localStorage.getItem('privateAnalyses');\n    return saved ? JSON.parse(saved) : [];\n  });\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [dataStatus, setDataStatus] = useState('ready'); // ready, modified, saving, error\n  const [, setLastSaved] = useState(null);\n  \n  // Progress tracking for workflow navigation\n  const [modelingProgress, setModelingProgress] = useState(0);\n  const [analysisProgress, setAnalysisProgress] = useState(0);\n  const [validationErrors, setValidationErrors] = useState({});\n\n  // Enhanced data completeness tracking\n  const getDataCompleteness = () => {\n    if (!financialData.statements) return 0;\n    \n    // Core required fields for basic analysis\n    const coreIncomeFields = ['totalRevenue', 'totalCostOfGoodsSold', 'operatingIncome', 'netIncome'];\n    const optionalBalanceFields = ['totalAssets', 'totalLiabilities', 'totalEquity'];\n    const optionalCashFlowFields = ['operatingCashFlow', 'investingCashFlow', 'financingCashFlow'];\n    \n    let completedFields = 0;\n    let totalWeightedFields = 0;\n    \n    // Check core income statement fields (weighted more heavily)\n    coreIncomeFields.forEach(field => {\n      totalWeightedFields += 3; // Weight core fields 3x\n      if (financialData.statements.incomeStatement?.[field]?.[2] !== undefined) {\n        completedFields += 3;\n      }\n    });\n    \n    // Check for any revenue line items to boost completeness\n    const revenueFields = ['energyDevices', 'injectables', 'wellness', 'weightloss', 'retailSales', 'surgery'];\n    let revenueItemsFound = 0;\n    revenueFields.forEach(field => {\n      if (financialData.statements.incomeStatement?.[field]?.[2] !== undefined) {\n        revenueItemsFound++;\n      }\n    });\n    \n    // Add bonus for detailed revenue breakdown\n    if (revenueItemsFound >= 3) {\n      completedFields += 2;\n      totalWeightedFields += 2;\n    }\n    \n    // Check optional balance sheet fields (lower weight)\n    optionalBalanceFields.forEach(field => {\n      totalWeightedFields += 1;\n      if (financialData.statements.balanceSheet?.[field]?.[2] !== undefined) {\n        completedFields += 1;\n      }\n    });\n    \n    // Check optional cash flow statement fields (lower weight)\n    optionalCashFlowFields.forEach(field => {\n      totalWeightedFields += 1;\n      if (financialData.statements.cashFlowStatement?.[field]?.[2] !== undefined) {\n        completedFields += 1;\n      }\n    });\n    \n    // Calculate completion percentage with minimum threshold for income statement\n    const completionPercentage = Math.round((completedFields / totalWeightedFields) * 100);\n    \n    // If we have core income statement data, ensure minimum 80% completion\n    const hasBasicIncomeData = financialData.statements.incomeStatement?.totalRevenue?.[2] !== undefined &&\n                              financialData.statements.incomeStatement?.operatingIncome?.[2] !== undefined;\n    \n    return hasBasicIncomeData ? Math.max(completionPercentage, 80) : completionPercentage;\n  };\n\n  // Calculate modeling progress based on configured models and assumptions\n  const calculateModelingProgress = () => {\n    let progress = 0;\n    \n    // DCF Model completion - give credit for having basic parameters\n    if (modelInputs.dcf.discountRate && modelInputs.dcf.terminalGrowthRate) {\n      progress += 40;\n    }\n    \n    // Additional credit for comprehensive financial data enabling modeling\n    const dataCompleteness = getDataCompleteness();\n    if (dataCompleteness >= 80) {\n      progress += 20; // Comprehensive data enables modeling\n    }\n    \n    // Scenario analysis completion\n    if (modelInputs.scenario.scenarios && modelInputs.scenario.scenarios.length > 0) {\n      progress += 20;\n    }\n    \n    // Adjusted values completion\n    if (adjustedValues && Object.keys(adjustedValues).length > 0) {\n      progress += 20;\n    }\n    \n    return Math.min(progress, 100);\n  };\n\n  // Calculate analysis progress based on generated results\n  const calculateAnalysisProgress = () => {\n    let progress = 0;\n    \n    // Basic progress based on data and modeling completion\n    const dataComplete = getDataCompleteness();\n    const modelingComplete = calculateModelingProgress();\n    \n    if (dataComplete > 50 && modelingComplete > 30) {\n      progress = 60; // Base analysis available\n    }\n    \n    if (dataComplete > 80 && modelingComplete > 60) {\n      progress = 100; // Complete analysis available\n    }\n    \n    return progress;\n  };\n\n  const saveAnalysis = async (name) => {\n    if (!name) return;\n    \n    setIsLoading(true);\n    setDataStatus('saving');\n    \n    try {\n      const analysis = {\n        id: Date.now(),\n        name,\n        data: financialData,\n        adjustedValues,\n        modelInputs,\n        completeness: getDataCompleteness(),\n        createdAt: new Date().toISOString(),\n        lastModified: new Date().toISOString()\n      };\n      \n      const updated = [...savedAnalyses, analysis];\n      setSavedAnalyses(updated);\n      localStorage.setItem('privateAnalyses', JSON.stringify(updated));\n      \n      setDataStatus('ready');\n      setLastSaved(new Date());\n    } catch (error) {\n      setDataStatus('error');\n      console.error('Save failed:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const loadAnalysis = (analysisId) => {\n    const analysis = savedAnalyses.find(a => a.id === analysisId);\n    if (analysis) {\n      setFinancialData(analysis.data);\n      setAdjustedValues(analysis.adjustedValues || {});\n      setModelInputs(analysis.modelInputs || modelInputs);\n      setDataStatus('ready');\n    }\n  };\n\n  const deleteAnalysis = (analysisId) => {\n    const updated = savedAnalyses.filter(a => a.id !== analysisId);\n    setSavedAnalyses(updated);\n    localStorage.setItem('privateAnalyses', JSON.stringify(updated));\n  };\n\n  // Map activeTab values to new workflow step IDs\n  const mapTabToStep = (tab) => {\n    switch (tab) {\n      case 'spreadsheet':\n        return 'data';\n      case 'modeling':\n        return 'modeling';\n      case 'analysis':\n        return 'analysis';\n      case 'lbo':\n        return 'lbo';\n      case 'threestatement':\n        return 'threestatement';\n      case 'scenarios':\n        return 'scenarios';\n      case 'marketdata':\n        return 'marketdata';\n      case 'montecarlo':\n        return 'montecarlo';\n      default:\n        return 'data';\n    }\n  };\n\n  const handleStepChange = (stepId) => {\n    // Map new step IDs back to tab values for compatibility\n    switch (stepId) {\n      case 'data':\n        setActiveTab('spreadsheet');\n        break;\n      case 'modeling':\n        setActiveTab('modeling');\n        break;\n      case 'analysis':\n        setActiveTab('analysis');\n        break;\n      default:\n        setActiveTab('spreadsheet');\n    }\n  };\n\n  const handleSave = () => {\n    const name = prompt('Enter analysis name:');\n    if (name) saveAnalysis(name);\n  };\n\n  const handleImport = () => {\n    // Import data logic - placeholder\n    console.log('Import functionality to be implemented');\n  };\n\n  const handleExport = () => {\n    // Export analysis logic - placeholder\n    console.log('Export functionality to be implemented');\n  };\n\n  // Validate data and track errors for workflow navigation\n  const validateWorkflowData = () => {\n    const errors = {};\n    \n    // Data validation\n    const dataErrors = [];\n    if (!financialData.statements) {\n      dataErrors.push('No financial statements found');\n    } else {\n      if (!financialData.statements.incomeStatement?.totalRevenue) {\n        dataErrors.push('Missing revenue data');\n      }\n      if (!financialData.statements.balanceSheet?.totalAssets) {\n        dataErrors.push('Missing balance sheet data');\n      }\n      if (!financialData.statements.cashFlowStatement?.operatingCashFlow) {\n        dataErrors.push('Missing cash flow data');\n      }\n    }\n    if (dataErrors.length > 0) errors.data = dataErrors;\n    \n    // Modeling validation\n    const modelingErrors = [];\n    if (!modelInputs.dcf.discountRate || modelInputs.dcf.discountRate <= 0) {\n      modelingErrors.push('Invalid discount rate');\n    }\n    if (!modelInputs.dcf.terminalGrowthRate || modelInputs.dcf.terminalGrowthRate < 0) {\n      modelingErrors.push('Invalid terminal growth rate');\n    }\n    if (modelingErrors.length > 0) errors.modeling = modelingErrors;\n    \n    // Analysis validation\n    const analysisErrors = [];\n    const dataComplete = getDataCompleteness();\n    const modelingComplete = calculateModelingProgress();\n    if (dataComplete < 50) {\n      analysisErrors.push('Insufficient data for analysis');\n    }\n    if (modelingComplete < 30) {\n      analysisErrors.push('Models not configured');\n    }\n    if (analysisErrors.length > 0) errors.analysis = analysisErrors;\n    \n    return errors;\n  };\n\n  // Track data modifications and update progress\n  useEffect(() => {\n    setDataStatus('modified');\n    setModelingProgress(calculateModelingProgress());\n    setAnalysisProgress(calculateAnalysisProgress());\n    setValidationErrors(validateWorkflowData());\n  }, [financialData, adjustedValues, modelInputs]);\n\n  // Status indicators\n  const StatusIndicator = ({ status, label }) => {\n    const statusConfig = {\n      ready: { color: 'text-green-400', bg: 'bg-green-400/10', icon: CheckCircle },\n      modified: { color: 'text-yellow-400', bg: 'bg-yellow-400/10', icon: Clock },\n      saving: { color: 'text-blue-400', bg: 'bg-blue-400/10', icon: Activity },\n      error: { color: 'text-red-400', bg: 'bg-red-400/10', icon: AlertCircle }\n    };\n    \n    const config = statusConfig[status] || statusConfig.ready;\n    const Icon = config.icon;\n    \n    return (\n      <div className={`flex items-center gap-2 px-3 py-1.5 rounded-full ${config.bg}`}>\n        <Icon size={14} className={config.color} />\n        <span className={`text-sm ${config.color}`}>{label}</span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-slate-900 text-white\">\n      <Header />\n      \n      {/* Main Workspace Container */}\n      <div className=\"flex flex-col min-h-screen pt-16\">\n        \n        {/* Enhanced Header Section */}\n        <div className=\"bg-slate-800/80 backdrop-blur-sm border-b border-slate-700/50\">\n          <div className=\"px-8 py-6\">\n            {/* Title Row */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-2 bg-blue-500/10 rounded-lg\">\n                  <FileText size={24} className=\"text-blue-400\" />\n                </div>\n                <div>\n                  <h1 className=\"text-2xl font-semibold text-white\">Private Analysis</h1>\n                  <p className=\"text-sm text-slate-400 mt-1\">Professional financial modeling and valuation</p>\n                </div>\n              </div>\n              \n              {/* Status and Actions */}\n              <div className=\"flex items-center gap-4\">\n                <StatusIndicator \n                  status={dataStatus} \n                  label={\n                    dataStatus === 'ready' ? 'Data Ready' :\n                    dataStatus === 'modified' ? 'Unsaved Changes' :\n                    dataStatus === 'saving' ? 'Saving...' :\n                    'Error'\n                  } \n                />\n                \n                <div className=\"flex items-center gap-3\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={handleSave}\n                    disabled={isLoading}\n                    className=\"text-slate-300 hover:text-white border border-slate-600 hover:border-slate-500\"\n                  >\n                    <Save size={16} />\n                    Save\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={handleImport}\n                    className=\"text-slate-300 hover:text-white border border-slate-600 hover:border-slate-500\"\n                  >\n                    <Upload size={16} />\n                    Import\n                  </Button>\n                  <Button\n                    variant=\"ghost\" \n                    size=\"sm\"\n                    onClick={handleExport}\n                    className=\"text-slate-300 hover:text-white border border-slate-600 hover:border-slate-500\"\n                  >\n                    <Download size={16} />\n                    Export\n                  </Button>\n                </div>\n              </div>\n            </div>\n\n            {/* Enhanced Workflow Navigation */}\n            <WorkflowNavigation\n              activeStep={mapTabToStep(activeTab)}\n              onStepChange={handleStepChange}\n              dataCompleteness={getDataCompleteness()}\n              modelingProgress={modelingProgress}\n              analysisProgress={analysisProgress}\n              validationErrors={validationErrors}\n            />\n          </div>\n        </div>\n\n        {/* Saved Analyses Panel */}\n        <AnimatePresence>\n          {savedAnalyses.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"bg-slate-800/50 border-b border-slate-700/50 px-8 py-4\"\n            >\n              <div className=\"flex items-center gap-4 mb-3\">\n                <Database size={16} className=\"text-slate-400\" />\n                <h3 className=\"text-sm font-medium text-slate-300\">Recent Analyses</h3>\n              </div>\n              <div className=\"flex gap-3 flex-wrap\">\n                {savedAnalyses.slice(-5).map((analysis) => (\n                  <div key={analysis.id} className=\"flex items-center gap-2 px-3 py-2 bg-slate-700/50 rounded-lg border border-slate-600/50\">\n                    <button\n                      onClick={() => loadAnalysis(analysis.id)}\n                      className=\"text-slate-200 hover:text-white font-medium text-sm\"\n                    >\n                      {analysis.name}\n                    </button>\n                    <div className=\"w-px h-4 bg-slate-600\" />\n                    <button\n                      onClick={() => deleteAnalysis(analysis.id)}\n                      className=\"text-slate-400 hover:text-red-400 transition-colors\"\n                    >\n                      \n                    </button>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        {/* Main Content Area */}\n        <div className=\"flex-1 bg-slate-900 overflow-auto\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.2, ease: 'easeOut' }}\n            className=\"min-h-full\"\n          >\n            {activeTab === 'spreadsheet' && (\n              <FinancialSpreadsheet\n                data={financialData}\n                onDataChange={setFinancialData}\n                onAdjustedValuesChange={setAdjustedValues}\n              />\n            )}\n            \n            {activeTab === 'modeling' && (\n              <ModelingTools\n                data={financialData}\n                adjustedValues={adjustedValues}\n                onDataChange={setFinancialData}\n              />\n            )}\n            \n            {activeTab === 'analysis' && (\n              <AnalysisResults\n                data={financialData}\n                adjustedValues={adjustedValues}\n                modelInputs={modelInputs}\n                calculateDCF={(data) => calculateDCF(data, modelInputs)}\n                formatCurrency={formatCurrency}\n                formatPercentage={formatPercentage}\n              />\n            )}\n            \n            {activeTab === 'lbo' && (\n              <AdvancedLBOTool\n                data={financialData}\n                onDataChange={(results) => setAdvancedResults(prev => ({ ...prev, lbo: results }))}\n              />\n            )}\n            \n            {activeTab === 'threestatement' && (\n              <FinancialModelWorkspace\n                data={financialData}\n                onDataChange={(results) => setAdvancedResults(prev => ({ ...prev, threeStatement: results }))}\n              />\n            )}\n            \n            {activeTab === 'scenarios' && (\n              <EnhancedScenarioAnalysis\n                data={financialData}\n                onDataChange={(results) => setAdvancedResults(prev => ({ ...prev, scenarios: results }))}\n                calculateDCF={(data) => calculateDCF(data, modelInputs)}\n                lboModelingEngine={null}\n              />\n            )}\n            \n            {activeTab === 'marketdata' && (\n              <EnhancedMarketDataDashboard\n                data={financialData}\n                onDataChange={(results) => setAdvancedResults(prev => ({ ...prev, marketData: results }))}\n              />\n            )}\n            \n            {activeTab === 'montecarlo' && (\n              <MonteCarloIntegrationHub\n                data={financialData}\n                dcfResults={advancedResults.dcf}\n                lboResults={advancedResults.lbo}\n                financialModel={advancedResults.threeStatement}\n                scenarioResults={advancedResults.scenarios}\n                onDataChange={(results) => setAdvancedResults(prev => ({ ...prev, monteCarlo: results }))}\n              />\n            )}\n            \n            {activeTab === 'import-export' && (\n              <DataExportImport\n                data={financialData}\n                onDataChange={setFinancialData}\n                savedAnalyses={savedAnalyses}\n                onAnalysesChange={setSavedAnalyses}\n              />\n            )}\n          </motion.div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PrivateAnalysis;\n"],"names":["monteCarloEngine","constructor","this","workers","isRunning","currentSimulation","runDCFSimulation","baseInputs","distributions","options","iterations","confidenceLevel","correlationMatrix","randomSeed","apiLogger","log","variables","Object","keys","length","startTime","Date","now","setSeed","samples","generateCorrelatedSamples","results","progressCallback","onProgress","i","Error","scenarioInputs","createScenarioInputs","dcfResult","calculateDCFScenario","push","iteration","pricePerShare","enterpriseValue","upside","inputs","Math","floor","analysis","analyzeResults","endTime","duration","meanPrice","statistics","mean","type","timestamp","toISOString","parameters","error","message","runLBOSimulation","lboResult","calculateLBOScenario","irr","moic","totalReturn","meanIRR","numVars","independentSamples","sample","forEach","variable","dist","sampleFromDistribution","choleskyMatrix","choleskyDecomposition","correlatedSample","independentValues","map","v","correlatedValues","applyCorrelation","index","distribution","normalRandom","stdDev","normalSample","mu","sigma","exp","min","random","max","triangularRandom","mode","betaRandom","alpha","beta","exponentialRandom","lambda","weibullRandom","shape","scale","paretoRandom","studentTRandom","df","chiSquaredRandom","u","pow","normal","chiSq","sqrt","gammaRandom","undefined","spareNormal","spare","u1","u2","z0","cos","PI","z1","sin","x","d","c","matrix","n","L","Array","fill","j","sum","k","entries","applyTo","currentRevenue","revenueGrowthRate","fcfMargin","wacc","terminalGrowthRate","sharesOutstanding","currentPrice","totalPV","revenue","year","ebitda","ebitdaGrowthRate","exitMultiple","debtMultiple","holdingPeriod","debt","equity","exitProceeds","metrics","percentiles","confidenceIntervals","riskMetrics","distributionTests","correlations","metric","values","r","filter","isNaN","sort","a","b","reduce","variance","sampleStdDev","median","percentile","calculateMode","range","count","trimmedMean","calculateTrimmedMean","mad","calculateMAD","iqr","p1","p5","p10","p25","p50","p75","p90","p95","p99","lowerBound","upperBound","level","width","bootstrapCI","calculateBootstrapCI","var95","var99","cvar95","slice","cvar99","skewness","calculateSkewness","kurtosis","calculateKurtosis","excessKurtosis","expectedShortfall","maxDrawdown","calculateMaxDrawdown","sharpeRatio","calculateSharpeRatio","sortinoRatio","calculateSortinoRatio","jarqueBera","jarqueBeraTest","kolmogorovSmirnov","ksTestNormality","shapiroWilk","shapiroWilkTest","calculateCorrelationMatrix","frequency","rounded","round","maxFreq","modes","parseFloat","sortedValues","trimProportion","trimCount","trimmedValues","deviations","abs","bootstrapSamples","bootstrapMeans","peak","value","drawdown","riskFreeRate","targetReturn","excessReturns","negativeReturns","Infinity","downsideDeviation","meanExcessReturn","jb","pValue","chiSquaredCDF","statistic","isNormal","incompleteGamma","term","logGamma","coef","ser","xx","y","tmp","maxD","empirical","theoretical","normalCDF","critical","erf","sign","t","denominator","w","valuesI","valuesJ","calculateCorrelation","meanX","meanY","numerator","sumXX","sumYY","dx","dy","p","lower","upper","ceil","weight","seed","stopSimulation","isSimulationRunning","FinancialSpreadsheet","data","onDataChange","onAdjustedValuesChange","activeStatement","setActiveStatement","useState","adjustedValues","setAdjustedValues","expandedSections","setExpandedSections","costOfGoodsSold","operatingExpenses","salariesBenefits","grossProfit","operatingIncome","incomeBeforeTax","otherIncomeExpense","currentAssets","nonCurrentAssets","currentLiabilities","nonCurrentLiabilities","operatingActivities","investingActivities","financingActivities","editingCell","setEditingCell","cellValue","setCellValue","inputRef","useRef","useEffect","statements","incomeStatement","newAdjustedValues","key","incomeStatementTemplate","title","color","headerBg","textColor","items","label","bold","formula","balanceSheetTemplate","totalAssets","totalLiabilities","totalLiabilitiesEquity","cashFlowTemplate","netCashFlow","currentTemplate","getCurrentTemplate","handleCellClick","rowKey","periodIndex","isAdjusted","currentValue","toString","handleCellBlur","newValue","newData","handleKeyPress","e","preventDefault","validateNumericInput","test","formatNumber","numValue","absValue","formattedValue","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","current","focus","select","jsxs","className","children","jsx","TrendingUp","onClick","newPeriodLabel","prompt","periods","Plus","size","onChange","target","FileText","period","Calculator","sectionKey","section","React","Fragment","colSpan","prev","toggleSection","ChevronDown","ChevronRight","stopPropagation","addNewRow","item","indentClass","textWeight","rowBg","borderColor","_","Edit2","ref","onBlur","onKeyDown","placeholder","renderRow","ScenarioModeling","modelInputs","onModelInputChange","calculateDCF","formatCurrency","formatPercent","showAddForm","setShowAddForm","scenarios","scenario","scenarioResults","useMemo","baseRevenue","totalRevenue","modifiedRevenue","parseInt","growthRate","revenueGrowth","baseOperating","modifiedOperating","baseRevenueValue","scenarioRevenue","baseIncome","adjustedMargin","marginImprovement","scenarioData","weightedValue","probability","equityValue","weightedAverageValue","result","updateScenario","field","updatedScenarios","ScenarioForm","name","step","deleteScenario","Trash2","newScenario","s","BarChart3","motion","div","whileHover","TrendingDown","Minus","SensitivityAnalysis","selectedVariable","setSelectedVariable","sensitivityConfig","sensitivity","ranges","grossMargin","discountRate","variableDefinitions","unit","description","baseValue","isPercentage","dcf","taxRate","baseValuation","sensitivityResults","variableDef","stepSize","dataPoints","modifiedData","dcfInputs","originalIncome","dcfParams","projectionYears","operatingIncomeData","operatingIncomes","periodKey","presentValue","discountFactor","income","pv","lastYearIncome","terminalValue","presentTerminalValue","presentValueOperations","presentValueTerminal","tempCalculateDCF","valuation","changeFromBase","definition","tornadoData","maxImpact","positiveImpact","negativeImpact","updateSensitivityRange","updatedRanges","Activity","Settings","toFixed","style","transform","variableName","updatedVariables","removed","removeVariable","point","height","minHeight","includes","addVariable","DataVisualization","dcfData","sensitivityData","activeChart","setActiveChart","showDetails","setShowDetails","chartTypes","id","icon","category","PieChartIcon","dcfWaterfallData","years","cumulativeValue","startValue","cumulative","start","freeCashFlow","terminalStart","cashFlowTrendData","workingCapitalChange","capex","sensitivityTornadoData","maxUpside","maxDownside","downside","scenarioDistributionData","CustomTooltip","active","payload","chartType","entry","dataKey","DCFWaterfallChart","ResponsiveContainer","BarChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","YAxis","tickFormatter","Tooltip","content","Bar","CashFlowTrendChart","LineChart","Legend","Line","stroke","strokeWidth","SensitivityTornadoChart","layout","formatter","labelFormatter","ScenarioDistributionChart","PieChart","Pie","cx","cy","outerRadius","Cell","ValuationBridgeChart","bridgeData","cumulativePV","EyeOff","Eye","chart","Icon","button","whileTap","find","freeCashFlows","join","WACCCalculator","activeTab","setActiveTab","waccInputs","marketRiskPremium","smallCompanyPremium","companySpecificRisk","debtInterestRate","marketValueEquity","marketValueDebt","buildUpMethod","equityRiskPremium","sizeRiskPremium","industryRiskPremium","industryWACC","industryBeta","industryDebtEquityRatio","waccCalculation","costOfEquityCAPM","costOfEquityBuildUp","costOfDebtAfterTax","totalCapital","equityWeight","debtWeight","waccCAPM","waccBuildUp","finalWACC","debtToEquityRatio","updateWACCInput","updatedWACC","tabs","applyWACCToDCF","waccValue","Percent","DollarSign","Info","tab","BookOpen","AdvancedDCF","showAssumptions","setShowAssumptions","advancedDCFResults","workingCapitalAssumptions","workingCapital","receivablesDays","inventoryDays","payablesDays","capexAssumptions","capexAsPercentOfRevenue","depreciationRate","presentValues","workingCapitalChanges","capexAmounts","unleveredFreeCashFlow","impliedShare","yearData","nopat","depreciation","previousRevenue","currentReceivables","currentInventory","currentPayables","receivablesChange","inventoryChange","payablesChange","terminalFCF","terminalDiscountFactor","updateDCFAssumption","updatedDCF","updateBasicAssumption","charAt","toUpperCase","ComparableAnalysis","selectedMultiple","setSelectedMultiple","showAddComp","setShowAddComp","comparableCompanies","setComparableCompanies","ticker","marketCap","netIncome","employees","founded","geography","businessModel","comparableMultiples","comp","multiples","ev_revenue","ev_ebitda","pe_ratio","revenue_per_employee","market_cap_revenue","marketStats","calculateStats","m","impliedValuation","targetRevenue","targetEBITDA","targetNetIncome","multipleDefinitions","Target","Users","def","stats","multiple","Search","Filter","removeComparable","onSubmit","formData","FormData","companyData","newCompany","getFullYear","addComparableCompany","fromEntries","required","MonteCarloSimulation","simulationResults","setSimulationResults","setIsRunning","progress","setProgress","simulationSettings","setSimulationSettings","enableCorrelation","setDistributions","enabled","setCorrelationMatrix","distributionTypes","runSimulation","useCallback","async","enabledDistributions","latestIndex","currentOperatingIncome","alert","updateDistribution","updates","updateCorrelation","newMatrix","row","generateHistogramData","binWidth","histogram","bin","binIndex","bins","generateScatterData","currency","Play","initial","opacity","animate","Zap","AnimatePresence","exit","transition","checked","newType","newParameters","param","disabled","Square","every","toLocaleString","Download","AreaChart","Area","fillOpacity","ScatterChart","Scatter","AlertTriangle","interval","ModelingTools","activeModel","setActiveModel","setModelInputs","terminalValueMultiple","receivablesGrowth","inventoryGrowth","payablesGrowth","maintenanceCapex","ratios","compareToIndustry","industryAverages","operatingMargin","netMargin","currentRatio","debtToEquity","calculatedMetrics","margins","gross","operating","net","growth","isLatestPeriod","totalCOGS","totalCostOfGoodsSold","prevRevenue","prevOperating","inputData","sourceData","sharePrice","modelTypes","updateModelInput","modelType","createElement","AnalysisResults","formatPercentage","latest","previous","earliest","revenueLatest","revenuePrevious","revenueEarliest","grossProfitLatest","grossProfitPrevious","operatingIncomeLatest","operatingIncomePrevious","revenueGrowthYoY","revenueCAGR","operatingIncomeGrowth","grossMarginLatest","grossMarginPrevious","operatingMarginLatest","operatingMarginPrevious","isFinite","operatingMarginChange","dcfResults","revenueBreakdown","Number","energyDevices","injectables","wellness","weightloss","retailSales","surgery","totalEquity","totalDebt","inventory","accountsReceivable","cashAndEquivalents","returnOnAssets","returnOnEquity","quickRatio","assetTurnover","inventoryTurnover","receivablesTurnover","cashRatio","workingCapitalRatio","operatingCycle","cashConversionCycle","operatingLeverage","profitabilityTrend","financialLeverage","interestCoverage","interestExpense","debtServiceCoverage","debtService","revenuePerEmployee","employeeCount","revenuePerShare","bookValuePerShare","industryBenchmarks","benchmarkComparison","kpis","trend","benchmark","performance","Award","Shield","CreditCard","liquidityMetrics","formatted","status","efficiencyMetrics","cagr","profitability","grossMarginChange","financial","liquidity","efficiency","risk","market","benchmarks","industry","comparison","MetricCard","kpi","Timer","Gauge","percentage","CheckCircle","WorkflowNavigation","activeStep","onStepChange","dataCompleteness","modelingProgress","analysisProgress","validationErrors","showHelpFor","setShowHelpFor","getStepStatus","stepId","steps","subtitle","Database","validationFields","helpContent","getStatusColor","getStatusBg","isActive","renderStatusIcon","Clock","renderProgressRing","circumference","strokeDashoffset","viewBox","strokeLinecap","HelpTooltip","isVisible","onClose","HelpCircle","ease","isDisabled","hasErrors","layoutId","FileSpreadsheet","AdvancedLBOTool","lboResults","setLBOResults","isCalculating","setIsCalculating","lboInputs","setLBOInputs","symbol","companyName","purchasePrice","equityContribution","seniorDebtMultiple","subordinatedDebtMultiple","seniorInterestRate","subordinatedInterestRate","nwcAsPercentOfRevenue","transactionFees","managementFees","calculateLBO","assumptions","transaction","lboModelingEngine","buildLBOModel","lboModel","handleInputChange","Building2","baseCase","returnsAnalysis","transactionStructure","debtToEbitda","exitAnalysis","equityProceeds","entryMultiple","equityPercentage","FinancialModelWorkspace","modelData","setModelData","ebit","ebt","taxes","cash","totalCurrentAssets","ppe","accountsPayable","shortTermDebt","totalCurrentLiabilities","longTermDebt","shareholderEquity","operatingCashFlow","investingCashFlow","debtRepayment","financingCashFlow","endingCash","setAssumptions","cogsPercentOfRevenue","opexGrowthRate","capexPercentOfRevenue","debtPaydown","setValidationErrors","recalculateModel","wcChange","errors","handleAssumptionChange","Building","RefreshCw","AlertCircle","idx","statement","periodIdx","isPercent","assumption","EnhancedScenarioAnalysis","activeView","setActiveView","setScenarios","marginExpansion","capexIntensity","isBase","analysisSettings","setAnalysisSettings","outputMetric","includeCorrelations","numSimulations","setResults","runScenarioAnalysis","rev","valueRange","standardDeviation","deviation","summary","coefficientOfVariation","probabilityOfPositiveReturn","currentMarketCap","chartData","addScenario","totalProbability","EnhancedMarketDataDashboard","watchlist","setWatchlist","price","change","changePercent","marketData","setMarketData","indices","NASDAQ","DOW","sectors","economicIndicators","Unemployment","alerts","setAlerts","condition","newSymbol","setNewSymbol","isLoading","setIsLoading","getChangeColor","getChangeIcon","setInterval","clearInterval","addToWatchlist","trim","Promise","resolve","setTimeout","newItem","removeFromWatchlist","from","time","getTime","toLocaleDateString","SPY","QQQ","VIX","pair","correlation","strength","Globe","Bell","ChangeIcon","sector","onKeyPress","RechartsLineChart","corr","MonteCarloIntegrationHub","financialModel","activeAnalysis","setActiveAnalysis","correlationsEnabled","crossModelAnalysis","integratedResults","setIntegratedResults","runIntegratedSimulation","lbo","portfolio","dcfDistributions","lboDistributions","leverageRatio","calculateCrossModelCorrelations","calculateIntegratedRiskMetrics","generatePortfolioAnalysis","monteCarloIntegrated","settings","dcfValues","simulations","lboValues","pearsonCorrelation","dcfLboCorrelation","interpretation","riskImplication","sumX","sumY","sumXY","xi","yi","expectedValue","volatility","acc","dcfWeighted","lboWeighted","analysisOptions","option","STORAGE_CONFIG","threshold","maxSize","cleanupThreshold","DATA_SCHEMAS","dcfModel","version","structure","projections","metadata","financing","returns","monteCarloResults","userPreferences","theme","notifications","privacy","source","storageService","isAvailable","checkStorageAvailability","compressionWorker","initializeCompression","setupQuotaMonitoring","localStorage","setItem","removeItem","window","compressionAvailable","navigator","storage","monitorQuota","estimate","usageRatio","usage","quota","ratio","performCleanup","generateKey","identifier","validateData","schemaType","schema","expectedType","actualType","isArray","compressData","jsonString","JSON","stringify","compressed","simpleCompress","btoa","encodeURIComponent","decompressData","compressedData","isCompressed","decodeURIComponent","atob","storageObject","schemaVersion","processedData","finalObject","getItem","stored","parsedStored","parse","decompressedData","age","listItems","prefix","startsWith","replace","cutoffTime","cleanedCount","getStorageStats","totalSize","itemCount","typeStats","split","getQuotaInfo","clearAll","clearedCount","financialDataStorage","saveDCFModel","createdAt","lastModified","intrinsicValue","getDCFModel","listDCFModels","deleteDCFModel","saveLBOModel","lboData","getLBOModel","listLBOModels","deleteLBOModel","saveMonteCarloResults","modelId","resultsData","mcData","getMonteCarloResults","listMonteCarloResults","deleteMonteCarloResults","saveMarketData","ttlMinutes","expiresAt","getMarketData","deleteMarketData","saveUserPreferences","preferences","prefData","lastUpdated","getUserPreferences","saveWatchlist","symbols","watchlistData","symbolCount","getWatchlist","listWatchlists","deleteWatchlist","exportAllData","exportData","dcfModels","lboModels","watchlists","mcResults","dcfCount","lboCount","mcCount","watchlistCount","importData","importCount","getFinancialDataStats","financialData","cleanupExpiredMarketData","marketDataKeys","DataExportImport","savedAnalyses","onAnalysesChange","isExporting","setIsExporting","isImporting","setIsImporting","exportStatus","setExportStatus","importStatus","setImportStatus","setStats","templates","setTemplates","lastUsed","uses","collaborators","setCollaborators","email","role","lastActive","avatar","loadStats","storageStats","handleExport","blob","Blob","url","URL","createObjectURL","link","document","href","download","body","appendChild","click","removeChild","revokeObjectURL","details","totalItems","Bookmark","Upload","Loader2","template","collaborator","accept","event","file","files","text","bytes","formatBytes","PrivateAnalysis","advancedResults","setAdvancedResults","threeStatement","monteCarlo","setFinancialData","defaultFinancialData","setSavedAnalyses","saved","dataStatus","setDataStatus","setLastSaved","setModelingProgress","setAnalysisProgress","getDataCompleteness","completedFields","totalWeightedFields","revenueItemsFound","balanceSheet","cashFlowStatement","completionPercentage","calculateModelingProgress","dataComplete","modelingComplete","calculateAnalysisProgress","dataErrors","modelingErrors","modeling","analysisErrors","validateWorkflowData","StatusIndicator","statusConfig","ready","bg","modified","saving","config","Header","Button","variant","completeness","updated","Save","mapTabToStep","analysisId","loadAnalysis","deleteAnalysis"],"mappings":"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"}