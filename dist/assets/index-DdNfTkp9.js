const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monitoring-C8Ng3aqr.js","assets/react-core-CeHLCIBw.js","assets/vendor-D2fsnhsW.js","assets/ai-vendor-CuiosWbE.js","assets/ui-vendor-B5RWaOCb.js","assets/advanced-analytics-y00dU25g.js","assets/utils-vendor-DUg4_aAP.js","assets/recharts-vendor-DQPXk1vH.js","assets/d3-vendor-DOBQrAlH.js","assets/react-dom-B6lyId6m.js","assets/ai-vendor-DgNaS5_R.css","assets/data-vendor-vzM7rUwp.js","assets/react-router-D-l5j9EF.js","assets/state-vendor-ClT9_nJX.js","assets/index-mLiVJNvj.js","assets/SEOHead-B2_EtFOU.js","assets/Header-BJUfWj4Q.js","assets/businessIntelligenceService-sNUkhNJh.js","assets/SecondaryNav-8trPr0SB.js","assets/portfolioCommands-BjByvaOL.js","assets/apiLogger-D987Un6Q.js","assets/lboModelingEngine-BU3g5hW3.js","assets/defaultFinancialData-CL3DkgK1.js","assets/index--Z4I5kSb.js","assets/realTimeDataService-mr2qAx0k.js","assets/Progress-CxBKD08g.js","assets/index-wLxS2JA9.js","assets/ValuationTool-DIdm8hW2.js","assets/dcfCalculations-gqpk9y-a.js","assets/index-DIi-LZuZ.js","assets/ValuationToolDocs-DA48heL1.js","assets/valuation-tool-demo-CdglShIm.js","assets/PrivateAnalysis-Dzr015NY.js","assets/ValuationWorkbench-DK1Rcqaj.js","assets/ModelLab-BlvBPQvZ.js","assets/PortfolioManagement-CqDGd4pX.js","assets/ThesisCanvas-DuhoNejA.js","assets/AdvancedCharting-CWPcWeqp.js","assets/MarketAnalysis-BRwWkWW1.js","assets/Reports-DrNFnC8O.js","assets/Settings-g4PB94sL.js","assets/security-vendor-B2A_OUQk.js","assets/AIInsights-Ctd-e3EW.js","assets/Analytics-CdBlttA3.js","assets/FinancialInputsDemo-BTFX2xOf.js","assets/Models-9rY0qUac.js","assets/App-DS03USTR.js","assets/Data-D5wxtb1Q.js","assets/Integrations-Qlhn93PB.js","assets/NotFound-DFHQe6Vb.js","assets/MonitoringDebugPanel-C6kaBCj4.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,B as a,g as s,h as n,X as r,U as i,i as o,k as l,l as c,T as d,m as u,n as m,o as p,p as h,q as g,D as y,b as x,s as f,Z as b,R as v,t as w,C as j,u as C,E as N,v as k,w as S,x as E,c as A,F as _,y as D,z as I,G as L,I as R,J as T,K as P,N as M,O,P as V}from"./react-core-CeHLCIBw.js";import{r as F,c as $}from"./react-dom-B6lyId6m.js";import{a as z}from"./data-vendor-vzM7rUwp.js";import{b as U,A as q}from"./ui-vendor-B5RWaOCb.js";import{I as B,c as W,P as K}from"./advanced-analytics-y00dU25g.js";import{W as H}from"./vendor-D2fsnhsW.js";import{u as G,a as Q,B as J,R as Y,b as Z}from"./react-router-D-l5j9EF.js";import{c as X,a as ee}from"./state-vendor-ClT9_nJX.js";import"./ai-vendor-CuiosWbE.js";import"./utils-vendor-DUg4_aAP.js";import"./recharts-vendor-DQPXk1vH.js";import"./d3-vendor-DOBQrAlH.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const te={},ae=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),n=a?.nonce||a?.getAttribute("nonce");s=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in te)return;te[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,n&&s.setAttribute("nonce",n),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},se=new class{constructor(){this.baseURL="https://financeanalyst-pro-backend.onrender.com/api",this.client=z.create({baseURL:this.baseURL,timeout:15e3,headers:{"Content-Type":"application/json"}}),this.client.interceptors.response.use(e=>e,e=>Promise.reject(e))}get(e,t={}){return this.client.get(e,t)}post(e,t={},a={}){return this.client.post(e,t,a)}put(e,t={},a={}){return this.client.put(e,t,a)}delete(e,t={}){return this.client.delete(e,t)}async getQuote(e){return(await this.client.get(`/market-data/quote/${e.toUpperCase()}`)).data}async getHistoricalData(e,t="1mo",a="1d"){return(await this.client.get(`/market-data/historical/${e.toUpperCase()}`,{params:{range:t,interval:a}})).data}async getIntradayData(e,t="5min"){return(await this.client.get(`/market-data/intraday/${e.toUpperCase()}`,{params:{interval:t}})).data}async getBatchQuotes(e){return(await this.client.post("/market-data/batch",{symbols:e.map(e=>e.toUpperCase())})).data}async getIncomeStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/income/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getBalanceSheet(e,t="annual",a=5){return(await this.client.get(`/financial-statements/balance/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCashFlowStatement(e,t="annual",a=5){return(await this.client.get(`/financial-statements/cash-flow/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getFinancialRatios(e,t="annual",a=5){return(await this.client.get(`/financial-statements/ratios/${e.toUpperCase()}`,{params:{period:t,limit:a}})).data}async getCompanyProfile(e){return(await this.client.get(`/company-data/profile/${e.toUpperCase()}`)).data}async getPeerCompanies(e,t=10){return(await this.client.get(`/company-data/peers/${e.toUpperCase()}`,{params:{limit:t}})).data}async getDCFValuation(e){return(await this.client.get(`/company-data/dcf/${e.toUpperCase()}`)).data}async getEarnings(e,t=8){return(await this.client.get(`/company-data/earnings/${e.toUpperCase()}`,{params:{limit:t}})).data}async getFREDData(e,t=100,a=null,s=null){const n={limit:t};return a&&(n.start_date=a),s&&(n.end_date=s),(await this.client.get(`/economic-data/fred/${e.toUpperCase()}`,{params:n})).data}async getEconomicIndicators(){return(await this.client.get("/economic-data/indicators")).data}async getTreasuryRates(){return(await this.client.get("/economic-data/treasury-rates")).data}async getHealthStatus(){return(await this.client.get("/health")).data}async getServiceHealth(){return(await this.client.get("/health/services")).data}async getCacheStats(){return(await this.client.get("/health/cache")).data}async fetchMarketData(e,t="1y"){try{const a=await this.getHistoricalData(e,t);return{symbol:a.symbol,range:a.range,data:a.data,meta:a.meta,timestamps:a.data.map(e=>e.timestamp),prices:{close:a.data.map(e=>e.close),high:a.data.map(e=>e.high),low:a.data.map(e=>e.low),open:a.data.map(e=>e.open)},volume:a.data.map(e=>e.volume),source:a.source}}catch(a){throw a}}async fetchFinancialStatements(e,t="income-statement",a="annual",s=5){try{let n;switch(t){case"income-statement":n=await this.getIncomeStatement(e,a,s);break;case"balance-sheet-statement":n=await this.getBalanceSheet(e,a,s);break;case"cash-flow-statement":n=await this.getCashFlowStatement(e,a,s);break;default:throw new Error(`Unsupported statement type: ${t}`)}return n.data}catch(n){throw n}}async fetchPeerComparables(e){try{return(await this.getPeerCompanies(e)).peers}catch(t){throw t}}},ne=({isOpen:g=!1,onToggle:y,currentContext:x={},portfolioData:f=null,marketData:b=null})=>{const[v,w]=e.useState([{id:"1",type:"assistant",content:"Hi! I'm your AI Financial Assistant. I can help you with portfolio analysis, market insights, risk assessment, and financial planning. What would you like to explore today?",timestamp:new Date,suggestions:["Analyze my portfolio performance","What are the current market trends?","Calculate portfolio risk metrics","Suggest portfolio rebalancing"]}]),[j,C]=e.useState(""),[N,k]=e.useState(!1),[S,E]=e.useState(!1),A=e.useRef(null),_=e.useRef(null);e.useEffect(()=>{A.current?.scrollIntoView({behavior:"smooth"})},[v]);const D=async(e=j)=>{if(!e.trim())return;const t={id:Date.now().toString(),type:"user",content:e,timestamp:new Date};w(e=>[...e,t]),C(""),k(!0);try{const t=await se.post("/ai-assistant/chat",{message:e,context:{...x,portfolioData:f,marketData:b,previousMessages:v.slice(-5)}}),a={id:(Date.now()+1).toString(),type:"assistant",content:t.data.response,timestamp:new Date,suggestions:t.data.suggestions||[],charts:t.data.charts||[],actions:t.data.actions||[]};w(e=>[...e,a])}catch(a){const e={id:(Date.now()+1).toString(),type:"assistant",content:"I'm having trouble processing your request right now. This could be due to high demand or a temporary service issue. Please try again in a moment, or let me help you with basic portfolio analysis using the available data.",timestamp:new Date,suggestions:["Show portfolio overview","Calculate basic metrics","View market data","Help with analysis"]};w(t=>[...t,e])}finally{k(!1)}},I=[{icon:l,label:"Portfolio Analysis",action:"Analyze my current portfolio allocation and performance"},{icon:c,label:"Market Insights",action:"What are the current market trends and opportunities?"},{icon:d,label:"Risk Assessment",action:"Assess the risk profile of my portfolio"},{icon:u,label:"Financial Planning",action:"Help me with financial planning and projections"},{icon:m,label:"Goal Planning",action:"Help me set and track financial goals"},{icon:p,label:"Performance Review",action:"Review my portfolio performance over time"}];return g?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs(U.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0,height:S?"auto":"80vh"},exit:{opacity:0,scale:.9,y:20},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl flex flex-col",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-2xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:t.jsx(a,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold",children:"AI Financial Assistant"}),t.jsx("p",{className:"text-blue-100 text-sm",children:"Powered by advanced financial AI"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>E(!S),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:S?t.jsx(s,{className:"w-5 h-5"}):t.jsx(n,{className:"w-5 h-5"})}),t.jsx("button",{onClick:y,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:t.jsx(r,{className:"w-5 h-5"})})]})]}),!S&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[t.jsx(q,{children:v.map(e=>t.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex "+("user"===e.type?"justify-end":"justify-start"),children:t.jsxs("div",{className:`max-w-3xl flex ${"user"===e.type?"flex-row-reverse":"flex-row"} items-start space-x-3`,children:[t.jsx("div",{className:"p-2 rounded-lg "+("user"===e.type?"bg-blue-100 text-blue-600":"bg-purple-100 text-purple-600"),children:"user"===e.type?t.jsx(i,{className:"w-5 h-5"}):t.jsx(o,{className:"w-5 h-5"})}),t.jsxs("div",{className:"px-4 py-3 rounded-2xl "+("user"===e.type?"bg-blue-600 text-white ml-3":"bg-gray-100 text-gray-800 mr-3"),children:[t.jsx("p",{className:"whitespace-pre-wrap",children:e.content}),e.suggestions&&e.suggestions.length>0&&t.jsxs("div",{className:"mt-3 space-y-2",children:[t.jsx("p",{className:"text-sm font-medium opacity-75",children:"Suggestions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:e.suggestions.map((e,a)=>t.jsx("button",{onClick:()=>(e=>{D(e)})(e),className:"text-xs px-3 py-1 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all",children:e},a))})]}),e.charts&&e.charts.length>0&&t.jsxs("div",{className:"mt-3 p-3 bg-white bg-opacity-10 rounded-lg",children:[t.jsx("p",{className:"text-sm font-medium mb-2",children:"📊 Charts & Analysis"}),t.jsx("div",{className:"text-sm opacity-75",children:"Interactive charts would be rendered here based on the analysis"})]}),t.jsx("div",{className:"text-xs opacity-50 mt-2",children:e.timestamp.toLocaleTimeString()})]})]})},e.id))}),N&&t.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:t.jsx(o,{className:"w-5 h-5"})}),t.jsx("div",{className:"px-4 py-3 rounded-2xl bg-gray-100",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),t.jsx("div",{ref:A})]}),1===v.length&&t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Actions:"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:I.map((e,a)=>t.jsxs("button",{onClick:()=>D(e.action),className:"p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors flex items-center space-x-2 text-left",children:[t.jsx(e.icon,{className:"w-5 h-5 text-gray-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:e.label})]},a))})]}),t.jsx("div",{className:"p-6 border-t border-gray-200",children:t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("div",{className:"flex-1 relative",children:t.jsx("textarea",{ref:_,value:j,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D())},placeholder:"Ask me anything about your portfolio, market analysis, or financial planning...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1,style:{minHeight:"48px",maxHeight:"120px"}})}),t.jsxs("button",{onClick:()=>D(),disabled:!j.trim()||N,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[t.jsx(h,{className:"w-5 h-5"}),t.jsx("span",{children:"Send"})]})]})})]}),S&&t.jsx("div",{className:"p-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"AI Assistant is minimized"}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-gray-500",children:"Online"})]})]})})]})}):null};class re{constructor(){this.context={},this.commandHistory=[],this.aliases={p:"portfolio",md:"market-data",calc:"calculate",nav:"navigate",help:"help",clear:"clear",ls:"list",ll:"list --detailed",cd:"navigate"},this.commands=this.initializeCommands()}updateContext(e){this.context={...this.context,...e}}initializeCommands(){return{help:{description:"Show available commands and usage",usage:"help [command]",category:"system",handler:this.handleHelp.bind(this)},portfolio:{description:"Portfolio management operations",usage:"portfolio [show|analyze|rebalance|risk|holdings]",category:"portfolio",handler:this.handlePortfolio.bind(this)},"market-data":{description:"Fetch market data and quotes",usage:"market-data [symbol] [--type=quote|chart|news]",category:"market",handler:this.handleMarketData.bind(this)},quote:{description:"Get stock quote",usage:"quote <symbol>",category:"market",handler:this.handleQuote.bind(this)},calculate:{description:"Financial calculations",usage:"calculate [dcf|wacc|beta|sharpe] [parameters]",category:"calculations",handler:this.handleCalculate.bind(this)},dcf:{description:"DCF valuation calculation",usage:"dcf <symbol> [--growth=5] [--discount=10] [--terminal=2]",category:"calculations",handler:this.handleDcf.bind(this)},navigate:{description:"Navigate to different pages/sections",usage:"navigate <page> [workspace|market-data|portfolio|analysis|private-analysis]",category:"navigation",handler:this.handleNavigate.bind(this)},list:{description:"List portfolio holdings, watchlist, or other data",usage:"list [holdings|watchlist|portfolios] [--detailed]",category:"data",handler:this.handleList.bind(this)},search:{description:"Search stocks, funds, or financial instruments",usage:"search <query> [--type=stocks|etf|mutual-funds]",category:"data",handler:this.handleSearch.bind(this)},analyze:{description:"Perform financial analysis",usage:"analyze <symbol|portfolio> [--type=fundamental|technical|risk]",category:"analysis",handler:this.handleAnalyze.bind(this)},risk:{description:"Risk analysis and metrics",usage:"risk [portfolio|symbol] [--metric=var|sharpe|beta|correlation]",category:"analysis",handler:this.handleRisk.bind(this)},export:{description:"Export data to various formats",usage:"export <data-type> [--format=csv|json|xlsx] [--output=filename]",category:"utility",handler:this.handleExport.bind(this)},import:{description:"Import portfolio or transaction data",usage:"import <file-path> [--type=portfolio|transactions]",category:"utility",handler:this.handleImport.bind(this)},status:{description:"Show system and data connection status",usage:"status [--detailed]",category:"system",handler:this.handleStatus.bind(this)},clear:{description:"Clear the terminal output",usage:"clear",category:"system",handler:this.handleClear.bind(this)},version:{description:"Show application version and build info",usage:"version",category:"system",handler:this.handleVersion.bind(this)}}}async processCommand(e){const t=this.parseCommand(e),a=this.resolveAlias(t.command),s=this.commands[a];if(!s)return{success:!1,error:`Command '${a}' not found. Type 'help' for available commands.`};try{const a=await s.handler(t.args,t.flags);return this.commandHistory.push({command:e,timestamp:new Date,result:a}),a}catch(n){return{success:!1,error:`Error executing '${a}': ${n.message}`}}}parseCommand(e){const t=e.trim().split(/\s+/),a=t[0],s=t.slice(1),n=[],r={};for(let i=0;i<s.length;i++){const e=s[i];if(e.startsWith("--")){const[t,a]=e.substring(2).split("=");r[t]=a||!0}else e.startsWith("-")?r[e.substring(1)]=!0:n.push(e)}return{command:a,args:n,flags:r}}resolveAlias(e){return this.aliases[e]||e}getSuggestions(e){const t=e.trim().split(/\s+/),a=t[0].toLowerCase();if(1===t.length)return Object.keys(this.commands).filter(e=>e.startsWith(a)).concat(Object.keys(this.aliases).filter(e=>e.startsWith(a))).sort();const s=this.resolveAlias(t[0]);return this.getCommandArgumentSuggestions(s,t.slice(1))}getCommandArgumentSuggestions(e,t){const a=[];switch(e){case"navigate":a.push("workspace","market-data","portfolio","analysis","private-analysis","valuation-workbench","model-lab");break;case"portfolio":a.push("show","analyze","rebalance","risk","holdings","performance");break;case"calculate":a.push("dcf","wacc","beta","sharpe","sortino","var");break;case"list":a.push("holdings","watchlist","portfolios","transactions");break;case"analyze":a.push("--type=fundamental","--type=technical","--type=risk");break;case"export":a.push("--format=csv","--format=json","--format=xlsx")}return a}async handleHelp(e,t){if(e.length>0){const t=this.resolveAlias(e[0]),a=this.commands[t];return a?{success:!0,output:`${t}: ${a.description}\nUsage: ${a.usage}\nCategory: ${a.category}`,type:"info"}:{success:!1,output:`Command '${t}' not found.`,type:"error"}}let a="🔧 AVAILABLE COMMANDS\n";a+="═══════════════════════════════════════\n\n";const s={};return Object.entries(this.commands).forEach(([e,t])=>{s[t.category]||(s[t.category]=[]),s[t.category].push({name:e,...t})}),Object.entries(s).forEach(([e,t])=>{a+=`${e.toUpperCase()}\n`,t.forEach(e=>{a+=`  ${e.name.padEnd(15)} ${e.description}\n`}),a+="\n"}),{success:!0,output:a,type:"info"}}async handlePortfolio(e,t){return{success:!0,output:`Portfolio ${e[0]||"show"} command is not implemented yet.`,type:"info"}}async handleMarketData(e,t){return{success:!0,output:`Market data for ${e[0]||"SPY"} command is not implemented yet.`,type:"info"}}async handleQuote(e,t){const a=e[0];return a?{success:!0,output:`Quote for ${a} command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: quote <symbol>",type:"error"}}async handleCalculate(e,t){return{success:!0,output:`Calculate ${e[0]||"dcf"} command is not implemented yet.`,type:"info"}}async handleDcf(e,t){return{success:!0,output:"DCF calculation command is not implemented yet.",type:"info"}}async handleNavigate(e,t){const a=e[0];return a?{success:!0,output:`Navigate to ${a} command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: navigate <page>",type:"error"}}async handleList(e,t){return{success:!0,output:`List ${e[0]||"holdings"} command is not implemented yet.`,type:"info"}}async handleSearch(e,t){const a=e.join(" ");return a?{success:!0,output:`Search for "${a}" command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: search <query>",type:"error"}}async handleAnalyze(e,t){const a=e[0];return a?{success:!0,output:`Analyze ${a} command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: analyze <symbol|portfolio>",type:"error"}}async handleRisk(e,t){return{success:!0,output:`Risk analysis for ${e[0]||"portfolio"} command is not implemented yet.`,type:"info"}}async handleExport(e,t){const a=e[0];return a?{success:!0,output:`Export ${a} command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: export <data-type>",type:"error"}}async handleImport(e,t){const a=e[0];return a?{success:!0,output:`Import from ${a} command is not implemented yet.`,type:"info"}:{success:!1,output:"Usage: import <file-path>",type:"error"}}async handleStatus(e,t){const a=t?.detailed||t?.d;let s="🟢 SYSTEM STATUS\n";return s+="═══════════════════════════════════════\n",s+="Backend API:       🟡 Unknown\n",s+="Cache:             🟡 Unknown\n",s+="Watchlists:        "+(this.context.watchlists?"🟢 Available":"🟡 Not available")+"\n",s+="Portfolio Data:    "+(this.context.portfolioData?"🟢 Loaded":"🟡 Not loaded")+"\n",s+="AI Assistant:      🟢 Online\n",a&&(s+="\nDETAILED STATUS:\n",s+=`Commands in history: ${this.commandHistory.length}\n`,s+=`Current page: ${this.context.currentContext?.path||"Unknown"}\n`,s+=`Session start: ${(new Date).toLocaleString()}\n`),{success:!0,output:s,type:"info"}}async handleLbo(e,t){return{success:!0,output:"LBO analysis command is not implemented yet.",type:"info"}}async handleWatch(e,t){const a=t?.detailed||t?.d;let s="🟢 SYSTEM STATUS\n";return s+="═══════════════════════════════════════\n",s+="Backend API:       🟡 Unknown\n",s+="Cache:             🟡 Unknown\n",s+="Watchlists:        "+(this.context.watchlists?"🟢 Available":"🟡 Not available")+"\n",s+="Portfolio Data:    "+(this.context.portfolioData?"🟢 Loaded":"🟡 Not loaded")+"\n",s+="AI Assistant:      🟢 Online\n",a&&(s+="\nDETAILED STATUS:\n",s+=`Commands in history: ${this.commandHistory.length}\n`,s+=`Current page: ${this.context.currentContext?.path||"Unknown"}\n`,s+=`Session start: ${(new Date).toLocaleString()}\n`),{success:!0,output:s,type:"info"}}async handleClear(e,t){return{success:!0,output:"",type:"clear"}}async handleVersion(e,t){return{success:!0,output:"FinanceAnalyst Pro v1.0.0\nBuild: 2025.08.18\nNode.js CLI Interface\nSecure Backend API Integration",type:"info"}}}const ie=(e,t="USD",a=!1)=>null==e||isNaN(e)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:t,notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),oe=(e,t=1)=>null==e||isNaN(e)?"N/A":`${(100*e).toFixed(t)}%`,le=(e,t=2,a=!1)=>null==e||isNaN(e)?"N/A":new Intl.NumberFormat("en-US",{notation:a?"compact":"standard",minimumFractionDigits:0,maximumFractionDigits:t}).format(e),ce=e=>{const{currentRevenue:t,revenueGrowthRate:a,fcfMargin:s,wacc:n,terminalGrowthRate:r,sharesOutstanding:i,totalDebt:o,cash:l,projectionYears:c=5}=e,d=((e,t,a=5)=>{const s=[];let n=e;for(let r=0;r<a;r++)n*=1+(Array.isArray(t)?t[r]||t[t.length-1]:t),s.push(n);return s})(t,a,c),u=d.map(e=>e*s),m=((e,t,a)=>e*(1+t)/(a-t))(u[u.length-1],r,n),p=(h=n,u.reduce((e,t,a)=>e+t/Math.pow(1+h,a+1),0));var h;const g=m/Math.pow(1+n,c),y=p+g,x=y-o+l;return{enterpriseValue:y,equityValue:x,pricePerShare:x/i,pvOfCashFlows:p,pvOfTerminalValue:g,terminalValue:m,projectedRevenues:d,projectedFCFs:u,wacc:n,terminalGrowthRate:r}},de=e=>{const{purchasePrice:t,ebitda:a,debtMultiple:s=5,exitMultiple:n,exitYear:r=5,managementFeeRate:i=.02,carriedInterestRate:o=.2}=e,l=a*s,c=t-l,d=a*Math.pow(1.05,r),u=d*n,m=u-.5*l,p=m/c,h=Math.pow(p,1/r)-1,g=p,y=c*i*r,x=Math.max(0,(m-c)*o);return{equityInvestment:c,totalDebt:l,exitEquityValue:m,totalReturn:p,irr:h,moic:g,exitEbitda:d,exitEnterpriseValue:u,managementFees:y,carriedInterest:x,netReturn:m-y-x}},ue=(e,t)=>{const a={};return["marketCap","peRatio","evToEbitda","priceToBook","debtToEquity"].forEach(e=>{const s=t.map(t=>t[e]);a[e]=(e=>{const t=e.filter(e=>null!=e&&!isNaN(e));return 0===t.length?{median:null,mean:null,min:null,max:null}:(t.sort((e,t)=>e-t),{median:t.length%2==0?(t[t.length/2-1]+t[t.length/2])/2:t[Math.floor(t.length/2)],mean:t.reduce((e,t)=>e+t,0)/t.length,min:Math.min(...t),max:Math.max(...t),count:t.length})})(s)}),{company:e,peerStatistics:a,relativeValuation:{marketCapPercentile:me(e.marketCap,t.map(e=>e.marketCap)),peRatioRelative:e.peRatio/a.peRatio.median,evEbitdaRelative:e.evToEbitda/a.evToEbitda.median,priceToBookRelative:e.priceToBook/a.priceToBook.median}}},me=(e,t)=>{const a=t.filter(e=>null!=e&&!isNaN(e));return 0===a.length||null==e||isNaN(e)?null:(a.sort((e,t)=>e-t),a.filter(t=>t<e).length/a.length)},pe=({currentContext:a={},portfolioData:i=null,marketData:o=null,onNavigate:l})=>{const[c,d]=e.useState(!1),[u,m]=e.useState(!1),[p,h]=e.useState(""),[v,w]=e.useState([{id:1,type:"system",content:'FinanceAnalyst Pro Terminal v1.0.0 - Type "help" for available commands',timestamp:new Date},{id:2,type:"info",content:"Connected to secure backend API • Market data live • Ready for commands",timestamp:new Date}]),[j,C]=e.useState([]),[N,k]=e.useState(-1),[S,E]=e.useState([]),[A,_]=e.useState(!1),[D,I]=e.useState(!1),L=e.useRef(null),R=e.useRef(null),T=e.useRef(new re);e.useEffect(()=>{R.current&&(R.current.scrollTop=R.current.scrollHeight)},[v]),e.useEffect(()=>{c&&!u&&L.current&&L.current.focus()},[c,u]),e.useEffect(()=>{T.current.updateContext({currentContext:a,portfolioData:i,marketData:o,onNavigate:l})},[a,i,o,l]);const P=e.useCallback((e,t="output")=>{const a={id:Date.now(),type:t,content:e,timestamp:new Date};w(e=>[...e,a])},[]),M=e=>{if(!Array.isArray(e)||0===e.length)return"No data";const t=Object.keys(e[0]),a=t.map(t=>Math.max(t.length,...e.map(e=>String(e[t]||"").length)));return[t.map((e,t)=>e.padEnd(a[t])).join(" | "),a.map(e=>"-".repeat(e)).join("-|-"),...e.map(e=>t.map((t,s)=>String(e[t]||"").padEnd(a[s])).join(" | "))].join("\n")},O=e=>{if(!e)return"No portfolio data available";let t="📊 PORTFOLIO OVERVIEW\n";return t+="═══════════════════════════════════════\n",t+=`Total Value: ${ie(e.totalValue||0)}\n`,t+=`Total Return: ${oe(e.totalReturn||0)}\n`,t+=`Holdings: ${e.holdings?.length||0}\n\n`,e.holdings&&e.holdings.length>0&&(t+="HOLDINGS:\n",e.holdings.forEach(e=>{t+=`${e.symbol.padEnd(6)} ${ie(e.value||0).padStart(12)} ${oe(e.weight||0).padStart(8)}\n`})),t},V=e=>{if(!e)return"No market data available";let t="📈 MARKET DATA\n";return t+="═══════════════════════════════════════\n",Object.entries(e).forEach(([e,a])=>{t+=`${e.toUpperCase().padEnd(15)} ${String(a).padStart(12)}\n`}),t},F=e=>{switch(e){case"command":return"text-blue-400";case"error":return"text-red-400";case"success":return"text-green-400";case"warning":return"text-yellow-400";case"info":return"text-cyan-400";case"system":return"text-gray-400";case"formatted":return"text-purple-400";default:return"text-gray-300"}};return t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-30",children:[t.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 px-4 py-2 flex items-center justify-between cursor-pointer select-none",onClick:()=>d(!c),role:"button",tabIndex:0,"aria-label":(c?"Collapse":"Expand")+" terminal",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d(!c))},children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(g,{className:"w-5 h-5 text-green-400"}),t.jsx("span",{className:"text-sm font-mono text-gray-300",children:"FinanceAnalyst Pro Terminal"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[!u&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),w([])},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Clear output",children:t.jsx(r,{className:"w-4 h-4"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),(()=>{const e=v.map(e=>`[${e.timestamp.toLocaleTimeString()}] ${e.content}`).join("\n"),t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`financeanalyst-cli-${(new Date).toISOString().split("T")[0]}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)})()},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:"Export output",children:t.jsx(y,{className:"w-4 h-4"})})]}),t.jsx("button",{onClick:e=>{e.stopPropagation(),m(!u)},className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",children:u?t.jsx(s,{className:"w-4 h-4"}):t.jsx(n,{className:"w-4 h-4"})}),t.jsx("button",{className:"p-1 hover:bg-gray-800 rounded text-gray-400 hover:text-gray-300",title:c?"Collapse":"Expand",children:c?t.jsx(x,{className:"w-4 h-4"}):t.jsx(f,{className:"w-4 h-4"})})]})]}),t.jsx(q,{children:c&&!u&&t.jsx(U.div,{initial:{height:0,opacity:0},animate:{height:400,opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"bg-gray-900 border-t border-gray-700 overflow-hidden",children:t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{ref:R,className:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1",style:{maxHeight:"320px"},children:[v.map(e=>t.jsx("div",{className:`${F(e.type)} whitespace-pre-wrap`,children:"formatted"===e.type?t.jsx("div",{className:"bg-gray-800 p-3 rounded border border-gray-700 overflow-x-auto",children:t.jsx("pre",{className:"text-xs text-gray-300",children:e.content})}):e.content},e.id)),D&&t.jsxs("div",{className:"text-yellow-400 flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin w-3 h-3 border border-yellow-400 border-t-transparent rounded-full"}),t.jsx("span",{children:"Processing..."})]})]}),A&&S.length>0&&t.jsxs("div",{className:"border-t border-gray-700 bg-gray-800 p-2",children:[t.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Suggestions (Tab to complete):"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:S.slice(0,6).map((e,a)=>t.jsx("button",{onClick:()=>{h(e),_(!1),L.current?.focus()},className:"px-2 py-1 bg-gray-700 text-gray-300 rounded text-xs hover:bg-gray-600 transition-colors",children:e},a))})]}),t.jsxs("div",{className:"border-t border-gray-700 p-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-green-400 font-mono",children:"$"}),t.jsx("input",{ref:L,type:"text",value:p,onChange:e=>{const t=e.target.value;if(h(t),t.trim()){const e=T.current.getSuggestions(t);E(e),_(e.length>0)}else _(!1)},onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),(async e=>{if(e.trim()){C(t=>[...t,e]),k(-1),P(`$ ${e}`,"command"),I(!0);try{const t=await T.current.processCommand(e);t.success?(t.output&&P(t.output,t.type||"output"),t.data&&t.format&&P(((e,t)=>{switch(t){case"table":return M(e);case"json":return JSON.stringify(e,null,2);case"portfolio":return O(e);case"market":return V(e);default:return e}})(t.data,t.format),"formatted"),t.navigation&&l?.(t.navigation)):P(t.error||"Command failed","error")}catch(t){P(`Error: ${t.message}`,"error")}finally{I(!1)}}})(p),h(""),_(!1);else if("ArrowUp"===e.key){if(e.preventDefault(),N<j.length-1){const e=N+1;k(e),h(j[j.length-1-e])}}else if("ArrowDown"===e.key)if(e.preventDefault(),N>0){const e=N-1;k(e),h(j[j.length-1-e])}else 0===N&&(k(-1),h(""));else"Tab"===e.key?(e.preventDefault(),S.length>0&&(h(S[0]),_(!1))):"Escape"===e.key&&_(!1)},placeholder:"Enter financial command... (type 'help' for commands)",className:"flex-1 bg-transparent text-gray-300 font-mono outline-none placeholder-gray-500",disabled:D}),D&&t.jsx("div",{className:"text-yellow-400",children:t.jsx(b,{className:"w-4 h-4 animate-pulse"})})]}),t.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex items-center justify-between",children:[t.jsx("span",{children:'Use ↑↓ for history • Tab for autocomplete • Type "help" for commands'}),t.jsxs("span",{children:[j.length," commands in history"]})]})]})]})})})]})};class he extends v.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){e.__ErrorBoundary=!0,window.__COMPONENT_ERROR__?.(e,t);try{!0===navigator.webdriver||new URLSearchParams(window.location.search).has("lhci")||new URLSearchParams(window.location.search).has("ci")||new URLSearchParams(window.location.search).has("audit")||ae(()=>import("./monitoring-C8Ng3aqr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(a=>{a?.default?.trackError&&a.default.trackError(e,"react_error",{componentStack:t?.componentStack})}).catch(()=>{})}catch(a){}}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:t.jsxs("div",{className:"text-center p-8 max-w-md",children:[t.jsx("div",{className:"flex justify-center items-center mb-2",children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42px",height:"42px",viewBox:"0 0 32 33",fill:"none",children:[t.jsx("path",{d:"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z",stroke:"#343330",strokeWidth:"2",strokeMiterlimit:"10"}),t.jsx("path",{d:"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z",fill:"#343330"}),t.jsx("path",{d:"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z",fill:"#343330"}),t.jsx("path",{d:"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5",stroke:"#343330",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),t.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[t.jsx("h1",{className:"text-2xl font-medium text-neutral-800",children:"Something went wrong"}),t.jsx("p",{className:"text-neutral-600 text-base w w-8/12 mx-auto",children:"We encountered an unexpected error while processing your request."})]}),t.jsx("div",{className:"flex justify-center items-center mt-6",children:t.jsxs("button",{onClick:()=>{window.location.href="/"},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm",children:[t.jsx(B,{name:"ArrowLeft",size:18,color:"#fff"}),"Back"]})})]})}):this.props.children}}const ge=new class{constructor(e={}){this.options={rules:{"color-contrast":{enabled:!0},"keyboard-navigation":{enabled:!0},"focus-management":{enabled:!0},"aria-labels":{enabled:!0},"heading-order":{enabled:!0},"landmark-one-main":{enabled:!0},"skip-link":{enabled:!0},"nested-interactive":{enabled:!1},...e.rules},tags:["wcag2a","wcag2aa","wcag21aa","best-practice"],runOnly:e.runOnly||null,reporter:e.reporter||"v2",...e},this.violations=[],this.lastTestResults=null}async runTests(e=document,t={}){const a={...this.options,...t};try{const t=await H.run(e,a);return this.lastTestResults=t,this.violations=t.violations,this.logResults(t),this.storeResults(t),t}catch(s){throw s}}async testFinancialComponent(e,t="generic"){const a=document.querySelector(e);if(!a)throw new Error(`Element not found: ${e}`);const s={spreadsheet:{rules:{"table-header":{enabled:!0},"th-has-data-cells":{enabled:!0},"table-duplicate-name":{enabled:!0},"scope-attr-valid":{enabled:!0}},tags:["wcag2aa","section508"]},chart:{rules:{"image-alt":{enabled:!0},"svg-img-alt":{enabled:!0},"aria-hidden-focus":{enabled:!0}},tags:["wcag2aa"]},calculator:{rules:{label:{enabled:!0},"form-field-multiple-labels":{enabled:!0},"duplicate-id":{enabled:!0}},tags:["wcag2aa","section508"]},modal:{rules:{"focus-trap":{enabled:!0},"aria-dialog-name":{enabled:!0},"keyboard-navigation":{enabled:!0}},tags:["wcag2aa","best-practice"]}}[t]||{};return await this.runTests(a,s)}async testKeyboardNavigation(){const e=this.getFocusableElements(),t=[];let a=-1;e.forEach((e,s)=>{const n=e.tabIndex||0;n>0&&n<=a&&t.push({element:e.tagName,id:e.id,tabIndex:n,position:s,issue:"Tab order not sequential"}),a=n});const s=[];return e.forEach(e=>{const t=window.getComputedStyle(e,":focus"),a="none"!==t.outline&&"0px"!==t.outline,n="none"!==t.boxShadow,r="transparent"!==t.backgroundColor;a||n||r||s.push({element:e.tagName,id:e.id,className:e.className,issue:"No visible focus indicator"})}),{focusableElementsCount:e.length,tabOrderIssues:t,focusVisibilityIssues:s,passed:0===t.length&&0===s.length}}async testColorContrast(){const e=document.querySelectorAll("p, span, div, td, th, label, button, a, h1, h2, h3, h4, h5, h6"),t=[];return e.forEach(e=>{const a=window.getComputedStyle(e),s=a.color,n=a.backgroundColor;if("transparent"===n||"rgba(0, 0, 0, 0)"===n)return;const r=this.calculateContrastRatio(s,n),i=parseInt(a.fontSize),o=a.fontWeight,l=i>=18||i>=14&&("bold"===o||o>=700)?3:4.5;r<l&&t.push({element:e.tagName,id:e.id,className:e.className,textColor:s,backgroundColor:n,contrast:r.toFixed(2),required:l,fontSize:i,fontWeight:o,text:e.textContent?.substring(0,50)+"..."})}),{totalElements:e.length,contrastIssues:t,passed:0===t.length}}async testFormAccessibility(){const e=document.querySelectorAll("form"),t=[];return e.forEach((e,a)=>{e.querySelectorAll("input, select, textarea").forEach(e=>{const s=[];this.hasAssociatedLabel(e)||s.push("Missing label"),e.required&&!this.hasRequiredIndication(e)&&s.push("Required field not clearly indicated"),"true"!==e.getAttribute("aria-invalid")||this.hasErrorMessage(e)||s.push("Error state without error message"),this.isFinancialInput(e)&&!e.autocomplete&&s.push("Financial input missing autocomplete attribute"),s.length>0&&t.push({formIndex:a,inputType:e.type,inputId:e.id,inputName:e.name,issues:s})})}),{totalForms:e.length,formIssues:t,passed:0===t.length}}generateReport(){if(!this.lastTestResults)throw new Error("No test results available. Run tests first.");const{violations:e,passes:t,incomplete:a,inapplicable:s}=this.lastTestResults;return{summary:{timestamp:(new Date).toISOString(),totalChecks:e.length+t.length+a.length+s.length,violations:e.length,passes:t.length,incomplete:a.length,inapplicable:s.length,score:this.calculateAccessibilityScore()},violations:e.map(e=>({id:e.id,impact:e.impact,description:e.description,help:e.help,helpUrl:e.helpUrl,nodes:e.nodes.length,tags:e.tags})),recommendations:this.generateRecommendations(e),financialSpecific:this.getFinancialAccessibilityInsights()}}calculateAccessibilityScore(){if(!this.lastTestResults)return 0;const{violations:e,passes:t}=this.lastTestResults,a=e.length+t.length;if(0===a)return 100;const s={critical:4,serious:3,moderate:2,minor:1},n=e.reduce((e,t)=>e+(s[t.impact]||1),0),r=4*a;return Math.max(0,100-n/r*100)}generateRecommendations(e){const t=[];return e.forEach(e=>{switch(e.id){case"color-contrast":t.push({category:"Visual Design",priority:"High",issue:"Insufficient color contrast",solution:"Ensure text colors meet WCAG AA standards (4.5:1 for normal text, 3:1 for large text)",financialContext:"Critical for reading financial data and avoiding misinterpretation of numbers"});break;case"keyboard-navigation":t.push({category:"Keyboard Access",priority:"High",issue:"Keyboard navigation issues",solution:"Ensure all interactive elements are keyboard accessible with visible focus indicators",financialContext:"Essential for users who rely on keyboard navigation to access financial tools"});break;case"label":t.push({category:"Form Controls",priority:"High",issue:"Missing form labels",solution:"Add proper labels to all form controls, especially financial input fields",financialContext:"Critical for screen readers to understand financial input requirements"});break;case"aria-hidden-focus":t.push({category:"ARIA Usage",priority:"Medium",issue:"Focusable elements hidden from screen readers",solution:"Review aria-hidden usage on interactive elements",financialContext:"May hide important financial controls from assistive technology users"})}}),t}getFinancialAccessibilityInsights(){const e=[];return document.querySelectorAll("table").length>0&&e.push({component:"Data Tables",recommendation:"Ensure financial data tables have proper headers and scope attributes for screen reader navigation"}),document.querySelectorAll("[data-chart], .recharts-wrapper, canvas").length>0&&e.push({component:"Charts and Graphs",recommendation:"Provide alternative text descriptions and data tables for financial charts"}),document.querySelectorAll("[data-calculator], .calculator").length>0&&e.push({component:"Financial Calculators",recommendation:"Ensure calculator inputs have clear labels and results are announced to screen readers"}),e}getFocusableElements(){return Array.from(document.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",")))}hasAssociatedLabel(e){const t=e.id,a=e.getAttribute("aria-label"),s=e.getAttribute("aria-labelledby");return!(!a&&!s)||(!(!t||!document.querySelector(`label[for="${t}"]`))||!!e.closest("label"))}hasRequiredIndication(e){const t=e.getAttribute("aria-required"),a=e.hasAttribute("required"),s=this.hasRequiredTextIndicator(e);return"true"===t||a||s}hasRequiredTextIndicator(e){const t=this.getAssociatedLabel(e);if(!t)return!1;const a=t.textContent||"";return a.includes("*")||a.toLowerCase().includes("required")}hasErrorMessage(e){const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);return e&&e.textContent}return!1}isFinancialInput(e){return["number","email","tel"].includes(e.type)||["amount","price","rate","percent","currency","value"].some(t=>e.name?.toLowerCase().includes(t))}getAssociatedLabel(e){const t=e.id;if(t){const e=document.querySelector(`label[for="${t}"]`);if(e)return e}return e.closest("label")}calculateContrastRatio(e,t){const a=this.parseColor(e),s=this.parseColor(t),n=this.getLuminance(a),r=this.getLuminance(s);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}parseColor(e){const t=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return t?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:[0,0,0]}getLuminance([e,t,a]){const[s,n,r]=[e,t,a].map(e=>(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4));return.2126*s+.7152*n+.0722*r}logResults(e){e.violations.length>0&&e.violations.forEach(e=>{})}reportViolations(e){e.forEach(e=>{e.nodes.forEach(e=>{})})}storeResults(e){try{const t={timestamp:Date.now(),url:window.location.href,violations:e.violations.length,passes:e.passes.length,score:this.calculateAccessibilityScore()},a=JSON.parse(localStorage.getItem("accessibility-reports")||"[]");a.push(t),a.length>10&&a.splice(0,a.length-10),localStorage.setItem("accessibility-reports",JSON.stringify(a))}catch(t){}}};function ye(t){const a=function(t={}){"undefined"!=typeof window&&(!0===window.navigator?.webdriver||window.location?.search?.includes("lhci")||window.location?.search?.includes("ci")||window.location?.search?.includes("audit"));const{enabled:a=!1,autoTest:s=!1,testInterval:n=null,componentType:r="generic",onViolations:i=null,onSuccess:o=null}=t,[l,c]=e.useState(null),[d,u]=e.useState(!1),[m,p]=e.useState([]),[h,g]=e.useState(null),[y,x]=e.useState(null),f=e.useRef(null),b=e.useRef(null),v=e.useCallback(async(e=null,t={})=>{if(!a)return null;const s=e||f.current||document;u(!0);try{const e=await ge.runTests(s,t);return c(e),p(e.violations||[]),g(ge.calculateAccessibilityScore()),x(Date.now()),ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(t=>{t?.reportPerformanceMetric&&t.reportPerformanceMetric("accessibility_test",{violations:e.violations?.length||0,score:ge.calculateAccessibilityScore(),componentType:r,timestamp:Date.now()})}).catch(()=>{}),e.violations?.length>0?i?.(e.violations):o?.(e),e}catch(n){return null}finally{u(!1)}},[a,r,i,o]),w=e.useCallback(async(e,t=r)=>{if(!a)return null;u(!0);try{const a=await ge.testFinancialComponent(e,t);return c(a),p(a.violations||[]),g(ge.calculateAccessibilityScore()),x(Date.now()),ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(e=>{e?.reportPerformanceMetric&&e.reportPerformanceMetric("financial_component_accessibility",{componentType:t,violations:a.violations?.length||0,score:ge.calculateAccessibilityScore(),timestamp:Date.now()})}).catch(()=>{}),a}catch(s){return null}finally{u(!1)}},[a,r]),j=e.useCallback(async()=>{if(!a)return null;try{const e=await ge.testKeyboardNavigation();return ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(t=>{t?.reportPerformanceMetric&&t.reportPerformanceMetric("keyboard_navigation_test",{focusableElements:e.focusableElementsCount,tabOrderIssues:e.tabOrderIssues?.length||0,focusVisibilityIssues:e.focusVisibilityIssues?.length||0,passed:e.passed,timestamp:Date.now()})}).catch(()=>{}),e}catch(e){return null}},[a]),C=e.useCallback(async()=>{if(!a)return null;try{const e=await ge.testColorContrast();return ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(t=>{t?.reportPerformanceMetric&&t.reportPerformanceMetric("color_contrast_test",{totalElements:e.totalElements,contrastIssues:e.contrastIssues?.length||0,passed:e.passed,timestamp:Date.now()})}).catch(()=>{}),e}catch(e){return null}},[a]),N=e.useCallback(async()=>{if(!a)return null;try{const e=await ge.testFormAccessibility();return ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(t=>{t?.reportPerformanceMetric&&t.reportPerformanceMetric("form_accessibility_test",{totalForms:e.totalForms,formIssues:e.formIssues?.length||0,passed:e.passed,timestamp:Date.now()})}).catch(()=>{}),e}catch(e){return null}},[a]),k=e.useCallback(()=>{if(!l)return null;try{const e=ge.generateReport();return ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(t=>{t?.reportPerformanceMetric&&t.reportPerformanceMetric("accessibility_report_generated",{score:e.summary.score,violations:e.summary.violations,totalChecks:e.summary.totalChecks,timestamp:Date.now()})}).catch(()=>{}),e}catch(e){return null}},[l]);return e.useEffect(()=>{if(!a||!s)return;const e=()=>{v()};return e(),n&&(b.current=setInterval(e,n)),()=>{b.current&&clearInterval(b.current)}},[a,s,n,v]),e.useEffect(()=>()=>{b.current&&clearInterval(b.current)},[]),{results:l,violations:m,score:h,isLoading:d,lastTestTime:y,runTests:v,testFinancialComponent:w,testKeyboardNavigation:j,testColorContrast:C,testFormAccessibility:N,generateReport:k,elementRef:f}}({componentType:t,autoTest:!0,testInterval:3e4,onViolations:e=>{}}),s=e.useCallback(async()=>{const e={};try{return e.keyboardNav=await a.testKeyboardNavigation(),e.colorContrast=await a.testColorContrast(),e.formAccessibility=await a.testFormAccessibility(),e.report=a.generateReport(),e}catch(t){return null}},[a,t]);return{...a,testFinancialFeatures:s}}const xe=({isVisible:a=!1,onClose:s})=>{const[n,r]=e.useState(null),[i,o]=e.useState(3e4),[l,c]=e.useState(!1),[d,u]=e.useState(75),{alerts:m,startMonitoring:p,stopMonitoring:h,clearAlerts:g}=function(t={}){const{threshold:a=80,alertOnViolations:s=!0,monitorInterval:n=6e4}=t,[r,i]=e.useState(!1),[o,l]=e.useState([]),c=e.useRef(null),d=e.useCallback(()=>{if(r)return;i(!0);const e=async()=>{try{const e=await ge.runTests(document),t=ge.calculateAccessibilityScore();if(t<a){const s={id:Date.now(),type:"low_score",message:`Accessibility score (${t}) is below threshold (${a})`,score:t,violations:e.violations?.length||0,timestamp:Date.now()};l(e=>[...e,s])}const n=e.violations?.filter(e=>"critical"===e.impact)||[];if(n.length>0&&s){const e={id:Date.now(),type:"critical_violations",message:`${n.length} critical accessibility violations found`,violations:n,timestamp:Date.now()};l(t=>[...t,e])}ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(a=>{a?.reportPerformanceMetric&&a.reportPerformanceMetric("accessibility_monitoring",{score:t,violations:e.violations?.length||0,criticalViolations:n.length,timestamp:Date.now()})}).catch(()=>{})}catch(e){}};e(),c.current=setInterval(e,n)},[r,a,s,n]),u=e.useCallback(()=>{i(!1),c.current&&(clearInterval(c.current),c.current=null)},[]),m=e.useCallback(()=>{l([])},[]);return e.useEffect(()=>()=>{c.current&&clearInterval(c.current)},[]),{isMonitoring:r,alerts:o,startMonitoring:d,stopMonitoring:u,clearAlerts:m}}({threshold:d,monitorInterval:i}),y=e.useCallback(()=>{ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(e=>{if(e?.getPerformanceDashboardData)try{const t=e.getPerformanceDashboardData();r(t)}catch(t){}}).catch(e=>{})},[]),x=e.useCallback(()=>{l?(h(),c(!1)):(p(),c(!0))},[l,p,h]);e.useEffect(()=>{if(!a)return;ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(e=>{e?.initializePerformanceMonitoring&&e.initializePerformanceMonitoring()}).catch(()=>{}),y();const e=setInterval(y,i);return()=>{clearInterval(e)}},[a,y,i]);const f=(e,t="ms")=>null==e?"N/A":"number"==typeof e?`${Math.round(e)}${t}`:e;if(!a||!n)return null;const{webVitals:b,budgetViolations:v,accessibility:w,performance:j}=n;return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Performance Dashboard"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time monitoring for FinanceAnalyst Pro"})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("button",{onClick:x,className:"px-4 py-2 rounded-md text-sm font-medium "+(l?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:l?"Stop Monitoring":"Start Monitoring"}),t.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md text-sm font-medium hover:bg-blue-200",children:"Refresh"}),t.jsxs("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:[t.jsx("span",{className:"sr-only",children:"Close"}),t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})]}),t.jsxs("div",{className:"p-6 space-y-8",children:[t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Core Web Vitals"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(b).map(([e,a])=>{const s=((e,t)=>{const a={LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25},FCP:{good:1800,poor:3e3},TTFB:{good:800,poor:1800}}[e];return a&&null!==t?t<=a.good?"good":t<=a.poor?"needs-improvement":"poor":"unknown"})(e,a),n=(e=>{switch(e){case"good":return"text-green-600 bg-green-100";case"needs-improvement":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})(s);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:e}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n}`,children:s})]}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"text-2xl font-bold text-gray-900",children:f(a,"CLS"===e?"":"ms")})})]},e)})})]}),v.length>0&&t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Budget Violations"}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsx("div",{className:"space-y-2",children:v.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-sm font-medium text-red-800",children:[e.metric,": ",f(e.value)]}),t.jsxs("span",{className:"text-sm text-red-600",children:["Over budget by ",f(e.overBy)]})]},a))})})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accessibility"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Current Score"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.currentScore}),t.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"/100"}),w.trends.scoreImproving&&t.jsx("span",{className:"ml-2 text-green-600",children:t.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Violations"}),t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageViolations})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Score"}),t.jsx("span",{className:"text-3xl font-bold text-gray-900",children:w.averageScore})]})]}),m.length>0&&t.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Active Alerts"}),t.jsx("button",{onClick:g,className:"text-xs text-yellow-600 hover:text-yellow-800",children:"Clear All"})]}),t.jsxs("div",{className:"space-y-2",children:[m.slice(0,5).map(e=>t.jsxs("div",{className:"text-sm text-yellow-700",children:[t.jsxs("span",{className:"font-medium",children:[e.type,":"]})," ",e.message]},e.id)),m.length>5&&t.jsxs("div",{className:"text-xs text-yellow-600",children:["And ",m.length-5," more alerts..."]})]})]})]}),j.recentMetrics.length>0&&t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Performance Events"}),t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:t.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Component"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.recentMetrics.slice(0,10).map((e,a)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.type}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.component||e.componentType||"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:void 0!==e.violations?`${e.violations} violations`:void 0!==e.score?`Score: ${e.score}`:void 0!==e.duration?`${Math.round(e.duration)}ms`:"N/A"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]},a))})]})})})]}),t.jsxs("section",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monitoring Settings"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("label",{htmlFor:"refresh-interval",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refresh Interval (seconds)"}),t.jsxs("select",{id:"refresh-interval",value:i/1e3,onChange:e=>o(1e3*parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[t.jsx("option",{value:10,children:"10 seconds"}),t.jsx("option",{value:30,children:"30 seconds"}),t.jsx("option",{value:60,children:"1 minute"}),t.jsx("option",{value:300,children:"5 minutes"})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("label",{htmlFor:"alert-threshold",className:"block text-sm font-medium text-gray-700 mb-2",children:"Accessibility Alert Threshold"}),t.jsxs("select",{id:"alert-threshold",value:d,onChange:e=>u(parseInt(e.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[t.jsx("option",{value:60,children:"60 (Strict)"}),t.jsx("option",{value:75,children:"75 (Moderate)"}),t.jsx("option",{value:85,children:"85 (Lenient)"}),t.jsx("option",{value:95,children:"95 (Very Lenient)"})]})]})]})]})]})]})})},fe=({children:e})=>t.jsx(w,{children:e}),be=()=>{const{pathname:t}=G();return e.useEffect(()=>{window.scrollTo(0,0)},[t]),null},ve={"cmd+k":{action:"open-command-palette",description:"Open command palette"},"ctrl+k":{action:"open-command-palette",description:"Open command palette"},"ctrl+1":{action:"navigate",target:"data",description:"Go to Data Entry"},"ctrl+2":{action:"navigate",target:"modeling",description:"Go to Modeling"},"ctrl+3":{action:"navigate",target:"analysis",description:"Go to Analysis"},"ctrl+n":{action:"create-dcf",description:"Create new DCF model"},"ctrl+s":{action:"save",description:"Save current analysis"},"ctrl+i":{action:"import-data",description:"Import data"},"ctrl+e":{action:"export-data",description:"Export analysis"},"ctrl+f":{action:"search-data",description:"Search data"},"ctrl+shift+s":{action:"sensitivity-analysis",description:"Run sensitivity analysis"},"ctrl+shift+m":{action:"monte-carlo",description:"Run Monte Carlo simulation"},"ctrl+shift+i":{action:"toggle-insights",description:"Toggle insights sidebar"},f1:{action:"help",description:"Open help"},"alt+1":{action:"quick-company",company:"AAPL",description:"Quick Apple analysis"},"alt+2":{action:"quick-company",company:"MSFT",description:"Quick Microsoft analysis"},"alt+3":{action:"quick-company",company:"GOOGL",description:"Quick Google analysis"},"alt+4":{action:"quick-company",company:"AMZN",description:"Quick Amazon analysis"}},we=(t={})=>{const a=e.useCallback(e=>{const t=[];(e.metaKey||e.ctrlKey)&&t.push(e.metaKey?"cmd":"ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift");let a=e.key.toLowerCase();return" "===a&&(a="space"),"escape"===a&&(a="esc"),"arrowup"===a&&(a="up"),"arrowdown"===a&&(a="down"),"arrowleft"===a&&(a="left"),"arrowright"===a&&(a="right"),t.push(a),t.join("+")},[]),s=e.useCallback(e=>{const t=e.tagName.toLowerCase(),a="true"===e.contentEditable;return!["input","textarea","select"].includes(t)&&!a},[]),n=e.useCallback(e=>{if(!s(e.target))return;const n=a(e),r=ve[n];if(r){e.preventDefault(),e.stopPropagation();const a=t[r.action];a&&a(r)}},[a,s,t]);return e.useEffect(()=>(document.addEventListener("keydown",n,!0),()=>{document.removeEventListener("keydown",n,!0)}),[n]),{getAllShortcuts:e.useCallback(()=>Object.entries(ve).map(([e,t])=>({key:e,...t})),[]),getShortcutsByCategory:e.useCallback(()=>{const e={general:[],navigation:[],analysis:[],data:[],view:[],quick:[]};return Object.entries(ve).forEach(([t,a])=>{const s={key:t,...a};"navigate"===a.action?e.navigation.push(s):a.action.includes("analysis")||"create-dcf"===a.action||"monte-carlo"===a.action?e.analysis.push(s):a.action.includes("data")||"import-data"===a.action||"export-data"===a.action?e.data.push(s):a.action.includes("toggle")||"help"===a.action?e.view.push(s):"quick-company"===a.action?e.quick.push(s):e.general.push(s)}),e},[]),formatKeyCombo:e.useCallback(e=>e.split("+").map(e=>{switch(e){case"cmd":return"⌘";case"ctrl":return"Ctrl";case"alt":return"Alt";case"shift":return"Shift";case"space":return"Space";case"esc":return"Esc";case"up":return"↑";case"down":return"↓";case"left":return"←";case"right":return"→";default:return e.toUpperCase()}}).join(" + "),[]),isShortcutAvailable:e.useCallback(e=>!ve[e.toLowerCase()],[]),registerShortcut:e.useCallback((e,t)=>{const a=e.toLowerCase();return!ve[a]&&(ve[a]=t,!0)},[])}},je={navigation:[{pattern:/(?:go to|navigate to|switch to|show me)\s+(.+)/i,category:"navigation"},{pattern:/(?:open|view)\s+(.+)/i,category:"navigation"}],analysis:[{pattern:/(?:create|new|build|make)\s+(?:a\s+)?(?:dcf|valuation|model)(?:\s+for\s+(.+))?/i,category:"analysis",command:"create-dcf"},{pattern:/(?:run|perform|do)\s+(?:a\s+)?sensitivity\s+(?:analysis\s+)?(?:on\s+(.+))?/i,category:"analysis",command:"sensitivity-analysis"},{pattern:/(?:calculate|compute)\s+(.+)/i,category:"analysis"},{pattern:/(?:analyze|analyse)\s+(.+)/i,category:"analysis"}],data:[{pattern:/(?:find|search|look for)\s+(.+)/i,category:"data",command:"search-data"},{pattern:/(?:import|load)\s+(.+)/i,category:"data",command:"import-data"},{pattern:/(?:export|save|download)\s+(.+)/i,category:"export",command:"export-data"}],charts:[{pattern:/(?:create|make|build|show)\s+(?:a\s+)?(?:chart|graph|plot)(?:\s+for\s+(.+))?/i,category:"charts",command:"create-chart"},{pattern:/(?:visualize|plot)\s+(.+)/i,category:"charts",command:"create-chart"}]},Ce={"go-to-data":{id:"go-to-data",title:"Go to Data Entry",description:"Navigate to financial data spreadsheet",category:"navigation",icon:_,shortcut:"Ctrl+1",keywords:["data","spreadsheet","financial","entry","input"],execute:(e,t)=>({action:"navigate",target:"data"})},"go-to-modeling":{id:"go-to-modeling",title:"Go to Modeling Tools",description:"Navigate to financial modeling workspace",category:"navigation",icon:u,shortcut:"Ctrl+2",keywords:["modeling","tools","dcf","models"],execute:(e,t)=>({action:"navigate",target:"modeling"})},"go-to-analysis":{id:"go-to-analysis",title:"Go to Analysis Results",description:"View analysis results and outputs",category:"navigation",icon:c,shortcut:"Ctrl+3",keywords:["analysis","results","outputs","valuation"],execute:(e,t)=>({action:"navigate",target:"analysis"})},"go-to-lbo":{id:"go-to-lbo",title:"Advanced LBO Tool",description:"Navigate to leveraged buyout modeling workspace",category:"navigation",icon:u,shortcut:"Ctrl+4",keywords:["lbo","leveraged","buyout","private","equity","advanced"],execute:(e,t)=>({action:"navigate",target:"lbo"})},"go-to-threestatement":{id:"go-to-threestatement",title:"3-Statement Model Workspace",description:"Navigate to integrated financial statement modeling",category:"navigation",icon:_,shortcut:"Ctrl+5",keywords:["three","statement","financial","model","income","balance","cash"],execute:(e,t)=>({action:"navigate",target:"threestatement"})},"go-to-scenarios":{id:"go-to-scenarios",title:"Scenario Analysis",description:"Navigate to enhanced scenario analysis and stress testing",category:"navigation",icon:c,shortcut:"Ctrl+6",keywords:["scenario","analysis","stress","testing","sensitivity","multiple"],execute:(e,t)=>({action:"navigate",target:"scenarios"})},"go-to-montecarlo":{id:"go-to-montecarlo",title:"Monte Carlo Integration Hub",description:"Navigate to cross-model Monte Carlo simulation workspace",category:"navigation",icon:D,shortcut:"Ctrl+7",keywords:["monte","carlo","simulation","integration","risk","probability"],execute:(e,t)=>({action:"navigate",target:"montecarlo"})},"create-dcf":{id:"create-dcf",title:"Create New DCF Model",description:"Start a new discounted cash flow valuation model",category:"analysis",icon:u,shortcut:"Ctrl+N",keywords:["dcf","valuation","model","discounted","cash","flow","new","create"],parameters:[{name:"company",type:"string",description:"Company ticker or name",optional:!0}],execute:(e,t)=>({action:"create-model",type:"dcf",company:e?.company||"New Model"})},"sensitivity-analysis":{id:"sensitivity-analysis",title:"Run Sensitivity Analysis",description:"Perform sensitivity analysis on key assumptions",category:"analysis",icon:m,shortcut:"Ctrl+Shift+S",keywords:["sensitivity","analysis","assumptions","wacc","growth","test"],parameters:[{name:"variable",type:"string",description:"Variable to analyze (WACC, growth rate, etc.)",optional:!0}],execute:(e,t)=>({action:"run-sensitivity",variable:e?.variable||"wacc"})},"monte-carlo":{id:"monte-carlo",title:"Run Monte Carlo Simulation",description:"Perform Monte Carlo simulation on model",category:"analysis",icon:D,keywords:["monte","carlo","simulation","probability","risk"],execute:(e,t)=>({action:"run-monte-carlo"})},"create-lbo":{id:"create-lbo",title:"Create LBO Model",description:"Start a new leveraged buyout analysis model",category:"analysis",icon:u,shortcut:"Ctrl+Shift+L",keywords:["lbo","leveraged","buyout","private","equity","debt","returns"],parameters:[{name:"company",type:"string",description:"Target company for LBO analysis",optional:!0}],execute:(e,t)=>({action:"create-model",type:"lbo",company:e?.company||"New LBO Model"})},"create-3statement":{id:"create-3statement",title:"Build 3-Statement Model",description:"Create integrated income statement, balance sheet, and cash flow model",category:"analysis",icon:_,shortcut:"Ctrl+Shift+3",keywords:["three","statement","income","balance","cash","flow","integrated"],parameters:[{name:"company",type:"string",description:"Company for financial modeling",optional:!0}],execute:(e,t)=>({action:"create-model",type:"threestatement",company:e?.company||"New 3-Statement Model"})},"scenario-analysis":{id:"scenario-analysis",title:"Run Scenario Analysis",description:"Create and analyze multiple scenarios with different assumptions",category:"analysis",icon:c,shortcut:"Ctrl+Shift+A",keywords:["scenario","analysis","multiple","assumptions","bull","bear","base"],parameters:[{name:"scenarios",type:"array",description:"Number of scenarios to create",optional:!0}],execute:(e,t)=>({action:"create-scenarios",scenarios:e?.scenarios||["Base","Bull","Bear"]})},"search-data":{id:"search-data",title:"Search Financial Data",description:"Find specific financial metrics or data points",category:"data",icon:A,shortcut:"Ctrl+F",keywords:["search","find","data","metrics","revenue","expenses"],parameters:[{name:"query",type:"string",description:"What to search for",required:!0}],execute:(e,t)=>({action:"search",query:e?.query})},"import-data":{id:"import-data",title:"Import Financial Data",description:"Import data from Excel, CSV, or other sources",category:"data",icon:E,shortcut:"Ctrl+I",keywords:["import","upload","excel","csv","data","file"],execute:(e,t)=>({action:"import-data"})},"export-data":{id:"export-data",title:"Export Analysis",description:"Export current analysis to PDF, Excel, or PowerPoint",category:"export",icon:y,shortcut:"Ctrl+E",keywords:["export","download","pdf","excel","powerpoint","save"],parameters:[{name:"format",type:"string",description:"Export format (PDF, Excel, PowerPoint)",optional:!0}],execute:(e,t)=>({action:"export",format:e?.format||"pdf"})},"create-chart":{id:"create-chart",title:"Create Chart",description:"Create a visualization from your data",category:"charts",icon:p,keywords:["chart","graph","visualization","plot","visualize"],parameters:[{name:"type",type:"string",description:"Chart type (line, bar, pie, etc.)",optional:!0},{name:"data",type:"string",description:"Data to visualize",optional:!0}],execute:(e,t)=>({action:"create-chart",type:e?.type||"line",data:e?.data})},"revenue-chart":{id:"revenue-chart",title:"Create Revenue Chart",description:"Visualize revenue trends over time",category:"charts",icon:S,keywords:["revenue","sales","income","trend","growth"],execute:(e,t)=>({action:"create-chart",type:"line",data:"revenue"})},"margin-analysis":{id:"margin-analysis",title:"Analyze Margins",description:"Create margin analysis visualization",category:"charts",icon:l,keywords:["margin","profitability","ebitda","operating","gross"],execute:(e,t)=>({action:"create-chart",type:"bar",data:"margins"})},"company-apple":{id:"company-apple",title:"Analyze Apple (AAPL)",description:"Create analysis for Apple Inc.",category:"analysis",icon:u,keywords:["apple","aapl","company","stock"],execute:(e,t)=>({action:"create-model",company:"AAPL"})},"company-microsoft":{id:"company-microsoft",title:"Analyze Microsoft (MSFT)",description:"Create analysis for Microsoft Corporation",category:"analysis",icon:u,keywords:["microsoft","msft","company","stock"],execute:(e,t)=>({action:"create-model",company:"MSFT"})},"save-analysis":{id:"save-analysis",title:"Save Current Analysis",description:"Save your current work",category:"data",icon:k,shortcut:"Ctrl+S",keywords:["save","store","backup"],execute:(e,t)=>({action:"save"})},"toggle-insights":{id:"toggle-insights",title:"Toggle Insights Sidebar",description:"Show or hide contextual insights",category:"navigation",icon:N,keywords:["insights","sidebar","toggle","show","hide"],execute:(e,t)=>({action:"toggle-insights"})},settings:{id:"settings",title:"Open Settings",description:"Configure application preferences",category:"settings",icon:C,keywords:["settings","preferences","config","options"],execute:(e,t)=>({action:"open-settings"})},help:{id:"help",title:"Get Help",description:"Access help documentation and tutorials",category:"help",icon:j,shortcut:"F1",keywords:["help","documentation","tutorial","support"],execute:(e,t)=>({action:"open-help"})}},Ne=({isOpen:a,onClose:s,onExecuteCommand:n,currentContext:r={},recentCommands:i=[],userPreferences:o={},className:l})=>{const[d,m]=e.useState(""),[h,g]=e.useState(0),[x,f]=e.useState([]),v=e.useRef(null),w=e.useRef(null),N=e.useRef(null),k=e.useRef(null),S=e.useRef(null),D=async()=>{if(S.current)return S.current;try{const e=await ae(()=>import("./monitoring-C8Ng3aqr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])),t=e?.default||e;return S.current=t,t}catch(e){const t={trackEvent:()=>{},trackError:()=>{}};return S.current=t,t}},{searchCommands:O,executeCommand:V,getContextualCommands:$,learnFromUsage:z}=((t={})=>{const[a,s]=e.useState(()=>{const e=localStorage.getItem("commandUsage");return e?JSON.parse(e):{}}),[n,r]=e.useState(()=>{const e=localStorage.getItem("commandLearning");return e?JSON.parse(e):{}}),i=e.useCallback(e=>{const t=[];for(const[a,s]of Object.entries(je))for(const n of s){const a=e.match(n.pattern);a&&t.push({category:n.category,command:n.command,parameters:a.slice(1).filter(Boolean),confidence:a[0].length/e.length})}return t.sort((e,t)=>t.confidence-e.confidence)},[]),o=e.useCallback(e=>{if(!e.trim())return[];const s=e.toLowerCase().trim(),n=[],r=i(e);return Object.values(Ce).forEach(e=>{let i=0;e.title.toLowerCase()===s&&(i+=100),e.title.toLowerCase().includes(s)&&(i+=50),e.description.toLowerCase().includes(s)&&(i+=30),i+=20*e.keywords.filter(e=>e.toLowerCase().includes(s)||s.includes(e.toLowerCase())).length;const o=a[e.id]||0;i+=Math.min(2*o,20),t.activeTab&&("navigation"===e.category&&e.id.includes(t.activeTab)&&(i+=15),e.category===t.activeTab&&(i+=10));const l=r.find(t=>t.command===e.id);l&&(i+=40*l.confidence),i>0&&n.push({...e,score:i,usageCount:o,isRecommended:i>60})}),n.sort((e,t)=>t.score-e.score).slice(0,8)},[i,a,t]),l=e.useCallback(()=>{const e=[];switch(t.activeTab){case"data":case"spreadsheet":e.push(Ce["import-data"],Ce["search-data"],Ce["go-to-modeling"]);break;case"modeling":e.push(Ce["create-dcf"],Ce["sensitivity-analysis"],Ce["go-to-analysis"]);break;case"analysis":e.push(Ce["create-chart"],Ce["export-data"],Ce["sensitivity-analysis"]);break;case"lbo":e.push(Ce["create-lbo"],Ce["sensitivity-analysis"],Ce["export-data"]);break;case"threestatement":e.push(Ce["create-3statement"],Ce["sensitivity-analysis"],Ce["go-to-scenarios"]);break;case"scenarios":e.push(Ce["scenario-analysis"],Ce["monte-carlo"],Ce["create-chart"]);break;case"montecarlo":e.push(Ce["monte-carlo"],Ce["scenario-analysis"],Ce["export-data"]);break;default:e.push(Ce["create-dcf"],Ce["import-data"],Ce.help)}const s=Object.entries(a).sort(([,e],[,t])=>t-e).slice(0,2).map(([e])=>Ce[e]).filter(Boolean);return[...e,...s].slice(0,6)},[t,a]),c=e.useCallback(async(e,a)=>{const n=Ce[e];if(!n)throw new Error(`Command not found: ${e}`);try{const r=await n.execute(a,t);return s(t=>({...t,[e]:(t[e]||0)+1})),r}catch(r){throw r}},[t]),d=e.useCallback((e,t)=>{t.trim()&&r(a=>({...a,[e]:{...a[e],queries:[...a[e]?.queries||[],t].slice(-5),lastUsed:Date.now()}}))},[]),u=e.useCallback(()=>{const e={};return Object.values(Ce).forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e},[]);return e.useEffect(()=>{localStorage.setItem("commandUsage",JSON.stringify(a))},[a]),e.useEffect(()=>{localStorage.setItem("commandLearning",JSON.stringify(n))},[n]),{searchCommands:o,executeCommand:c,getContextualCommands:l,getCommandCategories:u,learnFromUsage:d,parseNaturalLanguage:i,commandRegistry:Ce,commandUsage:a,userLearning:n}})(r),B=e.useMemo(()=>d.trim()?O(d):[...i.slice(0,3).map(e=>({...e,category:"recent"})),...$().slice(0,4).map(e=>({...e,category:"suggested"})),{id:"new-dcf",title:"Create New DCF Model",description:"Start a new discounted cash flow valuation",icon:u,category:"popular",keywords:["dcf","valuation","model","new"]},{id:"sensitivity-analysis",title:"Run Sensitivity Analysis",description:"Test assumptions with sensitivity analysis",icon:c,category:"popular",keywords:["sensitivity","analysis","wacc","assumptions"]}],[d,i,O,$]);e.useEffect(()=>{g(0)},[B]),e.useEffect(()=>{a&&v.current&&(v.current.focus(),m(""),g(0),k.current=performance.now(),D().then(e=>{try{e.trackEvent("command_palette_open",{page:r?.page,context:r,recentCount:i?.length||0})}catch(t){}}).catch(()=>{}))},[a]),e.useEffect(()=>{if(!a)return;const e=e=>{if(["ArrowDown","ArrowUp","Enter","Escape"].includes(e.key))switch(e.key){case"ArrowDown":e.preventDefault(),g(e=>Math.min(e+1,B.length-1));break;case"ArrowUp":e.preventDefault(),g(e=>Math.max(e-1,0));break;case"Enter":e.preventDefault(),B[h]&&W(B[h]);break;case"Escape":e.preventDefault(),s()}else if("Tab"===e.key&&N.current){const t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),a=Array.from(N.current.querySelectorAll(t)).filter(e=>!e.hasAttribute("disabled")&&!e.getAttribute("aria-hidden"));if(0===a.length)return;const s=a[0],n=a[a.length-1],r=document.activeElement;e.shiftKey||r!==n?e.shiftKey&&r===s&&(e.preventDefault(),n.focus()):(e.preventDefault(),s.focus())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,h,B,s]);const W=async e=>{try{f(t=>[e,...t.slice(0,9)]),z(e.id,d);const a=performance.now(),i=await V(e.id,e.params),o=performance.now();try{const t=k.current||a;(await D()).trackEvent("command_execute",{commandId:e.id,query:d,page:r?.page,context:r,latencyOpenMs:Math.max(0,Math.round(a-t)),execDurationMs:Math.max(0,Math.round(o-a))})}catch(t){}n&&n(e,i),s()}catch(a){try{(await D()).trackError(a,"command_execution",{commandId:e?.id,page:r?.page})}catch(t){}}},K=e=>{switch(e){case"recent":return"text-blue-500";case"suggested":return"text-amber-500";case"popular":return"text-emerald-500";case"navigation":default:return"text-slate-500";case"analysis":return"text-purple-500";case"data":return"text-indigo-500";case"export":return"text-green-500";case"import":return"text-orange-500";case"charts":return"text-pink-500";case"collaboration":return"text-cyan-500";case"automation":return"text-red-500";case"external":return"text-gray-500";case"settings":return"text-slate-600";case"help":return"text-blue-600"}},H=(e,a)=>{if(!a.trim())return e;const s=new RegExp(`(${a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return e.split(s).map((e,a)=>s.test(e)?t.jsx("mark",{className:"bg-yellow-200 text-yellow-900 px-0.5 rounded",children:e},a):e)};return a?F.createPortal(t.jsx(q,{children:t.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[1200] flex items-start justify-center pt-20",onClick:s,children:t.jsxs(U.div,{initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{type:"spring",duration:.3},className:"bg-white rounded-xl shadow-2xl border border-slate-200 w-full max-w-2xl mx-4 overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"command-palette-title",ref:N,onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center gap-3 p-4 border-b border-slate-100 bg-slate-50",children:[t.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:t.jsx(I,{size:18,className:"text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{id:"command-palette-title",className:"font-semibold text-slate-900",children:"Command Palette"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Type to search commands, or use natural language"})]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-slate-200 rounded",children:"Esc"}),t.jsx("span",{children:"to close"})]})]}),t.jsxs("div",{className:"relative p-4 border-b border-slate-100",children:[t.jsxs("div",{className:"relative",children:[t.jsx(A,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),t.jsx("input",{ref:v,type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Type a command or just describe what you'd like to do...",className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-900 placeholder-slate-500"})]}),!d&&t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.jsx("span",{className:"text-xs text-slate-500",children:"Try:"}),["New DCF for AAPL","Run sensitivity on WACC","Export to PDF","Find revenue data"].map(e=>t.jsxs("button",{onClick:()=>m(e),className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors",children:['"',e,'"']},e))]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto",ref:w,children:0===B.length?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"p-3 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:t.jsx(A,{size:24,className:"text-slate-400"})}),t.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:"No commands found"}),t.jsx("p",{className:"text-sm text-slate-500",children:"Try a different search term or use natural language to describe what you want to do."})]}):t.jsx("div",{className:"py-2",children:B.map((e,a)=>{const s=(e=>{switch(e){case"recent":return M;case"suggested":return P;case"popular":return c;case"navigation":return L;case"analysis":return u;case"data":return _;case"export":return y;case"import":return E;case"charts":return p;case"collaboration":return T;case"automation":return b;case"external":return R;case"settings":return C;case"help":return j;default:return I}})(e.category),n=e.icon,r=a===h;return t.jsxs(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"flex items-center gap-3 px-4 py-3 cursor-pointer transition-all duration-150 "+(r?"bg-blue-50 border-r-2 border-blue-500":"hover:bg-slate-50"),role:"option",tabIndex:0,"aria-selected":r,onClick:()=>W(e),onFocus:()=>g(a),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),W(e))},children:[t.jsx("div",{className:"p-1.5 rounded-md "+(r?"bg-blue-100":"bg-slate-100"),children:t.jsx(s,{size:12,className:K(e.category)})}),n&&t.jsx("div",{className:"p-2 rounded-lg "+(r?"bg-blue-100":"bg-slate-100"),children:t.jsx(n,{size:16,className:r?"text-blue-600":"text-slate-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-medium truncate "+(r?"text-blue-900":"text-slate-900"),children:H(e.title,d)}),e.shortcut&&t.jsx("div",{className:"flex items-center gap-1",children:e.shortcut.split("+").map((e,a)=>t.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 text-slate-600 text-xs rounded",children:e},a))})]}),t.jsx("p",{className:"text-sm truncate "+(r?"text-blue-700":"text-slate-500"),children:H(e.description,d)}),t.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+(r?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"),children:e.category}),e.usageCount&&t.jsxs("span",{className:"text-xs text-slate-400",children:["Used ",e.usageCount," times"]}),e.isNew&&t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:"New"})]})]}),r&&t.jsx(U.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-blue-500",children:t.jsx(L,{size:16})})]},`${e.id}-${a}`)})})}),t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-slate-200 rounded",children:"↑↓"}),t.jsx("span",{children:"Navigate"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("kbd",{className:"px-1.5 py-0.5 bg-white border border-slate-200 rounded",children:"Enter"}),t.jsx("span",{children:"Execute"})]})]}),t.jsxs("div",{className:"text-slate-400",children:[B.length," command",1!==B.length?"s":""," available"]})]})]})})}),document.body):null},ke=({isOpen:a,onClose:s})=>{const[n,i]=e.useState("general"),{getShortcutsByCategory:o,formatKeyCombo:l}=we();if(!a)return null;const c=o(),d=[{id:"general",label:"General",icon:I},{id:"navigation",label:"Navigation",icon:A},{id:"analysis",label:"Analysis",icon:b},{id:"data",label:"Data",icon:O},{id:"view",label:"View",icon:I},{id:"quick",label:"Quick Access",icon:b}];return F.createPortal(t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(O,{className:"w-6 h-6 text-blue-600"}),t.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Keyboard Shortcuts"})]}),t.jsx("button",{onClick:s,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",children:t.jsx(r,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex h-[calc(90vh-80px)]",children:[t.jsxs("div",{className:"w-64 bg-slate-50 border-r border-slate-200 overflow-y-auto",children:[t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"text-sm font-medium text-slate-900 mb-3",children:"Categories"}),t.jsx("nav",{className:"space-y-1",children:d.map(e=>{const a=e.icon,s=c[e.id]?.length||0;return t.jsxs("button",{onClick:()=>i(e.id),className:W("w-full flex items-center justify-between px-3 py-2 text-sm rounded-lg transition-colors",n===e.id?"bg-blue-100 text-blue-900":"text-slate-700 hover:bg-slate-100"),children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(a,{className:"w-4 h-4"}),t.jsx("span",{children:e.label})]}),t.jsx("span",{className:"text-xs text-slate-500",children:s})]},e.id)})})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-900 mb-2",children:"Pro Tips"}),t.jsxs("ul",{className:"text-xs text-slate-600 space-y-1",children:[t.jsx("li",{children:"• Use Cmd+K (Ctrl+K) for command palette"}),t.jsx("li",{children:"• Hold Shift for additional shortcuts"}),t.jsx("li",{children:"• Shortcuts work globally except in text inputs"}),t.jsx("li",{children:"• F1 opens context-sensitive help"})]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:[d.find(e=>e.id===n)?.label," Shortcuts"]}),t.jsxs("p",{className:"text-sm text-slate-600",children:[c[n]?.length||0," shortcuts available in this category"]})]}),c[n]?.length>0?t.jsx("div",{className:"space-y-3",children:c[n].map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-slate-900 mb-1",children:e.description}),e.target&&t.jsxs("div",{className:"text-xs text-slate-500",children:["Target: ",e.target]}),e.company&&t.jsxs("div",{className:"text-xs text-slate-500",children:["Company: ",e.company]})]}),t.jsx("div",{className:"ml-4",children:t.jsx("kbd",{className:"inline-flex items-center px-3 py-1.5 bg-white border border-slate-300 rounded-md shadow-sm text-sm font-mono text-slate-900",children:l(e.key)})})]},`${e.key}-${a}`))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(O,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),t.jsx("p",{className:"text-slate-500",children:"No shortcuts available in this category"})]})]})})]}),t.jsx("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[t.jsxs("div",{children:["Press ",t.jsx("kbd",{className:"px-2 py-1 bg-white border border-slate-300 rounded",children:"Esc"})," to close"]}),t.jsxs("div",{children:["Total: ",Object.values(c).flat().length," shortcuts"]})]})})]})}),document.body)},Se=e.createContext(),Ee=()=>{const t=e.useContext(Se);if(!t)throw new Error("useKeyboardShortcutsContext must be used within KeyboardShortcutsProvider");return t},Ae=({children:a})=>{const s=Q(),[n,r]=e.useState(!1),[i,o]=e.useState(!1),[l,c]=e.useState([]),[d,u]=e.useState({});we({"open-command-palette":()=>r(!0),navigate:e=>s(e.target),"create-dcf":()=>{s("/private-analysis"),setTimeout(()=>{const e=new CustomEvent("create-dcf-model");window.dispatchEvent(e)},100)},"create-lbo":()=>{s("/private-analysis"),setTimeout(()=>{const e=new CustomEvent("create-lbo-model");window.dispatchEvent(e)},100)},save:()=>{const e=new CustomEvent("save-analysis");window.dispatchEvent(e)},"import-data":()=>{const e=new CustomEvent("import-data");window.dispatchEvent(e)},"export-data":()=>{const e=new CustomEvent("export-data");window.dispatchEvent(e)},"search-data":()=>{const e=new CustomEvent("search-data");window.dispatchEvent(e)},"sensitivity-analysis":()=>{const e=new CustomEvent("run-sensitivity-analysis");window.dispatchEvent(e)},"monte-carlo":()=>{const e=new CustomEvent("run-monte-carlo");window.dispatchEvent(e)},"toggle-insights":()=>{const e=new CustomEvent("toggle-insights-sidebar");window.dispatchEvent(e)},help:()=>o(!0),"quick-company":e=>{s(`/market-analysis?symbol=${e.company}`)},"open-options-pricer":()=>{s("/advanced-analytics"),setTimeout(()=>{const e=new CustomEvent("select-tab",{detail:{tab:"options"}});window.dispatchEvent(e)},100)},"open-bond-analytics":()=>{s("/advanced-analytics"),setTimeout(()=>{const e=new CustomEvent("select-tab",{detail:{tab:"fixed-income"}});window.dispatchEvent(e)},100)},"open-credit-modeling":()=>{s("/advanced-analytics"),setTimeout(()=>{const e=new CustomEvent("select-tab",{detail:{tab:"credit"}});window.dispatchEvent(e)},100)}});const m=e.useCallback(e=>{c(t=>{const a=t.filter(t=>t.id!==e.id);return[e,...a].slice(0,5)})},[]),p={showCommandPalette:()=>r(!0),showShortcutsHelp:()=>o(!0),executeCommand:()=>{},recentCommands:l,updateCommandContext:e=>u(t=>({...t,...e}))};return t.jsxs(Se.Provider,{value:p,children:[a,t.jsx(Ne,{isOpen:n,onClose:()=>r(!1),onExecuteCommand:m,currentContext:d,recentCommands:l}),t.jsx(ke,{isOpen:i,onClose:()=>o(!1)})]})},_e=({size:e="default",className:a="",text:s="Loading...",showText:n=!0,variant:r="primary"})=>{const i={primary:"text-primary",secondary:"text-secondary",muted:"text-muted-foreground",white:"text-white"};return t.jsxs("div",{className:W("flex flex-col items-center justify-center space-y-2",a),children:[t.jsx("div",{className:W("animate-spin rounded-full border-2 border-current border-t-transparent",{sm:"w-4 h-4",default:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[e],i[r])}),n&&t.jsx("p",{className:W("font-medium",{sm:"text-xs",default:"text-sm",lg:"text-base",xl:"text-lg"}[e],i[r]),children:s})]})},De=e.lazy(()=>ae(()=>import("./index-mLiVJNvj.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8,9,10,15,16,12,17,18,19,11,20,21,22,13]))),Ie=e.lazy(()=>ae(()=>import("./index--Z4I5kSb.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,20,24,25,11,13]))),Le=e.lazy(()=>ae(()=>import("./index-wLxS2JA9.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),Re=e.lazy(()=>ae(()=>import("./ValuationTool-DIdm8hW2.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,28,15,25,29,17,11,12,13]))),Te=e.lazy(()=>ae(()=>import("./ValuationToolDocs-DA48heL1.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10]))),Pe=e.lazy(()=>ae(()=>import("./valuation-tool-demo-CdglShIm.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,12]))),Me=e.lazy(()=>ae(()=>import("./PrivateAnalysis-Dzr015NY.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,22,28,11,13]))),Oe=e.lazy(()=>ae(()=>import("./ValuationWorkbench-DK1Rcqaj.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),Ve=e.lazy(()=>ae(()=>import("./ModelLab-BlvBPQvZ.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,12,16,17,15,18,11,13]))),Fe=e.lazy(()=>ae(()=>import("./PortfolioManagement-CqDGd4pX.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,9,10,19,11,20,21,15,18,12,13]))),$e=e.lazy(()=>ae(()=>import("./ThesisCanvas-DuhoNejA.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),ze=e.lazy(()=>ae(()=>import("./AdvancedCharting-CWPcWeqp.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8,9,10,15,11,12,13]))),Ue=e.lazy(()=>ae(()=>import("./MarketAnalysis-BRwWkWW1.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,15,16,12,17,18,24,11,13]))),qe=e.lazy(()=>ae(()=>import("./Reports-DrNFnC8O.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,9,10,15,16,12,17,18,11,13]))),Be=e.lazy(()=>ae(()=>import("./Settings-g4PB94sL.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,9,10,41,15,16,12,17,18,11,13]))),We=e.lazy(()=>ae(()=>import("./AIInsights-Ctd-e3EW.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,9,10,15,16,12,17,18,11,13]))),Ke=e.lazy(()=>ae(()=>import("./Analytics-CdBlttA3.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,15,16,12,17,18,11,13]))),He=e.lazy(()=>ae(()=>import("./advanced-analytics-y00dU25g.js").then(e=>e.A),__vite__mapDeps([5,1,2,3,4,10,9,6,7,8]))),Ge=e.lazy(()=>ae(()=>import("./FinancialInputsDemo-BTFX2xOf.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,25,29,17,11,12,13]))),Qe=e.lazy(()=>ae(()=>import("./Models-9rY0qUac.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),Je=e.lazy(()=>ae(()=>import("./App-DS03USTR.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,8,9,10,12,16,17,15,18,11,13]))),Ye=e.lazy(()=>ae(()=>import("./Data-D5wxtb1Q.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),Ze=e.lazy(()=>ae(()=>import("./Integrations-Qlhn93PB.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,8,9,10,16,12,17,15,18,11,13]))),Xe=e.lazy(()=>ae(()=>import("./NotFound-DFHQe6Vb.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,9,10,12]))),et=e.lazy(()=>ae(()=>import("./MonitoringDebugPanel-C6kaBCj4.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,8,9,10,12,11,13]))),tt=(()=>{try{const e=new URLSearchParams(window.location.search);return!0===navigator.webdriver||e.has("lhci")||e.has("ci")||e.has("audit")}catch{return!0===navigator.webdriver}})(),at=()=>{const t=G();return e.useEffect(()=>{const e=t.pathname+(t.search||"");tt||ae(()=>import("./monitoring-C8Ng3aqr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(t=>{t?.default?.trackPageView&&t.default.trackPageView(e)}).catch(()=>{})},[t.pathname,t.search]),null},st=()=>t.jsx(J,{children:t.jsxs(he,{children:[t.jsx(be,{}),t.jsx(at,{}),t.jsx(Ae,{children:t.jsx(e.Suspense,{fallback:t.jsx(_e,{}),children:t.jsxs(Y,{children:[t.jsx(Z,{path:"/",element:t.jsx(De,{})}),t.jsx(Z,{path:"/financial-model-workspace",element:t.jsx(De,{})}),t.jsx(Z,{path:"/real-time-market-data-center",element:t.jsx(Ie,{})}),t.jsx(Z,{path:"/scenario-analysis-sensitivity-tools",element:t.jsx(Le,{})}),t.jsx(Z,{path:"/valuation-tool",element:t.jsx(Re,{})}),t.jsx(Z,{path:"/valuation-tool/docs",element:t.jsx(Te,{})}),t.jsx(Z,{path:"/valuation-tool/demo",element:t.jsx(Pe,{})}),t.jsx(Z,{path:"/valuation-workbench",element:t.jsx(Oe,{})}),t.jsx(Z,{path:"/model-lab",element:t.jsx(Ve,{})}),t.jsx(Z,{path:"/advanced-charts",element:t.jsx(ze,{})}),t.jsx(Z,{path:"/market-analysis",element:t.jsx(Ue,{})}),t.jsx(Z,{path:"/reports",element:t.jsx(qe,{})}),t.jsx(Z,{path:"/settings",element:t.jsx(Be,{})}),t.jsx(Z,{path:"/ai-insights",element:t.jsx(We,{})}),t.jsx(Z,{path:"/analytics",element:t.jsx(Ke,{})}),t.jsx(Z,{path:"/advanced-analytics",element:t.jsx(He,{})}),t.jsx(Z,{path:"/portfolio-management",element:t.jsx(Fe,{})}),t.jsx(Z,{path:"/portfolio",element:t.jsx(Fe,{})}),t.jsx(Z,{path:"/models",element:t.jsx(Qe,{})}),t.jsx(Z,{path:"/app",element:t.jsx(Je,{})}),t.jsx(Z,{path:"/data",element:t.jsx(Ye,{})}),t.jsx(Z,{path:"/integrations",element:t.jsx(Ze,{})}),t.jsx(Z,{path:"/canvas",element:t.jsx($e,{})}),t.jsx(Z,{path:"/private-analysis",element:t.jsx(Me,{})}),t.jsx(Z,{path:"/financial-inputs-demo",element:t.jsx(Ge,{})}),t.jsx(Z,{path:"/monitoring-debug",element:t.jsx(et,{})}),t.jsx(Z,{path:"*",element:t.jsx(Xe,{})})]})})})]})});function nt(){const{isVisible:a,hideDashboard:s}=function(){const[t,a]=e.useState(!1),s=e.useCallback(()=>{a(e=>!e)},[]),n=e.useCallback(()=>{a(!0)},[]),r=e.useCallback(()=>{a(!1)},[]);return e.useEffect(()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&"P"===e.key&&(e.preventDefault(),s())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[s]),e.useEffect(()=>{},[]),{isVisible:t,toggleDashboard:s,showDashboard:n,hideDashboard:r}}(),[n,r]=e.useState(!1),[i,o]=e.useState({path:window.location.pathname,timestamp:(new Date).toISOString()}),[l,c]=e.useState(null),[d,u]=e.useState(null);return e.useEffect(()=>{ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(e=>{e?.initializePerformanceMonitoring&&e.initializePerformanceMonitoring()}).catch(()=>{})},[]),e.useEffect(()=>{o({path:window.location.pathname,timestamp:(new Date).toISOString()})},[window.location.pathname]),t.jsx(he,{children:t.jsxs(fe,{children:[t.jsx(st,{}),t.jsx(xe,{isVisible:a,onClose:s}),t.jsx(ne,{isOpen:n,onToggle:()=>r(e=>!e),currentContext:i,portfolioData:l,marketData:d}),t.jsx(pe,{currentContext:i,portfolioData:l,marketData:d,onNavigate:e=>{window.location.href=e}}),!n&&t.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-20 right-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-full shadow-2xl hover:shadow-3xl transform hover:scale-105 transition-all duration-200 z-40",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]})})}const rt=X({name:"analysis",initialState:{financialData:null,adjustedValues:{},dcf:{inputs:null,results:null,status:"idle",error:null,lastCalculated:null},lbo:{inputs:null,results:null,status:"idle",error:null,lastCalculated:null},threeStatement:{inputs:null,results:null,status:"idle",error:null,lastCalculated:null},scenarios:{scenarios:[],results:null,status:"idle",error:null,lastCalculated:null},monteCarlo:{settings:{iterations:1e4,confidenceLevel:.95,correlationsEnabled:!0,crossModelAnalysis:!0},results:null,status:"idle",error:null,lastCalculated:null},correlations:{dcfLbo:null,dcfScenarios:null,lboScenarios:null},activeModel:"dcf",isDirty:!1,lastSaved:null,collaborators:[],isCollaborationEnabled:!1,calculationTimes:{},savedAnalyses:[]},reducers:{setFinancialData:(e,t)=>{e.financialData=t.payload,e.isDirty=!0},setAdjustedValues:(e,t)=>{e.adjustedValues=t.payload,e.isDirty=!0},setDcfInputs:(e,t)=>{e.dcf.inputs=t.payload,e.isDirty=!0},setDcfLoading:e=>{e.dcf.status="loading",e.dcf.error=null},setDcfResults:(e,t)=>{e.dcf.results=t.payload,e.dcf.status="succeeded",e.dcf.lastCalculated=(new Date).toISOString(),e.isDirty=!0},setDcfError:(e,t)=>{e.dcf.error=t.payload,e.dcf.status="failed"},setLboInputs:(e,t)=>{e.lbo.inputs=t.payload,e.isDirty=!0},setLboLoading:e=>{e.lbo.status="loading",e.lbo.error=null},setLboResults:(e,t)=>{e.lbo.results=t.payload,e.lbo.status="succeeded",e.lbo.lastCalculated=(new Date).toISOString(),e.isDirty=!0},setLboError:(e,t)=>{e.lbo.error=t.payload,e.lbo.status="failed"},setThreeStatementInputs:(e,t)=>{e.threeStatement.inputs=t.payload,e.isDirty=!0},setThreeStatementLoading:e=>{e.threeStatement.status="loading",e.threeStatement.error=null},setThreeStatementResults:(e,t)=>{e.threeStatement.results=t.payload,e.threeStatement.status="succeeded",e.threeStatement.lastCalculated=(new Date).toISOString(),e.isDirty=!0},setThreeStatementError:(e,t)=>{e.threeStatement.error=t.payload,e.threeStatement.status="failed"},setScenarios:(e,t)=>{e.scenarios.scenarios=t.payload,e.isDirty=!0},addScenario:(e,t)=>{e.scenarios.scenarios.push(t.payload),e.isDirty=!0},updateScenario:(e,t)=>{const{id:a,updates:s}=t.payload,n=e.scenarios.scenarios.findIndex(e=>e.id===a);-1!==n&&(e.scenarios.scenarios[n]={...e.scenarios.scenarios[n],...s},e.isDirty=!0)},removeScenario:(e,t)=>{e.scenarios.scenarios=e.scenarios.scenarios.filter(e=>e.id!==t.payload),e.isDirty=!0},setScenariosLoading:e=>{e.scenarios.status="loading",e.scenarios.error=null},setScenariosResults:(e,t)=>{e.scenarios.results=t.payload,e.scenarios.status="succeeded",e.scenarios.lastCalculated=(new Date).toISOString(),e.isDirty=!0},setScenariosError:(e,t)=>{e.scenarios.error=t.payload,e.scenarios.status="failed"},setMonteCarloSettings:(e,t)=>{e.monteCarlo.settings={...e.monteCarlo.settings,...t.payload},e.isDirty=!0},setMonteCarloLoading:e=>{e.monteCarlo.status="loading",e.monteCarlo.error=null},setMonteCarloResults:(e,t)=>{e.monteCarlo.results=t.payload,e.monteCarlo.status="succeeded",e.monteCarlo.lastCalculated=(new Date).toISOString(),e.isDirty=!0},setMonteCarloError:(e,t)=>{e.monteCarlo.error=t.payload,e.monteCarlo.status="failed"},setCorrelations:(e,t)=>{e.correlations={...e.correlations,...t.payload}},setActiveModel:(e,t)=>{e.activeModel=t.payload},saveAnalysis:(e,t)=>{const a={id:t.payload.id||Date.now().toString(),name:t.payload.name,timestamp:(new Date).toISOString(),financialData:e.financialData,adjustedValues:e.adjustedValues,models:{dcf:e.dcf,lbo:e.lbo,threeStatement:e.threeStatement,scenarios:e.scenarios,monteCarlo:e.monteCarlo},correlations:e.correlations},s=e.savedAnalyses.findIndex(e=>e.id===a.id);-1!==s?e.savedAnalyses[s]=a:e.savedAnalyses.push(a),e.isDirty=!1,e.lastSaved=a.timestamp},loadAnalysis:(e,t)=>{const a=t.payload;e.financialData=a.financialData,e.adjustedValues=a.adjustedValues,e.dcf=a.models?.dcf||e.dcf,e.lbo=a.models?.lbo||e.lbo,e.threeStatement=a.models?.threeStatement||e.threeStatement,e.scenarios=a.models?.scenarios||e.scenarios,e.monteCarlo=a.models?.monteCarlo||e.monteCarlo,e.correlations=a.correlations||{},e.isDirty=!1,e.lastSaved=a.timestamp},deleteAnalysis:(e,t)=>{e.savedAnalyses=e.savedAnalyses.filter(e=>e.id!==t.payload)},setCollaborators:(e,t)=>{e.collaborators=t.payload},enableCollaboration:e=>{e.isCollaborationEnabled=!0},disableCollaboration:e=>{e.isCollaborationEnabled=!1,e.collaborators=[]},recordCalculationTime:(e,t)=>{const{model:a,duration:s}=t.payload;e.calculationTimes[a]={lastDuration:s,timestamp:(new Date).toISOString()}},resetModel:(e,t)=>{e[t.payload]={inputs:null,results:null,status:"idle",error:null,lastCalculated:null},e.isDirty=!0},resetAll:e=>{Object.assign(e,rt.getInitialState())}}}),{setFinancialData:it,setAdjustedValues:ot,setDcfInputs:lt,setDcfLoading:ct,setDcfResults:dt,setDcfError:ut,setLboInputs:mt,setLboLoading:pt,setLboResults:ht,setLboError:gt,setThreeStatementInputs:yt,setThreeStatementLoading:xt,setThreeStatementResults:ft,setThreeStatementError:bt,setScenarios:vt,addScenario:wt,updateScenario:jt,removeScenario:Ct,setScenariosLoading:Nt,setScenariosResults:kt,setScenariosError:St,setMonteCarloSettings:Et,setMonteCarloLoading:At,setMonteCarloResults:_t,setMonteCarloError:Dt,setCorrelations:It,setActiveModel:Lt,saveAnalysis:Rt,loadAnalysis:Tt,deleteAnalysis:Pt,setCollaborators:Mt,enableCollaboration:Ot,disableCollaboration:Vt,recordCalculationTime:Ft,resetModel:$t,resetAll:zt}=rt.actions,Ut=e=>e.analysis.financialData,qt=e=>e.analysis.activeModel;ee({reducer:{analysis:rt.reducer},middleware:e=>e({serializableCheck:{ignoredActions:["analysis/saveAnalysis","analysis/loadAnalysis"],ignoredActionsPaths:["meta.arg","payload.timestamp"],ignoredPaths:["analysis.lastSaved","analysis.dcf.lastCalculated"]}}),devTools:!1});const Bt=rt.reducer,Wt=X({name:"user",initialState:{name:"Guest",isAuthenticated:!1},reducers:{login:(e,t)=>{e.name=t.payload.name,e.isAuthenticated=!0},logout:e=>{e.name="Guest",e.isAuthenticated=!1}}}),{login:Kt,logout:Ht}=Wt.actions,Gt=ee({reducer:{user:Wt.reducer,analysis:Bt},middleware:e=>e({serializableCheck:{ignoredActions:["analysis/saveAnalysis","analysis/loadAnalysis"],ignoredActionsPaths:["meta.arg","payload.timestamp"],ignoredPaths:["analysis.lastSaved","analysis.dcf.lastCalculated"]}}),devTools:!1});let Qt=null;function Jt(){const e=[];if("undefined"==typeof document)return e;const t=document.querySelectorAll("script:not([src]):not([nonce])");t.length>0&&e.push({type:"inline-script-without-nonce",count:t.length,elements:Array.from(t).slice(0,3)});const a=document.querySelectorAll("style:not([nonce])");return a.length>5&&e.push({type:"excessive-inline-styles",count:a.length,recommendation:"Consider consolidating CSS-in-JS styles"}),document.querySelectorAll("script[src]").forEach(t=>{const a=t.getAttribute("src");!a||a.startsWith("https://")||a.startsWith("/")||e.push({type:"insecure-external-script",src:a,element:t})}),e}const Yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Zt(e){navigator.serviceWorker.register(e).then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;null!=t&&t.addEventListener("statechange",()=>{"installed"===t.state&&(navigator.serviceWorker.controller?("Notification"in window&&"granted"===Notification.permission&&new Notification("FinanceAnalyst Pro Update Available",{body:"A new version is available. Refresh to update.",icon:"/assets/images/favicon.svg",badge:"/assets/images/favicon.svg",tag:"app-update"}),Xt("Update Available","A new version of FinanceAnalyst Pro is ready. Refresh to update.","info")):Xt("App Ready for Offline","FinanceAnalyst Pro is now available offline for core features.","success"))})})}).catch(e=>{})}function Xt(e,t,a="info"){const s=document.createElement("div");s.className=`\n    fixed top-4 right-4 z-50 max-w-sm p-4 rounded-lg shadow-lg\n    ${"success"===a?"bg-green-50 text-green-800 border border-green-200":""}\n    ${"warning"===a?"bg-yellow-50 text-yellow-800 border border-yellow-200":""}\n    ${"info"===a?"bg-blue-50 text-blue-800 border border-blue-200":""}\n    transition-all duration-300 transform translate-x-full\n  `,s.innerHTML=`\n    <div class="flex items-start">\n      <div class="flex-1">\n        <h4 class="font-medium text-sm">${e}</h4>\n        <p class="text-sm mt-1 opacity-90">${t}</p>\n      </div>\n      <button class="ml-3 text-sm opacity-60 hover:opacity-100" onclick="this.parentElement.parentElement.remove()">\n        ✕\n      </button>\n    </div>\n  `,document.body.appendChild(s),requestAnimationFrame(()=>{s.style.transform="translateX(0)"}),setTimeout(()=>{s.parentElement&&(s.style.transform="translateX(100%)",setTimeout(()=>s.remove(),300))},5e3)}let ea;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),ea=e,function(){const e=document.createElement("div");e.className="\n    fixed bottom-4 left-4 right-4 p-4 bg-blue-600 text-white rounded-lg shadow-lg\n    flex items-center justify-between z-50 max-w-md mx-auto\n  ",e.innerHTML='\n    <div class="flex-1">\n      <h4 class="font-medium text-sm">Install FinanceAnalyst Pro</h4>\n      <p class="text-sm opacity-90 mt-1">Get faster access and offline features</p>\n    </div>\n    <div class="flex items-center space-x-2 ml-3">\n      <button id="install-btn" class="bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-blue-50">\n        Install\n      </button>\n      <button id="dismiss-btn" class="text-white opacity-60 hover:opacity-100 text-sm">\n        ✕\n      </button>\n    </div>\n  ',document.body.appendChild(e),e.querySelector("#install-btn").addEventListener("click",async()=>{if(ea){ea.prompt();const{outcome:e}=await ea.userChoice;ea=null}e.remove()}),e.querySelector("#dismiss-btn").addEventListener("click",()=>{e.remove(),ea=null})}()}),window.addEventListener("appinstalled",()=>{Xt("App Installed","FinanceAnalyst Pro has been installed successfully!","success"),ea=null});const ta=document.getElementById("root");$.createRoot(ta).render(t.jsx(K,{level:"app",children:t.jsx(V,{store:Gt,children:t.jsx(nt,{})})}));const aa=(()=>{try{const e=new URLSearchParams(window.location.search);return!0===navigator.webdriver||e.has("lhci")||e.has("ci")||e.has("audit")}catch{return!0===navigator.webdriver}})();!function(){!function(e){"undefined"!=typeof document&&(document.querySelectorAll("script:not([src])").forEach(t=>{t.setAttribute("nonce",e)}),document.querySelectorAll("style").forEach(t=>{t.setAttribute("nonce",e)}))}((Qt||(Qt=function(){if("undefined"!=typeof window&&window.crypto){const e=new Uint8Array(16);return window.crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,e))}return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}()),Qt)),"undefined"!=typeof document&&document.addEventListener("securitypolicyviolation",e=>{var t;t={blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,originalPolicy:e.originalPolicy,disposition:e.disposition,timestamp:Date.now(),userAgent:navigator.userAgent,url:window.location.href},fetch("/api/csp-violations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(e=>{})});const e=Jt();e.length,setInterval(()=>{Jt().length,e.length},3e4)}(),function(){try{const e=new URLSearchParams(window.location.search);return!0===navigator.webdriver||e.has("lhci")||e.has("ci")||e.has("audit")||"0"===e.get("pwa")}catch{return!0===navigator.webdriver}}()||(function(){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/sw.js";Yt?(function(e){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{const a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Zt(e)}).catch(()=>{Xt("Offline Mode","You're currently offline. Some features may be limited.","warning")})}(e),navigator.serviceWorker.ready.then(()=>{})):Zt(e)})}}(),function(){function e(){const e=navigator.onLine;e?Xt("Connection Restored","You're back online. Syncing latest data...","success"):Xt("Connection Lost","You're now offline. Cached content will be used.","warning"),document.body.setAttribute("data-network-status",e?"online":"offline")}window.addEventListener("online",e),window.addEventListener("offline",e),e()}()),aa||(ae(()=>import("./react-core-CeHLCIBw.js").then(e=>e.aO),__vite__mapDeps([1,2,3,4,5,6,7,8,9,10])).then(e=>{e.init({dsn:"your_sentry_dsn_here",environment:"production",integrations:[e.browserTracingIntegration(),e.replayIntegration({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,beforeSend:e=>e}),window.Sentry=e}).catch(e=>{}),ae(()=>import("./performanceMonitoring-CCrMyQEC.js"),[]).then(e=>{e?.initializePerformanceMonitoring&&e.initializePerformanceMonitoring()}).catch(e=>{}),ae(()=>import("./productionMonitoring-CGv6PGu-.js"),[]).then(e=>{e?.default?.init&&e.default.init()}).catch(e=>{}),ae(()=>import("./monitoring-C8Ng3aqr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).catch(()=>{}));export{ne as A,pe as P,ae as _,oe as a,ie as b,ue as c,de as d,ce as e,le as f,ye as g,Ut as h,qt as i,it as j,ht as k,ft as l,_t as m,xe as n,se as s,Ee as u};
//# sourceMappingURL=index-DdNfTkp9.js.map
