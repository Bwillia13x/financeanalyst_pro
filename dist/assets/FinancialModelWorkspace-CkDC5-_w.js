import{r as e,j as a,F as s,a as t,Y as l,a4 as n,l as i,aL as r,y as o,m as c}from"./react-core-CeHLCIBw.js";import{b as d}from"./ui-vendor-B5RWaOCb.js";import"./vendor-D2fsnhsW.js";import"./ai-vendor-CuiosWbE.js";import"./advanced-analytics-y00dU25g.js";import"./utils-vendor-DUg4_aAP.js";import"./recharts-vendor-DQPXk1vH.js";import"./d3-vendor-DOBQrAlH.js";import"./react-dom-B6lyId6m.js";const b=({_data:b,_onDataChange:x})=>{const[m,h]=e.useState("income"),[p,y]=e.useState({revenue:[1e5,105e3,110250,115763,121551],costOfGoodsSold:[6e4,63e3,66150,69458,72931],grossProfit:[4e4,42e3,44100,46305,48620],operatingExpenses:[25e3,26250,27563,28941,30388],ebitda:[15e3,15750,16538,17364,18232],depreciation:[3e3,3150,3308,3473,3647],ebit:[12e3,12600,13230,13891,14585],interestExpense:[2e3,1800,1580,1340,1080],ebt:[1e4,10800,11650,12551,13505],taxes:[2100,2268,2447,2636,2836],netIncome:[7900,8532,9203,9915,10669],cash:[5e3,8532,12735,17650,23319],accountsReceivable:[8333,8750,9188,9647,10129],inventory:[1e4,10500,11025,11576,12155],totalCurrentAssets:[23333,27782,32948,38873,45603],ppe:[5e4,51850,53543,55070,56423],totalAssets:[73333,79632,86491,93943,102026],accountsPayable:[5e3,5250,5513,5789,6078],shortTermDebt:[3e3,2e3,1e3,0,0],totalCurrentLiabilities:[8e3,7250,6513,5789,6078],longTermDebt:[25e3,23e3,21e3,19e3,17e3],totalLiabilities:[33e3,30250,27513,24789,23078],shareholderEquity:[40333,49382,58978,69154,78948],totalLiabilitiesEquity:[73333,79632,86491,93943,102026],operatingCashFlow:[8567,10233,11345,12464,13584],capex:[-5e3,-4850,-5e3,-5e3,-5e3],investingCashFlow:[-5e3,-4850,-5e3,-5e3,-5e3],debtRepayment:[-2e3,-2e3,-2e3,-2e3,-2e3],financingCashFlow:[-2e3,-2e3,-2e3,-2e3,-2e3],netCashFlow:[1567,3383,4345,5464,6584],endingCash:[5e3,8383,12728,18192,24776]}),[u,g]=e.useState({revenueGrowthRate:.05,cogsPercentOfRevenue:.6,opexGrowthRate:.05,taxRate:.21,depreciationRate:.06,capexPercentOfRevenue:.05,debtPaydown:2e3}),[j,v]=e.useState([]),f=["Year 1","Year 2","Year 3","Year 4","Year 5"],N=e.useCallback(e=>e||0===e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(1e3*e):"$0",[]),w=e.useCallback(()=>{const e={...p};for(let s=1;s<5;s++){e.revenue[s]=e.revenue[s-1]*(1+u.revenueGrowthRate),e.costOfGoodsSold[s]=e.revenue[s]*u.cogsPercentOfRevenue,e.grossProfit[s]=e.revenue[s]-e.costOfGoodsSold[s],e.operatingExpenses[s]=e.operatingExpenses[s-1]*(1+u.opexGrowthRate),e.ebitda[s]=e.grossProfit[s]-e.operatingExpenses[s],e.depreciation[s]=e.ppe[s-1]*u.depreciationRate,e.ebit[s]=e.ebitda[s]-e.depreciation[s],e.interestExpense[s]=.06*e.longTermDebt[s-1],e.ebt[s]=e.ebit[s]-e.interestExpense[s],e.taxes[s]=Math.max(0,e.ebt[s]*u.taxRate),e.netIncome[s]=e.ebt[s]-e.taxes[s];const a=e.revenue[s]*u.capexPercentOfRevenue;e.ppe[s]=e.ppe[s-1]+a-e.depreciation[s],e.longTermDebt[s]=Math.max(0,e.longTermDebt[s-1]-u.debtPaydown),e.shortTermDebt[s]=Math.max(0,e.shortTermDebt[s-1]-1e3),e.accountsReceivable[s]=.083*e.revenue[s],e.inventory[s]=.1*e.costOfGoodsSold[s],e.accountsPayable[s]=.05*e.costOfGoodsSold[s];const t=e.accountsReceivable[s]-e.accountsReceivable[s-1]+(e.inventory[s]-e.inventory[s-1])-(e.accountsPayable[s]-e.accountsPayable[s-1]);e.operatingCashFlow[s]=e.netIncome[s]+e.depreciation[s]-t,e.capex[s]=-a,e.investingCashFlow[s]=e.capex[s],e.debtRepayment[s]=-u.debtPaydown,e.financingCashFlow[s]=e.debtRepayment[s],e.netCashFlow[s]=e.operatingCashFlow[s]+e.investingCashFlow[s]+e.financingCashFlow[s],e.endingCash[s]=e.cash[s-1]+e.netCashFlow[s],e.cash[s]=e.endingCash[s],e.totalCurrentAssets[s]=e.cash[s]+e.accountsReceivable[s]+e.inventory[s],e.totalAssets[s]=e.totalCurrentAssets[s]+e.ppe[s],e.totalCurrentLiabilities[s]=e.accountsPayable[s]+e.shortTermDebt[s],e.totalLiabilities[s]=e.totalCurrentLiabilities[s]+e.longTermDebt[s],e.shareholderEquity[s]=e.totalAssets[s]-e.totalLiabilities[s],e.totalLiabilitiesEquity[s]=e.totalLiabilities[s]+e.shareholderEquity[s]}y(e);const a=[];for(let s=0;s<5;s++)Math.abs(e.totalAssets[s]-e.totalLiabilitiesEquity[s])>1&&a.push(`Balance sheet doesn't balance in ${f[s]}`);v(a)},[p,u,f]),k=e.useCallback((e,a)=>{g(s=>({...s,[e]:parseFloat(a)||0}))},[]),C=[{id:"income",label:"Income Statement",icon:i},{id:"balance",label:"Balance Sheet",icon:r},{id:"cashflow",label:"Cash Flow",icon:o},{id:"assumptions",label:"Assumptions",icon:c}];return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(s,{className:"text-green-600",size:28}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"3-Statement Financial Model"}),a.jsx("p",{className:"text-gray-600",children:"Integrated Income Statement, Balance Sheet & Cash Flow"})]})]}),a.jsxs(d.button,{onClick:w,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center space-x-2",whileHover:{scale:1.02},children:[a.jsx(t,{size:16}),a.jsx("span",{children:"Recalculate"})]})]}),0===j.length?a.jsxs("div",{className:"mb-6 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[a.jsx(l,{className:"text-green-500 mr-2",size:20}),a.jsx("span",{className:"text-green-800 font-medium",children:"Model is balanced and consistent"})]}):a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(n,{className:"text-red-500 mr-2",size:20}),a.jsx("h3",{className:"font-semibold text-red-800",children:"Validation Errors"})]}),a.jsx("ul",{className:"text-sm text-red-700",children:j.map((e,s)=>a.jsxs("li",{children:["â€¢ ",e]},s))})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:C.map(e=>{const s=e.icon;return a.jsxs("button",{onClick:()=>h(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 "+(m===e.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[a.jsx(s,{size:16}),a.jsx("span",{children:e.label})]},e.id)})})}),"income"===m&&a.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-gray-300",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Income Statement ($000s)"}),f.map(e=>a.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:e},e))]})}),a.jsx("tbody",{children:[{label:"Revenue",key:"revenue"},{label:"Cost of Goods Sold",key:"costOfGoodsSold"},{label:"Gross Profit",key:"grossProfit"},{label:"Operating Expenses",key:"operatingExpenses"},{label:"EBITDA",key:"ebitda"},{label:"Depreciation",key:"depreciation"},{label:"EBIT",key:"ebit"},{label:"Interest Expense",key:"interestExpense"},{label:"EBT",key:"ebt"},{label:"Taxes",key:"taxes"},{label:"Net Income",key:"netIncome"}].map(e=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-2 px-4 font-medium",children:e.label}),p[e.key]?.map((e,s)=>a.jsx("td",{className:"text-right py-2 px-4",children:N(e)},s))]},e.key))})]})})}),"balance"===m&&a.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-gray-300",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Balance Sheet ($000s)"}),f.map(e=>a.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:e},e))]})}),a.jsxs("tbody",{children:[a.jsx("tr",{className:"bg-gray-100",children:a.jsx("td",{colSpan:6,className:"py-2 px-4 font-semibold",children:"ASSETS"})}),[{label:"Cash",key:"cash"},{label:"Accounts Receivable",key:"accountsReceivable"},{label:"Inventory",key:"inventory"},{label:"Total Current Assets",key:"totalCurrentAssets"},{label:"PP&E",key:"ppe"},{label:"Total Assets",key:"totalAssets"}].map(e=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-2 px-4",children:e.label}),p[e.key]?.map((e,s)=>a.jsx("td",{className:"text-right py-2 px-4",children:N(e)},s))]},e.key)),a.jsx("tr",{className:"bg-gray-100",children:a.jsx("td",{colSpan:6,className:"py-2 px-4 font-semibold",children:"LIABILITIES & EQUITY"})}),[{label:"Accounts Payable",key:"accountsPayable"},{label:"Short-term Debt",key:"shortTermDebt"},{label:"Total Current Liabilities",key:"totalCurrentLiabilities"},{label:"Long-term Debt",key:"longTermDebt"},{label:"Total Liabilities",key:"totalLiabilities"},{label:"Shareholder Equity",key:"shareholderEquity"},{label:"Total Liab. & Equity",key:"totalLiabilitiesEquity"}].map(e=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-2 px-4",children:e.label}),p[e.key]?.map((e,s)=>a.jsx("td",{className:"text-right py-2 px-4",children:N(e)},s))]},e.key))]})]})})}),"cashflow"===m&&a.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b-2 border-gray-300",children:[a.jsx("th",{className:"text-left py-3 px-4 font-semibold",children:"Cash Flow Statement ($000s)"}),f.map(e=>a.jsx("th",{className:"text-right py-3 px-4 font-semibold",children:e},e))]})}),a.jsx("tbody",{children:[{label:"Operating Cash Flow",key:"operatingCashFlow"},{label:"CapEx",key:"capex"},{label:"Investing Cash Flow",key:"investingCashFlow"},{label:"Debt Repayment",key:"debtRepayment"},{label:"Financing Cash Flow",key:"financingCashFlow"},{label:"Net Cash Flow",key:"netCashFlow"},{label:"Ending Cash",key:"endingCash"}].map(e=>a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("td",{className:"py-2 px-4",children:e.label}),p[e.key]?.map((e,s)=>a.jsx("td",{className:"text-right py-2 px-4",children:N(e)},s))]},e.key))})]})})}),"assumptions"===m&&a.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Key Assumptions"}),a.jsx("div",{className:"space-y-3",children:[{label:"Revenue Growth Rate (%)",key:"revenueGrowthRate",isPercent:!0},{label:"COGS % of Revenue",key:"cogsPercentOfRevenue",isPercent:!0},{label:"OpEx Growth Rate (%)",key:"opexGrowthRate",isPercent:!0},{label:"Tax Rate (%)",key:"taxRate",isPercent:!0},{label:"CapEx % of Revenue",key:"capexPercentOfRevenue",isPercent:!0},{label:"Annual Debt Paydown ($000s)",key:"debtPaydown",isPercent:!1}].map(e=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.label}),a.jsx("input",{type:"number",step:"0.01",value:e.isPercent?100*u[e.key]:u[e.key],onChange:a=>k(e.key,e.isPercent?(a.target.value||0)/100:a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]},e.key))})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"Model Metrics"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"5-Year Revenue CAGR:"}),a.jsxs("span",{className:"font-medium",children:[(100*(Math.pow(p.revenue[4]/p.revenue[0],1/4)-1)).toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"5-Year EBITDA CAGR:"}),a.jsxs("span",{className:"font-medium",children:[(100*(Math.pow(p.ebitda[4]/p.ebitda[0],1/4)-1)).toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Exit EBITDA Margin:"}),a.jsxs("span",{className:"font-medium",children:[(p.ebitda[4]/p.revenue[4]*100).toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Exit Debt/EBITDA:"}),a.jsxs("span",{className:"font-medium",children:[(p.longTermDebt[4]/p.ebitda[4]).toFixed(1),"x"]})]})]})]})]})})]})};export{b as default};
//# sourceMappingURL=FinancialModelWorkspace-CkDC5-_w.js.map
