{"version":3,"file":"ui-components-DUPitwH-.js","sources":["../../src/hooks/useCommandRegistry.js","../../src/components/CommandPalette/CommandPalette.jsx","../../src/components/AppIcon.jsx","../../src/components/ui/LoadingSpinner.jsx","../../src/components/ui/Breadcrumbs.jsx","../../src/components/ui/Button.jsx","../../src/components/ui/SkipLink.jsx","../../src/hooks/useKeyboardShortcuts.js","../../src/components/ui/Header.jsx","../../src/components/ui/Alert.jsx","../../src/components/ui/Badge.jsx","../../src/components/ui/Card.jsx","../../src/components/ui/Progress.jsx","../../src/components/ui/Input.jsx","../../src/components/ui/Select.jsx","../../src/components/ui/FinancialInput.jsx","../../src/components/ui/EditableCell.jsx","../../src/components/ui/CurrencyInput.jsx","../../src/components/ui/LoadingState.jsx","../../src/components/ui/ValidationFeedback.jsx","../../src/components/ui/ResponsiveTable.jsx"],"sourcesContent":["import {\n  Calculator,\n  TrendingUp,\n  BarChart3,\n  FileText,\n  Download,\n  Upload,\n  Search,\n  Save,\n  Settings,\n  HelpCircle,\n  Users,\n  Zap,\n  Globe,\n  PieChart,\n  LineChart,\n  Activity,\n  Target,\n  ArrowRight,\n  RefreshCw,\n  Filter,\n  Eye,\n  Edit,\n  Copy,\n  Trash2,\n  Plus\n} from 'lucide-react';\nimport { useState, useEffect, useMemo, useCallback } from 'react';\n\n// Natural language patterns for command matching\nconst NATURAL_LANGUAGE_PATTERNS = {\n  // Navigation patterns\n  navigation: [\n    { pattern: /(?:go to|navigate to|switch to|show me)\\s+(.+)/i, category: 'navigation' },\n    { pattern: /(?:open|view)\\s+(.+)/i, category: 'navigation' }\n  ],\n\n  // Analysis patterns\n  analysis: [\n    { pattern: /(?:create|new|build|make)\\s+(?:a\\s+)?(?:dcf|valuation|model)(?:\\s+for\\s+(.+))?/i, category: 'analysis', command: 'create-dcf' },\n    { pattern: /(?:run|perform|do)\\s+(?:a\\s+)?sensitivity\\s+(?:analysis\\s+)?(?:on\\s+(.+))?/i, category: 'analysis', command: 'sensitivity-analysis' },\n    { pattern: /(?:calculate|compute)\\s+(.+)/i, category: 'analysis' },\n    { pattern: /(?:analyze|analyse)\\s+(.+)/i, category: 'analysis' }\n  ],\n\n  // Data patterns\n  data: [\n    { pattern: /(?:find|search|look for)\\s+(.+)/i, category: 'data', command: 'search-data' },\n    { pattern: /(?:import|load)\\s+(.+)/i, category: 'data', command: 'import-data' },\n    { pattern: /(?:export|save|download)\\s+(.+)/i, category: 'export', command: 'export-data' }\n  ],\n\n  // Chart patterns\n  charts: [\n    { pattern: /(?:create|make|build|show)\\s+(?:a\\s+)?(?:chart|graph|plot)(?:\\s+for\\s+(.+))?/i, category: 'charts', command: 'create-chart' },\n    { pattern: /(?:visualize|plot)\\s+(.+)/i, category: 'charts', command: 'create-chart' }\n  ]\n};\n\n// Comprehensive command registry\nconst COMMAND_REGISTRY = {\n  // Navigation Commands\n  'go-to-data': {\n    id: 'go-to-data',\n    title: 'Go to Data Entry',\n    description: 'Navigate to financial data spreadsheet',\n    category: 'navigation',\n    icon: FileText,\n    shortcut: 'Ctrl+1',\n    keywords: ['data', 'spreadsheet', 'financial', 'entry', 'input'],\n    execute: (params, context) => ({ action: 'navigate', target: 'data' })\n  },\n\n  'go-to-modeling': {\n    id: 'go-to-modeling',\n    title: 'Go to Modeling Tools',\n    description: 'Navigate to financial modeling workspace',\n    category: 'navigation',\n    icon: Calculator,\n    shortcut: 'Ctrl+2',\n    keywords: ['modeling', 'tools', 'dcf', 'models'],\n    execute: (params, context) => ({ action: 'navigate', target: 'modeling' })\n  },\n\n  'go-to-analysis': {\n    id: 'go-to-analysis',\n    title: 'Go to Analysis Results',\n    description: 'View analysis results and outputs',\n    category: 'navigation',\n    icon: TrendingUp,\n    shortcut: 'Ctrl+3',\n    keywords: ['analysis', 'results', 'outputs', 'valuation'],\n    execute: (params, context) => ({ action: 'navigate', target: 'analysis' })\n  },\n\n  // Analysis Commands\n  'create-dcf': {\n    id: 'create-dcf',\n    title: 'Create New DCF Model',\n    description: 'Start a new discounted cash flow valuation model',\n    category: 'analysis',\n    icon: Calculator,\n    shortcut: 'Ctrl+N',\n    keywords: ['dcf', 'valuation', 'model', 'discounted', 'cash', 'flow', 'new', 'create'],\n    parameters: [\n      { name: 'company', type: 'string', description: 'Company ticker or name', optional: true }\n    ],\n    execute: (params, context) => ({\n      action: 'create-model',\n      type: 'dcf',\n      company: params?.company || 'New Model'\n    })\n  },\n\n  'sensitivity-analysis': {\n    id: 'sensitivity-analysis',\n    title: 'Run Sensitivity Analysis',\n    description: 'Perform sensitivity analysis on key assumptions',\n    category: 'analysis',\n    icon: Target,\n    shortcut: 'Ctrl+Shift+S',\n    keywords: ['sensitivity', 'analysis', 'assumptions', 'wacc', 'growth', 'test'],\n    parameters: [\n      { name: 'variable', type: 'string', description: 'Variable to analyze (WACC, growth rate, etc.)', optional: true }\n    ],\n    execute: (params, context) => ({\n      action: 'run-sensitivity',\n      variable: params?.variable || 'wacc'\n    })\n  },\n\n  'monte-carlo': {\n    id: 'monte-carlo',\n    title: 'Run Monte Carlo Simulation',\n    description: 'Perform Monte Carlo simulation on model',\n    category: 'analysis',\n    icon: Activity,\n    keywords: ['monte', 'carlo', 'simulation', 'probability', 'risk'],\n    execute: (params, context) => ({ action: 'run-monte-carlo' })\n  },\n\n  // Data Commands\n  'search-data': {\n    id: 'search-data',\n    title: 'Search Financial Data',\n    description: 'Find specific financial metrics or data points',\n    category: 'data',\n    icon: Search,\n    shortcut: 'Ctrl+F',\n    keywords: ['search', 'find', 'data', 'metrics', 'revenue', 'expenses'],\n    parameters: [\n      { name: 'query', type: 'string', description: 'What to search for', required: true }\n    ],\n    execute: (params, context) => ({\n      action: 'search',\n      query: params?.query\n    })\n  },\n\n  'import-data': {\n    id: 'import-data',\n    title: 'Import Financial Data',\n    description: 'Import data from Excel, CSV, or other sources',\n    category: 'data',\n    icon: Upload,\n    shortcut: 'Ctrl+I',\n    keywords: ['import', 'upload', 'excel', 'csv', 'data', 'file'],\n    execute: (params, context) => ({ action: 'import-data' })\n  },\n\n  'export-data': {\n    id: 'export-data',\n    title: 'Export Analysis',\n    description: 'Export current analysis to PDF, Excel, or PowerPoint',\n    category: 'export',\n    icon: Download,\n    shortcut: 'Ctrl+E',\n    keywords: ['export', 'download', 'pdf', 'excel', 'powerpoint', 'save'],\n    parameters: [\n      { name: 'format', type: 'string', description: 'Export format (PDF, Excel, PowerPoint)', optional: true }\n    ],\n    execute: (params, context) => ({\n      action: 'export',\n      format: params?.format || 'pdf'\n    })\n  },\n\n  // Chart Commands\n  'create-chart': {\n    id: 'create-chart',\n    title: 'Create Chart',\n    description: 'Create a visualization from your data',\n    category: 'charts',\n    icon: BarChart3,\n    keywords: ['chart', 'graph', 'visualization', 'plot', 'visualize'],\n    parameters: [\n      { name: 'type', type: 'string', description: 'Chart type (line, bar, pie, etc.)', optional: true },\n      { name: 'data', type: 'string', description: 'Data to visualize', optional: true }\n    ],\n    execute: (params, context) => ({\n      action: 'create-chart',\n      type: params?.type || 'line',\n      data: params?.data\n    })\n  },\n\n  'revenue-chart': {\n    id: 'revenue-chart',\n    title: 'Create Revenue Chart',\n    description: 'Visualize revenue trends over time',\n    category: 'charts',\n    icon: LineChart,\n    keywords: ['revenue', 'sales', 'income', 'trend', 'growth'],\n    execute: (params, context) => ({\n      action: 'create-chart',\n      type: 'line',\n      data: 'revenue'\n    })\n  },\n\n  'margin-analysis': {\n    id: 'margin-analysis',\n    title: 'Analyze Margins',\n    description: 'Create margin analysis visualization',\n    category: 'charts',\n    icon: PieChart,\n    keywords: ['margin', 'profitability', 'ebitda', 'operating', 'gross'],\n    execute: (params, context) => ({\n      action: 'create-chart',\n      type: 'bar',\n      data: 'margins'\n    })\n  },\n\n  // Company-specific commands (dynamic)\n  'company-apple': {\n    id: 'company-apple',\n    title: 'Analyze Apple (AAPL)',\n    description: 'Create analysis for Apple Inc.',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['apple', 'aapl', 'company', 'stock'],\n    execute: (params, context) => ({\n      action: 'create-model',\n      company: 'AAPL'\n    })\n  },\n\n  'company-microsoft': {\n    id: 'company-microsoft',\n    title: 'Analyze Microsoft (MSFT)',\n    description: 'Create analysis for Microsoft Corporation',\n    category: 'analysis',\n    icon: Calculator,\n    keywords: ['microsoft', 'msft', 'company', 'stock'],\n    execute: (params, context) => ({\n      action: 'create-model',\n      company: 'MSFT'\n    })\n  },\n\n  // Utility Commands\n  'save-analysis': {\n    id: 'save-analysis',\n    title: 'Save Current Analysis',\n    description: 'Save your current work',\n    category: 'data',\n    icon: Save,\n    shortcut: 'Ctrl+S',\n    keywords: ['save', 'store', 'backup'],\n    execute: (params, context) => ({ action: 'save' })\n  },\n\n  'toggle-insights': {\n    id: 'toggle-insights',\n    title: 'Toggle Insights Sidebar',\n    description: 'Show or hide contextual insights',\n    category: 'navigation',\n    icon: Eye,\n    keywords: ['insights', 'sidebar', 'toggle', 'show', 'hide'],\n    execute: (params, context) => ({ action: 'toggle-insights' })\n  },\n\n  'settings': {\n    id: 'settings',\n    title: 'Open Settings',\n    description: 'Configure application preferences',\n    category: 'settings',\n    icon: Settings,\n    keywords: ['settings', 'preferences', 'config', 'options'],\n    execute: (params, context) => ({ action: 'open-settings' })\n  },\n\n  'help': {\n    id: 'help',\n    title: 'Get Help',\n    description: 'Access help documentation and tutorials',\n    category: 'help',\n    icon: HelpCircle,\n    shortcut: 'F1',\n    keywords: ['help', 'documentation', 'tutorial', 'support'],\n    execute: (params, context) => ({ action: 'open-help' })\n  }\n};\n\nexport const useCommandRegistry = (currentContext = {}) => {\n  const [commandUsage, setCommandUsage] = useState(() => {\n    const saved = localStorage.getItem('commandUsage');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  const [userLearning, setUserLearning] = useState(() => {\n    const saved = localStorage.getItem('commandLearning');\n    return saved ? JSON.parse(saved) : {};\n  });\n\n  // Parse natural language query\n  const parseNaturalLanguage = useCallback((query) => {\n    const results = [];\n\n    for (const [category, patterns] of Object.entries(NATURAL_LANGUAGE_PATTERNS)) {\n      for (const pattern of patterns) {\n        const match = query.match(pattern.pattern);\n        if (match) {\n          results.push({\n            category: pattern.category,\n            command: pattern.command,\n            parameters: match.slice(1).filter(Boolean),\n            confidence: match[0].length / query.length\n          });\n        }\n      }\n    }\n\n    return results.sort((a, b) => b.confidence - a.confidence);\n  }, []);\n\n  // Search commands with intelligent matching\n  const searchCommands = useCallback((query) => {\n    if (!query.trim()) return [];\n\n    const normalizedQuery = query.toLowerCase().trim();\n    const results = [];\n\n    // First, try natural language parsing\n    const nlResults = parseNaturalLanguage(query);\n\n    // Score and rank commands\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      let score = 0;\n\n      // Exact title match\n      if (command.title.toLowerCase() === normalizedQuery) {\n        score += 100;\n      }\n\n      // Title contains query\n      if (command.title.toLowerCase().includes(normalizedQuery)) {\n        score += 50;\n      }\n\n      // Description contains query\n      if (command.description.toLowerCase().includes(normalizedQuery)) {\n        score += 30;\n      }\n\n      // Keyword matches\n      const keywordMatches = command.keywords.filter(keyword =>\n        keyword.toLowerCase().includes(normalizedQuery) ||\n        normalizedQuery.includes(keyword.toLowerCase())\n      );\n      score += keywordMatches.length * 20;\n\n      // Usage frequency boost\n      const usageCount = commandUsage[command.id] || 0;\n      score += Math.min(usageCount * 2, 20);\n\n      // Context relevance\n      if (currentContext.activeTab) {\n        if (command.category === 'navigation' && command.id.includes(currentContext.activeTab)) {\n          score += 15;\n        }\n        if (command.category === currentContext.activeTab) {\n          score += 10;\n        }\n      }\n\n      // Natural language match boost\n      const nlMatch = nlResults.find(nl => nl.command === command.id);\n      if (nlMatch) {\n        score += nlMatch.confidence * 40;\n      }\n\n      if (score > 0) {\n        results.push({\n          ...command,\n          score,\n          usageCount,\n          isRecommended: score > 60\n        });\n      }\n    });\n\n    return results\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 8); // Limit to top 8 results\n  }, [parseNaturalLanguage, commandUsage, currentContext]);\n\n  // Get contextual commands based on current state\n  const getContextualCommands = useCallback(() => {\n    const contextual = [];\n\n    // Based on active tab\n    switch (currentContext.activeTab) {\n      case 'data':\n      case 'spreadsheet':\n        contextual.push(\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['search-data'],\n          COMMAND_REGISTRY['go-to-modeling']\n        );\n        break;\n      case 'modeling':\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['sensitivity-analysis'],\n          COMMAND_REGISTRY['go-to-analysis']\n        );\n        break;\n      case 'analysis':\n        contextual.push(\n          COMMAND_REGISTRY['create-chart'],\n          COMMAND_REGISTRY['export-data'],\n          COMMAND_REGISTRY['sensitivity-analysis']\n        );\n        break;\n      default:\n        contextual.push(\n          COMMAND_REGISTRY['create-dcf'],\n          COMMAND_REGISTRY['import-data'],\n          COMMAND_REGISTRY['help']\n        );\n    }\n\n    // Add frequently used commands\n    const frequentCommands = Object.entries(commandUsage)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 2)\n      .map(([id]) => COMMAND_REGISTRY[id])\n      .filter(Boolean);\n\n    return [...contextual, ...frequentCommands].slice(0, 6);\n  }, [currentContext, commandUsage]);\n\n  // Execute command\n  const executeCommand = useCallback(async(commandId, params = {}) => {\n    const command = COMMAND_REGISTRY[commandId];\n    if (!command) {\n      throw new Error(`Command not found: ${commandId}`);\n    }\n\n    try {\n      const result = await command.execute(params, currentContext);\n\n      // Track usage\n      setCommandUsage(prev => ({\n        ...prev,\n        [commandId]: (prev[commandId] || 0) + 1\n      }));\n\n      return result;\n    } catch (error) {\n      console.error(`Command execution failed: ${commandId}`, error);\n      throw error;\n    }\n  }, [currentContext]);\n\n  // Learn from user behavior\n  const learnFromUsage = useCallback((commandId, query) => {\n    if (!query.trim()) return;\n\n    setUserLearning(prev => ({\n      ...prev,\n      [commandId]: {\n        ...prev[commandId],\n        queries: [...(prev[commandId]?.queries || []), query].slice(-5), // Keep last 5 queries\n        lastUsed: Date.now()\n      }\n    }));\n  }, []);\n\n  // Get command categories\n  const getCommandCategories = useCallback(() => {\n    const categories = {};\n    Object.values(COMMAND_REGISTRY).forEach(command => {\n      if (!categories[command.category]) {\n        categories[command.category] = [];\n      }\n      categories[command.category].push(command);\n    });\n    return categories;\n  }, []);\n\n  // Save usage data to localStorage\n  useEffect(() => {\n    localStorage.setItem('commandUsage', JSON.stringify(commandUsage));\n  }, [commandUsage]);\n\n  useEffect(() => {\n    localStorage.setItem('commandLearning', JSON.stringify(userLearning));\n  }, [userLearning]);\n\n  return {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories,\n    learnFromUsage,\n    parseNaturalLanguage,\n    commandRegistry: COMMAND_REGISTRY,\n    commandUsage,\n    userLearning\n  };\n};\n","import { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Search,\n  Command,\n  ArrowRight,\n  Clock,\n  Star,\n  TrendingUp,\n  Calculator,\n  FileText,\n  Download,\n  Upload,\n  BarChart3,\n  Users,\n  Zap,\n  Globe,\n  Settings,\n  HelpCircle\n} from 'lucide-react';\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\n\nimport { useCommandRegistry } from '../../hooks/useCommandRegistry';\n\nconst CommandPalette = ({\n  isOpen,\n  onClose,\n  onExecuteCommand,\n  currentContext = {},\n  recentCommands = [],\n  userPreferences = {}\n}) => {\n  const [query, setQuery] = useState('');\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [commandHistory, setCommandHistory] = useState([]);\n  const inputRef = useRef(null);\n  const listRef = useRef(null);\n\n  // Get command registry and search functionality\n  const {\n    searchCommands,\n    executeCommand,\n    getContextualCommands,\n    getCommandCategories,\n    learnFromUsage\n  } = useCommandRegistry(currentContext);\n\n  // Search results based on query\n  const searchResults = useMemo(() => {\n    if (!query.trim()) {\n      // Show recent commands and contextual suggestions when no query\n      const recent = recentCommands.slice(0, 3).map(cmd => ({ ...cmd, category: 'recent' }));\n      const contextual = getContextualCommands().slice(0, 4).map(cmd => ({ ...cmd, category: 'suggested' }));\n      const popular = [\n        {\n          id: 'new-dcf',\n          title: 'Create New DCF Model',\n          description: 'Start a new discounted cash flow valuation',\n          icon: Calculator,\n          category: 'popular',\n          keywords: ['dcf', 'valuation', 'model', 'new']\n        },\n        {\n          id: 'sensitivity-analysis',\n          title: 'Run Sensitivity Analysis',\n          description: 'Test assumptions with sensitivity analysis',\n          icon: TrendingUp,\n          category: 'popular',\n          keywords: ['sensitivity', 'analysis', 'wacc', 'assumptions']\n        }\n      ];\n\n      return [...recent, ...contextual, ...popular];\n    }\n\n    return searchCommands(query);\n  }, [query, recentCommands, searchCommands, getContextualCommands]);\n\n  // Reset selection when results change\n  useEffect(() => {\n    setSelectedIndex(0);\n  }, [searchResults]);\n\n  // Focus input when opened\n  useEffect(() => {\n    if (isOpen && inputRef.current) {\n      inputRef.current.focus();\n      setQuery('');\n      setSelectedIndex(0);\n    }\n  }, [isOpen]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const handleKeyDown = (e) => {\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prev => Math.min(prev + 1, searchResults.length - 1));\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prev => Math.max(prev - 1, 0));\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (searchResults[selectedIndex]) {\n            handleExecuteCommand(searchResults[selectedIndex]);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          onClose();\n          break;\n        default:\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, selectedIndex, searchResults, onClose]);\n\n  // Execute command\n  const handleExecuteCommand = async(command) => {\n    try {\n      // Add to command history\n      setCommandHistory(prev => [command, ...prev.slice(0, 9)]);\n\n      // Learn from usage\n      learnFromUsage(command.id, query);\n\n      // Execute the command\n      const result = await executeCommand(command.id, command.params);\n\n      // Notify parent component\n      if (onExecuteCommand) {\n        onExecuteCommand(command, result);\n      }\n\n      // Close palette\n      onClose();\n    } catch (error) {\n      console.error('Command execution failed:', error);\n      // Could show error toast here\n    }\n  };\n\n  // Get category icon\n  const getCategoryIcon = (category) => {\n    switch (category) {\n      case 'recent': return Clock;\n      case 'suggested': return Star;\n      case 'popular': return TrendingUp;\n      case 'navigation': return ArrowRight;\n      case 'analysis': return Calculator;\n      case 'data': return FileText;\n      case 'export': return Download;\n      case 'import': return Upload;\n      case 'charts': return BarChart3;\n      case 'collaboration': return Users;\n      case 'automation': return Zap;\n      case 'external': return Globe;\n      case 'settings': return Settings;\n      case 'help': return HelpCircle;\n      default: return Command;\n    }\n  };\n\n  // Get category color\n  const getCategoryColor = (category) => {\n    switch (category) {\n      case 'recent': return 'text-blue-500';\n      case 'suggested': return 'text-amber-500';\n      case 'popular': return 'text-emerald-500';\n      case 'navigation': return 'text-slate-500';\n      case 'analysis': return 'text-purple-500';\n      case 'data': return 'text-indigo-500';\n      case 'export': return 'text-green-500';\n      case 'import': return 'text-orange-500';\n      case 'charts': return 'text-pink-500';\n      case 'collaboration': return 'text-cyan-500';\n      case 'automation': return 'text-red-500';\n      case 'external': return 'text-gray-500';\n      case 'settings': return 'text-slate-600';\n      case 'help': return 'text-blue-600';\n      default: return 'text-slate-500';\n    }\n  };\n\n  // Highlight matching text\n  const highlightMatch = (text, query) => {\n    if (!query.trim()) return text;\n\n    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\n    const parts = text.split(regex);\n\n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-200 text-yellow-900 px-0.5 rounded\">\n          {part}\n        </mark>\n      ) : part\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center pt-20\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95, y: -20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: -20 }}\n          transition={{ type: 'spring', duration: 0.3 }}\n          className=\"bg-white rounded-xl shadow-2xl border border-slate-200 w-full max-w-2xl mx-4 overflow-hidden\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center gap-3 p-4 border-b border-slate-100 bg-slate-50\">\n            <div className=\"p-2 bg-blue-500 rounded-lg\">\n              <Command size={18} className=\"text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"font-semibold text-slate-900\">Command Palette</h3>\n              <p className=\"text-xs text-slate-500\">Type to search commands, or use natural language</p>\n            </div>\n            <div className=\"flex items-center gap-1 text-xs text-slate-500\">\n              <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded text-xs\">Esc</kbd>\n              <span>to close</span>\n            </div>\n          </div>\n\n          {/* Search Input */}\n          <div className=\"relative p-4 border-b border-slate-100\">\n            <div className=\"relative\">\n              <Search size={18} className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400\" />\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Search commands or describe what you want to do...\"\n                className=\"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-slate-900 placeholder-slate-500\"\n              />\n            </div>\n\n            {/* Quick tips */}\n            {!query && (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                <span className=\"text-xs text-slate-500\">Try:</span>\n                {['New DCF for AAPL', 'Run sensitivity on WACC', 'Export to PDF', 'Find revenue data'].map((tip) => (\n                  <button\n                    key={tip}\n                    onClick={() => setQuery(tip)}\n                    className=\"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded-md hover:bg-blue-100 transition-colors\"\n                  >\n                    \"{tip}\"\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Results */}\n          <div className=\"max-h-96 overflow-y-auto\" ref={listRef}>\n            {searchResults.length === 0 ? (\n              <div className=\"p-8 text-center\">\n                <div className=\"p-3 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center\">\n                  <Search size={24} className=\"text-slate-400\" />\n                </div>\n                <h4 className=\"font-medium text-slate-900 mb-2\">No commands found</h4>\n                <p className=\"text-sm text-slate-500\">\n                  Try a different search term or use natural language to describe what you want to do.\n                </p>\n              </div>\n            ) : (\n              <div className=\"py-2\">\n                {searchResults.map((command, index) => {\n                  const CategoryIcon = getCategoryIcon(command.category);\n                  const CommandIcon = command.icon;\n                  const isSelected = index === selectedIndex;\n\n                  return (\n                    <motion.div\n                      key={`${command.id}-${index}`}\n                      initial={{ opacity: 0, y: 10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.05 }}\n                      className={`flex items-center gap-3 px-4 py-3 cursor-pointer transition-all duration-150 ${\n                        isSelected\n                          ? 'bg-blue-50 border-r-2 border-blue-500'\n                          : 'hover:bg-slate-50'\n                      }`}\n                      onClick={() => handleExecuteCommand(command)}\n                    >\n                      {/* Category indicator */}\n                      <div\n                        className={`p-1.5 rounded-md ${\n                          isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                        }`}\n                      >\n                        <CategoryIcon size={12} className={getCategoryColor(command.category)} />\n                      </div>\n\n                      {/* Command icon */}\n                      {CommandIcon && (\n                        <div\n                          className={`p-2 rounded-lg ${\n                            isSelected ? 'bg-blue-100' : 'bg-slate-100'\n                          }`}\n                        >\n                          <CommandIcon\n                            size={16} className={\n                              isSelected ? 'text-blue-600' : 'text-slate-600'\n                            }\n                          />\n                        </div>\n                      )}\n\n                      {/* Command details */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4\n                            className={`font-medium truncate ${\n                              isSelected ? 'text-blue-900' : 'text-slate-900'\n                            }`}\n                          >\n                            {highlightMatch(command.title, query)}\n                          </h4>\n                          {command.shortcut && (\n                            <div className=\"flex items-center gap-1\">\n                              {command.shortcut.split('+').map((key, idx) => (\n                                <kbd key={idx} className=\"px-1.5 py-0.5 bg-slate-200 text-slate-600 text-xs rounded\">\n                                  {key}\n                                </kbd>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                        <p\n                          className={`text-sm truncate ${\n                            isSelected ? 'text-blue-700' : 'text-slate-500'\n                          }`}\n                        >\n                          {highlightMatch(command.description, query)}\n                        </p>\n\n                        {/* Command metadata */}\n                        <div className=\"flex items-center gap-3 mt-1\">\n                          <span\n                            className={`text-xs px-2 py-0.5 rounded-full ${\n                              isSelected ? 'bg-blue-100 text-blue-700' : 'bg-slate-100 text-slate-600'\n                            }`}\n                          >\n                            {command.category}\n                          </span>\n                          {command.usageCount && (\n                            <span className=\"text-xs text-slate-400\">\n                              Used {command.usageCount} times\n                            </span>\n                          )}\n                          {command.isNew && (\n                            <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">\n                              New\n                            </span>\n                          )}\n                        </div>\n                      </div>\n\n                      {/* Execute indicator */}\n                      {isSelected && (\n                        <motion.div\n                          initial={{ opacity: 0, x: -10 }}\n                          animate={{ opacity: 1, x: 0 }}\n                          className=\"text-blue-500\"\n                        >\n                          <ArrowRight size={16} />\n                        </motion.div>\n                      )}\n                    </motion.div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-between px-4 py-3 bg-slate-50 border-t border-slate-100 text-xs text-slate-500\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">↑↓</kbd>\n                <span>Navigate</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <kbd className=\"px-1.5 py-0.5 bg-white border border-slate-200 rounded\">Enter</kbd>\n                <span>Execute</span>\n              </div>\n            </div>\n            <div className=\"text-slate-400\">\n              {searchResults.length} command{searchResults.length !== 1 ? 's' : ''} available\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport default CommandPalette;\n","import * as LucideIcons from 'lucide-react';\nimport { HelpCircle } from 'lucide-react';\nimport PropTypes from 'prop-types';\n\nfunction Icon({\n  name,\n  size = 24,\n  color = 'currentColor',\n  className = '',\n  strokeWidth = 2,\n  ...props\n}) {\n  const IconComponent = LucideIcons[name];\n\n  if (!IconComponent) {\n    return (\n      <HelpCircle\n        size={size}\n        color=\"gray\"\n        strokeWidth={strokeWidth}\n        className={className}\n        {...props}\n      />\n    );\n  }\n\n  return (\n    <IconComponent\n      size={size}\n      color={color}\n      strokeWidth={strokeWidth}\n      className={className}\n      {...props}\n    />\n  );\n}\n\nIcon.propTypes = {\n  name: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  color: PropTypes.string,\n  className: PropTypes.string,\n  strokeWidth: PropTypes.number\n};\n\nexport default Icon;\n","import { cn } from '../../utils/cn';\n\nconst LoadingSpinner = ({\n  size = 'default',\n  className = '',\n  text = 'Loading...',\n  showText = true,\n  variant = 'primary'\n}) => {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    default: 'w-8 h-8',\n    lg: 'w-12 h-12',\n    xl: 'w-16 h-16'\n  };\n\n  const variantClasses = {\n    primary: 'text-primary',\n    secondary: 'text-secondary',\n    muted: 'text-muted-foreground',\n    white: 'text-white'\n  };\n\n  const textSizeClasses = {\n    sm: 'text-xs',\n    default: 'text-sm',\n    lg: 'text-base',\n    xl: 'text-lg'\n  };\n\n  return (\n    <div className={cn('flex flex-col items-center justify-center space-y-2', className)}>\n      <div\n        className={cn(\n          'animate-spin rounded-full border-2 border-current border-t-transparent',\n          sizeClasses[size],\n          variantClasses[variant]\n        )}\n      />\n      {showText && (\n        <p className={cn('font-medium', textSizeClasses[size], variantClasses[variant])}>{text}</p>\n      )}\n    </div>\n  );\n};\n\n// Full page loading spinner\nexport const FullPageLoader = ({ text = 'Loading Valor-IVX...' }) => {\n  return (\n    <div className=\"fixed inset-0 bg-background/80 backdrop-blur-sm z-50 flex items-center justify-center\">\n      <div className=\"bg-card border border-border rounded-lg p-8 shadow-elevation-2\">\n        <LoadingSpinner size=\"lg\" text={text} variant=\"primary\" />\n      </div>\n    </div>\n  );\n};\n\n// Inline loading spinner for buttons\nexport const ButtonSpinner = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'animate-spin rounded-full border-2 border-current border-t-transparent w-4 h-4',\n        className\n      )}\n    />\n  );\n};\n\n// Skeleton loader for content\nexport const SkeletonLoader = ({ lines = 3, className = '', animated = true }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {Array.from({ length: lines }).map((_, index) => (\n        <div\n          key={index}\n          className={cn(\n            'h-4 bg-muted rounded',\n            animated && 'animate-pulse',\n            index === lines - 1 && 'w-3/4' // Last line shorter\n          )}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Chart loading placeholder\nexport const ChartLoader = ({ className = '' }) => {\n  return (\n    <div\n      className={cn(\n        'flex items-center justify-center h-64 bg-muted/20 rounded-lg border-2 border-dashed border-muted',\n        className\n      )}\n    >\n      <div className=\"text-center space-y-2\">\n        <LoadingSpinner size=\"lg\" variant=\"muted\" showText={false} />\n        <p className=\"text-sm text-muted-foreground\">Loading chart data...</p>\n      </div>\n    </div>\n  );\n};\n\n// Table loading placeholder\nexport const TableLoader = ({ rows = 5, columns = 4, className = '' }) => {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Header */}\n      <div className=\"grid gap-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\n        {Array.from({ length: columns }).map((_, index) => (\n          <div key={`header-${index}`} className=\"h-6 bg-muted rounded animate-pulse\" />\n        ))}\n      </div>\n\n      {/* Rows */}\n      {Array.from({ length: rows }).map((_, rowIndex) => (\n        <div\n          key={`row-${rowIndex}`}\n          className=\"grid gap-4\"\n          style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}\n        >\n          {Array.from({ length: columns }).map((_, colIndex) => (\n            <div\n              key={`cell-${rowIndex}-${colIndex}`}\n              className=\"h-4 bg-muted/60 rounded animate-pulse\"\n            />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst LABELS = {\n  'financial-model-workspace': 'Workspace',\n  'real-time-market-data-center': 'Market Data',\n  'scenario-analysis-sensitivity-tools': 'Analysis',\n  'private-analysis': 'Private Analysis'\n};\n\nconst Breadcrumbs = () => {\n  const location = useLocation();\n  const segments = location.pathname.split('/').filter(Boolean);\n\n  const items = segments.map((seg, idx) => {\n    const path = `/${segments.slice(0, idx + 1).join('/')}`;\n    return {\n      label: LABELS[seg] || seg.replace(/-/g, ' ').replace(/\\b\\w/g, c => c.toUpperCase()),\n      path\n    };\n  });\n\n  return (\n    <nav aria-label=\"Breadcrumb\">\n      <ol className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n        <li>\n          <Link to=\"/\" className=\"hover:text-foreground\">Home</Link>\n        </li>\n        {items.map((item, idx) => (\n          <li key={item.path} className=\"flex items-center gap-2\">\n            <span aria-hidden=\"true\" className=\"text-muted-foreground\">/</span>\n            {idx < items.length - 1 ? (\n              <Link to={item.path} className=\"hover:text-foreground\">{item.label}</Link>\n            ) : (\n              <span className=\"text-foreground\" aria-current=\"page\">{item.label}</span>\n            )}\n          </li>\n        ))}\n      </ol>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n","import { Slot } from '@radix-ui/react-slot';\nimport { cva } from 'class-variance-authority';\nimport React from 'react';\n\nimport { cn } from '../../utils/cn';\nimport Icon from '../AppIcon';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n        success: 'bg-success text-success-foreground hover:bg-success/90',\n        warning: 'bg-warning text-warning-foreground hover:bg-warning/90',\n        danger: 'bg-error text-error-foreground hover:bg-error/90'\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n        xs: 'h-8 rounded-md px-2 text-xs',\n        xl: 'h-12 rounded-md px-10 text-base'\n      }\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default'\n    }\n  }\n);\n\nconst Button = React.forwardRef(\n  (\n    {\n      className,\n      variant,\n      size,\n      asChild = false,\n      children,\n      loading = false,\n      iconName = null,\n      iconPosition = 'left',\n      iconSize = null,\n      fullWidth = false,\n      disabled = false,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : 'button';\n\n    // Icon size mapping based on button size\n    const iconSizeMap = {\n      xs: 12,\n      sm: 14,\n      default: 16,\n      lg: 18,\n      xl: 20,\n      icon: 16\n    };\n\n    const calculatedIconSize = iconSize || iconSizeMap[size] || 16;\n\n    // Loading spinner\n    const LoadingSpinner = () => (\n      <svg\n        className=\"animate-spin -ml-1 mr-2 h-4 w-4\"\n        fill=\"none\"\n        viewBox=\"0 0 24 24\"\n        data-loading=\"true\"\n      >\n        <circle\n          className=\"opacity-25\"\n          cx=\"12\"\n          cy=\"12\"\n          r=\"10\"\n          stroke=\"currentColor\"\n          strokeWidth=\"4\"\n        />\n        <path\n          className=\"opacity-75\"\n          fill=\"currentColor\"\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n        />\n      </svg>\n    );\n\n    // Icon rendering\n    const renderIcon = () => {\n      if (!iconName) return null;\n\n      return (\n        <Icon\n          name={iconName}\n          size={calculatedIconSize}\n          className={cn(\n            children && iconPosition === 'left' && 'mr-2',\n            children && iconPosition === 'right' && 'ml-2'\n          )}\n        />\n      );\n    };\n\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }), fullWidth && 'w-full')}\n        ref={ref}\n        disabled={disabled || loading}\n        {...props}\n      >\n        {loading && <LoadingSpinner />}\n        {iconName && iconPosition === 'left' && renderIcon()}\n        {children}\n        {iconName && iconPosition === 'right' && renderIcon()}\n      </Comp>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n\nexport default Button;\n","import React from 'react';\n\nconst SkipLink = ({ href = '#main-content', children = 'Skip to main content' }) => {\n  return (\n    <a\n      href={href}\n      className=\"\n        sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4\n        bg-primary text-primary-foreground px-4 py-2 rounded-md z-[9999]\n        font-medium shadow-lg transition-all duration-200\n        focus:outline-2 focus:outline-blue-500 focus:outline-offset-2\n      \"\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default SkipLink;\n","import { useEffect, useCallback } from 'react';\n\n// Keyboard shortcut configuration\nconst SHORTCUT_CONFIG = {\n  // Command Palette\n  'cmd+k': { action: 'open-command-palette', description: 'Open command palette' },\n  'ctrl+k': { action: 'open-command-palette', description: 'Open command palette' },\n\n  // Navigation shortcuts\n  'ctrl+1': { action: 'navigate', target: 'data', description: 'Go to Data Entry' },\n  'ctrl+2': { action: 'navigate', target: 'modeling', description: 'Go to Modeling' },\n  'ctrl+3': { action: 'navigate', target: 'analysis', description: 'Go to Analysis' },\n\n  // Action shortcuts\n  'ctrl+n': { action: 'create-dcf', description: 'Create new DCF model' },\n  'ctrl+s': { action: 'save', description: 'Save current analysis' },\n  'ctrl+i': { action: 'import-data', description: 'Import data' },\n  'ctrl+e': { action: 'export-data', description: 'Export analysis' },\n  'ctrl+f': { action: 'search-data', description: 'Search data' },\n\n  // Analysis shortcuts\n  'ctrl+shift+s': { action: 'sensitivity-analysis', description: 'Run sensitivity analysis' },\n  'ctrl+shift+m': { action: 'monte-carlo', description: 'Run Monte Carlo simulation' },\n\n  // View shortcuts\n  'ctrl+shift+i': { action: 'toggle-insights', description: 'Toggle insights sidebar' },\n  'f1': { action: 'help', description: 'Open help' },\n\n  // Quick access\n  'alt+1': { action: 'quick-company', company: 'AAPL', description: 'Quick Apple analysis' },\n  'alt+2': { action: 'quick-company', company: 'MSFT', description: 'Quick Microsoft analysis' },\n  'alt+3': { action: 'quick-company', company: 'GOOGL', description: 'Quick Google analysis' },\n  'alt+4': { action: 'quick-company', company: 'AMZN', description: 'Quick Amazon analysis' }\n};\n\nexport const useKeyboardShortcuts = (handlers = {}) => {\n  // Normalize key combination\n  const normalizeKey = useCallback((event) => {\n    const parts = [];\n\n    if (event.metaKey || event.ctrlKey) {\n      parts.push(event.metaKey ? 'cmd' : 'ctrl');\n    }\n    if (event.altKey) parts.push('alt');\n    if (event.shiftKey) parts.push('shift');\n\n    // Handle special keys\n    let key = event.key.toLowerCase();\n    if (key === ' ') key = 'space';\n    if (key === 'escape') key = 'esc';\n    if (key === 'arrowup') key = 'up';\n    if (key === 'arrowdown') key = 'down';\n    if (key === 'arrowleft') key = 'left';\n    if (key === 'arrowright') key = 'right';\n\n    parts.push(key);\n\n    return parts.join('+');\n  }, []);\n\n  // Check if element should receive shortcuts\n  const shouldHandleShortcut = useCallback((target) => {\n    // Don't handle shortcuts when typing in inputs, textareas, or contenteditable elements\n    const tagName = target.tagName.toLowerCase();\n    const isEditable = target.contentEditable === 'true';\n    const isInput = ['input', 'textarea', 'select'].includes(tagName);\n\n    return !isInput && !isEditable;\n  }, []);\n\n  // Handle keyboard events\n  const handleKeyDown = useCallback((event) => {\n    // Check if we should handle this shortcut\n    if (!shouldHandleShortcut(event.target)) {\n      return;\n    }\n\n    const keyCombo = normalizeKey(event);\n    const shortcut = SHORTCUT_CONFIG[keyCombo];\n\n    if (shortcut) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      // Call the appropriate handler\n      const handler = handlers[shortcut.action];\n      if (handler) {\n        handler(shortcut);\n      } else {\n        console.warn(`No handler found for shortcut action: ${shortcut.action}`);\n      }\n    }\n  }, [normalizeKey, shouldHandleShortcut, handlers]);\n\n  // Register global keyboard event listener\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown, true);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, true);\n    };\n  }, [handleKeyDown]);\n\n  // Get all shortcuts for help display\n  const getAllShortcuts = useCallback(() => {\n    return Object.entries(SHORTCUT_CONFIG).map(([key, config]) => ({\n      key,\n      ...config\n    }));\n  }, []);\n\n  // Get shortcuts by category\n  const getShortcutsByCategory = useCallback(() => {\n    const categories = {\n      general: [],\n      navigation: [],\n      analysis: [],\n      data: [],\n      view: [],\n      quick: []\n    };\n\n    Object.entries(SHORTCUT_CONFIG).forEach(([key, config]) => {\n      const shortcut = { key, ...config };\n\n      if (config.action === 'navigate') {\n        categories.navigation.push(shortcut);\n      } else if (config.action.includes('analysis') || config.action === 'create-dcf' || config.action === 'monte-carlo') {\n        categories.analysis.push(shortcut);\n      } else if (config.action.includes('data') || config.action === 'import-data' || config.action === 'export-data') {\n        categories.data.push(shortcut);\n      } else if (config.action.includes('toggle') || config.action === 'help') {\n        categories.view.push(shortcut);\n      } else if (config.action === 'quick-company') {\n        categories.quick.push(shortcut);\n      } else {\n        categories.general.push(shortcut);\n      }\n    });\n\n    return categories;\n  }, []);\n\n  // Format key combination for display\n  const formatKeyCombo = useCallback((keyCombo) => {\n    return keyCombo\n      .split('+')\n      .map(key => {\n        switch (key) {\n          case 'cmd': return '⌘';\n          case 'ctrl': return 'Ctrl';\n          case 'alt': return 'Alt';\n          case 'shift': return 'Shift';\n          case 'space': return 'Space';\n          case 'esc': return 'Esc';\n          case 'up': return '↑';\n          case 'down': return '↓';\n          case 'left': return '←';\n          case 'right': return '→';\n          default: return key.toUpperCase();\n        }\n      })\n      .join(' + ');\n  }, []);\n\n  // Check if a key combination is available\n  const isShortcutAvailable = useCallback((keyCombo) => {\n    return !SHORTCUT_CONFIG[keyCombo.toLowerCase()];\n  }, []);\n\n  // Register a new shortcut (for dynamic shortcuts)\n  const registerShortcut = useCallback((keyCombo, config) => {\n    const normalizedKey = keyCombo.toLowerCase();\n    if (SHORTCUT_CONFIG[normalizedKey]) {\n      console.warn(`Shortcut ${keyCombo} is already registered`);\n      return false;\n    }\n\n    SHORTCUT_CONFIG[normalizedKey] = config;\n    return true;\n  }, []);\n\n  return {\n    getAllShortcuts,\n    getShortcutsByCategory,\n    formatKeyCombo,\n    isShortcutAvailable,\n    registerShortcut\n  };\n};\n","import React, { useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport Icon from '../AppIcon';\n\nimport Button from './Button';\nimport SkipLink from './SkipLink';\nimport Breadcrumbs from './Breadcrumbs';\nimport CommandPalette from '../CommandPalette/CommandPalette';\nimport { useKeyboardShortcuts } from '../../hooks/useKeyboardShortcuts';\n\nconst Header = () => {\n  const location = useLocation();\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n  const [isPaletteOpen, setIsPaletteOpen] = useState(false);\n\n  const navigationTabs = [\n    {\n      id: 'workspace',\n      label: 'Workspace',\n      path: '/financial-model-workspace',\n      tooltip: 'Primary financial modeling environment with terminal interface and formula builder'\n    },\n    {\n      id: 'market-data',\n      label: 'Market Data',\n      path: '/real-time-market-data-center',\n      tooltip: 'Real-time data aggregation from Bloomberg, FactSet, and Refinitiv feeds'\n    },\n    {\n      id: 'analysis',\n      label: 'Analysis',\n      path: '/scenario-analysis-sensitivity-tools',\n      tooltip: 'Scenario modeling and Monte Carlo simulation tools with sensitivity analysis'\n    },\n    {\n      id: 'private-analysis',\n      label: 'Private Analysis',\n      path: '/private-analysis',\n      tooltip: 'Manual financial data input and sophisticated modeling with spreadsheet-style interface'\n    }\n  ];\n\n  const quickActions = [\n    { id: 'export', icon: 'Download', label: 'Export' },\n    { id: 'share', icon: 'Share2', label: 'Share' },\n    { id: 'template', icon: 'FileTemplate', label: 'Template' }\n  ];\n\n  const getActiveTab = () => {\n    return navigationTabs.find(tab => location.pathname === tab.path);\n  };\n\n  const getDataSyncStatus = () => {\n    return {\n      status: 'connected',\n      lastUpdate: '2 min ago',\n      sources: {\n        bloomberg: 'connected',\n        factset: 'connected',\n        refinitiv: 'warning'\n      }\n    };\n  };\n\n  const getModelState = () => {\n    return {\n      name: 'DCF_Analysis_v2.3',\n      saved: true,\n      calculating: false,\n      version: '2.3',\n      lastSaved: 'Just now'\n    };\n  };\n\n  const dataSyncStatus = getDataSyncStatus();\n  const modelState = getModelState();\n  const activeTab = getActiveTab();\n\n  // Keyboard shortcut: open command palette (Cmd/Ctrl+K)\n  useKeyboardShortcuts({\n    'open-command-palette': () => setIsPaletteOpen(true)\n  });\n\n  // Environment indicator\n  const envMode = import.meta.env.MODE || 'development';\n  const envLabel = envMode === 'production' ? 'Production' : envMode === 'staging' ? 'Staging' : 'Development';\n  const envBadgeClass = envMode === 'production'\n    ? 'bg-green-100 text-green-800'\n    : envMode === 'staging'\n      ? 'bg-amber-100 text-amber-800'\n      : 'bg-slate-100 text-slate-800';\n\n  return (\n    <>\n      <SkipLink />\n      <header className=\"fixed top-0 left-0 right-0 z-[1000] bg-card border-b border-border h-[60px]\" role=\"banner\">\n        <div className=\"flex items-center h-full px-6\">\n          {/* Logo */}\n          <div className=\"flex items-center\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n                <Icon name=\"TrendingUp\" size={20} color=\"white\" />\n              </div>\n              <span className=\"text-xl font-semibold text-foreground\">Valor-IVX</span>\n            </div>\n          </div>\n\n          {/* Navigation Tabs */}\n          <nav className=\"flex items-center ml-8 space-x-1\" role=\"navigation\" aria-label=\"Main navigation\">\n            {navigationTabs.map(tab => (\n              <Link\n                key={tab.id}\n                to={tab.path}\n                className={`\n                relative px-6 py-3 text-sm font-medium transition-smooth rounded-lg\n                ${\n              location.pathname === tab.path\n                ? 'bg-primary text-primary-foreground'\n                : 'text-muted-foreground hover:text-foreground hover:bg-muted'\n              }\n              `}\n                title={tab.tooltip}\n              >\n                {tab.label}\n                {location.pathname === tab.path && (\n                  <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-primary-foreground rounded-full\" />\n                )}\n              </Link>\n            ))}\n          </nav>\n\n          {/* Model State Indicator */}\n          <div className=\"flex items-center ml-6 px-3 py-1 bg-muted rounded-lg\">\n            <div className=\"flex items-center space-x-2\">\n              <div\n                className={`w-2 h-2 rounded-full ${modelState.saved ? 'bg-success' : 'bg-warning'}`}\n              />\n              <span className=\"text-sm font-mono text-muted-foreground\">{modelState.name}</span>\n              <span className=\"text-xs text-muted-foreground\">v{modelState.version}</span>\n            </div>\n          </div>\n\n          {/* Right Side */}\n          <div className=\"flex items-center ml-auto space-x-4\">\n            {/* Data Sync Status */}\n            <div className=\"flex items-center space-x-2 px-3 py-1 bg-muted rounded-lg\">\n              <div\n                className={`w-2 h-2 rounded-full ${\n                  dataSyncStatus.status === 'connected'\n                    ? 'bg-success'\n                    : dataSyncStatus.status === 'warning'\n                      ? 'bg-warning'\n                      : 'bg-error'\n                }`}\n              />\n              <span className=\"text-xs text-muted-foreground\">Data: {dataSyncStatus.lastUpdate}</span>\n              <Icon name=\"Wifi\" size={14} className=\"text-muted-foreground\" />\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"flex items-center space-x-1\">\n              {quickActions.map(action => (\n                <Button\n                  key={action.id}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  iconName={action.icon}\n                  className=\"text-muted-foreground hover:text-foreground\"\n                  title={action.label}\n                >\n                  <span className=\"sr-only\">{action.label}</span>\n                </Button>\n              ))}\n              {/* Command Palette trigger */}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                iconName=\"Search\"\n                className=\"text-muted-foreground hover:text-foreground\"\n                title=\"Open Command Palette (Cmd/Ctrl+K)\"\n                onClick={() => setIsPaletteOpen(true)}\n              >\n                <span className=\"sr-only\">Open Command Palette</span>\n              </Button>\n              <div className=\"hidden md:flex items-center gap-1 text-xs text-muted-foreground\" aria-hidden=\"true\">\n                <kbd className=\"px-1.5 py-0.5 bg-background border border-border rounded\">⌘K</kbd>\n              </div>\n            </div>\n\n            {/* User Context Panel */}\n            <div className=\"relative\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\n                className=\"flex items-center space-x-2 text-muted-foreground hover:text-foreground\"\n              >\n                <div className=\"w-8 h-8 bg-secondary rounded-full flex items-center justify-center\">\n                  <Icon name=\"User\" size={16} color=\"white\" />\n                </div>\n                <div className=\"hidden md:flex flex-col items-start\">\n                  <span className=\"text-sm font-medium\">Senior Analyst</span>\n                  <span className=\"text-xs text-muted-foreground\">Active Session</span>\n                </div>\n                <Icon name=\"ChevronDown\" size={16} />\n              </Button>\n\n              {/* User Dropdown */}\n              {isUserMenuOpen && (\n                <div className=\"absolute right-0 top-full mt-2 w-64 bg-popover border border-border rounded-lg shadow-elevation-2 z-[1100]\">\n                  <div className=\"p-4 border-b border-border\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-secondary rounded-full flex items-center justify-center\">\n                        <Icon name=\"User\" size={20} color=\"white\" />\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-popover-foreground\">John Anderson</p>\n                        <p className=\"text-sm text-muted-foreground\">Senior Investment Analyst</p>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"p-2\">\n                    <div className=\"space-y-1\">\n                      <button className=\"w-full text-left px-3 py-2 text-sm text-popover-foreground hover:bg-muted rounded-md transition-smooth\">\n                        Profile Settings\n                      </button>\n                      <button className=\"w-full text-left px-3 py-2 text-sm text-popover-foreground hover:bg-muted rounded-md transition-smooth\">\n                        Permissions\n                      </button>\n                      <button className=\"w-full text-left px-3 py-2 text-sm text-popover-foreground hover:bg-muted rounded-md transition-smooth\">\n                        Active Collaborators (3)\n                      </button>\n                      <div className=\"border-t border-border my-1\" />\n                      <button className=\"w-full text-left px-3 py-2 text-sm text-destructive hover:bg-muted rounded-md transition-smooth\">\n                        Sign Out\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Status strip with breadcrumbs and indicators */}\n      <div className=\"fixed top-[60px] left-0 right-0 z-[995] bg-card border-b border-border h-[28px]\">\n        <div className=\"flex items-center justify-between h-full px-6 text-xs\">\n          {/* Breadcrumbs */}\n          <div className=\"truncate text-muted-foreground\">\n            <Breadcrumbs />\n          </div>\n          {/* Indicators */}\n          <div className=\"flex items-center gap-3\">\n            {/* Save state */}\n            <div className=\"flex items-center gap-2 px-2 py-0.5 bg-muted rounded-md\">\n              <span className={`w-2 h-2 rounded-full ${modelState.saved ? 'bg-success' : 'bg-warning'}`} />\n              <span className=\"text-muted-foreground\">{modelState.saved ? `Saved • ${modelState.lastSaved}` : 'Unsaved changes'}</span>\n            </div>\n            {/* Data freshness */}\n            <div className=\"flex items-center gap-2 px-2 py-0.5 bg-muted rounded-md\">\n              <span className={`w-2 h-2 rounded-full ${\n                dataSyncStatus.status === 'connected' ? 'bg-success' : dataSyncStatus.status === 'warning' ? 'bg-warning' : 'bg-error'\n              }`} />\n              <span className=\"text-muted-foreground\">Data • {dataSyncStatus.lastUpdate}</span>\n            </div>\n            {/* Environment */}\n            <div className={`px-2 py-0.5 rounded-md ${envBadgeClass}`} title={`Environment: ${envLabel}`}>\n              {envLabel}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Command Palette */}\n      <CommandPalette\n        isOpen={isPaletteOpen}\n        onClose={() => setIsPaletteOpen(false)}\n      />\n    </>\n  );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\n/**\n * Minimal alert component group with shadcn-like API used only in a few internal pages.\n * Allows import { Alert, AlertDescription } from \"components/ui/Alert\".\n */\nconst Alert = React.forwardRef(({ className = 'relative w-full rounded-lg border p-4', ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    {...props}\n    className={cn('bg-card text-card-foreground', className)}\n  />\n));\nAlert.displayName = 'Alert';\n\nconst AlertDescription = React.forwardRef(({ className = 'text-sm [&_p]:leading-relaxed', ...props }, ref) => (\n  <div ref={ref} className={cn(className)} {...props} />\n));\nAlertDescription.displayName = 'AlertDescription';\n\nexport { Alert, AlertDescription };\nexport default Alert;\n","import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\n/**\n * Minimal Badge component used only for tests / non-critical UI.\n * Provides a semantic <span> element with utility classes similar to shadcn/ui.\n */\nconst Badge = React.forwardRef(\n  (\n    {\n      className = 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-muted text-foreground',\n      variant = 'default', // 'default' | 'outline'\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const variantClass =\n      variant === 'outline'\n        ? 'border border-input bg-transparent'\n        : 'bg-primary text-primary-foreground';\n\n    return (\n      <span ref={ref} className={cn(className, variantClass)} {...props}>\n        {children}\n      </span>\n    );\n  }\n);\nBadge.displayName = 'Badge';\n\nexport { Badge };\nexport default Badge;\n","import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst Card = React.forwardRef(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn('rounded-lg border bg-card text-card-foreground shadow-sm', className)}\n    {...props}\n  />\n));\nCard.displayName = 'Card';\n\nconst CardHeader = React.forwardRef(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('flex flex-col space-y-1.5 p-6', className)} {...props} />\n));\nCardHeader.displayName = 'CardHeader';\n\nconst CardTitle = React.forwardRef(({ className, ...props }, ref) => (\n  <h3 ref={ref} className={cn('text-2xl font-semibold leading-none tracking-tight', className)} {...props} />\n));\nCardTitle.displayName = 'CardTitle';\n\nconst CardDescription = React.forwardRef(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n));\nCardDescription.displayName = 'CardDescription';\n\nconst CardContent = React.forwardRef(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />\n));\nCardContent.displayName = 'CardContent';\n\nconst CardFooter = React.forwardRef(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn('flex items-center p-6 pt-0', className)} {...props} />\n));\nCardFooter.displayName = 'CardFooter';\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\n/**\n * Simple progress bar component.\n * Accepts `value` (0-100) and optional className.\n */\nconst Progress = React.forwardRef(({ value = 0, className = 'h-1 bg-muted', ...props }, ref) => {\n  const clamped = Math.min(100, Math.max(0, value));\n  return (\n    <div ref={ref} className={cn('w-full rounded bg-muted/50', className)} {...props}>\n      <div\n        className=\"h-full rounded bg-primary transition-all\"\n        style={{ width: `${clamped}%` }}\n      />\n    </div>\n  );\n});\n\nProgress.displayName = 'Progress';\n\nexport { Progress };\nexport default Progress;\n","import React from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst Input = React.forwardRef(\n  (\n    { className, type = 'text', label, description, error, required = false, id, ...props },\n    ref\n  ) => {\n    // Generate unique ID if not provided\n    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Base input classes\n    const baseInputClasses =\n      'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50';\n\n    // Checkbox-specific styles\n    if (type === 'checkbox') {\n      return (\n        <input\n          type=\"checkbox\"\n          className={cn(\n            'h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n            className\n          )}\n          ref={ref}\n          id={inputId}\n          {...props}\n        />\n      );\n    }\n\n    // Radio button-specific styles\n    if (type === 'radio') {\n      return (\n        <input\n          type=\"radio\"\n          className={cn(\n            'h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n            className\n          )}\n          ref={ref}\n          id={inputId}\n          {...props}\n        />\n      );\n    }\n\n    // For regular inputs with wrapper structure\n    return (\n      <div className=\"space-y-2\">\n        {label && (\n          <label\n            htmlFor={inputId}\n            className={cn(\n              'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n              error ? 'text-destructive' : 'text-foreground'\n            )}\n          >\n            {label}\n            {required && <span className=\"text-destructive ml-1\">*</span>}\n          </label>\n        )}\n\n        <input\n          type={type}\n          className={cn(\n            baseInputClasses,\n            error && 'border-destructive focus-visible:ring-destructive',\n            className\n          )}\n          ref={ref}\n          id={inputId}\n          {...props}\n        />\n\n        {description && !error && <p className=\"text-sm text-muted-foreground\">{description}</p>}\n\n        {error && <p className=\"text-sm text-destructive\">{error}</p>}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n\nexport default Input;\n","// components/ui/Select.jsx - Shadcn style Select\nimport { ChevronDown, Check, Search, X } from 'lucide-react';\nimport React, { useState } from 'react';\n\nimport { cn } from '../../utils/cn';\n\nimport Button from './Button';\nimport Input from './Input';\n\nconst Select = React.forwardRef(\n  (\n    {\n      className,\n      options = [],\n      value,\n      defaultValue,\n      placeholder = 'Select an option',\n      multiple = false,\n      disabled = false,\n      required = false,\n      label,\n      description,\n      error,\n      searchable = false,\n      clearable = false,\n      loading = false,\n      id,\n      name,\n      onChange,\n      onOpenChange,\n      ...props\n    },\n    ref\n  ) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const [searchTerm, setSearchTerm] = useState('');\n\n    // Generate unique ID if not provided\n    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Filter options based on search\n    const filteredOptions =\n      searchable && searchTerm\n        ? options.filter(\n          option =>\n            option.label.toLowerCase().includes(searchTerm.toLowerCase()) ||\n              (option.value &&\n                option.value.toString().toLowerCase().includes(searchTerm.toLowerCase()))\n        )\n        : options;\n\n    // Get selected option(s) for display\n    const getSelectedDisplay = () => {\n      if (!value) return placeholder;\n\n      if (multiple) {\n        const selectedOptions = options.filter(opt => value.includes(opt.value));\n        if (selectedOptions.length === 0) return placeholder;\n        if (selectedOptions.length === 1) return selectedOptions[0].label;\n        return `${selectedOptions.length} items selected`;\n      }\n\n      const selectedOption = options.find(opt => opt.value === value);\n      return selectedOption ? selectedOption.label : placeholder;\n    };\n\n    const handleToggle = () => {\n      if (!disabled) {\n        const newIsOpen = !isOpen;\n        setIsOpen(newIsOpen);\n        onOpenChange?.(newIsOpen);\n        if (!newIsOpen) {\n          setSearchTerm('');\n        }\n      }\n    };\n\n    const handleOptionSelect = option => {\n      if (multiple) {\n        const newValue = value || [];\n        const updatedValue = newValue.includes(option.value)\n          ? newValue.filter(v => v !== option.value)\n          : [...newValue, option.value];\n        onChange?.(updatedValue);\n      } else {\n        onChange?.(option.value);\n        setIsOpen(false);\n        onOpenChange?.(false);\n      }\n    };\n\n    const handleClear = e => {\n      e.stopPropagation();\n      onChange?.(multiple ? [] : '');\n    };\n\n    const handleSearchChange = e => {\n      setSearchTerm(e.target.value);\n    };\n\n    const isSelected = optionValue => {\n      if (multiple) {\n        return value?.includes(optionValue) || false;\n      }\n      return value === optionValue;\n    };\n\n    const hasValue = multiple ? value?.length > 0 : value !== undefined && value !== '';\n\n    return (\n      <div className={cn('relative', className)}>\n        {label && (\n          <label\n            htmlFor={selectId}\n            className={cn(\n              'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block',\n              error ? 'text-destructive' : 'text-foreground'\n            )}\n          >\n            {label}\n            {required && <span className=\"text-destructive ml-1\">*</span>}\n          </label>\n        )}\n\n        <div className=\"relative\">\n          <button\n            ref={ref}\n            id={selectId}\n            type=\"button\"\n            className={cn(\n              'flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50',\n              error && 'border-destructive focus:ring-destructive',\n              !hasValue && 'text-muted-foreground'\n            )}\n            onClick={handleToggle}\n            disabled={disabled}\n            aria-expanded={isOpen}\n            aria-haspopup=\"listbox\"\n            {...props}\n          >\n            <span className=\"truncate\">{getSelectedDisplay()}</span>\n\n            <div className=\"flex items-center gap-1\">\n              {loading && (\n                <svg className=\"animate-spin h-4 w-4\" viewBox=\"0 0 24 24\">\n                  <circle\n                    className=\"opacity-25\"\n                    cx=\"12\"\n                    cy=\"12\"\n                    r=\"10\"\n                    stroke=\"currentColor\"\n                    strokeWidth=\"4\"\n                    fill=\"none\"\n                  />\n                  <path\n                    className=\"opacity-75\"\n                    fill=\"currentColor\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                  />\n                </svg>\n              )}\n\n              {clearable && hasValue && !loading && (\n                <Button\n                  variant=\"ghost\" size=\"icon\" className=\"h-4 w-4\"\n                  onClick={handleClear}\n                >\n                  <X className=\"h-3 w-3\" />\n                </Button>\n              )}\n\n              <ChevronDown className={cn('h-4 w-4 transition-transform', isOpen && 'rotate-180')} />\n            </div>\n          </button>\n\n          {/* Hidden native select for form submission */}\n          <select\n            name={name}\n            value={value || ''}\n            onChange={() => {}} // Controlled by our custom logic\n            className=\"sr-only\"\n            tabIndex={-1}\n            multiple={multiple}\n            required={required}\n          >\n            <option value=\"\">Select...</option>\n            {options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n\n          {/* Dropdown */}\n          {isOpen && (\n            <div className=\"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md\">\n              {searchable && (\n                <div className=\"p-2 border-b\">\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\n                    <Input\n                      placeholder=\"Search options...\"\n                      value={searchTerm}\n                      onChange={handleSearchChange}\n                      className=\"pl-8\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              <div className=\"py-1 max-h-60 overflow-auto\">\n                {filteredOptions.length === 0 ? (\n                  <div className=\"px-3 py-2 text-sm text-muted-foreground\">\n                    {searchTerm ? 'No options found' : 'No options available'}\n                  </div>\n                ) : (\n                  filteredOptions.map(option => (\n                    <div\n                      key={option.value}\n                      className={cn(\n                        'relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground',\n                        isSelected(option.value) && 'bg-primary text-primary-foreground',\n                        option.disabled && 'pointer-events-none opacity-50'\n                      )}\n                      onClick={() => !option.disabled && handleOptionSelect(option)}\n                    >\n                      <span className=\"flex-1\">{option.label}</span>\n                      {multiple && isSelected(option.value) && <Check className=\"h-4 w-4\" />}\n                      {option.description && (\n                        <span className=\"text-xs text-muted-foreground ml-2\">\n                          {option.description}\n                        </span>\n                      )}\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {description && !error && (\n          <p className=\"text-sm text-muted-foreground mt-1\">{description}</p>\n        )}\n\n        {error && <p className=\"text-sm text-destructive mt-1\">{error}</p>}\n      </div>\n    );\n  }\n);\n\nSelect.displayName = 'Select';\n\nexport default Select;\n","import { AlertCircle, Calculator, DollarSign, Percent } from 'lucide-react';\nimport React, { useState, useEffect, useRef } from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst FinancialInput = React.forwardRef(({\n  className,\n  label,\n  value,\n  onChange,\n  onBlur,\n  placeholder = '0.00',\n  type = 'currency', // 'currency', 'percentage', 'number'\n  prefix,\n  suffix,\n  locale = 'en-US',\n  currency = 'USD',\n  error,\n  description,\n  required = false,\n  disabled = false,\n  loading = false,\n  decimals = 2,\n  allowNegative = true,\n  id,\n  autoFocus = false,\n  onValidation,\n  min,\n  max,\n  ...props\n}, ref) => {\n  const [displayValue, setDisplayValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n  const inputRef = useRef(null);\n  const componentRef = ref || inputRef;\n\n  // Generate unique ID if not provided\n  const inputId = id || `financial-input-${Math.random().toString(36).substr(2, 9)}`;\n\n  // Format value for display\n  const formatValue = (val) => {\n    if (!val && val !== 0) return '';\n\n    const numValue = typeof val === 'string' ? parseFloat(val) : val;\n    if (isNaN(numValue)) return '';\n\n    switch (type) {\n      case 'currency':\n        return new Intl.NumberFormat(locale, {\n          style: 'currency',\n          currency,\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue);\n\n      case 'percentage':\n        return new Intl.NumberFormat(locale, {\n          style: 'percent',\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue / 100);\n\n      default:\n        return new Intl.NumberFormat(locale, {\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue);\n    }\n  };\n\n  // Parse display value to raw number\n  const parseValue = (val) => {\n    if (!val) return 0;\n\n    // Remove currency symbols, commas, and spaces\n    const cleanValue = val\n      .replace(/[^\\d.-]/g, '')\n      .replace(/,/g, '');\n\n    const numValue = parseFloat(cleanValue);\n    return isNaN(numValue) ? 0 : numValue;\n  };\n\n  // Validate input\n  const validateInput = (val) => {\n    const numValue = typeof val === 'string' ? parseValue(val) : val;\n\n    let valid = true;\n    let errorMessage = '';\n\n    if (required && (!numValue && numValue !== 0)) {\n      valid = false;\n      errorMessage = 'This field is required';\n    } else if (!allowNegative && numValue < 0) {\n      valid = false;\n      errorMessage = 'Negative values are not allowed';\n    } else if (min !== undefined && numValue < min) {\n      valid = false;\n      errorMessage = `Value must be at least ${formatValue(min)}`;\n    } else if (max !== undefined && numValue > max) {\n      valid = false;\n      errorMessage = `Value must not exceed ${formatValue(max)}`;\n    }\n\n    setIsValid(valid);\n\n    if (onValidation) {\n      onValidation(valid, errorMessage);\n    }\n\n    return valid;\n  };\n\n  // Update display value when prop value changes\n  useEffect(() => {\n    if (!isFocused) {\n      setDisplayValue(formatValue(value));\n    }\n  }, [value, type, currency, locale, decimals, isFocused]);\n\n  // Handle focus\n  const handleFocus = (e) => {\n    setIsFocused(true);\n    // Show raw number for editing\n    const rawValue = value ? value.toString() : '';\n    setDisplayValue(rawValue);\n\n    // Select all text for easy replacement\n    setTimeout(() => {\n      if (componentRef.current) {\n        componentRef.current.select();\n      }\n    }, 0);\n  };\n\n  // Handle blur\n  const handleBlur = (e) => {\n    setIsFocused(false);\n    const rawValue = parseValue(displayValue);\n\n    validateInput(rawValue);\n\n    // Format for display\n    setDisplayValue(formatValue(rawValue));\n\n    // Call onChange with parsed value\n    if (onChange) {\n      onChange(rawValue);\n    }\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  // Handle input change\n  const handleChange = (e) => {\n    const newValue = e.target.value;\n\n    // Basic validation for numeric input\n    const numericRegex = allowNegative ? /^-?\\d*\\.?\\d*$/ : /^\\d*\\.?\\d*$/;\n\n    if (numericRegex.test(newValue) || newValue === '') {\n      setDisplayValue(newValue);\n    }\n  };\n\n  // Handle key press\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      componentRef.current?.blur();\n    }\n  };\n\n  // Get icon based on type\n  const getIcon = () => {\n    switch (type) {\n      case 'currency':\n        return <DollarSign size={16} className=\"text-muted-foreground\" />;\n      case 'percentage':\n        return <Percent size={16} className=\"text-muted-foreground\" />;\n      default:\n        return <Calculator size={16} className=\"text-muted-foreground\" />;\n    }\n  };\n\n  // Auto-focus if specified\n  useEffect(() => {\n    if (autoFocus && componentRef.current) {\n      componentRef.current.focus();\n    }\n  }, [autoFocus]);\n\n  return (\n    <div className=\"space-y-2\">\n      {label && (\n        <label\n          htmlFor={inputId}\n          className={cn(\n            'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n            error && !isValid ? 'text-destructive' : 'text-foreground'\n          )}\n        >\n          {label}\n          {required && <span className=\"text-destructive ml-1\">*</span>}\n        </label>\n      )}\n\n      <div className=\"relative\">\n        {/* Left icon/prefix */}\n        <div className=\"absolute left-3 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none z-10\">\n          {getIcon()}\n          {prefix && (\n            <span className=\"text-sm text-muted-foreground font-medium\">\n              {prefix}\n            </span>\n          )}\n        </div>\n\n        <input\n          ref={componentRef}\n          id={inputId}\n          type=\"text\"\n          value={displayValue}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onKeyPress={handleKeyPress}\n          placeholder={placeholder}\n          disabled={disabled || loading}\n          className={cn(\n            // Base styles\n            'flex h-11 w-full rounded-lg border bg-background text-sm ring-offset-background',\n            'file:border-0 file:bg-transparent file:text-sm file:font-medium',\n            'placeholder:text-muted-foreground',\n            'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n            'disabled:cursor-not-allowed disabled:opacity-50',\n            'transition-all duration-200',\n\n            // Padding adjustments for icons\n            'pl-10 pr-4',\n            suffix && 'pr-16',\n\n            // Financial styling\n            'font-mono text-right',\n            'border-input hover:border-ring/50',\n\n            // States\n            isFocused && 'ring-2 ring-ring ring-offset-2 border-ring',\n            error && !isValid && 'border-destructive focus-visible:ring-destructive',\n            loading && 'animate-pulse',\n\n            className\n          )}\n          {...props}\n        />\n\n        {/* Right suffix */}\n        {suffix && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none\">\n            <span className=\"text-sm text-muted-foreground font-medium\">\n              {suffix}\n            </span>\n          </div>\n        )}\n\n        {/* Loading indicator */}\n        {loading && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n            <div className=\"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin\" />\n          </div>\n        )}\n\n        {/* Error icon */}\n        {error && !isValid && !loading && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n            <AlertCircle size={16} className=\"text-destructive\" />\n          </div>\n        )}\n      </div>\n\n      {/* Description */}\n      {description && !error && !isValid && (\n        <p className=\"text-sm text-muted-foreground\">\n          {description}\n        </p>\n      )}\n\n      {/* Error message */}\n      {(error || !isValid) && (\n        <p className=\"text-sm text-destructive flex items-center gap-1\">\n          <AlertCircle size={14} />\n          {error || 'Invalid input'}\n        </p>\n      )}\n    </div>\n  );\n});\n\nFinancialInput.displayName = 'FinancialInput';\n\nexport default FinancialInput;\n","import { Check, X, Edit2, Calculator, AlertCircle } from 'lucide-react';\nimport React, { useState, useEffect, useRef } from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst EditableCell = ({\n  value,\n  onChange,\n  onSave,\n  onCancel,\n  className,\n  type = 'currency', // 'currency', 'percentage', 'number', 'text'\n  placeholder = '0.00',\n  isFormula = false,\n  isEditing = false,\n  onEdit,\n  disabled = false,\n  loading = false,\n  error,\n  locale = 'en-US',\n  currency = 'USD',\n  decimals = 2,\n  allowNegative = true,\n  min,\n  max,\n  autoFocus = true,\n  showEditIcon = true,\n  variant = 'default', // 'default', 'adjusted', 'formula'\n  ...props\n}) => {\n  const [editingValue, setEditingValue] = useState('');\n  const [localError, setLocalError] = useState('');\n  const [isHovered, setIsHovered] = useState(false);\n  const inputRef = useRef(null);\n\n  // Format value for display\n  const formatValue = (val) => {\n    if (!val && val !== 0) return '—';\n\n    const numValue = typeof val === 'string' ? parseFloat(val) : val;\n    if (isNaN(numValue)) return '—';\n\n    switch (type) {\n      case 'currency':\n        const formatted = new Intl.NumberFormat(locale, {\n          style: 'currency',\n          currency,\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue);\n\n        // For large numbers, add suffix\n        const absValue = Math.abs(numValue);\n        if (absValue >= 1000000) {\n          return new Intl.NumberFormat(locale, {\n            minimumFractionDigits: 1,\n            maximumFractionDigits: 1\n          }).format(numValue / 1000000) + 'M';\n        } else if (absValue >= 1000) {\n          return new Intl.NumberFormat(locale, {\n            minimumFractionDigits: 0,\n            maximumFractionDigits: 0\n          }).format(numValue);\n        }\n        return formatted.replace(/\\.00$/, '');\n\n      case 'percentage':\n        return new Intl.NumberFormat(locale, {\n          style: 'percent',\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue / 100);\n\n      case 'number':\n        return new Intl.NumberFormat(locale, {\n          minimumFractionDigits: decimals,\n          maximumFractionDigits: decimals\n        }).format(numValue);\n\n      default:\n        return val?.toString() || '';\n    }\n  };\n\n  // Parse display value to raw number\n  const parseValue = (val) => {\n    if (!val) return 0;\n\n    // Remove currency symbols, commas, and spaces\n    const cleanValue = val\n      .replace(/[^\\d.-]/g, '')\n      .replace(/,/g, '');\n\n    const numValue = parseFloat(cleanValue);\n    return isNaN(numValue) ? 0 : numValue;\n  };\n\n  // Validate input\n  const validateInput = (val) => {\n    const numValue = type === 'text' ? val : parseValue(val);\n\n    if (type === 'text') return true;\n\n    if (!allowNegative && numValue < 0) {\n      setLocalError('Negative values are not allowed');\n      return false;\n    }\n\n    if (min !== undefined && numValue < min) {\n      setLocalError(`Value must be at least ${formatValue(min)}`);\n      return false;\n    }\n\n    if (max !== undefined && numValue > max) {\n      setLocalError(`Value must not exceed ${formatValue(max)}`);\n      return false;\n    }\n\n    setLocalError('');\n    return true;\n  };\n\n  // Handle edit start\n  const handleEdit = () => {\n    if (disabled || isFormula) return;\n\n    setEditingValue(value ? value.toString() : '');\n    setLocalError('');\n\n    if (onEdit) {\n      onEdit(true);\n    }\n  };\n\n  // Handle save\n  const handleSave = () => {\n    const finalValue = type === 'text' ? editingValue : parseValue(editingValue);\n\n    if (!validateInput(editingValue)) {\n      return;\n    }\n\n    if (onChange) {\n      onChange(finalValue);\n    }\n\n    if (onSave) {\n      onSave(finalValue);\n    }\n\n    if (onEdit) {\n      onEdit(false);\n    }\n  };\n\n  // Handle cancel\n  const handleCancel = () => {\n    setEditingValue('');\n    setLocalError('');\n\n    if (onCancel) {\n      onCancel();\n    }\n\n    if (onEdit) {\n      onEdit(false);\n    }\n  };\n\n  // Handle input change\n  const handleChange = (e) => {\n    const newValue = e.target.value;\n\n    if (type !== 'text') {\n      const numericRegex = allowNegative ? /^-?\\d*\\.?\\d*$/ : /^\\d*\\.?\\d*$/;\n      if (numericRegex.test(newValue) || newValue === '') {\n        setEditingValue(newValue);\n      }\n    } else {\n      setEditingValue(newValue);\n    }\n  };\n\n  // Handle key press\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleSave();\n    } else if (e.key === 'Escape') {\n      e.preventDefault();\n      handleCancel();\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      handleSave();\n    }\n  };\n\n  // Auto-focus input when editing starts\n  useEffect(() => {\n    if (isEditing && inputRef.current && autoFocus) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isEditing, autoFocus]);\n\n  // Get variant styles\n  const getVariantStyles = () => {\n    switch (variant) {\n      case 'adjusted':\n        return {\n          container: 'bg-gradient-to-r from-amber-50 to-yellow-50 border-amber-200',\n          text: isFormula ? 'text-amber-900' : 'text-slate-700',\n          hover: 'hover:bg-amber-100 hover:border-amber-300',\n          input: 'border-amber-400 focus:ring-amber-100 focus:border-amber-500',\n          editIcon: 'text-amber-500'\n        };\n      case 'formula':\n        return {\n          container: 'bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200',\n          text: 'text-blue-900',\n          hover: 'cursor-not-allowed',\n          input: 'border-blue-400 focus:ring-blue-100 focus:border-blue-500',\n          editIcon: 'text-blue-500'\n        };\n      default:\n        return {\n          container: 'bg-background border-transparent',\n          text: isFormula ? 'text-blue-900' : 'text-slate-700',\n          hover: 'hover:bg-slate-50 hover:border-slate-200',\n          input: 'border-input focus:ring-ring focus:border-ring',\n          editIcon: 'text-slate-400'\n        };\n    }\n  };\n\n  const styles = getVariantStyles();\n\n  if (isEditing) {\n    return (\n      <div className=\"relative\">\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={editingValue}\n          onChange={handleChange}\n          onKeyDown={handleKeyPress}\n          placeholder={placeholder}\n          disabled={loading}\n          className={cn(\n            'w-full px-3 py-2.5 bg-white border-2 rounded-lg text-slate-900 text-right font-mono text-sm',\n            'focus:outline-none focus:ring-4 shadow-lg transition-all duration-200',\n            styles.input,\n            loading && 'animate-pulse',\n            localError && 'border-destructive focus:ring-destructive/20',\n            className\n          )}\n        />\n\n        {/* Action buttons */}\n        <div className=\"absolute -top-2 -right-2 flex gap-1\">\n          <button\n            onClick={handleSave}\n            disabled={loading || !!localError}\n            className={cn(\n              'w-5 h-5 bg-success hover:bg-success/90 text-white rounded-full',\n              'flex items-center justify-center text-xs transition-colors',\n              'disabled:opacity-50 disabled:cursor-not-allowed'\n            )}\n            title=\"Save changes\"\n          >\n            <Check size={12} />\n          </button>\n          <button\n            onClick={handleCancel}\n            disabled={loading}\n            className={cn(\n              'w-5 h-5 bg-destructive hover:bg-destructive/90 text-white rounded-full',\n              'flex items-center justify-center text-xs transition-colors',\n              'disabled:opacity-50 disabled:cursor-not-allowed'\n            )}\n            title=\"Cancel changes\"\n          >\n            <X size={12} />\n          </button>\n        </div>\n\n        {/* Loading indicator */}\n        {loading && (\n          <div className=\"absolute left-2 top-1/2 -translate-y-1/2\">\n            <div className=\"w-3 h-3 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin\" />\n          </div>\n        )}\n\n        {/* Local error */}\n        {localError && (\n          <div className=\"absolute -bottom-6 left-0 right-0 text-xs text-destructive flex items-center gap-1\">\n            <AlertCircle size={10} />\n            {localError}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      onClick={handleEdit}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      className={cn(\n        'px-3 py-2.5 rounded-lg font-mono text-sm transition-all duration-200',\n        'min-h-[40px] flex items-center justify-end relative group',\n        styles.container,\n        !disabled && !isFormula && styles.hover,\n        !disabled && !isFormula && 'cursor-pointer',\n        isFormula && 'font-semibold shadow-sm',\n        disabled && 'opacity-50 cursor-not-allowed',\n        error && 'border-destructive',\n        className\n      )}\n    >\n      <span className={styles.text}>\n        {formatValue(value)}\n      </span>\n\n      {/* Formula indicator */}\n      {isFormula && (\n        <Calculator size={12} className=\"ml-2 text-blue-500/80\" />\n      )}\n\n      {/* Edit icon */}\n      {!isFormula && !disabled && showEditIcon && (\n        <Edit2\n          size={12}\n          className={cn(\n            'ml-2 transition-opacity',\n            isHovered ? 'opacity-60' : 'opacity-0',\n            styles.editIcon\n          )}\n        />\n      )}\n\n      {/* Error indicator */}\n      {error && (\n        <AlertCircle size={12} className=\"ml-2 text-destructive\" />\n      )}\n\n      {/* Loading indicator */}\n      {loading && (\n        <div className=\"ml-2\">\n          <div className=\"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin opacity-50\" />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EditableCell;\n","import { DollarSign, AlertCircle, TrendingUp, TrendingDown } from 'lucide-react';\nimport React, { useState, useEffect, useRef, useMemo } from 'react';\n\nimport { cn } from '../../utils/cn';\n\n// Currency configurations\nconst CURRENCY_CONFIG = {\n  USD: { symbol: '$', code: 'USD', decimals: 2, name: 'US Dollar' },\n  EUR: { symbol: '€', code: 'EUR', decimals: 2, name: 'Euro' },\n  GBP: { symbol: '£', code: 'GBP', decimals: 2, name: 'British Pound' },\n  JPY: { symbol: '¥', code: 'JPY', decimals: 0, name: 'Japanese Yen' },\n  CAD: { symbol: 'C$', code: 'CAD', decimals: 2, name: 'Canadian Dollar' },\n  AUD: { symbol: 'A$', code: 'AUD', decimals: 2, name: 'Australian Dollar' },\n  CHF: { symbol: 'CHF', code: 'CHF', decimals: 2, name: 'Swiss Franc' },\n  CNY: { symbol: '¥', code: 'CNY', decimals: 2, name: 'Chinese Yuan' }\n};\n\nconst CurrencyInput = React.forwardRef(({\n  className,\n  label,\n  value = 0,\n  onChange,\n  onBlur,\n  placeholder,\n  currency = 'USD',\n  locale = 'en-US',\n  error,\n  description,\n  required = false,\n  disabled = false,\n  loading = false,\n  allowNegative = true,\n  showCurrency = true,\n  showTrend = false,\n  previousValue,\n  size = 'default', // 'sm', 'default', 'lg'\n  variant = 'default', // 'default', 'filled', 'minimal'\n  id,\n  autoFocus = false,\n  onValidation,\n  min,\n  max,\n  step = 0.01,\n  abbreviateDisplay = false, // Show 1.2M instead of 1,200,000\n  precision, // Override default currency precision\n  ...props\n}, ref) => {\n  const [displayValue, setDisplayValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n  const [validationMessage, setValidationMessage] = useState('');\n  const inputRef = useRef(null);\n  const componentRef = ref || inputRef;\n\n  // Generate unique ID if not provided\n  const inputId = id || `currency-input-${Math.random().toString(36).substr(2, 9)}`;\n\n  // Get currency configuration\n  const currencyConfig = CURRENCY_CONFIG[currency] || CURRENCY_CONFIG.USD;\n  const effectiveDecimals = precision !== undefined ? precision : currencyConfig.decimals;\n\n  // Memoized placeholder\n  const effectivePlaceholder = useMemo(() => {\n    if (placeholder) return placeholder;\n    const sample = formatCurrency(0);\n    return sample;\n  }, [placeholder, currency, effectiveDecimals]);\n\n  // Format currency value\n  function formatCurrency(val, options = {}) {\n    if (!val && val !== 0) return '';\n\n    const numValue = typeof val === 'string' ? parseFloat(val) : val;\n    if (isNaN(numValue)) return '';\n\n    const { forDisplay = false, abbreviated = false } = options;\n\n    // Handle abbreviation for large numbers\n    if (abbreviated && abbreviateDisplay && Math.abs(numValue) >= 1000) {\n      const absValue = Math.abs(numValue);\n      const sign = numValue < 0 ? '-' : '';\n\n      if (absValue >= 1000000000) {\n        return `${sign}${currencyConfig.symbol}${(absValue / 1000000000).toFixed(1)}B`;\n      } else if (absValue >= 1000000) {\n        return `${sign}${currencyConfig.symbol}${(absValue / 1000000).toFixed(1)}M`;\n      } else if (absValue >= 1000) {\n        return `${sign}${currencyConfig.symbol}${(absValue / 1000).toFixed(0)}K`;\n      }\n    }\n\n    try {\n      return new Intl.NumberFormat(locale, {\n        style: 'currency',\n        currency,\n        minimumFractionDigits: effectiveDecimals,\n        maximumFractionDigits: effectiveDecimals\n      }).format(numValue);\n    } catch (error) {\n      // Fallback formatting\n      const formatted = numValue.toFixed(effectiveDecimals);\n      return `${currencyConfig.symbol}${formatted}`;\n    }\n  }\n\n  // Parse display value to number\n  function parseCurrency(val) {\n    if (!val) return 0;\n\n    // Handle abbreviated values\n    const str = val.toString().toLowerCase();\n    let multiplier = 1;\n\n    if (str.endsWith('k')) {\n      multiplier = 1000;\n    } else if (str.endsWith('m')) {\n      multiplier = 1000000;\n    } else if (str.endsWith('b')) {\n      multiplier = 1000000000;\n    }\n\n    // Remove currency symbols, commas, spaces, and multiplier suffixes\n    const cleanValue = val\n      .toString()\n      .replace(/[^\\d.-]/g, '')\n      .replace(/,/g, '');\n\n    const numValue = parseFloat(cleanValue) * multiplier;\n    return isNaN(numValue) ? 0 : numValue;\n  }\n\n  // Validate input\n  const validateInput = (val) => {\n    const numValue = typeof val === 'string' ? parseCurrency(val) : val;\n\n    let valid = true;\n    let message = '';\n\n    if (required && (!numValue && numValue !== 0)) {\n      valid = false;\n      message = 'This field is required';\n    } else if (!allowNegative && numValue < 0) {\n      valid = false;\n      message = 'Negative values are not allowed';\n    } else if (min !== undefined && numValue < min) {\n      valid = false;\n      message = `Value must be at least ${formatCurrency(min)}`;\n    } else if (max !== undefined && numValue > max) {\n      valid = false;\n      message = `Value must not exceed ${formatCurrency(max)}`;\n    }\n\n    setIsValid(valid);\n    setValidationMessage(message);\n\n    if (onValidation) {\n      onValidation(valid, message);\n    }\n\n    return valid;\n  };\n\n  // Calculate trend\n  const getTrend = () => {\n    if (!showTrend || previousValue === undefined) return null;\n\n    const current = typeof value === 'string' ? parseCurrency(value) : (value || 0);\n    const previous = typeof previousValue === 'string' ? parseCurrency(previousValue) : (previousValue || 0);\n\n    if (current > previous) return 'up';\n    if (current < previous) return 'down';\n    return 'neutral';\n  };\n\n  const trend = getTrend();\n\n  // Update display value when prop value changes\n  useEffect(() => {\n    if (!isFocused) {\n      setDisplayValue(formatCurrency(value, { abbreviated: abbreviateDisplay }));\n    }\n  }, [value, currency, locale, effectiveDecimals, isFocused, abbreviateDisplay]);\n\n  // Handle focus\n  const handleFocus = (e) => {\n    setIsFocused(true);\n    // Show raw number for editing\n    const rawValue = value ? value.toString() : '';\n    setDisplayValue(rawValue);\n\n    // Select all text for easy replacement\n    setTimeout(() => {\n      if (componentRef.current) {\n        componentRef.current.select();\n      }\n    }, 0);\n  };\n\n  // Handle blur\n  const handleBlur = (e) => {\n    setIsFocused(false);\n    const rawValue = parseCurrency(displayValue);\n\n    validateInput(rawValue);\n\n    // Format for display\n    setDisplayValue(formatCurrency(rawValue, { abbreviated: abbreviateDisplay }));\n\n    // Call onChange with parsed value\n    if (onChange) {\n      onChange(rawValue);\n    }\n\n    if (onBlur) {\n      onBlur(e);\n    }\n  };\n\n  // Handle input change\n  const handleChange = (e) => {\n    const newValue = e.target.value;\n\n    // Allow numbers, decimals, negative signs, and K/M/B suffixes\n    const regex = allowNegative\n      ? /^-?\\d*\\.?\\d*[kmb]?$/i\n      : /^\\d*\\.?\\d*[kmb]?$/i;\n\n    if (regex.test(newValue) || newValue === '') {\n      setDisplayValue(newValue);\n    }\n  };\n\n  // Handle key press\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      componentRef.current?.blur();\n    }\n  };\n\n  // Auto-focus if specified\n  useEffect(() => {\n    if (autoFocus && componentRef.current) {\n      componentRef.current.focus();\n    }\n  }, [autoFocus]);\n\n  // Size variants\n  const sizeClasses = {\n    sm: 'h-9 px-3 text-sm',\n    default: 'h-11 px-4 text-sm',\n    lg: 'h-12 px-4 text-base'\n  };\n\n  // Variant styles\n  const variantClasses = {\n    default: 'border-input bg-background hover:border-ring/50',\n    filled: 'border-transparent bg-muted hover:bg-muted/80',\n    minimal: 'border-transparent bg-transparent hover:bg-muted/50'\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      {label && (\n        <label\n          htmlFor={inputId}\n          className={cn(\n            'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n            error || !isValid ? 'text-destructive' : 'text-foreground'\n          )}\n        >\n          {label}\n          {required && <span className=\"text-destructive ml-1\">*</span>}\n        </label>\n      )}\n\n      <div className=\"relative\">\n        {/* Currency symbol */}\n        {showCurrency && (\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 flex items-center gap-1 pointer-events-none z-10\">\n            <DollarSign size={16} className=\"text-muted-foreground\" />\n            <span className=\"text-sm text-muted-foreground font-medium\">\n              {currencyConfig.code}\n            </span>\n          </div>\n        )}\n\n        <input\n          ref={componentRef}\n          id={inputId}\n          type=\"text\"\n          value={displayValue}\n          onChange={handleChange}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onKeyPress={handleKeyPress}\n          placeholder={effectivePlaceholder}\n          disabled={disabled || loading}\n          step={step}\n          className={cn(\n            // Base styles\n            'flex w-full rounded-lg border ring-offset-background',\n            'file:border-0 file:bg-transparent file:text-sm file:font-medium',\n            'placeholder:text-muted-foreground',\n            'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2',\n            'disabled:cursor-not-allowed disabled:opacity-50',\n            'transition-all duration-200',\n\n            // Size\n            sizeClasses[size],\n\n            // Variant\n            variantClasses[variant],\n\n            // Financial styling\n            'font-mono text-right',\n\n            // Padding adjustments\n            showCurrency ? 'pl-16' : 'pl-4',\n            'pr-4',\n            trend && 'pr-8',\n\n            // States\n            isFocused && 'ring-2 ring-ring ring-offset-2 border-ring',\n            (error || !isValid) && 'border-destructive focus-visible:ring-destructive',\n            loading && 'animate-pulse',\n\n            className\n          )}\n          {...props}\n        />\n\n        {/* Trend indicator */}\n        {trend && trend !== 'neutral' && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n            {trend === 'up' ? (\n              <TrendingUp size={16} className=\"text-success\" />\n            ) : (\n              <TrendingDown size={16} className=\"text-destructive\" />\n            )}\n          </div>\n        )}\n\n        {/* Loading indicator */}\n        {loading && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n            <div className=\"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin\" />\n          </div>\n        )}\n\n        {/* Error icon */}\n        {(error || !isValid) && !loading && (\n          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n            <AlertCircle size={16} className=\"text-destructive\" />\n          </div>\n        )}\n      </div>\n\n      {/* Description */}\n      {description && !error && isValid && (\n        <p className=\"text-sm text-muted-foreground\">\n          {description}\n        </p>\n      )}\n\n      {/* Error message */}\n      {(error || !isValid) && (\n        <p className=\"text-sm text-destructive flex items-center gap-1\">\n          <AlertCircle size={14} />\n          {error || validationMessage}\n        </p>\n      )}\n\n      {/* Trend information */}\n      {showTrend && previousValue !== undefined && trend !== 'neutral' && (\n        <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\n          {trend === 'up' ? (\n            <TrendingUp size={12} className=\"text-success\" />\n          ) : (\n            <TrendingDown size={12} className=\"text-destructive\" />\n          )}\n          vs. previous: {formatCurrency(previousValue)}\n        </p>\n      )}\n    </div>\n  );\n});\n\nCurrencyInput.displayName = 'CurrencyInput';\n\nexport { CurrencyInput as default, CURRENCY_CONFIG };\n","import { Calculator, TrendingUp, DollarSign, Percent } from 'lucide-react';\nimport React from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst LoadingState = ({\n  type = 'default', // 'default', 'calculation', 'financial', 'inline'\n  size = 'default', // 'sm', 'default', 'lg'\n  message,\n  className,\n  showIcon = true,\n  variant = 'default', // 'default', 'subtle', 'pulsing'\n  ...props\n}) => {\n  // Get appropriate icon based on type\n  const getIcon = () => {\n    switch (type) {\n      case 'calculation':\n        return Calculator;\n      case 'financial':\n        return DollarSign;\n      case 'trend':\n        return TrendingUp;\n      case 'percentage':\n        return Percent;\n      default:\n        return Calculator;\n    }\n  };\n\n  const Icon = getIcon();\n\n  // Size configurations\n  const sizeConfig = {\n    sm: {\n      spinner: 'w-3 h-3 border',\n      icon: 12,\n      text: 'text-xs',\n      gap: 'gap-1',\n      padding: 'p-1'\n    },\n    default: {\n      spinner: 'w-4 h-4 border-2',\n      icon: 16,\n      text: 'text-sm',\n      gap: 'gap-2',\n      padding: 'p-2'\n    },\n    lg: {\n      spinner: 'w-6 h-6 border-2',\n      icon: 20,\n      text: 'text-base',\n      gap: 'gap-3',\n      padding: 'p-3'\n    }\n  };\n\n  const config = sizeConfig[size];\n\n  // Variant styles\n  const variantStyles = {\n    default: 'text-muted-foreground',\n    subtle: 'text-muted-foreground/70',\n    pulsing: 'text-muted-foreground animate-pulse'\n  };\n\n  // Inline variant for table cells and small spaces\n  if (type === 'inline') {\n    return (\n      <div className={cn('flex items-center justify-center', config.gap, className)} {...props}>\n        <div\n          className={cn(\n            config.spinner,\n            'border-muted-foreground border-t-transparent rounded-full animate-spin',\n            variantStyles[variant]\n          )}\n        />\n        {message && (\n          <span className={cn(config.text, variantStyles[variant])}>\n            {message}\n          </span>\n        )}\n      </div>\n    );\n  }\n\n  // Default card-style loading state\n  const defaultMessage = {\n    calculation: 'Calculating...',\n    financial: 'Processing financial data...',\n    trend: 'Analyzing trends...',\n    percentage: 'Computing percentages...',\n    default: 'Loading...'\n  };\n\n  const displayMessage = message || defaultMessage[type];\n\n  return (\n    <div\n      className={cn(\n        'flex flex-col items-center justify-center',\n        config.padding,\n        config.gap,\n        'bg-muted/30 rounded-lg border border-dashed border-muted-foreground/30',\n        className\n      )} {...props}\n    >\n      <div className=\"flex items-center gap-2\">\n        {/* Animated spinner */}\n        <div\n          className={cn(\n            config.spinner,\n            'border-muted-foreground border-t-transparent rounded-full animate-spin',\n            variantStyles[variant]\n          )}\n        />\n\n        {/* Icon with subtle animation */}\n        {showIcon && (\n          <Icon\n            size={config.icon}\n            className={cn(\n              'animate-pulse',\n              variantStyles[variant]\n            )}\n          />\n        )}\n      </div>\n\n      {/* Loading message */}\n      {displayMessage && (\n        <p\n          className={cn(\n            config.text,\n            'font-medium text-center',\n            variantStyles[variant]\n          )}\n        >\n          {displayMessage}\n        </p>\n      )}\n    </div>\n  );\n};\n\n// Skeleton component for table cells and consistent spacing\nconst LoadingSkeleton = ({\n  width = 'w-20',\n  height = 'h-6',\n  className,\n  variant = 'default', // 'default', 'currency', 'percentage'\n  ...props\n}) => {\n  const variantClasses = {\n    default: 'bg-muted',\n    currency: 'bg-emerald-100',\n    percentage: 'bg-blue-100'\n  };\n\n  return (\n    <div\n      className={cn(\n        'animate-pulse rounded-md',\n        width,\n        height,\n        variantClasses[variant],\n        className\n      )}\n      {...props}\n    />\n  );\n};\n\n// Pulse component for subtle loading indicators\nconst LoadingPulse = ({\n  children,\n  className,\n  isLoading = false,\n  ...props\n}) => {\n  if (!isLoading) {\n    return children;\n  }\n\n  return (\n    <div className={cn('animate-pulse opacity-50', className)} {...props}>\n      {children}\n    </div>\n  );\n};\n\n// Dots animation for minimal loading states\nconst LoadingDots = ({\n  size = 'default',\n  className,\n  variant = 'default',\n  ...props\n}) => {\n  const sizeClasses = {\n    sm: 'w-1 h-1',\n    default: 'w-1.5 h-1.5',\n    lg: 'w-2 h-2'\n  };\n\n  const variantClasses = {\n    default: 'bg-muted-foreground',\n    primary: 'bg-primary',\n    success: 'bg-success',\n    warning: 'bg-warning'\n  };\n\n  return (\n    <div\n      className={cn('flex items-center gap-1', className)}\n      {...props}\n    >\n      {[0, 1, 2].map((i) => (\n        <div\n          key={i}\n          className={cn(\n            'rounded-full animate-pulse',\n            sizeClasses[size],\n            variantClasses[variant]\n          )}\n          style={{\n            animationDelay: `${i * 0.2}s`,\n            animationDuration: '1.4s'\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Export all components\nexport default LoadingState;\nexport { LoadingSkeleton, LoadingPulse, LoadingDots };\n","import { AlertCircle, CheckCircle, AlertTriangle, Info, X } from 'lucide-react';\nimport React from 'react';\n\nimport { cn } from '../../utils/cn';\n\nconst ValidationFeedback = ({\n  type = 'error', // 'error', 'warning', 'success', 'info'\n  message,\n  className,\n  size = 'default', // 'sm', 'default', 'lg'\n  variant = 'default', // 'default', 'inline', 'floating', 'subtle'\n  showIcon = true,\n  dismissible = false,\n  onDismiss,\n  position = 'bottom', // 'top', 'bottom', 'left', 'right' (for floating)\n  children,\n  ...props\n}) => {\n  // Icon mapping\n  const iconMap = {\n    error: AlertCircle,\n    warning: AlertTriangle,\n    success: CheckCircle,\n    info: Info\n  };\n\n  const Icon = iconMap[type];\n\n  // Size configurations\n  const sizeConfig = {\n    sm: {\n      text: 'text-xs',\n      icon: 12,\n      padding: 'p-2',\n      gap: 'gap-1'\n    },\n    default: {\n      text: 'text-sm',\n      icon: 14,\n      padding: 'p-3',\n      gap: 'gap-2'\n    },\n    lg: {\n      text: 'text-base',\n      icon: 16,\n      padding: 'p-4',\n      gap: 'gap-3'\n    }\n  };\n\n  const config = sizeConfig[size];\n\n  // Type-based styling\n  const typeStyles = {\n    error: {\n      bg: 'bg-destructive/10',\n      border: 'border-destructive/20',\n      text: 'text-destructive',\n      icon: 'text-destructive'\n    },\n    warning: {\n      bg: 'bg-warning/10',\n      border: 'border-warning/20',\n      text: 'text-warning-foreground',\n      icon: 'text-warning'\n    },\n    success: {\n      bg: 'bg-success/10',\n      border: 'border-success/20',\n      text: 'text-success-foreground',\n      icon: 'text-success'\n    },\n    info: {\n      bg: 'bg-blue-50',\n      border: 'border-blue-200',\n      text: 'text-blue-700',\n      icon: 'text-blue-500'\n    }\n  };\n\n  const styles = typeStyles[type];\n\n  // Variant-specific classes\n  const getVariantClasses = () => {\n    switch (variant) {\n      case 'inline':\n        return 'flex items-center';\n      case 'floating':\n        return cn(\n          'absolute z-50 shadow-lg rounded-lg',\n          position === 'top' && 'bottom-full mb-2',\n          position === 'bottom' && 'top-full mt-2',\n          position === 'left' && 'right-full mr-2',\n          position === 'right' && 'left-full ml-2'\n        );\n      case 'subtle':\n        return 'border-0 bg-transparent';\n      default:\n        return 'rounded-lg border';\n    }\n  };\n\n  // Don't render if no message and no children\n  if (!message && !children) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(\n        'flex items-start',\n        config.gap,\n        config.padding,\n        styles.bg,\n        styles.border,\n        getVariantClasses(),\n        className\n      )}\n      {...props}\n    >\n      {/* Icon */}\n      {showIcon && Icon && (\n        <Icon\n          size={config.icon}\n          className={cn('flex-shrink-0 mt-0.5', styles.icon)}\n        />\n      )}\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        {message && (\n          <p className={cn(config.text, styles.text, 'font-medium')}>\n            {message}\n          </p>\n        )}\n        {children && (\n          <div className={cn(config.text, styles.text)}>\n            {children}\n          </div>\n        )}\n      </div>\n\n      {/* Dismiss button */}\n      {dismissible && onDismiss && (\n        <button\n          onClick={onDismiss}\n          className={cn(\n            'flex-shrink-0 ml-2 p-1 rounded-full hover:bg-black/10 transition-colors',\n            styles.text\n          )}\n          aria-label=\"Dismiss\"\n        >\n          <X size={config.icon} />\n        </button>\n      )}\n    </div>\n  );\n};\n\n// Field-specific validation component\nconst FieldValidation = ({\n  error,\n  warning,\n  success,\n  info,\n  className,\n  ...props\n}) => {\n  // Determine the highest priority message\n  let type, message;\n\n  if (error) {\n    type = 'error';\n    message = error;\n  } else if (warning) {\n    type = 'warning';\n    message = warning;\n  } else if (success) {\n    type = 'success';\n    message = success;\n  } else if (info) {\n    type = 'info';\n    message = info;\n  } else {\n    return null;\n  }\n\n  return (\n    <ValidationFeedback\n      type={type}\n      message={message}\n      size=\"sm\"\n      variant=\"inline\"\n      className={className}\n      {...props}\n    />\n  );\n};\n\n// List of validation errors/warnings\nconst ValidationList = ({\n  items = [],\n  className,\n  showNumbers = false,\n  ...props\n}) => {\n  if (!items.length) return null;\n\n  return (\n    <div className={cn('space-y-2', className)} {...props}>\n      {items.map((item, index) => (\n        <ValidationFeedback\n          key={index}\n          type={item.type || 'error'}\n          message={showNumbers ? `${index + 1}. ${item.message}` : item.message}\n          size=\"sm\"\n          variant=\"inline\"\n        />\n      ))}\n    </div>\n  );\n};\n\n// Summary validation component for forms\nconst ValidationSummary = ({\n  errors = [],\n  warnings = [],\n  className,\n  title = 'Please fix the following issues:',\n  collapsible = false,\n  ...props\n}) => {\n  const [isCollapsed, setIsCollapsed] = React.useState(collapsible);\n\n  const totalIssues = errors.length + warnings.length;\n\n  if (totalIssues === 0) return null;\n\n  const allItems = [\n    ...errors.map(error => ({ type: 'error', message: error })),\n    ...warnings.map(warning => ({ type: 'warning', message: warning }))\n  ];\n\n  return (\n    <div className={cn('space-y-3', className)} {...props}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h4 className=\"text-sm font-semibold text-foreground\">\n          {title}\n        </h4>\n        {collapsible && (\n          <button\n            onClick={() => setIsCollapsed(!isCollapsed)}\n            className=\"text-xs text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            {isCollapsed ? `Show ${totalIssues} issues` : 'Hide'}\n          </button>\n        )}\n      </div>\n\n      {/* Issues list */}\n      {!isCollapsed && (\n        <ValidationList\n          items={allItems}\n          showNumbers\n        />\n      )}\n\n      {/* Collapsed summary */}\n      {isCollapsed && (\n        <p className=\"text-sm text-muted-foreground\">\n          {errors.length > 0 && `${errors.length} error${errors.length > 1 ? 's' : ''}`}\n          {errors.length > 0 && warnings.length > 0 && ', '}\n          {warnings.length > 0 && `${warnings.length} warning${warnings.length > 1 ? 's' : ''}`}\n        </p>\n      )}\n    </div>\n  );\n};\n\n// Real-time validation status indicator\nconst ValidationStatus = ({\n  isValidating = false,\n  isValid = true,\n  className,\n  size = 'default',\n  ...props\n}) => {\n  const sizeClasses = {\n    sm: 'w-3 h-3',\n    default: 'w-4 h-4',\n    lg: 'w-5 h-5'\n  };\n\n  if (isValidating) {\n    return (\n      <div\n        className={cn(\n          'border-2 border-blue-500 border-t-transparent rounded-full animate-spin',\n          sizeClasses[size],\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n\n  if (isValid) {\n    return (\n      <CheckCircle\n        className={cn('text-success', className)}\n        size={size === 'sm' ? 12 : size === 'lg' ? 20 : 16}\n        {...props}\n      />\n    );\n  }\n\n  return (\n    <AlertCircle\n      className={cn('text-destructive', className)}\n      size={size === 'sm' ? 12 : size === 'lg' ? 20 : 16}\n      {...props}\n    />\n  );\n};\n\nexport default ValidationFeedback;\nexport { FieldValidation, ValidationList, ValidationSummary, ValidationStatus };\n","import { ChevronLeft, ChevronRight, Monitor, Smartphone, Tablet } from 'lucide-react';\nimport React, { useState, useEffect } from 'react';\n\n/**\n * Responsive Table Wrapper for Financial Data\n * Optimizes table display for mobile and tablet devices\n */\nconst ResponsiveTable = ({\n  children,\n  className = '',\n  enableVirtualization = false,\n  mobileStackedView = true,\n  showDeviceToggle = true\n}) => {\n  const [viewMode, setViewMode] = useState('auto');\n  const [isMobile, setIsMobile] = useState(false);\n  const [isTablet, setIsTablet] = useState(false);\n  const [scrollPosition, setScrollPosition] = useState(0);\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(false);\n\n  useEffect(() => {\n    const checkDevice = () => {\n      const width = window.innerWidth;\n      setIsMobile(width < 768);\n      setIsTablet(width >= 768 && width < 1024);\n    };\n\n    checkDevice();\n    window.addEventListener('resize', checkDevice);\n    return () => window.removeEventListener('resize', checkDevice);\n  }, []);\n\n  const handleScroll = (e) => {\n    const element = e.target;\n    setScrollPosition(element.scrollLeft);\n    setCanScrollLeft(element.scrollLeft > 0);\n    setCanScrollRight(\n      element.scrollLeft < element.scrollWidth - element.clientWidth\n    );\n  };\n\n  const scrollTable = (direction) => {\n    const tableContainer = document.querySelector('.table-scroll-container');\n    if (tableContainer) {\n      const scrollAmount = direction === 'left' ? -300 : 300;\n      tableContainer.scrollBy({ left: scrollAmount, behavior: 'smooth' });\n    }\n  };\n\n  const getCurrentViewMode = () => {\n    if (viewMode === 'auto') {\n      if (isMobile) return 'mobile';\n      if (isTablet) return 'tablet';\n      return 'desktop';\n    }\n    return viewMode;\n  };\n\n  const currentMode = getCurrentViewMode();\n\n  if (currentMode === 'mobile' && mobileStackedView) {\n    // Return stacked mobile view (implemented in parent component)\n    return (\n      <div className={`mobile-stacked-view ${className}`}>\n        {showDeviceToggle && (\n          <div className=\"flex items-center justify-end gap-2 mb-4\">\n            <span className=\"text-xs text-slate-500\">View:</span>\n            <button\n              onClick={() => setViewMode(viewMode === 'auto' ? 'desktop' : 'auto')}\n              className=\"flex items-center gap-1 px-2 py-1 text-xs bg-slate-100 hover:bg-slate-200 rounded transition-colors\"\n            >\n              {viewMode === 'auto' ? <Monitor size={12} /> : <Smartphone size={12} />}\n              {viewMode === 'auto' ? 'Table' : 'Stack'}\n            </button>\n          </div>\n        )}\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div className={`responsive-table-wrapper ${className}`}>\n      {showDeviceToggle && (\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs text-slate-500\">View:</span>\n            <div className=\"flex rounded-lg border border-slate-200 overflow-hidden\">\n              <button\n                onClick={() => setViewMode('auto')}\n                className={`px-2 py-1 text-xs transition-colors ${\n                  viewMode === 'auto'\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-white hover:bg-slate-50'\n                }`}\n              >\n                <Monitor size={12} />\n              </button>\n              <button\n                onClick={() => setViewMode('tablet')}\n                className={`px-2 py-1 text-xs transition-colors ${\n                  viewMode === 'tablet'\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-white hover:bg-slate-50'\n                }`}\n              >\n                <Tablet size={12} />\n              </button>\n              <button\n                onClick={() => setViewMode('mobile')}\n                className={`px-2 py-1 text-xs transition-colors ${\n                  viewMode === 'mobile'\n                    ? 'bg-blue-500 text-white'\n                    : 'bg-white hover:bg-slate-50'\n                }`}\n              >\n                <Smartphone size={12} />\n              </button>\n            </div>\n          </div>\n\n          {(isMobile || isTablet) && (\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={() => scrollTable('left')}\n                disabled={!canScrollLeft}\n                className=\"p-1 rounded bg-white border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors\"\n              >\n                <ChevronLeft size={16} />\n              </button>\n              <button\n                onClick={() => scrollTable('right')}\n                disabled={!canScrollRight}\n                className=\"p-1 rounded bg-white border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors\"\n              >\n                <ChevronRight size={16} />\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      <div\n        className={`table-scroll-container overflow-x-auto ${\n          currentMode === 'mobile' ? 'mobile-scroll' : ''\n        } ${currentMode === 'tablet' ? 'tablet-scroll' : ''}`}\n        onScroll={handleScroll}\n        style={{\n          scrollbarWidth: currentMode === 'mobile' ? 'thin' : 'auto',\n          scrollSnapType: currentMode === 'mobile' ? 'x mandatory' : 'none'\n        }}\n      >\n        {children}\n      </div>\n\n      {/* Mobile scroll indicator */}\n      {(isMobile || isTablet) && (\n        <div className=\"flex justify-center mt-2\">\n          <div className=\"flex items-center gap-1\">\n            {[...Array(5)].map((_, i) => (\n              <div\n                key={i}\n                className={`w-2 h-2 rounded-full transition-colors ${\n                  Math.floor(scrollPosition / 300) === i\n                    ? 'bg-blue-500'\n                    : 'bg-slate-200'\n                }`}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ResponsiveTable;\n"],"names":["NATURAL_LANGUAGE_PATTERNS","navigation","pattern","category","analysis","command","data","charts","COMMAND_REGISTRY","id","title","description","icon","FileText","shortcut","keywords","execute","params","context","action","target","Calculator","TrendingUp","parameters","name","type","optional","company","Target","variable","Activity","Search","required","query","Upload","Download","format","BarChart3","LineChart","PieChart","Save","Eye","settings","Settings","help","HelpCircle","CommandPalette","isOpen","onClose","onExecuteCommand","currentContext","recentCommands","userPreferences","setQuery","useState","selectedIndex","setSelectedIndex","commandHistory","setCommandHistory","inputRef","useRef","listRef","searchCommands","executeCommand","getContextualCommands","learnFromUsage","commandUsage","setCommandUsage","saved","localStorage","getItem","JSON","parse","userLearning","setUserLearning","parseNaturalLanguage","useCallback","results","patterns","Object","entries","match","push","slice","filter","Boolean","confidence","length","sort","a","b","trim","normalizedQuery","toLowerCase","nlResults","values","forEach","score","includes","keyword","usageCount","Math","min","activeTab","nlMatch","find","nl","isRecommended","contextual","frequentCommands","map","async","commandId","Error","result","prev","error","queries","lastUsed","Date","now","getCommandCategories","categories","useEffect","setItem","stringify","commandRegistry","useCommandRegistry","searchResults","useMemo","cmd","current","focus","handleKeyDown","e","key","preventDefault","max","handleExecuteCommand","document","addEventListener","removeEventListener","getCategoryColor","highlightMatch","text","regex","RegExp","replace","split","part","index","test","jsx","className","children","AnimatePresence","motion","div","initial","opacity","animate","exit","onClick","jsxs","scale","y","transition","duration","stopPropagation","Command","size","ref","value","onChange","placeholder","tip","CategoryIcon","Clock","Star","ArrowRight","Users","Zap","Globe","getCategoryIcon","CommandIcon","isSelected","delay","idx","isNew","x","Icon","color","strokeWidth","props","IconComponent","LucideIcons","propTypes","PropTypes","string","isRequired","number","LoadingSpinner","showText","variant","variantClasses","primary","secondary","muted","white","cn","sm","default","lg","xl","LABELS","Breadcrumbs","segments","useLocation","pathname","items","seg","path","join","label","c","toUpperCase","Link","to","item","buttonVariants","cva","variants","destructive","outline","ghost","link","success","warning","danger","xs","defaultVariants","Button","React","forwardRef","asChild","loading","iconName","iconPosition","iconSize","fullWidth","disabled","Comp","Slot","calculatedIconSize","fill","viewBox","cx","cy","r","stroke","d","renderIcon","displayName","SkipLink","href","SHORTCUT_CONFIG","f1","Header","location","isUserMenuOpen","setIsUserMenuOpen","isPaletteOpen","setIsPaletteOpen","dataSyncStatus","handlers","normalizeKey","event","parts","metaKey","ctrlKey","altKey","shiftKey","shouldHandleShortcut","tagName","isEditable","contentEditable","keyCombo","handler","config","general","view","quick","normalizedKey","useKeyboardShortcuts","envLabel","Fragment","role","tooltip","tab","Alert","AlertDescription","Badge","variantClass","Card","CardHeader","CardTitle","CardContent","Progress","clamped","style","width","Input","inputId","random","toString","substr","htmlFor","Select","options","defaultValue","multiple","searchable","clearable","onOpenChange","setIsOpen","searchTerm","setSearchTerm","selectId","filteredOptions","option","optionValue","hasValue","newIsOpen","selectedOptions","opt","selectedOption","getSelectedDisplay","X","ChevronDown","tabIndex","newValue","updatedValue","v","handleOptionSelect","Check","FinancialInput","onBlur","prefix","suffix","locale","currency","decimals","allowNegative","autoFocus","onValidation","displayValue","setDisplayValue","isFocused","setIsFocused","isValid","setIsValid","componentRef","formatValue","val","numValue","parseFloat","isNaN","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","parseValue","cleanValue","DollarSign","Percent","getIcon","onFocus","rawValue","setTimeout","select","valid","errorMessage","validateInput","onKeyPress","blur","AlertCircle","EditableCell","onSave","onCancel","isFormula","isEditing","onEdit","showEditIcon","editingValue","setEditingValue","localError","setLocalError","isHovered","setIsHovered","formatted","absValue","abs","handleSave","finalValue","handleCancel","styles","container","hover","input","editIcon","getVariantStyles","onKeyDown","onMouseEnter","onMouseLeave","Edit2","CURRENCY_CONFIG","USD","symbol","code","EUR","GBP","JPY","CAD","AUD","CHF","CNY","CurrencyInput","showCurrency","showTrend","previousValue","step","abbreviateDisplay","precision","validationMessage","setValidationMessage","currencyConfig","effectiveDecimals","effectivePlaceholder","formatCurrency","abbreviated","sign","toFixed","parseCurrency","str","multiplier","endsWith","trend","previous","getTrend","message","filled","minimal","TrendingDown","LoadingState","showIcon","spinner","gap","padding","variantStyles","subtle","pulsing","displayMessage","calculation","financial","percentage","LoadingSkeleton","height","LoadingDots","sizeClasses","i","animationDelay","animationDuration","ValidationFeedback","dismissible","onDismiss","position","AlertTriangle","CheckCircle","info","Info","bg","border","getVariantClasses","FieldValidation","ValidationList","showNumbers","ValidationSummary","errors","warnings","collapsible","isCollapsed","setIsCollapsed","totalIssues","allItems","ResponsiveTable","enableVirtualization","mobileStackedView","showDeviceToggle","viewMode","setViewMode","isMobile","setIsMobile","isTablet","setIsTablet","scrollPosition","setScrollPosition","canScrollLeft","setCanScrollLeft","canScrollRight","setCanScrollRight","checkDevice","window","innerWidth","scrollTable","direction","tableContainer","querySelector","scrollAmount","scrollBy","left","behavior","currentMode","Monitor","Smartphone","Tablet","ChevronLeft","ChevronRight","onScroll","element","scrollLeft","scrollWidth","clientWidth","scrollbarWidth","scrollSnapType","Array","_","floor"],"mappings":"8jBA8BA,MAAMA,EAA4B,CAEhCC,WAAY,CACV,CAAEC,QAAS,kDAAmDC,SAAU,cACxE,CAAED,QAAS,wBAAyBC,SAAU,eAIhDC,SAAU,CACR,CAAEF,QAAS,kFAAmFC,SAAU,WAAYE,QAAS,cAC7H,CAAEH,QAAS,8EAA+EC,SAAU,WAAYE,QAAS,wBACzH,CAAEH,QAAS,gCAAiCC,SAAU,YACtD,CAAED,QAAS,8BAA+BC,SAAU,aAItDG,KAAM,CACJ,CAAEJ,QAAS,mCAAoCC,SAAU,OAAQE,QAAS,eAC1E,CAAEH,QAAS,0BAA2BC,SAAU,OAAQE,QAAS,eACjE,CAAEH,QAAS,mCAAoCC,SAAU,SAAUE,QAAS,gBAI9EE,OAAQ,CACN,CAAEL,QAAS,gFAAiFC,SAAU,SAAUE,QAAS,gBACzH,CAAEH,QAAS,6BAA8BC,SAAU,SAAUE,QAAS,kBAKpEG,EAAmB,CAEvB,aAAc,CACZC,GAAI,aACJC,MAAO,mBACPC,YAAa,yCACbR,SAAU,aACVS,KAAMC,EACNC,SAAU,SACVC,SAAU,CAAC,OAAQ,cAAe,YAAa,QAAS,SACxDC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,WAAYC,OAAQ,UAG/D,iBAAkB,CAChBX,GAAI,iBACJC,MAAO,uBACPC,YAAa,2CACbR,SAAU,aACVS,KAAMS,EACNP,SAAU,SACVC,SAAU,CAAC,WAAY,QAAS,MAAO,UACvCC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,WAAYC,OAAQ,cAG/D,iBAAkB,CAChBX,GAAI,iBACJC,MAAO,yBACPC,YAAa,oCACbR,SAAU,aACVS,KAAMU,EACNR,SAAU,SACVC,SAAU,CAAC,WAAY,UAAW,UAAW,aAC7CC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,WAAYC,OAAQ,cAI/D,aAAc,CACZX,GAAI,aACJC,MAAO,uBACPC,YAAa,mDACbR,SAAU,WACVS,KAAMS,EACNP,SAAU,SACVC,SAAU,CAAC,MAAO,YAAa,QAAS,aAAc,OAAQ,OAAQ,MAAO,UAC7EQ,WAAY,CACV,CAAEC,KAAM,UAAWC,KAAM,SAAUd,YAAa,yBAA0Be,UAAU,IAEtFV,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRM,KAAM,MACNE,QAASV,GAAQU,SAAW,eAIhC,uBAAwB,CACtBlB,GAAI,uBACJC,MAAO,2BACPC,YAAa,kDACbR,SAAU,WACVS,KAAMgB,EACNd,SAAU,eACVC,SAAU,CAAC,cAAe,WAAY,cAAe,OAAQ,SAAU,QACvEQ,WAAY,CACV,CAAEC,KAAM,WAAYC,KAAM,SAAUd,YAAa,gDAAiDe,UAAU,IAE9GV,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,kBACRU,SAAUZ,GAAQY,UAAY,UAIlC,cAAe,CACbpB,GAAI,cACJC,MAAO,6BACPC,YAAa,0CACbR,SAAU,WACVS,KAAMkB,EACNf,SAAU,CAAC,QAAS,QAAS,aAAc,cAAe,QAC1DC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,qBAI3C,cAAe,CACbV,GAAI,cACJC,MAAO,wBACPC,YAAa,iDACbR,SAAU,OACVS,KAAMmB,EACNjB,SAAU,SACVC,SAAU,CAAC,SAAU,OAAQ,OAAQ,UAAW,UAAW,YAC3DQ,WAAY,CACV,CAAEC,KAAM,QAASC,KAAM,SAAUd,YAAa,qBAAsBqB,UAAU,IAEhFhB,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,SACRc,MAAOhB,GAAQgB,SAInB,cAAe,CACbxB,GAAI,cACJC,MAAO,wBACPC,YAAa,gDACbR,SAAU,OACVS,KAAMsB,EACNpB,SAAU,SACVC,SAAU,CAAC,SAAU,SAAU,QAAS,MAAO,OAAQ,QACvDC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,iBAG3C,cAAe,CACbV,GAAI,cACJC,MAAO,kBACPC,YAAa,uDACbR,SAAU,SACVS,KAAMuB,EACNrB,SAAU,SACVC,SAAU,CAAC,SAAU,WAAY,MAAO,QAAS,aAAc,QAC/DQ,WAAY,CACV,CAAEC,KAAM,SAAUC,KAAM,SAAUd,YAAa,yCAA0Ce,UAAU,IAErGV,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,SACRiB,OAAQnB,GAAQmB,QAAU,SAK9B,eAAgB,CACd3B,GAAI,eACJC,MAAO,eACPC,YAAa,wCACbR,SAAU,SACVS,KAAMyB,EACNtB,SAAU,CAAC,QAAS,QAAS,gBAAiB,OAAQ,aACtDQ,WAAY,CACV,CAAEC,KAAM,OAAQC,KAAM,SAAUd,YAAa,oCAAqCe,UAAU,GAC5F,CAAEF,KAAM,OAAQC,KAAM,SAAUd,YAAa,oBAAqBe,UAAU,IAE9EV,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRM,KAAMR,GAAQQ,MAAQ,OACtBnB,KAAMW,GAAQX,QAIlB,gBAAiB,CACfG,GAAI,gBACJC,MAAO,uBACPC,YAAa,qCACbR,SAAU,SACVS,KAAM0B,EACNvB,SAAU,CAAC,UAAW,QAAS,SAAU,QAAS,UAClDC,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRM,KAAM,OACNnB,KAAM,aAIV,kBAAmB,CACjBG,GAAI,kBACJC,MAAO,kBACPC,YAAa,uCACbR,SAAU,SACVS,KAAM2B,EACNxB,SAAU,CAAC,SAAU,gBAAiB,SAAU,YAAa,SAC7DC,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRM,KAAM,MACNnB,KAAM,aAKV,gBAAiB,CACfG,GAAI,gBACJC,MAAO,uBACPC,YAAa,iCACbR,SAAU,WACVS,KAAMS,EACNN,SAAU,CAAC,QAAS,OAAQ,UAAW,SACvCC,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRQ,QAAS,UAIb,oBAAqB,CACnBlB,GAAI,oBACJC,MAAO,2BACPC,YAAa,4CACbR,SAAU,WACVS,KAAMS,EACNN,SAAU,CAAC,YAAa,OAAQ,UAAW,SAC3CC,QAAS,CAACC,EAAQC,KAAO,CACvBC,OAAQ,eACRQ,QAAS,UAKb,gBAAiB,CACflB,GAAI,gBACJC,MAAO,wBACPC,YAAa,yBACbR,SAAU,OACVS,KAAM4B,EACN1B,SAAU,SACVC,SAAU,CAAC,OAAQ,QAAS,UAC5BC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,UAG3C,kBAAmB,CACjBV,GAAI,kBACJC,MAAO,0BACPC,YAAa,mCACbR,SAAU,aACVS,KAAM6B,EACN1B,SAAU,CAAC,WAAY,UAAW,SAAU,OAAQ,QACpDC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,qBAG3CuB,SAAY,CACVjC,GAAI,WACJC,MAAO,gBACPC,YAAa,oCACbR,SAAU,WACVS,KAAM+B,EACN5B,SAAU,CAAC,WAAY,cAAe,SAAU,WAChDC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,mBAG3CyB,KAAQ,CACNnC,GAAI,OACJC,MAAO,WACPC,YAAa,0CACbR,SAAU,OACVS,KAAMiC,EACN/B,SAAU,KACVC,SAAU,CAAC,OAAQ,gBAAiB,WAAY,WAChDC,QAAS,CAACC,EAAQC,KAAO,CAAQC,OAAQ,gBCtRvC2B,EAAiB,EACrBC,SACAC,UACAC,mBACAC,iBAAiB,CAAA,EACjBC,iBAAiB,GACjBC,kBAAkB,CAAA,MAElB,MAAOnB,EAAOoB,GAAYC,EAAAA,SAAS,KAC5BC,EAAeC,GAAoBF,EAAAA,SAAS,IAC5CG,EAAgBC,GAAqBJ,EAAAA,SAAS,IAC/CK,EAAWC,EAAAA,OAAO,MAClBC,EAAUD,EAAAA,OAAO,OAGjBE,eACJA,EAAAC,eACAA,EAAAC,sBACAA,EAAAC,eAEAA,GDsQ8B,EAACf,EAAiB,MAClD,MAAOgB,EAAcC,GAAmBb,EAAAA,SAAS,KAC/C,MAAMc,EAAQC,aAAaC,QAAQ,gBACnC,OAAOF,EAAQG,KAAKC,MAAMJ,GAAS,CAAA,KAG9BK,EAAcC,GAAmBpB,EAAAA,SAAS,KAC/C,MAAMc,EAAQC,aAAaC,QAAQ,mBACnC,OAAOF,EAAQG,KAAKC,MAAMJ,GAAS,CAAA,IAI/BO,EAAuBC,cAAa3C,IACxC,MAAM4C,EAAU,GAEhB,IAAK,MAAO1E,EAAU2E,KAAaC,OAAOC,QAAQhF,GAChD,IAAK,MAAME,KAAW4E,EAAU,CAC9B,MAAMG,EAAQhD,EAAMgD,MAAM/E,EAAQA,SAC9B+E,GACFJ,EAAQK,KAAK,CACX/E,SAAUD,EAAQC,SAClBE,QAASH,EAAQG,QACjBkB,WAAY0D,EAAME,MAAM,GAAGC,OAAOC,SAClCC,WAAYL,EAAM,GAAGM,OAAStD,EAAMsD,QAG1C,CAGF,OAAOV,EAAQW,KAAK,CAACC,EAAGC,IAAMA,EAAEJ,WAAaG,EAAEH,aAC9C,IAGGxB,EAAiBc,cAAa3C,IAClC,IAAKA,EAAM0D,OAAQ,MAAO,GAE1B,MAAMC,EAAkB3D,EAAM4D,cAAcF,OACtCd,EAAU,GAGViB,EAAYnB,EAAqB1C,GA0DvC,OAvDA8C,OAAOgB,OAAOvF,GAAkBwF,QAAQ3F,IACtC,IAAI4F,EAAQ,EAGR5F,EAAQK,MAAMmF,gBAAkBD,IAClCK,GAAS,KAIP5F,EAAQK,MAAMmF,cAAcK,SAASN,KACvCK,GAAS,IAIP5F,EAAQM,YAAYkF,cAAcK,SAASN,KAC7CK,GAAS,IAQXA,GAAiC,GAJV5F,EAAQU,SAASqE,OAAOe,GAC7CA,EAAQN,cAAcK,SAASN,IAC/BA,EAAgBM,SAASC,EAAQN,gBAEXN,OAGxB,MAAMa,EAAalC,EAAa7D,EAAQI,KAAO,EAC/CwF,GAASI,KAAKC,IAAiB,EAAbF,EAAgB,IAG9BlD,EAAeqD,YACQ,eAArBlG,EAAQF,UAA6BE,EAAQI,GAAGyF,SAAShD,EAAeqD,aAC1EN,GAAS,IAEP5F,EAAQF,WAAa+C,EAAeqD,YACtCN,GAAS,KAKb,MAAMO,EAAUV,EAAUW,KAAKC,GAAMA,EAAGrG,UAAYA,EAAQI,IACxD+F,IACFP,GAA8B,GAArBO,EAAQlB,YAGfW,EAAQ,GACVpB,EAAQK,KAAK,IACR7E,EACH4F,QACAG,aACAO,cAAeV,EAAQ,OAKtBpB,EACJW,KAAK,CAACC,EAAGC,IAAMA,EAAEO,MAAQR,EAAEQ,OAC3Bd,MAAM,EAAG,IACX,CAACR,EAAsBT,EAAchB,IAGlCc,EAAwBY,EAAAA,YAAY,KACxC,MAAMgC,EAAa,GAGnB,OAAQ1D,EAAeqD,WACrB,IAAK,OACL,IAAK,cACHK,EAAW1B,KACT1E,EAAiB,eACjBA,EAAiB,eACjBA,EAAiB,mBAEnB,MACF,IAAK,WACHoG,EAAW1B,KACT1E,EAAiB,cACjBA,EAAiB,wBACjBA,EAAiB,mBAEnB,MACF,IAAK,WACHoG,EAAW1B,KACT1E,EAAiB,gBACjBA,EAAiB,eACjBA,EAAiB,yBAEnB,MACF,QACEoG,EAAW1B,KACT1E,EAAiB,cACjBA,EAAiB,eACjBA,EAAuB,MAK7B,MAAMqG,EAAmB9B,OAAOC,QAAQd,GACrCsB,KAAK,EAAC,CAAGC,IAAI,CAAGC,KAAOA,EAAID,GAC3BN,MAAM,EAAG,GACT2B,IAAI,EAAErG,KAAQD,EAAiBC,IAC/B2E,OAAOC,SAEV,MAAO,IAAIuB,KAAeC,GAAkB1B,MAAM,EAAG,IACpD,CAACjC,EAAgBgB,IAGdH,EAAiBa,EAAAA,YAAYmC,MAAMC,EAAW/F,EAAS,CAAA,KAC3D,MAAMZ,EAAUG,EAAiBwG,GACjC,IAAK3G,EACH,MAAM,IAAI4G,MAAM,sBAAsBD,KAGxC,IACE,MAAME,QAAe7G,EAAQW,QAAQC,EAAQiC,GAQ7C,OALAiB,EAAgBgD,IAAI,IACfA,EACHH,CAACA,IAAaG,EAAKH,IAAc,GAAK,KAGjCE,CACT,CAAE,MAAOE,GAEP,MAAMA,CACR,GACC,CAAClE,IAGEe,EAAiBW,EAAAA,YAAY,CAACoC,EAAW/E,KACxCA,EAAM0D,QAEXjB,EAAgByC,IAAI,IACfA,EACHH,CAACA,GAAY,IACRG,EAAKH,GACRK,QAAS,IAAKF,EAAKH,IAAYK,SAAW,GAAKpF,GAAOkD,UACtDmC,SAAUC,KAAKC,WAGlB,IAGGC,EAAuB7C,EAAAA,YAAY,KACvC,MAAM8C,EAAa,CAAA,EAOnB,OANA3C,OAAOgB,OAAOvF,GAAkBwF,QAAQ3F,IACjCqH,EAAWrH,EAAQF,YACtBuH,EAAWrH,EAAQF,UAAY,IAEjCuH,EAAWrH,EAAQF,UAAU+E,KAAK7E,KAE7BqH,GACN,IAWH,OARAC,EAAAA,UAAU,KACRtD,aAAauD,QAAQ,eAAgBrD,KAAKsD,UAAU3D,KACnD,CAACA,IAEJyD,EAAAA,UAAU,KACRtD,aAAauD,QAAQ,kBAAmBrD,KAAKsD,UAAUpD,KACtD,CAACA,IAEG,CACLX,iBACAC,iBACAC,wBACAyD,uBACAxD,iBACAU,uBACAmD,gBAAiBtH,EACjB0D,eACAO,iBC7dEsD,CAAmB7E,GAGjB8E,EAAgBC,EAAAA,QAAQ,IACvBhG,EAAM0D,OA0BJ7B,EAAe7B,GAHb,IArBQkB,EAAegC,MAAM,EAAG,GAAG2B,IAAIoB,IAAA,IAAaA,EAAK/H,SAAU,eACvD6D,IAAwBmB,MAAM,EAAG,GAAG2B,IAAIoB,IAAA,IAAaA,EAAK/H,SAAU,eAErF,CACEM,GAAI,UACJC,MAAO,uBACPC,YAAa,6CACbC,KAAMS,EACNlB,SAAU,UACVY,SAAU,CAAC,MAAO,YAAa,QAAS,QAE1C,CACEN,GAAI,uBACJC,MAAO,2BACPC,YAAa,6CACbC,KAAMU,EACNnB,SAAU,UACVY,SAAU,CAAC,cAAe,WAAY,OAAQ,iBAQnD,CAACkB,EAAOkB,EAAgBW,EAAgBE,IAG3C2D,EAAAA,UAAU,KACRnE,EAAiB,IAChB,CAACwE,IAGJL,EAAAA,UAAU,KACJ5E,GAAUY,EAASwE,UACrBxE,EAASwE,QAAQC,QACjB/E,EAAS,IACTG,EAAiB,KAElB,CAACT,IAGJ4E,EAAAA,UAAU,KACR,IAAK5E,EAAQ,OAEb,MAAMsF,EAAiBC,IACrB,OAAQA,EAAEC,KACR,IAAK,YACHD,EAAEE,iBACFhF,EAAiB2D,GAAQd,KAAKC,IAAIa,EAAO,EAAGa,EAAczC,OAAS,IACnE,MACF,IAAK,UACH+C,EAAEE,iBACFhF,KAAyB6C,KAAKoC,IAAItB,EAAO,EAAG,IAC5C,MACF,IAAK,QACHmB,EAAEE,iBACER,EAAczE,IAChBmF,EAAqBV,EAAczE,IAErC,MACF,IAAK,SACH+E,EAAEE,iBACFxF,MAQN,OADA2F,SAASC,iBAAiB,UAAWP,GAC9B,IAAMM,SAASE,oBAAoB,UAAWR,IACpD,CAACtF,EAAQQ,EAAeyE,EAAehF,IAG1C,MAAM0F,EAAuB3B,MAAM1G,IACjC,IAEEqD,EAAkByD,GAAQ,CAAC9G,KAAY8G,EAAKhC,MAAM,EAAG,KAGrDlB,EAAe5D,EAAQI,GAAIwB,GAG3B,MAAMiF,QAAenD,EAAe1D,EAAQI,GAAIJ,EAAQY,QAGpDgC,GACFA,EAAiB5C,EAAS6G,GAI5BlE,GACF,OAASoE,GAGT,GAyBI0B,EAAoB3I,IACxB,OAAQA,GACN,IAAK,SAAU,MAAO,gBACtB,IAAK,YAAa,MAAO,iBACzB,IAAK,UAAW,MAAO,mBACvB,IAAK,aAWL,QAAS,MAAO,iBAVhB,IAAK,WAAY,MAAO,kBACxB,IAAK,OAAQ,MAAO,kBACpB,IAAK,SAAU,MAAO,iBACtB,IAAK,SAAU,MAAO,kBACtB,IAAK,SAAU,MAAO,gBACtB,IAAK,gBAAiB,MAAO,gBAC7B,IAAK,aAAc,MAAO,eAC1B,IAAK,WAAY,MAAO,gBACxB,IAAK,WAAY,MAAO,iBACxB,IAAK,OAAQ,MAAO,kBAMlB4I,EAAiB,CAACC,EAAM/G,KAC5B,IAAKA,EAAM0D,OAAQ,OAAOqD,EAE1B,MAAMC,EAAQ,IAAIC,OAAO,IAAIjH,EAAMkH,QAAQ,sBAAuB,WAAY,MAG9E,OAFcH,EAAKI,MAAMH,GAEZnC,IAAI,CAACuC,EAAMC,IACtBL,EAAMM,KAAKF,GACTG,EAAAA,IAAC,OAAA,CAAiBC,UAAU,+CACzBC,SAAAL,GADQC,GAGTD,IAIR,OAAKtG,QAGF4G,EAAA,CACCD,SAAAF,EAAAA,IAACI,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,KAAM,CAAEF,QAAS,GACjBN,UAAU,wFACVS,QAASlH,EAET0G,SAAAS,EAAAA,KAACP,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGK,MAAO,IAAMC,OACpCL,QAAS,CAAED,QAAS,EAAGK,MAAO,EAAGC,EAAG,GACpCJ,KAAM,CAAEF,QAAS,EAAGK,MAAO,IAAMC,OACjCC,WAAY,CAAE7I,KAAM,SAAU8I,SAAU,IACxCd,UAAU,+FACVS,QAAU5B,GAAMA,EAAEkC,kBAGlBd,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,oEACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,6BACbC,SAAAF,EAAAA,IAACiB,GAAQC,KAAM,GAAIjB,UAAU,iBAE/BU,EAAAA,KAAC,MAAA,CAAIV,UAAU,SACbC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAGC,UAAU,+BAA+BC,SAAA,oBAC7CF,EAAAA,IAAC,IAAA,CAAEC,UAAU,yBAAyBC,SAAA,wDAExCS,EAAAA,KAAC,MAAA,CAAIV,UAAU,iDACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,iEAAiEC,SAAA,QAChFF,EAAAA,IAAC,QAAKE,SAAA,mBAKVS,EAAAA,KAAC,MAAA,CAAIV,UAAU,yCACbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,WACbC,SAAA,CAAAF,EAAAA,IAACzH,EAAA,CAAO2I,KAAM,GAAIjB,UAAU,sEAC5BD,EAAAA,IAAC,QAAA,CACCmB,IAAKhH,EACLlC,KAAK,OACLmJ,MAAO3I,EACP4I,SAAWvC,GAAMjF,EAASiF,EAAElH,OAAOwJ,OACnCE,YAAY,qDACZrB,UAAU,gMAKZxH,GACAkI,EAAAA,KAAC,MAAA,CAAIV,UAAU,4BACbC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAU,yBAAyBC,SAAA,SACxC,CAAC,mBAAoB,0BAA2B,gBAAiB,qBAAqB5C,IAAKiE,GAC1FZ,EAAAA,KAAC,SAAA,CAECD,QAAS,IAAM7G,EAAS0H,GACxBtB,UAAU,4FACXC,SAAA,CAAA,IACGqB,EAAI,MAJDA,UAYfvB,EAAAA,IAAC,MAAA,CAAIC,UAAU,2BAA2BkB,IAAK9G,EAC5C6F,SAAyB,IAAzB1B,EAAczC,OACb4E,OAAC,MAAA,CAAIV,UAAU,kBACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,wFACbC,SAAAF,EAAAA,IAACzH,GAAO2I,KAAM,GAAIjB,UAAU,qBAE9BD,EAAAA,IAAC,KAAA,CAAGC,UAAU,kCAAkCC,SAAA,sBAChDF,EAAAA,IAAC,IAAA,CAAEC,UAAU,yBAAyBC,SAAA,kGAKvC,MAAA,CAAID,UAAU,OACZC,SAAA1B,EAAclB,IAAI,CAACzG,EAASiJ,KAC3B,MAAM0B,EAzIE,CAAC7K,IACvB,OAAQA,GACN,IAAK,SAAU,OAAO8K,EACtB,IAAK,YAAa,OAAOC,EACzB,IAAK,UAAW,OAAO5J,EACvB,IAAK,aAAc,OAAO6J,EAC1B,IAAK,WAAY,OAAO9J,EACxB,IAAK,OAAQ,OAAOR,EACpB,IAAK,SAAU,OAAOsB,EACtB,IAAK,SAAU,OAAOD,EACtB,IAAK,SAAU,OAAOG,EACtB,IAAK,gBAAiB,OAAO+I,EAC7B,IAAK,aAAc,OAAOC,EAC1B,IAAK,WAAY,OAAOC,EACxB,IAAK,WAAY,OAAO3I,EACxB,IAAK,OAAQ,OAAOE,EACpB,QAAS,OAAO4H,IAyHiBc,CAAgBlL,EAAQF,UACvCqL,EAAcnL,EAAQO,KACtB6K,EAAanC,IAAU/F,EAE7B,OACE4G,EAAAA,KAACP,EAAOC,IAAP,CAECC,QAAS,CAAEC,QAAS,EAAGM,EAAG,IAC1BL,QAAS,CAAED,QAAS,EAAGM,EAAG,GAC1BC,WAAY,CAAEoB,MAAe,IAARpC,GACrBG,UAAW,iFACTgC,EACI,wCACA,qBAENvB,QAAS,IAAMxB,EAAqBrI,GAGpCqJ,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAW,qBACTgC,EAAa,cAAgB,gBAG/B/B,SAAAF,EAAAA,IAACwB,GAAaN,KAAM,GAAIjB,UAAWX,EAAiBzI,EAAQF,cAI7DqL,GACChC,EAAAA,IAAC,MAAA,CACCC,UAAW,mBACTgC,EAAa,cAAgB,gBAG/B/B,SAAAF,EAAAA,IAACgC,EAAA,CACCd,KAAM,GAAIjB,UACRgC,EAAa,gBAAkB,qBAOvCtB,EAAAA,KAAC,MAAA,CAAIV,UAAU,iBACbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,+BACbC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CACCC,UAAW,yBACTgC,EAAa,gBAAkB,kBAGhC/B,SAAAX,EAAe1I,EAAQK,MAAOuB,KAEhC5B,EAAQS,UACP0I,MAAC,MAAA,CAAIC,UAAU,0BACZC,SAAArJ,EAAQS,SAASsI,MAAM,KAAKtC,IAAI,CAACyB,EAAKoD,IACrCnC,EAAAA,IAAC,MAAA,CAAcC,UAAU,4DACtBC,SAAAnB,GADOoD,SAOlBnC,EAAAA,IAAC,IAAA,CACCC,UAAW,qBACTgC,EAAa,gBAAkB,kBAGhC/B,SAAAX,EAAe1I,EAAQM,YAAasB,KAIvCkI,EAAAA,KAAC,MAAA,CAAIV,UAAU,+BACbC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CACCC,UAAW,qCACTgC,EAAa,4BAA8B,+BAG5C/B,SAAArJ,EAAQF,WAEVE,EAAQ+F,YACP+D,OAAC,OAAA,CAAKV,UAAU,yBAAyBC,SAAA,CAAA,QACjCrJ,EAAQ+F,WAAW,YAG5B/F,EAAQuL,OACPpC,EAAAA,IAAC,OAAA,CAAKC,UAAU,+DAA+DC,SAAA,cAQpF+B,GACCjC,EAAAA,IAACI,EAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG8B,GAAG,IAC1B7B,QAAS,CAAED,QAAS,EAAG8B,EAAG,GAC1BpC,UAAU,gBAEVC,SAAAF,EAAAA,IAAC2B,EAAA,CAAWT,KAAM,SA5FjB,GAAGrK,EAAQI,MAAM6I,WAuGlCa,EAAAA,KAAC,MAAA,CAAIV,UAAU,2GACbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,yDAAyDC,SAAA,OACxEF,EAAAA,IAAC,QAAKE,SAAA,gBAERS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,yDAAyDC,SAAA,UACxEF,EAAAA,IAAC,QAAKE,SAAA,kBAGVS,EAAAA,KAAC,MAAA,CAAIV,UAAU,iBACZC,SAAA,CAAA1B,EAAczC,OAAO,WAAkC,IAAzByC,EAAczC,OAAe,IAAM,GAAG,0BAzM7D,MC3MtB,SAASuG,GAAKtK,KACZA,EAAAkJ,KACAA,EAAO,GAAAqB,MACPA,EAAQ,eAAAtC,UACRA,EAAY,GAAAuC,YACZA,EAAc,KACXC,IAEH,MAAMC,EAAgBC,EAAY3K,GAElC,OAAK0K,EAaH1C,EAAAA,IAAC0C,EAAA,CACCxB,OACAqB,QACAC,cACAvC,eACIwC,IAhBJzC,EAAAA,IAAC3G,EAAA,CACC6H,OACAqB,MAAM,OACNC,cACAvC,eACIwC,GAcZ,CAEAH,EAAKM,UAAY,CACf5K,KAAM6K,EAAUC,OAAOC,WACvB7B,KAAM2B,EAAUG,OAChBT,MAAOM,EAAUC,OACjB7C,UAAW4C,EAAUC,OACrBN,YAAaK,EAAUG,6kCCxCnBC,GAAiB,EACrB/B,OAAO,UACPjB,YAAY,GACZT,OAAO,aACP0D,YAAW,EACXC,UAAU,cAEV,MAOMC,EAAiB,CACrBC,QAAS,eACTC,UAAW,iBACXC,MAAO,wBACPC,MAAO,cAUT,cACG,MAAA,CAAIvD,UAAWwD,EAAG,sDAAuDxD,GACxEC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAWwD,EACT,yEAzBY,CAClBC,GAAI,UACJC,QAAS,UACTC,GAAI,YACJC,GAAI,aAsBc3C,GACZkC,EAAeD,MAGlBD,GACClD,EAAAA,IAAC,IAAA,CAAEC,UAAWwD,EAAG,cAjBC,CACtBC,GAAI,UACJC,QAAS,UACTC,GAAI,YACJC,GAAI,WAagD3C,GAAOkC,EAAeD,IAAYjD,SAAAV,QCrCpFsE,GAAS,CACb,4BAA6B,YAC7B,+BAAgC,cAChC,sCAAuC,WACvC,mBAAoB,oBAGhBC,GAAc,KAClB,MACMC,EADWC,IACSC,SAAStE,MAAM,KAAKhE,OAAOC,SAE/CsI,EAAQH,EAAS1G,IAAI,CAAC8G,EAAKjC,KAC/B,MAAMkC,EAAO,IAAIL,EAASrI,MAAM,EAAGwG,EAAM,GAAGmC,KAAK,OACjD,MAAO,CACLC,MAAOT,GAAOM,IAAQA,EAAIzE,QAAQ,KAAM,KAAKA,QAAQ,QAAS6E,GAAKA,EAAEC,eACrEJ,UAIJ,aACG,MAAA,CAAI,aAAW,aACdnE,SAAAS,EAAAA,KAAC,KAAA,CAAGV,UAAU,wDACZC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CACCE,eAACwE,EAAA,CAAKC,GAAG,IAAI1E,UAAU,wBAAwBC,oBAEhDiE,EAAM7G,IAAI,CAACsH,EAAMzC,IAChBxB,OAAC,KAAA,CAAmBV,UAAU,0BAC5BC,SAAA,CAAAF,MAAC,OAAA,CAAK,cAAY,OAAOC,UAAU,wBAAwBC,SAAA,MAC1DiC,EAAMgC,EAAMpI,OAAS,QACnB2I,EAAA,CAAKC,GAAIC,EAAKP,KAAMpE,UAAU,wBAAyBC,SAAA0E,EAAKL,QAE7DvE,EAAAA,IAAC,OAAA,CAAKC,UAAU,kBAAkB,eAAa,OAAQC,SAAA0E,EAAKL,UALvDK,EAAKP,aCtBlBQ,GAAiBC,EACrB,yRACA,CACEC,SAAU,CACR5B,QAAS,CACPQ,QAAS,yDACTqB,YAAa,qEACbC,QAAS,iFACT3B,UAAW,+DACX4B,MAAO,+CACPC,KAAM,kDACNC,QAAS,yDACTC,QAAS,yDACTC,OAAQ,oDAEVpE,KAAM,CACJyC,QAAS,iBACTD,GAAI,sBACJE,GAAI,uBACJxM,KAAM,YACNmO,GAAI,8BACJ1B,GAAI,oCAGR2B,gBAAiB,CACfrC,QAAS,UACTjC,KAAM,aAKNuE,GAASC,EAAMC,WACnB,EAEI1F,YACAkD,UACAjC,OACA0E,WAAU,EACV1F,WACA2F,WAAU,EACVC,WAAW,KACXC,eAAe,OACfC,WAAW,KACXC,aAAY,EACZC,YAAW,KACRzD,GAELtB,KAEA,MAAMgF,EAAOP,EAAUQ,EAAO,SAYxBC,EAAqBL,GATP,CAClBT,GAAI,GACJ7B,GAAI,GACJC,QAAS,GACTC,GAAI,GACJC,GAAI,GACJzM,KAAM,IAG2C8J,IAAS,GAGtD+B,EAAiB,IACrBtC,EAAAA,KAAC,MAAA,CACCV,UAAU,kCACVqG,KAAK,OACLC,QAAQ,YACR,eAAa,OAEbrG,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCC,UAAU,aACVuG,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPnE,YAAY,MAEdxC,EAAAA,IAAC,OAAA,CACCC,UAAU,aACVqG,KAAK,eACLM,EAAE,uHAMFC,EAAa,IACZf,EAGH9F,EAAAA,IAACsC,EAAA,CACCtK,KAAM8N,EACN5E,KAAMmF,EACNpG,UAAWwD,EACTvD,GAA6B,SAAjB6F,GAA2B,OACvC7F,GAA6B,UAAjB6F,GAA4B,UARxB,KAcxB,OACEpF,EAAAA,KAACwF,EAAA,CACClG,UAAWwD,EAAGoB,GAAe,CAAE1B,UAASjC,OAAMjB,cAAcgG,GAAa,UACzE9E,MACA+E,SAAUA,GAAYL,KAClBpD,EAEHvC,SAAA,CAAA2F,SAAY5C,EAAA,IACZ6C,GAA6B,SAAjBC,GAA2Bc,IACvC3G,EACA4F,GAA6B,UAAjBC,GAA4Bc,SAMjDpB,GAAOqB,YAAc,SC5HrB,MAAMC,GAAW,EAAGC,OAAO,gBAAiB9G,WAAW,0BAEnDF,EAAAA,IAAC,IAAA,CACCgH,OACA/G,UAAU,kSAOTC,aCVD+G,GAAkB,CAEtB,QAAS,CAAEtP,OAAQ,uBAAwBR,YAAa,wBACxD,SAAU,CAAEQ,OAAQ,uBAAwBR,YAAa,wBAGzD,SAAU,CAAEQ,OAAQ,WAAYC,OAAQ,OAAQT,YAAa,oBAC7D,SAAU,CAAEQ,OAAQ,WAAYC,OAAQ,WAAYT,YAAa,kBACjE,SAAU,CAAEQ,OAAQ,WAAYC,OAAQ,WAAYT,YAAa,kBAGjE,SAAU,CAAEQ,OAAQ,aAAcR,YAAa,wBAC/C,SAAU,CAAEQ,OAAQ,OAAQR,YAAa,yBACzC,SAAU,CAAEQ,OAAQ,cAAeR,YAAa,eAChD,SAAU,CAAEQ,OAAQ,cAAeR,YAAa,mBAChD,SAAU,CAAEQ,OAAQ,cAAeR,YAAa,eAGhD,eAAgB,CAAEQ,OAAQ,uBAAwBR,YAAa,4BAC/D,eAAgB,CAAEQ,OAAQ,cAAeR,YAAa,8BAGtD,eAAgB,CAAEQ,OAAQ,kBAAmBR,YAAa,2BAC1D+P,GAAM,CAAEvP,OAAQ,OAAQR,YAAa,aAGrC,QAAS,CAAEQ,OAAQ,gBAAiBQ,QAAS,OAAQhB,YAAa,wBAClE,QAAS,CAAEQ,OAAQ,gBAAiBQ,QAAS,OAAQhB,YAAa,4BAClE,QAAS,CAAEQ,OAAQ,gBAAiBQ,QAAS,QAAShB,YAAa,yBACnE,QAAS,CAAEQ,OAAQ,gBAAiBQ,QAAS,OAAQhB,YAAa,0BCrB9DgQ,GAAS,KACb,MAAMC,EAAWnD,KACVoD,EAAgBC,GAAqBxN,EAAAA,UAAS,IAC9CyN,EAAeC,GAAoB1N,EAAAA,UAAS,GA6D7C2N,EAnBU,YDrBkB,EAACC,EAAW,MAE9C,MAAMC,EAAevM,cAAawM,IAChC,MAAMC,EAAQ,IAEVD,EAAME,SAAWF,EAAMG,UACzBF,EAAMnM,KAAKkM,EAAME,QAAU,MAAQ,QAEjCF,EAAMI,QAAQH,EAAMnM,KAAK,OACzBkM,EAAMK,UAAUJ,EAAMnM,KAAK,SAG/B,IAAIqD,EAAM6I,EAAM7I,IAAI1C,cAUpB,MATY,MAAR0C,IAAaA,EAAM,SACX,WAARA,IAAkBA,EAAM,OAChB,YAARA,IAAmBA,EAAM,MACjB,cAARA,IAAqBA,EAAM,QACnB,cAARA,IAAqBA,EAAM,QACnB,eAARA,IAAsBA,EAAM,SAEhC8I,EAAMnM,KAAKqD,GAEJ8I,EAAMvD,KAAK,MACjB,IAGG4D,EAAuB9M,cAAaxD,IAExC,MAAMuQ,EAAUvQ,EAAOuQ,QAAQ9L,cACzB+L,EAAwC,SAA3BxQ,EAAOyQ,gBAG1B,OAFgB,CAAC,QAAS,WAAY,UAAU3L,SAASyL,KAErCC,GACnB,IAGGvJ,EAAgBzD,cAAawM,IAEjC,IAAKM,EAAqBN,EAAMhQ,QAC9B,OAGF,MAAM0Q,EAAWX,EAAaC,GACxBtQ,EAAW2P,GAAgBqB,GAEjC,GAAIhR,EAAU,CACZsQ,EAAM5I,iBACN4I,EAAM5G,kBAGN,MAAMuH,EAAUb,EAASpQ,EAASK,QAC9B4Q,GACFA,EAAQjR,EAIZ,GACC,CAACqQ,EAAcO,EAAsBR,IAGxCvJ,EAAAA,UAAU,KACRgB,SAASC,iBAAiB,UAAWP,GAAe,GAE7C,KACLM,SAASE,oBAAoB,UAAWR,GAAe,KAExD,CAACA,IAGoBzD,EAAAA,YAAY,IAC3BG,OAAOC,QAAQyL,IAAiB3J,IAAI,EAAEyB,EAAKyJ,MAAO,CACvDzJ,SACGyJ,KAEJ,IAG4BpN,EAAAA,YAAY,KACzC,MAAM8C,EAAa,CACjBuK,QAAS,GACThS,WAAY,GACZG,SAAU,GACVE,KAAM,GACN4R,KAAM,GACNC,MAAO,IAqBT,OAlBApN,OAAOC,QAAQyL,IAAiBzK,QAAQ,EAAEuC,EAAKyJ,MAC7C,MAAMlR,EAAW,CAAEyH,SAAQyJ,GAEL,aAAlBA,EAAO7Q,OACTuG,EAAWzH,WAAWiF,KAAKpE,GAClBkR,EAAO7Q,OAAO+E,SAAS,aAAiC,eAAlB8L,EAAO7Q,QAA6C,gBAAlB6Q,EAAO7Q,OACxFuG,EAAWtH,SAAS8E,KAAKpE,GAChBkR,EAAO7Q,OAAO+E,SAAS,SAA6B,gBAAlB8L,EAAO7Q,QAA8C,gBAAlB6Q,EAAO7Q,OACrFuG,EAAWpH,KAAK4E,KAAKpE,GACZkR,EAAO7Q,OAAO+E,SAAS,WAA+B,SAAlB8L,EAAO7Q,OACpDuG,EAAWwK,KAAKhN,KAAKpE,GACM,kBAAlBkR,EAAO7Q,OAChBuG,EAAWyK,MAAMjN,KAAKpE,GAEtB4G,EAAWuK,QAAQ/M,KAAKpE,KAIrB4G,GACN,IAGoB9C,cAAakN,GAC3BA,EACJ1I,MAAM,KACNtC,IAAIyB,IACH,OAAQA,GACN,IAAK,MAAO,MAAO,IACnB,IAAK,OAAQ,MAAO,OACpB,IAAK,MAAO,MAAO,MACnB,IAAK,QAAS,MAAO,QACrB,IAAK,QAAS,MAAO,QACrB,IAAK,MAAO,MAAO,MACnB,IAAK,KAAM,MAAO,IAClB,IAAK,OAAQ,MAAO,IACpB,IAAK,OAAQ,MAAO,IACpB,IAAK,QAAS,MAAO,IACrB,QAAS,OAAOA,EAAI0F,iBAGvBH,KAAK,OACP,IAGyBlJ,cAAakN,IAC/BrB,GAAgBqB,EAASjM,eAChC,IAGsBjB,EAAAA,YAAY,CAACkN,EAAUE,KAC9C,MAAMI,EAAgBN,EAASjM,cAC/B,OAAI4K,GAAgB2B,KAKpB3B,GAAgB2B,GAAiBJ,GAC1B,IACN,KCpGHK,CAAqB,CACnB,uBAAwB,IAAMrB,GAAiB,KAKjD,MAAMsB,EAAsC,aAO5C,OACEnI,EAAAA,KAAAoI,WAAA,CACE7I,SAAA,CAAAF,EAAAA,IAAC+G,GAAA,IACD/G,EAAAA,IAAC,UAAOC,UAAU,8EAA8E+I,KAAK,SACnG9I,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,gCAEbC,SAAA,CAAAF,EAAAA,IAAC,OAAIC,UAAU,oBACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,8BACbC,SAAA,OAAC,MAAA,CAAID,UAAU,iEACbC,SAAAF,EAAAA,IAACsC,EAAA,CAAKtK,KAAK,aAAakJ,KAAM,GAAIqB,MAAM,kBAEzC,OAAA,CAAKtC,UAAU,wCAAwCC,SAAA,mBAK5DF,EAAAA,IAAC,MAAA,CAAIC,UAAU,mCAAmC+I,KAAK,aAAa,aAAW,kBAC5E9I,SA9FY,CACrB,CACEjJ,GAAI,YACJsN,MAAO,YACPF,KAAM,6BACN4E,QAAS,sFAEX,CACEhS,GAAI,cACJsN,MAAO,cACPF,KAAM,gCACN4E,QAAS,2EAEX,CACEhS,GAAI,WACJsN,MAAO,WACPF,KAAM,uCACN4E,QAAS,gFAEX,CACEhS,GAAI,mBACJsN,MAAO,mBACPF,KAAM,oBACN4E,QAAS,4FAuEa3L,IAAI4L,GAClBvI,EAAAA,KAAC+D,EAAA,CAECC,GAAIuE,EAAI7E,KACRpE,UAAW,0GAGbmH,EAASlD,WAAagF,EAAI7E,KACtB,qCACA,+EAGFnN,MAAOgS,EAAID,QAEV/I,SAAA,CAAAgJ,EAAI3E,MACJ6C,EAASlD,WAAagF,EAAI7E,YACxB,MAAA,CAAIpE,UAAU,uGAdZiJ,EAAIjS,aAqBd,MAAA,CAAIgJ,UAAU,uDACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,8BACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAW,oCAEbD,EAAAA,IAAC,OAAA,CAAKC,UAAU,0CAA2CC,SAvE7D,sBAwEES,EAAAA,KAAC,OAAA,CAAKV,UAAU,gCAAgCC,SAAA,CAAA,IArE/C,cA0ELS,EAAAA,KAAC,MAAA,CAAIV,UAAU,sCAEbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,4DACbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAW,oCAQbU,EAAAA,KAAC,OAAA,CAAKV,UAAU,gCAAgCC,SAAA,CAAA,SAAOuH,WACtDnF,EAAA,CAAKtK,KAAK,OAAOkJ,KAAM,GAAIjB,UAAU,6BAIxCU,EAAAA,KAAC,MAAA,CAAIV,UAAU,8BACZC,SAAA,CAvHQ,CACnB,CAAEjJ,GAAI,SAAUG,KAAM,WAAYmN,MAAO,UACzC,CAAEtN,GAAI,QAASG,KAAM,SAAUmN,MAAO,SACtC,CAAEtN,GAAI,WAAYG,KAAM,eAAgBmN,MAAO,aAoHvBjH,IAAI3F,GAChBqI,EAAAA,IAACyF,GAAA,CAECtC,QAAQ,QACRjC,KAAK,KACL4E,SAAUnO,EAAOP,KACjB6I,UAAU,8CACV/I,MAAOS,EAAO4M,MAEdrE,eAAC,OAAA,CAAKD,UAAU,UAAWC,WAAOqE,SAP7B5M,EAAOV,KAWhB+I,EAAAA,IAACyF,GAAA,CACCtC,QAAQ,QACRjC,KAAK,KACL4E,SAAS,SACT7F,UAAU,8CACV/I,MAAM,oCACNwJ,QAAS,IAAM8G,GAAiB,GAEhCtH,eAAC,OAAA,CAAKD,UAAU,UAAUC,SAAA,iCAE3B,MAAA,CAAID,UAAU,kEAAkE,cAAY,OAC3FC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,2DAA2DC,SAAA,YAK9ES,EAAAA,KAAC,MAAA,CAAIV,UAAU,WACbC,SAAA,CAAAS,EAAAA,KAAC8E,GAAA,CACCtC,QAAQ,QACRjC,KAAK,KACLR,QAAS,IAAM4G,GAAmBD,GAClCpH,UAAU,0EAEVC,SAAA,OAAC,MAAA,CAAID,UAAU,qEACbC,SAAAF,EAAAA,IAACsC,EAAA,CAAKtK,KAAK,OAAOkJ,KAAM,GAAIqB,MAAM,YAEpC5B,EAAAA,KAAC,MAAA,CAAIV,UAAU,sCACbC,SAAA,OAAC,OAAA,CAAKD,UAAU,sBAAsBC,SAAA,yBACrC,OAAA,CAAKD,UAAU,gCAAgCC,SAAA,4BAEjDoC,EAAA,CAAKtK,KAAK,cAAckJ,KAAM,QAIhCmG,GACC1G,EAAAA,KAAC,MAAA,CAAIV,UAAU,6GACbC,SAAA,CAAAF,EAAAA,IAAC,OAAIC,UAAU,6BACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,8BACbC,SAAA,OAAC,MAAA,CAAID,UAAU,uEACbC,SAAAF,EAAAA,IAACsC,EAAA,CAAKtK,KAAK,OAAOkJ,KAAM,GAAIqB,MAAM,mBAEnC,MAAA,CACCrC,SAAA,OAAC,IAAA,CAAED,UAAU,sCAAsCC,SAAA,wBAClD,IAAA,CAAED,UAAU,gCAAgCC,SAAA,4CAIlD,MAAA,CAAID,UAAU,MACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,YACbC,SAAA,OAAC,SAAA,CAAOD,UAAU,yGAAyGC,SAAA,2BAG1H,SAAA,CAAOD,UAAU,yGAAyGC,SAAA,sBAG1H,SAAA,CAAOD,UAAU,yGAAyGC,SAAA,6BAG3HF,EAAAA,IAAC,MAAA,CAAIC,UAAU,sCACd,SAAA,CAAOA,UAAU,kGAAkGC,SAAA,sCAanI,MAAA,CAAID,UAAU,kFACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,wDAEbC,SAAA,CAAAF,MAAC,MAAA,CAAIC,UAAU,iCACbC,SAAAF,MAAC+D,SAGHpD,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BAEbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0DACbC,SAAA,CAAAF,EAAAA,IAAC,QAAKC,UAAW,oCACjBD,EAAAA,IAAC,OAAA,CAAKC,UAAU,wBAAyBC,SAAmB,wBAG9DS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0DACbC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAW,oCAGjBU,EAAAA,KAAC,OAAA,CAAKV,UAAU,wBAAwBC,SAAA,CAAA,UAAQuH,QAGlDzH,EAAAA,IAAC,MAAA,CAAIC,UAAW,qDAA2C/I,MAAO,gBAAgB4R,IAC/E5I,SAAA4I,YAOT9I,EAAAA,IAAC1G,EAAA,CACCC,OAAQgO,EACR/N,QAAS,IAAMgO,GAAiB,SC9QlC2B,GAAQzD,EAAMC,WAAW,EAAG1F,YAAY,2CAA4CwC,GAAStB,IACjGnB,EAAAA,IAAC,MAAA,CACCmB,MACA6H,KAAK,WACDvG,EACJxC,UAAWwD,EAAG,+BAAgCxD,MAGlDkJ,GAAMrC,YAAc,QAEpB,MAAMsC,GAAmB1D,EAAMC,WAAW,EAAG1F,YAAY,mCAAoCwC,GAAStB,IACpGnB,EAAAA,IAAC,MAAA,CAAImB,MAAUlB,UAAWwD,EAAGxD,MAAgBwC,KAE/C2G,GAAiBtC,YAAc,mBCb/B,MAAMuC,GAAQ3D,EAAMC,WAClB,EAEI1F,YAAY,mGACZkD,UAAU,UACVjD,cACGuC,GAELtB,KAEA,MAAMmI,EACQ,YAAZnG,EACI,qCACA,qCAEN,OACEnD,MAAC,OAAA,CAAKmB,MAAUlB,UAAWwD,EAAGxD,EAAWqJ,MAAmB7G,EACzDvC,eAKTmJ,GAAMvC,YAAc,QC1BpB,MAAMyC,GAAO7D,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,IACtDnB,EAAAA,IAAC,MAAA,CACCmB,MACAlB,UAAWwD,EAAG,2DAA4DxD,MACtEwC,KAGR8G,GAAKzC,YAAc,OAEnB,MAAM0C,GAAa9D,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,UAC3D,MAAA,CAAIA,MAAUlB,UAAWwD,EAAG,gCAAiCxD,MAAgBwC,KAEhF+G,GAAW1C,YAAc,aAEzB,MAAM2C,GAAY/D,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,UAC1D,KAAA,CAAGA,MAAUlB,UAAWwD,EAAG,qDAAsDxD,MAAgBwC,KAEpGgH,GAAU3C,YAAc,YAEApB,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,UAChE,IAAA,CAAEA,MAAUlB,UAAWwD,EAAG,gCAAiCxD,MAAgBwC,KAE9DqE,YAAc,kBAE9B,MAAM4C,GAAchE,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,UAC5D,MAAA,CAAIA,MAAUlB,UAAWwD,EAAG,WAAYxD,MAAgBwC,KAE3DiH,GAAY5C,YAAc,cAEPpB,EAAMC,WAAW,EAAG1F,eAAcwC,GAAStB,UAC3D,MAAA,CAAIA,MAAUlB,UAAWwD,EAAG,6BAA8BxD,MAAgBwC,KAElEqE,YAAc,aC5BzB,MAAM6C,GAAWjE,EAAMC,WAAW,EAAGvE,QAAQ,EAAGnB,YAAY,kBAAmBwC,GAAStB,KACtF,MAAMyI,EAAU/M,KAAKC,IAAI,IAAKD,KAAKoC,IAAI,EAAGmC,IAC1C,OACEpB,MAAC,OAAImB,MAAUlB,UAAWwD,EAAG,6BAA8BxD,MAAgBwC,EACzEvC,SAAAF,EAAAA,IAAC,MAAA,CACCC,UAAU,2CACV4J,MAAO,CAAEC,MAAO,GAAGF,YAM3BD,GAAS7C,YAAc,WChBvB,MAAMiD,GAAQrE,EAAMC,WAClB,EACI1F,YAAWhI,OAAO,OAAQsM,QAAOpN,cAAayG,QAAOpF,YAAW,EAAOvB,QAAOwL,GAChFtB,KAGA,MAAM6I,EAAU/S,GAAM,SAAS4F,KAAKoN,SAASC,SAAS,IAAIC,OAAO,EAAG,KAOpE,MAAa,aAATlS,EAEA+H,EAAAA,IAAC,QAAA,CACC/H,KAAK,WACLgI,UAAWwD,EACT,kKACAxD,GAEFkB,MACAlK,GAAI+S,KACAvH,IAMG,UAATxK,EAEA+H,EAAAA,IAAC,QAAA,CACC/H,KAAK,QACLgI,UAAWwD,EACT,uKACAxD,GAEFkB,MACAlK,GAAI+S,KACAvH,IAOR9B,EAAAA,KAAC,MAAA,CAAIV,UAAU,YACZC,SAAA,CAAAqE,GACC5D,EAAAA,KAAC,QAAA,CACCyJ,QAASJ,EACT/J,UAAWwD,EACT,6FACA7F,EAAQ,mBAAqB,mBAG9BsC,SAAA,CAAAqE,EACA/L,GAAYwH,EAAAA,IAAC,OAAA,CAAKC,UAAU,wBAAwBC,SAAA,SAIzDF,EAAAA,IAAC,QAAA,CACC/H,OACAgI,UAAWwD,EApDf,+VAsDM7F,GAAS,oDACTqC,GAEFkB,MACAlK,GAAI+S,KACAvH,IAGLtL,IAAgByG,SAAU,IAAA,CAAEqC,UAAU,gCAAiCC,SAAA/I,IAEvEyG,GAASoC,EAAAA,IAAC,IAAA,CAAEC,UAAU,2BAA4BC,SAAAtC,SAM3DmM,GAAMjD,YAAc,QC3EpB,MAAMuD,GAAS3E,EAAMC,WACnB,EAEI1F,YACAqK,UAAU,GACVlJ,QACAmJ,eACAjJ,cAAc,mBACdkJ,YAAW,EACXtE,YAAW,EACX1N,YAAW,EACX+L,QACApN,cACAyG,QACA6M,cAAa,EACbC,aAAY,EACZ7E,WAAU,EACV5O,KACAe,OACAqJ,WACAsJ,kBACGlI,GAELtB,KAEA,MAAO5H,EAAQqR,GAAa9Q,EAAAA,UAAS,IAC9B+Q,EAAYC,GAAiBhR,EAAAA,SAAS,IAGvCiR,EAAW9T,GAAM,UAAU4F,KAAKoN,SAASC,SAAS,IAAIC,OAAO,EAAG,KAGhEa,EACJP,GAAcI,EACVP,EAAQ1O,OACRqP,GACEA,EAAO1G,MAAMlI,cAAcK,SAASmO,EAAWxO,gBAC5C4O,EAAO7J,OACN6J,EAAO7J,MAAM8I,WAAW7N,cAAcK,SAASmO,EAAWxO,gBAEhEiO,EAmDArI,EAAaiJ,GACbV,EACKpJ,GAAO1E,SAASwO,KAAgB,EAElC9J,IAAU8J,EAGbC,EAAWX,EAAWpJ,GAAOrF,OAAS,OAAc,IAAVqF,GAAiC,KAAVA,EAEvE,cACG,MAAA,CAAInB,UAAWwD,EAAG,WAAYxD,GAC5BC,SAAA,CAAAqE,GACC5D,EAAAA,KAAC,QAAA,CACCyJ,QAASW,EACT9K,UAAWwD,EACT,wGACA7F,EAAQ,mBAAqB,mBAG9BsC,SAAA,CAAAqE,EACA/L,GAAYwH,EAAAA,IAAC,OAAA,CAAKC,UAAU,wBAAwBC,SAAA,SAIzDS,EAAAA,KAAC,MAAA,CAAIV,UAAU,WACbC,SAAA,CAAAS,EAAAA,KAAC,SAAA,CACCQ,MACAlK,GAAI8T,EACJ9S,KAAK,SACLgI,UAAWwD,EACT,kSACA7F,GAAS,6CACRuN,GAAY,yBAEfzK,QApEa,KACnB,IAAKwF,EAAU,CACb,MAAMkF,GAAa7R,EACnBqR,EAAUQ,GACVT,IAAeS,GACVA,GACHN,EAAc,GAElB,GA6DM5E,WACA,gBAAe3M,EACf,gBAAc,aACVkJ,EAEJvC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAU,WAAYC,SAxFT,MACzB,IAAKkB,EAAO,OAAOE,EAEnB,GAAIkJ,EAAU,CACZ,MAAMa,EAAkBf,EAAQ1O,OAAO0P,GAAOlK,EAAM1E,SAAS4O,EAAIlK,QACjE,OAA+B,IAA3BiK,EAAgBtP,OAAqBuF,EACV,IAA3B+J,EAAgBtP,OAAqBsP,EAAgB,GAAG9G,MACrD,GAAG8G,EAAgBtP,uBAC5B,CAEA,MAAMwP,EAAiBjB,EAAQrN,KAAKqO,GAAOA,EAAIlK,QAAUA,GACzD,OAAOmK,EAAiBA,EAAehH,MAAQjD,GA6EbkK,KAE5B7K,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACZC,SAAA,CAAA2F,GACClF,EAAAA,KAAC,MAAA,CAAIV,UAAU,uBAAuBsG,QAAQ,YAC5CrG,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCC,UAAU,aACVuG,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPnE,YAAY,IACZ8D,KAAK,SAEPtG,EAAAA,IAAC,OAAA,CACCC,UAAU,aACVqG,KAAK,eACLM,EAAE,uHAKP8D,GAAaS,IAAatF,GACzB7F,EAAAA,IAACyF,GAAA,CACCtC,QAAQ,QAAQjC,KAAK,OAAOjB,UAAU,UACtCS,QA1EM5B,IAClBA,EAAEkC,kBACFK,IAAWmJ,EAAW,GAAK,KA0EftK,SAAAF,EAAAA,IAACyL,EAAA,CAAExL,UAAU,oBAIhByL,EAAA,CAAYzL,UAAWwD,EAAG,+BAAgClK,GAAU,sBAKzEoH,EAAAA,KAAC,SAAA,CACC3I,OACAoJ,MAAOA,GAAS,GAChBC,SAAU,OACVpB,UAAU,UACV0L,UAAU,EACVnB,WACAhS,WAEA0H,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAOoB,MAAM,GAAGlB,SAAA,cAChBoK,EAAQhN,IAAI2N,GACXjL,EAAAA,IAAC,SAAA,CAA0BoB,MAAO6J,EAAO7J,MACtClB,SAAA+K,EAAO1G,OADG0G,EAAO7J,WAOvB7H,GACCoH,EAAAA,KAAC,MAAA,CAAIV,UAAU,0FACZC,SAAA,CAAAuK,SACE,MAAA,CAAIxK,UAAU,eACbC,SAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,WACbC,SAAA,CAAAF,EAAAA,IAACzH,EAAA,CAAO0H,UAAU,0DAClBD,EAAAA,IAAC+J,GAAA,CACCzI,YAAY,oBACZF,MAAOyJ,EACPxJ,SA3GSvC,IACzBgM,EAAchM,EAAElH,OAAOwJ,QA2GPnB,UAAU,oBAMjB,MAAA,CAAIA,UAAU,8BACZC,SAA2B,IAA3B8K,EAAgBjP,OACfiE,EAAAA,IAAC,MAAA,CAAIC,UAAU,0CACZC,SAAA2K,EAAa,mBAAqB,yBAGrCG,EAAgB1N,IAAI2N,GAClBtK,EAAAA,KAAC,MAAA,CAECV,UAAWwD,EACT,+IACAxB,EAAWgJ,EAAO7J,QAAU,qCAC5B6J,EAAO/E,UAAY,kCAErBxF,QAAS,KAAOuK,EAAO/E,UAnJd,CAAA+E,IACzB,GAAIT,EAAU,CACZ,MAAMoB,EAAWxK,GAAS,GACpByK,EAAeD,EAASlP,SAASuO,EAAO7J,OAC1CwK,EAAShQ,OAAOkQ,GAAKA,IAAMb,EAAO7J,OAClC,IAAIwK,EAAUX,EAAO7J,OACzBC,IAAWwK,EACb,MACExK,IAAW4J,EAAO7J,OAClBwJ,GAAU,GACVD,KAAe,IAyIkCoB,CAAmBd,GAEtD/K,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAU,SAAUC,SAAA+K,EAAO1G,QAChCiG,GAAYvI,EAAWgJ,EAAO7J,QAAUpB,EAAAA,IAACgM,EAAA,CAAM/L,UAAU,YACzDgL,EAAO9T,aACN6I,EAAAA,IAAC,QAAKC,UAAU,qCACbC,WAAO/I,gBAZP8T,EAAO7J,gBAuBzBjK,IAAgByG,SACd,IAAA,CAAEqC,UAAU,qCAAsCC,SAAA/I,IAGpDyG,GAASoC,EAAAA,IAAC,IAAA,CAAEC,UAAU,gCAAiCC,SAAAtC,SAMhEyM,GAAOvD,YAAc,SCtPrB,MAAMmF,GAAiBvG,EAAMC,WAAW,EACtC1F,YACAsE,QACAnD,QACAC,WACA6K,SACA5K,cAAc,OACdrJ,OAAO,WACPkU,SACAC,SACAC,SAAS,QACTC,WAAW,MACX1O,QACAzG,cACAqB,YAAW,EACX0N,YAAW,EACXL,WAAU,EACV0G,WAAW,EACXC,iBAAgB,EAChBvV,KACAwV,aAAY,EACZC,eACA5P,MACAmC,SACGwD,GACFtB,KACD,MAAOwL,EAAcC,GAAmB9S,EAAAA,SAAS,KAC1C+S,EAAWC,GAAgBhT,EAAAA,UAAS,IACpCiT,EAASC,GAAclT,EAAAA,UAAS,GACjCK,EAAWC,EAAAA,OAAO,MAClB6S,EAAe9L,GAAOhH,EAGtB6P,EAAU/S,GAAM,mBAAmB4F,KAAKoN,SAASC,SAAS,IAAIC,OAAO,EAAG,KAGxE+C,EAAeC,IACnB,IAAKA,GAAe,IAARA,EAAW,MAAO,GAE9B,MAAMC,EAA0B,iBAARD,EAAmBE,WAAWF,GAAOA,EAC7D,GAAIG,MAAMF,GAAW,MAAO,GAE5B,OAAQnV,GACN,IAAK,WACH,OAAO,IAAIsV,KAAKC,aAAanB,EAAQ,CACnCxC,MAAO,WACPyC,WACAmB,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,GAEZ,IAAK,aACH,OAAO,IAAIG,KAAKC,aAAanB,EAAQ,CACnCxC,MAAO,UACP4D,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,EAAW,KAEvB,QACE,OAAO,IAAIG,KAAKC,aAAanB,EAAQ,CACnCoB,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,KAKVO,EAAcR,IAClB,IAAKA,EAAK,OAAO,EAGjB,MAAMS,EAAaT,EAChBxN,QAAQ,WAAY,IACpBA,QAAQ,KAAM,IAEXyN,EAAWC,WAAWO,GAC5B,OAAON,MAAMF,GAAY,EAAIA,GAkH/B,OAhFAjP,EAAAA,UAAU,KACH0O,GACHD,EAAgBM,EAAY9L,KAE7B,CAACA,EAAOnJ,EAAMqU,EAAUD,EAAQE,EAAUM,IAsE7C1O,EAAAA,UAAU,KACJsO,GAAaQ,EAAatO,SAC5BsO,EAAatO,QAAQC,SAEtB,CAAC6N,IAGF9L,EAAAA,KAAC,MAAA,CAAIV,UAAU,YACZC,SAAA,CAAAqE,GACC5D,EAAAA,KAAC,QAAA,CACCyJ,QAASJ,EACT/J,UAAWwD,EACT,6FACA7F,IAAUmP,EAAU,mBAAqB,mBAG1C7M,SAAA,CAAAqE,EACA/L,GAAYwH,EAAAA,IAAC,OAAA,CAAKC,UAAU,wBAAwBC,SAAA,SAIzDS,EAAAA,KAAC,MAAA,CAAIV,UAAU,WAEbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,4FACZC,SAAA,CApCO,MACd,OAAQjI,GACN,IAAK,WACH,OAAO+H,EAAAA,IAAC6N,EAAA,CAAW3M,KAAM,GAAIjB,UAAU,0BACzC,IAAK,aACH,OAAOD,EAAAA,IAAC8N,EAAA,CAAQ5M,KAAM,GAAIjB,UAAU,0BACtC,QACE,OAAOD,EAAAA,IAACnI,EAAA,CAAWqJ,KAAM,GAAIjB,UAAU,4BA6BpC8N,GACA5B,GACCnM,EAAAA,IAAC,OAAA,CAAKC,UAAU,4CACbC,SAAAiM,OAKPnM,EAAAA,IAAC,QAAA,CACCmB,IAAK8L,EACLhW,GAAI+S,EACJ/R,KAAK,OACLmJ,MAAOuL,EACPtL,SArEcvC,IACpB,MAAM8M,EAAW9M,EAAElH,OAAOwJ,QAGLoL,EAAgB,gBAAkB,eAEtCzM,KAAK6L,IAA0B,KAAbA,IACjCgB,EAAgBhB,IA+DZoC,QAzGalP,IACnBgO,GAAa,GAEb,MAAMmB,EAAW7M,EAAQA,EAAM8I,WAAa,GAC5C0C,EAAgBqB,GAGhBC,WAAW,KACLjB,EAAatO,SACfsO,EAAatO,QAAQwP,UAEtB,IA+FGjC,OA3FYpN,IAClBgO,GAAa,GACb,MAAMmB,EAAWN,EAAWhB,GAtDR,CAACQ,IACrB,MAAMC,EAA0B,iBAARD,EAAmBQ,EAAWR,GAAOA,EAE7D,IAAIiB,GAAQ,EACRC,EAAe,GAEf7V,IAAc4U,GAAyB,IAAbA,GAC5BgB,GAAQ,EACRC,EAAe,2BACL7B,GAAiBY,EAAW,GACtCgB,GAAQ,EACRC,EAAe,wCACE,IAARvR,GAAqBsQ,EAAWtQ,GACzCsR,GAAQ,EACRC,EAAe,0BAA0BnB,EAAYpQ,WACpC,IAARmC,GAAqBmO,EAAWnO,IACzCmP,GAAQ,EACRC,EAAe,yBAAyBnB,EAAYjO,MAGtD+N,EAAWoB,GAEP1B,GACFA,EAAa0B,EAAOC,IAiCtBC,CAAcL,GAGdrB,EAAgBM,EAAYe,IAGxB5M,GACFA,EAAS4M,GAGP/B,GACFA,EAAOpN,IA6EHyP,WA5DgBzP,IACR,UAAVA,EAAEC,MACJD,EAAEE,iBACFiO,EAAatO,SAAS6P,SA0DlBlN,cACA4E,SAAUA,GAAYL,EACtB5F,UAAWwD,EAET,kFACA,kEACA,oCACA,sGACA,kDACA,8BAGA,aACA2I,GAAU,QAGV,uBACA,oCAGAS,GAAa,6CACbjP,IAAUmP,GAAW,oDACrBlH,GAAW,gBAEX5F,MAEEwC,IAIL2J,GACCpM,EAAAA,IAAC,MAAA,CAAIC,UAAU,gEACbC,eAAC,OAAA,CAAKD,UAAU,4CACbC,SAAAkM,MAMNvG,SACE,MAAA,CAAI5F,UAAU,4CACbC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,8FAKlBrC,IAAUmP,IAAYlH,GACrB7F,EAAAA,IAAC,MAAA,CAAIC,UAAU,4CACbC,eAACuO,EAAA,CAAYvN,KAAM,GAAIjB,UAAU,0BAMtC9I,IAAgByG,IAAUmP,GACzB/M,EAAAA,IAAC,IAAA,CAAEC,UAAU,gCACVC,SAAA/I,KAKHyG,IAAUmP,IACVpM,EAAAA,KAAC,IAAA,CAAEV,UAAU,mDACXC,SAAA,CAAAF,EAAAA,IAACyO,EAAA,CAAYvN,KAAM,KAClBtD,GAAS,wBAOpBqO,GAAenF,YAAc,iBCxS7B,MAAM4H,GAAe,EACnBtN,QACAC,WACAsN,SACAC,WACA3O,YACAhI,OAAO,WACPqJ,cAAc,OACduN,aAAY,EACZC,aAAY,EACZC,SACA7I,YAAW,EACXL,WAAU,EACVjI,QACAyO,SAAS,QACTC,WAAW,MACXC,WAAW,EACXC,iBAAgB,EAChB1P,MACAmC,MACAwN,aAAY,EACZuC,gBAAe,EACf7L,UAAU,aACPV,MAEH,MAAOwM,EAAcC,GAAmBpV,EAAAA,SAAS,KAC1CqV,EAAYC,GAAiBtV,EAAAA,SAAS,KACtCuV,EAAWC,GAAgBxV,EAAAA,UAAS,GACrCK,EAAWC,EAAAA,OAAO,MAGlB8S,EAAeC,IACnB,IAAKA,GAAe,IAARA,EAAW,MAAO,IAE9B,MAAMC,EAA0B,iBAARD,EAAmBE,WAAWF,GAAOA,EAC7D,GAAIG,MAAMF,GAAW,MAAO,IAE5B,OAAQnV,GACN,IAAK,WACH,MAAMsX,EAAY,IAAIhC,KAAKC,aAAanB,EAAQ,CAC9CxC,MAAO,WACPyC,WACAmB,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,GAGJoC,EAAW3S,KAAK4S,IAAIrC,GAC1B,OAAIoC,GAAY,IACP,IAAIjC,KAAKC,aAAanB,EAAQ,CACnCoB,sBAAuB,EACvBC,sBAAuB,IACtB9U,OAAOwU,EAAW,KAAW,IACvBoC,GAAY,IACd,IAAIjC,KAAKC,aAAanB,EAAQ,CACnCoB,sBAAuB,EACvBC,sBAAuB,IACtB9U,OAAOwU,GAELmC,EAAU5P,QAAQ,QAAS,IAEpC,IAAK,aACH,OAAO,IAAI4N,KAAKC,aAAanB,EAAQ,CACnCxC,MAAO,UACP4D,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,EAAW,KAEvB,IAAK,SACH,OAAO,IAAIG,KAAKC,aAAanB,EAAQ,CACnCoB,sBAAuBlB,EACvBmB,sBAAuBnB,IACtB3T,OAAOwU,GAEZ,QACE,OAAOD,GAAKjD,YAAc,KAK1ByD,EAAcR,IAClB,IAAKA,EAAK,OAAO,EAGjB,MAAMS,EAAaT,EAChBxN,QAAQ,WAAY,IACpBA,QAAQ,KAAM,IAEXyN,EAAWC,WAAWO,GAC5B,OAAON,MAAMF,GAAY,EAAIA,GAyCzBsC,EAAa,KACjB,MAAMC,EAAsB,SAAT1X,EAAkBgX,EAAetB,EAAWsB,GAtC3C,CAAC9B,IACrB,MAAMC,EAAoB,SAATnV,EAAkBkV,EAAMQ,EAAWR,GAEpD,QAAa,SAATlV,KAECuU,GAAiBY,EAAW,GAC/BgC,EAAc,mCACP,QAGG,IAARtS,GAAqBsQ,EAAWtQ,GAClCsS,EAAc,0BAA0BlC,EAAYpQ,MAC7C,QAGG,IAARmC,GAAqBmO,EAAWnO,GAClCmQ,EAAc,yBAAyBlC,EAAYjO,MAC5C,IAGTmQ,EAAc,IACP,MAmBFd,CAAcW,KAIf5N,GACFA,EAASsO,GAGPhB,GACFA,EAAOgB,GAGLZ,GACFA,GAAO,KAKLa,EAAe,KACnBV,EAAgB,IAChBE,EAAc,IAEVR,GACFA,IAGEG,GACFA,GAAO,IAiCX5Q,EAAAA,UAAU,KACJ2Q,GAAa3U,EAASwE,SAAW8N,IACnCtS,EAASwE,QAAQC,QACjBzE,EAASwE,QAAQwP,WAElB,CAACW,EAAWrC,IAGf,MA6BMoD,EA7BmB,MACvB,OAAQ1M,GACN,IAAK,WACH,MAAO,CACL2M,UAAW,+DACXtQ,KAAMqP,EAAY,iBAAmB,iBACrCkB,MAAO,4CACPC,MAAO,+DACPC,SAAU,kBAEd,IAAK,UACH,MAAO,CACLH,UAAW,4DACXtQ,KAAM,gBACNuQ,MAAO,qBACPC,MAAO,4DACPC,SAAU,iBAEd,QACE,MAAO,CACLH,UAAW,mCACXtQ,KAAMqP,EAAY,gBAAkB,iBACpCkB,MAAO,2CACPC,MAAO,iDACPC,SAAU,oBAKHC,GAEf,OAAIpB,EAEAnO,EAAAA,KAAC,MAAA,CAAIV,UAAU,WACbC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACCmB,IAAKhH,EACLlC,KAAK,OACLmJ,MAAO6N,EACP5N,SA1EcvC,IACpB,MAAM8M,EAAW9M,EAAElH,OAAOwJ,MAEb,SAATnJ,IACmBuU,EAAgB,gBAAkB,eACtCzM,KAAK6L,IAA0B,KAAbA,IACjCsD,EAAgBtD,GAGlBsD,EAAgBtD,IAkEZuE,UA7DgBrR,IACR,UAAVA,EAAEC,KACJD,EAAEE,iBACF0Q,KACmB,WAAV5Q,EAAEC,KACXD,EAAEE,iBACF4Q,KACmB,QAAV9Q,EAAEC,MACXD,EAAEE,iBACF0Q,MAqDIpO,cACA4E,SAAUL,EACV5F,UAAWwD,EACT,8FACA,wEACAoM,EAAOG,MACPnK,GAAW,gBACXsJ,GAAc,+CACdlP,KAKJU,EAAAA,KAAC,MAAA,CAAIV,UAAU,sCACbC,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCU,QAASgP,EACTxJ,SAAUL,KAAasJ,EACvBlP,UAAWwD,EACT,iEACA,6DACA,mDAEFvM,MAAM,eAENgJ,SAAAF,EAAAA,IAACgM,EAAA,CAAM9K,KAAM,OAEflB,EAAAA,IAAC,SAAA,CACCU,QAASkP,EACT1J,SAAUL,EACV5F,UAAWwD,EACT,yEACA,6DACA,mDAEFvM,MAAM,iBAENgJ,SAAAF,EAAAA,IAACyL,EAAA,CAAEvK,KAAM,UAKZ2E,SACE,MAAA,CAAI5F,UAAU,2CACbC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,8FAKlBkP,GACCxO,EAAAA,KAAC,MAAA,CAAIV,UAAU,qFACbC,SAAA,CAAAF,EAAAA,IAACyO,EAAA,CAAYvN,KAAM,KAClBiO,QAQTxO,EAAAA,KAAC,MAAA,CACCD,QAvLe,KACbwF,GAAY2I,IAEhBK,EAAgB9N,EAAQA,EAAM8I,WAAa,IAC3CkF,EAAc,IAEVL,GACFA,GAAO,KAiLPqB,aAAc,IAAMd,GAAa,GACjCe,aAAc,IAAMf,GAAa,GACjCrP,UAAWwD,EACT,uEACA,4DACAoM,EAAOC,WACN5J,IAAa2I,GAAagB,EAAOE,OACjC7J,IAAa2I,GAAa,iBAC3BA,GAAa,0BACb3I,GAAY,gCACZtI,GAAS,qBACTqC,GAGFC,SAAA,CAAAF,MAAC,QAAKC,UAAW4P,EAAOrQ,KACrBU,SAAAgN,EAAY9L,KAIdyN,GACC7O,EAAAA,IAACnI,EAAA,CAAWqJ,KAAM,GAAIjB,UAAU,2BAIhC4O,IAAc3I,GAAY8I,GAC1BhP,EAAAA,IAACsQ,EAAA,CACCpP,KAAM,GACNjB,UAAWwD,EACT,0BACA4L,EAAY,aAAe,YAC3BQ,EAAOI,YAMZrS,GACCoC,EAAAA,IAACyO,EAAA,CAAYvN,KAAM,GAAIjB,UAAU,0BAIlC4F,SACE,MAAA,CAAI5F,UAAU,OACbC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,oGCxVnBsQ,GAAkB,CACtBC,IAAK,CAAEC,OAAQ,IAAKC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,aACpD2Y,IAAK,CAAEF,OAAQ,IAAKC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,QACpD4Y,IAAK,CAAEH,OAAQ,IAAKC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,iBACpD6Y,IAAK,CAAEJ,OAAQ,IAAKC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,gBACpD8Y,IAAK,CAAEL,OAAQ,KAAMC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,mBACrD+Y,IAAK,CAAEN,OAAQ,KAAMC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,qBACrDgZ,IAAK,CAAEP,OAAQ,MAAOC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,eACtDiZ,IAAK,CAAER,OAAQ,IAAKC,KAAM,MAAOnE,SAAU,EAAGvU,KAAM,iBAGhDkZ,GAAgBxL,EAAMC,WAAW,EACrC1F,YACAsE,QACAnD,QAAQ,EACRC,WACA6K,SACA5K,cACAgL,WAAW,MACXD,SAAS,QACTzO,QACAzG,cACAqB,YAAW,EACX0N,YAAW,EACXL,WAAU,EACV2G,iBAAgB,EAChB2E,gBAAe,EACfC,aAAY,EACZC,gBACAnQ,OAAO,UACPiC,UAAU,UACVlM,KACAwV,aAAY,EACZC,eACA5P,MACAmC,MACAqS,OAAO,IACPC,qBAAoB,EACpBC,eACG/O,GACFtB,KACD,MAAOwL,EAAcC,GAAmB9S,EAAAA,SAAS,KAC1C+S,EAAWC,GAAgBhT,EAAAA,UAAS,IACpCiT,EAASC,GAAclT,EAAAA,UAAS,IAChC2X,EAAmBC,GAAwB5X,EAAAA,SAAS,IACrDK,EAAWC,EAAAA,OAAO,MAClB6S,EAAe9L,GAAOhH,EAGtB6P,EAAU/S,GAAM,kBAAkB4F,KAAKoN,SAASC,SAAS,IAAIC,OAAO,EAAG,KAGvEwH,EAAiBpB,GAAgBjE,IAAaiE,GAAgBC,IAC9DoB,OAAkC,IAAdJ,EAA0BA,EAAYG,EAAepF,SAGzEsF,EAAuBpT,EAAAA,QAAQ,IAC/B6C,GACWwQ,EAAe,GAE7B,CAACxQ,EAAagL,EAAUsF,IAG3B,SAASE,EAAe3E,EAAK7C,EAAU,IACrC,IAAK6C,GAAe,IAARA,EAAW,MAAO,GAE9B,MAAMC,EAA0B,iBAARD,EAAmBE,WAAWF,GAAOA,EAC7D,GAAIG,MAAMF,GAAW,MAAO,GAE5B,MAAM2E,YAAsBA,GAAc,GAAUzH,EAGpD,GAAIyH,GAAeR,GAAqB1U,KAAK4S,IAAIrC,IAAa,IAAM,CAClE,MAAMoC,EAAW3S,KAAK4S,IAAIrC,GACpB4E,EAAO5E,EAAW,EAAI,IAAM,GAElC,GAAIoC,GAAY,IACd,MAAO,GAAGwC,IAAOL,EAAelB,UAAUjB,EAAW,KAAYyC,QAAQ,MAC3E,GAAWzC,GAAY,IACrB,MAAO,GAAGwC,IAAOL,EAAelB,UAAUjB,EAAW,KAASyC,QAAQ,MACxE,GAAWzC,GAAY,IACrB,MAAO,GAAGwC,IAAOL,EAAelB,UAAUjB,EAAW,KAAMyC,QAAQ,KAEvE,CAEA,IACE,OAAO,IAAI1E,KAAKC,aAAanB,EAAQ,CACnCxC,MAAO,WACPyC,WACAmB,sBAAuBmE,EACvBlE,sBAAuBkE,IACtBhZ,OAAOwU,EACZ,OAASxP,GAEP,MAAM2R,EAAYnC,EAAS6E,QAAQL,GACnC,MAAO,GAAGD,EAAelB,SAASlB,GACpC,CACF,CAGA,SAAS2C,EAAc/E,GACrB,IAAKA,EAAK,OAAO,EAGjB,MAAMgF,EAAMhF,EAAIjD,WAAW7N,cAC3B,IAAI+V,EAAa,EAEbD,EAAIE,SAAS,KACfD,EAAa,IACJD,EAAIE,SAAS,KACtBD,EAAa,IACJD,EAAIE,SAAS,OACtBD,EAAa,KAIf,MAAMxE,EAAaT,EAChBjD,WACAvK,QAAQ,WAAY,IACpBA,QAAQ,KAAM,IAEXyN,EAAWC,WAAWO,GAAcwE,EAC1C,OAAO9E,MAAMF,GAAY,EAAIA,CAC/B,CAGA,MA0CMkF,EAXW,MACf,IAAKlB,QAA+B,IAAlBC,EAA6B,OAAO,KAEtD,MAAM1S,EAA2B,iBAAVyC,EAAqB8Q,EAAc9Q,GAAUA,GAAS,EACvEmR,EAAoC,iBAAlBlB,EAA6Ba,EAAcb,GAAkBA,GAAiB,EAEtG,OAAI1S,EAAU4T,EAAiB,KAC3B5T,EAAU4T,EAAiB,OACxB,WAGKC,GAuFd,OApFArU,EAAAA,UAAU,KACH0O,GACHD,EAAgBkF,EAAe1Q,EAAO,CAAE2Q,YAAaR,MAEtD,CAACnQ,EAAOkL,EAAUD,EAAQuF,EAAmB/E,EAAW0E,IA4D3DpT,EAAAA,UAAU,KACJsO,GAAaQ,EAAatO,SAC5BsO,EAAatO,QAAQC,SAEtB,CAAC6N,IAiBF9L,EAAAA,KAAC,MAAA,CAAIV,UAAU,YACZC,SAAA,CAAAqE,GACC5D,EAAAA,KAAC,QAAA,CACCyJ,QAASJ,EACT/J,UAAWwD,EACT,6FACA7F,IAAUmP,EAAU,mBAAqB,mBAG1C7M,SAAA,CAAAqE,EACA/L,GAAYwH,EAAAA,IAAC,OAAA,CAAKC,UAAU,wBAAwBC,SAAA,SAIzDS,EAAAA,KAAC,MAAA,CAAIV,UAAU,WAEZC,SAAA,CAAAiR,GACCxQ,EAAAA,KAAC,MAAA,CAAIV,UAAU,4FACbC,SAAA,CAAAF,EAAAA,IAAC6N,EAAA,CAAW3M,KAAM,GAAIjB,UAAU,0BAChCD,EAAAA,IAAC,OAAA,CAAKC,UAAU,4CACbC,WAAewQ,UAKtB1Q,EAAAA,IAAC,QAAA,CACCmB,IAAK8L,EACLhW,GAAI+S,EACJ/R,KAAK,OACLmJ,MAAOuL,EACPtL,SAzEcvC,IACpB,MAAM8M,EAAW9M,EAAElH,OAAOwJ,QAGZoL,EACV,uBACA,sBAEMzM,KAAK6L,IAA0B,KAAbA,IAC1BgB,EAAgBhB,IAiEZoC,QA7GalP,IACnBgO,GAAa,GAEb,MAAMmB,EAAW7M,EAAQA,EAAM8I,WAAa,GAC5C0C,EAAgBqB,GAGhBC,WAAW,KACLjB,EAAatO,SACfsO,EAAatO,QAAQwP,UAEtB,IAmGGjC,OA/FYpN,IAClBgO,GAAa,GACb,MAAMmB,EAAWiE,EAAcvF,GArEX,CAACQ,IACrB,MAAMC,EAA0B,iBAARD,EAAmB+E,EAAc/E,GAAOA,EAEhE,IAAIiB,GAAQ,EACRqE,EAAU,GAEVja,IAAc4U,GAAyB,IAAbA,GAC5BgB,GAAQ,EACRqE,EAAU,2BACAjG,GAAiBY,EAAW,GACtCgB,GAAQ,EACRqE,EAAU,wCACO,IAAR3V,GAAqBsQ,EAAWtQ,GACzCsR,GAAQ,EACRqE,EAAU,0BAA0BX,EAAehV,WAClC,IAARmC,GAAqBmO,EAAWnO,IACzCmP,GAAQ,EACRqE,EAAU,yBAAyBX,EAAe7S,MAGpD+N,EAAWoB,GACXsD,EAAqBe,GAEjB/F,GACFA,EAAa0B,EAAOqE,IA+CtBnE,CAAcL,GAGdrB,EAAgBkF,EAAe7D,EAAU,CAAE8D,YAAaR,KAGpDlQ,GACFA,EAAS4M,GAGP/B,GACFA,EAAOpN,IAiFHyP,WA9DgBzP,IACR,UAAVA,EAAEC,MACJD,EAAEE,iBACFiO,EAAatO,SAAS6P,SA4DlBlN,YAAauQ,EACb3L,SAAUA,GAAYL,EACtByL,OACArR,UAAWwD,EAET,uDACA,kEACA,oCACA,sGACA,kDACA,8BA1DU,CAClBC,GAAI,mBACJC,QAAS,oBACTC,GAAI,uBA0DgB1C,GAtDC,CACrByC,QAAS,kDACT+O,OAAQ,gDACRC,QAAS,uDAsDcxP,GAGf,uBAGAgO,EAAe,QAAU,OACzB,OACAmB,GAAS,OAGTzF,GAAa,8CACZjP,IAAUmP,IAAY,oDACvBlH,GAAW,gBAEX5F,MAEEwC,IAIL6P,GAAmB,YAAVA,GACRtS,EAAAA,IAAC,OAAIC,UAAU,4CACZC,SAAU,OAAVoS,EACCtS,EAAAA,IAAClI,EAAA,CAAWoJ,KAAM,GAAIjB,UAAU,iBAEhCD,EAAAA,IAAC4S,GAAa1R,KAAM,GAAIjB,UAAU,uBAMvC4F,SACE,MAAA,CAAI5F,UAAU,4CACbC,SAAAF,EAAAA,IAAC,MAAA,CAAIC,UAAU,+FAKjBrC,IAAUmP,KAAalH,GACvB7F,MAAC,MAAA,CAAIC,UAAU,4CACbC,eAACuO,EAAA,CAAYvN,KAAM,GAAIjB,UAAU,0BAMtC9I,IAAgByG,GAASmP,SACvB,IAAA,CAAE9M,UAAU,gCACVC,SAAA/I,KAKHyG,IAAUmP,IACVpM,EAAAA,KAAC,IAAA,CAAEV,UAAU,mDACXC,SAAA,CAAAF,EAAAA,IAACyO,EAAA,CAAYvN,KAAM,KAClBtD,GAAS6T,KAKbL,QAA+B,IAAlBC,GAAyC,YAAViB,GAC3C3R,OAAC,IAAA,CAAEV,UAAU,wDACVC,SAAA,CAAU,OAAVoS,EACCtS,MAAClI,EAAA,CAAWoJ,KAAM,GAAIjB,UAAU,iBAEhCD,EAAAA,IAAC4S,EAAA,CAAa1R,KAAM,GAAIjB,UAAU,qBAClC,iBACa6R,EAAeT,WAOxCH,GAAcpK,YAAc,gBC/X5B,MAAM+L,GAAe,EACnB5a,OAAO,UACPiJ,OAAO,UACPuR,UACAxS,YACA6S,YAAW,EACX3P,UAAU,aACPV,MAGH,MAeMH,EAfU,MACd,OAAQrK,GACN,IAAK,cAQL,QACE,OAAOJ,EAPT,IAAK,YACH,OAAOgW,EACT,IAAK,QACH,OAAO/V,EACT,IAAK,aACH,OAAOgW,IAMAC,GA2BPvF,EAxBa,CACjB9E,GAAI,CACFqP,QAAS,iBACT3b,KAAM,GACNoI,KAAM,UACNwT,IAAK,QACLC,QAAS,OAEXtP,QAAS,CACPoP,QAAS,mBACT3b,KAAM,GACNoI,KAAM,UACNwT,IAAK,QACLC,QAAS,OAEXrP,GAAI,CACFmP,QAAS,mBACT3b,KAAM,GACNoI,KAAM,YACNwT,IAAK,QACLC,QAAS,QAIa/R,GAGpBgS,EAAgB,CACpBvP,QAAS,wBACTwP,OAAQ,2BACRC,QAAS,uCAIX,GAAa,WAATnb,EACF,OACE0I,OAAC,MAAA,CAAIV,UAAWwD,EAAG,mCAAoC+E,EAAOwK,IAAK/S,MAAgBwC,EACjFvC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAWwD,EACT+E,EAAOuK,QACP,yEACAG,EAAc/P,MAGjBsP,GACCzS,EAAAA,IAAC,OAAA,CAAKC,UAAWwD,EAAG+E,EAAOhJ,KAAM0T,EAAc/P,IAC5CjD,SAAAuS,OAQX,MAQMY,EAAiBZ,GARA,CACrBa,YAAa,iBACbC,UAAW,+BACXjB,MAAO,sBACPkB,WAAY,2BACZ7P,QAAS,cAGsC1L,GAEjD,OACE0I,EAAAA,KAAC,MAAA,CACCV,UAAWwD,EACT,4CACA+E,EAAOyK,QACPzK,EAAOwK,IACP,yEACA/S,MACKwC,EAEPvC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BAEbC,SAAA,CAAAF,EAAAA,IAAC,MAAA,CACCC,UAAWwD,EACT+E,EAAOuK,QACP,yEACAG,EAAc/P,MAKjB2P,GACC9S,EAAAA,IAACsC,EAAA,CACCpB,KAAMsH,EAAOpR,KACb6I,UAAWwD,EACT,gBACAyP,EAAc/P,SAOrBkQ,GACCrT,EAAAA,IAAC,IAAA,CACCC,UAAWwD,EACT+E,EAAOhJ,KACP,0BACA0T,EAAc/P,IAGfjD,SAAAmT,QAQLI,GAAkB,EACtB3J,QAAQ,OACR4J,SAAS,MACTzT,YACAkD,UAAU,aACPV,KASDzC,EAAAA,IAAC,MAAA,CACCC,UAAWwD,EACT,2BACAqG,EACA4J,EAXiB,CACrB/P,QAAS,WACT2I,SAAU,iBACVkH,WAAY,eASOrQ,GACflD,MAEEwC,IAwBJkR,GAAc,EAClBzS,OAAO,UACPjB,YACAkD,UAAU,aACPV,MAEH,MAAMmR,EAAc,CAClBlQ,GAAI,UACJC,QAAS,cACTC,GAAI,WAGAR,EAAiB,CACrBO,QAAS,sBACTN,QAAS,aACT+B,QAAS,aACTC,QAAS,cAGX,OACErF,EAAAA,IAAC,MAAA,CACCC,UAAWwD,EAAG,0BAA2BxD,MACrCwC,EAEHvC,UAAC,EAAG,EAAG,GAAG5C,IAAKuW,GACd7T,EAAAA,IAAC,MAAA,CAECC,UAAWwD,EACT,6BACAmQ,EAAY1S,GACZkC,EAAeD,IAEjB0G,MAAO,CACLiK,eAAuB,GAAJD,EAAH,IAChBE,kBAAmB,SARhBF,OCrNTG,GAAqB,EACzB/b,OAAO,QACPwa,UACAxS,YACAiB,OAAO,UACPiC,UAAU,UACV2P,YAAW,EACXmB,eAAc,EACdC,YACAC,WAAW,SACXjU,cACGuC,MAGH,MAOMH,EAPU,CACd1E,MAAO6Q,EACPpJ,QAAS+O,EACThP,QAASiP,EACTC,KAAMC,GAGatc,GAwBfuQ,EArBa,CACjB9E,GAAI,CACFlE,KAAM,UACNpI,KAAM,GACN6b,QAAS,MACTD,IAAK,SAEPrP,QAAS,CACPnE,KAAM,UACNpI,KAAM,GACN6b,QAAS,MACTD,IAAK,SAEPpP,GAAI,CACFpE,KAAM,YACNpI,KAAM,GACN6b,QAAS,MACTD,IAAK,UAIiB9R,GA8BpB2O,EA3Ba,CACjBjS,MAAO,CACL4W,GAAI,oBACJC,OAAQ,wBACRjV,KAAM,mBACNpI,KAAM,oBAERiO,QAAS,CACPmP,GAAI,gBACJC,OAAQ,oBACRjV,KAAM,0BACNpI,KAAM,gBAERgO,QAAS,CACPoP,GAAI,gBACJC,OAAQ,oBACRjV,KAAM,0BACNpI,KAAM,gBAERkd,KAAM,CACJE,GAAI,aACJC,OAAQ,kBACRjV,KAAM,gBACNpI,KAAM,kBAIgBa,GAuB1B,OAAKwa,GAAYvS,EAKfS,EAAAA,KAAC,MAAA,CACCV,UAAWwD,EACT,mBACA+E,EAAOwK,IACPxK,EAAOyK,QACPpD,EAAO2E,GACP3E,EAAO4E,OA/Ba,MACxB,OAAQtR,GACN,IAAK,SACH,MAAO,oBACT,IAAK,WACH,OAAOM,EACL,qCACa,QAAb0Q,GAAsB,mBACT,WAAbA,GAAyB,gBACZ,SAAbA,GAAuB,kBACV,UAAbA,GAAwB,kBAE5B,IAAK,SACH,MAAO,0BACT,QACE,MAAO,sBAiBPO,GACAzU,MAEEwC,EAGHvC,SAAA,CAAA4S,GAAYxQ,GACXtC,EAAAA,IAACsC,EAAA,CACCpB,KAAMsH,EAAOpR,KACb6I,UAAWwD,EAAG,uBAAwBoM,EAAOzY,QAKjDuJ,EAAAA,KAAC,MAAA,CAAIV,UAAU,iBACZC,SAAA,CAAAuS,GACCzS,EAAAA,IAAC,IAAA,CAAEC,UAAWwD,EAAG+E,EAAOhJ,KAAMqQ,EAAOrQ,KAAM,eACxCU,SAAAuS,IAGJvS,GACCF,EAAAA,IAAC,MAAA,CAAIC,UAAWwD,EAAG+E,EAAOhJ,KAAMqQ,EAAOrQ,MACpCU,gBAMN+T,GAAeC,GACdlU,EAAAA,IAAC,SAAA,CACCU,QAASwT,EACTjU,UAAWwD,EACT,0EACAoM,EAAOrQ,MAET,aAAW,UAEXU,SAAAF,EAAAA,IAACyL,EAAA,CAAEvK,KAAMsH,EAAOpR,YAhDf,MAwDLud,GAAkB,EACtB/W,QACAyH,UACAD,UACAkP,OACArU,eACGwC,MAGH,IAAIxK,EAAMwa,EAEV,GAAI7U,EACF3F,EAAO,QACPwa,EAAU7U,UACDyH,EACTpN,EAAO,UACPwa,EAAUpN,UACDD,EACTnN,EAAO,UACPwa,EAAUrN,WACDkP,EAIT,OAAO,KAHPrc,EAAO,OACPwa,EAAU6B,CAGZ,CAEA,OACEtU,EAAAA,IAACgU,GAAA,CACC/b,OACAwa,UACAvR,KAAK,KACLiC,QAAQ,SACRlD,eACIwC,KAMJmS,GAAiB,EACrBzQ,QAAQ,GACRlE,YACA4U,eAAc,KACXpS,KAEE0B,EAAMpI,OAGTiE,EAAAA,IAAC,MAAA,CAAIC,UAAWwD,EAAG,YAAaxD,MAAgBwC,EAC7CvC,SAAAiE,EAAM7G,IAAI,CAACsH,EAAM9E,IAChBE,EAAAA,IAACgU,GAAA,CAEC/b,KAAM2M,EAAK3M,MAAQ,QACnBwa,QAASoC,EAAc,GAAG/U,EAAQ,MAAM8E,EAAK6N,UAAY7N,EAAK6N,QAC9DvR,KAAK,KACLiC,QAAQ,UAJHrD,MANa,KAkBtBgV,GAAoB,EACxBC,SAAS,GACTC,WAAW,GACX/U,YACA/I,QAAQ,mCACR+d,eAAc,KACXxS,MAEH,MAAOyS,EAAaC,GAAkBzP,EAAM5L,SAASmb,GAE/CG,EAAcL,EAAOhZ,OAASiZ,EAASjZ,OAE7C,GAAoB,IAAhBqZ,EAAmB,OAAO,KAE9B,MAAMC,EAAW,IACZN,EAAOzX,IAAIM,IAAA,CAAY3F,KAAM,QAASwa,QAAS7U,QAC/CoX,EAAS1X,IAAI+H,IAAA,CAAcpN,KAAM,UAAWwa,QAASpN,MAG1D,OACE1E,EAAAA,KAAC,OAAIV,UAAWwD,EAAG,YAAaxD,MAAgBwC,EAE9CvC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,oCACbC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAGC,UAAU,wCACXC,SAAAhJ,IAEF+d,GACCjV,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAMyU,GAAgBD,GAC/BjV,UAAU,wEAETC,SAAAgV,EAAc,QAAQE,WAAuB,aAMlDF,GACAlV,EAAAA,IAAC4U,GAAA,CACCzQ,MAAOkR,EACPR,aAAW,IAKdK,GACCvU,EAAAA,KAAC,IAAA,CAAEV,UAAU,gCACVC,SAAA,CAAA6U,EAAOhZ,OAAS,GAAK,GAAGgZ,EAAOhZ,eAAegZ,EAAOhZ,OAAS,EAAI,IAAM,KACxEgZ,EAAOhZ,OAAS,GAAKiZ,EAASjZ,OAAS,GAAK,KAC5CiZ,EAASjZ,OAAS,GAAK,GAAGiZ,EAASjZ,iBAAiBiZ,EAASjZ,OAAS,EAAI,IAAM,YC1QrFuZ,GAAkB,EACtBpV,WACAD,YAAY,GACZsV,wBAAuB,EACvBC,qBAAoB,EACpBC,oBAAmB,MAEnB,MAAOC,EAAUC,GAAe7b,EAAAA,SAAS,SAClC8b,EAAUC,GAAe/b,EAAAA,UAAS,IAClCgc,EAAUC,GAAejc,EAAAA,UAAS,IAClCkc,EAAgBC,GAAqBnc,EAAAA,SAAS,IAC9Coc,EAAeC,GAAoBrc,EAAAA,UAAS,IAC5Csc,EAAgBC,GAAqBvc,EAAAA,UAAS,GAErDqE,EAAAA,UAAU,KACR,MAAMmY,EAAc,KAClB,MAAMxM,EAAQyM,OAAOC,WACrBX,EAAY/L,EAAQ,KACpBiM,EAAYjM,GAAS,KAAOA,EAAQ,OAKtC,OAFAwM,IACAC,OAAOnX,iBAAiB,SAAUkX,GAC3B,IAAMC,OAAOlX,oBAAoB,SAAUiX,IACjD,IAEH,MASMG,EAAeC,IACnB,MAAMC,EAAiBxX,SAASyX,cAAc,2BAC9C,GAAID,EAAgB,CAClB,MAAME,EAA6B,SAAdH,GAAuB,IAAO,IACnDC,EAAeG,SAAS,CAAEC,KAAMF,EAAcG,SAAU,UAC1D,GAYIC,EARa,SAAbvB,EACEE,EAAiB,SACjBE,EAAiB,SACd,UAEFJ,EAKT,MAAoB,WAAhBuB,GAA4BzB,EAG5B7U,EAAAA,KAAC,MAAA,CAAIV,UAAW,uBAAuBA,IACpCC,SAAA,CAAAuV,GACC9U,EAAAA,KAAC,MAAA,CAAIV,UAAU,2CACbC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAU,yBAAyBC,SAAA,UACzCS,EAAAA,KAAC,SAAA,CACCD,QAAS,IAAMiV,EAAyB,SAAbD,EAAsB,UAAY,QAC7DzV,UAAU,sGAETC,SAAA,CAAa,SAAbwV,QAAuBwB,EAAA,CAAQhW,KAAM,KAASlB,EAAAA,IAACmX,EAAA,CAAWjW,KAAM,KACnD,SAAbwU,EAAsB,QAAU,cAItCxV,KAMLS,EAAAA,KAAC,MAAA,CAAIV,UAAW,4BAA4BA,IACzCC,SAAA,CAAAuV,GACC9U,EAAAA,KAAC,MAAA,CAAIV,UAAU,yCACbC,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAKC,UAAU,yBAAyBC,SAAA,UACzCS,EAAAA,KAAC,MAAA,CAAIV,UAAU,0DACbC,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAMiV,EAAY,QAC3B1V,UAAW,wCACI,SAAbyV,EACI,yBACA,8BAGNxV,SAAAF,EAAAA,IAACkX,EAAA,CAAQhW,KAAM,OAEjBlB,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAMiV,EAAY,UAC3B1V,UAAW,wCACI,WAAbyV,EACI,yBACA,8BAGNxV,SAAAF,EAAAA,IAACoX,EAAA,CAAOlW,KAAM,OAEhBlB,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAMiV,EAAY,UAC3B1V,UAAW,wCACI,WAAbyV,EACI,yBACA,8BAGNxV,SAAAF,EAAAA,IAACmX,EAAA,CAAWjW,KAAM,cAKtB0U,GAAYE,IACZnV,EAAAA,KAAC,MAAA,CAAIV,UAAU,0BACbC,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAM+V,EAAY,QAC3BvQ,UAAWgQ,EACXjW,UAAU,mIAEVC,SAAAF,EAAAA,IAACqX,EAAA,CAAYnW,KAAM,OAErBlB,EAAAA,IAAC,SAAA,CACCU,QAAS,IAAM+V,EAAY,SAC3BvQ,UAAWkQ,EACXnW,UAAU,mIAEVC,SAAAF,EAAAA,IAACsX,EAAA,CAAapW,KAAM,aAO9BlB,EAAAA,IAAC,MAAA,CACCC,UAAW,0CACO,WAAhBgX,EAA2B,gBAAkB,MAC3B,WAAhBA,EAA2B,gBAAkB,KACjDM,SAlHgBzY,IACpB,MAAM0Y,EAAU1Y,EAAElH,OAClBqe,EAAkBuB,EAAQC,YAC1BtB,EAAiBqB,EAAQC,WAAa,GACtCpB,EACEmB,EAAQC,WAAaD,EAAQE,YAAcF,EAAQG,cA8GjD9N,MAAO,CACL+N,eAAgC,WAAhBX,EAA2B,OAAS,OACpDY,eAAgC,WAAhBZ,EAA2B,cAAgB,QAG5D/W,cAID0V,GAAYE,IACZ9V,EAAAA,IAAC,OAAIC,UAAU,2BACbC,eAAC,MAAA,CAAID,UAAU,0BACZC,SAAA,IAAI4X,MAAM,IAAIxa,IAAI,CAACya,EAAGlE,IACrB7T,EAAAA,IAAC,MAAA,CAECC,UAAW,2CACTpD,KAAKmb,MAAMhC,EAAiB,OAASnC,EACjC,cACA,iBAJDA"}