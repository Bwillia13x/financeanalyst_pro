import{j as e,C as t,L as s,R as a,S as r,T as l,a as i,H as n,M as o,r as d,X as c,b as m,c as x,d as u}from"./react-core-CeHLCIBw.js";import{c as h,a as g}from"./utils-vendor-DUg4_aAP.js";import{t as p}from"./ai-vendor-CuiosWbE.js";import{P as b}from"./vendor-D2fsnhsW.js";import{ResponsiveContainer as v,BarChart as j,CartesianGrid as y,XAxis as f,YAxis as N,Tooltip as k,Bar as w,PieChart as F,Pie as C,Cell as R,Legend as M,AreaChart as $,Area as P,LineChart as S,Line as A}from"./recharts-vendor-DQPXk1vH.js";function T({name:a,size:r=24,color:l="currentColor",className:i="",strokeWidth:n=2,...o}){const d=s[a];return d?e.jsx(d,{size:r,color:l,strokeWidth:n,className:i,...o}):e.jsx(t,{size:r,color:"gray",strokeWidth:n,className:i,...o})}function D(...e){return p(h(e))}T.propTypes={name:b.string.isRequired,size:b.number,color:b.string,className:b.string,strokeWidth:b.number};const L=g("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{primary:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow",default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow",outline:"border border-border bg-background hover:bg-muted hover:text-foreground shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90 shadow-sm hover:shadow",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline p-0 h-auto",success:"bg-success text-success-foreground hover:bg-success/90 shadow-sm hover:shadow",warning:"bg-warning text-warning-foreground hover:bg-warning/90 shadow-sm hover:shadow",danger:"bg-error text-error-foreground hover:bg-error/90 shadow-sm hover:shadow",minimal:"text-muted-foreground hover:text-foreground hover:bg-muted/50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xs:"h-8 rounded-md px-2 text-xs",xl:"h-12 rounded-md px-10 text-base"}},defaultVariants:{variant:"default",size:"default"}}),E=a.forwardRef(({className:t,variant:s,size:a,asChild:l=!1,children:i,loading:n=!1,iconName:o=null,iconPosition:d="left",iconSize:c=null,fullWidth:m=!1,disabled:x=!1,...u},h)=>{const g=l?r:"button",p=c||{xs:12,sm:14,default:16,lg:18,xl:20,icon:16}[a]||16,b=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24","data-loading":"true",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v=()=>o?e.jsx(T,{name:o,size:p,className:D(i&&"left"===d&&"mr-2",i&&"right"===d&&"ml-2")}):null;return e.jsxs(g,{className:D(L({variant:s,size:a,className:t}),m&&"w-full"),ref:h,disabled:x||n,...u,children:[n&&e.jsx(b,{}),o&&"left"===d&&v(),i,o&&"right"===d&&v()]})});E.displayName="Button";class V extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){const s=this.generateErrorId();this.setState({error:e,errorInfo:t,errorId:s}),this.logToMonitoring(e,t,s)}generateErrorId(){return`ERR-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}logToMonitoring(e,t,s){try{window.Sentry&&window.Sentry.withScope(a=>{a.setTag("errorBoundary",!0),a.setContext("errorInfo",t),a.setContext("errorId",s),a.setLevel("error"),window.Sentry.captureException(e)}),fetch("/api/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({errorId:s,message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:this.props.userId||"anonymous"})}).catch(e=>{})}catch(a){}}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:null})};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};handleReportIssue=()=>{const e=encodeURIComponent(`Error Report - ${this.state.errorId}`),t=encodeURIComponent(`\nError ID: ${this.state.errorId}\nError: ${this.state.error?.message}\nURL: ${window.location.href}\nTime: ${(new Date).toISOString()}\n\nPlease describe what you were doing when this error occurred:\n[Your description here]\n    `);window.open(`mailto:support@financeanalystpro.com?subject=${e}&amp;body=${t}`)};render(){if(this.state.hasError){const{fallback:t,level:s="component"}=this.props;return t?e.jsx(t,{error:this.state.error,errorInfo:this.state.errorInfo,errorId:this.state.errorId,onRetry:this.handleRetry}):"component"===s?e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(l,{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Component Error"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"This component encountered an error and couldn't be displayed."}),e.jsx("div",{className:"mt-3 flex space-x-3",children:e.jsxs(E,{size:"sm",variant:"outline",onClick:this.handleRetry,className:"text-red-700 border-red-300 hover:bg-red-100",children:[e.jsx(i,{className:"w-4 h-4 mr-1"}),"Retry"]})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(l,{className:"w-8 h-8 text-red-500"})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We apologize for the inconvenience. An unexpected error occurred while loading this page."}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Error ID"}),e.jsx("div",{className:"text-sm font-mono text-gray-800",children:this.state.errorId})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(E,{onClick:this.handleRetry,className:"w-full",variant:"primary",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{onClick:this.handleGoHome,variant:"secondary",className:"flex-1",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Go Home"]}),e.jsxs(E,{onClick:this.handleReportIssue,variant:"outline",className:"flex-1",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Report"]})]}),e.jsx(E,{onClick:this.handleReload,variant:"ghost",className:"w-full text-sm",children:"Reload Page"})]}),!1]})})})}return this.props.children}}const I=a.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));I.displayName="Card";const Y=a.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("flex flex-col space-y-1.5 p-6",t),...s}));Y.displayName="CardHeader";const K=a.forwardRef(({className:t,...s},a)=>e.jsx("h3",{className:D("text-2xl font-semibold leading-none tracking-tight",t),...s,children:s.children||"Card Title"}));K.displayName="CardTitle",a.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:D("text-sm text-muted-foreground",t),...s})).displayName="CardDescription";const z=a.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("p-6 pt-0",t),...s}));z.displayName="CardContent",a.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:D("flex items-center p-6 pt-0",t),...s})).displayName="CardFooter";const q=a.forwardRef(({className:t,type:s="text",label:a,description:r,error:l,required:i=!1,id:n,...o},d)=>{const c=n||`input-${Math.random().toString(36).substr(2,9)}`;return"checkbox"===s?e.jsx("input",{type:"checkbox",className:D("h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:d,id:c,...o}):"radio"===s?e.jsx("input",{type:"radio",className:D("h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:d,id:c,...o}):e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{htmlFor:c,className:D("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",l?"text-destructive":"text-foreground"),children:[a,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{type:s,className:D("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"border-destructive focus-visible:ring-destructive",t),ref:d,id:c,...o}),r&&!l&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r}),l&&e.jsx("p",{className:"text-sm text-destructive",children:l})]})});q.displayName="Input";const B=a.forwardRef(({className:t,options:s=[],value:a,_defaultValue:r,placeholder:l="Select an option",multiple:i=!1,disabled:n=!1,required:o=!1,label:h,description:g,error:p,searchable:b=!1,clearable:v=!1,loading:j=!1,id:y,name:f,onChange:N,onOpenChange:k,...w},F)=>{const[C,R]=d.useState(!1),[M,$]=d.useState(""),P=y||`select-${Math.random().toString(36).substr(2,9)}`,S=b&&M?s.filter(e=>e.label.toLowerCase().includes(M.toLowerCase())||e.value&&e.value.toString().toLowerCase().includes(M.toLowerCase())):s,A=e=>{if(i){const t=a||[],s=t.includes(e.value)?t.filter(t=>t!==e.value):[...t,e.value];N?.(s)}else N?.(e.value),R(!1),k?.(!1)},T=e=>i?a?.includes(e)||!1:a===e,L=i?a?.length>0:void 0!==a&&""!==a;return e.jsxs("div",{className:D("relative",t),children:[h&&e.jsxs("label",{htmlFor:P,className:D("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block",p?"text-destructive":"text-foreground"),children:[h,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:F,id:P,type:"button",className:D("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p&&"border-destructive focus:ring-destructive",!L&&"text-muted-foreground"),onClick:()=>{if(!n){const e=!C;R(e),k?.(e),e||$("")}},disabled:n,"aria-expanded":C,"aria-haspopup":"listbox",...w,children:[e.jsx("span",{className:"truncate",children:(()=>{if(!a)return l;if(i){const e=s.filter(e=>a.includes(e.value));return 0===e.length?l:1===e.length?e[0].label:`${e.length} items selected`}const e=s.find(e=>e.value===a);return e?e.label:l})()}),e.jsxs("div",{className:"flex items-center gap-1",children:[j&&e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v&&L&&!j&&e.jsx(E,{variant:"ghost",size:"icon",className:"h-4 w-4",onClick:e=>{e.stopPropagation(),N?.(i?[]:"")},children:e.jsx(c,{className:"h-3 w-3"})}),e.jsx(m,{className:D("h-4 w-4 transition-transform",C&&"rotate-180")})]})]}),e.jsxs("select",{name:f,value:a||"",onChange:()=>{},className:"sr-only",tabIndex:-1,multiple:i,required:o,children:[e.jsx("option",{value:"",children:"Select..."}),s.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),C&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md",children:[b&&e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{placeholder:"Search options...",value:M,onChange:e=>{$(e.target.value)},className:"pl-8"})]})}),e.jsx("div",{className:"py-1 max-h-60 overflow-auto",children:0===S.length?e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:M?"No options found":"No options available"}):S.map(t=>e.jsxs("div",{role:"option",tabIndex:0,"aria-selected":T(t.value),className:D("relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",T(t.value)&&"bg-primary text-primary-foreground",t.disabled&&"pointer-events-none opacity-50"),onClick:()=>!t.disabled&&A(t),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.disabled||A(t))},children:[e.jsx("span",{className:"flex-1",children:t.label}),i&&T(t.value)&&e.jsx(u,{className:"h-4 w-4"}),t.description&&e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:t.description})]},t.value))})]})]}),g&&!p&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g}),p&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:p})]})});B.displayName="Select";const H=()=>{const[t,s]=d.useState({exposureAmount:1e6,timeHorizon:1,lgd:.45,pd:.02,correlationFactor:.15,confidenceLevel:.999}),[a,r]=d.useState({revenue:5e7,debt:15e6,ebitda:8e6,currentRatio:1.5,quickRatio:1.2,industryRisk:"medium",managementQuality:"good",marketPosition:"strong"}),l=d.useMemo(()=>{const{exposureAmount:e,lgd:s,pd:a,timeHorizon:r,confidenceLevel:l}=t,i=e*a*s,n=e*s*Math.sqrt(a*(1-a)),o=(e=>{const t=Math.sqrt(-2*Math.log(1-e));return t-(2.515517+.802853*t+.010328*t*t)/(1+1.432788*t+.189269*t*t+.001308*t*t*t)})(l)*n;return{expectedLoss:i,unexpectedLoss:n,economicCapital:o,valueAtRisk:i+o,raroc:(.025*e-i)/o,cumulativePD:1-Math.pow(1-a,r),lossRate:i/e,capitalRatio:o/e}},[t]),i=d.useMemo(()=>{const{revenue:e,debt:t,ebitda:s,currentRatio:r,quickRatio:l,industryRisk:i,managementQuality:n,marketPosition:o}=a;let d=0,c=0;const m=t/s,x=s/e;c+=20,m<1?d+=20:m<2?d+=15:m<3?d+=10:m<4&&(d+=5),c+=20,x>.2?d+=20:x>.15?d+=15:x>.1?d+=10:x>.05&&(d+=5),c+=10,r>2?d+=10:r>1.5?d+=8:r>1.2?d+=6:r>1&&(d+=4),c+=10,l>1.5?d+=10:l>1.2?d+=8:l>1?d+=6:l>.8&&(d+=4),c+=15,d+={low:15,medium:10,high:5}[i]||0,c+=15,d+={excellent:15,good:12,fair:8,poor:3}[n]||0,c+=10,d+={dominant:10,strong:8,competitive:6,weak:3}[o]||0;const u=d/100*100;let h;return h=u>=90?"AAA":u>=85?"AA":u>=80?"A":u>=75?"BBB":u>=65?"BB":u>=55?"B":u>=45?"CCC":"D",{score:d,maxScore:100,scorePercentage:u,rating:h,estimatedPD:{AAA:1e-4,AA:5e-4,A:.002,BBB:.01,BB:.04,B:.12,CCC:.35,D:1}[h],debtToEbitda:m,ebitdaMargin:x}},[a]);d.useMemo(()=>{const e=[];for(let s=0;s<50;s++){const a=.1*Math.random(),r=t.exposureAmount*a*t.lgd;e.push({scenario:s+1,pd:a,loss:r/1e3,lossPercentage:r/t.exposureAmount*100})}return e.sort((e,t)=>e.loss-t.loss)},[t]);const n=(e,t)=>{s(s=>({...s,[e]:parseFloat(t)||0}))},o=(e,t)=>{r(s=>({...s,[e]:isNaN(parseFloat(t))?t:parseFloat(t)}))},c=["#3b82f6","#ef4444","#22c55e","#f59e0b","#8b5cf6"],m=[{range:"0-1%",count:850,probability:.85},{range:"1-3%",count:100,probability:.1},{range:"3-5%",count:30,probability:.03},{range:"5-10%",count:15,probability:.015},{range:">10%",count:5,probability:.005}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(I,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Risk Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"exposureAmount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Exposure Amount ($)"}),e.jsx(q,{id:"exposureAmount",type:"number",step:"1000",value:t.exposureAmount,onChange:e=>n("exposureAmount",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pd",className:"block text-sm font-medium text-gray-700 mb-1",children:"Probability of Default (%)"}),e.jsx(q,{id:"pd",type:"number",step:"0.001",value:100*t.pd,onChange:e=>n("pd",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lgd",className:"block text-sm font-medium text-gray-700 mb-1",children:"Loss Given Default (%)"}),e.jsx(q,{id:"lgd",type:"number",step:"0.01",value:100*t.lgd,onChange:e=>n("lgd",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeHorizon",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Horizon (Years)"}),e.jsx(q,{id:"timeHorizon",type:"number",step:"0.25",value:t.timeHorizon,onChange:e=>n("timeHorizon",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confidenceLevel",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confidence Level (%)"}),e.jsx(q,{id:"confidenceLevel",type:"number",step:"0.001",value:100*t.confidenceLevel,onChange:e=>n("confidenceLevel",e.target.value/100)})]})]})]})}),e.jsx(I,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Risk Metrics"}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Expected Loss"}),e.jsxs("div",{className:"text-xl font-bold text-red-600",children:["$",l.expectedLoss?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Unexpected Loss"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-600",children:["$",l.unexpectedLoss?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Economic Capital"}),e.jsxs("div",{className:"text-lg font-semibold text-blue-600",children:["$",l.economicCapital?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Value at Risk"}),e.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:["$",l.valueAtRisk?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"RAROC"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[(100*l.raroc)?.toFixed(1)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Cumulative PD"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:[(100*l.cumulativePD)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Loss Rate"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:[(100*l.lossRate)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Capital Ratio"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-600",children:[(100*l.capitalRatio)?.toFixed(2)||"N/A","%"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Credit Scorecard"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"revenue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Revenue ($)"}),e.jsx(q,{id:"revenue",type:"number",value:a.revenue,onChange:e=>o("revenue",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"debt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Debt ($)"}),e.jsx(q,{id:"debt",type:"number",value:a.debt,onChange:e=>o("debt",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ebitda",className:"block text-sm font-medium text-gray-700 mb-1",children:"EBITDA ($)"}),e.jsx(q,{id:"ebitda",type:"number",value:a.ebitda,onChange:e=>o("ebitda",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentRatio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Ratio"}),e.jsx(q,{id:"currentRatio",type:"number",step:"0.1",value:a.currentRatio,onChange:e=>o("currentRatio",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"industryRisk",className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry Risk"}),e.jsx(B,{id:"industryRisk",value:a.industryRisk,onChange:e=>o("industryRisk",e.target.value),options:[{value:"low",label:"Low Risk"},{value:"medium",label:"Medium Risk"},{value:"high",label:"High Risk"}]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"managementQuality",className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Quality"}),e.jsx(B,{id:"managementQuality",value:a.managementQuality,onChange:e=>o("managementQuality",e.target.value),options:[{value:"excellent",label:"Excellent"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"}]})]})]}),i&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Credit Rating:"}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:i.rating})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:"Score:"}),e.jsxs("span",{className:"font-semibold",children:[i.score,"/",i.maxScore," (",i.scorePercentage.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Estimated PD:"}),e.jsxs("span",{className:"font-semibold",children:[(100*i.estimatedPD).toFixed(3),"%"]})]})]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Loss Distribution"}),e.jsx(v,{width:"100%",height:250,children:e.jsxs(j,{data:m,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"range"}),e.jsx(N,{}),e.jsx(k,{formatter:(e,t)=>["count"===t?`${e} scenarios`:`${(100*e).toFixed(1)}%`,"count"===t?"Scenarios":"Probability"]}),e.jsx(w,{dataKey:"count",fill:"#3b82f6"})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Risk Concentration"}),e.jsx(v,{width:"100%",height:200,children:e.jsxs(F,{children:[e.jsx(C,{data:m,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,dataKey:"probability",nameKey:"range",children:m.map((t,s)=>e.jsx(R,{fill:c[s%c.length]},`cell-${s}`))}),e.jsx(k,{formatter:e=>`${(100*e).toFixed(1)}%`}),e.jsx(M,{})]})})]})]})})]})]})},O=()=>{const[t,s]=d.useState("swap"),[a,r]=d.useState({notional:1e7,maturity:5,fixedRate:.035,floatingRate:.03,paymentFrequency:2,dayCount:"ACT/360"}),[l,i]=d.useState({underlyingPrice:100,strikePrice:102,timeToExpiry:.25,riskFreeRate:.05,dividendYield:.02,contractSize:100}),n=d.useMemo(()=>{const{notional:e,maturity:t,fixedRate:s,floatingRate:r,paymentFrequency:l}=a;if(!e||!t||!l)return null;const i=l,n=t*i,o=s*e/i,d=r*e/i,c=r;let m=0;for(let a=1;a<=n;a++)m+=o/Math.pow(1+c/i,a);let x=d/Math.pow(1+c/i,1);x+=e/Math.pow(1+c/i,n),x-=e;const u=m-x;let h=0;for(let a=1;a<=n;a++)h+=a/i*(o/Math.pow(1+c/i,a));const g=h/m;return{swapValue:u,pvFixedLeg:m,pvFloatingLeg:x,duration:g,dv01:g*Math.abs(m)*1e-4,fixedPayment:o,floatingPayment:d}},[a]),o=d.useMemo(()=>{const{underlyingPrice:e,timeToExpiry:t,riskFreeRate:s,dividendYield:a,contractSize:r}=l;if(!e||!t||!r)return null;const i=e*Math.exp((s-a)*t);return{futuresPrice:i,contractValue:i*r,basis:i-e,carryCost:e*(s-a)*t,underlyingValue:e*r}},[l]),c=d.useMemo(()=>{const e=[];for(let t=80;t<=120;t+=2)e.push(t);return"swap"===t?e.map(e=>({spotPrice:e,payoff:(e/100-a.fixedRate)*a.notional*a.maturity/1e6,derivative:"Interest Rate Swap"})):e.map(e=>({spotPrice:e,payoff:(e*Math.exp((l.riskFreeRate-l.dividendYield)*l.timeToExpiry)-l.strikePrice)*l.contractSize/1e3,derivative:"Futures Contract"}))},[t,a,l]),m=d.useMemo(()=>{const e=[],s=[-.02,-.01,-.005,0,.005,.01,.02];return"swap"===t&&n?s.forEach(t=>{const s=(a.floatingRate+t-a.fixedRate)*a.notional*a.maturity;e.push({shock:100*t,valueChange:s/1e6,newValue:(n.swapValue+s)/1e6})}):o&&s.forEach(t=>{const s=(l.underlyingPrice*(1+t)*Math.exp((l.riskFreeRate-l.dividendYield)*l.timeToExpiry)-o.futuresPrice)*l.contractSize;e.push({shock:100*t,valueChange:s/1e3,newValue:(o.contractValue+s)/1e3})}),e},[t,a,l,n,o]),x=(e,t)=>{r(s=>({...s,[e]:parseFloat(t)||0}))},u=(e,t)=>{i(s=>({...s,[e]:parseFloat(t)||0}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx(E,{variant:"swap"===t?"primary":"secondary",onClick:()=>s("swap"),children:"Interest Rate Swaps"}),e.jsx(E,{variant:"futures"===t?"primary":"secondary",onClick:()=>s("futures"),children:"Futures Contracts"})]}),"swap"===t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(I,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Swap Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notional-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notional Amount ($)"}),e.jsx(q,{id:"notional-amount",type:"number",step:"1000000",value:a.notional,onChange:e=>x("notional",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maturity-years",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maturity (Years)"}),e.jsx(q,{id:"maturity-years",type:"number",step:"0.25",value:a.maturity,onChange:e=>x("maturity",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fixed-rate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixed Rate (%)"}),e.jsx(q,{id:"fixed-rate",type:"number",step:"0.001",value:100*a.fixedRate,onChange:e=>x("fixedRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"floating-rate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Floating Rate (%)"}),e.jsx(q,{id:"floating-rate",type:"number",step:"0.001",value:100*a.floatingRate,onChange:e=>x("floatingRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payment-frequency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsx(B,{id:"payment-frequency",value:a.paymentFrequency,onChange:e=>x("paymentFrequency",e.target.value),options:[{value:1,label:"Annual"},{value:2,label:"Semi-Annual"},{value:4,label:"Quarterly"}]})]})]})]})}),e.jsx(I,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Swap Valuation"}),n&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Swap Value"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",n.swapValue?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Fixed Leg"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",n.pvFixedLeg?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Floating Leg"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",n.pvFloatingLeg?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:n.duration?.toFixed(2)||"N/A"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"DV01"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:["$",n.dv01?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Fixed Payment"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:["$",n.fixedPayment?.toLocaleString()||"N/A"]})]})]})]})})]}),"futures"===t&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(I,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Futures Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"underlying-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Underlying Price ($)"}),e.jsx(q,{id:"underlying-price",type:"number",step:"0.01",value:l.underlyingPrice,onChange:e=>u("underlyingPrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"strike-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Strike Price ($)"}),e.jsx(q,{id:"strike-price",type:"number",step:"0.01",value:l.strikePrice,onChange:e=>u("strikePrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time-to-expiry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time to Expiry (Years)"}),e.jsx(q,{id:"time-to-expiry",type:"number",step:"0.01",value:l.timeToExpiry,onChange:e=>u("timeToExpiry",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"risk-free-rate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk-Free Rate (%)"}),e.jsx(q,{id:"risk-free-rate",type:"number",step:"0.001",value:100*l.riskFreeRate,onChange:e=>u("riskFreeRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dividend-yield",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dividend Yield (%)"}),e.jsx(q,{id:"dividend-yield",type:"number",step:"0.001",value:100*l.dividendYield,onChange:e=>u("dividendYield",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contract-size",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Size"}),e.jsx(q,{id:"contract-size",type:"number",step:"1",value:l.contractSize,onChange:e=>u("contractSize",e.target.value)})]})]})]})}),e.jsx(I,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Futures Valuation"}),o&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Futures Price"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",o.futuresPrice?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Contract Value"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["$",o.contractValue?.toLocaleString()||"N/A"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Basis"}),e.jsxs("div",{className:"text-lg font-semibold text-purple-600",children:["$",o.basis?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Carry Cost"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:["$",o.carryCost?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Underlying Value"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",o.underlyingValue?.toLocaleString()||"N/A"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Payoff Diagram"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs($,{data:c,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"spotPrice",tickFormatter:e=>"swap"===t?`${e}%`:`$${e}`}),e.jsx(N,{tickFormatter:e=>"swap"===t?`$${e}M`:`$${e}K`}),e.jsx(k,{formatter:e=>["swap"===t?`$${e.toFixed(2)}M`:`$${e.toFixed(2)}K`,"P&L"],labelFormatter:e=>"swap"===t?`Rate: ${e}%`:`Spot: $${e}`}),e.jsx(P,{type:"monotone",dataKey:"payoff",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3})]})})]})}),e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Risk Scenarios"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(S,{data:m,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"shock",tickFormatter:e=>`${e>0?"+":""}${e}${"swap"===t?"bps":"%"}`}),e.jsx(N,{tickFormatter:e=>"swap"===t?`$${e.toFixed(1)}M`:`$${e.toFixed(1)}K`}),e.jsx(k,{formatter:(e,s)=>["swap"===t?`$${e.toFixed(2)}M`:`$${e.toFixed(2)}K`,"valueChange"===s?"Value Change":"New Value"],labelFormatter:e=>`Shock: ${e>0?"+":""}${e}${"swap"===t?" bps":"%"}`}),e.jsx(M,{}),e.jsx(A,{type:"monotone",dataKey:"valueChange",stroke:"#ef4444",name:"Value Change",strokeWidth:2}),e.jsx(A,{type:"monotone",dataKey:"newValue",stroke:"#22c55e",name:"New Value",strokeWidth:2})]})})]})})]})]})},W=()=>{const[t,s]=d.useState({faceValue:1e3,couponRate:.05,maturity:5,paymentFrequency:2,marketYield:.045,daysToSettlement:0}),[a,r]=d.useState([{maturity:.25,yield:.02},{maturity:.5,yield:.025},{maturity:1,yield:.03},{maturity:2,yield:.035},{maturity:5,yield:.04},{maturity:10,yield:.045},{maturity:30,yield:.05}]),l=d.useMemo(()=>{const{faceValue:e,couponRate:s,maturity:a,paymentFrequency:r,marketYield:l}=t;if(!e||!a||!r)return null;const i=r,n=a*i,o=s*e/i,d=l/i;let c=0;for(let t=1;t<=n;t++)c+=o/Math.pow(1+d,t);const m=e/Math.pow(1+d,n),x=c+m;let u=0;for(let t=1;t<=n;t++)u+=t/i*((t===n?o+e:o)/Math.pow(1+d,t));const h=u/x,g=h/(1+d);let p=0;for(let t=1;t<=n;t++){const s=t/i;p+=(t===n?o+e:o)/Math.pow(1+d,t)*s*(s+1/i)}return{price:x,ytm:l,currentYield:s*e/x,macaulayDuration:h,modifiedDuration:g,convexity:p/(x*Math.pow(1+d,2)),dv01:g*x*1e-4,pvCoupons:c,pvPrincipal:m}},[t]),i=d.useMemo(()=>{if(!l)return null;const{price:e,modifiedDuration:t,convexity:s}=l;return[-.02,-.01,-.005,0,.005,.01,.02].map(a=>{const r=-t*a*e,l=r+.5*s*a*a*e;return{yieldShock:100*a,priceChange1st:r/e*100,priceChange2nd:l/e*100,newPrice1st:e+r,newPrice2nd:e+l}})},[l]),n=(e,t)=>{s(s=>({...s,[e]:parseFloat(t)||0}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(I,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bond Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"faceValue",className:"block text-sm font-medium text-gray-700 mb-1",children:"Face Value ($)"}),e.jsx(q,{id:"faceValue",type:"number",step:"1",value:t.faceValue,onChange:e=>n("faceValue",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"couponRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Rate (%)"}),e.jsx(q,{id:"couponRate",type:"number",step:"0.001",value:100*t.couponRate,onChange:e=>n("couponRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maturity",className:"block text-sm font-medium text-gray-700 mb-1",children:"Maturity (Years)"}),e.jsx(q,{id:"maturity",type:"number",step:"0.25",value:t.maturity,onChange:e=>n("maturity",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentFrequency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Frequency"}),e.jsx(B,{id:"paymentFrequency",value:t.paymentFrequency,onChange:e=>n("paymentFrequency",e.target.value),options:[{value:1,label:"Annual"},{value:2,label:"Semi-Annual"},{value:4,label:"Quarterly"},{value:12,label:"Monthly"}]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"marketYield",className:"block text-sm font-medium text-gray-700 mb-1",children:"Market Yield (%)"}),e.jsx(q,{id:"marketYield",type:"number",step:"0.001",value:100*t.marketYield,onChange:e=>n("marketYield",e.target.value/100)})]})]})]})}),e.jsx(I,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bond Analytics"}),l&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Bond Price"}),e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:["$",l.price?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"YTM"}),e.jsxs("div",{className:"text-lg font-semibold text-green-600",children:[(100*l.ytm)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Modified Duration"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:l.modifiedDuration?.toFixed(3)||"N/A"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Convexity"}),e.jsx("div",{className:"text-lg font-semibold text-orange-600",children:l.convexity?.toFixed(2)||"N/A"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"DV01"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:["$",l.dv01?.toFixed(4)||"N/A"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Current Yield"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600",children:[(100*l.currentYield)?.toFixed(3)||"N/A","%"]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Coupons"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:["$",l.pvCoupons?.toFixed(2)||"N/A"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"PV Principal"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-600",children:["$",l.pvPrincipal?.toFixed(2)||"N/A"]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interest Rate Sensitivity"}),i&&e.jsx(v,{width:"100%",height:300,children:e.jsxs(S,{data:i,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"yieldShock",tickFormatter:e=>`${e>0?"+":""}${e}`}),e.jsx(N,{tickFormatter:e=>`${e.toFixed(1)}%`}),e.jsx(k,{formatter:(e,t)=>[`${e.toFixed(2)}%`,"priceChange1st"===t?"Duration Only":"Duration + Convexity"],labelFormatter:e=>`Yield Shock: ${e>0?"+":""}${e} bps`}),e.jsx(M,{}),e.jsx(A,{type:"monotone",dataKey:"priceChange1st",stroke:"#ef4444",name:"Duration Only",strokeDasharray:"5 5"}),e.jsx(A,{type:"monotone",dataKey:"priceChange2nd",stroke:"#3b82f6",name:"Duration + Convexity",strokeWidth:2})]})})]})}),e.jsx(I,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yield Curve"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(S,{data:a,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"maturity",tickFormatter:e=>`${e}Y`}),e.jsx(N,{tickFormatter:e=>`${(100*e).toFixed(1)}%`}),e.jsx(k,{formatter:e=>[`${(100*e).toFixed(2)}%`,"Yield"],labelFormatter:e=>`Maturity: ${e} Years`}),e.jsx(A,{type:"monotone",dataKey:"yield",stroke:"#22c55e",strokeWidth:3,dot:{fill:"#22c55e",strokeWidth:2,r:4}})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Edit Yield Curve Points"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:a.map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"w-8",children:[t.maturity,"Y:"]}),e.jsx(q,{type:"number",step:"0.001",value:100*t.yield,onChange:e=>((e,t,s)=>{r(a=>a.map((a,r)=>r===e?{...a,[t]:parseFloat(s)||0}:a))})(s,"yield",e.target.value/100),className:"text-xs h-8"}),e.jsx("span",{className:"text-gray-500",children:"%"})]},s))})]})]})})]})]})},Q=()=>{const[t,s]=d.useState({spotPrice:100,strikePrice:100,timeToExpiry:.25,riskFreeRate:.05,volatility:.2,optionType:"call",dividendYield:0}),[a,r]=d.useState("black-scholes"),l=d.useMemo(()=>{const{spotPrice:e,strikePrice:s,timeToExpiry:a,riskFreeRate:r,volatility:l,optionType:i,dividendYield:n}=t;if(!(e&&s&&a&&l))return null;const o=(Math.log(e/s)+(r-n+.5*l*l)*a)/(l*Math.sqrt(a)),d=o-l*Math.sqrt(a),c=e=>.5*(1+m(e/Math.sqrt(2))),m=e=>{const t=e<0?-1:1,s=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*s-1.453152027)*s+1.421413741)*s-.284496736)*s+.254829592)*s*Math.exp(-e*e))},x=c(o),u=c(d),h=c(-o),g=c(-d),p=e=>Math.exp(-.5*e*e)/Math.sqrt(2*Math.PI);let b,v,j;const y=Math.exp(-n*a)*p(o)/(e*l*Math.sqrt(a)),f=(-e*Math.exp(-n*a)*p(o)*l/(2*Math.sqrt(a))-r*s*Math.exp(-r*a)*("call"===i?u:g)+n*e*Math.exp(-n*a)*("call"===i?x:h))/365,N=e*Math.exp(-n*a)*p(o)*Math.sqrt(a)/100;return"call"===i?(b=e*Math.exp(-n*a)*x-s*Math.exp(-r*a)*u,v=Math.exp(-n*a)*x,j=s*a*Math.exp(-r*a)*u/100):(b=s*Math.exp(-r*a)*g-e*Math.exp(-n*a)*h,v=-Math.exp(-n*a)*h,j=-s*a*Math.exp(-r*a)*g/100),{price:b,delta:v,gamma:y,theta:f,vega:N,rho:j}},[t]),i=d.useMemo(()=>{const{spotPrice:e,strikePrice:s,timeToExpiry:a,riskFreeRate:r,volatility:l,optionType:i}=t;if(!(e&&s&&a&&l))return null;const n=a/100,o=Math.exp(l*Math.sqrt(n)),d=1/o,c=(Math.exp(r*n)-d)/(o-d),m=Array(101).fill(null).map(()=>Array(101).fill(0));for(let t=0;t<=100;t++){const a=e*Math.pow(o,2*t-100);m[100][t]="call"===i?Math.max(a-s,0):Math.max(s-a,0)}for(let t=99;t>=0;t--)for(let e=0;e<=t;e++)m[t][e]=Math.exp(-r*n)*(c*m[t+1][e+1]+(1-c)*m[t+1][e]);return{price:m[0][0]}},[t]),n=(e,t)=>{s(s=>({...s,[e]:parseFloat(t)||0}))},o=d.useMemo(()=>{const e=[80,90,100,110,120];return[.083,.167,.25,.5,1].map(t=>({expiry:`${Math.round(12*t)}M`,...e.reduce((e,s)=>{const a=.2+.05*Math.abs(s-100)/100+.02*Math.exp(-t);return e[`K${s}`]=a,e},{})}))},[]),c="black-scholes"===a?l:i;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(I,{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Option Parameters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"modelType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Model Type"}),e.jsx(B,{id:"modelType",value:a,onChange:e=>r(e.target.value),options:[{value:"black-scholes",label:"Black-Scholes"},{value:"binomial",label:"Binomial Tree"}]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"optionType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Option Type"}),e.jsx(B,{id:"optionType",value:t.optionType,onChange:e=>n("optionType",e.target.value),options:[{value:"call",label:"Call"},{value:"put",label:"Put"}]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"spotPrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spot Price ($)"}),e.jsx(q,{id:"spotPrice",type:"number",step:"0.01",value:t.spotPrice,onChange:e=>n("spotPrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"strikePrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"Strike Price ($)"}),e.jsx(q,{id:"strikePrice",type:"number",step:"0.01",value:t.strikePrice,onChange:e=>n("strikePrice",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"timeToExpiry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Time to Expiry (Years)"}),e.jsx(q,{id:"timeToExpiry",type:"number",step:"0.01",value:t.timeToExpiry,onChange:e=>n("timeToExpiry",e.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"riskFreeRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk-Free Rate (%)"}),e.jsx(q,{id:"riskFreeRate",type:"number",step:"0.001",value:100*t.riskFreeRate,onChange:e=>n("riskFreeRate",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"volatility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Volatility (%)"}),e.jsx(q,{id:"volatility",type:"number",step:"0.01",value:100*t.volatility,onChange:e=>n("volatility",e.target.value/100)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dividendYield",className:"block text-sm font-medium text-gray-700 mb-1",children:"Dividend Yield (%)"}),e.jsx(q,{id:"dividendYield",type:"number",step:"0.01",value:100*t.dividendYield,onChange:e=>n("dividendYield",e.target.value/100)})]})]})]})}),e.jsx(I,{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Pricing Results"}),c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Option Price"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["$",c.price?.toFixed(4)||"N/A"]})]}),l&&"black-scholes"===a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Delta"}),e.jsx("div",{className:"text-xl font-semibold text-green-600",children:l.delta?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Gamma"}),e.jsx("div",{className:"text-xl font-semibold text-purple-600",children:l.gamma?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Theta"}),e.jsx("div",{className:"text-xl font-semibold text-red-600",children:l.theta?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Vega"}),e.jsx("div",{className:"text-xl font-semibold text-yellow-600",children:l.vega?.toFixed(4)||"N/A"})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Rho"}),e.jsx("div",{className:"text-xl font-semibold text-indigo-600",children:l.rho?.toFixed(4)||"N/A"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-md font-semibold mb-3",children:"Implied Volatility Surface"}),e.jsx(v,{width:"100%",height:300,children:e.jsxs(S,{data:o,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"expiry"}),e.jsx(N,{tickFormatter:e=>`${(100*e).toFixed(0)}%`}),e.jsx(k,{formatter:e=>`${(100*e).toFixed(2)}%`}),e.jsx(M,{}),e.jsx(A,{type:"monotone",dataKey:"K80",stroke:"#ef4444",name:"K=80"}),e.jsx(A,{type:"monotone",dataKey:"K90",stroke:"#f97316",name:"K=90"}),e.jsx(A,{type:"monotone",dataKey:"K100",stroke:"#22c55e",name:"K=100"}),e.jsx(A,{type:"monotone",dataKey:"K110",stroke:"#3b82f6",name:"K=110"}),e.jsx(A,{type:"monotone",dataKey:"K120",stroke:"#8b5cf6",name:"K=120"})]})})]})]})})]})})},G=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,s]=d.useState("options");d.useEffect(()=>{const e=e=>{s(e.detail.tab)};return window.addEventListener("select-tab",e),()=>window.removeEventListener("select-tab",e)},[]);const a=[{id:"options",label:"Options Pricing",component:Q},{id:"fixed-income",label:"Fixed Income",component:W},{id:"credit",label:"Credit Modeling",component:H},{id:"derivatives",label:"Derivatives",component:O}],r=a.find(e=>e.id===t)?.component;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Professional-grade pricing models and risk analytics for complex financial instruments"})]}),e.jsxs(I,{className:"mb-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8","aria-label":"Tabs",children:a.map(a=>e.jsx(E,{variant:t===a.id?"primary":"ghost",onClick:()=>s(a.id),className:"py-4 px-1 border-b-2 font-medium text-sm "+(t===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:a.label},a.id))})}),e.jsx("div",{className:"p-6",children:r&&e.jsx(V,{level:"component",children:e.jsx(r,{})})})]})]})})}},Symbol.toStringTag,{value:"Module"}));export{G as A,E as B,I as C,T as I,V as P,B as S,Y as a,K as b,D as c,z as d,q as e};
//# sourceMappingURL=advanced-analytics-y00dU25g.js.map
