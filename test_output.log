ğŸš€ Initializing Core Functionality Test Suite...

ğŸ“Š Production Monitor initialized
ğŸ“Š Production Monitor initialized
ğŸš€ Enhanced CLI System initializing...
ğŸ“‹ Command Registry initializing...
[31;1mFailed to load persisted registry: localStorage is not defined[0m
âœ… Command Registry initialized
ğŸ”Œ Plugin Manager initializing...
[31;1mFailed to load plugin registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: DCF
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: LBO
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: COMPS
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: EPV
ğŸ“¦ Registered plugin: calculators (Financial Calculators)
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: QUOTE
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: CHART
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: NEWS
ğŸ“¦ Registered plugin: market-data (Market Data Provider)
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: PORTFOLIO
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: ANALYZE
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: OPTIMIZE
ğŸ“¦ Registered plugin: portfolio (Portfolio Management)
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: EXPORT
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: REPORT
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: VISUALIZE
ğŸ“¦ Registered plugin: reporting (Advanced Reporting)
ğŸ“ Registered command: SCHEDULE
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: WORKFLOW
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: BATCH
ğŸ“¦ Registered plugin: automation (Workflow Automation)
âœ… Plugin Manager initialized
ğŸ”’ Security Manager initializing...
ğŸ”’ Security settings persistence not available in current environment
âœ… Security Manager initialized
ğŸ§  Context Manager initializing...
ğŸ§  Context persistence not available in current environment
âœ… Context Manager initialized
ğŸ“š Help System initializing...
ğŸ¯ Initializing Interactive Tutorials...
âœ… Interactive Tutorials initialized
ğŸ¯ Initializing Contextual Help...
âœ… Contextual Help initialized
âœ… Help System initialized
ğŸ¯ Auto-Completion System initializing...
âœ… Auto-Completion System initialized
ğŸ¯ Interactive Command System initializing...
âœ… Interactive Command System initialized
ğŸ”— Command Pipeline System initializing...
[31;1mFailed to load saved pipelines: localStorage is not defined[0m
âœ… Command Pipeline System initialized
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: HELP
ğŸ“ Registered command: CLEAR
ğŸ“ Registered command: HISTORY
ğŸ“ Registered command: DCF
ğŸ“ Registered command: COMPS
ğŸ“ Registered command: LBO
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'DCF' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: QUOTE
[31;1mCommand 'COMPS' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'LBO' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'QUOTE' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'CHART' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
ğŸ“ Registered command: CHART
ğŸ“ Registered command: NEWS
ğŸ“ Registered command: PORTFOLIO
ğŸ“ Registered command: ANALYZE
ğŸ“ Registered command: REPORT
ğŸ“ Registered command: EXPORT
ğŸ“ Registered command: VISUALIZE
ğŸ“ Registered command: INTERACTIVE
ğŸ“ Registered command: COMPLETE
ğŸ“ Registered command: PIPELINE
ğŸ“ Registered command: BATCH
ğŸ“ Registered command: JOBS
ğŸ“ Registered command: TUTORIAL
ğŸ“ Registered command: TIPS
ğŸ“ Registered command: LEARN
ğŸ”„ Loading core plugins...
[31;1mCommand 'NEWS' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'PORTFOLIO' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'ANALYZE' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'REPORT' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'EXPORT' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'VISUALIZE' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mCommand 'BATCH' already registered, overwriting[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to persist registry: localStorage is not defined[0m
[31;1mFailed to restore CLI state: localStorage is not defined[0m
ğŸ”Œ Loaded plugin: calculators v1.0.0
ğŸ”Œ Loaded plugin: market-data v1.0.0
ğŸ”Œ Loaded plugin: portfolio v1.0.0
ğŸ”Œ Loaded plugin: reporting v1.0.0
ğŸ”Œ Loaded plugin: automation v1.0.0
âœ… Loaded 5 core plugins
ğŸš€ Starting production monitoring...
ğŸ“ˆ Metrics collection started
[INFO] Health check: healthy {
  memory: { status: 'healthy', value: '0.00%' },
  errorRate: { status: 'healthy', value: '0.00%' },
  responseTime: { status: 'healthy', value: '0.00ms' }
}
ğŸ¥ Health checks started
âœ… Production monitoring started
âœ… Enhanced CLI System initialized successfully
âœ… System initialized successfully

ğŸ¯ STARTING COMPREHENSIVE CORE FUNCTIONALITY TESTING

============================================================

ğŸ“ Testing Basic CLI Commands...

[INFO] Command executed {
  command: 'HELP',
  success: true,
  responseTime: 4.097124999999998,
  userId: undefined,
  sessionId: undefined
}
âœ… help: PASSED
[INFO] Command executed {
  command: 'CLEAR',
  success: true,
  responseTime: 0.7792499999999976,
  userId: undefined,
  sessionId: undefined
}
âœ… clear: PASSED
[INFO] Command executed {
  command: 'HISTORY',
  success: true,
  responseTime: 0.09662500000000307,
  userId: undefined,
  sessionId: undefined
}
âœ… history: PASSED
[INFO] Command executed {
  command: 'TUTORIAL',
  success: true,
  responseTime: 0.19274999999999665,
  userId: undefined,
  sessionId: undefined
}
âœ… tutorial: PASSED

ğŸ’° Testing Financial Calculations...

[INFO] Command executed {
  command: 'DCF',
  success: true,
  responseTime: 0.21279100000000284,
  userId: undefined,
  sessionId: undefined
}
âœ… DCF Analysis - Apple: PASSED
[INFO] Command executed {
  command: 'COMPS',
  success: true,
  responseTime: 0.1755420000000001,
  userId: undefined,
  sessionId: undefined
}
âœ… Comps Analysis - Tech Sector: PASSED
[INFO] Command executed {
  command: 'LBO',
  success: true,
  responseTime: 0.13937499999999403,
  userId: undefined,
  sessionId: undefined
}
âœ… LBO Analysis - Tesla: PASSED

ğŸ“Š Testing Market Data Functionality...

[INFO] Command executed {
  command: 'QUOTE',
  success: true,
  responseTime: 0.16645799999999866,
  userId: undefined,
  sessionId: undefined
}
âœ… Quote - Apple: PASSED
[INFO] Command executed {
  command: 'QUOTE',
  success: true,
  responseTime: 0.04954199999999531,
  userId: undefined,
  sessionId: undefined
}
âœ… Quote - Microsoft: PASSED
[INFO] Command executed {
  command: 'CHART',
  success: true,
  responseTime: 1.4627079999999992,
  userId: undefined,
  sessionId: undefined
}
âœ… Chart Data - Apple: PASSED
[INFO] Command executed {
  command: 'NEWS',
  success: true,
  responseTime: 0.134999999999998,
  userId: undefined,
  sessionId: undefined
}
âœ… Market News: PASSED

ğŸ“ Testing Portfolio Management...

[INFO] Command executed {
  command: 'PORTFOLIO',
  success: true,
  responseTime: 0.12383400000000222,
  userId: undefined,
  sessionId: undefined
}
âœ… Portfolio Create: PASSED
[INFO] Command executed {
  command: 'PORTFOLIO',
  success: true,
  responseTime: 0.09799999999999898,
  userId: undefined,
  sessionId: undefined
}
âœ… Add Holdings: PASSED
[INFO] Command executed {
  command: 'PORTFOLIO',
  success: true,
  responseTime: 0.043124999999996305,
  userId: undefined,
  sessionId: undefined
}
âœ… Portfolio List: PASSED
[INFO] Command executed {
  command: 'PORTFOLIO',
  success: true,
  responseTime: 0.031083000000002414,
  userId: undefined,
  sessionId: undefined
}
âœ… Portfolio Analysis: PASSED
[INFO] Command executed {
  command: 'PORTFOLIO',
  success: true,
  responseTime: 0.09270799999999468,
  userId: undefined,
  sessionId: undefined
}
âœ… Portfolio Export: PASSED

ğŸ“‹ Testing Reporting Functionality...

[INFO] Command executed {
  command: 'REPORT',
  success: true,
  responseTime: 0.2731670000000008,
  userId: undefined,
  sessionId: undefined
}
âœ… Generate Report: PASSED
[INFO] Command executed {
  command: 'EXPORT',
  success: true,
  responseTime: 0.1074169999999981,
  userId: undefined,
  sessionId: undefined
}
âœ… Export Data - Excel: PASSED
[INFO] Command executed {
  command: 'EXPORT',
  success: true,
  responseTime: 0.09675000000000011,
  userId: undefined,
  sessionId: undefined
}
âœ… Export Data - CSV: PASSED
[INFO] Command executed {
  command: 'VISUALIZE',
  success: true,
  responseTime: 0.08500000000000085,
  userId: undefined,
  sessionId: undefined
}
âœ… Visualize Data: PASSED

ğŸ¤– Testing Automation Features...

ğŸ” Testing Create Pipeline with role: analyst
[31;1m[WARN] Security event: permission_denied {[0m
[31;1m  userId: 'test-user-analyst',[0m
[31;1m  command: 'PIPELINE',[0m
[31;1m  required: 'utility:write',[0m
[31;1m  userRole: undefined[0m
[31;1m}[0m
âŒ Create Pipeline: FAILED
ğŸ” Testing Batch Commands with role: analyst
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: '"quote' }[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: 'AAPL"' }[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: '"quote' }[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: 'MSFT"' }[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: '"quote' }[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: 'test-user-analyst', command: 'TSLA"' }[0m
[INFO] Command executed {
  command: 'BATCH',
  success: true,
  responseTime: 1.158417,
  userId: 'test-user-analyst',
  sessionId: 'test-session-1756770002701'
}
âœ… Batch Commands: PASSED
ğŸ” Testing Workflow Execution with role: analyst
[INFO] Command executed {
  command: 'WORKFLOW',
  success: true,
  responseTime: 0.0925410000000042,
  userId: 'test-user-analyst',
  sessionId: 'test-session-1756770002702'
}
âœ… Workflow Execution: PASSED
ğŸ” Testing Job Scheduling with role: analyst
[INFO] Command executed {
  command: 'JOBS',
  success: true,
  responseTime: 0.09266600000000125,
  userId: 'test-user-analyst',
  sessionId: 'test-session-1756770002702'
}
âœ… Job Scheduling: PASSED

ğŸ”’ Testing Security Features...

[31;1m[WARN] Security event: permission_denied {[0m
[31;1m  userId: undefined,[0m
[31;1m  command: 'DCF',[0m
[31;1m  required: 'financial:analyze',[0m
[31;1m  userRole: 'viewer'[0m
[31;1m}[0m
âœ… Permission Enforcement - Viewer: PASSED
[INFO] Command executed {
  command: 'DCF',
  success: true,
  responseTime: 0.07800000000000296,
  userId: undefined,
  sessionId: undefined
}
âœ… Permission Enforcement - Analyst: PASSED
[31;1mğŸ”’ Security Event: blocked_request {[0m
[31;1m  reason: 'Cross-site scripting detected',[0m
[31;1m  command: 'help <script>alert("xss")</script>',[0m
[31;1m  userId: undefined[0m
[31;1m}[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: undefined, command: 'help' }[0m
âœ… Input Sanitization - XSS: PASSED
[31;1mğŸ”’ Security Event: blocked_request {[0m
[31;1m  reason: 'Suspicious pattern detected: \\b(rm|del|delete|drop|truncate)\\b',[0m
[31;1m  command: "quote AAPL'; DROP TABLE users; --",[0m
[31;1m  patterns: [ '\\b(rm|del|delete|drop|truncate)\\b' ],[0m
[31;1m  userId: undefined[0m
[31;1m}[0m
[31;1m[WARN] Security event: blocked_request { reason: undefined, userId: undefined, command: 'quote' }[0m
âœ… Input Sanitization - SQL Injection: PASSED

ğŸ”Œ Testing Plugin System...

âœ… Plugin Discovery: PASSED
[INFO] Command executed {
  command: 'DCF',
  success: true,
  responseTime: 0.06504199999999827,
  userId: undefined,
  sessionId: undefined
}
âœ… Calculator Plugin: PASSED
[INFO] Command executed {
  command: 'QUOTE',
  success: true,
  responseTime: 0.030833999999998696,
  userId: undefined,
  sessionId: undefined
}
âœ… Market Data Plugin: PASSED
âœ… Plugin Method Validation: PASSED

ğŸ¯ CORE FUNCTIONALITY TEST RESULTS
============================================================

ğŸ¯ OVERALL RESULTS:
   Total Tests: 32
   âœ… Passed: 31
   âŒ Failed: 1
   ğŸ“ˆ Success Rate: 96.88%
   â±ï¸  Duration: 0.04s

ğŸ“‹ CATEGORY BREAKDOWN:
   Basic Commands: 4/4 (100.0%)
   Financial Calculations: 3/3 (100.0%)
   Market Data: 4/4 (100.0%)
   Portfolio Management: 5/5 (100.0%)
   Reporting: 4/4 (100.0%)
   Automation: 3/4 (75.0%)
   Security: 4/4 (100.0%)
   Plugins: 4/4 (100.0%)

ğŸ† FUNCTIONALITY READINESS VERDICT:
   ğŸ‰ ALL CORE FEATURES OPERATIONAL
   âœ… Critical functionality validated
   âœ… Enterprise features working
   âœ… Security systems active
   âœ… Plugin architecture functional

============================================================
ğŸ CORE FUNCTIONALITY TESTING COMPLETE
============================================================

ğŸ“‹ DETAILED TEST RESULTS:

ğŸ”¹ Basic Commands:
   âœ… help: help executed successfully
   âœ… clear: clear executed successfully
   âœ… history: history executed successfully
   âœ… tutorial: tutorial executed successfully

ğŸ”¹ Financial Calculations:
   âœ… DCF Analysis - Apple: DCF Analysis - Apple calculation completed
   âœ… Comps Analysis - Tech Sector: Comps Analysis - Tech Sector calculation completed
   âœ… LBO Analysis - Tesla: LBO Analysis - Tesla calculation completed

ğŸ”¹ Market Data:
   âœ… Quote - Apple: Quote - Apple data retrieved
   âœ… Quote - Microsoft: Quote - Microsoft data retrieved
   âœ… Chart Data - Apple: Chart Data - Apple data retrieved
   âœ… Market News: Market News data retrieved

ğŸ”¹ Portfolio Management:
   âœ… Portfolio Create: Portfolio Create operation completed
   âœ… Add Holdings: Add Holdings operation completed
   âœ… Portfolio List: Portfolio List operation completed
   âœ… Portfolio Analysis: Portfolio Analysis operation completed
   âœ… Portfolio Export: Portfolio Export operation completed

ğŸ”¹ Reporting:
   âœ… Generate Report: Generate Report completed
   âœ… Export Data - Excel: Export Data - Excel completed
   âœ… Export Data - CSV: Export Data - CSV completed
   âœ… Visualize Data: Visualize Data completed

ğŸ”¹ Automation:
   âŒ Create Pipeline: Failed Create Pipeline
   âœ… Batch Commands: Batch Commands completed
   âœ… Workflow Execution: Workflow Execution completed
   âœ… Job Scheduling: Job Scheduling completed

ğŸ”¹ Security:
   âœ… Permission Enforcement - Viewer: Permission Enforcement - Viewer behaved correctly
   âœ… Permission Enforcement - Analyst: Permission Enforcement - Analyst behaved correctly
   âœ… Input Sanitization - XSS: Input Sanitization - XSS behaved correctly
   âœ… Input Sanitization - SQL Injection: Input Sanitization - SQL Injection behaved correctly

ğŸ”¹ Plugins:
   âœ… Plugin Discovery: Plugin Discovery passed
   âœ… Calculator Plugin: Calculator Plugin executed successfully
   âœ… Market Data Plugin: Market Data Plugin executed successfully
   âœ… Plugin Method Validation: Plugin Method Validation passed

[INFO] Metrics collected {
  commandsTotal: 26,
  successRate: '100.00%',
  avgResponseTime: '0.38ms',
  errorRate: '0.00%',
  activeUsers: 1
}
[INFO] Health check: healthy {
  memory: { status: 'healthy', value: '0.00%' },
  errorRate: { status: 'healthy', value: '0.00%' },
  responseTime: { status: 'healthy', value: '0.38ms' }
}
[INFO] Metrics collected {
  commandsTotal: 26,
  successRate: '100.00%',
  avgResponseTime: '0.38ms',
  errorRate: '0.00%',
  activeUsers: 1
}
[INFO] Metrics collected {
  commandsTotal: 26,
  successRate: '100.00%',
  avgResponseTime: '0.38ms',
  errorRate: '0.00%',
  activeUsers: 1
}
